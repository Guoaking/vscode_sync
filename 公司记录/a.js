function getDeepCaller(e) {
    return null != e.caller ? getDeepCaller(e.caller) : void 0 !== e.arguments[0] ? "local" : void 0 !== e.arguments[0] || "pageLeft" != e.arguments.callee.name && "pageRight" != e.arguments.callee.name ? "err" : "local"
}
function getLastKuoHao(e) {
    var t = e.split("")
        , n = 0
        , i = 0
        , r = 0
        , o = 0;
    for (var a in t) {
        var s = t[a];
        "(" == s ? (0 == r && (i = parseInt(a)),
            r += 1) : ")" == s && (o += 1) == r && (n += 1,
                r = 0,
                o = 0)
    }
    return {
        totalCompleteKuoHao: n,
        lastCompleteKuoHaoStartIndex: i
    }
}
function getLenPx(e, t) {
    return e.replace(/[^\x00-\xff]/gi, "aa").length * t / 2
}
function getParameterByName(e) {
    e = e.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    var t = new RegExp("[\\?&]" + e + "=([^&#]*)").exec(location.href);
    return null === t ? "" : decodeURIComponent(t[1].replace(/\+/g, " "))
}
function getArrIndex(e, t, n) {
    return void 0 == e ? -1 : e.findIndex((e, i, r) => angular.isObject(e) && angular.isObject(e) ? e[n] === t : e === t)
}
function getArrIndexBy2Params(e, t, n, i, r) {
    return e.findIndex((e, o, a) => {
        if (angular.isObject(e) && angular.isObject(e))
            return e[n] === t && e[r] === i
    }
    )
}
function fullScreen(e) {
    e.requestFullscreen ? e.requestFullscreen() : e.mozRequestFullScreen ? e.mozRequestFullScreen() : e.webkitRequestFullscreen ? e.webkitRequestFullscreen() : e.msRequestFullscreen && e.msRequestFullscreen();
    document.fullscreenElement || document.msFullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement
}
function exitFullScreen(e) {
    document.exitFullScreen ? document.exitFullScreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitExitFullscreen ? document.webkitExitFullscreen() : e.msExitFullscreen && e.msExitFullscreen()
}
function hex2rgba(e) {
    let t = e.replace("#", "");
    return `rgba(${parseInt(t.substring(0, 2), 16)}, ${parseInt(t.substring(2, 4), 16)}, ${parseInt(t.substring(4, 6), 16)}, ${t.substring(6, 8).length > 0 ? Math.round(parseInt(t.substring(6, 8), 16) / 255 * 100) / 100 : 1})`
}
function hexify(e) {
    var t = e.replace(/rgba?\(/, "").replace(/\)/, "").replace(/[\s+]/g, "").split(",")
        , n = parseFloat(t[3] || 1)
        , i = Math.floor(n * parseInt(t[0]) + 255 * (1 - n))
        , r = Math.floor(n * parseInt(t[1]) + 255 * (1 - n))
        , o = Math.floor(n * parseInt(t[2]) + 255 * (1 - n));
    return "#" + ("0" + i.toString(16)).slice(-2) + ("0" + r.toString(16)).slice(-2) + ("0" + o.toString(16)).slice(-2)
}
!function (e) {
    if ("object" == typeof exports && "undefined" != typeof module)
        module.exports = e();
    else if ("function" == typeof define && define.amd)
        define([], e);
    else {
        ("undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this).adapter = e()
    }
}

    (function () {
        return function () {
            return function e(t, n, i) {
                function r(a, s) {
                    if (!n[a]) {
                        if (!t[a]) {
                            var l = "function" == typeof require && require;
                            if (!s && l)
                                return l(a, !0);
                            if (o)
                                return o(a, !0);
                            var c = new Error("Cannot find module '" + a + "'");
                            throw c.code = "MODULE_NOT_FOUND",
                            c
                        }
                        var u = n[a] = {
                            exports: {}
                        };
                        t[a][0].call(u.exports, function (e) {
                            return r(t[a][1][e] || e)
                        }, u, u.exports, e, t, n, i)
                    }
                    return n[a].exports
                }
                for (var o = "function" == typeof require && require, a = 0; a < i.length; a++)
                    r(i[a]);
                return r
            }
        }()({
            1: [function (e, t, n) {
                "use strict";
                var i = (0,
                    e("./adapter_factory.js").adapterFactory)({
                        window: window
                    });
                t.exports = i
            }
                , {
                "./adapter_factory.js": 2
            }],
            2: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.adapterFactory = function () {
                        var e = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}).window
                            , t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                                shimChrome: !0,
                                shimFirefox: !0,
                                shimEdge: !0,
                                shimSafari: !0
                            }
                            , n = i.log
                            , c = i.detectBrowser(e)
                            , u = {
                                browserDetails: c,
                                commonShim: l,
                                extractVersion: i.extractVersion,
                                disableLog: i.disableLog,
                                disableWarnings: i.disableWarnings
                            };
                        switch (c.browser) {
                            case "chrome":
                                if (!r || !r.shimPeerConnection || !t.shimChrome)
                                    return n("Chrome shim is not included in this adapter release."),
                                        u;
                                n("adapter.js shimming chrome."),
                                    u.browserShim = r,
                                    r.shimGetUserMedia(e),
                                    r.shimMediaStream(e),
                                    r.shimPeerConnection(e),
                                    r.shimOnTrack(e),
                                    r.shimAddTrackRemoveTrack(e),
                                    r.shimGetSendersWithDtmf(e),
                                    r.shimGetStats(e),
                                    r.shimSenderReceiverGetStats(e),
                                    r.fixNegotiationNeeded(e),
                                    l.shimRTCIceCandidate(e),
                                    l.shimConnectionState(e),
                                    l.shimMaxMessageSize(e),
                                    l.shimSendThrowTypeError(e),
                                    l.removeAllowExtmapMixed(e);
                                break;
                            case "firefox":
                                if (!a || !a.shimPeerConnection || !t.shimFirefox)
                                    return n("Firefox shim is not included in this adapter release."),
                                        u;
                                n("adapter.js shimming firefox."),
                                    u.browserShim = a,
                                    a.shimGetUserMedia(e),
                                    a.shimPeerConnection(e),
                                    a.shimOnTrack(e),
                                    a.shimRemoveStream(e),
                                    a.shimSenderGetStats(e),
                                    a.shimReceiverGetStats(e),
                                    a.shimRTCDataChannel(e),
                                    a.shimAddTransceiver(e),
                                    a.shimCreateOffer(e),
                                    a.shimCreateAnswer(e),
                                    l.shimRTCIceCandidate(e),
                                    l.shimConnectionState(e),
                                    l.shimMaxMessageSize(e),
                                    l.shimSendThrowTypeError(e);
                                break;
                            case "edge":
                                if (!o || !o.shimPeerConnection || !t.shimEdge)
                                    return n("MS edge shim is not included in this adapter release."),
                                        u;
                                n("adapter.js shimming edge."),
                                    u.browserShim = o,
                                    o.shimGetUserMedia(e),
                                    o.shimGetDisplayMedia(e),
                                    o.shimPeerConnection(e),
                                    o.shimReplaceTrack(e),
                                    l.shimMaxMessageSize(e),
                                    l.shimSendThrowTypeError(e);
                                break;
                            case "safari":
                                if (!s || !t.shimSafari)
                                    return n("Safari shim is not included in this adapter release."),
                                        u;
                                n("adapter.js shimming safari."),
                                    u.browserShim = s,
                                    s.shimRTCIceServerUrls(e),
                                    s.shimCreateOfferLegacy(e),
                                    s.shimCallbacksAPI(e),
                                    s.shimLocalStreamsAPI(e),
                                    s.shimRemoteStreamsAPI(e),
                                    s.shimTrackEventTransceiver(e),
                                    s.shimGetUserMedia(e),
                                    l.shimRTCIceCandidate(e),
                                    l.shimMaxMessageSize(e),
                                    l.shimSendThrowTypeError(e),
                                    l.removeAllowExtmapMixed(e);
                                break;
                            default:
                                n("Unsupported browser!")
                        }
                        return u
                    }
                    ;
                var i = c(e("./utils"))
                    , r = c(e("./chrome/chrome_shim"))
                    , o = c(e("./edge/edge_shim"))
                    , a = c(e("./firefox/firefox_shim"))
                    , s = c(e("./safari/safari_shim"))
                    , l = c(e("./common_shim"));
                function c(e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                    return t.default = e,
                        t
                }
            }
                , {
                "./chrome/chrome_shim": 3,
                "./common_shim": 6,
                "./edge/edge_shim": 7,
                "./firefox/firefox_shim": 11,
                "./safari/safari_shim": 14,
                "./utils": 15
            }],
            3: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.shimGetDisplayMedia = n.shimGetUserMedia = void 0;
                var i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                    return typeof e
                }
                    : function (e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    , r = e("./getusermedia");
                Object.defineProperty(n, "shimGetUserMedia", {
                    enumerable: !0,
                    get: function () {
                        return r.shimGetUserMedia
                    }
                });
                var o = e("./getdisplaymedia");
                Object.defineProperty(n, "shimGetDisplayMedia", {
                    enumerable: !0,
                    get: function () {
                        return o.shimGetDisplayMedia
                    }
                }),
                    n.shimMediaStream = function (e) {
                        e.MediaStream = e.MediaStream || e.webkitMediaStream
                    }
                    ,
                    n.shimOnTrack = function (e) {
                        if ("object" !== (void 0 === e ? "undefined" : i(e)) || !e.RTCPeerConnection || "ontrack" in e.RTCPeerConnection.prototype)
                            a.wrapPeerConnectionEvent(e, "track", function (e) {
                                return e.transceiver || Object.defineProperty(e, "transceiver", {
                                    value: {
                                        receiver: e.receiver
                                    }
                                }),
                                    e
                            });
                        else {
                            Object.defineProperty(e.RTCPeerConnection.prototype, "ontrack", {
                                get: function () {
                                    return this._ontrack
                                },
                                set: function (e) {
                                    this._ontrack && this.removeEventListener("track", this._ontrack),
                                        this.addEventListener("track", this._ontrack = e)
                                },
                                enumerable: !0,
                                configurable: !0
                            });
                            var t = e.RTCPeerConnection.prototype.setRemoteDescription;
                            e.RTCPeerConnection.prototype.setRemoteDescription = function () {
                                var n = this;
                                return this._ontrackpoly || (this._ontrackpoly = function (t) {
                                    t.stream.addEventListener("addtrack", function (i) {
                                        var r = void 0;
                                        r = e.RTCPeerConnection.prototype.getReceivers ? n.getReceivers().find(function (e) {
                                            return e.track && e.track.id === i.track.id
                                        }) : {
                                                track: i.track
                                            };
                                        var o = new Event("track");
                                        o.track = i.track,
                                            o.receiver = r,
                                            o.transceiver = {
                                                receiver: r
                                            },
                                            o.streams = [t.stream],
                                            n.dispatchEvent(o)
                                    }),
                                        t.stream.getTracks().forEach(function (i) {
                                            var r = void 0;
                                            r = e.RTCPeerConnection.prototype.getReceivers ? n.getReceivers().find(function (e) {
                                                return e.track && e.track.id === i.id
                                            }) : {
                                                    track: i
                                                };
                                            var o = new Event("track");
                                            o.track = i,
                                                o.receiver = r,
                                                o.transceiver = {
                                                    receiver: r
                                                },
                                                o.streams = [t.stream],
                                                n.dispatchEvent(o)
                                        })
                                }
                                    ,
                                    this.addEventListener("addstream", this._ontrackpoly)),
                                    t.apply(this, arguments)
                            }
                        }
                    }
                    ,
                    n.shimGetSendersWithDtmf = function (e) {
                        if ("object" === (void 0 === e ? "undefined" : i(e)) && e.RTCPeerConnection && !("getSenders" in e.RTCPeerConnection.prototype) && "createDTMFSender" in e.RTCPeerConnection.prototype) {
                            var t = function (e, t) {
                                return {
                                    track: t,
                                    get dtmf() {
                                        return void 0 === this._dtmf && ("audio" === t.kind ? this._dtmf = e.createDTMFSender(t) : this._dtmf = null),
                                            this._dtmf
                                    },
                                    _pc: e
                                }
                            };
                            if (!e.RTCPeerConnection.prototype.getSenders) {
                                e.RTCPeerConnection.prototype.getSenders = function () {
                                    return this._senders = this._senders || [],
                                        this._senders.slice()
                                }
                                    ;
                                var n = e.RTCPeerConnection.prototype.addTrack;
                                e.RTCPeerConnection.prototype.addTrack = function (e, i) {
                                    var r = n.apply(this, arguments);
                                    return r || (r = t(this, e),
                                        this._senders.push(r)),
                                        r
                                }
                                    ;
                                var r = e.RTCPeerConnection.prototype.removeTrack;
                                e.RTCPeerConnection.prototype.removeTrack = function (e) {
                                    r.apply(this, arguments);
                                    var t = this._senders.indexOf(e);
                                    -1 !== t && this._senders.splice(t, 1)
                                }
                            }
                            var o = e.RTCPeerConnection.prototype.addStream;
                            e.RTCPeerConnection.prototype.addStream = function (e) {
                                var n = this;
                                this._senders = this._senders || [],
                                    o.apply(this, [e]),
                                    e.getTracks().forEach(function (e) {
                                        n._senders.push(t(n, e))
                                    })
                            }
                                ;
                            var a = e.RTCPeerConnection.prototype.removeStream;
                            e.RTCPeerConnection.prototype.removeStream = function (e) {
                                var t = this;
                                this._senders = this._senders || [],
                                    a.apply(this, [e]),
                                    e.getTracks().forEach(function (e) {
                                        var n = t._senders.find(function (t) {
                                            return t.track === e
                                        });
                                        n && t._senders.splice(t._senders.indexOf(n), 1)
                                    })
                            }
                        } else if ("object" === (void 0 === e ? "undefined" : i(e)) && e.RTCPeerConnection && "getSenders" in e.RTCPeerConnection.prototype && "createDTMFSender" in e.RTCPeerConnection.prototype && e.RTCRtpSender && !("dtmf" in e.RTCRtpSender.prototype)) {
                            var s = e.RTCPeerConnection.prototype.getSenders;
                            e.RTCPeerConnection.prototype.getSenders = function () {
                                var e = this
                                    , t = s.apply(this, []);
                                return t.forEach(function (t) {
                                    return t._pc = e
                                }),
                                    t
                            }
                                ,
                                Object.defineProperty(e.RTCRtpSender.prototype, "dtmf", {
                                    get: function () {
                                        return void 0 === this._dtmf && ("audio" === this.track.kind ? this._dtmf = this._pc.createDTMFSender(this.track) : this._dtmf = null),
                                            this._dtmf
                                    }
                                })
                        }
                    }
                    ,
                    n.shimGetStats = function (e) {
                        if (!e.RTCPeerConnection)
                            return;
                        var t = e.RTCPeerConnection.prototype.getStats;
                        e.RTCPeerConnection.prototype.getStats = function () {
                            var e = this
                                , n = Array.prototype.slice.call(arguments)
                                , i = n[0]
                                , r = n[1]
                                , o = n[2];
                            if (arguments.length > 0 && "function" == typeof i)
                                return t.apply(this, arguments);
                            if (0 === t.length && (0 === arguments.length || "function" != typeof i))
                                return t.apply(this, []);
                            var a = function (e) {
                                var t = {}
                                    , n = e.result();
                                return n.forEach(function (e) {
                                    var n = {
                                        id: e.id,
                                        timestamp: e.timestamp,
                                        type: {
                                            localcandidate: "local-candidate",
                                            remotecandidate: "remote-candidate"
                                        }[e.type] || e.type
                                    };
                                    e.names().forEach(function (t) {
                                        n[t] = e.stat(t)
                                    }),
                                        t[n.id] = n
                                }),
                                    t
                            }
                                , s = function (e) {
                                    return new Map(Object.keys(e).map(function (t) {
                                        return [t, e[t]]
                                    }))
                                };
                            if (arguments.length >= 2) {
                                return t.apply(this, [function (e) {
                                    r(s(a(e)))
                                }
                                    , i])
                            }
                            return new Promise(function (n, i) {
                                t.apply(e, [function (e) {
                                    n(s(a(e)))
                                }
                                    , i])
                            }
                            ).then(r, o)
                        }
                    }
                    ,
                    n.shimSenderReceiverGetStats = function (e) {
                        if (!("object" === (void 0 === e ? "undefined" : i(e)) && e.RTCPeerConnection && e.RTCRtpSender && e.RTCRtpReceiver))
                            return;
                        if (!("getStats" in e.RTCRtpSender.prototype)) {
                            var t = e.RTCPeerConnection.prototype.getSenders;
                            t && (e.RTCPeerConnection.prototype.getSenders = function () {
                                var e = this
                                    , n = t.apply(this, []);
                                return n.forEach(function (t) {
                                    return t._pc = e
                                }),
                                    n
                            }
                            );
                            var n = e.RTCPeerConnection.prototype.addTrack;
                            n && (e.RTCPeerConnection.prototype.addTrack = function () {
                                var e = n.apply(this, arguments);
                                return e._pc = this,
                                    e
                            }
                            ),
                                e.RTCRtpSender.prototype.getStats = function () {
                                    var e = this;
                                    return this._pc.getStats().then(function (t) {
                                        return a.filterStats(t, e.track, !0)
                                    })
                                }
                        }
                        if (!("getStats" in e.RTCRtpReceiver.prototype)) {
                            var r = e.RTCPeerConnection.prototype.getReceivers;
                            r && (e.RTCPeerConnection.prototype.getReceivers = function () {
                                var e = this
                                    , t = r.apply(this, []);
                                return t.forEach(function (t) {
                                    return t._pc = e
                                }),
                                    t
                            }
                            ),
                                a.wrapPeerConnectionEvent(e, "track", function (e) {
                                    return e.receiver._pc = e.srcElement,
                                        e
                                }),
                                e.RTCRtpReceiver.prototype.getStats = function () {
                                    var e = this;
                                    return this._pc.getStats().then(function (t) {
                                        return a.filterStats(t, e.track, !1)
                                    })
                                }
                        }
                        if (!("getStats" in e.RTCRtpSender.prototype && "getStats" in e.RTCRtpReceiver.prototype))
                            return;
                        var o = e.RTCPeerConnection.prototype.getStats;
                        e.RTCPeerConnection.prototype.getStats = function () {
                            if (arguments.length > 0 && arguments[0] instanceof e.MediaStreamTrack) {
                                var t = arguments[0]
                                    , n = void 0
                                    , i = void 0
                                    , r = void 0;
                                return this.getSenders().forEach(function (e) {
                                    e.track === t && (n ? r = !0 : n = e)
                                }),
                                    this.getReceivers().forEach(function (e) {
                                        return e.track === t && (i ? r = !0 : i = e),
                                            e.track === t
                                    }),
                                    r || n && i ? Promise.reject(new DOMException("There are more than one sender or receiver for the track.", "InvalidAccessError")) : n ? n.getStats() : i ? i.getStats() : Promise.reject(new DOMException("There is no sender or receiver for the track.", "InvalidAccessError"))
                            }
                            return o.apply(this, arguments)
                        }
                    }
                    ,
                    n.shimAddTrackRemoveTrackWithNative = l,
                    n.shimAddTrackRemoveTrack = function (e) {
                        if (!e.RTCPeerConnection)
                            return;
                        var t = a.detectBrowser(e);
                        if (e.RTCPeerConnection.prototype.addTrack && t.version >= 65)
                            return l(e);
                        var n = e.RTCPeerConnection.prototype.getLocalStreams;
                        e.RTCPeerConnection.prototype.getLocalStreams = function () {
                            var e = this
                                , t = n.apply(this);
                            return this._reverseStreams = this._reverseStreams || {},
                                t.map(function (t) {
                                    return e._reverseStreams[t.id]
                                })
                        }
                            ;
                        var i = e.RTCPeerConnection.prototype.addStream;
                        e.RTCPeerConnection.prototype.addStream = function (t) {
                            var n = this;
                            if (this._streams = this._streams || {},
                                this._reverseStreams = this._reverseStreams || {},
                                t.getTracks().forEach(function (e) {
                                    var t = n.getSenders().find(function (t) {
                                        return t.track === e
                                    });
                                    if (t)
                                        throw new DOMException("Track already exists.", "InvalidAccessError")
                                }),
                                !this._reverseStreams[t.id]) {
                                var r = new e.MediaStream(t.getTracks());
                                this._streams[t.id] = r,
                                    this._reverseStreams[r.id] = t,
                                    t = r
                            }
                            i.apply(this, [t])
                        }
                            ;
                        var r = e.RTCPeerConnection.prototype.removeStream;
                        function o(e, t) {
                            var n = t.sdp;
                            return Object.keys(e._reverseStreams || []).forEach(function (t) {
                                var i = e._reverseStreams[t]
                                    , r = e._streams[i.id];
                                n = n.replace(new RegExp(r.id, "g"), i.id)
                            }),
                                new RTCSessionDescription({
                                    type: t.type,
                                    sdp: n
                                })
                        }
                        e.RTCPeerConnection.prototype.removeStream = function (e) {
                            this._streams = this._streams || {},
                                this._reverseStreams = this._reverseStreams || {},
                                r.apply(this, [this._streams[e.id] || e]),
                                delete this._reverseStreams[this._streams[e.id] ? this._streams[e.id].id : e.id],
                                delete this._streams[e.id]
                        }
                            ,
                            e.RTCPeerConnection.prototype.addTrack = function (t, n) {
                                var i = this;
                                if ("closed" === this.signalingState)
                                    throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.", "InvalidStateError");
                                var r = [].slice.call(arguments, 1);
                                if (1 !== r.length || !r[0].getTracks().find(function (e) {
                                    return e === t
                                }))
                                    throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.", "NotSupportedError");
                                var o = this.getSenders().find(function (e) {
                                    return e.track === t
                                });
                                if (o)
                                    throw new DOMException("Track already exists.", "InvalidAccessError");
                                this._streams = this._streams || {},
                                    this._reverseStreams = this._reverseStreams || {};
                                var a = this._streams[n.id];
                                if (a)
                                    a.addTrack(t),
                                        Promise.resolve().then(function () {
                                            i.dispatchEvent(new Event("negotiationneeded"))
                                        });
                                else {
                                    var s = new e.MediaStream([t]);
                                    this._streams[n.id] = s,
                                        this._reverseStreams[s.id] = n,
                                        this.addStream(s)
                                }
                                return this.getSenders().find(function (e) {
                                    return e.track === t
                                })
                            }
                            ,
                            ["createOffer", "createAnswer"].forEach(function (t) {
                                var n = e.RTCPeerConnection.prototype[t]
                                    , i = s({}, t, function () {
                                        var e = this
                                            , t = arguments
                                            , i = arguments.length && "function" == typeof arguments[0];
                                        return i ? n.apply(this, [function (n) {
                                            var i = o(e, n);
                                            t[0].apply(null, [i])
                                        }
                                            , function (e) {
                                                t[1] && t[1].apply(null, e)
                                            }
                                            , arguments[2]]) : n.apply(this, arguments).then(function (t) {
                                                return o(e, t)
                                            })
                                    });
                                e.RTCPeerConnection.prototype[t] = i[t]
                            });
                        var c = e.RTCPeerConnection.prototype.setLocalDescription;
                        e.RTCPeerConnection.prototype.setLocalDescription = function () {
                            return arguments.length && arguments[0].type ? (arguments[0] = (e = this,
                                t = arguments[0],
                                n = t.sdp,
                                Object.keys(e._reverseStreams || []).forEach(function (t) {
                                    var i = e._reverseStreams[t]
                                        , r = e._streams[i.id];
                                    n = n.replace(new RegExp(i.id, "g"), r.id)
                                }),
                                new RTCSessionDescription({
                                    type: t.type,
                                    sdp: n
                                })),
                                c.apply(this, arguments)) : c.apply(this, arguments);
                            var e, t, n
                        }
                            ;
                        var u = Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype, "localDescription");
                        Object.defineProperty(e.RTCPeerConnection.prototype, "localDescription", {
                            get: function () {
                                var e = u.get.apply(this);
                                return "" === e.type ? e : o(this, e)
                            }
                        }),
                            e.RTCPeerConnection.prototype.removeTrack = function (e) {
                                var t = this;
                                if ("closed" === this.signalingState)
                                    throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.", "InvalidStateError");
                                if (!e._pc)
                                    throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.", "TypeError");
                                var n = e._pc === this;
                                if (!n)
                                    throw new DOMException("Sender was not created by this connection.", "InvalidAccessError");
                                this._streams = this._streams || {};
                                var i = void 0;
                                Object.keys(this._streams).forEach(function (n) {
                                    var r = t._streams[n].getTracks().find(function (t) {
                                        return e.track === t
                                    });
                                    r && (i = t._streams[n])
                                }),
                                    i && (1 === i.getTracks().length ? this.removeStream(this._reverseStreams[i.id]) : i.removeTrack(e.track),
                                        this.dispatchEvent(new Event("negotiationneeded")))
                            }
                    }
                    ,
                    n.shimPeerConnection = function (e) {
                        var t = a.detectBrowser(e);
                        !e.RTCPeerConnection && e.webkitRTCPeerConnection && (e.RTCPeerConnection = e.webkitRTCPeerConnection);
                        if (!e.RTCPeerConnection)
                            return;
                        t.version < 53 && ["setLocalDescription", "setRemoteDescription", "addIceCandidate"].forEach(function (t) {
                            var n = e.RTCPeerConnection.prototype[t]
                                , i = s({}, t, function () {
                                    return arguments[0] = new ("addIceCandidate" === t ? e.RTCIceCandidate : e.RTCSessionDescription)(arguments[0]),
                                        n.apply(this, arguments)
                                });
                            e.RTCPeerConnection.prototype[t] = i[t]
                        });
                        var n = e.RTCPeerConnection.prototype.addIceCandidate;
                        e.RTCPeerConnection.prototype.addIceCandidate = function () {
                            return arguments[0] ? t.version < 78 && arguments[0] && "" === arguments[0].candidate ? Promise.resolve() : n.apply(this, arguments) : (arguments[1] && arguments[1].apply(null),
                                Promise.resolve())
                        }
                    }
                    ,
                    n.fixNegotiationNeeded = function (e) {
                        a.wrapPeerConnectionEvent(e, "negotiationneeded", function (e) {
                            var t = e.target;
                            if ("stable" === t.signalingState)
                                return e
                        })
                    }
                    ;
                var a = function (e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                    return t.default = e,
                        t
                }(e("../utils.js"));
                function s(e, t, n) {
                    return t in e ? Object.defineProperty(e, t, {
                        value: n,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }) : e[t] = n,
                        e
                }
                function l(e) {
                    e.RTCPeerConnection.prototype.getLocalStreams = function () {
                        var e = this;
                        return this._shimmedLocalStreams = this._shimmedLocalStreams || {},
                            Object.keys(this._shimmedLocalStreams).map(function (t) {
                                return e._shimmedLocalStreams[t][0]
                            })
                    }
                        ;
                    var t = e.RTCPeerConnection.prototype.addTrack;
                    e.RTCPeerConnection.prototype.addTrack = function (e, n) {
                        if (!n)
                            return t.apply(this, arguments);
                        this._shimmedLocalStreams = this._shimmedLocalStreams || {};
                        var i = t.apply(this, arguments);
                        return this._shimmedLocalStreams[n.id] ? -1 === this._shimmedLocalStreams[n.id].indexOf(i) && this._shimmedLocalStreams[n.id].push(i) : this._shimmedLocalStreams[n.id] = [n, i],
                            i
                    }
                        ;
                    var n = e.RTCPeerConnection.prototype.addStream;
                    e.RTCPeerConnection.prototype.addStream = function (e) {
                        var t = this;
                        this._shimmedLocalStreams = this._shimmedLocalStreams || {},
                            e.getTracks().forEach(function (e) {
                                if (t.getSenders().find(function (t) {
                                    return t.track === e
                                }))
                                    throw new DOMException("Track already exists.", "InvalidAccessError")
                            });
                        var i = this.getSenders();
                        n.apply(this, arguments);
                        var r = this.getSenders().filter(function (e) {
                            return -1 === i.indexOf(e)
                        });
                        this._shimmedLocalStreams[e.id] = [e].concat(r)
                    }
                        ;
                    var i = e.RTCPeerConnection.prototype.removeStream;
                    e.RTCPeerConnection.prototype.removeStream = function (e) {
                        return this._shimmedLocalStreams = this._shimmedLocalStreams || {},
                            delete this._shimmedLocalStreams[e.id],
                            i.apply(this, arguments)
                    }
                        ;
                    var r = e.RTCPeerConnection.prototype.removeTrack;
                    e.RTCPeerConnection.prototype.removeTrack = function (e) {
                        var t = this;
                        return this._shimmedLocalStreams = this._shimmedLocalStreams || {},
                            e && Object.keys(this._shimmedLocalStreams).forEach(function (n) {
                                var i = t._shimmedLocalStreams[n].indexOf(e);
                                -1 !== i && t._shimmedLocalStreams[n].splice(i, 1),
                                    1 === t._shimmedLocalStreams[n].length && delete t._shimmedLocalStreams[n]
                            }),
                            r.apply(this, arguments)
                    }
                }
            }
                , {
                "../utils.js": 15,
                "./getdisplaymedia": 4,
                "./getusermedia": 5
            }],
            4: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.shimGetDisplayMedia = function (e, t) {
                        if (e.navigator.mediaDevices && "getDisplayMedia" in e.navigator.mediaDevices)
                            return;
                        if (!e.navigator.mediaDevices)
                            return;
                        if ("function" != typeof t)
                            return void console.error("shimGetDisplayMedia: getSourceId argument is not a function");
                        e.navigator.mediaDevices.getDisplayMedia = function (n) {
                            return t(n).then(function (t) {
                                var i = n.video && n.video.width
                                    , r = n.video && n.video.height
                                    , o = n.video && n.video.frameRate;
                                return n.video = {
                                    mandatory: {
                                        chromeMediaSource: "desktop",
                                        chromeMediaSourceId: t,
                                        maxFrameRate: o || 3
                                    }
                                },
                                    i && (n.video.mandatory.maxWidth = i),
                                    r && (n.video.mandatory.maxHeight = r),
                                    e.navigator.mediaDevices.getUserMedia(n)
                            })
                        }
                    }
            }
                , {}],
            5: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                });
                var i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                    return typeof e
                }
                    : function (e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    ;
                n.shimGetUserMedia = function (e) {
                    var t = e && e.navigator;
                    if (!t.mediaDevices)
                        return;
                    var n = r.detectBrowser(e)
                        , a = function (e) {
                            if ("object" !== (void 0 === e ? "undefined" : i(e)) || e.mandatory || e.optional)
                                return e;
                            var t = {};
                            return Object.keys(e).forEach(function (n) {
                                if ("require" !== n && "advanced" !== n && "mediaSource" !== n) {
                                    var r = "object" === i(e[n]) ? e[n] : {
                                        ideal: e[n]
                                    };
                                    void 0 !== r.exact && "number" == typeof r.exact && (r.min = r.max = r.exact);
                                    var o = function (e, t) {
                                        return e ? e + t.charAt(0).toUpperCase() + t.slice(1) : "deviceId" === t ? "sourceId" : t
                                    };
                                    if (void 0 !== r.ideal) {
                                        t.optional = t.optional || [];
                                        var a = {};
                                        "number" == typeof r.ideal ? (a[o("min", n)] = r.ideal,
                                            t.optional.push(a),
                                            (a = {})[o("max", n)] = r.ideal,
                                            t.optional.push(a)) : (a[o("", n)] = r.ideal,
                                                t.optional.push(a))
                                    }
                                    void 0 !== r.exact && "number" != typeof r.exact ? (t.mandatory = t.mandatory || {},
                                        t.mandatory[o("", n)] = r.exact) : ["min", "max"].forEach(function (e) {
                                            void 0 !== r[e] && (t.mandatory = t.mandatory || {},
                                                t.mandatory[o(e, n)] = r[e])
                                        })
                                }
                            }),
                                e.advanced && (t.optional = (t.optional || []).concat(e.advanced)),
                                t
                        }
                        , s = function (e, r) {
                            if (n.version >= 61)
                                return r(e);
                            if ((e = JSON.parse(JSON.stringify(e))) && "object" === i(e.audio)) {
                                var s = function (e, t, n) {
                                    t in e && !(n in e) && (e[n] = e[t],
                                        delete e[t])
                                };
                                e = JSON.parse(JSON.stringify(e)),
                                    s(e.audio, "autoGainControl", "googAutoGainControl"),
                                    s(e.audio, "noiseSuppression", "googNoiseSuppression"),
                                    e.audio = a(e.audio)
                            }
                            if (e && "object" === i(e.video)) {
                                var l = e.video.facingMode;
                                l = l && ("object" === (void 0 === l ? "undefined" : i(l)) ? l : {
                                    ideal: l
                                });
                                var c = n.version < 66;
                                if (l && ("user" === l.exact || "environment" === l.exact || "user" === l.ideal || "environment" === l.ideal) && (!t.mediaDevices.getSupportedConstraints || !t.mediaDevices.getSupportedConstraints().facingMode || c)) {
                                    delete e.video.facingMode;
                                    var u = void 0;
                                    if ("environment" === l.exact || "environment" === l.ideal ? u = ["back", "rear"] : "user" !== l.exact && "user" !== l.ideal || (u = ["front"]),
                                        u)
                                        return t.mediaDevices.enumerateDevices().then(function (t) {
                                            var n = (t = t.filter(function (e) {
                                                return "videoinput" === e.kind
                                            })).find(function (e) {
                                                return u.some(function (t) {
                                                    return e.label.toLowerCase().includes(t)
                                                })
                                            });
                                            return !n && t.length && u.includes("back") && (n = t[t.length - 1]),
                                                n && (e.video.deviceId = l.exact ? {
                                                    exact: n.deviceId
                                                } : {
                                                        ideal: n.deviceId
                                                    }),
                                                e.video = a(e.video),
                                                o("chrome: " + JSON.stringify(e)),
                                                r(e)
                                        })
                                }
                                e.video = a(e.video)
                            }
                            return o("chrome: " + JSON.stringify(e)),
                                r(e)
                        }
                        , l = function (e) {
                            return n.version >= 64 ? e : {
                                name: {
                                    PermissionDeniedError: "NotAllowedError",
                                    PermissionDismissedError: "NotAllowedError",
                                    InvalidStateError: "NotAllowedError",
                                    DevicesNotFoundError: "NotFoundError",
                                    ConstraintNotSatisfiedError: "OverconstrainedError",
                                    TrackStartError: "NotReadableError",
                                    MediaDeviceFailedDueToShutdown: "NotAllowedError",
                                    MediaDeviceKillSwitchOn: "NotAllowedError",
                                    TabCaptureError: "AbortError",
                                    ScreenCaptureError: "AbortError",
                                    DeviceCaptureError: "AbortError"
                                }[e.name] || e.name,
                                message: e.message,
                                constraint: e.constraint || e.constraintName,
                                toString: function () {
                                    return this.name + (this.message && ": ") + this.message
                                }
                            }
                        };
                    if (t.getUserMedia = function (e, n, i) {
                        s(e, function (e) {
                            t.webkitGetUserMedia(e, n, function (e) {
                                i && i(l(e))
                            })
                        })
                    }
                        .bind(t),
                        t.mediaDevices.getUserMedia) {
                        var c = t.mediaDevices.getUserMedia.bind(t.mediaDevices);
                        t.mediaDevices.getUserMedia = function (e) {
                            return s(e, function (e) {
                                return c(e).then(function (t) {
                                    if (e.audio && !t.getAudioTracks().length || e.video && !t.getVideoTracks().length)
                                        throw t.getTracks().forEach(function (e) {
                                            e.stop()
                                        }),
                                        new DOMException("", "NotFoundError");
                                    return t
                                }, function (e) {
                                    return Promise.reject(l(e))
                                })
                            })
                        }
                    }
                }
                    ;
                var r = function (e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                    return t.default = e,
                        t
                }(e("../utils.js"));
                var o = r.log
            }
                , {
                "../utils.js": 15
            }],
            6: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                });
                var i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                    return typeof e
                }
                    : function (e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    ;
                n.shimRTCIceCandidate = function (e) {
                    if (!e.RTCIceCandidate || e.RTCIceCandidate && "foundation" in e.RTCIceCandidate.prototype)
                        return;
                    var t = e.RTCIceCandidate;
                    e.RTCIceCandidate = function (e) {
                        if ("object" === (void 0 === e ? "undefined" : i(e)) && e.candidate && 0 === e.candidate.indexOf("a=") && ((e = JSON.parse(JSON.stringify(e))).candidate = e.candidate.substr(2)),
                            e.candidate && e.candidate.length) {
                            var n = new t(e)
                                , r = a.default.parseCandidate(e.candidate)
                                , o = Object.assign(n, r);
                            return o.toJSON = function () {
                                return {
                                    candidate: o.candidate,
                                    sdpMid: o.sdpMid,
                                    sdpMLineIndex: o.sdpMLineIndex,
                                    usernameFragment: o.usernameFragment
                                }
                            }
                                ,
                                o
                        }
                        return new t(e)
                    }
                        ,
                        e.RTCIceCandidate.prototype = t.prototype,
                        s.wrapPeerConnectionEvent(e, "icecandidate", function (t) {
                            return t.candidate && Object.defineProperty(t, "candidate", {
                                value: new e.RTCIceCandidate(t.candidate),
                                writable: "false"
                            }),
                                t
                        })
                }
                    ,
                    n.shimMaxMessageSize = function (e) {
                        if (!e.RTCPeerConnection)
                            return;
                        var t = s.detectBrowser(e);
                        "sctp" in e.RTCPeerConnection.prototype || Object.defineProperty(e.RTCPeerConnection.prototype, "sctp", {
                            get: function () {
                                return void 0 === this._sctp ? null : this._sctp
                            }
                        });
                        var n = e.RTCPeerConnection.prototype.setRemoteDescription;
                        e.RTCPeerConnection.prototype.setRemoteDescription = function () {
                            if (this._sctp = null,
                                "chrome" === t.browser && t.version >= 76) {
                                var e = this.getConfiguration()
                                    , i = e.sdpSemantics;
                                "plan-b" === i && Object.defineProperty(this, "sctp", {
                                    get: function () {
                                        return void 0 === this._sctp ? null : this._sctp
                                    },
                                    enumerable: !0,
                                    configurable: !0
                                })
                            }
                            if (function (e) {
                                if (!e || !e.sdp)
                                    return !1;
                                var t = a.default.splitSections(e.sdp);
                                return t.shift(),
                                    t.some(function (e) {
                                        var t = a.default.parseMLine(e);
                                        return t && "application" === t.kind && -1 !== t.protocol.indexOf("SCTP")
                                    })
                            }(arguments[0])) {
                                var r = function (e) {
                                    var t = e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);
                                    if (null === t || t.length < 2)
                                        return -1;
                                    var n = parseInt(t[1], 10);
                                    return n != n ? -1 : n
                                }(arguments[0])
                                    , o = function (e) {
                                        var n = 65536;
                                        "firefox" === t.browser && (n = t.version < 57 ? -1 === e ? 16384 : 2147483637 : t.version < 60 ? 57 === t.version ? 65535 : 65536 : 2147483637);
                                        return n
                                    }(r)
                                    , s = function (e, n) {
                                        var i = 65536;
                                        "firefox" === t.browser && 57 === t.version && (i = 65535);
                                        var r = a.default.matchPrefix(e.sdp, "a=max-message-size:");
                                        r.length > 0 ? i = parseInt(r[0].substr(19), 10) : "firefox" === t.browser && -1 !== n && (i = 2147483637);
                                        return i
                                    }(arguments[0], r)
                                    , l = void 0;
                                l = 0 === o && 0 === s ? Number.POSITIVE_INFINITY : 0 === o || 0 === s ? Math.max(o, s) : Math.min(o, s);
                                var c = {};
                                Object.defineProperty(c, "maxMessageSize", {
                                    get: function () {
                                        return l
                                    }
                                }),
                                    this._sctp = c
                            }
                            return n.apply(this, arguments)
                        }
                    }
                    ,
                    n.shimSendThrowTypeError = function (e) {
                        if (!(e.RTCPeerConnection && "createDataChannel" in e.RTCPeerConnection.prototype))
                            return;
                        function t(e, t) {
                            var n = e.send;
                            e.send = function () {
                                var i = arguments[0]
                                    , r = i.length || i.size || i.byteLength;
                                if ("open" === e.readyState && t.sctp && r > t.sctp.maxMessageSize)
                                    throw new TypeError("Message too large (can send a maximum of " + t.sctp.maxMessageSize + " bytes)");
                                return n.apply(e, arguments)
                            }
                        }
                        var n = e.RTCPeerConnection.prototype.createDataChannel;
                        e.RTCPeerConnection.prototype.createDataChannel = function () {
                            var e = n.apply(this, arguments);
                            return t(e, this),
                                e
                        }
                            ,
                            s.wrapPeerConnectionEvent(e, "datachannel", function (e) {
                                return t(e.channel, e.target),
                                    e
                            })
                    }
                    ,
                    n.shimConnectionState = function (e) {
                        if (!e.RTCPeerConnection || "connectionState" in e.RTCPeerConnection.prototype)
                            return;
                        var t = e.RTCPeerConnection.prototype;
                        Object.defineProperty(t, "connectionState", {
                            get: function () {
                                return {
                                    completed: "connected",
                                    checking: "connecting"
                                }[this.iceConnectionState] || this.iceConnectionState
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                            Object.defineProperty(t, "onconnectionstatechange", {
                                get: function () {
                                    return this._onconnectionstatechange || null
                                },
                                set: function (e) {
                                    this._onconnectionstatechange && (this.removeEventListener("connectionstatechange", this._onconnectionstatechange),
                                        delete this._onconnectionstatechange),
                                        e && this.addEventListener("connectionstatechange", this._onconnectionstatechange = e)
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            ["setLocalDescription", "setRemoteDescription"].forEach(function (e) {
                                var n = t[e];
                                t[e] = function () {
                                    return this._connectionstatechangepoly || (this._connectionstatechangepoly = function (e) {
                                        var t = e.target;
                                        if (t._lastConnectionState !== t.connectionState) {
                                            t._lastConnectionState = t.connectionState;
                                            var n = new Event("connectionstatechange", e);
                                            t.dispatchEvent(n)
                                        }
                                        return e
                                    }
                                        ,
                                        this.addEventListener("iceconnectionstatechange", this._connectionstatechangepoly)),
                                        n.apply(this, arguments)
                                }
                            })
                    }
                    ,
                    n.removeAllowExtmapMixed = function (e) {
                        if (!e.RTCPeerConnection)
                            return;
                        var t = s.detectBrowser(e);
                        if ("chrome" === t.browser && t.version >= 71)
                            return;
                        var n = e.RTCPeerConnection.prototype.setRemoteDescription;
                        e.RTCPeerConnection.prototype.setRemoteDescription = function (e) {
                            return e && e.sdp && -1 !== e.sdp.indexOf("\na=extmap-allow-mixed") && (e.sdp = e.sdp.split("\n").filter(function (e) {
                                return "a=extmap-allow-mixed" !== e.trim()
                            }).join("\n")),
                                n.apply(this, arguments)
                        }
                    }
                    ;
                var r, o = e("sdp"), a = (r = o) && r.__esModule ? r : {
                    default: r
                }, s = function (e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                    return t.default = e,
                        t
                }(e("./utils"))
            }
                , {
                "./utils": 15,
                sdp: 17
            }],
            7: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.shimGetDisplayMedia = n.shimGetUserMedia = void 0;
                var i = e("./getusermedia");
                Object.defineProperty(n, "shimGetUserMedia", {
                    enumerable: !0,
                    get: function () {
                        return i.shimGetUserMedia
                    }
                });
                var r = e("./getdisplaymedia");
                Object.defineProperty(n, "shimGetDisplayMedia", {
                    enumerable: !0,
                    get: function () {
                        return r.shimGetDisplayMedia
                    }
                }),
                    n.shimPeerConnection = function (e) {
                        var t = a.detectBrowser(e);
                        if (e.RTCIceGatherer && (e.RTCIceCandidate || (e.RTCIceCandidate = function (e) {
                            return e
                        }
                        ),
                            e.RTCSessionDescription || (e.RTCSessionDescription = function (e) {
                                return e
                            }
                            ),
                            t.version < 15025)) {
                            var n = Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype, "enabled");
                            Object.defineProperty(e.MediaStreamTrack.prototype, "enabled", {
                                set: function (e) {
                                    n.set.call(this, e);
                                    var t = new Event("enabled");
                                    t.enabled = e,
                                        this.dispatchEvent(t)
                                }
                            })
                        }
                        !e.RTCRtpSender || "dtmf" in e.RTCRtpSender.prototype || Object.defineProperty(e.RTCRtpSender.prototype, "dtmf", {
                            get: function () {
                                return void 0 === this._dtmf && ("audio" === this.track.kind ? this._dtmf = new e.RTCDtmfSender(this) : "video" === this.track.kind && (this._dtmf = null)),
                                    this._dtmf
                            }
                        });
                        e.RTCDtmfSender && !e.RTCDTMFSender && (e.RTCDTMFSender = e.RTCDtmfSender);
                        var i = (0,
                            c.default)(e, t.version);
                        e.RTCPeerConnection = function (e) {
                            return e && e.iceServers && (e.iceServers = (0,
                                s.filterIceServers)(e.iceServers, t.version),
                                a.log("ICE servers after filtering:", e.iceServers)),
                                new i(e)
                        }
                            ,
                            e.RTCPeerConnection.prototype = i.prototype
                    }
                    ,
                    n.shimReplaceTrack = function (e) {
                        !e.RTCRtpSender || "replaceTrack" in e.RTCRtpSender.prototype || (e.RTCRtpSender.prototype.replaceTrack = e.RTCRtpSender.prototype.setTrack)
                    }
                    ;
                var o, a = function (e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                    return t.default = e,
                        t
                }(e("../utils")), s = e("./filtericeservers"), l = e("rtcpeerconnection-shim"), c = (o = l) && o.__esModule ? o : {
                    default: o
                }
            }
                , {
                "../utils": 15,
                "./filtericeservers": 8,
                "./getdisplaymedia": 9,
                "./getusermedia": 10,
                "rtcpeerconnection-shim": 16
            }],
            8: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.filterIceServers = function (e, t) {
                        var n = !1;
                        return (e = JSON.parse(JSON.stringify(e))).filter(function (e) {
                            if (e && (e.urls || e.url)) {
                                var t = e.urls || e.url;
                                e.url && !e.urls && i.deprecated("RTCIceServer.url", "RTCIceServer.urls");
                                var r = "string" == typeof t;
                                return r && (t = [t]),
                                    t = t.filter(function (e) {
                                        if (0 === e.indexOf("stun:"))
                                            return !1;
                                        var t = e.startsWith("turn") && !e.startsWith("turn:[") && e.includes("transport=udp");
                                        return t && !n ? (n = !0,
                                            !0) : t && !n
                                    }),
                                    delete e.url,
                                    e.urls = r ? t[0] : t,
                                    !!t.length
                            }
                        })
                    }
                    ;
                var i = function (e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                    return t.default = e,
                        t
                }(e("../utils"))
            }
                , {
                "../utils": 15
            }],
            9: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.shimGetDisplayMedia = function (e) {
                        if (!("getDisplayMedia" in e.navigator))
                            return;
                        if (!e.navigator.mediaDevices)
                            return;
                        if (e.navigator.mediaDevices && "getDisplayMedia" in e.navigator.mediaDevices)
                            return;
                        e.navigator.mediaDevices.getDisplayMedia = e.navigator.getDisplayMedia.bind(e.navigator)
                    }
            }
                , {}],
            10: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.shimGetUserMedia = function (e) {
                        var t = e && e.navigator
                            , n = t.mediaDevices.getUserMedia.bind(t.mediaDevices);
                        t.mediaDevices.getUserMedia = function (e) {
                            return n(e).catch(function (e) {
                                return Promise.reject(function (e) {
                                    return {
                                        name: {
                                            PermissionDeniedError: "NotAllowedError"
                                        }[e.name] || e.name,
                                        message: e.message,
                                        constraint: e.constraint,
                                        toString: function () {
                                            return this.name
                                        }
                                    }
                                }(e))
                            })
                        }
                    }
            }
                , {}],
            11: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.shimGetDisplayMedia = n.shimGetUserMedia = void 0;
                var i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                    return typeof e
                }
                    : function (e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    , r = e("./getusermedia");
                Object.defineProperty(n, "shimGetUserMedia", {
                    enumerable: !0,
                    get: function () {
                        return r.shimGetUserMedia
                    }
                });
                var o = e("./getdisplaymedia");
                Object.defineProperty(n, "shimGetDisplayMedia", {
                    enumerable: !0,
                    get: function () {
                        return o.shimGetDisplayMedia
                    }
                }),
                    n.shimOnTrack = function (e) {
                        "object" === (void 0 === e ? "undefined" : i(e)) && e.RTCTrackEvent && "receiver" in e.RTCTrackEvent.prototype && !("transceiver" in e.RTCTrackEvent.prototype) && Object.defineProperty(e.RTCTrackEvent.prototype, "transceiver", {
                            get: function () {
                                return {
                                    receiver: this.receiver
                                }
                            }
                        })
                    }
                    ,
                    n.shimPeerConnection = function (e) {
                        var t = a.detectBrowser(e);
                        if ("object" !== (void 0 === e ? "undefined" : i(e)) || !e.RTCPeerConnection && !e.mozRTCPeerConnection)
                            return;
                        !e.RTCPeerConnection && e.mozRTCPeerConnection && (e.RTCPeerConnection = e.mozRTCPeerConnection);
                        t.version < 53 && ["setLocalDescription", "setRemoteDescription", "addIceCandidate"].forEach(function (t) {
                            var n = e.RTCPeerConnection.prototype[t]
                                , i = function (e, t, n) {
                                    t in e ? Object.defineProperty(e, t, {
                                        value: n,
                                        enumerable: !0,
                                        configurable: !0,
                                        writable: !0
                                    }) : e[t] = n;
                                    return e
                                }({}, t, function () {
                                    return arguments[0] = new ("addIceCandidate" === t ? e.RTCIceCandidate : e.RTCSessionDescription)(arguments[0]),
                                        n.apply(this, arguments)
                                });
                            e.RTCPeerConnection.prototype[t] = i[t]
                        });
                        if (t.version < 68) {
                            var n = e.RTCPeerConnection.prototype.addIceCandidate;
                            e.RTCPeerConnection.prototype.addIceCandidate = function () {
                                return arguments[0] ? arguments[0] && "" === arguments[0].candidate ? Promise.resolve() : n.apply(this, arguments) : (arguments[1] && arguments[1].apply(null),
                                    Promise.resolve())
                            }
                        }
                        var r = {
                            inboundrtp: "inbound-rtp",
                            outboundrtp: "outbound-rtp",
                            candidatepair: "candidate-pair",
                            localcandidate: "local-candidate",
                            remotecandidate: "remote-candidate"
                        }
                            , o = e.RTCPeerConnection.prototype.getStats;
                        e.RTCPeerConnection.prototype.getStats = function () {
                            var e = Array.prototype.slice.call(arguments)
                                , n = e[0]
                                , i = e[1]
                                , a = e[2];
                            return o.apply(this, [n || null]).then(function (e) {
                                if (t.version < 53 && !i)
                                    try {
                                        e.forEach(function (e) {
                                            e.type = r[e.type] || e.type
                                        })
                                    } catch (t) {
                                        if ("TypeError" !== t.name)
                                            throw t;
                                        e.forEach(function (t, n) {
                                            e.set(n, Object.assign({}, t, {
                                                type: r[t.type] || t.type
                                            }))
                                        })
                                    }
                                return e
                            }).then(i, a)
                        }
                    }
                    ,
                    n.shimSenderGetStats = function (e) {
                        if ("object" !== (void 0 === e ? "undefined" : i(e)) || !e.RTCPeerConnection || !e.RTCRtpSender)
                            return;
                        if (e.RTCRtpSender && "getStats" in e.RTCRtpSender.prototype)
                            return;
                        var t = e.RTCPeerConnection.prototype.getSenders;
                        t && (e.RTCPeerConnection.prototype.getSenders = function () {
                            var e = this
                                , n = t.apply(this, []);
                            return n.forEach(function (t) {
                                return t._pc = e
                            }),
                                n
                        }
                        );
                        var n = e.RTCPeerConnection.prototype.addTrack;
                        n && (e.RTCPeerConnection.prototype.addTrack = function () {
                            var e = n.apply(this, arguments);
                            return e._pc = this,
                                e
                        }
                        );
                        e.RTCRtpSender.prototype.getStats = function () {
                            return this.track ? this._pc.getStats(this.track) : Promise.resolve(new Map)
                        }
                    }
                    ,
                    n.shimReceiverGetStats = function (e) {
                        if ("object" !== (void 0 === e ? "undefined" : i(e)) || !e.RTCPeerConnection || !e.RTCRtpSender)
                            return;
                        if (e.RTCRtpSender && "getStats" in e.RTCRtpReceiver.prototype)
                            return;
                        var t = e.RTCPeerConnection.prototype.getReceivers;
                        t && (e.RTCPeerConnection.prototype.getReceivers = function () {
                            var e = this
                                , n = t.apply(this, []);
                            return n.forEach(function (t) {
                                return t._pc = e
                            }),
                                n
                        }
                        );
                        a.wrapPeerConnectionEvent(e, "track", function (e) {
                            return e.receiver._pc = e.srcElement,
                                e
                        }),
                            e.RTCRtpReceiver.prototype.getStats = function () {
                                return this._pc.getStats(this.track)
                            }
                    }
                    ,
                    n.shimRemoveStream = function (e) {
                        if (!e.RTCPeerConnection || "removeStream" in e.RTCPeerConnection.prototype)
                            return;
                        e.RTCPeerConnection.prototype.removeStream = function (e) {
                            var t = this;
                            a.deprecated("removeStream", "removeTrack"),
                                this.getSenders().forEach(function (n) {
                                    n.track && e.getTracks().includes(n.track) && t.removeTrack(n)
                                })
                        }
                    }
                    ,
                    n.shimRTCDataChannel = function (e) {
                        e.DataChannel && !e.RTCDataChannel && (e.RTCDataChannel = e.DataChannel)
                    }
                    ,
                    n.shimAddTransceiver = function (e) {
                        if ("object" !== (void 0 === e ? "undefined" : i(e)) || !e.RTCPeerConnection)
                            return;
                        var t = e.RTCPeerConnection.prototype.addTransceiver;
                        t && (e.RTCPeerConnection.prototype.addTransceiver = function () {
                            this.setParametersPromises = [];
                            var e = arguments[1]
                                , n = e && "sendEncodings" in e;
                            n && e.sendEncodings.forEach(function (e) {
                                if ("rid" in e) {
                                    if (!/^[a-z0-9]{0,16}$/i.test(e.rid))
                                        throw new TypeError("Invalid RID value provided.")
                                }
                                if ("scaleResolutionDownBy" in e && !(parseFloat(e.scaleResolutionDownBy) >= 1))
                                    throw new RangeError("scale_resolution_down_by must be >= 1.0");
                                if ("maxFramerate" in e && !(parseFloat(e.maxFramerate) >= 0))
                                    throw new RangeError("max_framerate must be >= 0.0")
                            });
                            var i = t.apply(this, arguments);
                            if (n) {
                                var r = i.sender
                                    , o = r.getParameters();
                                "encodings" in o || (o.encodings = e.sendEncodings,
                                    this.setParametersPromises.push(r.setParameters(o).catch(function () { })))
                            }
                            return i
                        }
                        )
                    }
                    ,
                    n.shimCreateOffer = function (e) {
                        if ("object" !== (void 0 === e ? "undefined" : i(e)) || !e.RTCPeerConnection)
                            return;
                        var t = e.RTCPeerConnection.prototype.createOffer;
                        e.RTCPeerConnection.prototype.createOffer = function () {
                            var e = this
                                , n = arguments;
                            return this.setParametersPromises && this.setParametersPromises.length ? Promise.all(this.setParametersPromises).then(function () {
                                return t.apply(e, n)
                            }).finally(function () {
                                e.setParametersPromises = []
                            }) : t.apply(this, arguments)
                        }
                    }
                    ,
                    n.shimCreateAnswer = function (e) {
                        if ("object" !== (void 0 === e ? "undefined" : i(e)) || !e.RTCPeerConnection)
                            return;
                        var t = e.RTCPeerConnection.prototype.createAnswer;
                        e.RTCPeerConnection.prototype.createAnswer = function () {
                            var e = this
                                , n = arguments;
                            return this.setParametersPromises && this.setParametersPromises.length ? Promise.all(this.setParametersPromises).then(function () {
                                return t.apply(e, n)
                            }).finally(function () {
                                e.setParametersPromises = []
                            }) : t.apply(this, arguments)
                        }
                    }
                    ;
                var a = function (e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                    return t.default = e,
                        t
                }(e("../utils"))
            }
                , {
                "../utils": 15,
                "./getdisplaymedia": 12,
                "./getusermedia": 13
            }],
            12: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.shimGetDisplayMedia = function (e, t) {
                        if (e.navigator.mediaDevices && "getDisplayMedia" in e.navigator.mediaDevices)
                            return;
                        if (!e.navigator.mediaDevices)
                            return;
                        e.navigator.mediaDevices.getDisplayMedia = function (n) {
                            if (!n || !n.video) {
                                var i = new DOMException("getDisplayMedia without video constraints is undefined");
                                return i.name = "NotFoundError",
                                    i.code = 8,
                                    Promise.reject(i)
                            }
                            return !0 === n.video ? n.video = {
                                mediaSource: t
                            } : n.video.mediaSource = t,
                                e.navigator.mediaDevices.getUserMedia(n)
                        }
                    }
            }
                , {}],
            13: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                });
                var i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                    return typeof e
                }
                    : function (e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    ;
                n.shimGetUserMedia = function (e) {
                    var t = r.detectBrowser(e)
                        , n = e && e.navigator
                        , o = e && e.MediaStreamTrack;
                    if (n.getUserMedia = function (e, t, i) {
                        r.deprecated("navigator.getUserMedia", "navigator.mediaDevices.getUserMedia"),
                            n.mediaDevices.getUserMedia(e).then(t, i)
                    }
                        ,
                        !(t.version > 55 && "autoGainControl" in n.mediaDevices.getSupportedConstraints())) {
                        var a = function (e, t, n) {
                            t in e && !(n in e) && (e[n] = e[t],
                                delete e[t])
                        }
                            , s = n.mediaDevices.getUserMedia.bind(n.mediaDevices);
                        if (n.mediaDevices.getUserMedia = function (e) {
                            return "object" === (void 0 === e ? "undefined" : i(e)) && "object" === i(e.audio) && (e = JSON.parse(JSON.stringify(e)),
                                a(e.audio, "autoGainControl", "mozAutoGainControl"),
                                a(e.audio, "noiseSuppression", "mozNoiseSuppression")),
                                s(e)
                        }
                            ,
                            o && o.prototype.getSettings) {
                            var l = o.prototype.getSettings;
                            o.prototype.getSettings = function () {
                                var e = l.apply(this, arguments);
                                return a(e, "mozAutoGainControl", "autoGainControl"),
                                    a(e, "mozNoiseSuppression", "noiseSuppression"),
                                    e
                            }
                        }
                        if (o && o.prototype.applyConstraints) {
                            var c = o.prototype.applyConstraints;
                            o.prototype.applyConstraints = function (e) {
                                return "audio" === this.kind && "object" === (void 0 === e ? "undefined" : i(e)) && (e = JSON.parse(JSON.stringify(e)),
                                    a(e, "autoGainControl", "mozAutoGainControl"),
                                    a(e, "noiseSuppression", "mozNoiseSuppression")),
                                    c.apply(this, [e])
                            }
                        }
                    }
                }
                    ;
                var r = function (e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                    return t.default = e,
                        t
                }(e("../utils"))
            }
                , {
                "../utils": 15
            }],
            14: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                });
                var i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                    return typeof e
                }
                    : function (e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    ;
                n.shimLocalStreamsAPI = function (e) {
                    if ("object" !== (void 0 === e ? "undefined" : i(e)) || !e.RTCPeerConnection)
                        return;
                    "getLocalStreams" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getLocalStreams = function () {
                        return this._localStreams || (this._localStreams = []),
                            this._localStreams
                    }
                    );
                    if (!("addStream" in e.RTCPeerConnection.prototype)) {
                        var t = e.RTCPeerConnection.prototype.addTrack;
                        e.RTCPeerConnection.prototype.addStream = function (e) {
                            var n = this;
                            this._localStreams || (this._localStreams = []),
                                this._localStreams.includes(e) || this._localStreams.push(e),
                                e.getAudioTracks().forEach(function (i) {
                                    return t.call(n, i, e)
                                }),
                                e.getVideoTracks().forEach(function (i) {
                                    return t.call(n, i, e)
                                })
                        }
                            ,
                            e.RTCPeerConnection.prototype.addTrack = function (e) {
                                var n = arguments[1];
                                return n && (this._localStreams ? this._localStreams.includes(n) || this._localStreams.push(n) : this._localStreams = [n]),
                                    t.apply(this, arguments)
                            }
                    }
                    "removeStream" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.removeStream = function (e) {
                        var t = this;
                        this._localStreams || (this._localStreams = []);
                        var n = this._localStreams.indexOf(e);
                        if (-1 !== n) {
                            this._localStreams.splice(n, 1);
                            var i = e.getTracks();
                            this.getSenders().forEach(function (e) {
                                i.includes(e.track) && t.removeTrack(e)
                            })
                        }
                    }
                    )
                }
                    ,
                    n.shimRemoteStreamsAPI = function (e) {
                        if ("object" !== (void 0 === e ? "undefined" : i(e)) || !e.RTCPeerConnection)
                            return;
                        "getRemoteStreams" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getRemoteStreams = function () {
                            return this._remoteStreams ? this._remoteStreams : []
                        }
                        );
                        if (!("onaddstream" in e.RTCPeerConnection.prototype)) {
                            Object.defineProperty(e.RTCPeerConnection.prototype, "onaddstream", {
                                get: function () {
                                    return this._onaddstream
                                },
                                set: function (e) {
                                    var t = this;
                                    this._onaddstream && (this.removeEventListener("addstream", this._onaddstream),
                                        this.removeEventListener("track", this._onaddstreampoly)),
                                        this.addEventListener("addstream", this._onaddstream = e),
                                        this.addEventListener("track", this._onaddstreampoly = function (e) {
                                            e.streams.forEach(function (e) {
                                                if (t._remoteStreams || (t._remoteStreams = []),
                                                    !t._remoteStreams.includes(e)) {
                                                    t._remoteStreams.push(e);
                                                    var n = new Event("addstream");
                                                    n.stream = e,
                                                        t.dispatchEvent(n)
                                                }
                                            })
                                        }
                                        )
                                }
                            });
                            var t = e.RTCPeerConnection.prototype.setRemoteDescription;
                            e.RTCPeerConnection.prototype.setRemoteDescription = function () {
                                var e = this;
                                return this._onaddstreampoly || this.addEventListener("track", this._onaddstreampoly = function (t) {
                                    t.streams.forEach(function (t) {
                                        if (e._remoteStreams || (e._remoteStreams = []),
                                            !(e._remoteStreams.indexOf(t) >= 0)) {
                                            e._remoteStreams.push(t);
                                            var n = new Event("addstream");
                                            n.stream = t,
                                                e.dispatchEvent(n)
                                        }
                                    })
                                }
                                ),
                                    t.apply(e, arguments)
                            }
                        }
                    }
                    ,
                    n.shimCallbacksAPI = function (e) {
                        if ("object" !== (void 0 === e ? "undefined" : i(e)) || !e.RTCPeerConnection)
                            return;
                        var t = e.RTCPeerConnection.prototype
                            , n = t.createOffer
                            , r = t.createAnswer
                            , o = t.setLocalDescription
                            , a = t.setRemoteDescription
                            , s = t.addIceCandidate;
                        t.createOffer = function (e, t) {
                            var i = arguments.length >= 2 ? arguments[2] : arguments[0]
                                , r = n.apply(this, [i]);
                            return t ? (r.then(e, t),
                                Promise.resolve()) : r
                        }
                            ,
                            t.createAnswer = function (e, t) {
                                var n = arguments.length >= 2 ? arguments[2] : arguments[0]
                                    , i = r.apply(this, [n]);
                                return t ? (i.then(e, t),
                                    Promise.resolve()) : i
                            }
                            ;
                        var l = function (e, t, n) {
                            var i = o.apply(this, [e]);
                            return n ? (i.then(t, n),
                                Promise.resolve()) : i
                        };
                        t.setLocalDescription = l,
                            l = function (e, t, n) {
                                var i = a.apply(this, [e]);
                                return n ? (i.then(t, n),
                                    Promise.resolve()) : i
                            }
                            ,
                            t.setRemoteDescription = l,
                            l = function (e, t, n) {
                                var i = s.apply(this, [e]);
                                return n ? (i.then(t, n),
                                    Promise.resolve()) : i
                            }
                            ,
                            t.addIceCandidate = l
                    }
                    ,
                    n.shimGetUserMedia = function (e) {
                        var t = e && e.navigator;
                        if (t.mediaDevices && t.mediaDevices.getUserMedia) {
                            var n = t.mediaDevices
                                , i = n.getUserMedia.bind(n);
                            t.mediaDevices.getUserMedia = function (e) {
                                return i(o(e))
                            }
                        }
                        !t.getUserMedia && t.mediaDevices && t.mediaDevices.getUserMedia && (t.getUserMedia = function (e, n, i) {
                            t.mediaDevices.getUserMedia(e).then(n, i)
                        }
                            .bind(t))
                    }
                    ,
                    n.shimConstraints = o,
                    n.shimRTCIceServerUrls = function (e) {
                        var t = e.RTCPeerConnection;
                        e.RTCPeerConnection = function (e, n) {
                            if (e && e.iceServers) {
                                for (var i = [], o = 0; o < e.iceServers.length; o++) {
                                    var a = e.iceServers[o];
                                    !a.hasOwnProperty("urls") && a.hasOwnProperty("url") ? (r.deprecated("RTCIceServer.url", "RTCIceServer.urls"),
                                        (a = JSON.parse(JSON.stringify(a))).urls = a.url,
                                        delete a.url,
                                        i.push(a)) : i.push(e.iceServers[o])
                                }
                                e.iceServers = i
                            }
                            return new t(e, n)
                        }
                            ,
                            e.RTCPeerConnection.prototype = t.prototype,
                            "generateCertificate" in e.RTCPeerConnection && Object.defineProperty(e.RTCPeerConnection, "generateCertificate", {
                                get: function () {
                                    return t.generateCertificate
                                }
                            })
                    }
                    ,
                    n.shimTrackEventTransceiver = function (e) {
                        "object" === (void 0 === e ? "undefined" : i(e)) && e.RTCTrackEvent && "receiver" in e.RTCTrackEvent.prototype && !("transceiver" in e.RTCTrackEvent.prototype) && Object.defineProperty(e.RTCTrackEvent.prototype, "transceiver", {
                            get: function () {
                                return {
                                    receiver: this.receiver
                                }
                            }
                        })
                    }
                    ,
                    n.shimCreateOfferLegacy = function (e) {
                        var t = e.RTCPeerConnection.prototype.createOffer;
                        e.RTCPeerConnection.prototype.createOffer = function (e) {
                            if (e) {
                                void 0 !== e.offerToReceiveAudio && (e.offerToReceiveAudio = !!e.offerToReceiveAudio);
                                var n = this.getTransceivers().find(function (e) {
                                    return "audio" === e.receiver.track.kind
                                });
                                !1 === e.offerToReceiveAudio && n ? "sendrecv" === n.direction ? n.setDirection ? n.setDirection("sendonly") : n.direction = "sendonly" : "recvonly" === n.direction && (n.setDirection ? n.setDirection("inactive") : n.direction = "inactive") : !0 !== e.offerToReceiveAudio || n || this.addTransceiver("audio"),
                                    void 0 !== e.offerToReceiveVideo && (e.offerToReceiveVideo = !!e.offerToReceiveVideo);
                                var i = this.getTransceivers().find(function (e) {
                                    return "video" === e.receiver.track.kind
                                });
                                !1 === e.offerToReceiveVideo && i ? "sendrecv" === i.direction ? i.setDirection ? i.setDirection("sendonly") : i.direction = "sendonly" : "recvonly" === i.direction && (i.setDirection ? i.setDirection("inactive") : i.direction = "inactive") : !0 !== e.offerToReceiveVideo || i || this.addTransceiver("video")
                            }
                            return t.apply(this, arguments)
                        }
                    }
                    ;
                var r = function (e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                    return t.default = e,
                        t
                }(e("../utils"));
                function o(e) {
                    return e && void 0 !== e.video ? Object.assign({}, e, {
                        video: r.compactObject(e.video)
                    }) : e
                }
            }
                , {
                "../utils": 15
            }],
            15: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                });
                var i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                    return typeof e
                }
                    : function (e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    ;
                n.extractVersion = a,
                    n.wrapPeerConnectionEvent = function (e, t, n) {
                        if (!e.RTCPeerConnection)
                            return;
                        var i = e.RTCPeerConnection.prototype
                            , r = i.addEventListener;
                        i.addEventListener = function (e, i) {
                            if (e !== t)
                                return r.apply(this, arguments);
                            var o = function (e) {
                                var t = n(e);
                                t && i(t)
                            };
                            return this._eventMap = this._eventMap || {},
                                this._eventMap[i] = o,
                                r.apply(this, [e, o])
                        }
                            ;
                        var o = i.removeEventListener;
                        i.removeEventListener = function (e, n) {
                            if (e !== t || !this._eventMap || !this._eventMap[n])
                                return o.apply(this, arguments);
                            var i = this._eventMap[n];
                            return delete this._eventMap[n],
                                o.apply(this, [e, i])
                        }
                            ,
                            Object.defineProperty(i, "on" + t, {
                                get: function () {
                                    return this["_on" + t]
                                },
                                set: function (e) {
                                    this["_on" + t] && (this.removeEventListener(t, this["_on" + t]),
                                        delete this["_on" + t]),
                                        e && this.addEventListener(t, this["_on" + t] = e)
                                },
                                enumerable: !0,
                                configurable: !0
                            })
                    }
                    ,
                    n.disableLog = function (e) {
                        if ("boolean" != typeof e)
                            return new Error("Argument type: " + (void 0 === e ? "undefined" : i(e)) + ". Please use a boolean.");
                        return r = e,
                            e ? "adapter.js logging disabled" : "adapter.js logging enabled"
                    }
                    ,
                    n.disableWarnings = function (e) {
                        if ("boolean" != typeof e)
                            return new Error("Argument type: " + (void 0 === e ? "undefined" : i(e)) + ". Please use a boolean.");
                        return o = !e,
                            "adapter.js deprecation warnings " + (e ? "disabled" : "enabled")
                    }
                    ,
                    n.log = function () {
                        if ("object" === ("undefined" == typeof window ? "undefined" : i(window))) {
                            if (r)
                                return;
                            "undefined" != typeof console && "function" == typeof console.log && console.log.apply(console, arguments)
                        }
                    }
                    ,
                    n.deprecated = function (e, t) {
                        if (!o)
                            return;
                        console.warn(e + " is deprecated, please use " + t + " instead.")
                    }
                    ,
                    n.detectBrowser = function (e) {
                        var t = e.navigator
                            , n = {
                                browser: null,
                                version: null
                            };
                        if (void 0 === e || !e.navigator)
                            return n.browser = "Not a browser.",
                                n;
                        if (t.mozGetUserMedia)
                            n.browser = "firefox",
                                n.version = a(t.userAgent, /Firefox\/(\d+)\./, 1);
                        else if (t.webkitGetUserMedia || !1 === e.isSecureContext && e.webkitRTCPeerConnection && !e.RTCIceGatherer)
                            n.browser = "chrome",
                                n.version = a(t.userAgent, /Chrom(e|ium)\/(\d+)\./, 2);
                        else if (t.mediaDevices && t.userAgent.match(/Edge\/(\d+).(\d+)$/))
                            n.browser = "edge",
                                n.version = a(t.userAgent, /Edge\/(\d+).(\d+)$/, 2);
                        else {
                            if (!e.RTCPeerConnection || !t.userAgent.match(/AppleWebKit\/(\d+)\./))
                                return n.browser = "Not a supported browser.",
                                    n;
                            n.browser = "safari",
                                n.version = a(t.userAgent, /AppleWebKit\/(\d+)\./, 1),
                                n.supportsUnifiedPlan = e.RTCRtpTransceiver && "currentDirection" in e.RTCRtpTransceiver.prototype
                        }
                        return n
                    }
                    ,
                    n.compactObject = function e(t) {
                        if (!s(t))
                            return t;
                        return Object.keys(t).reduce(function (n, i) {
                            var r = s(t[i])
                                , o = r ? e(t[i]) : t[i]
                                , a = r && !Object.keys(o).length;
                            return void 0 === o || a ? n : Object.assign(n, function (e, t, n) {
                                t in e ? Object.defineProperty(e, t, {
                                    value: n,
                                    enumerable: !0,
                                    configurable: !0,
                                    writable: !0
                                }) : e[t] = n;
                                return e
                            }({}, i, o))
                        }, {})
                    }
                    ,
                    n.walkStats = l,
                    n.filterStats = function (e, t, n) {
                        var i = n ? "outbound-rtp" : "inbound-rtp"
                            , r = new Map;
                        if (null === t)
                            return r;
                        var o = [];
                        return e.forEach(function (e) {
                            "track" === e.type && e.trackIdentifier === t.id && o.push(e)
                        }),
                            o.forEach(function (t) {
                                e.forEach(function (n) {
                                    n.type === i && n.trackId === t.id && l(e, n, r)
                                })
                            }),
                            r
                    }
                    ;
                var r = !0
                    , o = !0;
                function a(e, t, n) {
                    var i = e.match(t);
                    return i && i.length >= n && parseInt(i[n], 10)
                }
                function s(e) {
                    return "[object Object]" === Object.prototype.toString.call(e)
                }
                function l(e, t, n) {
                    t && !n.has(t.id) && (n.set(t.id, t),
                        Object.keys(t).forEach(function (i) {
                            i.endsWith("Id") ? l(e, e.get(t[i]), n) : i.endsWith("Ids") && t[i].forEach(function (t) {
                                l(e, e.get(t), n)
                            })
                        }))
                }
            }
                , {}],
            16: [function (e, t, n) {
                "use strict";
                var i = e("sdp");
                function r(e, t, n, r, o) {
                    var a = i.writeRtpDescription(e.kind, t);
                    if (a += i.writeIceParameters(e.iceGatherer.getLocalParameters()),
                        a += i.writeDtlsParameters(e.dtlsTransport.getLocalParameters(), "offer" === n ? "actpass" : o || "active"),
                        a += "a=mid:" + e.mid + "\r\n",
                        e.rtpSender && e.rtpReceiver ? a += "a=sendrecv\r\n" : e.rtpSender ? a += "a=sendonly\r\n" : e.rtpReceiver ? a += "a=recvonly\r\n" : a += "a=inactive\r\n",
                        e.rtpSender) {
                        var s = e.rtpSender._initialTrackId || e.rtpSender.track.id;
                        e.rtpSender._initialTrackId = s;
                        var l = "msid:" + (r ? r.id : "-") + " " + s + "\r\n";
                        a += "a=" + l,
                            a += "a=ssrc:" + e.sendEncodingParameters[0].ssrc + " " + l,
                            e.sendEncodingParameters[0].rtx && (a += "a=ssrc:" + e.sendEncodingParameters[0].rtx.ssrc + " " + l,
                                a += "a=ssrc-group:FID " + e.sendEncodingParameters[0].ssrc + " " + e.sendEncodingParameters[0].rtx.ssrc + "\r\n")
                    }
                    return a += "a=ssrc:" + e.sendEncodingParameters[0].ssrc + " cname:" + i.localCName + "\r\n",
                        e.rtpSender && e.sendEncodingParameters[0].rtx && (a += "a=ssrc:" + e.sendEncodingParameters[0].rtx.ssrc + " cname:" + i.localCName + "\r\n"),
                        a
                }
                function o(e, t) {
                    var n = {
                        codecs: [],
                        headerExtensions: [],
                        fecMechanisms: []
                    }
                        , i = function (e, t) {
                            e = parseInt(e, 10);
                            for (var n = 0; n < t.length; n++)
                                if (t[n].payloadType === e || t[n].preferredPayloadType === e)
                                    return t[n]
                        }
                        , r = function (e, t, n, r) {
                            var o = i(e.parameters.apt, n)
                                , a = i(t.parameters.apt, r);
                            return o && a && o.name.toLowerCase() === a.name.toLowerCase()
                        };
                    return e.codecs.forEach(function (i) {
                        for (var o = 0; o < t.codecs.length; o++) {
                            var a = t.codecs[o];
                            if (i.name.toLowerCase() === a.name.toLowerCase() && i.clockRate === a.clockRate) {
                                if ("rtx" === i.name.toLowerCase() && i.parameters && a.parameters.apt && !r(i, a, e.codecs, t.codecs))
                                    continue;
                                (a = JSON.parse(JSON.stringify(a))).numChannels = Math.min(i.numChannels, a.numChannels),
                                    n.codecs.push(a),
                                    a.rtcpFeedback = a.rtcpFeedback.filter(function (e) {
                                        for (var t = 0; t < i.rtcpFeedback.length; t++)
                                            if (i.rtcpFeedback[t].type === e.type && i.rtcpFeedback[t].parameter === e.parameter)
                                                return !0;
                                        return !1
                                    });
                                break
                            }
                        }
                    }),
                        e.headerExtensions.forEach(function (e) {
                            for (var i = 0; i < t.headerExtensions.length; i++) {
                                var r = t.headerExtensions[i];
                                if (e.uri === r.uri) {
                                    n.headerExtensions.push(r);
                                    break
                                }
                            }
                        }),
                        n
                }
                function a(e, t, n) {
                    return -1 !== {
                        offer: {
                            setLocalDescription: ["stable", "have-local-offer"],
                            setRemoteDescription: ["stable", "have-remote-offer"]
                        },
                        answer: {
                            setLocalDescription: ["have-remote-offer", "have-local-pranswer"],
                            setRemoteDescription: ["have-local-offer", "have-remote-pranswer"]
                        }
                    }[t][e].indexOf(n)
                }
                function s(e, t) {
                    var n = e.getRemoteCandidates().find(function (e) {
                        return t.foundation === e.foundation && t.ip === e.ip && t.port === e.port && t.priority === e.priority && t.protocol === e.protocol && t.type === e.type
                    });
                    return n || e.addRemoteCandidate(t),
                        !n
                }
                function l(e, t) {
                    var n = new Error(t);
                    return n.name = e,
                        n.code = {
                            NotSupportedError: 9,
                            InvalidStateError: 11,
                            InvalidAccessError: 15,
                            TypeError: void 0,
                            OperationError: void 0
                        }[e],
                        n
                }
                t.exports = function (e, t) {
                    function n(t, n) {
                        n.addTrack(t),
                            n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack", {
                                track: t
                            }))
                    }
                    function c(t, n, i, r) {
                        var o = new Event("track");
                        o.track = n,
                            o.receiver = i,
                            o.transceiver = {
                                receiver: i
                            },
                            o.streams = r,
                            e.setTimeout(function () {
                                t._dispatchEvent("track", o)
                            })
                    }
                    var u = function (n) {
                        var r = this
                            , o = document.createDocumentFragment();
                        if (["addEventListener", "removeEventListener", "dispatchEvent"].forEach(function (e) {
                            r[e] = o[e].bind(o)
                        }),
                            this.canTrickleIceCandidates = null,
                            this.needNegotiation = !1,
                            this.localStreams = [],
                            this.remoteStreams = [],
                            this._localDescription = null,
                            this._remoteDescription = null,
                            this.signalingState = "stable",
                            this.iceConnectionState = "new",
                            this.connectionState = "new",
                            this.iceGatheringState = "new",
                            n = JSON.parse(JSON.stringify(n || {})),
                            this.usingBundle = "max-bundle" === n.bundlePolicy,
                            "negotiate" === n.rtcpMuxPolicy)
                            throw l("NotSupportedError", "rtcpMuxPolicy 'negotiate' is not supported");
                        switch (n.rtcpMuxPolicy || (n.rtcpMuxPolicy = "require"),
                        n.iceTransportPolicy) {
                            case "all":
                            case "relay":
                                break;
                            default:
                                n.iceTransportPolicy = "all"
                        }
                        switch (n.bundlePolicy) {
                            case "balanced":
                            case "max-compat":
                            case "max-bundle":
                                break;
                            default:
                                n.bundlePolicy = "balanced"
                        }
                        if (n.iceServers = function (e, t) {
                            var n = !1;
                            return (e = JSON.parse(JSON.stringify(e))).filter(function (e) {
                                if (e && (e.urls || e.url)) {
                                    var i = e.urls || e.url;
                                    e.url && !e.urls && console.warn("RTCIceServer.url is deprecated! Use urls instead.");
                                    var r = "string" == typeof i;
                                    return r && (i = [i]),
                                        i = i.filter(function (e) {
                                            return 0 !== e.indexOf("turn:") || -1 === e.indexOf("transport=udp") || -1 !== e.indexOf("turn:[") || n ? 0 === e.indexOf("stun:") && t >= 14393 && -1 === e.indexOf("?transport=udp") : (n = !0,
                                                !0)
                                        }),
                                        delete e.url,
                                        e.urls = r ? i[0] : i,
                                        !!i.length
                                }
                            })
                        }(n.iceServers || [], t),
                            this._iceGatherers = [],
                            n.iceCandidatePoolSize)
                            for (var a = n.iceCandidatePoolSize; a > 0; a--)
                                this._iceGatherers.push(new e.RTCIceGatherer({
                                    iceServers: n.iceServers,
                                    gatherPolicy: n.iceTransportPolicy
                                }));
                        else
                            n.iceCandidatePoolSize = 0;
                        this._config = n,
                            this.transceivers = [],
                            this._sdpSessionId = i.generateSessionId(),
                            this._sdpSessionVersion = 0,
                            this._dtlsRole = void 0,
                            this._isClosed = !1
                    };
                    Object.defineProperty(u.prototype, "localDescription", {
                        configurable: !0,
                        get: function () {
                            return this._localDescription
                        }
                    }),
                        Object.defineProperty(u.prototype, "remoteDescription", {
                            configurable: !0,
                            get: function () {
                                return this._remoteDescription
                            }
                        }),
                        u.prototype.onicecandidate = null,
                        u.prototype.onaddstream = null,
                        u.prototype.ontrack = null,
                        u.prototype.onremovestream = null,
                        u.prototype.onsignalingstatechange = null,
                        u.prototype.oniceconnectionstatechange = null,
                        u.prototype.onconnectionstatechange = null,
                        u.prototype.onicegatheringstatechange = null,
                        u.prototype.onnegotiationneeded = null,
                        u.prototype.ondatachannel = null,
                        u.prototype._dispatchEvent = function (e, t) {
                            this._isClosed || (this.dispatchEvent(t),
                                "function" == typeof this["on" + e] && this["on" + e](t))
                        }
                        ,
                        u.prototype._emitGatheringStateChange = function () {
                            var e = new Event("icegatheringstatechange");
                            this._dispatchEvent("icegatheringstatechange", e)
                        }
                        ,
                        u.prototype.getConfiguration = function () {
                            return this._config
                        }
                        ,
                        u.prototype.getLocalStreams = function () {
                            return this.localStreams
                        }
                        ,
                        u.prototype.getRemoteStreams = function () {
                            return this.remoteStreams
                        }
                        ,
                        u.prototype._createTransceiver = function (e, t) {
                            var n = this.transceivers.length > 0
                                , i = {
                                    track: null,
                                    iceGatherer: null,
                                    iceTransport: null,
                                    dtlsTransport: null,
                                    localCapabilities: null,
                                    remoteCapabilities: null,
                                    rtpSender: null,
                                    rtpReceiver: null,
                                    kind: e,
                                    mid: null,
                                    sendEncodingParameters: null,
                                    recvEncodingParameters: null,
                                    stream: null,
                                    associatedRemoteMediaStreams: [],
                                    wantReceive: !0
                                };
                            if (this.usingBundle && n)
                                i.iceTransport = this.transceivers[0].iceTransport,
                                    i.dtlsTransport = this.transceivers[0].dtlsTransport;
                            else {
                                var r = this._createIceAndDtlsTransports();
                                i.iceTransport = r.iceTransport,
                                    i.dtlsTransport = r.dtlsTransport
                            }
                            return t || this.transceivers.push(i),
                                i
                        }
                        ,
                        u.prototype.addTrack = function (t, n) {
                            if (this._isClosed)
                                throw l("InvalidStateError", "Attempted to call addTrack on a closed peerconnection.");
                            var i;
                            if (this.transceivers.find(function (e) {
                                return e.track === t
                            }))
                                throw l("InvalidAccessError", "Track already exists.");
                            for (var r = 0; r < this.transceivers.length; r++)
                                this.transceivers[r].track || this.transceivers[r].kind !== t.kind || (i = this.transceivers[r]);
                            return i || (i = this._createTransceiver(t.kind)),
                                this._maybeFireNegotiationNeeded(),
                                -1 === this.localStreams.indexOf(n) && this.localStreams.push(n),
                                i.track = t,
                                i.stream = n,
                                i.rtpSender = new e.RTCRtpSender(t, i.dtlsTransport),
                                i.rtpSender
                        }
                        ,
                        u.prototype.addStream = function (e) {
                            var n = this;
                            if (t >= 15025)
                                e.getTracks().forEach(function (t) {
                                    n.addTrack(t, e)
                                });
                            else {
                                var i = e.clone();
                                e.getTracks().forEach(function (e, t) {
                                    var n = i.getTracks()[t];
                                    e.addEventListener("enabled", function (e) {
                                        n.enabled = e.enabled
                                    })
                                }),
                                    i.getTracks().forEach(function (e) {
                                        n.addTrack(e, i)
                                    })
                            }
                        }
                        ,
                        u.prototype.removeTrack = function (t) {
                            if (this._isClosed)
                                throw l("InvalidStateError", "Attempted to call removeTrack on a closed peerconnection.");
                            if (!(t instanceof e.RTCRtpSender))
                                throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");
                            var n = this.transceivers.find(function (e) {
                                return e.rtpSender === t
                            });
                            if (!n)
                                throw l("InvalidAccessError", "Sender was not created by this connection.");
                            var i = n.stream;
                            n.rtpSender.stop(),
                                n.rtpSender = null,
                                n.track = null,
                                n.stream = null,
                                -1 === this.transceivers.map(function (e) {
                                    return e.stream
                                }).indexOf(i) && this.localStreams.indexOf(i) > -1 && this.localStreams.splice(this.localStreams.indexOf(i), 1),
                                this._maybeFireNegotiationNeeded()
                        }
                        ,
                        u.prototype.removeStream = function (e) {
                            var t = this;
                            e.getTracks().forEach(function (e) {
                                var n = t.getSenders().find(function (t) {
                                    return t.track === e
                                });
                                n && t.removeTrack(n)
                            })
                        }
                        ,
                        u.prototype.getSenders = function () {
                            return this.transceivers.filter(function (e) {
                                return !!e.rtpSender
                            }).map(function (e) {
                                return e.rtpSender
                            })
                        }
                        ,
                        u.prototype.getReceivers = function () {
                            return this.transceivers.filter(function (e) {
                                return !!e.rtpReceiver
                            }).map(function (e) {
                                return e.rtpReceiver
                            })
                        }
                        ,
                        u.prototype._createIceGatherer = function (t, n) {
                            var i = this;
                            if (n && t > 0)
                                return this.transceivers[0].iceGatherer;
                            if (this._iceGatherers.length)
                                return this._iceGatherers.shift();
                            var r = new e.RTCIceGatherer({
                                iceServers: this._config.iceServers,
                                gatherPolicy: this._config.iceTransportPolicy
                            });
                            return Object.defineProperty(r, "state", {
                                value: "new",
                                writable: !0
                            }),
                                this.transceivers[t].bufferedCandidateEvents = [],
                                this.transceivers[t].bufferCandidates = function (e) {
                                    var n = !e.candidate || 0 === Object.keys(e.candidate).length;
                                    r.state = n ? "completed" : "gathering",
                                        null !== i.transceivers[t].bufferedCandidateEvents && i.transceivers[t].bufferedCandidateEvents.push(e)
                                }
                                ,
                                r.addEventListener("localcandidate", this.transceivers[t].bufferCandidates),
                                r
                        }
                        ,
                        u.prototype._gather = function (t, n) {
                            var r = this
                                , o = this.transceivers[n].iceGatherer;
                            if (!o.onlocalcandidate) {
                                var a = this.transceivers[n].bufferedCandidateEvents;
                                this.transceivers[n].bufferedCandidateEvents = null,
                                    o.removeEventListener("localcandidate", this.transceivers[n].bufferCandidates),
                                    o.onlocalcandidate = function (e) {
                                        if (!(r.usingBundle && n > 0)) {
                                            var a = new Event("icecandidate");
                                            a.candidate = {
                                                sdpMid: t,
                                                sdpMLineIndex: n
                                            };
                                            var s = e.candidate
                                                , l = !s || 0 === Object.keys(s).length;
                                            if (l)
                                                "new" !== o.state && "gathering" !== o.state || (o.state = "completed");
                                            else {
                                                "new" === o.state && (o.state = "gathering"),
                                                    s.component = 1,
                                                    s.ufrag = o.getLocalParameters().usernameFragment;
                                                var c = i.writeCandidate(s);
                                                a.candidate = Object.assign(a.candidate, i.parseCandidate(c)),
                                                    a.candidate.candidate = c,
                                                    a.candidate.toJSON = function () {
                                                        return {
                                                            candidate: a.candidate.candidate,
                                                            sdpMid: a.candidate.sdpMid,
                                                            sdpMLineIndex: a.candidate.sdpMLineIndex,
                                                            usernameFragment: a.candidate.usernameFragment
                                                        }
                                                    }
                                            }
                                            var u = i.getMediaSections(r._localDescription.sdp);
                                            u[a.candidate.sdpMLineIndex] += l ? "a=end-of-candidates\r\n" : "a=" + a.candidate.candidate + "\r\n",
                                                r._localDescription.sdp = i.getDescription(r._localDescription.sdp) + u.join("");
                                            var d = r.transceivers.every(function (e) {
                                                return e.iceGatherer && "completed" === e.iceGatherer.state
                                            });
                                            "gathering" !== r.iceGatheringState && (r.iceGatheringState = "gathering",
                                                r._emitGatheringStateChange()),
                                                l || r._dispatchEvent("icecandidate", a),
                                                d && (r._dispatchEvent("icecandidate", new Event("icecandidate")),
                                                    r.iceGatheringState = "complete",
                                                    r._emitGatheringStateChange())
                                        }
                                    }
                                    ,
                                    e.setTimeout(function () {
                                        a.forEach(function (e) {
                                            o.onlocalcandidate(e)
                                        })
                                    }, 0)
                            }
                        }
                        ,
                        u.prototype._createIceAndDtlsTransports = function () {
                            var t = this
                                , n = new e.RTCIceTransport(null);
                            n.onicestatechange = function () {
                                t._updateIceConnectionState(),
                                    t._updateConnectionState()
                            }
                                ;
                            var i = new e.RTCDtlsTransport(n);
                            return i.ondtlsstatechange = function () {
                                t._updateConnectionState()
                            }
                                ,
                                i.onerror = function () {
                                    Object.defineProperty(i, "state", {
                                        value: "failed",
                                        writable: !0
                                    }),
                                        t._updateConnectionState()
                                }
                                ,
                            {
                                iceTransport: n,
                                dtlsTransport: i
                            }
                        }
                        ,
                        u.prototype._disposeIceAndDtlsTransports = function (e) {
                            var t = this.transceivers[e].iceGatherer;
                            t && (delete t.onlocalcandidate,
                                delete this.transceivers[e].iceGatherer);
                            var n = this.transceivers[e].iceTransport;
                            n && (delete n.onicestatechange,
                                delete this.transceivers[e].iceTransport);
                            var i = this.transceivers[e].dtlsTransport;
                            i && (delete i.ondtlsstatechange,
                                delete i.onerror,
                                delete this.transceivers[e].dtlsTransport)
                        }
                        ,
                        u.prototype._transceive = function (e, n, r) {
                            var a = o(e.localCapabilities, e.remoteCapabilities);
                            n && e.rtpSender && (a.encodings = e.sendEncodingParameters,
                                a.rtcp = {
                                    cname: i.localCName,
                                    compound: e.rtcpParameters.compound
                                },
                                e.recvEncodingParameters.length && (a.rtcp.ssrc = e.recvEncodingParameters[0].ssrc),
                                e.rtpSender.send(a)),
                                r && e.rtpReceiver && a.codecs.length > 0 && ("video" === e.kind && e.recvEncodingParameters && t < 15019 && e.recvEncodingParameters.forEach(function (e) {
                                    delete e.rtx
                                }),
                                    e.recvEncodingParameters.length ? a.encodings = e.recvEncodingParameters : a.encodings = [{}],
                                    a.rtcp = {
                                        compound: e.rtcpParameters.compound
                                    },
                                    e.rtcpParameters.cname && (a.rtcp.cname = e.rtcpParameters.cname),
                                    e.sendEncodingParameters.length && (a.rtcp.ssrc = e.sendEncodingParameters[0].ssrc),
                                    e.rtpReceiver.receive(a))
                        }
                        ,
                        u.prototype.setLocalDescription = function (e) {
                            var t, n, r = this;
                            if (-1 === ["offer", "answer"].indexOf(e.type))
                                return Promise.reject(l("TypeError", 'Unsupported type "' + e.type + '"'));
                            if (!a("setLocalDescription", e.type, r.signalingState) || r._isClosed)
                                return Promise.reject(l("InvalidStateError", "Can not set local " + e.type + " in state " + r.signalingState));
                            if ("offer" === e.type)
                                t = i.splitSections(e.sdp),
                                    n = t.shift(),
                                    t.forEach(function (e, t) {
                                        var n = i.parseRtpParameters(e);
                                        r.transceivers[t].localCapabilities = n
                                    }),
                                    r.transceivers.forEach(function (e, t) {
                                        r._gather(e.mid, t)
                                    });
                            else if ("answer" === e.type) {
                                t = i.splitSections(r._remoteDescription.sdp),
                                    n = t.shift();
                                var s = i.matchPrefix(n, "a=ice-lite").length > 0;
                                t.forEach(function (e, t) {
                                    var a = r.transceivers[t]
                                        , l = a.iceGatherer
                                        , c = a.iceTransport
                                        , u = a.dtlsTransport
                                        , d = a.localCapabilities
                                        , p = a.remoteCapabilities;
                                    if (!(i.isRejected(e) && 0 === i.matchPrefix(e, "a=bundle-only").length) && !a.rejected) {
                                        var h = i.getIceParameters(e, n)
                                            , f = i.getDtlsParameters(e, n);
                                        s && (f.role = "server"),
                                            r.usingBundle && 0 !== t || (r._gather(a.mid, t),
                                                "new" === c.state && c.start(l, h, s ? "controlling" : "controlled"),
                                                "new" === u.state && u.start(f));
                                        var m = o(d, p);
                                        r._transceive(a, m.codecs.length > 0, !1)
                                    }
                                })
                            }
                            return r._localDescription = {
                                type: e.type,
                                sdp: e.sdp
                            },
                                "offer" === e.type ? r._updateSignalingState("have-local-offer") : r._updateSignalingState("stable"),
                                Promise.resolve()
                        }
                        ,
                        u.prototype.setRemoteDescription = function (r) {
                            var u = this;
                            if (-1 === ["offer", "answer"].indexOf(r.type))
                                return Promise.reject(l("TypeError", 'Unsupported type "' + r.type + '"'));
                            if (!a("setRemoteDescription", r.type, u.signalingState) || u._isClosed)
                                return Promise.reject(l("InvalidStateError", "Can not set remote " + r.type + " in state " + u.signalingState));
                            var d = {};
                            u.remoteStreams.forEach(function (e) {
                                d[e.id] = e
                            });
                            var p = []
                                , h = i.splitSections(r.sdp)
                                , f = h.shift()
                                , m = i.matchPrefix(f, "a=ice-lite").length > 0
                                , g = i.matchPrefix(f, "a=group:BUNDLE ").length > 0;
                            u.usingBundle = g;
                            var v = i.matchPrefix(f, "a=ice-options:")[0];
                            return u.canTrickleIceCandidates = !!v && v.substr(14).split(" ").indexOf("trickle") >= 0,
                                h.forEach(function (a, l) {
                                    var c = i.splitLines(a)
                                        , h = i.getKind(a)
                                        , v = i.isRejected(a) && 0 === i.matchPrefix(a, "a=bundle-only").length
                                        , y = c[0].substr(2).split(" ")[2]
                                        , b = i.getDirection(a, f)
                                        , w = i.parseMsid(a)
                                        , $ = i.getMid(a) || i.generateIdentifier();
                                    if (v || "application" === h && ("DTLS/SCTP" === y || "UDP/DTLS/SCTP" === y))
                                        u.transceivers[l] = {
                                            mid: $,
                                            kind: h,
                                            protocol: y,
                                            rejected: !0
                                        };
                                    else {
                                        var S, C, x, T, k, P, E, I, M;
                                        !v && u.transceivers[l] && u.transceivers[l].rejected && (u.transceivers[l] = u._createTransceiver(h, !0));
                                        var O, D, A = i.parseRtpParameters(a);
                                        v || (O = i.getIceParameters(a, f),
                                            (D = i.getDtlsParameters(a, f)).role = "client"),
                                            E = i.parseRtpEncodingParameters(a);
                                        var _ = i.parseRtcpParameters(a)
                                            , R = i.matchPrefix(a, "a=end-of-candidates", f).length > 0
                                            , L = i.matchPrefix(a, "a=candidate:").map(function (e) {
                                                return i.parseCandidate(e)
                                            }).filter(function (e) {
                                                return 1 === e.component
                                            });
                                        if (("offer" === r.type || "answer" === r.type) && !v && g && l > 0 && u.transceivers[l] && (u._disposeIceAndDtlsTransports(l),
                                            u.transceivers[l].iceGatherer = u.transceivers[0].iceGatherer,
                                            u.transceivers[l].iceTransport = u.transceivers[0].iceTransport,
                                            u.transceivers[l].dtlsTransport = u.transceivers[0].dtlsTransport,
                                            u.transceivers[l].rtpSender && u.transceivers[l].rtpSender.setTransport(u.transceivers[0].dtlsTransport),
                                            u.transceivers[l].rtpReceiver && u.transceivers[l].rtpReceiver.setTransport(u.transceivers[0].dtlsTransport)),
                                            "offer" !== r.type || v) {
                                            if ("answer" === r.type && !v) {
                                                C = (S = u.transceivers[l]).iceGatherer,
                                                    x = S.iceTransport,
                                                    T = S.dtlsTransport,
                                                    k = S.rtpReceiver,
                                                    P = S.sendEncodingParameters,
                                                    I = S.localCapabilities,
                                                    u.transceivers[l].recvEncodingParameters = E,
                                                    u.transceivers[l].remoteCapabilities = A,
                                                    u.transceivers[l].rtcpParameters = _,
                                                    L.length && "new" === x.state && (!m && !R || g && 0 !== l ? L.forEach(function (e) {
                                                        s(S.iceTransport, e)
                                                    }) : x.setRemoteCandidates(L)),
                                                    g && 0 !== l || ("new" === x.state && x.start(C, O, "controlling"),
                                                        "new" === T.state && T.start(D)),
                                                    !o(S.localCapabilities, S.remoteCapabilities).codecs.filter(function (e) {
                                                        return "rtx" === e.name.toLowerCase()
                                                    }).length && S.sendEncodingParameters[0].rtx && delete S.sendEncodingParameters[0].rtx,
                                                    u._transceive(S, "sendrecv" === b || "recvonly" === b, "sendrecv" === b || "sendonly" === b),
                                                    !k || "sendrecv" !== b && "sendonly" !== b ? delete S.rtpReceiver : (M = k.track,
                                                        w ? (d[w.stream] || (d[w.stream] = new e.MediaStream),
                                                            n(M, d[w.stream]),
                                                            p.push([M, k, d[w.stream]])) : (d.default || (d.default = new e.MediaStream),
                                                                n(M, d.default),
                                                                p.push([M, k, d.default])))
                                            }
                                        } else {
                                            (S = u.transceivers[l] || u._createTransceiver(h)).mid = $,
                                                S.iceGatherer || (S.iceGatherer = u._createIceGatherer(l, g)),
                                                L.length && "new" === S.iceTransport.state && (!R || g && 0 !== l ? L.forEach(function (e) {
                                                    s(S.iceTransport, e)
                                                }) : S.iceTransport.setRemoteCandidates(L)),
                                                I = e.RTCRtpReceiver.getCapabilities(h),
                                                t < 15019 && (I.codecs = I.codecs.filter(function (e) {
                                                    return "rtx" !== e.name
                                                })),
                                                P = S.sendEncodingParameters || [{
                                                    ssrc: 1001 * (2 * l + 2)
                                                }];
                                            var U, N = !1;
                                            if ("sendrecv" === b || "sendonly" === b) {
                                                if (N = !S.rtpReceiver,
                                                    k = S.rtpReceiver || new e.RTCRtpReceiver(S.dtlsTransport, h),
                                                    N)
                                                    M = k.track,
                                                        w && "-" === w.stream || (w ? (d[w.stream] || (d[w.stream] = new e.MediaStream,
                                                            Object.defineProperty(d[w.stream], "id", {
                                                                get: function () {
                                                                    return w.stream
                                                                }
                                                            })),
                                                            Object.defineProperty(M, "id", {
                                                                get: function () {
                                                                    return w.track
                                                                }
                                                            }),
                                                            U = d[w.stream]) : (d.default || (d.default = new e.MediaStream),
                                                                U = d.default)),
                                                        U && (n(M, U),
                                                            S.associatedRemoteMediaStreams.push(U)),
                                                        p.push([M, k, U])
                                            } else
                                                S.rtpReceiver && S.rtpReceiver.track && (S.associatedRemoteMediaStreams.forEach(function (t) {
                                                    var n, i, r = t.getTracks().find(function (e) {
                                                        return e.id === S.rtpReceiver.track.id
                                                    });
                                                    r && (n = r,
                                                        (i = t).removeTrack(n),
                                                        i.dispatchEvent(new e.MediaStreamTrackEvent("removetrack", {
                                                            track: n
                                                        })))
                                                }),
                                                    S.associatedRemoteMediaStreams = []);
                                            S.localCapabilities = I,
                                                S.remoteCapabilities = A,
                                                S.rtpReceiver = k,
                                                S.rtcpParameters = _,
                                                S.sendEncodingParameters = P,
                                                S.recvEncodingParameters = E,
                                                u._transceive(u.transceivers[l], !1, N)
                                        }
                                    }
                                }),
                                void 0 === u._dtlsRole && (u._dtlsRole = "offer" === r.type ? "active" : "passive"),
                                u._remoteDescription = {
                                    type: r.type,
                                    sdp: r.sdp
                                },
                                "offer" === r.type ? u._updateSignalingState("have-remote-offer") : u._updateSignalingState("stable"),
                                Object.keys(d).forEach(function (t) {
                                    var n = d[t];
                                    if (n.getTracks().length) {
                                        if (-1 === u.remoteStreams.indexOf(n)) {
                                            u.remoteStreams.push(n);
                                            var i = new Event("addstream");
                                            i.stream = n,
                                                e.setTimeout(function () {
                                                    u._dispatchEvent("addstream", i)
                                                })
                                        }
                                        p.forEach(function (e) {
                                            var t = e[0]
                                                , i = e[1];
                                            n.id === e[2].id && c(u, t, i, [n])
                                        })
                                    }
                                }),
                                p.forEach(function (e) {
                                    e[2] || c(u, e[0], e[1], [])
                                }),
                                e.setTimeout(function () {
                                    u && u.transceivers && u.transceivers.forEach(function (e) {
                                        e.iceTransport && "new" === e.iceTransport.state && e.iceTransport.getRemoteCandidates().length > 0 && (console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),
                                            e.iceTransport.addRemoteCandidate({}))
                                    })
                                }, 4e3),
                                Promise.resolve()
                        }
                        ,
                        u.prototype.close = function () {
                            this.transceivers.forEach(function (e) {
                                e.iceTransport && e.iceTransport.stop(),
                                    e.dtlsTransport && e.dtlsTransport.stop(),
                                    e.rtpSender && e.rtpSender.stop(),
                                    e.rtpReceiver && e.rtpReceiver.stop()
                            }),
                                this._isClosed = !0,
                                this._updateSignalingState("closed")
                        }
                        ,
                        u.prototype._updateSignalingState = function (e) {
                            this.signalingState = e;
                            var t = new Event("signalingstatechange");
                            this._dispatchEvent("signalingstatechange", t)
                        }
                        ,
                        u.prototype._maybeFireNegotiationNeeded = function () {
                            var t = this;
                            "stable" === this.signalingState && !0 !== this.needNegotiation && (this.needNegotiation = !0,
                                e.setTimeout(function () {
                                    if (t.needNegotiation) {
                                        t.needNegotiation = !1;
                                        var e = new Event("negotiationneeded");
                                        t._dispatchEvent("negotiationneeded", e)
                                    }
                                }, 0))
                        }
                        ,
                        u.prototype._updateIceConnectionState = function () {
                            var e, t = {
                                new: 0,
                                closed: 0,
                                checking: 0,
                                connected: 0,
                                completed: 0,
                                disconnected: 0,
                                failed: 0
                            };
                            if (this.transceivers.forEach(function (e) {
                                e.iceTransport && !e.rejected && t[e.iceTransport.state]++
                            }),
                                e = "new",
                                t.failed > 0 ? e = "failed" : t.checking > 0 ? e = "checking" : t.disconnected > 0 ? e = "disconnected" : t.new > 0 ? e = "new" : t.connected > 0 ? e = "connected" : t.completed > 0 && (e = "completed"),
                                e !== this.iceConnectionState) {
                                this.iceConnectionState = e;
                                var n = new Event("iceconnectionstatechange");
                                this._dispatchEvent("iceconnectionstatechange", n)
                            }
                        }
                        ,
                        u.prototype._updateConnectionState = function () {
                            var e, t = {
                                new: 0,
                                closed: 0,
                                connecting: 0,
                                connected: 0,
                                completed: 0,
                                disconnected: 0,
                                failed: 0
                            };
                            if (this.transceivers.forEach(function (e) {
                                e.iceTransport && e.dtlsTransport && !e.rejected && (t[e.iceTransport.state]++,
                                    t[e.dtlsTransport.state]++)
                            }),
                                t.connected += t.completed,
                                e = "new",
                                t.failed > 0 ? e = "failed" : t.connecting > 0 ? e = "connecting" : t.disconnected > 0 ? e = "disconnected" : t.new > 0 ? e = "new" : t.connected > 0 && (e = "connected"),
                                e !== this.connectionState) {
                                this.connectionState = e;
                                var n = new Event("connectionstatechange");
                                this._dispatchEvent("connectionstatechange", n)
                            }
                        }
                        ,
                        u.prototype.createOffer = function () {
                            var n = this;
                            if (n._isClosed)
                                return Promise.reject(l("InvalidStateError", "Can not call createOffer after close"));
                            var o = n.transceivers.filter(function (e) {
                                return "audio" === e.kind
                            }).length
                                , a = n.transceivers.filter(function (e) {
                                    return "video" === e.kind
                                }).length
                                , s = arguments[0];
                            if (s) {
                                if (s.mandatory || s.optional)
                                    throw new TypeError("Legacy mandatory/optional constraints not supported.");
                                void 0 !== s.offerToReceiveAudio && (o = !0 === s.offerToReceiveAudio ? 1 : !1 === s.offerToReceiveAudio ? 0 : s.offerToReceiveAudio),
                                    void 0 !== s.offerToReceiveVideo && (a = !0 === s.offerToReceiveVideo ? 1 : !1 === s.offerToReceiveVideo ? 0 : s.offerToReceiveVideo)
                            }
                            for (n.transceivers.forEach(function (e) {
                                "audio" === e.kind ? --o < 0 && (e.wantReceive = !1) : "video" === e.kind && --a < 0 && (e.wantReceive = !1)
                            }); o > 0 || a > 0;)
                                o > 0 && (n._createTransceiver("audio"),
                                    o--),
                                    a > 0 && (n._createTransceiver("video"),
                                        a--);
                            var c = i.writeSessionBoilerplate(n._sdpSessionId, n._sdpSessionVersion++);
                            n.transceivers.forEach(function (r, o) {
                                var a = r.track
                                    , s = r.kind
                                    , l = r.mid || i.generateIdentifier();
                                r.mid = l,
                                    r.iceGatherer || (r.iceGatherer = n._createIceGatherer(o, n.usingBundle));
                                var c = e.RTCRtpSender.getCapabilities(s);
                                t < 15019 && (c.codecs = c.codecs.filter(function (e) {
                                    return "rtx" !== e.name
                                })),
                                    c.codecs.forEach(function (e) {
                                        "H264" === e.name && void 0 === e.parameters["level-asymmetry-allowed"] && (e.parameters["level-asymmetry-allowed"] = "1"),
                                            r.remoteCapabilities && r.remoteCapabilities.codecs && r.remoteCapabilities.codecs.forEach(function (t) {
                                                e.name.toLowerCase() === t.name.toLowerCase() && e.clockRate === t.clockRate && (e.preferredPayloadType = t.payloadType)
                                            })
                                    }),
                                    c.headerExtensions.forEach(function (e) {
                                        (r.remoteCapabilities && r.remoteCapabilities.headerExtensions || []).forEach(function (t) {
                                            e.uri === t.uri && (e.id = t.id)
                                        })
                                    });
                                var u = r.sendEncodingParameters || [{
                                    ssrc: 1001 * (2 * o + 1)
                                }];
                                a && t >= 15019 && "video" === s && !u[0].rtx && (u[0].rtx = {
                                    ssrc: u[0].ssrc + 1
                                }),
                                    r.wantReceive && (r.rtpReceiver = new e.RTCRtpReceiver(r.dtlsTransport, s)),
                                    r.localCapabilities = c,
                                    r.sendEncodingParameters = u
                            }),
                                "max-compat" !== n._config.bundlePolicy && (c += "a=group:BUNDLE " + n.transceivers.map(function (e) {
                                    return e.mid
                                }).join(" ") + "\r\n"),
                                c += "a=ice-options:trickle\r\n",
                                n.transceivers.forEach(function (e, t) {
                                    c += r(e, e.localCapabilities, "offer", e.stream, n._dtlsRole),
                                        c += "a=rtcp-rsize\r\n",
                                        !e.iceGatherer || "new" === n.iceGatheringState || 0 !== t && n.usingBundle || (e.iceGatherer.getLocalCandidates().forEach(function (e) {
                                            e.component = 1,
                                                c += "a=" + i.writeCandidate(e) + "\r\n"
                                        }),
                                            "completed" === e.iceGatherer.state && (c += "a=end-of-candidates\r\n"))
                                });
                            var u = new e.RTCSessionDescription({
                                type: "offer",
                                sdp: c
                            });
                            return Promise.resolve(u)
                        }
                        ,
                        u.prototype.createAnswer = function () {
                            var n = this;
                            if (n._isClosed)
                                return Promise.reject(l("InvalidStateError", "Can not call createAnswer after close"));
                            if ("have-remote-offer" !== n.signalingState && "have-local-pranswer" !== n.signalingState)
                                return Promise.reject(l("InvalidStateError", "Can not call createAnswer in signalingState " + n.signalingState));
                            var a = i.writeSessionBoilerplate(n._sdpSessionId, n._sdpSessionVersion++);
                            n.usingBundle && (a += "a=group:BUNDLE " + n.transceivers.map(function (e) {
                                return e.mid
                            }).join(" ") + "\r\n"),
                                a += "a=ice-options:trickle\r\n";
                            var s = i.getMediaSections(n._remoteDescription.sdp).length;
                            n.transceivers.forEach(function (e, i) {
                                if (!(i + 1 > s)) {
                                    if (e.rejected)
                                        return "application" === e.kind ? "DTLS/SCTP" === e.protocol ? a += "m=application 0 DTLS/SCTP 5000\r\n" : a += "m=application 0 " + e.protocol + " webrtc-datachannel\r\n" : "audio" === e.kind ? a += "m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n" : "video" === e.kind && (a += "m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),
                                            void (a += "c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:" + e.mid + "\r\n");
                                    var l;
                                    if (e.stream)
                                        "audio" === e.kind ? l = e.stream.getAudioTracks()[0] : "video" === e.kind && (l = e.stream.getVideoTracks()[0]),
                                            l && t >= 15019 && "video" === e.kind && !e.sendEncodingParameters[0].rtx && (e.sendEncodingParameters[0].rtx = {
                                                ssrc: e.sendEncodingParameters[0].ssrc + 1
                                            });
                                    var c = o(e.localCapabilities, e.remoteCapabilities);
                                    !c.codecs.filter(function (e) {
                                        return "rtx" === e.name.toLowerCase()
                                    }).length && e.sendEncodingParameters[0].rtx && delete e.sendEncodingParameters[0].rtx,
                                        a += r(e, c, "answer", e.stream, n._dtlsRole),
                                        e.rtcpParameters && e.rtcpParameters.reducedSize && (a += "a=rtcp-rsize\r\n")
                                }
                            });
                            var c = new e.RTCSessionDescription({
                                type: "answer",
                                sdp: a
                            });
                            return Promise.resolve(c)
                        }
                        ,
                        u.prototype.addIceCandidate = function (e) {
                            var t, n = this;
                            return e && void 0 === e.sdpMLineIndex && !e.sdpMid ? Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")) : new Promise(function (r, o) {
                                if (!n._remoteDescription)
                                    return o(l("InvalidStateError", "Can not add ICE candidate without a remote description"));
                                if (e && "" !== e.candidate) {
                                    var a = e.sdpMLineIndex;
                                    if (e.sdpMid)
                                        for (var c = 0; c < n.transceivers.length; c++)
                                            if (n.transceivers[c].mid === e.sdpMid) {
                                                a = c;
                                                break
                                            }
                                    var u = n.transceivers[a];
                                    if (!u)
                                        return o(l("OperationError", "Can not add ICE candidate"));
                                    if (u.rejected)
                                        return r();
                                    var d = Object.keys(e.candidate).length > 0 ? i.parseCandidate(e.candidate) : {};
                                    if ("tcp" === d.protocol && (0 === d.port || 9 === d.port))
                                        return r();
                                    if (d.component && 1 !== d.component)
                                        return r();
                                    if ((0 === a || a > 0 && u.iceTransport !== n.transceivers[0].iceTransport) && !s(u.iceTransport, d))
                                        return o(l("OperationError", "Can not add ICE candidate"));
                                    var p = e.candidate.trim();
                                    0 === p.indexOf("a=") && (p = p.substr(2)),
                                        (t = i.getMediaSections(n._remoteDescription.sdp))[a] += "a=" + (d.type ? p : "end-of-candidates") + "\r\n",
                                        n._remoteDescription.sdp = i.getDescription(n._remoteDescription.sdp) + t.join("")
                                } else
                                    for (var h = 0; h < n.transceivers.length && (n.transceivers[h].rejected || (n.transceivers[h].iceTransport.addRemoteCandidate({}),
                                        (t = i.getMediaSections(n._remoteDescription.sdp))[h] += "a=end-of-candidates\r\n",
                                        n._remoteDescription.sdp = i.getDescription(n._remoteDescription.sdp) + t.join(""),
                                        !n.usingBundle)); h++)
                                        ;
                                r()
                            }
                            )
                        }
                        ,
                        u.prototype.getStats = function (t) {
                            if (t && t instanceof e.MediaStreamTrack) {
                                var n = null;
                                if (this.transceivers.forEach(function (e) {
                                    e.rtpSender && e.rtpSender.track === t ? n = e.rtpSender : e.rtpReceiver && e.rtpReceiver.track === t && (n = e.rtpReceiver)
                                }),
                                    !n)
                                    throw l("InvalidAccessError", "Invalid selector.");
                                return n.getStats()
                            }
                            var i = [];
                            return this.transceivers.forEach(function (e) {
                                ["rtpSender", "rtpReceiver", "iceGatherer", "iceTransport", "dtlsTransport"].forEach(function (t) {
                                    e[t] && i.push(e[t].getStats())
                                })
                            }),
                                Promise.all(i).then(function (e) {
                                    var t = new Map;
                                    return e.forEach(function (e) {
                                        e.forEach(function (e) {
                                            t.set(e.id, e)
                                        })
                                    }),
                                        t
                                })
                        }
                        ;
                    ["RTCRtpSender", "RTCRtpReceiver", "RTCIceGatherer", "RTCIceTransport", "RTCDtlsTransport"].forEach(function (t) {
                        var n = e[t];
                        if (n && n.prototype && n.prototype.getStats) {
                            var i = n.prototype.getStats;
                            n.prototype.getStats = function () {
                                return i.apply(this).then(function (e) {
                                    var t = new Map;
                                    return Object.keys(e).forEach(function (n) {
                                        var i;
                                        e[n].type = {
                                            inboundrtp: "inbound-rtp",
                                            outboundrtp: "outbound-rtp",
                                            candidatepair: "candidate-pair",
                                            localcandidate: "local-candidate",
                                            remotecandidate: "remote-candidate"
                                        }[(i = e[n]).type] || i.type,
                                            t.set(n, e[n])
                                    }),
                                        t
                                })
                            }
                        }
                    });
                    var d = ["createOffer", "createAnswer"];
                    return d.forEach(function (e) {
                        var t = u.prototype[e];
                        u.prototype[e] = function () {
                            var e = arguments;
                            return "function" == typeof e[0] || "function" == typeof e[1] ? t.apply(this, [arguments[2]]).then(function (t) {
                                "function" == typeof e[0] && e[0].apply(null, [t])
                            }, function (t) {
                                "function" == typeof e[1] && e[1].apply(null, [t])
                            }) : t.apply(this, arguments)
                        }
                    }),
                        (d = ["setLocalDescription", "setRemoteDescription", "addIceCandidate"]).forEach(function (e) {
                            var t = u.prototype[e];
                            u.prototype[e] = function () {
                                var e = arguments;
                                return "function" == typeof e[1] || "function" == typeof e[2] ? t.apply(this, arguments).then(function () {
                                    "function" == typeof e[1] && e[1].apply(null)
                                }, function (t) {
                                    "function" == typeof e[2] && e[2].apply(null, [t])
                                }) : t.apply(this, arguments)
                            }
                        }),
                        ["getStats"].forEach(function (e) {
                            var t = u.prototype[e];
                            u.prototype[e] = function () {
                                var e = arguments;
                                return "function" == typeof e[1] ? t.apply(this, arguments).then(function () {
                                    "function" == typeof e[1] && e[1].apply(null)
                                }) : t.apply(this, arguments)
                            }
                        }),
                        u
                }
            }
                , {
                sdp: 17
            }],
            17: [function (e, t, n) {
                "use strict";
                var i = {
                    generateIdentifier: function () {
                        return Math.random().toString(36).substr(2, 10)
                    }
                };
                i.localCName = i.generateIdentifier(),
                    i.splitLines = function (e) {
                        return e.trim().split("\n").map(function (e) {
                            return e.trim()
                        })
                    }
                    ,
                    i.splitSections = function (e) {
                        return e.split("\nm=").map(function (e, t) {
                            return (t > 0 ? "m=" + e : e).trim() + "\r\n"
                        })
                    }
                    ,
                    i.getDescription = function (e) {
                        var t = i.splitSections(e);
                        return t && t[0]
                    }
                    ,
                    i.getMediaSections = function (e) {
                        var t = i.splitSections(e);
                        return t.shift(),
                            t
                    }
                    ,
                    i.matchPrefix = function (e, t) {
                        return i.splitLines(e).filter(function (e) {
                            return 0 === e.indexOf(t)
                        })
                    }
                    ,
                    i.parseCandidate = function (e) {
                        for (var t, n = {
                            foundation: (t = 0 === e.indexOf("a=candidate:") ? e.substring(12).split(" ") : e.substring(10).split(" "))[0],
                            component: parseInt(t[1], 10),
                            protocol: t[2].toLowerCase(),
                            priority: parseInt(t[3], 10),
                            ip: t[4],
                            address: t[4],
                            port: parseInt(t[5], 10),
                            type: t[7]
                        }, i = 8; i < t.length; i += 2)
                            switch (t[i]) {
                                case "raddr":
                                    n.relatedAddress = t[i + 1];
                                    break;
                                case "rport":
                                    n.relatedPort = parseInt(t[i + 1], 10);
                                    break;
                                case "tcptype":
                                    n.tcpType = t[i + 1];
                                    break;
                                case "ufrag":
                                    n.ufrag = t[i + 1],
                                        n.usernameFragment = t[i + 1];
                                    break;
                                default:
                                    n[t[i]] = t[i + 1]
                            }
                        return n
                    }
                    ,
                    i.writeCandidate = function (e) {
                        var t = [];
                        t.push(e.foundation),
                            t.push(e.component),
                            t.push(e.protocol.toUpperCase()),
                            t.push(e.priority),
                            t.push(e.address || e.ip),
                            t.push(e.port);
                        var n = e.type;
                        return t.push("typ"),
                            t.push(n),
                            "host" !== n && e.relatedAddress && e.relatedPort && (t.push("raddr"),
                                t.push(e.relatedAddress),
                                t.push("rport"),
                                t.push(e.relatedPort)),
                            e.tcpType && "tcp" === e.protocol.toLowerCase() && (t.push("tcptype"),
                                t.push(e.tcpType)),
                            (e.usernameFragment || e.ufrag) && (t.push("ufrag"),
                                t.push(e.usernameFragment || e.ufrag)),
                            "candidate:" + t.join(" ")
                    }
                    ,
                    i.parseIceOptions = function (e) {
                        return e.substr(14).split(" ")
                    }
                    ,
                    i.parseRtpMap = function (e) {
                        var t = e.substr(9).split(" ")
                            , n = {
                                payloadType: parseInt(t.shift(), 10)
                            };
                        return t = t[0].split("/"),
                            n.name = t[0],
                            n.clockRate = parseInt(t[1], 10),
                            n.channels = 3 === t.length ? parseInt(t[2], 10) : 1,
                            n.numChannels = n.channels,
                            n
                    }
                    ,
                    i.writeRtpMap = function (e) {
                        var t = e.payloadType;
                        void 0 !== e.preferredPayloadType && (t = e.preferredPayloadType);
                        var n = e.channels || e.numChannels || 1;
                        return "a=rtpmap:" + t + " " + e.name + "/" + e.clockRate + (1 !== n ? "/" + n : "") + "\r\n"
                    }
                    ,
                    i.parseExtmap = function (e) {
                        var t = e.substr(9).split(" ");
                        return {
                            id: parseInt(t[0], 10),
                            direction: t[0].indexOf("/") > 0 ? t[0].split("/")[1] : "sendrecv",
                            uri: t[1]
                        }
                    }
                    ,
                    i.writeExtmap = function (e) {
                        return "a=extmap:" + (e.id || e.preferredId) + (e.direction && "sendrecv" !== e.direction ? "/" + e.direction : "") + " " + e.uri + "\r\n"
                    }
                    ,
                    i.parseFmtp = function (e) {
                        for (var t, n = {}, i = e.substr(e.indexOf(" ") + 1).split(";"), r = 0; r < i.length; r++)
                            n[(t = i[r].trim().split("="))[0].trim()] = t[1];
                        return n
                    }
                    ,
                    i.writeFmtp = function (e) {
                        var t = ""
                            , n = e.payloadType;
                        if (void 0 !== e.preferredPayloadType && (n = e.preferredPayloadType),
                            e.parameters && Object.keys(e.parameters).length) {
                            var i = [];
                            Object.keys(e.parameters).forEach(function (t) {
                                e.parameters[t] ? i.push(t + "=" + e.parameters[t]) : i.push(t)
                            }),
                                t += "a=fmtp:" + n + " " + i.join(";") + "\r\n"
                        }
                        return t
                    }
                    ,
                    i.parseRtcpFb = function (e) {
                        var t = e.substr(e.indexOf(" ") + 1).split(" ");
                        return {
                            type: t.shift(),
                            parameter: t.join(" ")
                        }
                    }
                    ,
                    i.writeRtcpFb = function (e) {
                        var t = ""
                            , n = e.payloadType;
                        return void 0 !== e.preferredPayloadType && (n = e.preferredPayloadType),
                            e.rtcpFeedback && e.rtcpFeedback.length && e.rtcpFeedback.forEach(function (e) {
                                t += "a=rtcp-fb:" + n + " " + e.type + (e.parameter && e.parameter.length ? " " + e.parameter : "") + "\r\n"
                            }),
                            t
                    }
                    ,
                    i.parseSsrcMedia = function (e) {
                        var t = e.indexOf(" ")
                            , n = {
                                ssrc: parseInt(e.substr(7, t - 7), 10)
                            }
                            , i = e.indexOf(":", t);
                        return i > -1 ? (n.attribute = e.substr(t + 1, i - t - 1),
                            n.value = e.substr(i + 1)) : n.attribute = e.substr(t + 1),
                            n
                    }
                    ,
                    i.parseSsrcGroup = function (e) {
                        var t = e.substr(13).split(" ");
                        return {
                            semantics: t.shift(),
                            ssrcs: t.map(function (e) {
                                return parseInt(e, 10)
                            })
                        }
                    }
                    ,
                    i.getMid = function (e) {
                        var t = i.matchPrefix(e, "a=mid:")[0];
                        if (t)
                            return t.substr(6)
                    }
                    ,
                    i.parseFingerprint = function (e) {
                        var t = e.substr(14).split(" ");
                        return {
                            algorithm: t[0].toLowerCase(),
                            value: t[1]
                        }
                    }
                    ,
                    i.getDtlsParameters = function (e, t) {
                        return {
                            role: "auto",
                            fingerprints: i.matchPrefix(e + t, "a=fingerprint:").map(i.parseFingerprint)
                        }
                    }
                    ,
                    i.writeDtlsParameters = function (e, t) {
                        var n = "a=setup:" + t + "\r\n";
                        return e.fingerprints.forEach(function (e) {
                            n += "a=fingerprint:" + e.algorithm + " " + e.value + "\r\n"
                        }),
                            n
                    }
                    ,
                    i.getIceParameters = function (e, t) {
                        var n = i.splitLines(e);
                        return {
                            usernameFragment: (n = n.concat(i.splitLines(t))).filter(function (e) {
                                return 0 === e.indexOf("a=ice-ufrag:")
                            })[0].substr(12),
                            password: n.filter(function (e) {
                                return 0 === e.indexOf("a=ice-pwd:")
                            })[0].substr(10)
                        }
                    }
                    ,
                    i.writeIceParameters = function (e) {
                        return "a=ice-ufrag:" + e.usernameFragment + "\r\na=ice-pwd:" + e.password + "\r\n"
                    }
                    ,
                    i.parseRtpParameters = function (e) {
                        for (var t = {
                            codecs: [],
                            headerExtensions: [],
                            fecMechanisms: [],
                            rtcp: []
                        }, n = i.splitLines(e)[0].split(" "), r = 3; r < n.length; r++) {
                            var o = n[r]
                                , a = i.matchPrefix(e, "a=rtpmap:" + o + " ")[0];
                            if (a) {
                                var s = i.parseRtpMap(a)
                                    , l = i.matchPrefix(e, "a=fmtp:" + o + " ");
                                switch (s.parameters = l.length ? i.parseFmtp(l[0]) : {},
                                s.rtcpFeedback = i.matchPrefix(e, "a=rtcp-fb:" + o + " ").map(i.parseRtcpFb),
                                t.codecs.push(s),
                                s.name.toUpperCase()) {
                                    case "RED":
                                    case "ULPFEC":
                                        t.fecMechanisms.push(s.name.toUpperCase())
                                }
                            }
                        }
                        return i.matchPrefix(e, "a=extmap:").forEach(function (e) {
                            t.headerExtensions.push(i.parseExtmap(e))
                        }),
                            t
                    }
                    ,
                    i.writeRtpDescription = function (e, t) {
                        var n = "";
                        n += "m=" + e + " ",
                            n += t.codecs.length > 0 ? "9" : "0",
                            n += " UDP/TLS/RTP/SAVPF ",
                            n += t.codecs.map(function (e) {
                                return void 0 !== e.preferredPayloadType ? e.preferredPayloadType : e.payloadType
                            }).join(" ") + "\r\n",
                            n += "c=IN IP4 0.0.0.0\r\n",
                            n += "a=rtcp:9 IN IP4 0.0.0.0\r\n",
                            t.codecs.forEach(function (e) {
                                n += i.writeRtpMap(e),
                                    n += i.writeFmtp(e),
                                    n += i.writeRtcpFb(e)
                            });
                        var r = 0;
                        return t.codecs.forEach(function (e) {
                            e.maxptime > r && (r = e.maxptime)
                        }),
                            r > 0 && (n += "a=maxptime:" + r + "\r\n"),
                            n += "a=rtcp-mux\r\n",
                            t.headerExtensions && t.headerExtensions.forEach(function (e) {
                                n += i.writeExtmap(e)
                            }),
                            n
                    }
                    ,
                    i.parseRtpEncodingParameters = function (e) {
                        var t, n = [], r = i.parseRtpParameters(e), o = -1 !== r.fecMechanisms.indexOf("RED"), a = -1 !== r.fecMechanisms.indexOf("ULPFEC"), s = i.matchPrefix(e, "a=ssrc:").map(function (e) {
                            return i.parseSsrcMedia(e)
                        }).filter(function (e) {
                            return "cname" === e.attribute
                        }), l = s.length > 0 && s[0].ssrc, c = i.matchPrefix(e, "a=ssrc-group:FID").map(function (e) {
                            return e.substr(17).split(" ").map(function (e) {
                                return parseInt(e, 10)
                            })
                        });
                        c.length > 0 && c[0].length > 1 && c[0][0] === l && (t = c[0][1]),
                            r.codecs.forEach(function (e) {
                                if ("RTX" === e.name.toUpperCase() && e.parameters.apt) {
                                    var i = {
                                        ssrc: l,
                                        codecPayloadType: parseInt(e.parameters.apt, 10)
                                    };
                                    l && t && (i.rtx = {
                                        ssrc: t
                                    }),
                                        n.push(i),
                                        o && ((i = JSON.parse(JSON.stringify(i))).fec = {
                                            ssrc: l,
                                            mechanism: a ? "red+ulpfec" : "red"
                                        },
                                            n.push(i))
                                }
                            }),
                            0 === n.length && l && n.push({
                                ssrc: l
                            });
                        var u = i.matchPrefix(e, "b=");
                        return u.length && (u = 0 === u[0].indexOf("b=TIAS:") ? parseInt(u[0].substr(7), 10) : 0 === u[0].indexOf("b=AS:") ? 1e3 * parseInt(u[0].substr(5), 10) * .95 - 16e3 : void 0,
                            n.forEach(function (e) {
                                e.maxBitrate = u
                            })),
                            n
                    }
                    ,
                    i.parseRtcpParameters = function (e) {
                        var t = {}
                            , n = i.matchPrefix(e, "a=ssrc:").map(function (e) {
                                return i.parseSsrcMedia(e)
                            }).filter(function (e) {
                                return "cname" === e.attribute
                            })[0];
                        n && (t.cname = n.value,
                            t.ssrc = n.ssrc);
                        var r = i.matchPrefix(e, "a=rtcp-rsize");
                        t.reducedSize = r.length > 0,
                            t.compound = 0 === r.length;
                        var o = i.matchPrefix(e, "a=rtcp-mux");
                        return t.mux = o.length > 0,
                            t
                    }
                    ,
                    i.parseMsid = function (e) {
                        var t, n = i.matchPrefix(e, "a=msid:");
                        if (1 === n.length)
                            return {
                                stream: (t = n[0].substr(7).split(" "))[0],
                                track: t[1]
                            };
                        var r = i.matchPrefix(e, "a=ssrc:").map(function (e) {
                            return i.parseSsrcMedia(e)
                        }).filter(function (e) {
                            return "msid" === e.attribute
                        });
                        return r.length > 0 ? {
                            stream: (t = r[0].value.split(" "))[0],
                            track: t[1]
                        } : void 0
                    }
                    ,
                    i.parseSctpDescription = function (e) {
                        var t, n = i.parseMLine(e), r = i.matchPrefix(e, "a=max-message-size:");
                        r.length > 0 && (t = parseInt(r[0].substr(19), 10)),
                            isNaN(t) && (t = 65536);
                        var o = i.matchPrefix(e, "a=sctp-port:");
                        if (o.length > 0)
                            return {
                                port: parseInt(o[0].substr(12), 10),
                                protocol: n.fmt,
                                maxMessageSize: t
                            };
                        if (i.matchPrefix(e, "a=sctpmap:").length > 0) {
                            var a = i.matchPrefix(e, "a=sctpmap:")[0].substr(10).split(" ");
                            return {
                                port: parseInt(a[0], 10),
                                protocol: a[1],
                                maxMessageSize: t
                            }
                        }
                    }
                    ,
                    i.writeSctpDescription = function (e, t) {
                        var n = [];
                        return n = "DTLS/SCTP" !== e.protocol ? ["m=" + e.kind + " 9 " + e.protocol + " " + t.protocol + "\r\n", "c=IN IP4 0.0.0.0\r\n", "a=sctp-port:" + t.port + "\r\n"] : ["m=" + e.kind + " 9 " + e.protocol + " " + t.port + "\r\n", "c=IN IP4 0.0.0.0\r\n", "a=sctpmap:" + t.port + " " + t.protocol + " 65535\r\n"],
                            void 0 !== t.maxMessageSize && n.push("a=max-message-size:" + t.maxMessageSize + "\r\n"),
                            n.join("")
                    }
                    ,
                    i.generateSessionId = function () {
                        return Math.random().toString().substr(2, 21)
                    }
                    ,
                    i.writeSessionBoilerplate = function (e, t, n) {
                        var r, o = void 0 !== t ? t : 2;
                        return r = e || i.generateSessionId(),
                            "v=0\r\no=" + (n || "thisisadapterortc") + " " + r + " " + o + " IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"
                    }
                    ,
                    i.writeMediaSection = function (e, t, n, r) {
                        var o = i.writeRtpDescription(e.kind, t);
                        if (o += i.writeIceParameters(e.iceGatherer.getLocalParameters()),
                            o += i.writeDtlsParameters(e.dtlsTransport.getLocalParameters(), "offer" === n ? "actpass" : "active"),
                            o += "a=mid:" + e.mid + "\r\n",
                            e.direction ? o += "a=" + e.direction + "\r\n" : e.rtpSender && e.rtpReceiver ? o += "a=sendrecv\r\n" : e.rtpSender ? o += "a=sendonly\r\n" : e.rtpReceiver ? o += "a=recvonly\r\n" : o += "a=inactive\r\n",
                            e.rtpSender) {
                            var a = "msid:" + r.id + " " + e.rtpSender.track.id + "\r\n";
                            o += "a=" + a,
                                o += "a=ssrc:" + e.sendEncodingParameters[0].ssrc + " " + a,
                                e.sendEncodingParameters[0].rtx && (o += "a=ssrc:" + e.sendEncodingParameters[0].rtx.ssrc + " " + a,
                                    o += "a=ssrc-group:FID " + e.sendEncodingParameters[0].ssrc + " " + e.sendEncodingParameters[0].rtx.ssrc + "\r\n")
                        }
                        return o += "a=ssrc:" + e.sendEncodingParameters[0].ssrc + " cname:" + i.localCName + "\r\n",
                            e.rtpSender && e.sendEncodingParameters[0].rtx && (o += "a=ssrc:" + e.sendEncodingParameters[0].rtx.ssrc + " cname:" + i.localCName + "\r\n"),
                            o
                    }
                    ,
                    i.getDirection = function (e, t) {
                        for (var n = i.splitLines(e), r = 0; r < n.length; r++)
                            switch (n[r]) {
                                case "a=sendrecv":
                                case "a=sendonly":
                                case "a=recvonly":
                                case "a=inactive":
                                    return n[r].substr(2)
                            }
                        return t ? i.getDirection(t) : "sendrecv"
                    }
                    ,
                    i.getKind = function (e) {
                        return i.splitLines(e)[0].split(" ")[0].substr(2)
                    }
                    ,
                    i.isRejected = function (e) {
                        return "0" === e.split(" ", 2)[1]
                    }
                    ,
                    i.parseMLine = function (e) {
                        var t = i.splitLines(e)[0].substr(2).split(" ");
                        return {
                            kind: t[0],
                            port: parseInt(t[1], 10),
                            protocol: t[2],
                            fmt: t.slice(3).join(" ")
                        }
                    }
                    ,
                    i.parseOLine = function (e) {
                        var t = i.matchPrefix(e, "o=")[0].substr(2).split(" ");
                        return {
                            username: t[0],
                            sessionId: t[1],
                            sessionVersion: parseInt(t[2], 10),
                            netType: t[3],
                            addressType: t[4],
                            address: t[5]
                        }
                    }
                    ,
                    i.isValidSDP = function (e) {
                        if ("string" != typeof e || 0 === e.length)
                            return !1;
                        for (var t = i.splitLines(e), n = 0; n < t.length; n++)
                            if (t[n].length < 2 || "=" !== t[n].charAt(1))
                                return !1;
                        return !0
                    }
                    ,
                    "object" == typeof t && (t.exports = i)
            }
                , {}]
        }, {}, [1])(1)
    }),
    function (e, t) {
        "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define([], t) : "object" == typeof exports ? exports.io = t() : e.io = t()
    }(this, function () {
        return function (e) {
            function t(i) {
                if (n[i])
                    return n[i].exports;
                var r = n[i] = {
                    exports: {},
                    id: i,
                    loaded: !1
                };
                return e[i].call(r.exports, r, r.exports, t),
                    r.loaded = !0,
                    r.exports
            }
            var n = {};
            return t.m = e,
                t.c = n,
                t.p = "",
                t(0)
        }([function (e, t, n) {
            "use strict";
            function i(e, t) {
                "object" === (void 0 === e ? "undefined" : r(e)) && (t = e,
                    e = void 0),
                    t = t || {};
                var n, i = o(e), a = i.source, u = i.id, d = i.path, p = c[u] && d in c[u].nsps;
                return t.forceNew || t["force new connection"] || !1 === t.multiplex || p ? (l("ignoring socket cache for %s", a),
                    n = s(a, t)) : (c[u] || (l("new io instance for %s", a),
                        c[u] = s(a, t)),
                        n = c[u]),
                    i.query && !t.query && (t.query = i.query),
                    n.socket(i.path, t)
            }
            var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                return typeof e
            }
                : function (e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                , o = n(1)
                , a = n(7)
                , s = n(12)
                , l = n(3)("socket.io-client");
            e.exports = t = i;
            var c = t.managers = {};
            t.protocol = a.protocol,
                t.connect = i,
                t.Manager = n(12),
                t.Socket = n(36)
        }
            , function (e, t, n) {
                "use strict";
                var i = n(2)
                    , r = n(3)("socket.io-client:url");
                e.exports = function (e, t) {
                    var n = e;
                    t = t || "undefined" != typeof location && location,
                        null == e && (e = t.protocol + "//" + t.host),
                        "string" == typeof e && ("/" === e.charAt(0) && (e = "/" === e.charAt(1) ? t.protocol + e : t.host + e),
                            /^(https?|wss?):\/\//.test(e) || (r("protocol-less url %s", e),
                                e = void 0 !== t ? t.protocol + "//" + e : "https://" + e),
                            r("parse %s", e),
                            n = i(e)),
                        n.port || (/^(http|ws)$/.test(n.protocol) ? n.port = "80" : /^(http|ws)s$/.test(n.protocol) && (n.port = "443")),
                        n.path = n.path || "/";
                    var o = -1 !== n.host.indexOf(":") ? "[" + n.host + "]" : n.host;
                    return n.id = n.protocol + "://" + o + ":" + n.port,
                        n.href = n.protocol + "://" + o + (t && t.port === n.port ? "" : ":" + n.port),
                        n
                }
            }
            , function (e, t) {
                var n = /^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/
                    , i = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"];
                e.exports = function (e) {
                    var t = e
                        , r = e.indexOf("[")
                        , o = e.indexOf("]");
                    -1 != r && -1 != o && (e = e.substring(0, r) + e.substring(r, o).replace(/:/g, ";") + e.substring(o, e.length));
                    for (var a = n.exec(e || ""), s = {}, l = 14; l--;)
                        s[i[l]] = a[l] || "";
                    return -1 != r && -1 != o && (s.source = t,
                        s.host = s.host.substring(1, s.host.length - 1).replace(/;/g, ":"),
                        s.authority = s.authority.replace("[", "").replace("]", "").replace(/;/g, ":"),
                        s.ipv6uri = !0),
                        s
                }
            }
            , function (e, t, n) {
                (function (i) {
                    function r() {
                        var e;
                        try {
                            e = t.storage.debug
                        } catch (e) { }
                        return !e && void 0 !== i && "env" in i && (e = i.env.DEBUG),
                            e
                    }
                    (t = e.exports = n(5)).log = function () {
                        return "object" == typeof console && console.log && Function.prototype.apply.call(console.log, console, arguments)
                    }
                        ,
                        t.formatArgs = function (e) {
                            var n = this.useColors;
                            if (e[0] = (n ? "%c" : "") + this.namespace + (n ? " %c" : " ") + e[0] + (n ? "%c " : " ") + "+" + t.humanize(this.diff),
                                n) {
                                var i = "color: " + this.color;
                                e.splice(1, 0, i, "color: inherit");
                                var r = 0
                                    , o = 0;
                                e[0].replace(/%[a-zA-Z%]/g, function (e) {
                                    "%%" !== e && "%c" === e && (o = ++r)
                                }),
                                    e.splice(o, 0, i)
                            }
                        }
                        ,
                        t.save = function (e) {
                            try {
                                null == e ? t.storage.removeItem("debug") : t.storage.debug = e
                            } catch (e) { }
                        }
                        ,
                        t.load = r,
                        t.useColors = function () {
                            return !("undefined" == typeof window || !window.process || "renderer" !== window.process.type) || ("undefined" == typeof navigator || !navigator.userAgent || !navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) && ("undefined" != typeof document && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || "undefined" != typeof window && window.console && (window.console.firebug || window.console.exception && window.console.table) || "undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31 || "undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))
                        }
                        ,
                        t.storage = "undefined" != typeof chrome && void 0 !== chrome.storage ? chrome.storage.local : function () {
                            try {
                                return window.localStorage
                            } catch (e) { }
                        }(),
                        t.colors = ["#0000CC", "#0000FF", "#0033CC", "#0033FF", "#0066CC", "#0066FF", "#0099CC", "#0099FF", "#00CC00", "#00CC33", "#00CC66", "#00CC99", "#00CCCC", "#00CCFF", "#3300CC", "#3300FF", "#3333CC", "#3333FF", "#3366CC", "#3366FF", "#3399CC", "#3399FF", "#33CC00", "#33CC33", "#33CC66", "#33CC99", "#33CCCC", "#33CCFF", "#6600CC", "#6600FF", "#6633CC", "#6633FF", "#66CC00", "#66CC33", "#9900CC", "#9900FF", "#9933CC", "#9933FF", "#99CC00", "#99CC33", "#CC0000", "#CC0033", "#CC0066", "#CC0099", "#CC00CC", "#CC00FF", "#CC3300", "#CC3333", "#CC3366", "#CC3399", "#CC33CC", "#CC33FF", "#CC6600", "#CC6633", "#CC9900", "#CC9933", "#CCCC00", "#CCCC33", "#FF0000", "#FF0033", "#FF0066", "#FF0099", "#FF00CC", "#FF00FF", "#FF3300", "#FF3333", "#FF3366", "#FF3399", "#FF33CC", "#FF33FF", "#FF6600", "#FF6633", "#FF9900", "#FF9933", "#FFCC00", "#FFCC33"],
                        t.formatters.j = function (e) {
                            try {
                                return JSON.stringify(e)
                            } catch (e) {
                                return "[UnexpectedJSONParseError]: " + e.message
                            }
                        }
                        ,
                        t.enable(r())
                }
                ).call(t, n(4))
            }
            , function (e, t) {
                function n() {
                    throw new Error("setTimeout has not been defined")
                }
                function i() {
                    throw new Error("clearTimeout has not been defined")
                }
                function r(e) {
                    if (c === setTimeout)
                        return setTimeout(e, 0);
                    if ((c === n || !c) && setTimeout)
                        return c = setTimeout,
                            setTimeout(e, 0);
                    try {
                        return c(e, 0)
                    } catch (t) {
                        try {
                            return c.call(null, e, 0)
                        } catch (t) {
                            return c.call(this, e, 0)
                        }
                    }
                }
                function o() {
                    f && p && (f = !1,
                        p.length ? h = p.concat(h) : m = -1,
                        h.length && a())
                }
                function a() {
                    if (!f) {
                        var e = r(o);
                        f = !0;
                        for (var t = h.length; t;) {
                            for (p = h,
                                h = []; ++m < t;)
                                p && p[m].run();
                            m = -1,
                                t = h.length
                        }
                        p = null,
                            f = !1,
                            function (e) {
                                if (u === clearTimeout)
                                    return clearTimeout(e);
                                if ((u === i || !u) && clearTimeout)
                                    return u = clearTimeout,
                                        clearTimeout(e);
                                try {
                                    u(e)
                                } catch (t) {
                                    try {
                                        return u.call(null, e)
                                    } catch (t) {
                                        return u.call(this, e)
                                    }
                                }
                            }(e)
                    }
                }
                function s(e, t) {
                    this.fun = e,
                        this.array = t
                }
                function l() { }
                var c, u, d = e.exports = {};
                !function () {
                    try {
                        c = "function" == typeof setTimeout ? setTimeout : n
                    } catch (e) {
                        c = n
                    }
                    try {
                        u = "function" == typeof clearTimeout ? clearTimeout : i
                    } catch (e) {
                        u = i
                    }
                }();
                var p, h = [], f = !1, m = -1;
                d.nextTick = function (e) {
                    var t = new Array(arguments.length - 1);
                    if (arguments.length > 1)
                        for (var n = 1; n < arguments.length; n++)
                            t[n - 1] = arguments[n];
                    h.push(new s(e, t)),
                        1 !== h.length || f || r(a)
                }
                    ,
                    s.prototype.run = function () {
                        this.fun.apply(null, this.array)
                    }
                    ,
                    d.title = "browser",
                    d.browser = !0,
                    d.env = {},
                    d.argv = [],
                    d.version = "",
                    d.versions = {},
                    d.on = l,
                    d.addListener = l,
                    d.once = l,
                    d.off = l,
                    d.removeListener = l,
                    d.removeAllListeners = l,
                    d.emit = l,
                    d.prependListener = l,
                    d.prependOnceListener = l,
                    d.listeners = function (e) {
                        return []
                    }
                    ,
                    d.binding = function (e) {
                        throw new Error("process.binding is not supported")
                    }
                    ,
                    d.cwd = function () {
                        return "/"
                    }
                    ,
                    d.chdir = function (e) {
                        throw new Error("process.chdir is not supported")
                    }
                    ,
                    d.umask = function () {
                        return 0
                    }
            }
            , function (e, t, n) {
                function i(e) {
                    function n() {
                        if (n.enabled) {
                            var e = n
                                , r = +new Date
                                , o = r - (i || r);
                            e.diff = o,
                                e.prev = i,
                                e.curr = r,
                                i = r;
                            for (var a = new Array(arguments.length), s = 0; s < a.length; s++)
                                a[s] = arguments[s];
                            a[0] = t.coerce(a[0]),
                                "string" != typeof a[0] && a.unshift("%O");
                            var l = 0;
                            a[0] = a[0].replace(/%([a-zA-Z%])/g, function (n, i) {
                                if ("%%" === n)
                                    return n;
                                l++;
                                var r = t.formatters[i];
                                if ("function" == typeof r) {
                                    var o = a[l];
                                    n = r.call(e, o),
                                        a.splice(l, 1),
                                        l--
                                }
                                return n
                            }),
                                t.formatArgs.call(e, a),
                                (n.log || t.log || console.log.bind(console)).apply(e, a)
                        }
                    }
                    var i;
                    return n.namespace = e,
                        n.enabled = t.enabled(e),
                        n.useColors = t.useColors(),
                        n.color = function (e) {
                            var n, i = 0;
                            for (n in e)
                                i = (i << 5) - i + e.charCodeAt(n),
                                    i |= 0;
                            return t.colors[Math.abs(i) % t.colors.length]
                        }(e),
                        n.destroy = r,
                        "function" == typeof t.init && t.init(n),
                        t.instances.push(n),
                        n
                }
                function r() {
                    var e = t.instances.indexOf(this);
                    return -1 !== e && (t.instances.splice(e, 1),
                        !0)
                }
                (t = e.exports = i.debug = i.default = i).coerce = function (e) {
                    return e instanceof Error ? e.stack || e.message : e
                }
                    ,
                    t.disable = function () {
                        t.enable("")
                    }
                    ,
                    t.enable = function (e) {
                        t.save(e),
                            t.names = [],
                            t.skips = [];
                        var n, i = ("string" == typeof e ? e : "").split(/[\s,]+/), r = i.length;
                        for (n = 0; n < r; n++)
                            i[n] && ("-" === (e = i[n].replace(/\*/g, ".*?"))[0] ? t.skips.push(new RegExp("^" + e.substr(1) + "$")) : t.names.push(new RegExp("^" + e + "$")));
                        for (n = 0; n < t.instances.length; n++) {
                            var o = t.instances[n];
                            o.enabled = t.enabled(o.namespace)
                        }
                    }
                    ,
                    t.enabled = function (e) {
                        if ("*" === e[e.length - 1])
                            return !0;
                        var n, i;
                        for (n = 0,
                            i = t.skips.length; n < i; n++)
                            if (t.skips[n].test(e))
                                return !1;
                        for (n = 0,
                            i = t.names.length; n < i; n++)
                            if (t.names[n].test(e))
                                return !0;
                        return !1
                    }
                    ,
                    t.humanize = n(6),
                    t.instances = [],
                    t.names = [],
                    t.skips = [],
                    t.formatters = {}
            }
            , function (e, t) {
                function n(e) {
                    return i(e, s, "day") || i(e, a, "hour") || i(e, o, "minute") || i(e, r, "second") || e + " ms"
                }
                function i(e, t, n) {
                    if (!(e < t))
                        return e < 1.5 * t ? Math.floor(e / t) + " " + n : Math.ceil(e / t) + " " + n + "s"
                }
                var r = 1e3
                    , o = 60 * r
                    , a = 60 * o
                    , s = 24 * a
                    , l = 365.25 * s;
                e.exports = function (e, t) {
                    t = t || {};
                    var i = typeof e;
                    if ("string" === i && e.length > 0)
                        return function (e) {
                            if (!((e = String(e)).length > 100)) {
                                var t = /^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);
                                if (t) {
                                    var n = parseFloat(t[1]);
                                    switch ((t[2] || "ms").toLowerCase()) {
                                        case "years":
                                        case "year":
                                        case "yrs":
                                        case "yr":
                                        case "y":
                                            return n * l;
                                        case "days":
                                        case "day":
                                        case "d":
                                            return n * s;
                                        case "hours":
                                        case "hour":
                                        case "hrs":
                                        case "hr":
                                        case "h":
                                            return n * a;
                                        case "minutes":
                                        case "minute":
                                        case "mins":
                                        case "min":
                                        case "m":
                                            return n * o;
                                        case "seconds":
                                        case "second":
                                        case "secs":
                                        case "sec":
                                        case "s":
                                            return n * r;
                                        case "milliseconds":
                                        case "millisecond":
                                        case "msecs":
                                        case "msec":
                                        case "ms":
                                            return n;
                                        default:
                                            return
                                    }
                                }
                            }
                        }(e);
                    if ("number" === i && !1 === isNaN(e))
                        return t.long ? n(e) : function (e) {
                            return e >= s ? Math.round(e / s) + "d" : e >= a ? Math.round(e / a) + "h" : e >= o ? Math.round(e / o) + "m" : e >= r ? Math.round(e / r) + "s" : e + "ms"
                        }(e);
                    throw new Error("val is not a non-empty string or a valid number. val=" + JSON.stringify(e))
                }
            }
            , function (e, t, n) {
                function i() { }
                function r(e) {
                    var n = "" + e.type;
                    if (t.BINARY_EVENT !== e.type && t.BINARY_ACK !== e.type || (n += e.attachments + "-"),
                        e.nsp && "/" !== e.nsp && (n += e.nsp + ","),
                        null != e.id && (n += e.id),
                        null != e.data) {
                        var i = function (e) {
                            try {
                                return JSON.stringify(e)
                            } catch (e) {
                                return !1
                            }
                        }(e.data);
                        if (!1 === i)
                            return f;
                        n += i
                    }
                    return c("encoded %j as %s", e, n),
                        n
                }
                function o() {
                    this.reconstructor = null
                }
                function a(e) {
                    var n = 0
                        , i = {
                            type: Number(e.charAt(0))
                        };
                    if (null == t.types[i.type])
                        return l("unknown packet type " + i.type);
                    if (t.BINARY_EVENT === i.type || t.BINARY_ACK === i.type) {
                        for (var r = ""; "-" !== e.charAt(++n) && (r += e.charAt(n),
                            n != e.length);)
                            ;
                        if (r != Number(r) || "-" !== e.charAt(n))
                            throw new Error("Illegal attachments");
                        i.attachments = Number(r)
                    }
                    if ("/" === e.charAt(n + 1))
                        for (i.nsp = ""; ++n;) {
                            if ("," === (a = e.charAt(n)))
                                break;
                            if (i.nsp += a,
                                n === e.length)
                                break
                        }
                    else
                        i.nsp = "/";
                    var o = e.charAt(n + 1);
                    if ("" !== o && Number(o) == o) {
                        for (i.id = ""; ++n;) {
                            var a;
                            if (null == (a = e.charAt(n)) || Number(a) != a) {
                                --n;
                                break
                            }
                            if (i.id += e.charAt(n),
                                n === e.length)
                                break
                        }
                        i.id = Number(i.id)
                    }
                    if (e.charAt(++n)) {
                        var s = function (e) {
                            try {
                                return JSON.parse(e)
                            } catch (e) {
                                return !1
                            }
                        }(e.substr(n));
                        if (!(!1 !== s && (i.type === t.ERROR || p(s))))
                            return l("invalid payload");
                        i.data = s
                    }
                    return c("decoded %s as %j", e, i),
                        i
                }
                function s(e) {
                    this.reconPack = e,
                        this.buffers = []
                }
                function l(e) {
                    return {
                        type: t.ERROR,
                        data: "parser error: " + e
                    }
                }
                var c = n(3)("socket.io-parser")
                    , u = n(8)
                    , d = n(9)
                    , p = n(10)
                    , h = n(11);
                t.protocol = 4,
                    t.types = ["CONNECT", "DISCONNECT", "EVENT", "ACK", "ERROR", "BINARY_EVENT", "BINARY_ACK"],
                    t.CONNECT = 0,
                    t.DISCONNECT = 1,
                    t.EVENT = 2,
                    t.ACK = 3,
                    t.ERROR = 4,
                    t.BINARY_EVENT = 5,
                    t.BINARY_ACK = 6,
                    t.Encoder = i,
                    t.Decoder = o;
                var f = t.ERROR + '"encode error"';
                i.prototype.encode = function (e, n) {
                    (c("encoding packet %j", e),
                        t.BINARY_EVENT === e.type || t.BINARY_ACK === e.type) ? function (e, t) {
                            d.removeBlobs(e, function (e) {
                                var n = d.deconstructPacket(e)
                                    , i = r(n.packet)
                                    , o = n.buffers;
                                o.unshift(i),
                                    t(o)
                            })
                        }(e, n) : n([r(e)])
                }
                    ,
                    u(o.prototype),
                    o.prototype.add = function (e) {
                        var n;
                        if ("string" == typeof e)
                            n = a(e),
                                t.BINARY_EVENT === n.type || t.BINARY_ACK === n.type ? (this.reconstructor = new s(n),
                                    0 === this.reconstructor.reconPack.attachments && this.emit("decoded", n)) : this.emit("decoded", n);
                        else {
                            if (!h(e) && !e.base64)
                                throw new Error("Unknown type: " + e);
                            if (!this.reconstructor)
                                throw new Error("got binary data when not reconstructing a packet");
                            (n = this.reconstructor.takeBinaryData(e)) && (this.reconstructor = null,
                                this.emit("decoded", n))
                        }
                    }
                    ,
                    o.prototype.destroy = function () {
                        this.reconstructor && this.reconstructor.finishedReconstruction()
                    }
                    ,
                    s.prototype.takeBinaryData = function (e) {
                        if (this.buffers.push(e),
                            this.buffers.length === this.reconPack.attachments) {
                            var t = d.reconstructPacket(this.reconPack, this.buffers);
                            return this.finishedReconstruction(),
                                t
                        }
                        return null
                    }
                    ,
                    s.prototype.finishedReconstruction = function () {
                        this.reconPack = null,
                            this.buffers = []
                    }
            }
            , function (e, t, n) {
                function i(e) {
                    if (e)
                        return function (e) {
                            for (var t in i.prototype)
                                e[t] = i.prototype[t];
                            return e
                        }(e)
                }
                e.exports = i,
                    i.prototype.on = i.prototype.addEventListener = function (e, t) {
                        return this._callbacks = this._callbacks || {},
                            (this._callbacks["$" + e] = this._callbacks["$" + e] || []).push(t),
                            this
                    }
                    ,
                    i.prototype.once = function (e, t) {
                        function n() {
                            this.off(e, n),
                                t.apply(this, arguments)
                        }
                        return n.fn = t,
                            this.on(e, n),
                            this
                    }
                    ,
                    i.prototype.off = i.prototype.removeListener = i.prototype.removeAllListeners = i.prototype.removeEventListener = function (e, t) {
                        if (this._callbacks = this._callbacks || {},
                            0 == arguments.length)
                            return this._callbacks = {},
                                this;
                        var n = this._callbacks["$" + e];
                        if (!n)
                            return this;
                        if (1 == arguments.length)
                            return delete this._callbacks["$" + e],
                                this;
                        for (var i, r = 0; r < n.length; r++)
                            if ((i = n[r]) === t || i.fn === t) {
                                n.splice(r, 1);
                                break
                            }
                        return this
                    }
                    ,
                    i.prototype.emit = function (e) {
                        this._callbacks = this._callbacks || {};
                        var t = [].slice.call(arguments, 1)
                            , n = this._callbacks["$" + e];
                        if (n)
                            for (var i = 0, r = (n = n.slice(0)).length; i < r; ++i)
                                n[i].apply(this, t);
                        return this
                    }
                    ,
                    i.prototype.listeners = function (e) {
                        return this._callbacks = this._callbacks || {},
                            this._callbacks["$" + e] || []
                    }
                    ,
                    i.prototype.hasListeners = function (e) {
                        return !!this.listeners(e).length
                    }
            }
            , function (e, t, n) {
                var i = n(10)
                    , r = n(11)
                    , o = Object.prototype.toString
                    , a = "function" == typeof Blob || "undefined" != typeof Blob && "[object BlobConstructor]" === o.call(Blob)
                    , s = "function" == typeof File || "undefined" != typeof File && "[object FileConstructor]" === o.call(File);
                t.deconstructPacket = function (e) {
                    var t = []
                        , n = e.data
                        , o = e;
                    return o.data = function e(t, n) {
                        if (!t)
                            return t;
                        if (r(t)) {
                            var o = {
                                _placeholder: !0,
                                num: n.length
                            };
                            return n.push(t),
                                o
                        }
                        if (i(t)) {
                            for (var a = new Array(t.length), s = 0; s < t.length; s++)
                                a[s] = e(t[s], n);
                            return a
                        }
                        if ("object" == typeof t && !(t instanceof Date)) {
                            for (var l in a = {},
                                t)
                                a[l] = e(t[l], n);
                            return a
                        }
                        return t
                    }(n, t),
                        o.attachments = t.length,
                    {
                        packet: o,
                        buffers: t
                    }
                }
                    ,
                    t.reconstructPacket = function (e, t) {
                        return e.data = function e(t, n) {
                            if (!t)
                                return t;
                            if (t && t._placeholder)
                                return n[t.num];
                            if (i(t))
                                for (var r = 0; r < t.length; r++)
                                    t[r] = e(t[r], n);
                            else if ("object" == typeof t)
                                for (var o in t)
                                    t[o] = e(t[o], n);
                            return t
                        }(e.data, t),
                            e.attachments = void 0,
                            e
                    }
                    ,
                    t.removeBlobs = function (e, t) {
                        var n = 0
                            , o = e;
                        (function e(l, c, u) {
                            if (!l)
                                return l;
                            if (a && l instanceof Blob || s && l instanceof File) {
                                n++;
                                var d = new FileReader;
                                d.onload = function () {
                                    u ? u[c] = this.result : o = this.result,
                                        --n || t(o)
                                }
                                    ,
                                    d.readAsArrayBuffer(l)
                            } else if (i(l))
                                for (var p = 0; p < l.length; p++)
                                    e(l[p], p, l);
                            else if ("object" == typeof l && !r(l))
                                for (var h in l)
                                    e(l[h], h, l)
                        }
                        )(o),
                            n || t(o)
                    }
            }
            , function (e, t) {
                var n = {}.toString;
                e.exports = Array.isArray || function (e) {
                    return "[object Array]" == n.call(e)
                }
            }
            , function (e, t) {
                e.exports = function (e) {
                    return n && Buffer.isBuffer(e) || i && (e instanceof ArrayBuffer || r(e))
                }
                    ;
                var n = "function" == typeof Buffer && "function" == typeof Buffer.isBuffer
                    , i = "function" == typeof ArrayBuffer
                    , r = function (e) {
                        return "function" == typeof ArrayBuffer.isView ? ArrayBuffer.isView(e) : e.buffer instanceof ArrayBuffer
                    }
            }
            , function (e, t, n) {
                "use strict";
                function i(e, t) {
                    if (!(this instanceof i))
                        return new i(e, t);
                    e && "object" === (void 0 === e ? "undefined" : r(e)) && (t = e,
                        e = void 0),
                        (t = t || {}).path = t.path || "/socket.io",
                        this.nsps = {},
                        this.subs = [],
                        this.opts = t,
                        this.reconnection(!1 !== t.reconnection),
                        this.reconnectionAttempts(t.reconnectionAttempts || 1 / 0),
                        this.reconnectionDelay(t.reconnectionDelay || 1e3),
                        this.reconnectionDelayMax(t.reconnectionDelayMax || 5e3),
                        this.randomizationFactor(t.randomizationFactor || .5),
                        this.backoff = new h({
                            min: this.reconnectionDelay(),
                            max: this.reconnectionDelayMax(),
                            jitter: this.randomizationFactor()
                        }),
                        this.timeout(null == t.timeout ? 2e4 : t.timeout),
                        this.readyState = "closed",
                        this.uri = e,
                        this.connecting = [],
                        this.lastPing = null,
                        this.encoding = !1,
                        this.packetBuffer = [];
                    var n = t.parser || l;
                    this.encoder = new n.Encoder,
                        this.decoder = new n.Decoder,
                        this.autoConnect = !1 !== t.autoConnect,
                        this.autoConnect && this.open()
                }
                var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                    return typeof e
                }
                    : function (e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    , o = n(13)
                    , a = n(36)
                    , s = n(8)
                    , l = n(7)
                    , c = n(38)
                    , u = n(39)
                    , d = n(3)("socket.io-client:manager")
                    , p = n(35)
                    , h = n(40)
                    , f = Object.prototype.hasOwnProperty;
                e.exports = i,
                    i.prototype.emitAll = function () {
                        for (var e in this.emit.apply(this, arguments),
                            this.nsps)
                            f.call(this.nsps, e) && this.nsps[e].emit.apply(this.nsps[e], arguments)
                    }
                    ,
                    i.prototype.updateSocketIds = function () {
                        for (var e in this.nsps)
                            f.call(this.nsps, e) && (this.nsps[e].id = this.generateId(e))
                    }
                    ,
                    i.prototype.generateId = function (e) {
                        return ("/" === e ? "" : e + "#") + this.engine.id
                    }
                    ,
                    s(i.prototype),
                    i.prototype.reconnection = function (e) {
                        return arguments.length ? (this._reconnection = !!e,
                            this) : this._reconnection
                    }
                    ,
                    i.prototype.reconnectionAttempts = function (e) {
                        return arguments.length ? (this._reconnectionAttempts = e,
                            this) : this._reconnectionAttempts
                    }
                    ,
                    i.prototype.reconnectionDelay = function (e) {
                        return arguments.length ? (this._reconnectionDelay = e,
                            this.backoff && this.backoff.setMin(e),
                            this) : this._reconnectionDelay
                    }
                    ,
                    i.prototype.randomizationFactor = function (e) {
                        return arguments.length ? (this._randomizationFactor = e,
                            this.backoff && this.backoff.setJitter(e),
                            this) : this._randomizationFactor
                    }
                    ,
                    i.prototype.reconnectionDelayMax = function (e) {
                        return arguments.length ? (this._reconnectionDelayMax = e,
                            this.backoff && this.backoff.setMax(e),
                            this) : this._reconnectionDelayMax
                    }
                    ,
                    i.prototype.timeout = function (e) {
                        return arguments.length ? (this._timeout = e,
                            this) : this._timeout
                    }
                    ,
                    i.prototype.maybeReconnectOnOpen = function () {
                        !this.reconnecting && this._reconnection && 0 === this.backoff.attempts && this.reconnect()
                    }
                    ,
                    i.prototype.open = i.prototype.connect = function (e, t) {
                        if (d("readyState %s", this.readyState),
                            ~this.readyState.indexOf("open"))
                            return this;
                        d("opening %s", this.uri),
                            this.engine = o(this.uri, this.opts);
                        var n = this.engine
                            , i = this;
                        this.readyState = "opening",
                            this.skipReconnect = !1;
                        var r = c(n, "open", function () {
                            i.onopen(),
                                e && e()
                        })
                            , a = c(n, "error", function (t) {
                                if (d("connect_error"),
                                    i.cleanup(),
                                    i.readyState = "closed",
                                    i.emitAll("connect_error", t),
                                    e) {
                                    var n = new Error("Connection error");
                                    n.data = t,
                                        e(n)
                                } else
                                    i.maybeReconnectOnOpen()
                            });
                        if (!1 !== this._timeout) {
                            var s = this._timeout;
                            d("connect attempt will timeout after %d", s);
                            var l = setTimeout(function () {
                                d("connect attempt timed out after %d", s),
                                    r.destroy(),
                                    n.close(),
                                    n.emit("error", "timeout"),
                                    i.emitAll("connect_timeout", s)
                            }, s);
                            this.subs.push({
                                destroy: function () {
                                    clearTimeout(l)
                                }
                            })
                        }
                        return this.subs.push(r),
                            this.subs.push(a),
                            this
                    }
                    ,
                    i.prototype.onopen = function () {
                        d("open"),
                            this.cleanup(),
                            this.readyState = "open",
                            this.emit("open");
                        var e = this.engine;
                        this.subs.push(c(e, "data", u(this, "ondata"))),
                            this.subs.push(c(e, "ping", u(this, "onping"))),
                            this.subs.push(c(e, "pong", u(this, "onpong"))),
                            this.subs.push(c(e, "error", u(this, "onerror"))),
                            this.subs.push(c(e, "close", u(this, "onclose"))),
                            this.subs.push(c(this.decoder, "decoded", u(this, "ondecoded")))
                    }
                    ,
                    i.prototype.onping = function () {
                        this.lastPing = new Date,
                            this.emitAll("ping")
                    }
                    ,
                    i.prototype.onpong = function () {
                        this.emitAll("pong", new Date - this.lastPing)
                    }
                    ,
                    i.prototype.ondata = function (e) {
                        this.decoder.add(e)
                    }
                    ,
                    i.prototype.ondecoded = function (e) {
                        this.emit("packet", e)
                    }
                    ,
                    i.prototype.onerror = function (e) {
                        d("error", e),
                            this.emitAll("error", e)
                    }
                    ,
                    i.prototype.socket = function (e, t) {
                        function n() {
                            ~p(r.connecting, i) || r.connecting.push(i)
                        }
                        var i = this.nsps[e];
                        if (!i) {
                            i = new a(this, e, t),
                                this.nsps[e] = i;
                            var r = this;
                            i.on("connecting", n),
                                i.on("connect", function () {
                                    i.id = r.generateId(e)
                                }),
                                this.autoConnect && n()
                        }
                        return i
                    }
                    ,
                    i.prototype.destroy = function (e) {
                        var t = p(this.connecting, e);
                        ~t && this.connecting.splice(t, 1),
                            this.connecting.length || this.close()
                    }
                    ,
                    i.prototype.packet = function (e) {
                        d("writing packet %j", e);
                        var t = this;
                        e.query && 0 === e.type && (e.nsp += "?" + e.query),
                            t.encoding ? t.packetBuffer.push(e) : (t.encoding = !0,
                                this.encoder.encode(e, function (n) {
                                    for (var i = 0; i < n.length; i++)
                                        t.engine.write(n[i], e.options);
                                    t.encoding = !1,
                                        t.processPacketQueue()
                                }))
                    }
                    ,
                    i.prototype.processPacketQueue = function () {
                        if (this.packetBuffer.length > 0 && !this.encoding) {
                            var e = this.packetBuffer.shift();
                            this.packet(e)
                        }
                    }
                    ,
                    i.prototype.cleanup = function () {
                        d("cleanup");
                        for (var e = this.subs.length, t = 0; t < e; t++) {
                            this.subs.shift().destroy()
                        }
                        this.packetBuffer = [],
                            this.encoding = !1,
                            this.lastPing = null,
                            this.decoder.destroy()
                    }
                    ,
                    i.prototype.close = i.prototype.disconnect = function () {
                        d("disconnect"),
                            this.skipReconnect = !0,
                            this.reconnecting = !1,
                            "opening" === this.readyState && this.cleanup(),
                            this.backoff.reset(),
                            this.readyState = "closed",
                            this.engine && this.engine.close()
                    }
                    ,
                    i.prototype.onclose = function (e) {
                        d("onclose"),
                            this.cleanup(),
                            this.backoff.reset(),
                            this.readyState = "closed",
                            this.emit("close", e),
                            this._reconnection && !this.skipReconnect && this.reconnect()
                    }
                    ,
                    i.prototype.reconnect = function () {
                        if (this.reconnecting || this.skipReconnect)
                            return this;
                        var e = this;
                        if (this.backoff.attempts >= this._reconnectionAttempts)
                            d("reconnect failed"),
                                this.backoff.reset(),
                                this.emitAll("reconnect_failed"),
                                this.reconnecting = !1;
                        else {
                            var t = this.backoff.duration();
                            d("will wait %dms before reconnect attempt", t),
                                this.reconnecting = !0;
                            var n = setTimeout(function () {
                                e.skipReconnect || (d("attempting reconnect"),
                                    e.emitAll("reconnect_attempt", e.backoff.attempts),
                                    e.emitAll("reconnecting", e.backoff.attempts),
                                    e.skipReconnect || e.open(function (t) {
                                        t ? (d("reconnect attempt error"),
                                            e.reconnecting = !1,
                                            e.reconnect(),
                                            e.emitAll("reconnect_error", t.data)) : (d("reconnect success"),
                                                e.onreconnect())
                                    }))
                            }, t);
                            this.subs.push({
                                destroy: function () {
                                    clearTimeout(n)
                                }
                            })
                        }
                    }
                    ,
                    i.prototype.onreconnect = function () {
                        var e = this.backoff.attempts;
                        this.reconnecting = !1,
                            this.backoff.reset(),
                            this.updateSocketIds(),
                            this.emitAll("reconnect", e)
                    }
            }
            , function (e, t, n) {
                e.exports = n(14),
                    e.exports.parser = n(21)
            }
            , function (e, t, n) {
                function i(e, t) {
                    return this instanceof i ? (t = t || {},
                        e && "object" == typeof e && (t = e,
                            e = null),
                        e ? (e = c(e),
                            t.hostname = e.host,
                            t.secure = "https" === e.protocol || "wss" === e.protocol,
                            t.port = e.port,
                            e.query && (t.query = e.query)) : t.host && (t.hostname = c(t.host).host),
                        this.secure = null != t.secure ? t.secure : "undefined" != typeof location && "https:" === location.protocol,
                        t.hostname && !t.port && (t.port = this.secure ? "443" : "80"),
                        this.agent = t.agent || !1,
                        this.hostname = t.hostname || ("undefined" != typeof location ? location.hostname : "localhost"),
                        this.port = t.port || ("undefined" != typeof location && location.port ? location.port : this.secure ? 443 : 80),
                        this.query = t.query || {},
                        "string" == typeof this.query && (this.query = u.decode(this.query)),
                        this.upgrade = !1 !== t.upgrade,
                        this.path = (t.path || "/engine.io").replace(/\/$/, "") + "/",
                        this.forceJSONP = !!t.forceJSONP,
                        this.jsonp = !1 !== t.jsonp,
                        this.forceBase64 = !!t.forceBase64,
                        this.enablesXDR = !!t.enablesXDR,
                        this.timestampParam = t.timestampParam || "t",
                        this.timestampRequests = t.timestampRequests,
                        this.transports = t.transports || ["polling", "websocket"],
                        this.transportOptions = t.transportOptions || {},
                        this.readyState = "",
                        this.writeBuffer = [],
                        this.prevBufferLen = 0,
                        this.policyPort = t.policyPort || 843,
                        this.rememberUpgrade = t.rememberUpgrade || !1,
                        this.binaryType = null,
                        this.onlyBinaryUpgrades = t.onlyBinaryUpgrades,
                        this.perMessageDeflate = !1 !== t.perMessageDeflate && (t.perMessageDeflate || {}),
                        !0 === this.perMessageDeflate && (this.perMessageDeflate = {}),
                        this.perMessageDeflate && null == this.perMessageDeflate.threshold && (this.perMessageDeflate.threshold = 1024),
                        this.pfx = t.pfx || null,
                        this.key = t.key || null,
                        this.passphrase = t.passphrase || null,
                        this.cert = t.cert || null,
                        this.ca = t.ca || null,
                        this.ciphers = t.ciphers || null,
                        this.rejectUnauthorized = void 0 === t.rejectUnauthorized || t.rejectUnauthorized,
                        this.forceNode = !!t.forceNode,
                        this.isReactNative = "undefined" != typeof navigator && "string" == typeof navigator.product && "reactnative" === navigator.product.toLowerCase(),
                        ("undefined" == typeof self || this.isReactNative) && (t.extraHeaders && Object.keys(t.extraHeaders).length > 0 && (this.extraHeaders = t.extraHeaders),
                            t.localAddress && (this.localAddress = t.localAddress)),
                        this.id = null,
                        this.upgrades = null,
                        this.pingInterval = null,
                        this.pingTimeout = null,
                        this.pingIntervalTimer = null,
                        this.pingTimeoutTimer = null,
                        void this.open()) : new i(e, t)
                }
                var r = n(15)
                    , o = n(8)
                    , a = n(3)("engine.io-client:socket")
                    , s = n(35)
                    , l = n(21)
                    , c = n(2)
                    , u = n(29);
                e.exports = i,
                    i.priorWebsocketSuccess = !1,
                    o(i.prototype),
                    i.protocol = l.protocol,
                    i.Socket = i,
                    i.Transport = n(20),
                    i.transports = n(15),
                    i.parser = n(21),
                    i.prototype.createTransport = function (e) {
                        a('creating transport "%s"', e);
                        var t = function (e) {
                            var t = {};
                            for (var n in e)
                                e.hasOwnProperty(n) && (t[n] = e[n]);
                            return t
                        }(this.query);
                        t.EIO = l.protocol,
                            t.transport = e;
                        var n = this.transportOptions[e] || {};
                        return this.id && (t.sid = this.id),
                            new r[e]({
                                query: t,
                                socket: this,
                                agent: n.agent || this.agent,
                                hostname: n.hostname || this.hostname,
                                port: n.port || this.port,
                                secure: n.secure || this.secure,
                                path: n.path || this.path,
                                forceJSONP: n.forceJSONP || this.forceJSONP,
                                jsonp: n.jsonp || this.jsonp,
                                forceBase64: n.forceBase64 || this.forceBase64,
                                enablesXDR: n.enablesXDR || this.enablesXDR,
                                timestampRequests: n.timestampRequests || this.timestampRequests,
                                timestampParam: n.timestampParam || this.timestampParam,
                                policyPort: n.policyPort || this.policyPort,
                                pfx: n.pfx || this.pfx,
                                key: n.key || this.key,
                                passphrase: n.passphrase || this.passphrase,
                                cert: n.cert || this.cert,
                                ca: n.ca || this.ca,
                                ciphers: n.ciphers || this.ciphers,
                                rejectUnauthorized: n.rejectUnauthorized || this.rejectUnauthorized,
                                perMessageDeflate: n.perMessageDeflate || this.perMessageDeflate,
                                extraHeaders: n.extraHeaders || this.extraHeaders,
                                forceNode: n.forceNode || this.forceNode,
                                localAddress: n.localAddress || this.localAddress,
                                requestTimeout: n.requestTimeout || this.requestTimeout,
                                protocols: n.protocols || void 0,
                                isReactNative: this.isReactNative
                            })
                    }
                    ,
                    i.prototype.open = function () {
                        var e;
                        if (this.rememberUpgrade && i.priorWebsocketSuccess && -1 !== this.transports.indexOf("websocket"))
                            e = "websocket";
                        else {
                            if (0 === this.transports.length) {
                                var t = this;
                                return void setTimeout(function () {
                                    t.emit("error", "No transports available")
                                }, 0)
                            }
                            e = this.transports[0]
                        }
                        this.readyState = "opening";
                        try {
                            e = this.createTransport(e)
                        } catch (e) {
                            return this.transports.shift(),
                                void this.open()
                        }
                        e.open(),
                            this.setTransport(e)
                    }
                    ,
                    i.prototype.setTransport = function (e) {
                        a("setting transport %s", e.name);
                        var t = this;
                        this.transport && (a("clearing existing transport %s", this.transport.name),
                            this.transport.removeAllListeners()),
                            this.transport = e,
                            e.on("drain", function () {
                                t.onDrain()
                            }).on("packet", function (e) {
                                t.onPacket(e)
                            }).on("error", function (e) {
                                t.onError(e)
                            }).on("close", function () {
                                t.onClose("transport close")
                            })
                    }
                    ,
                    i.prototype.probe = function (e) {
                        function t() {
                            if (p.onlyBinaryUpgrades) {
                                var t = !this.supportsBinary && p.transport.supportsBinary;
                                d = d || t
                            }
                            d || (a('probe transport "%s" opened', e),
                                u.send([{
                                    type: "ping",
                                    data: "probe"
                                }]),
                                u.once("packet", function (t) {
                                    if (!d)
                                        if ("pong" === t.type && "probe" === t.data) {
                                            if (a('probe transport "%s" pong', e),
                                                p.upgrading = !0,
                                                p.emit("upgrading", u),
                                                !u)
                                                return;
                                            i.priorWebsocketSuccess = "websocket" === u.name,
                                                a('pausing current transport "%s"', p.transport.name),
                                                p.transport.pause(function () {
                                                    d || "closed" !== p.readyState && (a("changing transport and sending upgrade packet"),
                                                        c(),
                                                        p.setTransport(u),
                                                        u.send([{
                                                            type: "upgrade"
                                                        }]),
                                                        p.emit("upgrade", u),
                                                        u = null,
                                                        p.upgrading = !1,
                                                        p.flush())
                                                })
                                        } else {
                                            a('probe transport "%s" failed', e);
                                            var n = new Error("probe error");
                                            n.transport = u.name,
                                                p.emit("upgradeError", n)
                                        }
                                }))
                        }
                        function n() {
                            d || (d = !0,
                                c(),
                                u.close(),
                                u = null)
                        }
                        function r(t) {
                            var i = new Error("probe error: " + t);
                            i.transport = u.name,
                                n(),
                                a('probe transport "%s" failed because of error: %s', e, t),
                                p.emit("upgradeError", i)
                        }
                        function o() {
                            r("transport closed")
                        }
                        function s() {
                            r("socket closed")
                        }
                        function l(e) {
                            u && e.name !== u.name && (a('"%s" works - aborting "%s"', e.name, u.name),
                                n())
                        }
                        function c() {
                            u.removeListener("open", t),
                                u.removeListener("error", r),
                                u.removeListener("close", o),
                                p.removeListener("close", s),
                                p.removeListener("upgrading", l)
                        }
                        a('probing transport "%s"', e);
                        var u = this.createTransport(e, {
                            probe: 1
                        })
                            , d = !1
                            , p = this;
                        i.priorWebsocketSuccess = !1,
                            u.once("open", t),
                            u.once("error", r),
                            u.once("close", o),
                            this.once("close", s),
                            this.once("upgrading", l),
                            u.open()
                    }
                    ,
                    i.prototype.onOpen = function () {
                        if (a("socket open"),
                            this.readyState = "open",
                            i.priorWebsocketSuccess = "websocket" === this.transport.name,
                            this.emit("open"),
                            this.flush(),
                            "open" === this.readyState && this.upgrade && this.transport.pause) {
                            a("starting upgrade probes");
                            for (var e = 0, t = this.upgrades.length; e < t; e++)
                                this.probe(this.upgrades[e])
                        }
                    }
                    ,
                    i.prototype.onPacket = function (e) {
                        if ("opening" === this.readyState || "open" === this.readyState || "closing" === this.readyState)
                            switch (a('socket receive: type "%s", data "%s"', e.type, e.data),
                            this.emit("packet", e),
                            this.emit("heartbeat"),
                            e.type) {
                                case "open":
                                    this.onHandshake(JSON.parse(e.data));
                                    break;
                                case "pong":
                                    this.setPing(),
                                        this.emit("pong");
                                    break;
                                case "error":
                                    var t = new Error("server error");
                                    t.code = e.data,
                                        this.onError(t);
                                    break;
                                case "message":
                                    this.emit("data", e.data),
                                        this.emit("message", e.data)
                            }
                        else
                            a('packet received with socket readyState "%s"', this.readyState)
                    }
                    ,
                    i.prototype.onHandshake = function (e) {
                        this.emit("handshake", e),
                            this.id = e.sid,
                            this.transport.query.sid = e.sid,
                            this.upgrades = this.filterUpgrades(e.upgrades),
                            this.pingInterval = e.pingInterval,
                            this.pingTimeout = e.pingTimeout,
                            this.onOpen(),
                            "closed" !== this.readyState && (this.setPing(),
                                this.removeListener("heartbeat", this.onHeartbeat),
                                this.on("heartbeat", this.onHeartbeat))
                    }
                    ,
                    i.prototype.onHeartbeat = function (e) {
                        clearTimeout(this.pingTimeoutTimer);
                        var t = this;
                        t.pingTimeoutTimer = setTimeout(function () {
                            "closed" !== t.readyState && t.onClose("ping timeout")
                        }, e || t.pingInterval + t.pingTimeout)
                    }
                    ,
                    i.prototype.setPing = function () {
                        var e = this;
                        clearTimeout(e.pingIntervalTimer),
                            e.pingIntervalTimer = setTimeout(function () {
                                a("writing ping packet - expecting pong within %sms", e.pingTimeout),
                                    e.ping(),
                                    e.onHeartbeat(e.pingTimeout)
                            }, e.pingInterval)
                    }
                    ,
                    i.prototype.ping = function () {
                        var e = this;
                        this.sendPacket("ping", function () {
                            e.emit("ping")
                        })
                    }
                    ,
                    i.prototype.onDrain = function () {
                        this.writeBuffer.splice(0, this.prevBufferLen),
                            this.prevBufferLen = 0,
                            0 === this.writeBuffer.length ? this.emit("drain") : this.flush()
                    }
                    ,
                    i.prototype.flush = function () {
                        "closed" !== this.readyState && this.transport.writable && !this.upgrading && this.writeBuffer.length && (a("flushing %d packets in socket", this.writeBuffer.length),
                            this.transport.send(this.writeBuffer),
                            this.prevBufferLen = this.writeBuffer.length,
                            this.emit("flush"))
                    }
                    ,
                    i.prototype.write = i.prototype.send = function (e, t, n) {
                        return this.sendPacket("message", e, t, n),
                            this
                    }
                    ,
                    i.prototype.sendPacket = function (e, t, n, i) {
                        if ("function" == typeof t && (i = t,
                            t = void 0),
                            "function" == typeof n && (i = n,
                                n = null),
                            "closing" !== this.readyState && "closed" !== this.readyState) {
                            (n = n || {}).compress = !1 !== n.compress;
                            var r = {
                                type: e,
                                data: t,
                                options: n
                            };
                            this.emit("packetCreate", r),
                                this.writeBuffer.push(r),
                                i && this.once("flush", i),
                                this.flush()
                        }
                    }
                    ,
                    i.prototype.close = function () {
                        function e() {
                            i.onClose("forced close"),
                                a("socket closing - telling transport to close"),
                                i.transport.close()
                        }
                        function t() {
                            i.removeListener("upgrade", t),
                                i.removeListener("upgradeError", t),
                                e()
                        }
                        function n() {
                            i.once("upgrade", t),
                                i.once("upgradeError", t)
                        }
                        if ("opening" === this.readyState || "open" === this.readyState) {
                            this.readyState = "closing";
                            var i = this;
                            this.writeBuffer.length ? this.once("drain", function () {
                                this.upgrading ? n() : e()
                            }) : this.upgrading ? n() : e()
                        }
                        return this
                    }
                    ,
                    i.prototype.onError = function (e) {
                        a("socket error %j", e),
                            i.priorWebsocketSuccess = !1,
                            this.emit("error", e),
                            this.onClose("transport error", e)
                    }
                    ,
                    i.prototype.onClose = function (e, t) {
                        if ("opening" === this.readyState || "open" === this.readyState || "closing" === this.readyState) {
                            a('socket close with reason: "%s"', e);
                            clearTimeout(this.pingIntervalTimer),
                                clearTimeout(this.pingTimeoutTimer),
                                this.transport.removeAllListeners("close"),
                                this.transport.close(),
                                this.transport.removeAllListeners(),
                                this.readyState = "closed",
                                this.id = null,
                                this.emit("close", e, t),
                                this.writeBuffer = [],
                                this.prevBufferLen = 0
                        }
                    }
                    ,
                    i.prototype.filterUpgrades = function (e) {
                        for (var t = [], n = 0, i = e.length; n < i; n++)
                            ~s(this.transports, e[n]) && t.push(e[n]);
                        return t
                    }
            }
            , function (e, t, n) {
                var i = n(16)
                    , r = n(18)
                    , o = n(32)
                    , a = n(33);
                t.polling = function (e) {
                    var t = !1
                        , n = !1
                        , a = !1 !== e.jsonp;
                    if ("undefined" != typeof location) {
                        var s = "https:" === location.protocol
                            , l = location.port;
                        l || (l = s ? 443 : 80),
                            t = e.hostname !== location.hostname || l !== e.port,
                            n = e.secure !== s
                    }
                    if (e.xdomain = t,
                        e.xscheme = n,
                        "open" in new i(e) && !e.forceJSONP)
                        return new r(e);
                    if (!a)
                        throw new Error("JSONP disabled");
                    return new o(e)
                }
                    ,
                    t.websocket = a
            }
            , function (e, t, n) {
                var i = n(17);
                e.exports = function (e) {
                    var t = e.xdomain
                        , n = e.xscheme
                        , r = e.enablesXDR;
                    try {
                        if ("undefined" != typeof XMLHttpRequest && (!t || i))
                            return new XMLHttpRequest
                    } catch (e) { }
                    try {
                        if ("undefined" != typeof XDomainRequest && !n && r)
                            return new XDomainRequest
                    } catch (e) { }
                    if (!t)
                        try {
                            return new (self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")
                        } catch (e) { }
                }
            }
            , function (e, t) {
                try {
                    e.exports = "undefined" != typeof XMLHttpRequest && "withCredentials" in new XMLHttpRequest
                } catch (t) {
                    e.exports = !1
                }
            }
            , function (e, t, n) {
                function i() { }
                function r(e) {
                    if (l.call(this, e),
                        this.requestTimeout = e.requestTimeout,
                        this.extraHeaders = e.extraHeaders,
                        "undefined" != typeof location) {
                        var t = "https:" === location.protocol
                            , n = location.port;
                        n || (n = t ? 443 : 80),
                            this.xd = "undefined" != typeof location && e.hostname !== location.hostname || n !== e.port,
                            this.xs = e.secure !== t
                    }
                }
                function o(e) {
                    this.method = e.method || "GET",
                        this.uri = e.uri,
                        this.xd = !!e.xd,
                        this.xs = !!e.xs,
                        this.async = !1 !== e.async,
                        this.data = void 0 !== e.data ? e.data : null,
                        this.agent = e.agent,
                        this.isBinary = e.isBinary,
                        this.supportsBinary = e.supportsBinary,
                        this.enablesXDR = e.enablesXDR,
                        this.requestTimeout = e.requestTimeout,
                        this.pfx = e.pfx,
                        this.key = e.key,
                        this.passphrase = e.passphrase,
                        this.cert = e.cert,
                        this.ca = e.ca,
                        this.ciphers = e.ciphers,
                        this.rejectUnauthorized = e.rejectUnauthorized,
                        this.extraHeaders = e.extraHeaders,
                        this.create()
                }
                function a() {
                    for (var e in o.requests)
                        o.requests.hasOwnProperty(e) && o.requests[e].abort()
                }
                var s = n(16)
                    , l = n(19)
                    , c = n(8)
                    , u = n(30)
                    , d = n(3)("engine.io-client:polling-xhr");
                if (e.exports = r,
                    e.exports.Request = o,
                    u(r, l),
                    r.prototype.supportsBinary = !0,
                    r.prototype.request = function (e) {
                        return (e = e || {}).uri = this.uri(),
                            e.xd = this.xd,
                            e.xs = this.xs,
                            e.agent = this.agent || !1,
                            e.supportsBinary = this.supportsBinary,
                            e.enablesXDR = this.enablesXDR,
                            e.pfx = this.pfx,
                            e.key = this.key,
                            e.passphrase = this.passphrase,
                            e.cert = this.cert,
                            e.ca = this.ca,
                            e.ciphers = this.ciphers,
                            e.rejectUnauthorized = this.rejectUnauthorized,
                            e.requestTimeout = this.requestTimeout,
                            e.extraHeaders = this.extraHeaders,
                            new o(e)
                    }
                    ,
                    r.prototype.doWrite = function (e, t) {
                        var n = "string" != typeof e && void 0 !== e
                            , i = this.request({
                                method: "POST",
                                data: e,
                                isBinary: n
                            })
                            , r = this;
                        i.on("success", t),
                            i.on("error", function (e) {
                                r.onError("xhr post error", e)
                            }),
                            this.sendXhr = i
                    }
                    ,
                    r.prototype.doPoll = function () {
                        d("xhr poll");
                        var e = this.request()
                            , t = this;
                        e.on("data", function (e) {
                            t.onData(e)
                        }),
                            e.on("error", function (e) {
                                t.onError("xhr poll error", e)
                            }),
                            this.pollXhr = e
                    }
                    ,
                    c(o.prototype),
                    o.prototype.create = function () {
                        var e = {
                            agent: this.agent,
                            xdomain: this.xd,
                            xscheme: this.xs,
                            enablesXDR: this.enablesXDR
                        };
                        e.pfx = this.pfx,
                            e.key = this.key,
                            e.passphrase = this.passphrase,
                            e.cert = this.cert,
                            e.ca = this.ca,
                            e.ciphers = this.ciphers,
                            e.rejectUnauthorized = this.rejectUnauthorized;
                        var t = this.xhr = new s(e)
                            , n = this;
                        try {
                            d("xhr open %s: %s", this.method, this.uri),
                                t.open(this.method, this.uri, this.async);
                            try {
                                if (this.extraHeaders)
                                    for (var i in t.setDisableHeaderCheck && t.setDisableHeaderCheck(!0),
                                        this.extraHeaders)
                                        this.extraHeaders.hasOwnProperty(i) && t.setRequestHeader(i, this.extraHeaders[i])
                            } catch (e) { }
                            if ("POST" === this.method)
                                try {
                                    this.isBinary ? t.setRequestHeader("Content-type", "application/octet-stream") : t.setRequestHeader("Content-type", "text/plain;charset=UTF-8")
                                } catch (e) { }
                            try {
                                t.setRequestHeader("Accept", "*/*")
                            } catch (e) { }
                            "withCredentials" in t && (t.withCredentials = !0),
                                this.requestTimeout && (t.timeout = this.requestTimeout),
                                this.hasXDR() ? (t.onload = function () {
                                    n.onLoad()
                                }
                                    ,
                                    t.onerror = function () {
                                        n.onError(t.responseText)
                                    }
                                ) : t.onreadystatechange = function () {
                                    if (2 === t.readyState)
                                        try {
                                            var e = t.getResponseHeader("Content-Type");
                                            n.supportsBinary && "application/octet-stream" === e && (t.responseType = "arraybuffer")
                                        } catch (e) { }
                                    4 === t.readyState && (200 === t.status || 1223 === t.status ? n.onLoad() : setTimeout(function () {
                                        n.onError(t.status)
                                    }, 0))
                                }
                                ,
                                d("xhr data %s", this.data),
                                t.send(this.data)
                        } catch (e) {
                            return void setTimeout(function () {
                                n.onError(e)
                            }, 0)
                        }
                        "undefined" != typeof document && (this.index = o.requestsCount++,
                            o.requests[this.index] = this)
                    }
                    ,
                    o.prototype.onSuccess = function () {
                        this.emit("success"),
                            this.cleanup()
                    }
                    ,
                    o.prototype.onData = function (e) {
                        this.emit("data", e),
                            this.onSuccess()
                    }
                    ,
                    o.prototype.onError = function (e) {
                        this.emit("error", e),
                            this.cleanup(!0)
                    }
                    ,
                    o.prototype.cleanup = function (e) {
                        if (void 0 !== this.xhr && null !== this.xhr) {
                            if (this.hasXDR() ? this.xhr.onload = this.xhr.onerror = i : this.xhr.onreadystatechange = i,
                                e)
                                try {
                                    this.xhr.abort()
                                } catch (e) { }
                            "undefined" != typeof document && delete o.requests[this.index],
                                this.xhr = null
                        }
                    }
                    ,
                    o.prototype.onLoad = function () {
                        var e;
                        try {
                            var t;
                            try {
                                t = this.xhr.getResponseHeader("Content-Type")
                            } catch (e) { }
                            e = "application/octet-stream" === t && this.xhr.response || this.xhr.responseText
                        } catch (e) {
                            this.onError(e)
                        }
                        null != e && this.onData(e)
                    }
                    ,
                    o.prototype.hasXDR = function () {
                        return "undefined" != typeof XDomainRequest && !this.xs && this.enablesXDR
                    }
                    ,
                    o.prototype.abort = function () {
                        this.cleanup()
                    }
                    ,
                    o.requestsCount = 0,
                    o.requests = {},
                    "undefined" != typeof document)
                    if ("function" == typeof attachEvent)
                        attachEvent("onunload", a);
                    else if ("function" == typeof addEventListener) {
                        var p = "onpagehide" in self ? "pagehide" : "unload";
                        addEventListener(p, a, !1)
                    }
            }
            , function (e, t, n) {
                function i(e) {
                    var t = e && e.forceBase64;
                    u && !t || (this.supportsBinary = !1),
                        r.call(this, e)
                }
                var r = n(20)
                    , o = n(29)
                    , a = n(21)
                    , s = n(30)
                    , l = n(31)
                    , c = n(3)("engine.io-client:polling");
                e.exports = i;
                var u = null != new (n(16))({
                    xdomain: !1
                }).responseType;
                s(i, r),
                    i.prototype.name = "polling",
                    i.prototype.doOpen = function () {
                        this.poll()
                    }
                    ,
                    i.prototype.pause = function (e) {
                        function t() {
                            c("paused"),
                                n.readyState = "paused",
                                e()
                        }
                        var n = this;
                        if (this.readyState = "pausing",
                            this.polling || !this.writable) {
                            var i = 0;
                            this.polling && (c("we are currently polling - waiting to pause"),
                                i++,
                                this.once("pollComplete", function () {
                                    c("pre-pause polling complete"),
                                        --i || t()
                                })),
                                this.writable || (c("we are currently writing - waiting to pause"),
                                    i++,
                                    this.once("drain", function () {
                                        c("pre-pause writing complete"),
                                            --i || t()
                                    }))
                        } else
                            t()
                    }
                    ,
                    i.prototype.poll = function () {
                        c("polling"),
                            this.polling = !0,
                            this.doPoll(),
                            this.emit("poll")
                    }
                    ,
                    i.prototype.onData = function (e) {
                        var t = this;
                        c("polling got data %s", e);
                        a.decodePayload(e, this.socket.binaryType, function (e, n, i) {
                            return "opening" === t.readyState && t.onOpen(),
                                "close" === e.type ? (t.onClose(),
                                    !1) : void t.onPacket(e)
                        }),
                            "closed" !== this.readyState && (this.polling = !1,
                                this.emit("pollComplete"),
                                "open" === this.readyState ? this.poll() : c('ignoring poll - transport state "%s"', this.readyState))
                    }
                    ,
                    i.prototype.doClose = function () {
                        function e() {
                            c("writing close packet"),
                                t.write([{
                                    type: "close"
                                }])
                        }
                        var t = this;
                        "open" === this.readyState ? (c("transport open - closing"),
                            e()) : (c("transport not open - deferring close"),
                                this.once("open", e))
                    }
                    ,
                    i.prototype.write = function (e) {
                        var t = this;
                        this.writable = !1;
                        var n = function () {
                            t.writable = !0,
                                t.emit("drain")
                        };
                        a.encodePayload(e, this.supportsBinary, function (e) {
                            t.doWrite(e, n)
                        })
                    }
                    ,
                    i.prototype.uri = function () {
                        var e = this.query || {}
                            , t = this.secure ? "https" : "http"
                            , n = "";
                        return !1 !== this.timestampRequests && (e[this.timestampParam] = l()),
                            this.supportsBinary || e.sid || (e.b64 = 1),
                            e = o.encode(e),
                            this.port && ("https" === t && 443 !== Number(this.port) || "http" === t && 80 !== Number(this.port)) && (n = ":" + this.port),
                            e.length && (e = "?" + e),
                            t + "://" + (-1 !== this.hostname.indexOf(":") ? "[" + this.hostname + "]" : this.hostname) + n + this.path + e
                    }
            }
            , function (e, t, n) {
                function i(e) {
                    this.path = e.path,
                        this.hostname = e.hostname,
                        this.port = e.port,
                        this.secure = e.secure,
                        this.query = e.query,
                        this.timestampParam = e.timestampParam,
                        this.timestampRequests = e.timestampRequests,
                        this.readyState = "",
                        this.agent = e.agent || !1,
                        this.socket = e.socket,
                        this.enablesXDR = e.enablesXDR,
                        this.pfx = e.pfx,
                        this.key = e.key,
                        this.passphrase = e.passphrase,
                        this.cert = e.cert,
                        this.ca = e.ca,
                        this.ciphers = e.ciphers,
                        this.rejectUnauthorized = e.rejectUnauthorized,
                        this.forceNode = e.forceNode,
                        this.isReactNative = e.isReactNative,
                        this.extraHeaders = e.extraHeaders,
                        this.localAddress = e.localAddress
                }
                var r = n(21)
                    , o = n(8);
                e.exports = i,
                    o(i.prototype),
                    i.prototype.onError = function (e, t) {
                        var n = new Error(e);
                        return n.type = "TransportError",
                            n.description = t,
                            this.emit("error", n),
                            this
                    }
                    ,
                    i.prototype.open = function () {
                        return "closed" !== this.readyState && "" !== this.readyState || (this.readyState = "opening",
                            this.doOpen()),
                            this
                    }
                    ,
                    i.prototype.close = function () {
                        return "opening" !== this.readyState && "open" !== this.readyState || (this.doClose(),
                            this.onClose()),
                            this
                    }
                    ,
                    i.prototype.send = function (e) {
                        if ("open" !== this.readyState)
                            throw new Error("Transport not open");
                        this.write(e)
                    }
                    ,
                    i.prototype.onOpen = function () {
                        this.readyState = "open",
                            this.writable = !0,
                            this.emit("open")
                    }
                    ,
                    i.prototype.onData = function (e) {
                        var t = r.decodePacket(e, this.socket.binaryType);
                        this.onPacket(t)
                    }
                    ,
                    i.prototype.onPacket = function (e) {
                        this.emit("packet", e)
                    }
                    ,
                    i.prototype.onClose = function () {
                        this.readyState = "closed",
                            this.emit("close")
                    }
            }
            , function (e, t, n) {
                function i(e, n) {
                    return n("b" + t.packets[e.type] + e.data.data)
                }
                function r(e, n, i) {
                    if (!n)
                        return t.encodeBase64Packet(e, i);
                    var r = e.data
                        , o = new Uint8Array(r)
                        , a = new Uint8Array(1 + r.byteLength);
                    a[0] = g[e.type];
                    for (var s = 0; s < o.length; s++)
                        a[s + 1] = o[s];
                    return i(a.buffer)
                }
                function o(e, n, i) {
                    if (!n)
                        return t.encodeBase64Packet(e, i);
                    if (m)
                        return function (e, n, i) {
                            if (!n)
                                return t.encodeBase64Packet(e, i);
                            var r = new FileReader;
                            return r.onload = function () {
                                t.encodePacket({
                                    type: e.type,
                                    data: r.result
                                }, n, !0, i)
                            }
                                ,
                                r.readAsArrayBuffer(e.data)
                        }(e, n, i);
                    var r = new Uint8Array(1);
                    return r[0] = g[e.type],
                        i(new b([r.buffer, e.data]))
                }
                function a(e, t, n) {
                    for (var i = new Array(e.length), r = d(e.length, n), o = function (e, n, r) {
                        t(n, function (t, n) {
                            i[e] = n,
                                r(t, i)
                        })
                    }, a = 0; a < e.length; a++)
                        o(a, e[a], r)
                }
                var s, l = n(22), c = n(23), u = n(24), d = n(25), p = n(26);
                "undefined" != typeof ArrayBuffer && (s = n(27));
                var h = "undefined" != typeof navigator && /Android/i.test(navigator.userAgent)
                    , f = "undefined" != typeof navigator && /PhantomJS/i.test(navigator.userAgent)
                    , m = h || f;
                t.protocol = 3;
                var g = t.packets = {
                    open: 0,
                    close: 1,
                    ping: 2,
                    pong: 3,
                    message: 4,
                    upgrade: 5,
                    noop: 6
                }
                    , v = l(g)
                    , y = {
                        type: "error",
                        data: "parser error"
                    }
                    , b = n(28);
                t.encodePacket = function (e, t, n, a) {
                    "function" == typeof t && (a = t,
                        t = !1),
                        "function" == typeof n && (a = n,
                            n = null);
                    var s = void 0 === e.data ? void 0 : e.data.buffer || e.data;
                    if ("undefined" != typeof ArrayBuffer && s instanceof ArrayBuffer)
                        return r(e, t, a);
                    if (void 0 !== b && s instanceof b)
                        return o(e, t, a);
                    if (s && s.base64)
                        return i(e, a);
                    var l = g[e.type];
                    return void 0 !== e.data && (l += n ? p.encode(String(e.data), {
                        strict: !1
                    }) : String(e.data)),
                        a("" + l)
                }
                    ,
                    t.encodeBase64Packet = function (e, n) {
                        var i, r = "b" + t.packets[e.type];
                        if (void 0 !== b && e.data instanceof b) {
                            var o = new FileReader;
                            return o.onload = function () {
                                var e = o.result.split(",")[1];
                                n(r + e)
                            }
                                ,
                                o.readAsDataURL(e.data)
                        }
                        try {
                            i = String.fromCharCode.apply(null, new Uint8Array(e.data))
                        } catch (t) {
                            for (var a = new Uint8Array(e.data), s = new Array(a.length), l = 0; l < a.length; l++)
                                s[l] = a[l];
                            i = String.fromCharCode.apply(null, s)
                        }
                        return r += btoa(i),
                            n(r)
                    }
                    ,
                    t.decodePacket = function (e, n, i) {
                        if (void 0 === e)
                            return y;
                        if ("string" == typeof e) {
                            if ("b" === e.charAt(0))
                                return t.decodeBase64Packet(e.substr(1), n);
                            if (i && !1 === (e = function (e) {
                                try {
                                    e = p.decode(e, {
                                        strict: !1
                                    })
                                } catch (e) {
                                    return !1
                                }
                                return e
                            }(e)))
                                return y;
                            var r = e.charAt(0);
                            return Number(r) == r && v[r] ? e.length > 1 ? {
                                type: v[r],
                                data: e.substring(1)
                            } : {
                                    type: v[r]
                                } : y
                        }
                        r = new Uint8Array(e)[0];
                        var o = u(e, 1);
                        return b && "blob" === n && (o = new b([o])),
                        {
                            type: v[r],
                            data: o
                        }
                    }
                    ,
                    t.decodeBase64Packet = function (e, t) {
                        var n = v[e.charAt(0)];
                        if (!s)
                            return {
                                type: n,
                                data: {
                                    base64: !0,
                                    data: e.substr(1)
                                }
                            };
                        var i = s.decode(e.substr(1));
                        return "blob" === t && b && (i = new b([i])),
                        {
                            type: n,
                            data: i
                        }
                    }
                    ,
                    t.encodePayload = function (e, n, i) {
                        "function" == typeof n && (i = n,
                            n = null);
                        var r = c(e);
                        return n && r ? b && !m ? t.encodePayloadAsBlob(e, i) : t.encodePayloadAsArrayBuffer(e, i) : e.length ? void a(e, function (e, i) {
                            t.encodePacket(e, !!r && n, !1, function (e) {
                                i(null, function (e) {
                                    return e.length + ":" + e
                                }(e))
                            })
                        }, function (e, t) {
                            return i(t.join(""))
                        }) : i("0:")
                    }
                    ,
                    t.decodePayload = function (e, n, i) {
                        if ("string" != typeof e)
                            return t.decodePayloadAsBinary(e, n, i);
                        var r;
                        if ("function" == typeof n && (i = n,
                            n = null),
                            "" === e)
                            return i(y, 0, 1);
                        for (var o, a, s = "", l = 0, c = e.length; l < c; l++) {
                            var u = e.charAt(l);
                            if (":" === u) {
                                if ("" === s || s != (o = Number(s)))
                                    return i(y, 0, 1);
                                if (s != (a = e.substr(l + 1, o)).length)
                                    return i(y, 0, 1);
                                if (a.length) {
                                    if (r = t.decodePacket(a, n, !1),
                                        y.type === r.type && y.data === r.data)
                                        return i(y, 0, 1);
                                    if (!1 === i(r, l + o, c))
                                        return
                                }
                                l += o,
                                    s = ""
                            } else
                                s += u
                        }
                        return "" !== s ? i(y, 0, 1) : void 0
                    }
                    ,
                    t.encodePayloadAsArrayBuffer = function (e, n) {
                        return e.length ? void a(e, function (e, n) {
                            t.encodePacket(e, !0, !0, function (e) {
                                return n(null, e)
                            })
                        }, function (e, t) {
                            var i = t.reduce(function (e, t) {
                                var n;
                                return e + (n = "string" == typeof t ? t.length : t.byteLength).toString().length + n + 2
                            }, 0)
                                , r = new Uint8Array(i)
                                , o = 0;
                            return t.forEach(function (e) {
                                var t = "string" == typeof e
                                    , n = e;
                                if (t) {
                                    for (var i = new Uint8Array(e.length), a = 0; a < e.length; a++)
                                        i[a] = e.charCodeAt(a);
                                    n = i.buffer
                                }
                                r[o++] = t ? 0 : 1;
                                var s = n.byteLength.toString();
                                for (a = 0; a < s.length; a++)
                                    r[o++] = parseInt(s[a]);
                                r[o++] = 255;
                                for (i = new Uint8Array(n),
                                    a = 0; a < i.length; a++)
                                    r[o++] = i[a]
                            }),
                                n(r.buffer)
                        }) : n(new ArrayBuffer(0))
                    }
                    ,
                    t.encodePayloadAsBlob = function (e, n) {
                        a(e, function (e, n) {
                            t.encodePacket(e, !0, !0, function (e) {
                                var t = new Uint8Array(1);
                                if (t[0] = 1,
                                    "string" == typeof e) {
                                    for (var i = new Uint8Array(e.length), r = 0; r < e.length; r++)
                                        i[r] = e.charCodeAt(r);
                                    e = i.buffer,
                                        t[0] = 0
                                }
                                var o = (e instanceof ArrayBuffer ? e.byteLength : e.size).toString()
                                    , a = new Uint8Array(o.length + 1);
                                for (r = 0; r < o.length; r++)
                                    a[r] = parseInt(o[r]);
                                if (a[o.length] = 255,
                                    b) {
                                    var s = new b([t.buffer, a.buffer, e]);
                                    n(null, s)
                                }
                            })
                        }, function (e, t) {
                            return n(new b(t))
                        })
                    }
                    ,
                    t.decodePayloadAsBinary = function (e, n, i) {
                        "function" == typeof n && (i = n,
                            n = null);
                        for (var r = e, o = []; r.byteLength > 0;) {
                            for (var a = new Uint8Array(r), s = 0 === a[0], l = "", c = 1; 255 !== a[c]; c++) {
                                if (l.length > 310)
                                    return i(y, 0, 1);
                                l += a[c]
                            }
                            r = u(r, 2 + l.length),
                                l = parseInt(l);
                            var d = u(r, 0, l);
                            if (s)
                                try {
                                    d = String.fromCharCode.apply(null, new Uint8Array(d))
                                } catch (e) {
                                    var p = new Uint8Array(d);
                                    d = "";
                                    for (c = 0; c < p.length; c++)
                                        d += String.fromCharCode(p[c])
                                }
                            o.push(d),
                                r = u(r, l)
                        }
                        var h = o.length;
                        o.forEach(function (e, r) {
                            i(t.decodePacket(e, n, !0), r, h)
                        })
                    }
            }
            , function (e, t) {
                e.exports = Object.keys || function (e) {
                    var t = []
                        , n = Object.prototype.hasOwnProperty;
                    for (var i in e)
                        n.call(e, i) && t.push(i);
                    return t
                }
            }
            , function (e, t, n) {
                var i = n(10)
                    , r = Object.prototype.toString
                    , o = "function" == typeof Blob || "undefined" != typeof Blob && "[object BlobConstructor]" === r.call(Blob)
                    , a = "function" == typeof File || "undefined" != typeof File && "[object FileConstructor]" === r.call(File);
                e.exports = function e(t) {
                    if (!t || "object" != typeof t)
                        return !1;
                    if (i(t)) {
                        for (var n = 0, r = t.length; n < r; n++)
                            if (e(t[n]))
                                return !0;
                        return !1
                    }
                    if ("function" == typeof Buffer && Buffer.isBuffer && Buffer.isBuffer(t) || "function" == typeof ArrayBuffer && t instanceof ArrayBuffer || o && t instanceof Blob || a && t instanceof File)
                        return !0;
                    if (t.toJSON && "function" == typeof t.toJSON && 1 === arguments.length)
                        return e(t.toJSON(), !0);
                    for (var s in t)
                        if (Object.prototype.hasOwnProperty.call(t, s) && e(t[s]))
                            return !0;
                    return !1
                }
            }
            , function (e, t) {
                e.exports = function (e, t, n) {
                    var i = e.byteLength;
                    if (t = t || 0,
                        n = n || i,
                        e.slice)
                        return e.slice(t, n);
                    if (t < 0 && (t += i),
                        n < 0 && (n += i),
                        n > i && (n = i),
                        t >= i || t >= n || 0 === i)
                        return new ArrayBuffer(0);
                    for (var r = new Uint8Array(e), o = new Uint8Array(n - t), a = t, s = 0; a < n; a++,
                        s++)
                        o[s] = r[a];
                    return o.buffer
                }
            }
            , function (e, t) {
                function n() { }
                e.exports = function (e, t, i) {
                    function r(e, n) {
                        if (r.count <= 0)
                            throw new Error("after called too many times");
                        --r.count,
                            e ? (o = !0,
                                t(e),
                                t = i) : 0 !== r.count || o || t(null, n)
                    }
                    var o = !1;
                    return i = i || n,
                        r.count = e,
                        0 === e ? t() : r
                }
            }
            , function (e, t) {
                function n(e) {
                    for (var t, n, i = [], r = 0, o = e.length; r < o;)
                        (t = e.charCodeAt(r++)) >= 55296 && t <= 56319 && r < o ? 56320 == (64512 & (n = e.charCodeAt(r++))) ? i.push(((1023 & t) << 10) + (1023 & n) + 65536) : (i.push(t),
                            r--) : i.push(t);
                    return i
                }
                function i(e, t) {
                    if (e >= 55296 && e <= 57343) {
                        if (t)
                            throw Error("Lone surrogate U+" + e.toString(16).toUpperCase() + " is not a scalar value");
                        return !1
                    }
                    return !0
                }
                function r(e, t) {
                    return d(e >> t & 63 | 128)
                }
                function o(e, t) {
                    if (0 == (4294967168 & e))
                        return d(e);
                    var n = "";
                    return 0 == (4294965248 & e) ? n = d(e >> 6 & 31 | 192) : 0 == (4294901760 & e) ? (i(e, t) || (e = 65533),
                        n = d(e >> 12 & 15 | 224),
                        n += r(e, 6)) : 0 == (4292870144 & e) && (n = d(e >> 18 & 7 | 240),
                            n += r(e, 12),
                            n += r(e, 6)),
                        n + d(63 & e | 128)
                }
                function a() {
                    if (u >= c)
                        throw Error("Invalid byte index");
                    var e = 255 & l[u];
                    if (u++,
                        128 == (192 & e))
                        return 63 & e;
                    throw Error("Invalid continuation byte")
                }
                function s(e) {
                    var t, n;
                    if (u > c)
                        throw Error("Invalid byte index");
                    if (u == c)
                        return !1;
                    if (t = 255 & l[u],
                        u++,
                        0 == (128 & t))
                        return t;
                    if (192 == (224 & t)) {
                        if ((n = (31 & t) << 6 | a()) >= 128)
                            return n;
                        throw Error("Invalid continuation byte")
                    }
                    if (224 == (240 & t)) {
                        if ((n = (15 & t) << 12 | a() << 6 | a()) >= 2048)
                            return i(n, e) ? n : 65533;
                        throw Error("Invalid continuation byte")
                    }
                    if (240 == (248 & t) && ((n = (7 & t) << 18 | a() << 12 | a() << 6 | a()) >= 65536 && n <= 1114111))
                        return n;
                    throw Error("Invalid UTF-8 detected")
                }
                var l, c, u, d = String.fromCharCode;
                e.exports = {
                    version: "2.1.2",
                    encode: function (e, t) {
                        for (var i = !1 !== (t = t || {}).strict, r = n(e), a = r.length, s = -1, l = ""; ++s < a;)
                            l += o(r[s], i);
                        return l
                    },
                    decode: function (e, t) {
                        var i = !1 !== (t = t || {}).strict;
                        l = n(e),
                            c = l.length,
                            u = 0;
                        for (var r, o = []; !1 !== (r = s(i));)
                            o.push(r);
                        return function (e) {
                            for (var t, n = e.length, i = -1, r = ""; ++i < n;)
                                (t = e[i]) > 65535 && (r += d((t -= 65536) >>> 10 & 1023 | 55296),
                                    t = 56320 | 1023 & t),
                                    r += d(t);
                            return r
                        }(o)
                    }
                }
            }
            , function (e, t) {
                !function () {
                    "use strict";
                    for (var e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", n = new Uint8Array(256), i = 0; i < e.length; i++)
                        n[e.charCodeAt(i)] = i;
                    t.encode = function (t) {
                        var n, i = new Uint8Array(t), r = i.length, o = "";
                        for (n = 0; n < r; n += 3)
                            o += e[i[n] >> 2],
                                o += e[(3 & i[n]) << 4 | i[n + 1] >> 4],
                                o += e[(15 & i[n + 1]) << 2 | i[n + 2] >> 6],
                                o += e[63 & i[n + 2]];
                        return r % 3 == 2 ? o = o.substring(0, o.length - 1) + "=" : r % 3 == 1 && (o = o.substring(0, o.length - 2) + "=="),
                            o
                    }
                        ,
                        t.decode = function (e) {
                            var t, i, r, o, a, s = .75 * e.length, l = e.length, c = 0;
                            "=" === e[e.length - 1] && (s--,
                                "=" === e[e.length - 2] && s--);
                            var u = new ArrayBuffer(s)
                                , d = new Uint8Array(u);
                            for (t = 0; t < l; t += 4)
                                i = n[e.charCodeAt(t)],
                                    r = n[e.charCodeAt(t + 1)],
                                    o = n[e.charCodeAt(t + 2)],
                                    a = n[e.charCodeAt(t + 3)],
                                    d[c++] = i << 2 | r >> 4,
                                    d[c++] = (15 & r) << 4 | o >> 2,
                                    d[c++] = (3 & o) << 6 | 63 & a;
                            return u
                        }
                }()
            }
            , function (e, t) {
                function n(e) {
                    return e.map(function (e) {
                        if (e.buffer instanceof ArrayBuffer) {
                            var t = e.buffer;
                            if (e.byteLength !== t.byteLength) {
                                var n = new Uint8Array(e.byteLength);
                                n.set(new Uint8Array(t, e.byteOffset, e.byteLength)),
                                    t = n.buffer
                            }
                            return t
                        }
                        return e
                    })
                }
                function i(e, t) {
                    t = t || {};
                    var i = new o;
                    return n(e).forEach(function (e) {
                        i.append(e)
                    }),
                        t.type ? i.getBlob(t.type) : i.getBlob()
                }
                function r(e, t) {
                    return new Blob(n(e), t || {})
                }
                var o = void 0 !== o ? o : "undefined" != typeof WebKitBlobBuilder ? WebKitBlobBuilder : "undefined" != typeof MSBlobBuilder ? MSBlobBuilder : "undefined" != typeof MozBlobBuilder && MozBlobBuilder
                    , a = function () {
                        try {
                            return 2 === new Blob(["hi"]).size
                        } catch (e) {
                            return !1
                        }
                    }()
                    , s = a && function () {
                        try {
                            return 2 === new Blob([new Uint8Array([1, 2])]).size
                        } catch (e) {
                            return !1
                        }
                    }()
                    , l = o && o.prototype.append && o.prototype.getBlob;
                "undefined" != typeof Blob && (i.prototype = Blob.prototype,
                    r.prototype = Blob.prototype),
                    e.exports = a ? s ? Blob : r : l ? i : void 0
            }
            , function (e, t) {
                t.encode = function (e) {
                    var t = "";
                    for (var n in e)
                        e.hasOwnProperty(n) && (t.length && (t += "&"),
                            t += encodeURIComponent(n) + "=" + encodeURIComponent(e[n]));
                    return t
                }
                    ,
                    t.decode = function (e) {
                        for (var t = {}, n = e.split("&"), i = 0, r = n.length; i < r; i++) {
                            var o = n[i].split("=");
                            t[decodeURIComponent(o[0])] = decodeURIComponent(o[1])
                        }
                        return t
                    }
            }
            , function (e, t) {
                e.exports = function (e, t) {
                    var n = function () { };
                    n.prototype = t.prototype,
                        e.prototype = new n,
                        e.prototype.constructor = e
                }
            }
            , function (e, t) {
                "use strict";
                function n(e) {
                    var t = "";
                    do {
                        t = o[e % a] + t,
                            e = Math.floor(e / a)
                    } while (e > 0); return t
                }
                function i() {
                    var e = n(+new Date);
                    return e !== r ? (l = 0,
                        r = e) : e + "." + n(l++)
                }
                for (var r, o = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""), a = 64, s = {}, l = 0, c = 0; c < a; c++)
                    s[o[c]] = c;
                i.encode = n,
                    i.decode = function (e) {
                        var t = 0;
                        for (c = 0; c < e.length; c++)
                            t = t * a + s[e.charAt(c)];
                        return t
                    }
                    ,
                    e.exports = i
            }
            , function (e, t, n) {
                (function (t) {
                    function i() { }
                    function r() {
                        return "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== t ? t : {}
                    }
                    function o(e) {
                        if (a.call(this, e),
                            this.query = this.query || {},
                            !l) {
                            var t = r();
                            l = t.___eio = t.___eio || []
                        }
                        this.index = l.length;
                        var n = this;
                        l.push(function (e) {
                            n.onData(e)
                        }),
                            this.query.j = this.index,
                            "function" == typeof addEventListener && addEventListener("beforeunload", function () {
                                n.script && (n.script.onerror = i)
                            }, !1)
                    }
                    var a = n(19)
                        , s = n(30);
                    e.exports = o;
                    var l, c = /\n/g, u = /\\n/g;
                    s(o, a),
                        o.prototype.supportsBinary = !1,
                        o.prototype.doClose = function () {
                            this.script && (this.script.parentNode.removeChild(this.script),
                                this.script = null),
                                this.form && (this.form.parentNode.removeChild(this.form),
                                    this.form = null,
                                    this.iframe = null),
                                a.prototype.doClose.call(this)
                        }
                        ,
                        o.prototype.doPoll = function () {
                            var e = this
                                , t = document.createElement("script");
                            this.script && (this.script.parentNode.removeChild(this.script),
                                this.script = null),
                                t.async = !0,
                                t.src = this.uri(),
                                t.onerror = function (t) {
                                    e.onError("jsonp poll error", t)
                                }
                                ;
                            var n = document.getElementsByTagName("script")[0];
                            n ? n.parentNode.insertBefore(t, n) : (document.head || document.body).appendChild(t),
                                this.script = t,
                                "undefined" != typeof navigator && /gecko/i.test(navigator.userAgent) && setTimeout(function () {
                                    var e = document.createElement("iframe");
                                    document.body.appendChild(e),
                                        document.body.removeChild(e)
                                }, 100)
                        }
                        ,
                        o.prototype.doWrite = function (e, t) {
                            function n() {
                                i(),
                                    t()
                            }
                            function i() {
                                if (r.iframe)
                                    try {
                                        r.form.removeChild(r.iframe)
                                    } catch (e) {
                                        r.onError("jsonp polling iframe removal error", e)
                                    }
                                try {
                                    var e = '<iframe src="javascript:0" name="' + r.iframeId + '">';
                                    o = document.createElement(e)
                                } catch (e) {
                                    (o = document.createElement("iframe")).name = r.iframeId,
                                        o.src = "javascript:0"
                                }
                                o.id = r.iframeId,
                                    r.form.appendChild(o),
                                    r.iframe = o
                            }
                            var r = this;
                            if (!this.form) {
                                var o, a = document.createElement("form"), s = document.createElement("textarea"), l = this.iframeId = "eio_iframe_" + this.index;
                                a.className = "socketio",
                                    a.style.position = "absolute",
                                    a.style.top = "-1000px",
                                    a.style.left = "-1000px",
                                    a.target = l,
                                    a.method = "POST",
                                    a.setAttribute("accept-charset", "utf-8"),
                                    s.name = "d",
                                    a.appendChild(s),
                                    document.body.appendChild(a),
                                    this.form = a,
                                    this.area = s
                            }
                            this.form.action = this.uri(),
                                i(),
                                e = e.replace(u, "\\\n"),
                                this.area.value = e.replace(c, "\\n");
                            try {
                                this.form.submit()
                            } catch (e) { }
                            this.iframe.attachEvent ? this.iframe.onreadystatechange = function () {
                                "complete" === r.iframe.readyState && n()
                            }
                                : this.iframe.onload = n
                        }
                }
                ).call(t, function () {
                    return this
                }())
            }
            , function (e, t, n) {
                function i(e) {
                    e && e.forceBase64 && (this.supportsBinary = !1),
                        this.perMessageDeflate = e.perMessageDeflate,
                        this.usingBrowserWebSocket = r && !e.forceNode,
                        this.protocols = e.protocols,
                        this.usingBrowserWebSocket || (p = o),
                        a.call(this, e)
                }
                var r, o, a = n(20), s = n(21), l = n(29), c = n(30), u = n(31), d = n(3)("engine.io-client:websocket");
                if ("undefined" == typeof self)
                    try {
                        o = n(34)
                    } catch (e) { }
                else
                    r = self.WebSocket || self.MozWebSocket;
                var p = r || o;
                e.exports = i,
                    c(i, a),
                    i.prototype.name = "websocket",
                    i.prototype.supportsBinary = !0,
                    i.prototype.doOpen = function () {
                        if (this.check()) {
                            var e = this.uri()
                                , t = this.protocols
                                , n = {
                                    agent: this.agent,
                                    perMessageDeflate: this.perMessageDeflate
                                };
                            n.pfx = this.pfx,
                                n.key = this.key,
                                n.passphrase = this.passphrase,
                                n.cert = this.cert,
                                n.ca = this.ca,
                                n.ciphers = this.ciphers,
                                n.rejectUnauthorized = this.rejectUnauthorized,
                                this.extraHeaders && (n.headers = this.extraHeaders),
                                this.localAddress && (n.localAddress = this.localAddress);
                            try {
                                this.ws = this.usingBrowserWebSocket && !this.isReactNative ? t ? new p(e, t) : new p(e) : new p(e, t, n)
                            } catch (e) {
                                return this.emit("error", e)
                            }
                            void 0 === this.ws.binaryType && (this.supportsBinary = !1),
                                this.ws.supports && this.ws.supports.binary ? (this.supportsBinary = !0,
                                    this.ws.binaryType = "nodebuffer") : this.ws.binaryType = "arraybuffer",
                                this.addEventListeners()
                        }
                    }
                    ,
                    i.prototype.addEventListeners = function () {
                        var e = this;
                        this.ws.onopen = function () {
                            e.onOpen()
                        }
                            ,
                            this.ws.onclose = function () {
                                e.onClose()
                            }
                            ,
                            this.ws.onmessage = function (t) {
                                e.onData(t.data)
                            }
                            ,
                            this.ws.onerror = function (t) {
                                e.onError("websocket error", t)
                            }
                    }
                    ,
                    i.prototype.write = function (e) {
                        var t = this;
                        this.writable = !1;
                        for (var n = e.length, i = 0, r = n; i < r; i++)
                            !function (e) {
                                s.encodePacket(e, t.supportsBinary, function (i) {
                                    if (!t.usingBrowserWebSocket) {
                                        var r = {};
                                        if (e.options && (r.compress = e.options.compress),
                                            t.perMessageDeflate)
                                            ("string" == typeof i ? Buffer.byteLength(i) : i.length) < t.perMessageDeflate.threshold && (r.compress = !1)
                                    }
                                    try {
                                        t.usingBrowserWebSocket ? t.ws.send(i) : t.ws.send(i, r)
                                    } catch (e) {
                                        d("websocket closed before onclose event")
                                    }
                                    --n || (t.emit("flush"),
                                        setTimeout(function () {
                                            t.writable = !0,
                                                t.emit("drain")
                                        }, 0))
                                })
                            }(e[i])
                    }
                    ,
                    i.prototype.onClose = function () {
                        a.prototype.onClose.call(this)
                    }
                    ,
                    i.prototype.doClose = function () {
                        void 0 !== this.ws && this.ws.close()
                    }
                    ,
                    i.prototype.uri = function () {
                        var e = this.query || {}
                            , t = this.secure ? "wss" : "ws"
                            , n = "";
                        return this.port && ("wss" === t && 443 !== Number(this.port) || "ws" === t && 80 !== Number(this.port)) && (n = ":" + this.port),
                            this.timestampRequests && (e[this.timestampParam] = u()),
                            this.supportsBinary || (e.b64 = 1),
                            (e = l.encode(e)).length && (e = "?" + e),
                            t + "://" + (-1 !== this.hostname.indexOf(":") ? "[" + this.hostname + "]" : this.hostname) + n + this.path + e
                    }
                    ,
                    i.prototype.check = function () {
                        return !(!p || "__initialize" in p && this.name === i.prototype.name)
                    }
            }
            , function (e, t) { }
            , function (e, t) {
                var n = [].indexOf;
                e.exports = function (e, t) {
                    if (n)
                        return e.indexOf(t);
                    for (var i = 0; i < e.length; ++i)
                        if (e[i] === t)
                            return i;
                    return -1
                }
            }
            , function (e, t, n) {
                "use strict";
                function i(e, t, n) {
                    this.io = e,
                        this.nsp = t,
                        this.json = this,
                        this.ids = 0,
                        this.acks = {},
                        this.receiveBuffer = [],
                        this.sendBuffer = [],
                        this.connected = !1,
                        this.disconnected = !0,
                        this.flags = {},
                        n && n.query && (this.query = n.query),
                        this.io.autoConnect && this.open()
                }
                var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                    return typeof e
                }
                    : function (e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    , o = n(7)
                    , a = n(8)
                    , s = n(37)
                    , l = n(38)
                    , c = n(39)
                    , u = n(3)("socket.io-client:socket")
                    , d = n(29)
                    , p = n(23);
                e.exports = i;
                var h = {
                    connect: 1,
                    connect_error: 1,
                    connect_timeout: 1,
                    connecting: 1,
                    disconnect: 1,
                    error: 1,
                    reconnect: 1,
                    reconnect_attempt: 1,
                    reconnect_failed: 1,
                    reconnect_error: 1,
                    reconnecting: 1,
                    ping: 1,
                    pong: 1
                }
                    , f = a.prototype.emit;
                a(i.prototype),
                    i.prototype.subEvents = function () {
                        if (!this.subs) {
                            var e = this.io;
                            this.subs = [l(e, "open", c(this, "onopen")), l(e, "packet", c(this, "onpacket")), l(e, "close", c(this, "onclose"))]
                        }
                    }
                    ,
                    i.prototype.open = i.prototype.connect = function () {
                        return this.connected ? this : (this.subEvents(),
                            this.io.open(),
                            "open" === this.io.readyState && this.onopen(),
                            this.emit("connecting"),
                            this)
                    }
                    ,
                    i.prototype.send = function () {
                        var e = s(arguments);
                        return e.unshift("message"),
                            this.emit.apply(this, e),
                            this
                    }
                    ,
                    i.prototype.emit = function (e) {
                        if (h.hasOwnProperty(e))
                            return f.apply(this, arguments),
                                this;
                        var t = s(arguments)
                            , n = {
                                type: (void 0 !== this.flags.binary ? this.flags.binary : p(t)) ? o.BINARY_EVENT : o.EVENT,
                                data: t,
                                options: {}
                            };
                        return n.options.compress = !this.flags || !1 !== this.flags.compress,
                            "function" == typeof t[t.length - 1] && (u("emitting packet with ack id %d", this.ids),
                                this.acks[this.ids] = t.pop(),
                                n.id = this.ids++),
                            this.connected ? this.packet(n) : this.sendBuffer.push(n),
                            this.flags = {},
                            this
                    }
                    ,
                    i.prototype.packet = function (e) {
                        e.nsp = this.nsp,
                            this.io.packet(e)
                    }
                    ,
                    i.prototype.onopen = function () {
                        if (u("transport is open - connecting"),
                            "/" !== this.nsp)
                            if (this.query) {
                                var e = "object" === r(this.query) ? d.encode(this.query) : this.query;
                                u("sending connect packet with query %s", e),
                                    this.packet({
                                        type: o.CONNECT,
                                        query: e
                                    })
                            } else
                                this.packet({
                                    type: o.CONNECT
                                })
                    }
                    ,
                    i.prototype.onclose = function (e) {
                        u("close (%s)", e),
                            this.connected = !1,
                            this.disconnected = !0,
                            delete this.id,
                            this.emit("disconnect", e)
                    }
                    ,
                    i.prototype.onpacket = function (e) {
                        var t = e.nsp === this.nsp
                            , n = e.type === o.ERROR && "/" === e.nsp;
                        if (t || n)
                            switch (e.type) {
                                case o.CONNECT:
                                    this.onconnect();
                                    break;
                                case o.EVENT:
                                case o.BINARY_EVENT:
                                    this.onevent(e);
                                    break;
                                case o.ACK:
                                case o.BINARY_ACK:
                                    this.onack(e);
                                    break;
                                case o.DISCONNECT:
                                    this.ondisconnect();
                                    break;
                                case o.ERROR:
                                    this.emit("error", e.data)
                            }
                    }
                    ,
                    i.prototype.onevent = function (e) {
                        var t = e.data || [];
                        u("emitting event %j", t),
                            null != e.id && (u("attaching ack callback to event"),
                                t.push(this.ack(e.id))),
                            this.connected ? f.apply(this, t) : this.receiveBuffer.push(t)
                    }
                    ,
                    i.prototype.ack = function (e) {
                        var t = this
                            , n = !1;
                        return function () {
                            if (!n) {
                                n = !0;
                                var i = s(arguments);
                                u("sending ack %j", i),
                                    t.packet({
                                        type: p(i) ? o.BINARY_ACK : o.ACK,
                                        id: e,
                                        data: i
                                    })
                            }
                        }
                    }
                    ,
                    i.prototype.onack = function (e) {
                        var t = this.acks[e.id];
                        "function" == typeof t ? (u("calling ack %s with %j", e.id, e.data),
                            t.apply(this, e.data),
                            delete this.acks[e.id]) : u("bad ack %s", e.id)
                    }
                    ,
                    i.prototype.onconnect = function () {
                        this.connected = !0,
                            this.disconnected = !1,
                            this.emit("connect"),
                            this.emitBuffered()
                    }
                    ,
                    i.prototype.emitBuffered = function () {
                        var e;
                        for (e = 0; e < this.receiveBuffer.length; e++)
                            f.apply(this, this.receiveBuffer[e]);
                        for (this.receiveBuffer = [],
                            e = 0; e < this.sendBuffer.length; e++)
                            this.packet(this.sendBuffer[e]);
                        this.sendBuffer = []
                    }
                    ,
                    i.prototype.ondisconnect = function () {
                        u("server disconnect (%s)", this.nsp),
                            this.destroy(),
                            this.onclose("io server disconnect")
                    }
                    ,
                    i.prototype.destroy = function () {
                        if (this.subs) {
                            for (var e = 0; e < this.subs.length; e++)
                                this.subs[e].destroy();
                            this.subs = null
                        }
                        this.io.destroy(this)
                    }
                    ,
                    i.prototype.close = i.prototype.disconnect = function () {
                        return this.connected && (u("performing disconnect (%s)", this.nsp),
                            this.packet({
                                type: o.DISCONNECT
                            })),
                            this.destroy(),
                            this.connected && this.onclose("io client disconnect"),
                            this
                    }
                    ,
                    i.prototype.compress = function (e) {
                        return this.flags.compress = e,
                            this
                    }
                    ,
                    i.prototype.binary = function (e) {
                        return this.flags.binary = e,
                            this
                    }
            }
            , function (e, t) {
                e.exports = function (e, t) {
                    for (var n = [], i = (t = t || 0) || 0; i < e.length; i++)
                        n[i - t] = e[i];
                    return n
                }
            }
            , function (e, t) {
                "use strict";
                e.exports = function (e, t, n) {
                    return e.on(t, n),
                    {
                        destroy: function () {
                            e.removeListener(t, n)
                        }
                    }
                }
            }
            , function (e, t) {
                var n = [].slice;
                e.exports = function (e, t) {
                    if ("string" == typeof t && (t = e[t]),
                        "function" != typeof t)
                        throw new Error("bind() requires a function");
                    var i = n.call(arguments, 2);
                    return function () {
                        return t.apply(e, i.concat(n.call(arguments)))
                    }
                }
            }
            , function (e, t) {
                function n(e) {
                    e = e || {},
                        this.ms = e.min || 100,
                        this.max = e.max || 1e4,
                        this.factor = e.factor || 2,
                        this.jitter = e.jitter > 0 && e.jitter <= 1 ? e.jitter : 0,
                        this.attempts = 0
                }
                e.exports = n,
                    n.prototype.duration = function () {
                        var e = this.ms * Math.pow(this.factor, this.attempts++);
                        if (this.jitter) {
                            var t = Math.random()
                                , n = Math.floor(t * this.jitter * e);
                            e = 0 == (1 & Math.floor(10 * t)) ? e - n : e + n
                        }
                        return 0 | Math.min(e, this.max)
                    }
                    ,
                    n.prototype.reset = function () {
                        this.attempts = 0
                    }
                    ,
                    n.prototype.setMin = function (e) {
                        this.ms = e
                    }
                    ,
                    n.prototype.setMax = function (e) {
                        this.max = e
                    }
                    ,
                    n.prototype.setJitter = function (e) {
                        this.jitter = e
                    }
            }
        ])
    }),
    function (e, t) {
        "use strict";
        "object" == typeof module && "object" == typeof module.exports ? module.exports = e.document ? t(e, !0) : function (e) {
            if (!e.document)
                throw new Error("jQuery requires a window with a document");
            return t(e)
        }
            : t(e)
    }("undefined" != typeof window ? window : this, function (e, t) {
        "use strict";
        var n = []
            , i = e.document
            , r = Object.getPrototypeOf
            , o = n.slice
            , a = n.concat
            , s = n.push
            , l = n.indexOf
            , c = {}
            , u = c.toString
            , d = c.hasOwnProperty
            , p = d.toString
            , h = p.call(Object)
            , f = {};
        function m(e, t) {
            var n = (t = t || i).createElement("script");
            n.text = e,
                t.head.appendChild(n).parentNode.removeChild(n)
        }
        var g = "3.2.1"
            , v = function (e, t) {
                return new v.fn.init(e, t)
            }
            , y = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g
            , b = /^-ms-/
            , w = /-([a-z])/g
            , $ = function (e, t) {
                return t.toUpperCase()
            };
        function S(e) {
            var t = !!e && "length" in e && e.length
                , n = v.type(e);
            return "function" !== n && !v.isWindow(e) && ("array" === n || 0 === t || "number" == typeof t && t > 0 && t - 1 in e)
        }
        v.fn = v.prototype = {
            jquery: g,
            constructor: v,
            length: 0,
            toArray: function () {
                return o.call(this)
            },
            get: function (e) {
                return null == e ? o.call(this) : e < 0 ? this[e + this.length] : this[e]
            },
            pushStack: function (e) {
                var t = v.merge(this.constructor(), e);
                return t.prevObject = this,
                    t
            },
            each: function (e) {
                return v.each(this, e)
            },
            map: function (e) {
                return this.pushStack(v.map(this, function (t, n) {
                    return e.call(t, n, t)
                }))
            },
            slice: function () {
                return this.pushStack(o.apply(this, arguments))
            },
            first: function () {
                return this.eq(0)
            },
            last: function () {
                return this.eq(-1)
            },
            eq: function (e) {
                var t = this.length
                    , n = +e + (e < 0 ? t : 0);
                return this.pushStack(n >= 0 && n < t ? [this[n]] : [])
            },
            end: function () {
                return this.prevObject || this.constructor()
            },
            push: s,
            sort: n.sort,
            splice: n.splice
        },
            v.extend = v.fn.extend = function () {
                var e, t, n, i, r, o, a = arguments[0] || {}, s = 1, l = arguments.length, c = !1;
                for ("boolean" == typeof a && (c = a,
                    a = arguments[s] || {},
                    s++),
                    "object" == typeof a || v.isFunction(a) || (a = {}),
                    s === l && (a = this,
                        s--); s < l; s++)
                    if (null != (e = arguments[s]))
                        for (t in e)
                            n = a[t],
                                a !== (i = e[t]) && (c && i && (v.isPlainObject(i) || (r = Array.isArray(i))) ? (r ? (r = !1,
                                    o = n && Array.isArray(n) ? n : []) : o = n && v.isPlainObject(n) ? n : {},
                                    a[t] = v.extend(c, o, i)) : void 0 !== i && (a[t] = i));
                return a
            }
            ,
            v.extend({
                expando: "jQuery" + (g + Math.random()).replace(/\D/g, ""),
                isReady: !0,
                error: function (e) {
                    throw new Error(e)
                },
                noop: function () { },
                isFunction: function (e) {
                    return "function" === v.type(e)
                },
                isWindow: function (e) {
                    return null != e && e === e.window
                },
                isNumeric: function (e) {
                    var t = v.type(e);
                    return ("number" === t || "string" === t) && !isNaN(e - parseFloat(e))
                },
                isPlainObject: function (e) {
                    var t, n;
                    return !(!e || "[object Object]" !== u.call(e) || (t = r(e)) && (n = d.call(t, "constructor") && t.constructor,
                        "function" != typeof n || p.call(n) !== h))
                },
                isEmptyObject: function (e) {
                    var t;
                    for (t in e)
                        return !1;
                    return !0
                },
                type: function (e) {
                    return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? c[u.call(e)] || "object" : typeof e
                },
                globalEval: function (e) {
                    m(e)
                },
                camelCase: function (e) {
                    return e.replace(b, "ms-").replace(w, $)
                },
                each: function (e, t) {
                    var n, i = 0;
                    if (S(e))
                        for (n = e.length; i < n && !1 !== t.call(e[i], i, e[i]); i++)
                            ;
                    else
                        for (i in e)
                            if (!1 === t.call(e[i], i, e[i]))
                                break;
                    return e
                },
                trim: function (e) {
                    return null == e ? "" : (e + "").replace(y, "")
                },
                makeArray: function (e, t) {
                    var n = t || [];
                    return null != e && (S(Object(e)) ? v.merge(n, "string" == typeof e ? [e] : e) : s.call(n, e)),
                        n
                },
                inArray: function (e, t, n) {
                    return null == t ? -1 : l.call(t, e, n)
                },
                merge: function (e, t) {
                    for (var n = +t.length, i = 0, r = e.length; i < n; i++)
                        e[r++] = t[i];
                    return e.length = r,
                        e
                },
                grep: function (e, t, n) {
                    for (var i = [], r = 0, o = e.length, a = !n; r < o; r++)
                        !t(e[r], r) !== a && i.push(e[r]);
                    return i
                },
                map: function (e, t, n) {
                    var i, r, o = 0, s = [];
                    if (S(e))
                        for (i = e.length; o < i; o++)
                            null != (r = t(e[o], o, n)) && s.push(r);
                    else
                        for (o in e)
                            null != (r = t(e[o], o, n)) && s.push(r);
                    return a.apply([], s)
                },
                guid: 1,
                proxy: function (e, t) {
                    var n, i, r;
                    if ("string" == typeof t && (n = e[t],
                        t = e,
                        e = n),
                        v.isFunction(e))
                        return i = o.call(arguments, 2),
                            (r = function () {
                                return e.apply(t || this, i.concat(o.call(arguments)))
                            }
                            ).guid = e.guid = e.guid || v.guid++,
                            r
                },
                now: Date.now,
                support: f
            }),
            "function" == typeof Symbol && (v.fn[Symbol.iterator] = n[Symbol.iterator]),
            v.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), function (e, t) {
                c["[object " + t + "]"] = t.toLowerCase()
            });
        var C = function (e) {
            var t, n, i, r, o, a, s, l, c, u, d, p, h, f, m, g, v, y, b, w = "sizzle" + 1 * new Date, $ = e.document, S = 0, C = 0, x = ae(), T = ae(), k = ae(), P = function (e, t) {
                return e === t && (d = !0),
                    0
            }, E = {}.hasOwnProperty, I = [], M = I.pop, O = I.push, D = I.push, A = I.slice, _ = function (e, t) {
                for (var n = 0, i = e.length; n < i; n++)
                    if (e[n] === t)
                        return n;
                return -1
            }, R = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", L = "[\\x20\\t\\r\\n\\f]", U = "(?:\\\\.|[\\w-]|[^\0-\\xa0])+", N = "\\[" + L + "*(" + U + ")(?:" + L + "*([*^$|!~]?=)" + L + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + U + "))|)" + L + "*\\]", j = ":(" + U + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + N + ")*)|.*)\\)|)", F = new RegExp(L + "+", "g"), B = new RegExp("^" + L + "+|((?:^|[^\\\\])(?:\\\\.)*)" + L + "+$", "g"), V = new RegExp("^" + L + "*," + L + "*"), z = new RegExp("^" + L + "*([>+~]|" + L + ")" + L + "*"), H = new RegExp("=" + L + "*([^\\]'\"]*?)" + L + "*\\]", "g"), W = new RegExp(j), q = new RegExp("^" + U + "$"), G = {
                ID: new RegExp("^#(" + U + ")"),
                CLASS: new RegExp("^\\.(" + U + ")"),
                TAG: new RegExp("^(" + U + "|[*])"),
                ATTR: new RegExp("^" + N),
                PSEUDO: new RegExp("^" + j),
                CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + L + "*(even|odd|(([+-]|)(\\d*)n|)" + L + "*(?:([+-]|)" + L + "*(\\d+)|))" + L + "*\\)|)", "i"),
                bool: new RegExp("^(?:" + R + ")$", "i"),
                needsContext: new RegExp("^" + L + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + L + "*((?:-\\d)?\\d*)" + L + "*\\)|)(?=[^-]|$)", "i")
            }, Y = /^(?:input|select|textarea|button)$/i, X = /^h\d$/i, J = /^[^{]+\{\s*\[native \w/, K = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, Q = /[+~]/, Z = new RegExp("\\\\([\\da-f]{1,6}" + L + "?|(" + L + ")|.)", "ig"), ee = function (e, t, n) {
                var i = "0x" + t - 65536;
                return i != i || n ? t : i < 0 ? String.fromCharCode(i + 65536) : String.fromCharCode(i >> 10 | 55296, 1023 & i | 56320)
            }, te = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g, ne = function (e, t) {
                return t ? "\0" === e ? "�" : e.slice(0, -1) + "\\" + e.charCodeAt(e.length - 1).toString(16) + " " : "\\" + e
            }, ie = function () {
                p()
            }, re = ye(function (e) {
                return !0 === e.disabled && ("form" in e || "label" in e)
            }, {
                dir: "parentNode",
                next: "legend"
            });
            try {
                D.apply(I = A.call($.childNodes), $.childNodes),
                    I[$.childNodes.length].nodeType
            } catch (e) {
                D = {
                    apply: I.length ? function (e, t) {
                        O.apply(e, A.call(t))
                    }
                        : function (e, t) {
                            for (var n = e.length, i = 0; e[n++] = t[i++];)
                                ;
                            e.length = n - 1
                        }
                }
            }
            function oe(e, t, i, r) {
                var o, s, c, u, d, f, v, y = t && t.ownerDocument, S = t ? t.nodeType : 9;
                if (i = i || [],
                    "string" != typeof e || !e || 1 !== S && 9 !== S && 11 !== S)
                    return i;
                if (!r && ((t ? t.ownerDocument || t : $) !== h && p(t),
                    t = t || h,
                    m)) {
                    if (11 !== S && (d = K.exec(e)))
                        if (o = d[1]) {
                            if (9 === S) {
                                if (!(c = t.getElementById(o)))
                                    return i;
                                if (c.id === o)
                                    return i.push(c),
                                        i
                            } else if (y && (c = y.getElementById(o)) && b(t, c) && c.id === o)
                                return i.push(c),
                                    i
                        } else {
                            if (d[2])
                                return D.apply(i, t.getElementsByTagName(e)),
                                    i;
                            if ((o = d[3]) && n.getElementsByClassName && t.getElementsByClassName)
                                return D.apply(i, t.getElementsByClassName(o)),
                                    i
                        }
                    if (n.qsa && !k[e + " "] && (!g || !g.test(e))) {
                        if (1 !== S)
                            y = t,
                                v = e;
                        else if ("object" !== t.nodeName.toLowerCase()) {
                            for ((u = t.getAttribute("id")) ? u = u.replace(te, ne) : t.setAttribute("id", u = w),
                                s = (f = a(e)).length; s--;)
                                f[s] = "#" + u + " " + ve(f[s]);
                            v = f.join(","),
                                y = Q.test(e) && me(t.parentNode) || t
                        }
                        if (v)
                            try {
                                return D.apply(i, y.querySelectorAll(v)),
                                    i
                            } catch (e) { } finally {
                                u === w && t.removeAttribute("id")
                            }
                    }
                }
                return l(e.replace(B, "$1"), t, i, r)
            }
            function ae() {
                var e = [];
                return function t(n, r) {
                    return e.push(n + " ") > i.cacheLength && delete t[e.shift()],
                        t[n + " "] = r
                }
            }
            function se(e) {
                return e[w] = !0,
                    e
            }
            function le(e) {
                var t = h.createElement("fieldset");
                try {
                    return !!e(t)
                } catch (e) {
                    return !1
                } finally {
                    t.parentNode && t.parentNode.removeChild(t),
                        t = null
                }
            }
            function ce(e, t) {
                for (var n = e.split("|"), r = n.length; r--;)
                    i.attrHandle[n[r]] = t
            }
            function ue(e, t) {
                var n = t && e
                    , i = n && 1 === e.nodeType && 1 === t.nodeType && e.sourceIndex - t.sourceIndex;
                if (i)
                    return i;
                if (n)
                    for (; n = n.nextSibling;)
                        if (n === t)
                            return -1;
                return e ? 1 : -1
            }
            function de(e) {
                return function (t) {
                    return "input" === t.nodeName.toLowerCase() && t.type === e
                }
            }
            function pe(e) {
                return function (t) {
                    var n = t.nodeName.toLowerCase();
                    return ("input" === n || "button" === n) && t.type === e
                }
            }
            function he(e) {
                return function (t) {
                    return "form" in t ? t.parentNode && !1 === t.disabled ? "label" in t ? "label" in t.parentNode ? t.parentNode.disabled === e : t.disabled === e : t.isDisabled === e || t.isDisabled !== !e && re(t) === e : t.disabled === e : "label" in t && t.disabled === e
                }
            }
            function fe(e) {
                return se(function (t) {
                    return t = +t,
                        se(function (n, i) {
                            for (var r, o = e([], n.length, t), a = o.length; a--;)
                                n[r = o[a]] && (n[r] = !(i[r] = n[r]))
                        })
                })
            }
            function me(e) {
                return e && void 0 !== e.getElementsByTagName && e
            }
            for (t in n = oe.support = {},
                o = oe.isXML = function (e) {
                    var t = e && (e.ownerDocument || e).documentElement;
                    return !!t && "HTML" !== t.nodeName
                }
                ,
                p = oe.setDocument = function (e) {
                    var t, r, a = e ? e.ownerDocument || e : $;
                    return a !== h && 9 === a.nodeType && a.documentElement ? (f = (h = a).documentElement,
                        m = !o(h),
                        $ !== h && (r = h.defaultView) && r.top !== r && (r.addEventListener ? r.addEventListener("unload", ie, !1) : r.attachEvent && r.attachEvent("onunload", ie)),
                        n.attributes = le(function (e) {
                            return e.className = "i",
                                !e.getAttribute("className")
                        }),
                        n.getElementsByTagName = le(function (e) {
                            return e.appendChild(h.createComment("")),
                                !e.getElementsByTagName("*").length
                        }),
                        n.getElementsByClassName = J.test(h.getElementsByClassName),
                        n.getById = le(function (e) {
                            return f.appendChild(e).id = w,
                                !h.getElementsByName || !h.getElementsByName(w).length
                        }),
                        n.getById ? (i.filter.ID = function (e) {
                            var t = e.replace(Z, ee);
                            return function (e) {
                                return e.getAttribute("id") === t
                            }
                        }
                            ,
                            i.find.ID = function (e, t) {
                                if (void 0 !== t.getElementById && m) {
                                    var n = t.getElementById(e);
                                    return n ? [n] : []
                                }
                            }
                        ) : (i.filter.ID = function (e) {
                            var t = e.replace(Z, ee);
                            return function (e) {
                                var n = void 0 !== e.getAttributeNode && e.getAttributeNode("id");
                                return n && n.value === t
                            }
                        }
                            ,
                            i.find.ID = function (e, t) {
                                if (void 0 !== t.getElementById && m) {
                                    var n, i, r, o = t.getElementById(e);
                                    if (o) {
                                        if ((n = o.getAttributeNode("id")) && n.value === e)
                                            return [o];
                                        for (r = t.getElementsByName(e),
                                            i = 0; o = r[i++];)
                                            if ((n = o.getAttributeNode("id")) && n.value === e)
                                                return [o]
                                    }
                                    return []
                                }
                            }
                            ),
                        i.find.TAG = n.getElementsByTagName ? function (e, t) {
                            return void 0 !== t.getElementsByTagName ? t.getElementsByTagName(e) : n.qsa ? t.querySelectorAll(e) : void 0
                        }
                            : function (e, t) {
                                var n, i = [], r = 0, o = t.getElementsByTagName(e);
                                if ("*" === e) {
                                    for (; n = o[r++];)
                                        1 === n.nodeType && i.push(n);
                                    return i
                                }
                                return o
                            }
                        ,
                        i.find.CLASS = n.getElementsByClassName && function (e, t) {
                            if (void 0 !== t.getElementsByClassName && m)
                                return t.getElementsByClassName(e)
                        }
                        ,
                        v = [],
                        g = [],
                        (n.qsa = J.test(h.querySelectorAll)) && (le(function (e) {
                            f.appendChild(e).innerHTML = "<a id='" + w + "'></a><select id='" + w + "-\r\\' msallowcapture=''><option selected=''></option></select>",
                                e.querySelectorAll("[msallowcapture^='']").length && g.push("[*^$]=" + L + "*(?:''|\"\")"),
                                e.querySelectorAll("[selected]").length || g.push("\\[" + L + "*(?:value|" + R + ")"),
                                e.querySelectorAll("[id~=" + w + "-]").length || g.push("~="),
                                e.querySelectorAll(":checked").length || g.push(":checked"),
                                e.querySelectorAll("a#" + w + "+*").length || g.push(".#.+[+~]")
                        }),
                            le(function (e) {
                                e.innerHTML = "<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";
                                var t = h.createElement("input");
                                t.setAttribute("type", "hidden"),
                                    e.appendChild(t).setAttribute("name", "D"),
                                    e.querySelectorAll("[name=d]").length && g.push("name" + L + "*[*^$|!~]?="),
                                    2 !== e.querySelectorAll(":enabled").length && g.push(":enabled", ":disabled"),
                                    f.appendChild(e).disabled = !0,
                                    2 !== e.querySelectorAll(":disabled").length && g.push(":enabled", ":disabled"),
                                    e.querySelectorAll("*,:x"),
                                    g.push(",.*:")
                            })),
                        (n.matchesSelector = J.test(y = f.matches || f.webkitMatchesSelector || f.mozMatchesSelector || f.oMatchesSelector || f.msMatchesSelector)) && le(function (e) {
                            n.disconnectedMatch = y.call(e, "*"),
                                y.call(e, "[s!='']:x"),
                                v.push("!=", j)
                        }),
                        g = g.length && new RegExp(g.join("|")),
                        v = v.length && new RegExp(v.join("|")),
                        t = J.test(f.compareDocumentPosition),
                        b = t || J.test(f.contains) ? function (e, t) {
                            var n = 9 === e.nodeType ? e.documentElement : e
                                , i = t && t.parentNode;
                            return e === i || !(!i || 1 !== i.nodeType || !(n.contains ? n.contains(i) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(i)))
                        }
                            : function (e, t) {
                                if (t)
                                    for (; t = t.parentNode;)
                                        if (t === e)
                                            return !0;
                                return !1
                            }
                        ,
                        P = t ? function (e, t) {
                            if (e === t)
                                return d = !0,
                                    0;
                            var i = !e.compareDocumentPosition - !t.compareDocumentPosition;
                            return i || (1 & (i = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1) || !n.sortDetached && t.compareDocumentPosition(e) === i ? e === h || e.ownerDocument === $ && b($, e) ? -1 : t === h || t.ownerDocument === $ && b($, t) ? 1 : u ? _(u, e) - _(u, t) : 0 : 4 & i ? -1 : 1)
                        }
                            : function (e, t) {
                                if (e === t)
                                    return d = !0,
                                        0;
                                var n, i = 0, r = e.parentNode, o = t.parentNode, a = [e], s = [t];
                                if (!r || !o)
                                    return e === h ? -1 : t === h ? 1 : r ? -1 : o ? 1 : u ? _(u, e) - _(u, t) : 0;
                                if (r === o)
                                    return ue(e, t);
                                for (n = e; n = n.parentNode;)
                                    a.unshift(n);
                                for (n = t; n = n.parentNode;)
                                    s.unshift(n);
                                for (; a[i] === s[i];)
                                    i++;
                                return i ? ue(a[i], s[i]) : a[i] === $ ? -1 : s[i] === $ ? 1 : 0
                            }
                        ,
                        h) : h
                }
                ,
                oe.matches = function (e, t) {
                    return oe(e, null, null, t)
                }
                ,
                oe.matchesSelector = function (e, t) {
                    if ((e.ownerDocument || e) !== h && p(e),
                        t = t.replace(H, "='$1']"),
                        n.matchesSelector && m && !k[t + " "] && (!v || !v.test(t)) && (!g || !g.test(t)))
                        try {
                            var i = y.call(e, t);
                            if (i || n.disconnectedMatch || e.document && 11 !== e.document.nodeType)
                                return i
                        } catch (e) { }
                    return oe(t, h, null, [e]).length > 0
                }
                ,
                oe.contains = function (e, t) {
                    return (e.ownerDocument || e) !== h && p(e),
                        b(e, t)
                }
                ,
                oe.attr = function (e, t) {
                    (e.ownerDocument || e) !== h && p(e);
                    var r = i.attrHandle[t.toLowerCase()]
                        , o = r && E.call(i.attrHandle, t.toLowerCase()) ? r(e, t, !m) : void 0;
                    return void 0 !== o ? o : n.attributes || !m ? e.getAttribute(t) : (o = e.getAttributeNode(t)) && o.specified ? o.value : null
                }
                ,
                oe.escape = function (e) {
                    return (e + "").replace(te, ne)
                }
                ,
                oe.error = function (e) {
                    throw new Error("Syntax error, unrecognized expression: " + e)
                }
                ,
                oe.uniqueSort = function (e) {
                    var t, i = [], r = 0, o = 0;
                    if (d = !n.detectDuplicates,
                        u = !n.sortStable && e.slice(0),
                        e.sort(P),
                        d) {
                        for (; t = e[o++];)
                            t === e[o] && (r = i.push(o));
                        for (; r--;)
                            e.splice(i[r], 1)
                    }
                    return u = null,
                        e
                }
                ,
                r = oe.getText = function (e) {
                    var t, n = "", i = 0, o = e.nodeType;
                    if (o) {
                        if (1 === o || 9 === o || 11 === o) {
                            if ("string" == typeof e.textContent)
                                return e.textContent;
                            for (e = e.firstChild; e; e = e.nextSibling)
                                n += r(e)
                        } else if (3 === o || 4 === o)
                            return e.nodeValue
                    } else
                        for (; t = e[i++];)
                            n += r(t);
                    return n
                }
                ,
                (i = oe.selectors = {
                    cacheLength: 50,
                    createPseudo: se,
                    match: G,
                    attrHandle: {},
                    find: {},
                    relative: {
                        ">": {
                            dir: "parentNode",
                            first: !0
                        },
                        " ": {
                            dir: "parentNode"
                        },
                        "+": {
                            dir: "previousSibling",
                            first: !0
                        },
                        "~": {
                            dir: "previousSibling"
                        }
                    },
                    preFilter: {
                        ATTR: function (e) {
                            return e[1] = e[1].replace(Z, ee),
                                e[3] = (e[3] || e[4] || e[5] || "").replace(Z, ee),
                                "~=" === e[2] && (e[3] = " " + e[3] + " "),
                                e.slice(0, 4)
                        },
                        CHILD: function (e) {
                            return e[1] = e[1].toLowerCase(),
                                "nth" === e[1].slice(0, 3) ? (e[3] || oe.error(e[0]),
                                    e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])),
                                    e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && oe.error(e[0]),
                                e
                        },
                        PSEUDO: function (e) {
                            var t, n = !e[6] && e[2];
                            return G.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : n && W.test(n) && (t = a(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t),
                                e[2] = n.slice(0, t)),
                                e.slice(0, 3))
                        }
                    },
                    filter: {
                        TAG: function (e) {
                            var t = e.replace(Z, ee).toLowerCase();
                            return "*" === e ? function () {
                                return !0
                            }
                                : function (e) {
                                    return e.nodeName && e.nodeName.toLowerCase() === t
                                }
                        },
                        CLASS: function (e) {
                            var t = x[e + " "];
                            return t || (t = new RegExp("(^|" + L + ")" + e + "(" + L + "|$)")) && x(e, function (e) {
                                return t.test("string" == typeof e.className && e.className || void 0 !== e.getAttribute && e.getAttribute("class") || "")
                            })
                        },
                        ATTR: function (e, t, n) {
                            return function (i) {
                                var r = oe.attr(i, e);
                                return null == r ? "!=" === t : !t || (r += "",
                                    "=" === t ? r === n : "!=" === t ? r !== n : "^=" === t ? n && 0 === r.indexOf(n) : "*=" === t ? n && r.indexOf(n) > -1 : "$=" === t ? n && r.slice(-n.length) === n : "~=" === t ? (" " + r.replace(F, " ") + " ").indexOf(n) > -1 : "|=" === t && (r === n || r.slice(0, n.length + 1) === n + "-"))
                            }
                        },
                        CHILD: function (e, t, n, i, r) {
                            var o = "nth" !== e.slice(0, 3)
                                , a = "last" !== e.slice(-4)
                                , s = "of-type" === t;
                            return 1 === i && 0 === r ? function (e) {
                                return !!e.parentNode
                            }
                                : function (t, n, l) {
                                    var c, u, d, p, h, f, m = o !== a ? "nextSibling" : "previousSibling", g = t.parentNode, v = s && t.nodeName.toLowerCase(), y = !l && !s, b = !1;
                                    if (g) {
                                        if (o) {
                                            for (; m;) {
                                                for (p = t; p = p[m];)
                                                    if (s ? p.nodeName.toLowerCase() === v : 1 === p.nodeType)
                                                        return !1;
                                                f = m = "only" === e && !f && "nextSibling"
                                            }
                                            return !0
                                        }
                                        if (f = [a ? g.firstChild : g.lastChild],
                                            a && y) {
                                            for (b = (h = (c = (u = (d = (p = g)[w] || (p[w] = {}))[p.uniqueID] || (d[p.uniqueID] = {}))[e] || [])[0] === S && c[1]) && c[2],
                                                p = h && g.childNodes[h]; p = ++h && p && p[m] || (b = h = 0) || f.pop();)
                                                if (1 === p.nodeType && ++b && p === t) {
                                                    u[e] = [S, h, b];
                                                    break
                                                }
                                        } else if (y && (b = h = (c = (u = (d = (p = t)[w] || (p[w] = {}))[p.uniqueID] || (d[p.uniqueID] = {}))[e] || [])[0] === S && c[1]),
                                            !1 === b)
                                            for (; (p = ++h && p && p[m] || (b = h = 0) || f.pop()) && ((s ? p.nodeName.toLowerCase() !== v : 1 !== p.nodeType) || !++b || (y && ((u = (d = p[w] || (p[w] = {}))[p.uniqueID] || (d[p.uniqueID] = {}))[e] = [S, b]),
                                                p !== t));)
                                                ;
                                        return (b -= r) === i || b % i == 0 && b / i >= 0
                                    }
                                }
                        },
                        PSEUDO: function (e, t) {
                            var n, r = i.pseudos[e] || i.setFilters[e.toLowerCase()] || oe.error("unsupported pseudo: " + e);
                            return r[w] ? r(t) : r.length > 1 ? (n = [e, e, "", t],
                                i.setFilters.hasOwnProperty(e.toLowerCase()) ? se(function (e, n) {
                                    for (var i, o = r(e, t), a = o.length; a--;)
                                        e[i = _(e, o[a])] = !(n[i] = o[a])
                                }) : function (e) {
                                    return r(e, 0, n)
                                }
                            ) : r
                        }
                    },
                    pseudos: {
                        not: se(function (e) {
                            var t = []
                                , n = []
                                , i = s(e.replace(B, "$1"));
                            return i[w] ? se(function (e, t, n, r) {
                                for (var o, a = i(e, null, r, []), s = e.length; s--;)
                                    (o = a[s]) && (e[s] = !(t[s] = o))
                            }) : function (e, r, o) {
                                return t[0] = e,
                                    i(t, null, o, n),
                                    t[0] = null,
                                    !n.pop()
                            }
                        }),
                        has: se(function (e) {
                            return function (t) {
                                return oe(e, t).length > 0
                            }
                        }),
                        contains: se(function (e) {
                            return e = e.replace(Z, ee),
                                function (t) {
                                    return (t.textContent || t.innerText || r(t)).indexOf(e) > -1
                                }
                        }),
                        lang: se(function (e) {
                            return q.test(e || "") || oe.error("unsupported lang: " + e),
                                e = e.replace(Z, ee).toLowerCase(),
                                function (t) {
                                    var n;
                                    do {
                                        if (n = m ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang"))
                                            return (n = n.toLowerCase()) === e || 0 === n.indexOf(e + "-")
                                    } while ((t = t.parentNode) && 1 === t.nodeType); return !1
                                }
                        }),
                        target: function (t) {
                            var n = e.location && e.location.hash;
                            return n && n.slice(1) === t.id
                        },
                        root: function (e) {
                            return e === f
                        },
                        focus: function (e) {
                            return e === h.activeElement && (!h.hasFocus || h.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                        },
                        enabled: he(!1),
                        disabled: he(!0),
                        checked: function (e) {
                            var t = e.nodeName.toLowerCase();
                            return "input" === t && !!e.checked || "option" === t && !!e.selected
                        },
                        selected: function (e) {
                            return e.parentNode && e.parentNode.selectedIndex,
                                !0 === e.selected
                        },
                        empty: function (e) {
                            for (e = e.firstChild; e; e = e.nextSibling)
                                if (e.nodeType < 6)
                                    return !1;
                            return !0
                        },
                        parent: function (e) {
                            return !i.pseudos.empty(e)
                        },
                        header: function (e) {
                            return X.test(e.nodeName)
                        },
                        input: function (e) {
                            return Y.test(e.nodeName)
                        },
                        button: function (e) {
                            var t = e.nodeName.toLowerCase();
                            return "input" === t && "button" === e.type || "button" === t
                        },
                        text: function (e) {
                            var t;
                            return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase())
                        },
                        first: fe(function () {
                            return [0]
                        }),
                        last: fe(function (e, t) {
                            return [t - 1]
                        }),
                        eq: fe(function (e, t, n) {
                            return [n < 0 ? n + t : n]
                        }),
                        even: fe(function (e, t) {
                            for (var n = 0; n < t; n += 2)
                                e.push(n);
                            return e
                        }),
                        odd: fe(function (e, t) {
                            for (var n = 1; n < t; n += 2)
                                e.push(n);
                            return e
                        }),
                        lt: fe(function (e, t, n) {
                            for (var i = n < 0 ? n + t : n; --i >= 0;)
                                e.push(i);
                            return e
                        }),
                        gt: fe(function (e, t, n) {
                            for (var i = n < 0 ? n + t : n; ++i < t;)
                                e.push(i);
                            return e
                        })
                    }
                }).pseudos.nth = i.pseudos.eq,
            {
                radio: !0,
                checkbox: !0,
                file: !0,
                password: !0,
                image: !0
            })
                i.pseudos[t] = de(t);
            for (t in {
                submit: !0,
                reset: !0
            })
                i.pseudos[t] = pe(t);
            function ge() { }
            function ve(e) {
                for (var t = 0, n = e.length, i = ""; t < n; t++)
                    i += e[t].value;
                return i
            }
            function ye(e, t, n) {
                var i = t.dir
                    , r = t.next
                    , o = r || i
                    , a = n && "parentNode" === o
                    , s = C++;
                return t.first ? function (t, n, r) {
                    for (; t = t[i];)
                        if (1 === t.nodeType || a)
                            return e(t, n, r);
                    return !1
                }
                    : function (t, n, l) {
                        var c, u, d, p = [S, s];
                        if (l) {
                            for (; t = t[i];)
                                if ((1 === t.nodeType || a) && e(t, n, l))
                                    return !0
                        } else
                            for (; t = t[i];)
                                if (1 === t.nodeType || a)
                                    if (u = (d = t[w] || (t[w] = {}))[t.uniqueID] || (d[t.uniqueID] = {}),
                                        r && r === t.nodeName.toLowerCase())
                                        t = t[i] || t;
                                    else {
                                        if ((c = u[o]) && c[0] === S && c[1] === s)
                                            return p[2] = c[2];
                                        if (u[o] = p,
                                            p[2] = e(t, n, l))
                                            return !0
                                    }
                        return !1
                    }
            }
            function be(e) {
                return e.length > 1 ? function (t, n, i) {
                    for (var r = e.length; r--;)
                        if (!e[r](t, n, i))
                            return !1;
                    return !0
                }
                    : e[0]
            }
            function we(e, t, n, i, r) {
                for (var o, a = [], s = 0, l = e.length, c = null != t; s < l; s++)
                    (o = e[s]) && (n && !n(o, i, r) || (a.push(o),
                        c && t.push(s)));
                return a
            }
            function $e(e, t, n, i, r, o) {
                return i && !i[w] && (i = $e(i)),
                    r && !r[w] && (r = $e(r, o)),
                    se(function (o, a, s, l) {
                        var c, u, d, p = [], h = [], f = a.length, m = o || function (e, t, n) {
                            for (var i = 0, r = t.length; i < r; i++)
                                oe(e, t[i], n);
                            return n
                        }(t || "*", s.nodeType ? [s] : s, []), g = !e || !o && t ? m : we(m, p, e, s, l), v = n ? r || (o ? e : f || i) ? [] : a : g;
                        if (n && n(g, v, s, l),
                            i)
                            for (c = we(v, h),
                                i(c, [], s, l),
                                u = c.length; u--;)
                                (d = c[u]) && (v[h[u]] = !(g[h[u]] = d));
                        if (o) {
                            if (r || e) {
                                if (r) {
                                    for (c = [],
                                        u = v.length; u--;)
                                        (d = v[u]) && c.push(g[u] = d);
                                    r(null, v = [], c, l)
                                }
                                for (u = v.length; u--;)
                                    (d = v[u]) && (c = r ? _(o, d) : p[u]) > -1 && (o[c] = !(a[c] = d))
                            }
                        } else
                            v = we(v === a ? v.splice(f, v.length) : v),
                                r ? r(null, a, v, l) : D.apply(a, v)
                    })
            }
            function Se(e) {
                for (var t, n, r, o = e.length, a = i.relative[e[0].type], s = a || i.relative[" "], l = a ? 1 : 0, u = ye(function (e) {
                    return e === t
                }, s, !0), d = ye(function (e) {
                    return _(t, e) > -1
                }, s, !0), p = [function (e, n, i) {
                    var r = !a && (i || n !== c) || ((t = n).nodeType ? u(e, n, i) : d(e, n, i));
                    return t = null,
                        r
                }
                ]; l < o; l++)
                    if (n = i.relative[e[l].type])
                        p = [ye(be(p), n)];
                    else {
                        if ((n = i.filter[e[l].type].apply(null, e[l].matches))[w]) {
                            for (r = ++l; r < o && !i.relative[e[r].type]; r++)
                                ;
                            return $e(l > 1 && be(p), l > 1 && ve(e.slice(0, l - 1).concat({
                                value: " " === e[l - 2].type ? "*" : ""
                            })).replace(B, "$1"), n, l < r && Se(e.slice(l, r)), r < o && Se(e = e.slice(r)), r < o && ve(e))
                        }
                        p.push(n)
                    }
                return be(p)
            }
            function Ce(e, t) {
                var n = t.length > 0
                    , r = e.length > 0
                    , o = function (o, a, s, l, u) {
                        var d, f, g, v = 0, y = "0", b = o && [], w = [], $ = c, C = o || r && i.find.TAG("*", u), x = S += null == $ ? 1 : Math.random() || .1, T = C.length;
                        for (u && (c = a === h || a || u); y !== T && null != (d = C[y]); y++) {
                            if (r && d) {
                                for (f = 0,
                                    a || d.ownerDocument === h || (p(d),
                                        s = !m); g = e[f++];)
                                    if (g(d, a || h, s)) {
                                        l.push(d);
                                        break
                                    }
                                u && (S = x)
                            }
                            n && ((d = !g && d) && v--,
                                o && b.push(d))
                        }
                        if (v += y,
                            n && y !== v) {
                            for (f = 0; g = t[f++];)
                                g(b, w, a, s);
                            if (o) {
                                if (v > 0)
                                    for (; y--;)
                                        b[y] || w[y] || (w[y] = M.call(l));
                                w = we(w)
                            }
                            D.apply(l, w),
                                u && !o && w.length > 0 && v + t.length > 1 && oe.uniqueSort(l)
                        }
                        return u && (S = x,
                            c = $),
                            b
                    };
                return n ? se(o) : o
            }
            return ge.prototype = i.filters = i.pseudos,
                i.setFilters = new ge,
                a = oe.tokenize = function (e, t) {
                    var n, r, o, a, s, l, c, u = T[e + " "];
                    if (u)
                        return t ? 0 : u.slice(0);
                    for (s = e,
                        l = [],
                        c = i.preFilter; s;) {
                        for (a in n && !(r = V.exec(s)) || (r && (s = s.slice(r[0].length) || s),
                            l.push(o = [])),
                            n = !1,
                            (r = z.exec(s)) && (n = r.shift(),
                                o.push({
                                    value: n,
                                    type: r[0].replace(B, " ")
                                }),
                                s = s.slice(n.length)),
                            i.filter)
                            !(r = G[a].exec(s)) || c[a] && !(r = c[a](r)) || (n = r.shift(),
                                o.push({
                                    value: n,
                                    type: a,
                                    matches: r
                                }),
                                s = s.slice(n.length));
                        if (!n)
                            break
                    }
                    return t ? s.length : s ? oe.error(e) : T(e, l).slice(0)
                }
                ,
                s = oe.compile = function (e, t) {
                    var n, i = [], r = [], o = k[e + " "];
                    if (!o) {
                        for (t || (t = a(e)),
                            n = t.length; n--;)
                            (o = Se(t[n]))[w] ? i.push(o) : r.push(o);
                        (o = k(e, Ce(r, i))).selector = e
                    }
                    return o
                }
                ,
                l = oe.select = function (e, t, n, r) {
                    var o, l, c, u, d, p = "function" == typeof e && e, h = !r && a(e = p.selector || e);
                    if (n = n || [],
                        1 === h.length) {
                        if ((l = h[0] = h[0].slice(0)).length > 2 && "ID" === (c = l[0]).type && 9 === t.nodeType && m && i.relative[l[1].type]) {
                            if (!(t = (i.find.ID(c.matches[0].replace(Z, ee), t) || [])[0]))
                                return n;
                            p && (t = t.parentNode),
                                e = e.slice(l.shift().value.length)
                        }
                        for (o = G.needsContext.test(e) ? 0 : l.length; o-- && (c = l[o],
                            !i.relative[u = c.type]);)
                            if ((d = i.find[u]) && (r = d(c.matches[0].replace(Z, ee), Q.test(l[0].type) && me(t.parentNode) || t))) {
                                if (l.splice(o, 1),
                                    !(e = r.length && ve(l)))
                                    return D.apply(n, r),
                                        n;
                                break
                            }
                    }
                    return (p || s(e, h))(r, t, !m, n, !t || Q.test(e) && me(t.parentNode) || t),
                        n
                }
                ,
                n.sortStable = w.split("").sort(P).join("") === w,
                n.detectDuplicates = !!d,
                p(),
                n.sortDetached = le(function (e) {
                    return 1 & e.compareDocumentPosition(h.createElement("fieldset"))
                }),
                le(function (e) {
                    return e.innerHTML = "<a href='#'></a>",
                        "#" === e.firstChild.getAttribute("href")
                }) || ce("type|href|height|width", function (e, t, n) {
                    if (!n)
                        return e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2)
                }),
                n.attributes && le(function (e) {
                    return e.innerHTML = "<input/>",
                        e.firstChild.setAttribute("value", ""),
                        "" === e.firstChild.getAttribute("value")
                }) || ce("value", function (e, t, n) {
                    if (!n && "input" === e.nodeName.toLowerCase())
                        return e.defaultValue
                }),
                le(function (e) {
                    return null == e.getAttribute("disabled")
                }) || ce(R, function (e, t, n) {
                    var i;
                    if (!n)
                        return !0 === e[t] ? t.toLowerCase() : (i = e.getAttributeNode(t)) && i.specified ? i.value : null
                }),
                oe
        }(e);
        v.find = C,
            v.expr = C.selectors,
            v.expr[":"] = v.expr.pseudos,
            v.uniqueSort = v.unique = C.uniqueSort,
            v.text = C.getText,
            v.isXMLDoc = C.isXML,
            v.contains = C.contains,
            v.escapeSelector = C.escape;
        var x = function (e, t, n) {
            for (var i = [], r = void 0 !== n; (e = e[t]) && 9 !== e.nodeType;)
                if (1 === e.nodeType) {
                    if (r && v(e).is(n))
                        break;
                    i.push(e)
                }
            return i
        }
            , T = function (e, t) {
                for (var n = []; e; e = e.nextSibling)
                    1 === e.nodeType && e !== t && n.push(e);
                return n
            }
            , k = v.expr.match.needsContext;
        function P(e, t) {
            return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
        }
        var E = /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i
            , I = /^.[^:#\[\.,]*$/;
        function M(e, t, n) {
            return v.isFunction(t) ? v.grep(e, function (e, i) {
                return !!t.call(e, i, e) !== n
            }) : t.nodeType ? v.grep(e, function (e) {
                return e === t !== n
            }) : "string" != typeof t ? v.grep(e, function (e) {
                return l.call(t, e) > -1 !== n
            }) : I.test(t) ? v.filter(t, e, n) : (t = v.filter(t, e),
                v.grep(e, function (e) {
                    return l.call(t, e) > -1 !== n && 1 === e.nodeType
                }))
        }
        v.filter = function (e, t, n) {
            var i = t[0];
            return n && (e = ":not(" + e + ")"),
                1 === t.length && 1 === i.nodeType ? v.find.matchesSelector(i, e) ? [i] : [] : v.find.matches(e, v.grep(t, function (e) {
                    return 1 === e.nodeType
                }))
        }
            ,
            v.fn.extend({
                find: function (e) {
                    var t, n, i = this.length, r = this;
                    if ("string" != typeof e)
                        return this.pushStack(v(e).filter(function () {
                            for (t = 0; t < i; t++)
                                if (v.contains(r[t], this))
                                    return !0
                        }));
                    for (n = this.pushStack([]),
                        t = 0; t < i; t++)
                        v.find(e, r[t], n);
                    return i > 1 ? v.uniqueSort(n) : n
                },
                filter: function (e) {
                    return this.pushStack(M(this, e || [], !1))
                },
                not: function (e) {
                    return this.pushStack(M(this, e || [], !0))
                },
                is: function (e) {
                    return !!M(this, "string" == typeof e && k.test(e) ? v(e) : e || [], !1).length
                }
            });
        var O, D = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;
        (v.fn.init = function (e, t, n) {
            var r, o;
            if (!e)
                return this;
            if (n = n || O,
                "string" == typeof e) {
                if (!(r = "<" === e[0] && ">" === e[e.length - 1] && e.length >= 3 ? [null, e, null] : D.exec(e)) || !r[1] && t)
                    return !t || t.jquery ? (t || n).find(e) : this.constructor(t).find(e);
                if (r[1]) {
                    if (t = t instanceof v ? t[0] : t,
                        v.merge(this, v.parseHTML(r[1], t && t.nodeType ? t.ownerDocument || t : i, !0)),
                        E.test(r[1]) && v.isPlainObject(t))
                        for (r in t)
                            v.isFunction(this[r]) ? this[r](t[r]) : this.attr(r, t[r]);
                    return this
                }
                return (o = i.getElementById(r[2])) && (this[0] = o,
                    this.length = 1),
                    this
            }
            return e.nodeType ? (this[0] = e,
                this.length = 1,
                this) : v.isFunction(e) ? void 0 !== n.ready ? n.ready(e) : e(v) : v.makeArray(e, this)
        }
        ).prototype = v.fn,
            O = v(i);
        var A = /^(?:parents|prev(?:Until|All))/
            , _ = {
                children: !0,
                contents: !0,
                next: !0,
                prev: !0
            };
        function R(e, t) {
            for (; (e = e[t]) && 1 !== e.nodeType;)
                ;
            return e
        }
        v.fn.extend({
            has: function (e) {
                var t = v(e, this)
                    , n = t.length;
                return this.filter(function () {
                    for (var e = 0; e < n; e++)
                        if (v.contains(this, t[e]))
                            return !0
                })
            },
            closest: function (e, t) {
                var n, i = 0, r = this.length, o = [], a = "string" != typeof e && v(e);
                if (!k.test(e))
                    for (; i < r; i++)
                        for (n = this[i]; n && n !== t; n = n.parentNode)
                            if (n.nodeType < 11 && (a ? a.index(n) > -1 : 1 === n.nodeType && v.find.matchesSelector(n, e))) {
                                o.push(n);
                                break
                            }
                return this.pushStack(o.length > 1 ? v.uniqueSort(o) : o)
            },
            index: function (e) {
                return e ? "string" == typeof e ? l.call(v(e), this[0]) : l.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
            },
            add: function (e, t) {
                return this.pushStack(v.uniqueSort(v.merge(this.get(), v(e, t))))
            },
            addBack: function (e) {
                return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
            }
        }),
            v.each({
                parent: function (e) {
                    var t = e.parentNode;
                    return t && 11 !== t.nodeType ? t : null
                },
                parents: function (e) {
                    return x(e, "parentNode")
                },
                parentsUntil: function (e, t, n) {
                    return x(e, "parentNode", n)
                },
                next: function (e) {
                    return R(e, "nextSibling")
                },
                prev: function (e) {
                    return R(e, "previousSibling")
                },
                nextAll: function (e) {
                    return x(e, "nextSibling")
                },
                prevAll: function (e) {
                    return x(e, "previousSibling")
                },
                nextUntil: function (e, t, n) {
                    return x(e, "nextSibling", n)
                },
                prevUntil: function (e, t, n) {
                    return x(e, "previousSibling", n)
                },
                siblings: function (e) {
                    return T((e.parentNode || {}).firstChild, e)
                },
                children: function (e) {
                    return T(e.firstChild)
                },
                contents: function (e) {
                    return P(e, "iframe") ? e.contentDocument : (P(e, "template") && (e = e.content || e),
                        v.merge([], e.childNodes))
                }
            }, function (e, t) {
                v.fn[e] = function (n, i) {
                    var r = v.map(this, t, n);
                    return "Until" !== e.slice(-5) && (i = n),
                        i && "string" == typeof i && (r = v.filter(i, r)),
                        this.length > 1 && (_[e] || v.uniqueSort(r),
                            A.test(e) && r.reverse()),
                        this.pushStack(r)
                }
            });
        var L = /[^\x20\t\r\n\f]+/g;
        function U(e) {
            return e
        }
        function N(e) {
            throw e
        }
        function j(e, t, n, i) {
            var r;
            try {
                e && v.isFunction(r = e.promise) ? r.call(e).done(t).fail(n) : e && v.isFunction(r = e.then) ? r.call(e, t, n) : t.apply(void 0, [e].slice(i))
            } catch (e) {
                n.apply(void 0, [e])
            }
        }
        v.Callbacks = function (e) {
            e = "string" == typeof e ? function (e) {
                var t = {};
                return v.each(e.match(L) || [], function (e, n) {
                    t[n] = !0
                }),
                    t
            }(e) : v.extend({}, e);
            var t, n, i, r, o = [], a = [], s = -1, l = function () {
                for (r = r || e.once,
                    i = t = !0; a.length; s = -1)
                    for (n = a.shift(); ++s < o.length;)
                        !1 === o[s].apply(n[0], n[1]) && e.stopOnFalse && (s = o.length,
                            n = !1);
                e.memory || (n = !1),
                    t = !1,
                    r && (o = n ? [] : "")
            }, c = {
                add: function () {
                    return o && (n && !t && (s = o.length - 1,
                        a.push(n)),
                        function t(n) {
                            v.each(n, function (n, i) {
                                v.isFunction(i) ? e.unique && c.has(i) || o.push(i) : i && i.length && "string" !== v.type(i) && t(i)
                            })
                        }(arguments),
                        n && !t && l()),
                        this
                },
                remove: function () {
                    return v.each(arguments, function (e, t) {
                        for (var n; (n = v.inArray(t, o, n)) > -1;)
                            o.splice(n, 1),
                                n <= s && s--
                    }),
                        this
                },
                has: function (e) {
                    return e ? v.inArray(e, o) > -1 : o.length > 0
                },
                empty: function () {
                    return o && (o = []),
                        this
                },
                disable: function () {
                    return r = a = [],
                        o = n = "",
                        this
                },
                disabled: function () {
                    return !o
                },
                lock: function () {
                    return r = a = [],
                        n || t || (o = n = ""),
                        this
                },
                locked: function () {
                    return !!r
                },
                fireWith: function (e, n) {
                    return r || (n = [e, (n = n || []).slice ? n.slice() : n],
                        a.push(n),
                        t || l()),
                        this
                },
                fire: function () {
                    return c.fireWith(this, arguments),
                        this
                },
                fired: function () {
                    return !!i
                }
            };
            return c
        }
            ,
            v.extend({
                Deferred: function (t) {
                    var n = [["notify", "progress", v.Callbacks("memory"), v.Callbacks("memory"), 2], ["resolve", "done", v.Callbacks("once memory"), v.Callbacks("once memory"), 0, "resolved"], ["reject", "fail", v.Callbacks("once memory"), v.Callbacks("once memory"), 1, "rejected"]]
                        , i = "pending"
                        , r = {
                            state: function () {
                                return i
                            },
                            always: function () {
                                return o.done(arguments).fail(arguments),
                                    this
                            },
                            catch: function (e) {
                                return r.then(null, e)
                            },
                            pipe: function () {
                                var e = arguments;
                                return v.Deferred(function (t) {
                                    v.each(n, function (n, i) {
                                        var r = v.isFunction(e[i[4]]) && e[i[4]];
                                        o[i[1]](function () {
                                            var e = r && r.apply(this, arguments);
                                            e && v.isFunction(e.promise) ? e.promise().progress(t.notify).done(t.resolve).fail(t.reject) : t[i[0] + "With"](this, r ? [e] : arguments)
                                        })
                                    }),
                                        e = null
                                }).promise()
                            },
                            then: function (t, i, r) {
                                var o = 0;
                                function a(t, n, i, r) {
                                    return function () {
                                        var s = this
                                            , l = arguments
                                            , c = function () {
                                                var e, c;
                                                if (!(t < o)) {
                                                    if ((e = i.apply(s, l)) === n.promise())
                                                        throw new TypeError("Thenable self-resolution");
                                                    c = e && ("object" == typeof e || "function" == typeof e) && e.then,
                                                        v.isFunction(c) ? r ? c.call(e, a(o, n, U, r), a(o, n, N, r)) : (o++,
                                                            c.call(e, a(o, n, U, r), a(o, n, N, r), a(o, n, U, n.notifyWith))) : (i !== U && (s = void 0,
                                                                l = [e]),
                                                                (r || n.resolveWith)(s, l))
                                                }
                                            }
                                            , u = r ? c : function () {
                                                try {
                                                    c()
                                                } catch (e) {
                                                    v.Deferred.exceptionHook && v.Deferred.exceptionHook(e, u.stackTrace),
                                                        t + 1 >= o && (i !== N && (s = void 0,
                                                            l = [e]),
                                                            n.rejectWith(s, l))
                                                }
                                            }
                                            ;
                                        t ? u() : (v.Deferred.getStackHook && (u.stackTrace = v.Deferred.getStackHook()),
                                            e.setTimeout(u))
                                    }
                                }
                                return v.Deferred(function (e) {
                                    n[0][3].add(a(0, e, v.isFunction(r) ? r : U, e.notifyWith)),
                                        n[1][3].add(a(0, e, v.isFunction(t) ? t : U)),
                                        n[2][3].add(a(0, e, v.isFunction(i) ? i : N))
                                }).promise()
                            },
                            promise: function (e) {
                                return null != e ? v.extend(e, r) : r
                            }
                        }
                        , o = {};
                    return v.each(n, function (e, t) {
                        var a = t[2]
                            , s = t[5];
                        r[t[1]] = a.add,
                            s && a.add(function () {
                                i = s
                            }, n[3 - e][2].disable, n[0][2].lock),
                            a.add(t[3].fire),
                            o[t[0]] = function () {
                                return o[t[0] + "With"](this === o ? void 0 : this, arguments),
                                    this
                            }
                            ,
                            o[t[0] + "With"] = a.fireWith
                    }),
                        r.promise(o),
                        t && t.call(o, o),
                        o
                },
                when: function (e) {
                    var t = arguments.length
                        , n = t
                        , i = Array(n)
                        , r = o.call(arguments)
                        , a = v.Deferred()
                        , s = function (e) {
                            return function (n) {
                                i[e] = this,
                                    r[e] = arguments.length > 1 ? o.call(arguments) : n,
                                    --t || a.resolveWith(i, r)
                            }
                        };
                    if (t <= 1 && (j(e, a.done(s(n)).resolve, a.reject, !t),
                        "pending" === a.state() || v.isFunction(r[n] && r[n].then)))
                        return a.then();
                    for (; n--;)
                        j(r[n], s(n), a.reject);
                    return a.promise()
                }
            });
        var F = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;
        v.Deferred.exceptionHook = function (t, n) {
            e.console && e.console.warn && t && F.test(t.name) && e.console.warn("jQuery.Deferred exception: " + t.message, t.stack, n)
        }
            ,
            v.readyException = function (t) {
                e.setTimeout(function () {
                    throw t
                })
            }
            ;
        var B = v.Deferred();
        function V() {
            i.removeEventListener("DOMContentLoaded", V),
                e.removeEventListener("load", V),
                v.ready()
        }
        v.fn.ready = function (e) {
            return B.then(e).catch(function (e) {
                v.readyException(e)
            }),
                this
        }
            ,
            v.extend({
                isReady: !1,
                readyWait: 1,
                ready: function (e) {
                    (!0 === e ? --v.readyWait : v.isReady) || (v.isReady = !0,
                        !0 !== e && --v.readyWait > 0 || B.resolveWith(i, [v]))
                }
            }),
            v.ready.then = B.then,
            "complete" === i.readyState || "loading" !== i.readyState && !i.documentElement.doScroll ? e.setTimeout(v.ready) : (i.addEventListener("DOMContentLoaded", V),
                e.addEventListener("load", V));
        var z = function (e, t, n, i, r, o, a) {
            var s = 0
                , l = e.length
                , c = null == n;
            if ("object" === v.type(n))
                for (s in r = !0,
                    n)
                    z(e, t, s, n[s], !0, o, a);
            else if (void 0 !== i && (r = !0,
                v.isFunction(i) || (a = !0),
                c && (a ? (t.call(e, i),
                    t = null) : (c = t,
                        t = function (e, t, n) {
                            return c.call(v(e), n)
                        }
                    )),
                t))
                for (; s < l; s++)
                    t(e[s], n, a ? i : i.call(e[s], s, t(e[s], n)));
            return r ? e : c ? t.call(e) : l ? t(e[0], n) : o
        }
            , H = function (e) {
                return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType
            };
        function W() {
            this.expando = v.expando + W.uid++
        }
        W.uid = 1,
            W.prototype = {
                cache: function (e) {
                    var t = e[this.expando];
                    return t || (t = {},
                        H(e) && (e.nodeType ? e[this.expando] = t : Object.defineProperty(e, this.expando, {
                            value: t,
                            configurable: !0
                        }))),
                        t
                },
                set: function (e, t, n) {
                    var i, r = this.cache(e);
                    if ("string" == typeof t)
                        r[v.camelCase(t)] = n;
                    else
                        for (i in t)
                            r[v.camelCase(i)] = t[i];
                    return r
                },
                get: function (e, t) {
                    return void 0 === t ? this.cache(e) : e[this.expando] && e[this.expando][v.camelCase(t)]
                },
                access: function (e, t, n) {
                    return void 0 === t || t && "string" == typeof t && void 0 === n ? this.get(e, t) : (this.set(e, t, n),
                        void 0 !== n ? n : t)
                },
                remove: function (e, t) {
                    var n, i = e[this.expando];
                    if (void 0 !== i) {
                        if (void 0 !== t) {
                            Array.isArray(t) ? t = t.map(v.camelCase) : t = (t = v.camelCase(t)) in i ? [t] : t.match(L) || [],
                                n = t.length;
                            for (; n--;)
                                delete i[t[n]]
                        }
                        (void 0 === t || v.isEmptyObject(i)) && (e.nodeType ? e[this.expando] = void 0 : delete e[this.expando])
                    }
                },
                hasData: function (e) {
                    var t = e[this.expando];
                    return void 0 !== t && !v.isEmptyObject(t)
                }
            };
        var q = new W
            , G = new W
            , Y = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/
            , X = /[A-Z]/g;
        function J(e, t, n) {
            var i;
            if (void 0 === n && 1 === e.nodeType)
                if (i = "data-" + t.replace(X, "-$&").toLowerCase(),
                    "string" == typeof (n = e.getAttribute(i))) {
                    try {
                        n = function (e) {
                            return "true" === e || "false" !== e && ("null" === e ? null : e === +e + "" ? +e : Y.test(e) ? JSON.parse(e) : e)
                        }(n)
                    } catch (e) { }
                    G.set(e, t, n)
                } else
                    n = void 0;
            return n
        }
        v.extend({
            hasData: function (e) {
                return G.hasData(e) || q.hasData(e)
            },
            data: function (e, t, n) {
                return G.access(e, t, n)
            },
            removeData: function (e, t) {
                G.remove(e, t)
            },
            _data: function (e, t, n) {
                return q.access(e, t, n)
            },
            _removeData: function (e, t) {
                q.remove(e, t)
            }
        }),
            v.fn.extend({
                data: function (e, t) {
                    var n, i, r, o = this[0], a = o && o.attributes;
                    if (void 0 === e) {
                        if (this.length && (r = G.get(o),
                            1 === o.nodeType && !q.get(o, "hasDataAttrs"))) {
                            for (n = a.length; n--;)
                                a[n] && (0 === (i = a[n].name).indexOf("data-") && (i = v.camelCase(i.slice(5)),
                                    J(o, i, r[i])));
                            q.set(o, "hasDataAttrs", !0)
                        }
                        return r
                    }
                    return "object" == typeof e ? this.each(function () {
                        G.set(this, e)
                    }) : z(this, function (t) {
                        var n;
                        if (o && void 0 === t) {
                            if (void 0 !== (n = G.get(o, e)))
                                return n;
                            if (void 0 !== (n = J(o, e)))
                                return n
                        } else
                            this.each(function () {
                                G.set(this, e, t)
                            })
                    }, null, t, arguments.length > 1, null, !0)
                },
                removeData: function (e) {
                    return this.each(function () {
                        G.remove(this, e)
                    })
                }
            }),
            v.extend({
                queue: function (e, t, n) {
                    var i;
                    if (e)
                        return t = (t || "fx") + "queue",
                            i = q.get(e, t),
                            n && (!i || Array.isArray(n) ? i = q.access(e, t, v.makeArray(n)) : i.push(n)),
                            i || []
                },
                dequeue: function (e, t) {
                    t = t || "fx";
                    var n = v.queue(e, t)
                        , i = n.length
                        , r = n.shift()
                        , o = v._queueHooks(e, t);
                    "inprogress" === r && (r = n.shift(),
                        i--),
                        r && ("fx" === t && n.unshift("inprogress"),
                            delete o.stop,
                            r.call(e, function () {
                                v.dequeue(e, t)
                            }, o)),
                        !i && o && o.empty.fire()
                },
                _queueHooks: function (e, t) {
                    var n = t + "queueHooks";
                    return q.get(e, n) || q.access(e, n, {
                        empty: v.Callbacks("once memory").add(function () {
                            q.remove(e, [t + "queue", n])
                        })
                    })
                }
            }),
            v.fn.extend({
                queue: function (e, t) {
                    var n = 2;
                    return "string" != typeof e && (t = e,
                        e = "fx",
                        n--),
                        arguments.length < n ? v.queue(this[0], e) : void 0 === t ? this : this.each(function () {
                            var n = v.queue(this, e, t);
                            v._queueHooks(this, e),
                                "fx" === e && "inprogress" !== n[0] && v.dequeue(this, e)
                        })
                },
                dequeue: function (e) {
                    return this.each(function () {
                        v.dequeue(this, e)
                    })
                },
                clearQueue: function (e) {
                    return this.queue(e || "fx", [])
                },
                promise: function (e, t) {
                    var n, i = 1, r = v.Deferred(), o = this, a = this.length, s = function () {
                        --i || r.resolveWith(o, [o])
                    };
                    for ("string" != typeof e && (t = e,
                        e = void 0),
                        e = e || "fx"; a--;)
                        (n = q.get(o[a], e + "queueHooks")) && n.empty && (i++,
                            n.empty.add(s));
                    return s(),
                        r.promise(t)
                }
            });
        var K = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source
            , Q = new RegExp("^(?:([+-])=|)(" + K + ")([a-z%]*)$", "i")
            , Z = ["Top", "Right", "Bottom", "Left"]
            , ee = function (e, t) {
                return "none" === (e = t || e).style.display || "" === e.style.display && v.contains(e.ownerDocument, e) && "none" === v.css(e, "display")
            }
            , te = function (e, t, n, i) {
                var r, o, a = {};
                for (o in t)
                    a[o] = e.style[o],
                        e.style[o] = t[o];
                for (o in r = n.apply(e, i || []),
                    t)
                    e.style[o] = a[o];
                return r
            };
        function ne(e, t, n, i) {
            var r, o = 1, a = 20, s = i ? function () {
                return i.cur()
            }
                : function () {
                    return v.css(e, t, "")
                }
                , l = s(), c = n && n[3] || (v.cssNumber[t] ? "" : "px"), u = (v.cssNumber[t] || "px" !== c && +l) && Q.exec(v.css(e, t));
            if (u && u[3] !== c) {
                c = c || u[3],
                    n = n || [],
                    u = +l || 1;
                do {
                    u /= o = o || ".5",
                        v.style(e, t, u + c)
                } while (o !== (o = s() / l) && 1 !== o && --a)
            }
            return n && (u = +u || +l || 0,
                r = n[1] ? u + (n[1] + 1) * n[2] : +n[2],
                i && (i.unit = c,
                    i.start = u,
                    i.end = r)),
                r
        }
        var ie = {};
        function re(e) {
            var t, n = e.ownerDocument, i = e.nodeName, r = ie[i];
            return r || (t = n.body.appendChild(n.createElement(i)),
                r = v.css(t, "display"),
                t.parentNode.removeChild(t),
                "none" === r && (r = "block"),
                ie[i] = r,
                r)
        }
        function oe(e, t) {
            for (var n, i, r = [], o = 0, a = e.length; o < a; o++)
                (i = e[o]).style && (n = i.style.display,
                    t ? ("none" === n && (r[o] = q.get(i, "display") || null,
                        r[o] || (i.style.display = "")),
                        "" === i.style.display && ee(i) && (r[o] = re(i))) : "none" !== n && (r[o] = "none",
                            q.set(i, "display", n)));
            for (o = 0; o < a; o++)
                null != r[o] && (e[o].style.display = r[o]);
            return e
        }
        v.fn.extend({
            show: function () {
                return oe(this, !0)
            },
            hide: function () {
                return oe(this)
            },
            toggle: function (e) {
                return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function () {
                    ee(this) ? v(this).show() : v(this).hide()
                })
            }
        });
        var ae = /^(?:checkbox|radio)$/i
            , se = /<([a-z][^\/\0>\x20\t\r\n\f]+)/i
            , le = /^$|\/(?:java|ecma)script/i
            , ce = {
                option: [1, "<select multiple='multiple'>", "</select>"],
                thead: [1, "<table>", "</table>"],
                col: [2, "<table><colgroup>", "</colgroup></table>"],
                tr: [2, "<table><tbody>", "</tbody></table>"],
                td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                _default: [0, "", ""]
            };
        function ue(e, t) {
            var n;
            return n = void 0 !== e.getElementsByTagName ? e.getElementsByTagName(t || "*") : void 0 !== e.querySelectorAll ? e.querySelectorAll(t || "*") : [],
                void 0 === t || t && P(e, t) ? v.merge([e], n) : n
        }
        function de(e, t) {
            for (var n = 0, i = e.length; n < i; n++)
                q.set(e[n], "globalEval", !t || q.get(t[n], "globalEval"))
        }
        ce.optgroup = ce.option,
            ce.tbody = ce.tfoot = ce.colgroup = ce.caption = ce.thead,
            ce.th = ce.td;
        var pe = /<|&#?\w+;/;
        function he(e, t, n, i, r) {
            for (var o, a, s, l, c, u, d = t.createDocumentFragment(), p = [], h = 0, f = e.length; h < f; h++)
                if ((o = e[h]) || 0 === o)
                    if ("object" === v.type(o))
                        v.merge(p, o.nodeType ? [o] : o);
                    else if (pe.test(o)) {
                        for (a = a || d.appendChild(t.createElement("div")),
                            s = (se.exec(o) || ["", ""])[1].toLowerCase(),
                            l = ce[s] || ce._default,
                            a.innerHTML = l[1] + v.htmlPrefilter(o) + l[2],
                            u = l[0]; u--;)
                            a = a.lastChild;
                        v.merge(p, a.childNodes),
                            (a = d.firstChild).textContent = ""
                    } else
                        p.push(t.createTextNode(o));
            for (d.textContent = "",
                h = 0; o = p[h++];)
                if (i && v.inArray(o, i) > -1)
                    r && r.push(o);
                else if (c = v.contains(o.ownerDocument, o),
                    a = ue(d.appendChild(o), "script"),
                    c && de(a),
                    n)
                    for (u = 0; o = a[u++];)
                        le.test(o.type || "") && n.push(o);
            return d
        }
        !function () {
            var e = i.createDocumentFragment().appendChild(i.createElement("div"))
                , t = i.createElement("input");
            t.setAttribute("type", "radio"),
                t.setAttribute("checked", "checked"),
                t.setAttribute("name", "t"),
                e.appendChild(t),
                f.checkClone = e.cloneNode(!0).cloneNode(!0).lastChild.checked,
                e.innerHTML = "<textarea>x</textarea>",
                f.noCloneChecked = !!e.cloneNode(!0).lastChild.defaultValue
        }();
        var fe = i.documentElement
            , me = /^key/
            , ge = /^(?:mouse|pointer|contextmenu|drag|drop)|click/
            , ve = /^([^.]*)(?:\.(.+)|)/;
        function ye() {
            return !0
        }
        function be() {
            return !1
        }
        function we() {
            try {
                return i.activeElement
            } catch (e) { }
        }
        function $e(e, t, n, i, r, o) {
            var a, s;
            if ("object" == typeof t) {
                for (s in "string" != typeof n && (i = i || n,
                    n = void 0),
                    t)
                    $e(e, s, n, i, t[s], o);
                return e
            }
            if (null == i && null == r ? (r = n,
                i = n = void 0) : null == r && ("string" == typeof n ? (r = i,
                    i = void 0) : (r = i,
                        i = n,
                        n = void 0)),
                !1 === r)
                r = be;
            else if (!r)
                return e;
            return 1 === o && (a = r,
                (r = function (e) {
                    return v().off(e),
                        a.apply(this, arguments)
                }
                ).guid = a.guid || (a.guid = v.guid++)),
                e.each(function () {
                    v.event.add(this, t, r, i, n)
                })
        }
        v.event = {
            global: {},
            add: function (e, t, n, i, r) {
                var o, a, s, l, c, u, d, p, h, f, m, g = q.get(e);
                if (g)
                    for (n.handler && (n = (o = n).handler,
                        r = o.selector),
                        r && v.find.matchesSelector(fe, r),
                        n.guid || (n.guid = v.guid++),
                        (l = g.events) || (l = g.events = {}),
                        (a = g.handle) || (a = g.handle = function (t) {
                            return void 0 !== v && v.event.triggered !== t.type ? v.event.dispatch.apply(e, arguments) : void 0
                        }
                        ),
                        c = (t = (t || "").match(L) || [""]).length; c--;)
                        h = m = (s = ve.exec(t[c]) || [])[1],
                            f = (s[2] || "").split(".").sort(),
                            h && (d = v.event.special[h] || {},
                                h = (r ? d.delegateType : d.bindType) || h,
                                d = v.event.special[h] || {},
                                u = v.extend({
                                    type: h,
                                    origType: m,
                                    data: i,
                                    handler: n,
                                    guid: n.guid,
                                    selector: r,
                                    needsContext: r && v.expr.match.needsContext.test(r),
                                    namespace: f.join(".")
                                }, o),
                                (p = l[h]) || ((p = l[h] = []).delegateCount = 0,
                                    d.setup && !1 !== d.setup.call(e, i, f, a) || e.addEventListener && e.addEventListener(h, a)),
                                d.add && (d.add.call(e, u),
                                    u.handler.guid || (u.handler.guid = n.guid)),
                                r ? p.splice(p.delegateCount++, 0, u) : p.push(u),
                                v.event.global[h] = !0)
            },
            remove: function (e, t, n, i, r) {
                var o, a, s, l, c, u, d, p, h, f, m, g = q.hasData(e) && q.get(e);
                if (g && (l = g.events)) {
                    for (c = (t = (t || "").match(L) || [""]).length; c--;)
                        if (h = m = (s = ve.exec(t[c]) || [])[1],
                            f = (s[2] || "").split(".").sort(),
                            h) {
                            for (d = v.event.special[h] || {},
                                p = l[h = (i ? d.delegateType : d.bindType) || h] || [],
                                s = s[2] && new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)"),
                                a = o = p.length; o--;)
                                u = p[o],
                                    !r && m !== u.origType || n && n.guid !== u.guid || s && !s.test(u.namespace) || i && i !== u.selector && ("**" !== i || !u.selector) || (p.splice(o, 1),
                                        u.selector && p.delegateCount--,
                                        d.remove && d.remove.call(e, u));
                            a && !p.length && (d.teardown && !1 !== d.teardown.call(e, f, g.handle) || v.removeEvent(e, h, g.handle),
                                delete l[h])
                        } else
                            for (h in l)
                                v.event.remove(e, h + t[c], n, i, !0);
                    v.isEmptyObject(l) && q.remove(e, "handle events")
                }
            },
            dispatch: function (e) {
                var t, n, i, r, o, a, s = v.event.fix(e), l = new Array(arguments.length), c = (q.get(this, "events") || {})[s.type] || [], u = v.event.special[s.type] || {};
                for (l[0] = s,
                    t = 1; t < arguments.length; t++)
                    l[t] = arguments[t];
                if (s.delegateTarget = this,
                    !u.preDispatch || !1 !== u.preDispatch.call(this, s)) {
                    for (a = v.event.handlers.call(this, s, c),
                        t = 0; (r = a[t++]) && !s.isPropagationStopped();)
                        for (s.currentTarget = r.elem,
                            n = 0; (o = r.handlers[n++]) && !s.isImmediatePropagationStopped();)
                            s.rnamespace && !s.rnamespace.test(o.namespace) || (s.handleObj = o,
                                s.data = o.data,
                                void 0 !== (i = ((v.event.special[o.origType] || {}).handle || o.handler).apply(r.elem, l)) && !1 === (s.result = i) && (s.preventDefault(),
                                    s.stopPropagation()));
                    return u.postDispatch && u.postDispatch.call(this, s),
                        s.result
                }
            },
            handlers: function (e, t) {
                var n, i, r, o, a, s = [], l = t.delegateCount, c = e.target;
                if (l && c.nodeType && !("click" === e.type && e.button >= 1))
                    for (; c !== this; c = c.parentNode || this)
                        if (1 === c.nodeType && ("click" !== e.type || !0 !== c.disabled)) {
                            for (o = [],
                                a = {},
                                n = 0; n < l; n++)
                                void 0 === a[r = (i = t[n]).selector + " "] && (a[r] = i.needsContext ? v(r, this).index(c) > -1 : v.find(r, this, null, [c]).length),
                                    a[r] && o.push(i);
                            o.length && s.push({
                                elem: c,
                                handlers: o
                            })
                        }
                return c = this,
                    l < t.length && s.push({
                        elem: c,
                        handlers: t.slice(l)
                    }),
                    s
            },
            addProp: function (e, t) {
                Object.defineProperty(v.Event.prototype, e, {
                    enumerable: !0,
                    configurable: !0,
                    get: v.isFunction(t) ? function () {
                        if (this.originalEvent)
                            return t(this.originalEvent)
                    }
                        : function () {
                            if (this.originalEvent)
                                return this.originalEvent[e]
                        }
                    ,
                    set: function (t) {
                        Object.defineProperty(this, e, {
                            enumerable: !0,
                            configurable: !0,
                            writable: !0,
                            value: t
                        })
                    }
                })
            },
            fix: function (e) {
                return e[v.expando] ? e : new v.Event(e)
            },
            special: {
                load: {
                    noBubble: !0
                },
                focus: {
                    trigger: function () {
                        if (this !== we() && this.focus)
                            return this.focus(),
                                !1
                    },
                    delegateType: "focusin"
                },
                blur: {
                    trigger: function () {
                        if (this === we() && this.blur)
                            return this.blur(),
                                !1
                    },
                    delegateType: "focusout"
                },
                click: {
                    trigger: function () {
                        if ("checkbox" === this.type && this.click && P(this, "input"))
                            return this.click(),
                                !1
                    },
                    _default: function (e) {
                        return P(e.target, "a")
                    }
                },
                beforeunload: {
                    postDispatch: function (e) {
                        void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result)
                    }
                }
            }
        },
            v.removeEvent = function (e, t, n) {
                e.removeEventListener && e.removeEventListener(t, n)
            }
            ,
            v.Event = function (e, t) {
                return this instanceof v.Event ? (e && e.type ? (this.originalEvent = e,
                    this.type = e.type,
                    this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && !1 === e.returnValue ? ye : be,
                    this.target = e.target && 3 === e.target.nodeType ? e.target.parentNode : e.target,
                    this.currentTarget = e.currentTarget,
                    this.relatedTarget = e.relatedTarget) : this.type = e,
                    t && v.extend(this, t),
                    this.timeStamp = e && e.timeStamp || v.now(),
                    void (this[v.expando] = !0)) : new v.Event(e, t)
            }
            ,
            v.Event.prototype = {
                constructor: v.Event,
                isDefaultPrevented: be,
                isPropagationStopped: be,
                isImmediatePropagationStopped: be,
                isSimulated: !1,
                preventDefault: function () {
                    var e = this.originalEvent;
                    this.isDefaultPrevented = ye,
                        e && !this.isSimulated && e.preventDefault()
                },
                stopPropagation: function () {
                    var e = this.originalEvent;
                    this.isPropagationStopped = ye,
                        e && !this.isSimulated && e.stopPropagation()
                },
                stopImmediatePropagation: function () {
                    var e = this.originalEvent;
                    this.isImmediatePropagationStopped = ye,
                        e && !this.isSimulated && e.stopImmediatePropagation(),
                        this.stopPropagation()
                }
            },
            v.each({
                altKey: !0,
                bubbles: !0,
                cancelable: !0,
                changedTouches: !0,
                ctrlKey: !0,
                detail: !0,
                eventPhase: !0,
                metaKey: !0,
                pageX: !0,
                pageY: !0,
                shiftKey: !0,
                view: !0,
                char: !0,
                charCode: !0,
                key: !0,
                keyCode: !0,
                button: !0,
                buttons: !0,
                clientX: !0,
                clientY: !0,
                offsetX: !0,
                offsetY: !0,
                pointerId: !0,
                pointerType: !0,
                screenX: !0,
                screenY: !0,
                targetTouches: !0,
                toElement: !0,
                touches: !0,
                which: function (e) {
                    var t = e.button;
                    return null == e.which && me.test(e.type) ? null != e.charCode ? e.charCode : e.keyCode : !e.which && void 0 !== t && ge.test(e.type) ? 1 & t ? 1 : 2 & t ? 3 : 4 & t ? 2 : 0 : e.which
                }
            }, v.event.addProp),
            v.each({
                mouseenter: "mouseover",
                mouseleave: "mouseout",
                pointerenter: "pointerover",
                pointerleave: "pointerout"
            }, function (e, t) {
                v.event.special[e] = {
                    delegateType: t,
                    bindType: t,
                    handle: function (e) {
                        var n, i = e.relatedTarget, r = e.handleObj;
                        return i && (i === this || v.contains(this, i)) || (e.type = r.origType,
                            n = r.handler.apply(this, arguments),
                            e.type = t),
                            n
                    }
                }
            }),
            v.fn.extend({
                on: function (e, t, n, i) {
                    return $e(this, e, t, n, i)
                },
                one: function (e, t, n, i) {
                    return $e(this, e, t, n, i, 1)
                },
                off: function (e, t, n) {
                    var i, r;
                    if (e && e.preventDefault && e.handleObj)
                        return i = e.handleObj,
                            v(e.delegateTarget).off(i.namespace ? i.origType + "." + i.namespace : i.origType, i.selector, i.handler),
                            this;
                    if ("object" == typeof e) {
                        for (r in e)
                            this.off(r, t, e[r]);
                        return this
                    }
                    return !1 !== t && "function" != typeof t || (n = t,
                        t = void 0),
                        !1 === n && (n = be),
                        this.each(function () {
                            v.event.remove(this, e, n, t)
                        })
                }
            });
        var Se = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi
            , Ce = /<script|<style|<link/i
            , xe = /checked\s*(?:[^=]|=\s*.checked.)/i
            , Te = /^true\/(.*)/
            , ke = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
        function Pe(e, t) {
            return P(e, "table") && P(11 !== t.nodeType ? t : t.firstChild, "tr") && v(">tbody", e)[0] || e
        }
        function Ee(e) {
            return e.type = (null !== e.getAttribute("type")) + "/" + e.type,
                e
        }
        function Ie(e) {
            var t = Te.exec(e.type);
            return t ? e.type = t[1] : e.removeAttribute("type"),
                e
        }
        function Me(e, t) {
            var n, i, r, o, a, s, l, c;
            if (1 === t.nodeType) {
                if (q.hasData(e) && (o = q.access(e),
                    a = q.set(t, o),
                    c = o.events))
                    for (r in delete a.handle,
                        a.events = {},
                        c)
                        for (n = 0,
                            i = c[r].length; n < i; n++)
                            v.event.add(t, r, c[r][n]);
                G.hasData(e) && (s = G.access(e),
                    l = v.extend({}, s),
                    G.set(t, l))
            }
        }
        function Oe(e, t) {
            var n = t.nodeName.toLowerCase();
            "input" === n && ae.test(e.type) ? t.checked = e.checked : "input" !== n && "textarea" !== n || (t.defaultValue = e.defaultValue)
        }
        function De(e, t, n, i) {
            t = a.apply([], t);
            var r, o, s, l, c, u, d = 0, p = e.length, h = p - 1, g = t[0], y = v.isFunction(g);
            if (y || p > 1 && "string" == typeof g && !f.checkClone && xe.test(g))
                return e.each(function (r) {
                    var o = e.eq(r);
                    y && (t[0] = g.call(this, r, o.html())),
                        De(o, t, n, i)
                });
            if (p && (o = (r = he(t, e[0].ownerDocument, !1, e, i)).firstChild,
                1 === r.childNodes.length && (r = o),
                o || i)) {
                for (l = (s = v.map(ue(r, "script"), Ee)).length; d < p; d++)
                    c = r,
                        d !== h && (c = v.clone(c, !0, !0),
                            l && v.merge(s, ue(c, "script"))),
                        n.call(e[d], c, d);
                if (l)
                    for (u = s[s.length - 1].ownerDocument,
                        v.map(s, Ie),
                        d = 0; d < l; d++)
                        c = s[d],
                            le.test(c.type || "") && !q.access(c, "globalEval") && v.contains(u, c) && (c.src ? v._evalUrl && v._evalUrl(c.src) : m(c.textContent.replace(ke, ""), u))
            }
            return e
        }
        function Ae(e, t, n) {
            for (var i, r = t ? v.filter(t, e) : e, o = 0; null != (i = r[o]); o++)
                n || 1 !== i.nodeType || v.cleanData(ue(i)),
                    i.parentNode && (n && v.contains(i.ownerDocument, i) && de(ue(i, "script")),
                        i.parentNode.removeChild(i));
            return e
        }
        v.extend({
            htmlPrefilter: function (e) {
                return e.replace(Se, "<$1></$2>")
            },
            clone: function (e, t, n) {
                var i, r, o, a, s = e.cloneNode(!0), l = v.contains(e.ownerDocument, e);
                if (!(f.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || v.isXMLDoc(e)))
                    for (a = ue(s),
                        i = 0,
                        r = (o = ue(e)).length; i < r; i++)
                        Oe(o[i], a[i]);
                if (t)
                    if (n)
                        for (o = o || ue(e),
                            a = a || ue(s),
                            i = 0,
                            r = o.length; i < r; i++)
                            Me(o[i], a[i]);
                    else
                        Me(e, s);
                return (a = ue(s, "script")).length > 0 && de(a, !l && ue(e, "script")),
                    s
            },
            cleanData: function (e) {
                for (var t, n, i, r = v.event.special, o = 0; void 0 !== (n = e[o]); o++)
                    if (H(n)) {
                        if (t = n[q.expando]) {
                            if (t.events)
                                for (i in t.events)
                                    r[i] ? v.event.remove(n, i) : v.removeEvent(n, i, t.handle);
                            n[q.expando] = void 0
                        }
                        n[G.expando] && (n[G.expando] = void 0)
                    }
            }
        }),
            v.fn.extend({
                detach: function (e) {
                    return Ae(this, e, !0)
                },
                remove: function (e) {
                    return Ae(this, e)
                },
                text: function (e) {
                    return z(this, function (e) {
                        return void 0 === e ? v.text(this) : this.empty().each(function () {
                            1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = e)
                        })
                    }, null, e, arguments.length)
                },
                append: function () {
                    return De(this, arguments, function (e) {
                        1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || Pe(this, e).appendChild(e)
                    })
                },
                prepend: function () {
                    return De(this, arguments, function (e) {
                        if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                            var t = Pe(this, e);
                            t.insertBefore(e, t.firstChild)
                        }
                    })
                },
                before: function () {
                    return De(this, arguments, function (e) {
                        this.parentNode && this.parentNode.insertBefore(e, this)
                    })
                },
                after: function () {
                    return De(this, arguments, function (e) {
                        this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
                    })
                },
                empty: function () {
                    for (var e, t = 0; null != (e = this[t]); t++)
                        1 === e.nodeType && (v.cleanData(ue(e, !1)),
                            e.textContent = "");
                    return this
                },
                clone: function (e, t) {
                    return e = null != e && e,
                        t = null == t ? e : t,
                        this.map(function () {
                            return v.clone(this, e, t)
                        })
                },
                html: function (e) {
                    return z(this, function (e) {
                        var t = this[0] || {}
                            , n = 0
                            , i = this.length;
                        if (void 0 === e && 1 === t.nodeType)
                            return t.innerHTML;
                        if ("string" == typeof e && !Ce.test(e) && !ce[(se.exec(e) || ["", ""])[1].toLowerCase()]) {
                            e = v.htmlPrefilter(e);
                            try {
                                for (; n < i; n++)
                                    1 === (t = this[n] || {}).nodeType && (v.cleanData(ue(t, !1)),
                                        t.innerHTML = e);
                                t = 0
                            } catch (e) { }
                        }
                        t && this.empty().append(e)
                    }, null, e, arguments.length)
                },
                replaceWith: function () {
                    var e = [];
                    return De(this, arguments, function (t) {
                        var n = this.parentNode;
                        v.inArray(this, e) < 0 && (v.cleanData(ue(this)),
                            n && n.replaceChild(t, this))
                    }, e)
                }
            }),
            v.each({
                appendTo: "append",
                prependTo: "prepend",
                insertBefore: "before",
                insertAfter: "after",
                replaceAll: "replaceWith"
            }, function (e, t) {
                v.fn[e] = function (e) {
                    for (var n, i = [], r = v(e), o = r.length - 1, a = 0; a <= o; a++)
                        n = a === o ? this : this.clone(!0),
                            v(r[a])[t](n),
                            s.apply(i, n.get());
                    return this.pushStack(i)
                }
            });
        var _e = /^margin/
            , Re = new RegExp("^(" + K + ")(?!px)[a-z%]+$", "i")
            , Le = function (t) {
                var n = t.ownerDocument.defaultView;
                return n && n.opener || (n = e),
                    n.getComputedStyle(t)
            };
        function Ue(e, t, n) {
            var i, r, o, a, s = e.style;
            return (n = n || Le(e)) && ("" !== (a = n.getPropertyValue(t) || n[t]) || v.contains(e.ownerDocument, e) || (a = v.style(e, t)),
                !f.pixelMarginRight() && Re.test(a) && _e.test(t) && (i = s.width,
                    r = s.minWidth,
                    o = s.maxWidth,
                    s.minWidth = s.maxWidth = s.width = a,
                    a = n.width,
                    s.width = i,
                    s.minWidth = r,
                    s.maxWidth = o)),
                void 0 !== a ? a + "" : a
        }
        function Ne(e, t) {
            return {
                get: function () {
                    return e() ? void delete this.get : (this.get = t).apply(this, arguments)
                }
            }
        }
        !function () {
            function t() {
                if (l) {
                    l.style.cssText = "box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",
                        l.innerHTML = "",
                        fe.appendChild(s);
                    var t = e.getComputedStyle(l);
                    n = "1%" !== t.top,
                        a = "2px" === t.marginLeft,
                        r = "4px" === t.width,
                        l.style.marginRight = "50%",
                        o = "4px" === t.marginRight,
                        fe.removeChild(s),
                        l = null
                }
            }
            var n, r, o, a, s = i.createElement("div"), l = i.createElement("div");
            l.style && (l.style.backgroundClip = "content-box",
                l.cloneNode(!0).style.backgroundClip = "",
                f.clearCloneStyle = "content-box" === l.style.backgroundClip,
                s.style.cssText = "border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",
                s.appendChild(l),
                v.extend(f, {
                    pixelPosition: function () {
                        return t(),
                            n
                    },
                    boxSizingReliable: function () {
                        return t(),
                            r
                    },
                    pixelMarginRight: function () {
                        return t(),
                            o
                    },
                    reliableMarginLeft: function () {
                        return t(),
                            a
                    }
                }))
        }();
        var je = /^(none|table(?!-c[ea]).+)/
            , Fe = /^--/
            , Be = {
                position: "absolute",
                visibility: "hidden",
                display: "block"
            }
            , Ve = {
                letterSpacing: "0",
                fontWeight: "400"
            }
            , ze = ["Webkit", "Moz", "ms"]
            , He = i.createElement("div").style;
        function We(e) {
            var t = v.cssProps[e];
            return t || (t = v.cssProps[e] = function (e) {
                if (e in He)
                    return e;
                for (var t = e[0].toUpperCase() + e.slice(1), n = ze.length; n--;)
                    if ((e = ze[n] + t) in He)
                        return e
            }(e) || e),
                t
        }
        function qe(e, t, n) {
            var i = Q.exec(t);
            return i ? Math.max(0, i[2] - (n || 0)) + (i[3] || "px") : t
        }
        function Ge(e, t, n, i, r) {
            var o, a = 0;
            for (o = n === (i ? "border" : "content") ? 4 : "width" === t ? 1 : 0; o < 4; o += 2)
                "margin" === n && (a += v.css(e, n + Z[o], !0, r)),
                    i ? ("content" === n && (a -= v.css(e, "padding" + Z[o], !0, r)),
                        "margin" !== n && (a -= v.css(e, "border" + Z[o] + "Width", !0, r))) : (a += v.css(e, "padding" + Z[o], !0, r),
                            "padding" !== n && (a += v.css(e, "border" + Z[o] + "Width", !0, r)));
            return a
        }
        function Ye(e, t, n) {
            var i, r = Le(e), o = Ue(e, t, r), a = "border-box" === v.css(e, "boxSizing", !1, r);
            return Re.test(o) ? o : (i = a && (f.boxSizingReliable() || o === e.style[t]),
                "auto" === o && (o = e["offset" + t[0].toUpperCase() + t.slice(1)]),
                (o = parseFloat(o) || 0) + Ge(e, t, n || (a ? "border" : "content"), i, r) + "px")
        }
        function Xe(e, t, n, i, r) {
            return new Xe.prototype.init(e, t, n, i, r)
        }
        v.extend({
            cssHooks: {
                opacity: {
                    get: function (e, t) {
                        if (t) {
                            var n = Ue(e, "opacity");
                            return "" === n ? "1" : n
                        }
                    }
                }
            },
            cssNumber: {
                animationIterationCount: !0,
                columnCount: !0,
                fillOpacity: !0,
                flexGrow: !0,
                flexShrink: !0,
                fontWeight: !0,
                lineHeight: !0,
                opacity: !0,
                order: !0,
                orphans: !0,
                widows: !0,
                zIndex: !0,
                zoom: !0
            },
            cssProps: {
                float: "cssFloat"
            },
            style: function (e, t, n, i) {
                if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                    var r, o, a, s = v.camelCase(t), l = Fe.test(t), c = e.style;
                    return l || (t = We(s)),
                        a = v.cssHooks[t] || v.cssHooks[s],
                        void 0 === n ? a && "get" in a && void 0 !== (r = a.get(e, !1, i)) ? r : c[t] : ("string" === (o = typeof n) && (r = Q.exec(n)) && r[1] && (n = ne(e, t, r),
                            o = "number"),
                            void (null != n && n == n && ("number" === o && (n += r && r[3] || (v.cssNumber[s] ? "" : "px")),
                                f.clearCloneStyle || "" !== n || 0 !== t.indexOf("background") || (c[t] = "inherit"),
                                a && "set" in a && void 0 === (n = a.set(e, n, i)) || (l ? c.setProperty(t, n) : c[t] = n))))
                }
            },
            css: function (e, t, n, i) {
                var r, o, a, s = v.camelCase(t);
                return Fe.test(t) || (t = We(s)),
                    (a = v.cssHooks[t] || v.cssHooks[s]) && "get" in a && (r = a.get(e, !0, n)),
                    void 0 === r && (r = Ue(e, t, i)),
                    "normal" === r && t in Ve && (r = Ve[t]),
                    "" === n || n ? (o = parseFloat(r),
                        !0 === n || isFinite(o) ? o || 0 : r) : r
            }
        }),
            v.each(["height", "width"], function (e, t) {
                v.cssHooks[t] = {
                    get: function (e, n, i) {
                        if (n)
                            return !je.test(v.css(e, "display")) || e.getClientRects().length && e.getBoundingClientRect().width ? Ye(e, t, i) : te(e, Be, function () {
                                return Ye(e, t, i)
                            })
                    },
                    set: function (e, n, i) {
                        var r, o = i && Le(e), a = i && Ge(e, t, i, "border-box" === v.css(e, "boxSizing", !1, o), o);
                        return a && (r = Q.exec(n)) && "px" !== (r[3] || "px") && (e.style[t] = n,
                            n = v.css(e, t)),
                            qe(0, n, a)
                    }
                }
            }),
            v.cssHooks.marginLeft = Ne(f.reliableMarginLeft, function (e, t) {
                if (t)
                    return (parseFloat(Ue(e, "marginLeft")) || e.getBoundingClientRect().left - te(e, {
                        marginLeft: 0
                    }, function () {
                        return e.getBoundingClientRect().left
                    })) + "px"
            }),
            v.each({
                margin: "",
                padding: "",
                border: "Width"
            }, function (e, t) {
                v.cssHooks[e + t] = {
                    expand: function (n) {
                        for (var i = 0, r = {}, o = "string" == typeof n ? n.split(" ") : [n]; i < 4; i++)
                            r[e + Z[i] + t] = o[i] || o[i - 2] || o[0];
                        return r
                    }
                },
                    _e.test(e) || (v.cssHooks[e + t].set = qe)
            }),
            v.fn.extend({
                css: function (e, t) {
                    return z(this, function (e, t, n) {
                        var i, r, o = {}, a = 0;
                        if (Array.isArray(t)) {
                            for (i = Le(e),
                                r = t.length; a < r; a++)
                                o[t[a]] = v.css(e, t[a], !1, i);
                            return o
                        }
                        return void 0 !== n ? v.style(e, t, n) : v.css(e, t)
                    }, e, t, arguments.length > 1)
                }
            }),
            v.Tween = Xe,
            Xe.prototype = {
                constructor: Xe,
                init: function (e, t, n, i, r, o) {
                    this.elem = e,
                        this.prop = n,
                        this.easing = r || v.easing._default,
                        this.options = t,
                        this.start = this.now = this.cur(),
                        this.end = i,
                        this.unit = o || (v.cssNumber[n] ? "" : "px")
                },
                cur: function () {
                    var e = Xe.propHooks[this.prop];
                    return e && e.get ? e.get(this) : Xe.propHooks._default.get(this)
                },
                run: function (e) {
                    var t, n = Xe.propHooks[this.prop];
                    return this.options.duration ? this.pos = t = v.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e,
                        this.now = (this.end - this.start) * t + this.start,
                        this.options.step && this.options.step.call(this.elem, this.now, this),
                        n && n.set ? n.set(this) : Xe.propHooks._default.set(this),
                        this
                }
            },
            Xe.prototype.init.prototype = Xe.prototype,
            Xe.propHooks = {
                _default: {
                    get: function (e) {
                        var t;
                        return 1 !== e.elem.nodeType || null != e.elem[e.prop] && null == e.elem.style[e.prop] ? e.elem[e.prop] : (t = v.css(e.elem, e.prop, "")) && "auto" !== t ? t : 0
                    },
                    set: function (e) {
                        v.fx.step[e.prop] ? v.fx.step[e.prop](e) : 1 !== e.elem.nodeType || null == e.elem.style[v.cssProps[e.prop]] && !v.cssHooks[e.prop] ? e.elem[e.prop] = e.now : v.style(e.elem, e.prop, e.now + e.unit)
                    }
                }
            },
            Xe.propHooks.scrollTop = Xe.propHooks.scrollLeft = {
                set: function (e) {
                    e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)
                }
            },
            v.easing = {
                linear: function (e) {
                    return e
                },
                swing: function (e) {
                    return .5 - Math.cos(e * Math.PI) / 2
                },
                _default: "swing"
            },
            v.fx = Xe.prototype.init,
            v.fx.step = {};
        var Je, Ke, Qe = /^(?:toggle|show|hide)$/, Ze = /queueHooks$/;
        function et() {
            Ke && (!1 === i.hidden && e.requestAnimationFrame ? e.requestAnimationFrame(et) : e.setTimeout(et, v.fx.interval),
                v.fx.tick())
        }
        function tt() {
            return e.setTimeout(function () {
                Je = void 0
            }),
                Je = v.now()
        }
        function nt(e, t) {
            var n, i = 0, r = {
                height: e
            };
            for (t = t ? 1 : 0; i < 4; i += 2 - t)
                r["margin" + (n = Z[i])] = r["padding" + n] = e;
            return t && (r.opacity = r.width = e),
                r
        }
        function it(e, t, n) {
            for (var i, r = (rt.tweeners[t] || []).concat(rt.tweeners["*"]), o = 0, a = r.length; o < a; o++)
                if (i = r[o].call(n, t, e))
                    return i
        }
        function rt(e, t, n) {
            var i, r, o = 0, a = rt.prefilters.length, s = v.Deferred().always(function () {
                delete l.elem
            }), l = function () {
                if (r)
                    return !1;
                for (var t = Je || tt(), n = Math.max(0, c.startTime + c.duration - t), i = 1 - (n / c.duration || 0), o = 0, a = c.tweens.length; o < a; o++)
                    c.tweens[o].run(i);
                return s.notifyWith(e, [c, i, n]),
                    i < 1 && a ? n : (a || s.notifyWith(e, [c, 1, 0]),
                        s.resolveWith(e, [c]),
                        !1)
            }, c = s.promise({
                elem: e,
                props: v.extend({}, t),
                opts: v.extend(!0, {
                    specialEasing: {},
                    easing: v.easing._default
                }, n),
                originalProperties: t,
                originalOptions: n,
                startTime: Je || tt(),
                duration: n.duration,
                tweens: [],
                createTween: function (t, n) {
                    var i = v.Tween(e, c.opts, t, n, c.opts.specialEasing[t] || c.opts.easing);
                    return c.tweens.push(i),
                        i
                },
                stop: function (t) {
                    var n = 0
                        , i = t ? c.tweens.length : 0;
                    if (r)
                        return this;
                    for (r = !0; n < i; n++)
                        c.tweens[n].run(1);
                    return t ? (s.notifyWith(e, [c, 1, 0]),
                        s.resolveWith(e, [c, t])) : s.rejectWith(e, [c, t]),
                        this
                }
            }), u = c.props;
            for (function (e, t) {
                var n, i, r, o, a;
                for (n in e)
                    if (r = t[i = v.camelCase(n)],
                        o = e[n],
                        Array.isArray(o) && (r = o[1],
                            o = e[n] = o[0]),
                        n !== i && (e[i] = o,
                            delete e[n]),
                        (a = v.cssHooks[i]) && "expand" in a)
                        for (n in o = a.expand(o),
                            delete e[i],
                            o)
                            n in e || (e[n] = o[n],
                                t[n] = r);
                    else
                        t[i] = r
            }(u, c.opts.specialEasing); o < a; o++)
                if (i = rt.prefilters[o].call(c, e, u, c.opts))
                    return v.isFunction(i.stop) && (v._queueHooks(c.elem, c.opts.queue).stop = v.proxy(i.stop, i)),
                        i;
            return v.map(u, it, c),
                v.isFunction(c.opts.start) && c.opts.start.call(e, c),
                c.progress(c.opts.progress).done(c.opts.done, c.opts.complete).fail(c.opts.fail).always(c.opts.always),
                v.fx.timer(v.extend(l, {
                    elem: e,
                    anim: c,
                    queue: c.opts.queue
                })),
                c
        }
        v.Animation = v.extend(rt, {
            tweeners: {
                "*": [function (e, t) {
                    var n = this.createTween(e, t);
                    return ne(n.elem, e, Q.exec(t), n),
                        n
                }
                ]
            },
            tweener: function (e, t) {
                v.isFunction(e) ? (t = e,
                    e = ["*"]) : e = e.match(L);
                for (var n, i = 0, r = e.length; i < r; i++)
                    n = e[i],
                        rt.tweeners[n] = rt.tweeners[n] || [],
                        rt.tweeners[n].unshift(t)
            },
            prefilters: [function (e, t, n) {
                var i, r, o, a, s, l, c, u, d = "width" in t || "height" in t, p = this, h = {}, f = e.style, m = e.nodeType && ee(e), g = q.get(e, "fxshow");
                for (i in n.queue || (null == (a = v._queueHooks(e, "fx")).unqueued && (a.unqueued = 0,
                    s = a.empty.fire,
                    a.empty.fire = function () {
                        a.unqueued || s()
                    }
                ),
                    a.unqueued++,
                    p.always(function () {
                        p.always(function () {
                            a.unqueued--,
                                v.queue(e, "fx").length || a.empty.fire()
                        })
                    })),
                    t)
                    if (r = t[i],
                        Qe.test(r)) {
                        if (delete t[i],
                            o = o || "toggle" === r,
                            r === (m ? "hide" : "show")) {
                            if ("show" !== r || !g || void 0 === g[i])
                                continue;
                            m = !0
                        }
                        h[i] = g && g[i] || v.style(e, i)
                    }
                if ((l = !v.isEmptyObject(t)) || !v.isEmptyObject(h))
                    for (i in d && 1 === e.nodeType && (n.overflow = [f.overflow, f.overflowX, f.overflowY],
                        null == (c = g && g.display) && (c = q.get(e, "display")),
                        "none" === (u = v.css(e, "display")) && (c ? u = c : (oe([e], !0),
                            c = e.style.display || c,
                            u = v.css(e, "display"),
                            oe([e]))),
                        ("inline" === u || "inline-block" === u && null != c) && "none" === v.css(e, "float") && (l || (p.done(function () {
                            f.display = c
                        }),
                            null == c && (u = f.display,
                                c = "none" === u ? "" : u)),
                            f.display = "inline-block")),
                        n.overflow && (f.overflow = "hidden",
                            p.always(function () {
                                f.overflow = n.overflow[0],
                                    f.overflowX = n.overflow[1],
                                    f.overflowY = n.overflow[2]
                            })),
                        l = !1,
                        h)
                        l || (g ? "hidden" in g && (m = g.hidden) : g = q.access(e, "fxshow", {
                            display: c
                        }),
                            o && (g.hidden = !m),
                            m && oe([e], !0),
                            p.done(function () {
                                for (i in m || oe([e]),
                                    q.remove(e, "fxshow"),
                                    h)
                                    v.style(e, i, h[i])
                            })),
                            l = it(m ? g[i] : 0, i, p),
                            i in g || (g[i] = l.start,
                                m && (l.end = l.start,
                                    l.start = 0))
            }
            ],
            prefilter: function (e, t) {
                t ? rt.prefilters.unshift(e) : rt.prefilters.push(e)
            }
        }),
            v.speed = function (e, t, n) {
                var i = e && "object" == typeof e ? v.extend({}, e) : {
                    complete: n || !n && t || v.isFunction(e) && e,
                    duration: e,
                    easing: n && t || t && !v.isFunction(t) && t
                };
                return v.fx.off ? i.duration = 0 : "number" != typeof i.duration && (i.duration in v.fx.speeds ? i.duration = v.fx.speeds[i.duration] : i.duration = v.fx.speeds._default),
                    null != i.queue && !0 !== i.queue || (i.queue = "fx"),
                    i.old = i.complete,
                    i.complete = function () {
                        v.isFunction(i.old) && i.old.call(this),
                            i.queue && v.dequeue(this, i.queue)
                    }
                    ,
                    i
            }
            ,
            v.fn.extend({
                fadeTo: function (e, t, n, i) {
                    return this.filter(ee).css("opacity", 0).show().end().animate({
                        opacity: t
                    }, e, n, i)
                },
                animate: function (e, t, n, i) {
                    var r = v.isEmptyObject(e)
                        , o = v.speed(t, n, i)
                        , a = function () {
                            var t = rt(this, v.extend({}, e), o);
                            (r || q.get(this, "finish")) && t.stop(!0)
                        };
                    return a.finish = a,
                        r || !1 === o.queue ? this.each(a) : this.queue(o.queue, a)
                },
                stop: function (e, t, n) {
                    var i = function (e) {
                        var t = e.stop;
                        delete e.stop,
                            t(n)
                    };
                    return "string" != typeof e && (n = t,
                        t = e,
                        e = void 0),
                        t && !1 !== e && this.queue(e || "fx", []),
                        this.each(function () {
                            var t = !0
                                , r = null != e && e + "queueHooks"
                                , o = v.timers
                                , a = q.get(this);
                            if (r)
                                a[r] && a[r].stop && i(a[r]);
                            else
                                for (r in a)
                                    a[r] && a[r].stop && Ze.test(r) && i(a[r]);
                            for (r = o.length; r--;)
                                o[r].elem !== this || null != e && o[r].queue !== e || (o[r].anim.stop(n),
                                    t = !1,
                                    o.splice(r, 1));
                            !t && n || v.dequeue(this, e)
                        })
                },
                finish: function (e) {
                    return !1 !== e && (e = e || "fx"),
                        this.each(function () {
                            var t, n = q.get(this), i = n[e + "queue"], r = n[e + "queueHooks"], o = v.timers, a = i ? i.length : 0;
                            for (n.finish = !0,
                                v.queue(this, e, []),
                                r && r.stop && r.stop.call(this, !0),
                                t = o.length; t--;)
                                o[t].elem === this && o[t].queue === e && (o[t].anim.stop(!0),
                                    o.splice(t, 1));
                            for (t = 0; t < a; t++)
                                i[t] && i[t].finish && i[t].finish.call(this);
                            delete n.finish
                        })
                }
            }),
            v.each(["toggle", "show", "hide"], function (e, t) {
                var n = v.fn[t];
                v.fn[t] = function (e, i, r) {
                    return null == e || "boolean" == typeof e ? n.apply(this, arguments) : this.animate(nt(t, !0), e, i, r)
                }
            }),
            v.each({
                slideDown: nt("show"),
                slideUp: nt("hide"),
                slideToggle: nt("toggle"),
                fadeIn: {
                    opacity: "show"
                },
                fadeOut: {
                    opacity: "hide"
                },
                fadeToggle: {
                    opacity: "toggle"
                }
            }, function (e, t) {
                v.fn[e] = function (e, n, i) {
                    return this.animate(t, e, n, i)
                }
            }),
            v.timers = [],
            v.fx.tick = function () {
                var e, t = 0, n = v.timers;
                for (Je = v.now(); t < n.length; t++)
                    (e = n[t])() || n[t] !== e || n.splice(t--, 1);
                n.length || v.fx.stop(),
                    Je = void 0
            }
            ,
            v.fx.timer = function (e) {
                v.timers.push(e),
                    v.fx.start()
            }
            ,
            v.fx.interval = 13,
            v.fx.start = function () {
                Ke || (Ke = !0,
                    et())
            }
            ,
            v.fx.stop = function () {
                Ke = null
            }
            ,
            v.fx.speeds = {
                slow: 600,
                fast: 200,
                _default: 400
            },
            v.fn.delay = function (t, n) {
                return t = v.fx && v.fx.speeds[t] || t,
                    n = n || "fx",
                    this.queue(n, function (n, i) {
                        var r = e.setTimeout(n, t);
                        i.stop = function () {
                            e.clearTimeout(r)
                        }
                    })
            }
            ,
            function () {
                var e = i.createElement("input")
                    , t = i.createElement("select").appendChild(i.createElement("option"));
                e.type = "checkbox",
                    f.checkOn = "" !== e.value,
                    f.optSelected = t.selected,
                    (e = i.createElement("input")).value = "t",
                    e.type = "radio",
                    f.radioValue = "t" === e.value
            }();
        var ot, at = v.expr.attrHandle;
        v.fn.extend({
            attr: function (e, t) {
                return z(this, v.attr, e, t, arguments.length > 1)
            },
            removeAttr: function (e) {
                return this.each(function () {
                    v.removeAttr(this, e)
                })
            }
        }),
            v.extend({
                attr: function (e, t, n) {
                    var i, r, o = e.nodeType;
                    if (3 !== o && 8 !== o && 2 !== o)
                        return void 0 === e.getAttribute ? v.prop(e, t, n) : (1 === o && v.isXMLDoc(e) || (r = v.attrHooks[t.toLowerCase()] || (v.expr.match.bool.test(t) ? ot : void 0)),
                            void 0 !== n ? null === n ? void v.removeAttr(e, t) : r && "set" in r && void 0 !== (i = r.set(e, n, t)) ? i : (e.setAttribute(t, n + ""),
                                n) : r && "get" in r && null !== (i = r.get(e, t)) ? i : null == (i = v.find.attr(e, t)) ? void 0 : i)
                },
                attrHooks: {
                    type: {
                        set: function (e, t) {
                            if (!f.radioValue && "radio" === t && P(e, "input")) {
                                var n = e.value;
                                return e.setAttribute("type", t),
                                    n && (e.value = n),
                                    t
                            }
                        }
                    }
                },
                removeAttr: function (e, t) {
                    var n, i = 0, r = t && t.match(L);
                    if (r && 1 === e.nodeType)
                        for (; n = r[i++];)
                            e.removeAttribute(n)
                }
            }),
            ot = {
                set: function (e, t, n) {
                    return !1 === t ? v.removeAttr(e, n) : e.setAttribute(n, n),
                        n
                }
            },
            v.each(v.expr.match.bool.source.match(/\w+/g), function (e, t) {
                var n = at[t] || v.find.attr;
                at[t] = function (e, t, i) {
                    var r, o, a = t.toLowerCase();
                    return i || (o = at[a],
                        at[a] = r,
                        r = null != n(e, t, i) ? a : null,
                        at[a] = o),
                        r
                }
            });
        var st = /^(?:input|select|textarea|button)$/i
            , lt = /^(?:a|area)$/i;
        function ct(e) {
            return (e.match(L) || []).join(" ")
        }
        function ut(e) {
            return e.getAttribute && e.getAttribute("class") || ""
        }
        v.fn.extend({
            prop: function (e, t) {
                return z(this, v.prop, e, t, arguments.length > 1)
            },
            removeProp: function (e) {
                return this.each(function () {
                    delete this[v.propFix[e] || e]
                })
            }
        }),
            v.extend({
                prop: function (e, t, n) {
                    var i, r, o = e.nodeType;
                    if (3 !== o && 8 !== o && 2 !== o)
                        return 1 === o && v.isXMLDoc(e) || (t = v.propFix[t] || t,
                            r = v.propHooks[t]),
                            void 0 !== n ? r && "set" in r && void 0 !== (i = r.set(e, n, t)) ? i : e[t] = n : r && "get" in r && null !== (i = r.get(e, t)) ? i : e[t]
                },
                propHooks: {
                    tabIndex: {
                        get: function (e) {
                            var t = v.find.attr(e, "tabindex");
                            return t ? parseInt(t, 10) : st.test(e.nodeName) || lt.test(e.nodeName) && e.href ? 0 : -1
                        }
                    }
                },
                propFix: {
                    for: "htmlFor",
                    class: "className"
                }
            }),
            f.optSelected || (v.propHooks.selected = {
                get: function (e) {
                    var t = e.parentNode;
                    return t && t.parentNode && t.parentNode.selectedIndex,
                        null
                },
                set: function (e) {
                    var t = e.parentNode;
                    t && (t.selectedIndex,
                        t.parentNode && t.parentNode.selectedIndex)
                }
            }),
            v.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function () {
                v.propFix[this.toLowerCase()] = this
            }),
            v.fn.extend({
                addClass: function (e) {
                    var t, n, i, r, o, a, s, l = 0;
                    if (v.isFunction(e))
                        return this.each(function (t) {
                            v(this).addClass(e.call(this, t, ut(this)))
                        });
                    if ("string" == typeof e && e)
                        for (t = e.match(L) || []; n = this[l++];)
                            if (r = ut(n),
                                i = 1 === n.nodeType && " " + ct(r) + " ") {
                                for (a = 0; o = t[a++];)
                                    i.indexOf(" " + o + " ") < 0 && (i += o + " ");
                                r !== (s = ct(i)) && n.setAttribute("class", s)
                            }
                    return this
                },
                removeClass: function (e) {
                    var t, n, i, r, o, a, s, l = 0;
                    if (v.isFunction(e))
                        return this.each(function (t) {
                            v(this).removeClass(e.call(this, t, ut(this)))
                        });
                    if (!arguments.length)
                        return this.attr("class", "");
                    if ("string" == typeof e && e)
                        for (t = e.match(L) || []; n = this[l++];)
                            if (r = ut(n),
                                i = 1 === n.nodeType && " " + ct(r) + " ") {
                                for (a = 0; o = t[a++];)
                                    for (; i.indexOf(" " + o + " ") > -1;)
                                        i = i.replace(" " + o + " ", " ");
                                r !== (s = ct(i)) && n.setAttribute("class", s)
                            }
                    return this
                },
                toggleClass: function (e, t) {
                    var n = typeof e;
                    return "boolean" == typeof t && "string" === n ? t ? this.addClass(e) : this.removeClass(e) : v.isFunction(e) ? this.each(function (n) {
                        v(this).toggleClass(e.call(this, n, ut(this), t), t)
                    }) : this.each(function () {
                        var t, i, r, o;
                        if ("string" === n)
                            for (i = 0,
                                r = v(this),
                                o = e.match(L) || []; t = o[i++];)
                                r.hasClass(t) ? r.removeClass(t) : r.addClass(t);
                        else
                            void 0 !== e && "boolean" !== n || ((t = ut(this)) && q.set(this, "__className__", t),
                                this.setAttribute && this.setAttribute("class", t || !1 === e ? "" : q.get(this, "__className__") || ""))
                    })
                },
                hasClass: function (e) {
                    var t, n, i = 0;
                    for (t = " " + e + " "; n = this[i++];)
                        if (1 === n.nodeType && (" " + ct(ut(n)) + " ").indexOf(t) > -1)
                            return !0;
                    return !1
                }
            });
        var dt = /\r/g;
        v.fn.extend({
            val: function (e) {
                var t, n, i, r = this[0];
                return arguments.length ? (i = v.isFunction(e),
                    this.each(function (n) {
                        var r;
                        1 === this.nodeType && (null == (r = i ? e.call(this, n, v(this).val()) : e) ? r = "" : "number" == typeof r ? r += "" : Array.isArray(r) && (r = v.map(r, function (e) {
                            return null == e ? "" : e + ""
                        })),
                            (t = v.valHooks[this.type] || v.valHooks[this.nodeName.toLowerCase()]) && "set" in t && void 0 !== t.set(this, r, "value") || (this.value = r))
                    })) : r ? (t = v.valHooks[r.type] || v.valHooks[r.nodeName.toLowerCase()]) && "get" in t && void 0 !== (n = t.get(r, "value")) ? n : "string" == typeof (n = r.value) ? n.replace(dt, "") : null == n ? "" : n : void 0
            }
        }),
            v.extend({
                valHooks: {
                    option: {
                        get: function (e) {
                            var t = v.find.attr(e, "value");
                            return null != t ? t : ct(v.text(e))
                        }
                    },
                    select: {
                        get: function (e) {
                            var t, n, i, r = e.options, o = e.selectedIndex, a = "select-one" === e.type, s = a ? null : [], l = a ? o + 1 : r.length;
                            for (i = o < 0 ? l : a ? o : 0; i < l; i++)
                                if (((n = r[i]).selected || i === o) && !n.disabled && (!n.parentNode.disabled || !P(n.parentNode, "optgroup"))) {
                                    if (t = v(n).val(),
                                        a)
                                        return t;
                                    s.push(t)
                                }
                            return s
                        },
                        set: function (e, t) {
                            for (var n, i, r = e.options, o = v.makeArray(t), a = r.length; a--;)
                                ((i = r[a]).selected = v.inArray(v.valHooks.option.get(i), o) > -1) && (n = !0);
                            return n || (e.selectedIndex = -1),
                                o
                        }
                    }
                }
            }),
            v.each(["radio", "checkbox"], function () {
                v.valHooks[this] = {
                    set: function (e, t) {
                        if (Array.isArray(t))
                            return e.checked = v.inArray(v(e).val(), t) > -1
                    }
                },
                    f.checkOn || (v.valHooks[this].get = function (e) {
                        return null === e.getAttribute("value") ? "on" : e.value
                    }
                    )
            });
        var pt = /^(?:focusinfocus|focusoutblur)$/;
        v.extend(v.event, {
            trigger: function (t, n, r, o) {
                var a, s, l, c, u, p, h, f = [r || i], m = d.call(t, "type") ? t.type : t, g = d.call(t, "namespace") ? t.namespace.split(".") : [];
                if (s = l = r = r || i,
                    3 !== r.nodeType && 8 !== r.nodeType && !pt.test(m + v.event.triggered) && (m.indexOf(".") > -1 && (m = (g = m.split(".")).shift(),
                        g.sort()),
                        u = m.indexOf(":") < 0 && "on" + m,
                        (t = t[v.expando] ? t : new v.Event(m, "object" == typeof t && t)).isTrigger = o ? 2 : 3,
                        t.namespace = g.join("."),
                        t.rnamespace = t.namespace ? new RegExp("(^|\\.)" + g.join("\\.(?:.*\\.|)") + "(\\.|$)") : null,
                        t.result = void 0,
                        t.target || (t.target = r),
                        n = null == n ? [t] : v.makeArray(n, [t]),
                        h = v.event.special[m] || {},
                        o || !h.trigger || !1 !== h.trigger.apply(r, n))) {
                    if (!o && !h.noBubble && !v.isWindow(r)) {
                        for (c = h.delegateType || m,
                            pt.test(c + m) || (s = s.parentNode); s; s = s.parentNode)
                            f.push(s),
                                l = s;
                        l === (r.ownerDocument || i) && f.push(l.defaultView || l.parentWindow || e)
                    }
                    for (a = 0; (s = f[a++]) && !t.isPropagationStopped();)
                        t.type = a > 1 ? c : h.bindType || m,
                            (p = (q.get(s, "events") || {})[t.type] && q.get(s, "handle")) && p.apply(s, n),
                            (p = u && s[u]) && p.apply && H(s) && (t.result = p.apply(s, n),
                                !1 === t.result && t.preventDefault());
                    return t.type = m,
                        o || t.isDefaultPrevented() || h._default && !1 !== h._default.apply(f.pop(), n) || !H(r) || u && v.isFunction(r[m]) && !v.isWindow(r) && ((l = r[u]) && (r[u] = null),
                            v.event.triggered = m,
                            r[m](),
                            v.event.triggered = void 0,
                            l && (r[u] = l)),
                        t.result
                }
            },
            simulate: function (e, t, n) {
                var i = v.extend(new v.Event, n, {
                    type: e,
                    isSimulated: !0
                });
                v.event.trigger(i, null, t)
            }
        }),
            v.fn.extend({
                trigger: function (e, t) {
                    return this.each(function () {
                        v.event.trigger(e, t, this)
                    })
                },
                triggerHandler: function (e, t) {
                    var n = this[0];
                    if (n)
                        return v.event.trigger(e, t, n, !0)
                }
            }),
            v.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "), function (e, t) {
                v.fn[t] = function (e, n) {
                    return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)
                }
            }),
            v.fn.extend({
                hover: function (e, t) {
                    return this.mouseenter(e).mouseleave(t || e)
                }
            }),
            f.focusin = "onfocusin" in e,
            f.focusin || v.each({
                focus: "focusin",
                blur: "focusout"
            }, function (e, t) {
                var n = function (e) {
                    v.event.simulate(t, e.target, v.event.fix(e))
                };
                v.event.special[t] = {
                    setup: function () {
                        var i = this.ownerDocument || this
                            , r = q.access(i, t);
                        r || i.addEventListener(e, n, !0),
                            q.access(i, t, (r || 0) + 1)
                    },
                    teardown: function () {
                        var i = this.ownerDocument || this
                            , r = q.access(i, t) - 1;
                        r ? q.access(i, t, r) : (i.removeEventListener(e, n, !0),
                            q.remove(i, t))
                    }
                }
            });
        var ht = e.location
            , ft = v.now()
            , mt = /\?/;
        v.parseXML = function (t) {
            var n;
            if (!t || "string" != typeof t)
                return null;
            try {
                n = (new e.DOMParser).parseFromString(t, "text/xml")
            } catch (e) {
                n = void 0
            }
            return n && !n.getElementsByTagName("parsererror").length || v.error("Invalid XML: " + t),
                n
        }
            ;
        var gt = /\[\]$/
            , vt = /\r?\n/g
            , yt = /^(?:submit|button|image|reset|file)$/i
            , bt = /^(?:input|select|textarea|keygen)/i;
        function wt(e, t, n, i) {
            var r;
            if (Array.isArray(t))
                v.each(t, function (t, r) {
                    n || gt.test(e) ? i(e, r) : wt(e + "[" + ("object" == typeof r && null != r ? t : "") + "]", r, n, i)
                });
            else if (n || "object" !== v.type(t))
                i(e, t);
            else
                for (r in t)
                    wt(e + "[" + r + "]", t[r], n, i)
        }
        v.param = function (e, t) {
            var n, i = [], r = function (e, t) {
                var n = v.isFunction(t) ? t() : t;
                i[i.length] = encodeURIComponent(e) + "=" + encodeURIComponent(null == n ? "" : n)
            };
            if (Array.isArray(e) || e.jquery && !v.isPlainObject(e))
                v.each(e, function () {
                    r(this.name, this.value)
                });
            else
                for (n in e)
                    wt(n, e[n], t, r);
            return i.join("&")
        }
            ,
            v.fn.extend({
                serialize: function () {
                    return v.param(this.serializeArray())
                },
                serializeArray: function () {
                    return this.map(function () {
                        var e = v.prop(this, "elements");
                        return e ? v.makeArray(e) : this
                    }).filter(function () {
                        var e = this.type;
                        return this.name && !v(this).is(":disabled") && bt.test(this.nodeName) && !yt.test(e) && (this.checked || !ae.test(e))
                    }).map(function (e, t) {
                        var n = v(this).val();
                        return null == n ? null : Array.isArray(n) ? v.map(n, function (e) {
                            return {
                                name: t.name,
                                value: e.replace(vt, "\r\n")
                            }
                        }) : {
                                name: t.name,
                                value: n.replace(vt, "\r\n")
                            }
                    }).get()
                }
            });
        var $t = /%20/g
            , St = /#.*$/
            , Ct = /([?&])_=[^&]*/
            , xt = /^(.*?):[ \t]*([^\r\n]*)$/gm
            , Tt = /^(?:GET|HEAD)$/
            , kt = /^\/\//
            , Pt = {}
            , Et = {}
            , It = "*/".concat("*")
            , Mt = i.createElement("a");
        function Ot(e) {
            return function (t, n) {
                "string" != typeof t && (n = t,
                    t = "*");
                var i, r = 0, o = t.toLowerCase().match(L) || [];
                if (v.isFunction(n))
                    for (; i = o[r++];)
                        "+" === i[0] ? (i = i.slice(1) || "*",
                            (e[i] = e[i] || []).unshift(n)) : (e[i] = e[i] || []).push(n)
            }
        }
        function Dt(e, t, n, i) {
            var r = {}
                , o = e === Et;
            function a(s) {
                var l;
                return r[s] = !0,
                    v.each(e[s] || [], function (e, s) {
                        var c = s(t, n, i);
                        return "string" != typeof c || o || r[c] ? o ? !(l = c) : void 0 : (t.dataTypes.unshift(c),
                            a(c),
                            !1)
                    }),
                    l
            }
            return a(t.dataTypes[0]) || !r["*"] && a("*")
        }
        function At(e, t) {
            var n, i, r = v.ajaxSettings.flatOptions || {};
            for (n in t)
                void 0 !== t[n] && ((r[n] ? e : i || (i = {}))[n] = t[n]);
            return i && v.extend(!0, e, i),
                e
        }
        Mt.href = ht.href,
            v.extend({
                active: 0,
                lastModified: {},
                etag: {},
                ajaxSettings: {
                    url: ht.href,
                    type: "GET",
                    isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ht.protocol),
                    global: !0,
                    processData: !0,
                    async: !0,
                    contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                    accepts: {
                        "*": It,
                        text: "text/plain",
                        html: "text/html",
                        xml: "application/xml, text/xml",
                        json: "application/json, text/javascript"
                    },
                    contents: {
                        xml: /\bxml\b/,
                        html: /\bhtml/,
                        json: /\bjson\b/
                    },
                    responseFields: {
                        xml: "responseXML",
                        text: "responseText",
                        json: "responseJSON"
                    },
                    converters: {
                        "* text": String,
                        "text html": !0,
                        "text json": JSON.parse,
                        "text xml": v.parseXML
                    },
                    flatOptions: {
                        url: !0,
                        context: !0
                    }
                },
                ajaxSetup: function (e, t) {
                    return t ? At(At(e, v.ajaxSettings), t) : At(v.ajaxSettings, e)
                },
                ajaxPrefilter: Ot(Pt),
                ajaxTransport: Ot(Et),
                ajax: function (t, n) {
                    "object" == typeof t && (n = t,
                        t = void 0),
                        n = n || {};
                    var r, o, a, s, l, c, u, d, p, h, f = v.ajaxSetup({}, n), m = f.context || f, g = f.context && (m.nodeType || m.jquery) ? v(m) : v.event, y = v.Deferred(), b = v.Callbacks("once memory"), w = f.statusCode || {}, $ = {}, S = {}, C = "canceled", x = {
                        readyState: 0,
                        getResponseHeader: function (e) {
                            var t;
                            if (u) {
                                if (!s)
                                    for (s = {}; t = xt.exec(a);)
                                        s[t[1].toLowerCase()] = t[2];
                                t = s[e.toLowerCase()]
                            }
                            return null == t ? null : t
                        },
                        getAllResponseHeaders: function () {
                            return u ? a : null
                        },
                        setRequestHeader: function (e, t) {
                            return null == u && (e = S[e.toLowerCase()] = S[e.toLowerCase()] || e,
                                $[e] = t),
                                this
                        },
                        overrideMimeType: function (e) {
                            return null == u && (f.mimeType = e),
                                this
                        },
                        statusCode: function (e) {
                            var t;
                            if (e)
                                if (u)
                                    x.always(e[x.status]);
                                else
                                    for (t in e)
                                        w[t] = [w[t], e[t]];
                            return this
                        },
                        abort: function (e) {
                            var t = e || C;
                            return r && r.abort(t),
                                T(0, t),
                                this
                        }
                    };
                    if (y.promise(x),
                        f.url = ((t || f.url || ht.href) + "").replace(kt, ht.protocol + "//"),
                        f.type = n.method || n.type || f.method || f.type,
                        f.dataTypes = (f.dataType || "*").toLowerCase().match(L) || [""],
                        null == f.crossDomain) {
                        c = i.createElement("a");
                        try {
                            c.href = f.url,
                                c.href = c.href,
                                f.crossDomain = Mt.protocol + "//" + Mt.host != c.protocol + "//" + c.host
                        } catch (e) {
                            f.crossDomain = !0
                        }
                    }
                    if (f.data && f.processData && "string" != typeof f.data && (f.data = v.param(f.data, f.traditional)),
                        Dt(Pt, f, n, x),
                        u)
                        return x;
                    for (p in (d = v.event && f.global) && 0 == v.active++ && v.event.trigger("ajaxStart"),
                        f.type = f.type.toUpperCase(),
                        f.hasContent = !Tt.test(f.type),
                        o = f.url.replace(St, ""),
                        f.hasContent ? f.data && f.processData && 0 === (f.contentType || "").indexOf("application/x-www-form-urlencoded") && (f.data = f.data.replace($t, "+")) : (h = f.url.slice(o.length),
                            f.data && (o += (mt.test(o) ? "&" : "?") + f.data,
                                delete f.data),
                            !1 === f.cache && (o = o.replace(Ct, "$1"),
                                h = (mt.test(o) ? "&" : "?") + "_=" + ft++ + h),
                            f.url = o + h),
                        f.ifModified && (v.lastModified[o] && x.setRequestHeader("If-Modified-Since", v.lastModified[o]),
                            v.etag[o] && x.setRequestHeader("If-None-Match", v.etag[o])),
                        (f.data && f.hasContent && !1 !== f.contentType || n.contentType) && x.setRequestHeader("Content-Type", f.contentType),
                        x.setRequestHeader("Accept", f.dataTypes[0] && f.accepts[f.dataTypes[0]] ? f.accepts[f.dataTypes[0]] + ("*" !== f.dataTypes[0] ? ", " + It + "; q=0.01" : "") : f.accepts["*"]),
                        f.headers)
                        x.setRequestHeader(p, f.headers[p]);
                    if (f.beforeSend && (!1 === f.beforeSend.call(m, x, f) || u))
                        return x.abort();
                    if (C = "abort",
                        b.add(f.complete),
                        x.done(f.success),
                        x.fail(f.error),
                        r = Dt(Et, f, n, x)) {
                        if (x.readyState = 1,
                            d && g.trigger("ajaxSend", [x, f]),
                            u)
                            return x;
                        f.async && f.timeout > 0 && (l = e.setTimeout(function () {
                            x.abort("timeout")
                        }, f.timeout));
                        try {
                            u = !1,
                                r.send($, T)
                        } catch (e) {
                            if (u)
                                throw e;
                            T(-1, e)
                        }
                    } else
                        T(-1, "No Transport");
                    function T(t, n, i, s) {
                        var c, p, h, $, S, C = n;
                        u || (u = !0,
                            l && e.clearTimeout(l),
                            r = void 0,
                            a = s || "",
                            x.readyState = t > 0 ? 4 : 0,
                            c = t >= 200 && t < 300 || 304 === t,
                            i && ($ = function (e, t, n) {
                                for (var i, r, o, a, s = e.contents, l = e.dataTypes; "*" === l[0];)
                                    l.shift(),
                                        void 0 === i && (i = e.mimeType || t.getResponseHeader("Content-Type"));
                                if (i)
                                    for (r in s)
                                        if (s[r] && s[r].test(i)) {
                                            l.unshift(r);
                                            break
                                        }
                                if (l[0] in n)
                                    o = l[0];
                                else {
                                    for (r in n) {
                                        if (!l[0] || e.converters[r + " " + l[0]]) {
                                            o = r;
                                            break
                                        }
                                        a || (a = r)
                                    }
                                    o = o || a
                                }
                                if (o)
                                    return o !== l[0] && l.unshift(o),
                                        n[o]
                            }(f, x, i)),
                            $ = function (e, t, n, i) {
                                var r, o, a, s, l, c = {}, u = e.dataTypes.slice();
                                if (u[1])
                                    for (a in e.converters)
                                        c[a.toLowerCase()] = e.converters[a];
                                for (o = u.shift(); o;)
                                    if (e.responseFields[o] && (n[e.responseFields[o]] = t),
                                        !l && i && e.dataFilter && (t = e.dataFilter(t, e.dataType)),
                                        l = o,
                                        o = u.shift())
                                        if ("*" === o)
                                            o = l;
                                        else if ("*" !== l && l !== o) {
                                            if (!(a = c[l + " " + o] || c["* " + o]))
                                                for (r in c)
                                                    if ((s = r.split(" "))[1] === o && (a = c[l + " " + s[0]] || c["* " + s[0]])) {
                                                        !0 === a ? a = c[r] : !0 !== c[r] && (o = s[0],
                                                            u.unshift(s[1]));
                                                        break
                                                    }
                                            if (!0 !== a)
                                                if (a && e.throws)
                                                    t = a(t);
                                                else
                                                    try {
                                                        t = a(t)
                                                    } catch (e) {
                                                        return {
                                                            state: "parsererror",
                                                            error: a ? e : "No conversion from " + l + " to " + o
                                                        }
                                                    }
                                        }
                                return {
                                    state: "success",
                                    data: t
                                }
                            }(f, $, x, c),
                            c ? (f.ifModified && ((S = x.getResponseHeader("Last-Modified")) && (v.lastModified[o] = S),
                                (S = x.getResponseHeader("etag")) && (v.etag[o] = S)),
                                204 === t || "HEAD" === f.type ? C = "nocontent" : 304 === t ? C = "notmodified" : (C = $.state,
                                    p = $.data,
                                    c = !(h = $.error))) : (h = C,
                                        !t && C || (C = "error",
                                            t < 0 && (t = 0))),
                            x.status = t,
                            x.statusText = (n || C) + "",
                            c ? y.resolveWith(m, [p, C, x]) : y.rejectWith(m, [x, C, h]),
                            x.statusCode(w),
                            w = void 0,
                            d && g.trigger(c ? "ajaxSuccess" : "ajaxError", [x, f, c ? p : h]),
                            b.fireWith(m, [x, C]),
                            d && (g.trigger("ajaxComplete", [x, f]),
                                --v.active || v.event.trigger("ajaxStop")))
                    }
                    return x
                },
                getJSON: function (e, t, n) {
                    return v.get(e, t, n, "json")
                },
                getScript: function (e, t) {
                    return v.get(e, void 0, t, "script")
                }
            }),
            v.each(["get", "post"], function (e, t) {
                v[t] = function (e, n, i, r) {
                    return v.isFunction(n) && (r = r || i,
                        i = n,
                        n = void 0),
                        v.ajax(v.extend({
                            url: e,
                            type: t,
                            dataType: r,
                            data: n,
                            success: i
                        }, v.isPlainObject(e) && e))
                }
            }),
            v._evalUrl = function (e) {
                return v.ajax({
                    url: e,
                    type: "GET",
                    dataType: "script",
                    cache: !0,
                    async: !1,
                    global: !1,
                    throws: !0
                })
            }
            ,
            v.fn.extend({
                wrapAll: function (e) {
                    var t;
                    return this[0] && (v.isFunction(e) && (e = e.call(this[0])),
                        t = v(e, this[0].ownerDocument).eq(0).clone(!0),
                        this[0].parentNode && t.insertBefore(this[0]),
                        t.map(function () {
                            for (var e = this; e.firstElementChild;)
                                e = e.firstElementChild;
                            return e
                        }).append(this)),
                        this
                },
                wrapInner: function (e) {
                    return v.isFunction(e) ? this.each(function (t) {
                        v(this).wrapInner(e.call(this, t))
                    }) : this.each(function () {
                        var t = v(this)
                            , n = t.contents();
                        n.length ? n.wrapAll(e) : t.append(e)
                    })
                },
                wrap: function (e) {
                    var t = v.isFunction(e);
                    return this.each(function (n) {
                        v(this).wrapAll(t ? e.call(this, n) : e)
                    })
                },
                unwrap: function (e) {
                    return this.parent(e).not("body").each(function () {
                        v(this).replaceWith(this.childNodes)
                    }),
                        this
                }
            }),
            v.expr.pseudos.hidden = function (e) {
                return !v.expr.pseudos.visible(e)
            }
            ,
            v.expr.pseudos.visible = function (e) {
                return !!(e.offsetWidth || e.offsetHeight || e.getClientRects().length)
            }
            ,
            v.ajaxSettings.xhr = function () {
                try {
                    return new e.XMLHttpRequest
                } catch (e) { }
            }
            ;
        var _t = {
            0: 200,
            1223: 204
        }
            , Rt = v.ajaxSettings.xhr();
        f.cors = !!Rt && "withCredentials" in Rt,
            f.ajax = Rt = !!Rt,
            v.ajaxTransport(function (t) {
                var n, i;
                if (f.cors || Rt && !t.crossDomain)
                    return {
                        send: function (r, o) {
                            var a, s = t.xhr();
                            if (s.open(t.type, t.url, t.async, t.username, t.password),
                                t.xhrFields)
                                for (a in t.xhrFields)
                                    s[a] = t.xhrFields[a];
                            for (a in t.mimeType && s.overrideMimeType && s.overrideMimeType(t.mimeType),
                                t.crossDomain || r["X-Requested-With"] || (r["X-Requested-With"] = "XMLHttpRequest"),
                                r)
                                s.setRequestHeader(a, r[a]);
                            n = function (e) {
                                return function () {
                                    n && (n = i = s.onload = s.onerror = s.onabort = s.onreadystatechange = null,
                                        "abort" === e ? s.abort() : "error" === e ? "number" != typeof s.status ? o(0, "error") : o(s.status, s.statusText) : o(_t[s.status] || s.status, s.statusText, "text" !== (s.responseType || "text") || "string" != typeof s.responseText ? {
                                            binary: s.response
                                        } : {
                                                text: s.responseText
                                            }, s.getAllResponseHeaders()))
                                }
                            }
                                ,
                                s.onload = n(),
                                i = s.onerror = n("error"),
                                void 0 !== s.onabort ? s.onabort = i : s.onreadystatechange = function () {
                                    4 === s.readyState && e.setTimeout(function () {
                                        n && i()
                                    })
                                }
                                ,
                                n = n("abort");
                            try {
                                s.send(t.hasContent && t.data || null)
                            } catch (e) {
                                if (n)
                                    throw e
                            }
                        },
                        abort: function () {
                            n && n()
                        }
                    }
            }),
            v.ajaxPrefilter(function (e) {
                e.crossDomain && (e.contents.script = !1)
            }),
            v.ajaxSetup({
                accepts: {
                    script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
                },
                contents: {
                    script: /\b(?:java|ecma)script\b/
                },
                converters: {
                    "text script": function (e) {
                        return v.globalEval(e),
                            e
                    }
                }
            }),
            v.ajaxPrefilter("script", function (e) {
                void 0 === e.cache && (e.cache = !1),
                    e.crossDomain && (e.type = "GET")
            }),
            v.ajaxTransport("script", function (e) {
                var t, n;
                if (e.crossDomain)
                    return {
                        send: function (r, o) {
                            t = v("<script>").prop({
                                charset: e.scriptCharset,
                                src: e.url
                            }).on("load error", n = function (e) {
                                t.remove(),
                                    n = null,
                                    e && o("error" === e.type ? 404 : 200, e.type)
                            }
                            ),
                                i.head.appendChild(t[0])
                        },
                        abort: function () {
                            n && n()
                        }
                    }
            });
        var Lt = []
            , Ut = /(=)\?(?=&|$)|\?\?/;
        v.ajaxSetup({
            jsonp: "callback",
            jsonpCallback: function () {
                var e = Lt.pop() || v.expando + "_" + ft++;
                return this[e] = !0,
                    e
            }
        }),
            v.ajaxPrefilter("json jsonp", function (t, n, i) {
                var r, o, a, s = !1 !== t.jsonp && (Ut.test(t.url) ? "url" : "string" == typeof t.data && 0 === (t.contentType || "").indexOf("application/x-www-form-urlencoded") && Ut.test(t.data) && "data");
                if (s || "jsonp" === t.dataTypes[0])
                    return r = t.jsonpCallback = v.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback,
                        s ? t[s] = t[s].replace(Ut, "$1" + r) : !1 !== t.jsonp && (t.url += (mt.test(t.url) ? "&" : "?") + t.jsonp + "=" + r),
                        t.converters["script json"] = function () {
                            return a || v.error(r + " was not called"),
                                a[0]
                        }
                        ,
                        t.dataTypes[0] = "json",
                        o = e[r],
                        e[r] = function () {
                            a = arguments
                        }
                        ,
                        i.always(function () {
                            void 0 === o ? v(e).removeProp(r) : e[r] = o,
                                t[r] && (t.jsonpCallback = n.jsonpCallback,
                                    Lt.push(r)),
                                a && v.isFunction(o) && o(a[0]),
                                a = o = void 0
                        }),
                        "script"
            }),
            f.createHTMLDocument = function () {
                var e = i.implementation.createHTMLDocument("").body;
                return e.innerHTML = "<form></form><form></form>",
                    2 === e.childNodes.length
            }(),
            v.parseHTML = function (e, t, n) {
                return "string" != typeof e ? [] : ("boolean" == typeof t && (n = t,
                    t = !1),
                    t || (f.createHTMLDocument ? ((r = (t = i.implementation.createHTMLDocument("")).createElement("base")).href = i.location.href,
                        t.head.appendChild(r)) : t = i),
                    o = E.exec(e),
                    a = !n && [],
                    o ? [t.createElement(o[1])] : (o = he([e], t, a),
                        a && a.length && v(a).remove(),
                        v.merge([], o.childNodes)));
                var r, o, a
            }
            ,
            v.fn.load = function (e, t, n) {
                var i, r, o, a = this, s = e.indexOf(" ");
                return s > -1 && (i = ct(e.slice(s)),
                    e = e.slice(0, s)),
                    v.isFunction(t) ? (n = t,
                        t = void 0) : t && "object" == typeof t && (r = "POST"),
                    a.length > 0 && v.ajax({
                        url: e,
                        type: r || "GET",
                        dataType: "html",
                        data: t
                    }).done(function (e) {
                        o = arguments,
                            a.html(i ? v("<div>").append(v.parseHTML(e)).find(i) : e)
                    }).always(n && function (e, t) {
                        a.each(function () {
                            n.apply(this, o || [e.responseText, t, e])
                        })
                    }
                    ),
                    this
            }
            ,
            v.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function (e, t) {
                v.fn[t] = function (e) {
                    return this.on(t, e)
                }
            }),
            v.expr.pseudos.animated = function (e) {
                return v.grep(v.timers, function (t) {
                    return e === t.elem
                }).length
            }
            ,
            v.offset = {
                setOffset: function (e, t, n) {
                    var i, r, o, a, s, l, c = v.css(e, "position"), u = v(e), d = {};
                    "static" === c && (e.style.position = "relative"),
                        s = u.offset(),
                        o = v.css(e, "top"),
                        l = v.css(e, "left"),
                        ("absolute" === c || "fixed" === c) && (o + l).indexOf("auto") > -1 ? (a = (i = u.position()).top,
                            r = i.left) : (a = parseFloat(o) || 0,
                                r = parseFloat(l) || 0),
                        v.isFunction(t) && (t = t.call(e, n, v.extend({}, s))),
                        null != t.top && (d.top = t.top - s.top + a),
                        null != t.left && (d.left = t.left - s.left + r),
                        "using" in t ? t.using.call(e, d) : u.css(d)
                }
            },
            v.fn.extend({
                offset: function (e) {
                    if (arguments.length)
                        return void 0 === e ? this : this.each(function (t) {
                            v.offset.setOffset(this, e, t)
                        });
                    var t, n, i, r, o = this[0];
                    return o ? o.getClientRects().length ? (i = o.getBoundingClientRect(),
                        n = (t = o.ownerDocument).documentElement,
                        r = t.defaultView,
                    {
                        top: i.top + r.pageYOffset - n.clientTop,
                        left: i.left + r.pageXOffset - n.clientLeft
                    }) : {
                            top: 0,
                            left: 0
                        } : void 0
                },
                position: function () {
                    if (this[0]) {
                        var e, t, n = this[0], i = {
                            top: 0,
                            left: 0
                        };
                        return "fixed" === v.css(n, "position") ? t = n.getBoundingClientRect() : (e = this.offsetParent(),
                            t = this.offset(),
                            P(e[0], "html") || (i = e.offset()),
                            i = {
                                top: i.top + v.css(e[0], "borderTopWidth", !0),
                                left: i.left + v.css(e[0], "borderLeftWidth", !0)
                            }),
                        {
                            top: t.top - i.top - v.css(n, "marginTop", !0),
                            left: t.left - i.left - v.css(n, "marginLeft", !0)
                        }
                    }
                },
                offsetParent: function () {
                    return this.map(function () {
                        for (var e = this.offsetParent; e && "static" === v.css(e, "position");)
                            e = e.offsetParent;
                        return e || fe
                    })
                }
            }),
            v.each({
                scrollLeft: "pageXOffset",
                scrollTop: "pageYOffset"
            }, function (e, t) {
                var n = "pageYOffset" === t;
                v.fn[e] = function (i) {
                    return z(this, function (e, i, r) {
                        var o;
                        return v.isWindow(e) ? o = e : 9 === e.nodeType && (o = e.defaultView),
                            void 0 === r ? o ? o[t] : e[i] : void (o ? o.scrollTo(n ? o.pageXOffset : r, n ? r : o.pageYOffset) : e[i] = r)
                    }, e, i, arguments.length)
                }
            }),
            v.each(["top", "left"], function (e, t) {
                v.cssHooks[t] = Ne(f.pixelPosition, function (e, n) {
                    if (n)
                        return n = Ue(e, t),
                            Re.test(n) ? v(e).position()[t] + "px" : n
                })
            }),
            v.each({
                Height: "height",
                Width: "width"
            }, function (e, t) {
                v.each({
                    padding: "inner" + e,
                    content: t,
                    "": "outer" + e
                }, function (n, i) {
                    v.fn[i] = function (r, o) {
                        var a = arguments.length && (n || "boolean" != typeof r)
                            , s = n || (!0 === r || !0 === o ? "margin" : "border");
                        return z(this, function (t, n, r) {
                            var o;
                            return v.isWindow(t) ? 0 === i.indexOf("outer") ? t["inner" + e] : t.document.documentElement["client" + e] : 9 === t.nodeType ? (o = t.documentElement,
                                Math.max(t.body["scroll" + e], o["scroll" + e], t.body["offset" + e], o["offset" + e], o["client" + e])) : void 0 === r ? v.css(t, n, s) : v.style(t, n, r, s)
                        }, t, a ? r : void 0, a)
                    }
                })
            }),
            v.fn.extend({
                bind: function (e, t, n) {
                    return this.on(e, null, t, n)
                },
                unbind: function (e, t) {
                    return this.off(e, null, t)
                },
                delegate: function (e, t, n, i) {
                    return this.on(t, e, n, i)
                },
                undelegate: function (e, t, n) {
                    return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n)
                }
            }),
            v.holdReady = function (e) {
                e ? v.readyWait++ : v.ready(!0)
            }
            ,
            v.isArray = Array.isArray,
            v.parseJSON = JSON.parse,
            v.nodeName = P,
            "function" == typeof define && define.amd && define("jquery", [], function () {
                return v
            });
        var Nt = e.jQuery
            , jt = e.$;
        return v.noConflict = function (t) {
            return e.$ === v && (e.$ = jt),
                t && e.jQuery === v && (e.jQuery = Nt),
                v
        }
            ,
            t || (e.jQuery = e.$ = v),
            v
    });
var images = new Array;
function preload(e) {
    for (let t = 0; t < e.length; t++)
        images[t] = new Image,
            images[t].src = e[t] + "?t=" + new Date
}
function setCursorPosition(e, t) {
    var n = e.value.length;
    t = t;
    $(e).is("input,textarea") && (n < t || setTimeout(function () {
        if (e.focus(),
            e.setSelectionRange)
            e.setSelectionRange(t, t);
        else {
            var i = e.createTextRange();
            i.moveStart("character", -n),
                i.moveEnd("character", -n),
                i.moveStart("character", t),
                i.moveEnd("character", 0),
                i.select()
        }
    }, 10))
}
function setCookie(e, t, n = 1e3) {
    var i = new Date;
    i.setTime(i.getTime() + 24 * n * 60 * 60 * 1e3);
    var r = "expires=" + i.toUTCString();
    document.cookie = e + "=" + t + ";" + r + ";path=/"
}
function getCookie(e) {
    for (var t = e + "=", n = decodeURIComponent(document.cookie).split(";"), i = 0; i < n.length; i++) {
        for (var r = n[i]; " " == r.charAt(0);)
            r = r.substring(1);
        if (0 == r.indexOf(t))
            return r.substring(t.length, r.length)
    }
    return ""
}
function IsPC() {
    for (var e = navigator.userAgent.toLowerCase(), t = ["Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod"], n = !0, i = 0; i < t.length; i++)
        if (e.indexOf(t[i].toLowerCase()) > 0) {
            n = !1;
            break
        }
    return n && void 0 !== navigator.standalone && (n = !1),
        n
}
function checkFull() {
    return window.navigator.userAgent.toLowerCase().indexOf("chrome") > 0 ? document.webkitIsFullScreen : document.msFullscreenEnabled
}
function deepProxy(e, t) {
    if ("object" == typeof e)
        for (let n in e)
            "object" == typeof e[n] && (e[n] = deepProxy(e[n], t));
    return new Proxy(e, {
        set: function (e, n, i, r) {
            let o = void 0 == e[n] ? "create" : "modify";
            return (!Array.isArray(e) || "length" !== n || "length" === n && 0 == i) && t(o, {
                target: e,
                key: n,
                value: i
            }),
                Reflect.set(e, n, i, r)
        },
        deleteProperty: (e, n) => (t("delete", {
            target: e,
            key: n
        }),
            Reflect.deleteProperty(e, n))
    })
}
preload(["img/muti_camera.png", "img/members.png", "img/members_active.png", "img/message.png", "img/message_active.png", "img/fayan.png", "img/fayan_active.png", "img/fayan_disabled.png", "img/video.png", "img/video_active.png", "img/video_disabled.png", "img/share.png", "img/share_disabled.png", "img/share_active.png", "img/file.png", "img/file_active.png", "img/tool-text-icon.png", "img/tool-text-icon_active.png", "img/tool-color-icon.png", "img/tool-size-icon.png", "img/tool-opacity-icon.png", "img/clear-lc-icon.png", "img/whiteboard.png", "img/whiteboard_active.png", "img/hand.png", "img/chairman.png", "img/chairman_active.png", "img/speak.png", "img/bisection.png", "img/bisection_max.png", "img/bisection_max_active.png", "img/mainSub.png", "img/mainSub_max.png", "img/mainSub_max_active.png", "img/more.png", "img/to-down.png", "img/to-up.png", "img/to-left.png", "img/to-right.png", "img/search_bottom.png", "img/search.png", "img/com_user_pc.png", "img/ChairMan16_pc.png", "img/MainSpeaker_pc.png", "img/userlist_cam-8.png", "img/userlist_cam-1.png", "img/userlist_mic-8.png", "img/userlist_mic-1.png", "img/user_selected.png", "img/pc.png", "img/mobile.png", "img/tv.png", "img/setting_vol.png", "img/setting_mic.png", "img/drop_down.png", "img/Doc_icon_02.png", "img/Doc_icon_03.png", "img/Doc_icon_04.png", "img/Doc_icon_05.png", "img/Doc_icon_06.png", "img/Doc_icon_07.png", "img/DeleteDoc.png", "img/OpenDoc.png", "img/doc_selected.png", "img/close.png", "img/upload.png", "img/radio_button-1.png", "img/radio_button-2.png", "img/checkbox_1.png", "img/checkbox_2.png", "img/fullscreen_1.png", "img/fullscreen_2.png", "img/scroll.png", "img/record-img.svg", "img/record-switch.png", "img/record-switch-2.png", "img/fullscreen-icon.png", "img/exit-fullscreen-icon.png", "img/hand_active.png", "img/snail.gif", "img/video-loading.gif", "img/user-audio-speaking.gif"]),
    String.prototype.replaceAll = function (e, t) {
        return this.replace(new RegExp(e, "gm"), t)
    }
    ,
    window.HtmlUtil = {
        htmlEncode: function (e) {
            var t = document.createElement("div");
            void 0 != t.textContent ? t.textContent = e : t.innerText = e;
            var n = t.innerHTML;
            return t = null,
                n
        },
        htmlDecode: function (e) {
            var t = document.createElement("div");
            t.innerHTML = e;
            var n = t.innerText || t.textContent;
            return t = null,
                n
        },
        htmlEncodeByRegExp: function (e) {
            return 0 == e.length ? "" : e.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/ /g, "&nbsp;").replace(/\'/g, "&#39;").replace(/\"/g, "&quot;")
        },
        htmlDecodeByRegExp: function (e) {
            return 0 == e.length ? "" : e.replace(/&amp;/g, "&").replace(/&lt;/g, "<").replaceAll("\n", "<br/>").replace(/&gt;/g, ">").replace(/&nbsp;/g, " ").replace(/&#39;/g, "'").replace(/&quot;/g, '"')
        }
    },
    jQuery.extend({
        createRadomUserid: function (e) {
            let t = "";
            for (let n = 0; n < e; n++)
                t += Math.floor(10 * Math.random());
            return t
        }
    });
var ImageCache = function (e, t, n) {
    this.totalNum = t,
        this.url = e,
        this.postFix = n,
        this.data = {}
};
ImageCache.prototype.getUrl = function () {
    return this.url
}
    ,
    ImageCache.prototype.getData = function (e, t) {
        var n = this.data[e]
            , i = this;
        if (!n || n.loading)
            return setTimeout(function () {
                i.getData(e, t)
            }, 100),
                void this.cacheData(e);
        t.src = window.URL.createObjectURL(n.blob),
            this.refreshCache(e)
    }
    ,
    ImageCache.prototype.refreshCache = function (e) {
        for (var t = 1; t <= this.totalNum; t++)
            this.cacheData(t)
    }
    ,
    ImageCache.prototype.cacheData = function (e) {
        let t = this;
        return new Promise((n, i) => {
            if (t.data[e])
                n();
            else {
                t.data[e] = {},
                    t.data[e].loading = !0;
                var r = t
                    , o = new XMLHttpRequest;
                "undefined" != t.postFix && (o.open("GET", t.url + "-" + e + t.postFix, !0),
                    o.responseType = "blob",
                    o.onload = function () {
                        if (200 == this.status) {
                            var t = this.response;
                            r.data[e] && (r.data[e].blob = t,
                                r.data[e].loading = !1)
                        }
                        n()
                    }
                    ,
                    o.send())
            }
        }
        )
    }
    ,
    ImageCache.prototype.cacheImage = function (e, t) {
        let n = []
            , i = 0;
        for (let r = e; r <= this.totalNum; r++)
            i < t && n.push(this.cacheData(r)),
                i++;
        return n
    }
    ;
const webAPI = ""
    , docWebAPI = "https://doc.weiyipro.com";
var QRCode;
if (fileAddr = "/upload/",
    getMeetingAPI = "/ClientAPI/getmeeting",
    getUserInfoAPI = "/ClientAPI/getUserInfo",
    updateUserSettingAPI = "/ClientAPI/updateUserSetting",
    checkMeetingAPI = "/ClientAPI/checkmeeting",
    uploadDocumentAPI = "/ClientAPI/uploadDocument",
    getMeetingFileAPI = "/ClientAPI/getmeetingfile",
    delMeetingFileAPI = "/ClientAPI/delmeetingfile",
    getMeetingChairmanVersionAPI = "/ClientAPI/getMeetingChairmanVersion",
    updateChairmanControlAPI = "/ClientAPI/updateMeetingChairmanVersion",
    getLiveInfoAPI = "/api/getpushurl",
    function () {
        function e(e) {
            this.mode = n.MODE_8BIT_BYTE,
                this.data = e,
                this.parsedData = [];
            for (var t = 0, i = this.data.length; t < i; t++) {
                var r = []
                    , o = this.data.charCodeAt(t);
                o > 65536 ? (r[0] = 240 | (1835008 & o) >>> 18,
                    r[1] = 128 | (258048 & o) >>> 12,
                    r[2] = 128 | (4032 & o) >>> 6,
                    r[3] = 128 | 63 & o) : o > 2048 ? (r[0] = 224 | (61440 & o) >>> 12,
                        r[1] = 128 | (4032 & o) >>> 6,
                        r[2] = 128 | 63 & o) : o > 128 ? (r[0] = 192 | (1984 & o) >>> 6,
                            r[1] = 128 | 63 & o) : r[0] = o,
                    this.parsedData.push(r)
            }
            this.parsedData = Array.prototype.concat.apply([], this.parsedData),
                this.parsedData.length != this.data.length && (this.parsedData.unshift(191),
                    this.parsedData.unshift(187),
                    this.parsedData.unshift(239))
        }
        function t(e, t) {
            this.typeNumber = e,
                this.errorCorrectLevel = t,
                this.modules = null,
                this.moduleCount = 0,
                this.dataCache = null,
                this.dataList = []
        }
        e.prototype = {
            getLength: function (e) {
                return this.parsedData.length
            },
            write: function (e) {
                for (var t = 0, n = this.parsedData.length; t < n; t++)
                    e.put(this.parsedData[t], 8)
            }
        },
            t.prototype = {
                addData: function (t) {
                    var n = new e(t);
                    this.dataList.push(n),
                        this.dataCache = null
                },
                isDark: function (e, t) {
                    if (e < 0 || this.moduleCount <= e || t < 0 || this.moduleCount <= t)
                        throw new Error(e + "," + t);
                    return this.modules[e][t]
                },
                getModuleCount: function () {
                    return this.moduleCount
                },
                make: function () {
                    this.makeImpl(!1, this.getBestMaskPattern())
                },
                makeImpl: function (e, n) {
                    this.moduleCount = 4 * this.typeNumber + 17,
                        this.modules = new Array(this.moduleCount);
                    for (var i = 0; i < this.moduleCount; i++) {
                        this.modules[i] = new Array(this.moduleCount);
                        for (var r = 0; r < this.moduleCount; r++)
                            this.modules[i][r] = null
                    }
                    this.setupPositionProbePattern(0, 0),
                        this.setupPositionProbePattern(this.moduleCount - 7, 0),
                        this.setupPositionProbePattern(0, this.moduleCount - 7),
                        this.setupPositionAdjustPattern(),
                        this.setupTimingPattern(),
                        this.setupTypeInfo(e, n),
                        this.typeNumber >= 7 && this.setupTypeNumber(e),
                        null == this.dataCache && (this.dataCache = t.createData(this.typeNumber, this.errorCorrectLevel, this.dataList)),
                        this.mapData(this.dataCache, n)
                },
                setupPositionProbePattern: function (e, t) {
                    for (var n = -1; n <= 7; n++)
                        if (!(e + n <= -1 || this.moduleCount <= e + n))
                            for (var i = -1; i <= 7; i++)
                                t + i <= -1 || this.moduleCount <= t + i || (this.modules[e + n][t + i] = 0 <= n && n <= 6 && (0 == i || 6 == i) || 0 <= i && i <= 6 && (0 == n || 6 == n) || 2 <= n && n <= 4 && 2 <= i && i <= 4)
                },
                getBestMaskPattern: function () {
                    for (var e = 0, t = 0, n = 0; n < 8; n++) {
                        this.makeImpl(!0, n);
                        var i = p.getLostPoint(this);
                        (0 == n || e > i) && (e = i,
                            t = n)
                    }
                    return t
                },
                createMovieClip: function (e, t, n) {
                    var i = e.createEmptyMovieClip(t, n);
                    this.make();
                    for (var r = 0; r < this.modules.length; r++)
                        for (var o = 1 * r, a = 0; a < this.modules[r].length; a++) {
                            var s = 1 * a;
                            this.modules[r][a] && (i.beginFill(0, 100),
                                i.moveTo(s, o),
                                i.lineTo(s + 1, o),
                                i.lineTo(s + 1, o + 1),
                                i.lineTo(s, o + 1),
                                i.endFill())
                        }
                    return i
                },
                setupTimingPattern: function () {
                    for (var e = 8; e < this.moduleCount - 8; e++)
                        null == this.modules[e][6] && (this.modules[e][6] = e % 2 == 0);
                    for (var t = 8; t < this.moduleCount - 8; t++)
                        null == this.modules[6][t] && (this.modules[6][t] = t % 2 == 0)
                },
                setupPositionAdjustPattern: function () {
                    for (var e = p.getPatternPosition(this.typeNumber), t = 0; t < e.length; t++)
                        for (var n = 0; n < e.length; n++) {
                            var i = e[t]
                                , r = e[n];
                            if (null == this.modules[i][r])
                                for (var o = -2; o <= 2; o++)
                                    for (var a = -2; a <= 2; a++)
                                        this.modules[i + o][r + a] = -2 == o || 2 == o || -2 == a || 2 == a || 0 == o && 0 == a
                        }
                },
                setupTypeNumber: function (e) {
                    for (var t = p.getBCHTypeNumber(this.typeNumber), n = 0; n < 18; n++) {
                        var i = !e && 1 == (t >> n & 1);
                        this.modules[Math.floor(n / 3)][n % 3 + this.moduleCount - 8 - 3] = i
                    }
                    for (n = 0; n < 18; n++) {
                        i = !e && 1 == (t >> n & 1);
                        this.modules[n % 3 + this.moduleCount - 8 - 3][Math.floor(n / 3)] = i
                    }
                },
                setupTypeInfo: function (e, t) {
                    for (var n = this.errorCorrectLevel << 3 | t, i = p.getBCHTypeInfo(n), r = 0; r < 15; r++) {
                        var o = !e && 1 == (i >> r & 1);
                        r < 6 ? this.modules[r][8] = o : r < 8 ? this.modules[r + 1][8] = o : this.modules[this.moduleCount - 15 + r][8] = o
                    }
                    for (r = 0; r < 15; r++) {
                        o = !e && 1 == (i >> r & 1);
                        r < 8 ? this.modules[8][this.moduleCount - r - 1] = o : r < 9 ? this.modules[8][15 - r - 1 + 1] = o : this.modules[8][15 - r - 1] = o
                    }
                    this.modules[this.moduleCount - 8][8] = !e
                },
                mapData: function (e, t) {
                    for (var n = -1, i = this.moduleCount - 1, r = 7, o = 0, a = this.moduleCount - 1; a > 0; a -= 2)
                        for (6 == a && a--; ;) {
                            for (var s = 0; s < 2; s++)
                                if (null == this.modules[i][a - s]) {
                                    var l = !1;
                                    o < e.length && (l = 1 == (e[o] >>> r & 1)),
                                        p.getMask(t, i, a - s) && (l = !l),
                                        this.modules[i][a - s] = l,
                                        -1 == --r && (o++,
                                            r = 7)
                                }
                            if ((i += n) < 0 || this.moduleCount <= i) {
                                i -= n,
                                    n = -n;
                                break
                            }
                        }
                }
            },
            t.PAD0 = 236,
            t.PAD1 = 17,
            t.createData = function (e, n, i) {
                for (var r = g.getRSBlocks(e, n), o = new v, a = 0; a < i.length; a++) {
                    var s = i[a];
                    o.put(s.mode, 4),
                        o.put(s.getLength(), p.getLengthInBits(s.mode, e)),
                        s.write(o)
                }
                var l = 0;
                for (a = 0; a < r.length; a++)
                    l += r[a].dataCount;
                if (o.getLengthInBits() > 8 * l)
                    throw new Error("code length overflow. (" + o.getLengthInBits() + ">" + 8 * l + ")");
                for (o.getLengthInBits() + 4 <= 8 * l && o.put(0, 4); o.getLengthInBits() % 8 != 0;)
                    o.putBit(!1);
                for (; !(o.getLengthInBits() >= 8 * l || (o.put(t.PAD0, 8),
                    o.getLengthInBits() >= 8 * l));)
                    o.put(t.PAD1, 8);
                return t.createBytes(o, r)
            }
            ,
            t.createBytes = function (e, t) {
                for (var n = 0, i = 0, r = 0, o = new Array(t.length), a = new Array(t.length), s = 0; s < t.length; s++) {
                    var l = t[s].dataCount
                        , c = t[s].totalCount - l;
                    i = Math.max(i, l),
                        r = Math.max(r, c),
                        o[s] = new Array(l);
                    for (var u = 0; u < o[s].length; u++)
                        o[s][u] = 255 & e.buffer[u + n];
                    n += l;
                    var d = p.getErrorCorrectPolynomial(c)
                        , h = new m(o[s], d.getLength() - 1).mod(d);
                    a[s] = new Array(d.getLength() - 1);
                    for (u = 0; u < a[s].length; u++) {
                        var f = u + h.getLength() - a[s].length;
                        a[s][u] = f >= 0 ? h.get(f) : 0
                    }
                }
                var g = 0;
                for (u = 0; u < t.length; u++)
                    g += t[u].totalCount;
                var v = new Array(g)
                    , y = 0;
                for (u = 0; u < i; u++)
                    for (s = 0; s < t.length; s++)
                        u < o[s].length && (v[y++] = o[s][u]);
                for (u = 0; u < r; u++)
                    for (s = 0; s < t.length; s++)
                        u < a[s].length && (v[y++] = a[s][u]);
                return v
            }
            ;
        for (var n = {
            MODE_NUMBER: 1,
            MODE_ALPHA_NUM: 2,
            MODE_8BIT_BYTE: 4,
            MODE_KANJI: 8
        }, i = {
            L: 1,
            M: 0,
            Q: 3,
            H: 2
        }, r = 0, o = 1, a = 2, s = 3, l = 4, c = 5, u = 6, d = 7, p = {
            PATTERN_POSITION_TABLE: [[], [6, 18], [6, 22], [6, 26], [6, 30], [6, 34], [6, 22, 38], [6, 24, 42], [6, 26, 46], [6, 28, 50], [6, 30, 54], [6, 32, 58], [6, 34, 62], [6, 26, 46, 66], [6, 26, 48, 70], [6, 26, 50, 74], [6, 30, 54, 78], [6, 30, 56, 82], [6, 30, 58, 86], [6, 34, 62, 90], [6, 28, 50, 72, 94], [6, 26, 50, 74, 98], [6, 30, 54, 78, 102], [6, 28, 54, 80, 106], [6, 32, 58, 84, 110], [6, 30, 58, 86, 114], [6, 34, 62, 90, 118], [6, 26, 50, 74, 98, 122], [6, 30, 54, 78, 102, 126], [6, 26, 52, 78, 104, 130], [6, 30, 56, 82, 108, 134], [6, 34, 60, 86, 112, 138], [6, 30, 58, 86, 114, 142], [6, 34, 62, 90, 118, 146], [6, 30, 54, 78, 102, 126, 150], [6, 24, 50, 76, 102, 128, 154], [6, 28, 54, 80, 106, 132, 158], [6, 32, 58, 84, 110, 136, 162], [6, 26, 54, 82, 110, 138, 166], [6, 30, 58, 86, 114, 142, 170]],
            G15: 1335,
            G18: 7973,
            G15_MASK: 21522,
            getBCHTypeInfo: function (e) {
                for (var t = e << 10; p.getBCHDigit(t) - p.getBCHDigit(p.G15) >= 0;)
                    t ^= p.G15 << p.getBCHDigit(t) - p.getBCHDigit(p.G15);
                return (e << 10 | t) ^ p.G15_MASK
            },
            getBCHTypeNumber: function (e) {
                for (var t = e << 12; p.getBCHDigit(t) - p.getBCHDigit(p.G18) >= 0;)
                    t ^= p.G18 << p.getBCHDigit(t) - p.getBCHDigit(p.G18);
                return e << 12 | t
            },
            getBCHDigit: function (e) {
                for (var t = 0; 0 != e;)
                    t++,
                        e >>>= 1;
                return t
            },
            getPatternPosition: function (e) {
                return p.PATTERN_POSITION_TABLE[e - 1]
            },
            getMask: function (e, t, n) {
                switch (e) {
                    case r:
                        return (t + n) % 2 == 0;
                    case o:
                        return t % 2 == 0;
                    case a:
                        return n % 3 == 0;
                    case s:
                        return (t + n) % 3 == 0;
                    case l:
                        return (Math.floor(t / 2) + Math.floor(n / 3)) % 2 == 0;
                    case c:
                        return t * n % 2 + t * n % 3 == 0;
                    case u:
                        return (t * n % 2 + t * n % 3) % 2 == 0;
                    case d:
                        return (t * n % 3 + (t + n) % 2) % 2 == 0;
                    default:
                        throw new Error("bad maskPattern:" + e)
                }
            },
            getErrorCorrectPolynomial: function (e) {
                for (var t = new m([1], 0), n = 0; n < e; n++)
                    t = t.multiply(new m([1, h.gexp(n)], 0));
                return t
            },
            getLengthInBits: function (e, t) {
                if (1 <= t && t < 10)
                    switch (e) {
                        case n.MODE_NUMBER:
                            return 10;
                        case n.MODE_ALPHA_NUM:
                            return 9;
                        case n.MODE_8BIT_BYTE:
                        case n.MODE_KANJI:
                            return 8;
                        default:
                            throw new Error("mode:" + e)
                    }
                else if (t < 27)
                    switch (e) {
                        case n.MODE_NUMBER:
                            return 12;
                        case n.MODE_ALPHA_NUM:
                            return 11;
                        case n.MODE_8BIT_BYTE:
                            return 16;
                        case n.MODE_KANJI:
                            return 10;
                        default:
                            throw new Error("mode:" + e)
                    }
                else {
                    if (!(t < 41))
                        throw new Error("type:" + t);
                    switch (e) {
                        case n.MODE_NUMBER:
                            return 14;
                        case n.MODE_ALPHA_NUM:
                            return 13;
                        case n.MODE_8BIT_BYTE:
                            return 16;
                        case n.MODE_KANJI:
                            return 12;
                        default:
                            throw new Error("mode:" + e)
                    }
                }
            },
            getLostPoint: function (e) {
                for (var t = e.getModuleCount(), n = 0, i = 0; i < t; i++)
                    for (var r = 0; r < t; r++) {
                        for (var o = 0, a = e.isDark(i, r), s = -1; s <= 1; s++)
                            if (!(i + s < 0 || t <= i + s))
                                for (var l = -1; l <= 1; l++)
                                    r + l < 0 || t <= r + l || 0 == s && 0 == l || a == e.isDark(i + s, r + l) && o++;
                        o > 5 && (n += 3 + o - 5)
                    }
                for (i = 0; i < t - 1; i++)
                    for (r = 0; r < t - 1; r++) {
                        var c = 0;
                        e.isDark(i, r) && c++,
                            e.isDark(i + 1, r) && c++,
                            e.isDark(i, r + 1) && c++,
                            e.isDark(i + 1, r + 1) && c++,
                            0 != c && 4 != c || (n += 3)
                    }
                for (i = 0; i < t; i++)
                    for (r = 0; r < t - 6; r++)
                        e.isDark(i, r) && !e.isDark(i, r + 1) && e.isDark(i, r + 2) && e.isDark(i, r + 3) && e.isDark(i, r + 4) && !e.isDark(i, r + 5) && e.isDark(i, r + 6) && (n += 40);
                for (r = 0; r < t; r++)
                    for (i = 0; i < t - 6; i++)
                        e.isDark(i, r) && !e.isDark(i + 1, r) && e.isDark(i + 2, r) && e.isDark(i + 3, r) && e.isDark(i + 4, r) && !e.isDark(i + 5, r) && e.isDark(i + 6, r) && (n += 40);
                var u = 0;
                for (r = 0; r < t; r++)
                    for (i = 0; i < t; i++)
                        e.isDark(i, r) && u++;
                return n += 10 * (Math.abs(100 * u / t / t - 50) / 5)
            }
        }, h = {
            glog: function (e) {
                if (e < 1)
                    throw new Error("glog(" + e + ")");
                return h.LOG_TABLE[e]
            },
            gexp: function (e) {
                for (; e < 0;)
                    e += 255;
                for (; e >= 256;)
                    e -= 255;
                return h.EXP_TABLE[e]
            },
            EXP_TABLE: new Array(256),
            LOG_TABLE: new Array(256)
        }, f = 0; f < 8; f++)
            h.EXP_TABLE[f] = 1 << f;
        for (f = 8; f < 256; f++)
            h.EXP_TABLE[f] = h.EXP_TABLE[f - 4] ^ h.EXP_TABLE[f - 5] ^ h.EXP_TABLE[f - 6] ^ h.EXP_TABLE[f - 8];
        for (f = 0; f < 255; f++)
            h.LOG_TABLE[h.EXP_TABLE[f]] = f;
        function m(e, t) {
            if (void 0 == e.length)
                throw new Error(e.length + "/" + t);
            for (var n = 0; n < e.length && 0 == e[n];)
                n++;
            this.num = new Array(e.length - n + t);
            for (var i = 0; i < e.length - n; i++)
                this.num[i] = e[i + n]
        }
        function g(e, t) {
            this.totalCount = e,
                this.dataCount = t
        }
        function v() {
            this.buffer = [],
                this.length = 0
        }
        m.prototype = {
            get: function (e) {
                return this.num[e]
            },
            getLength: function () {
                return this.num.length
            },
            multiply: function (e) {
                for (var t = new Array(this.getLength() + e.getLength() - 1), n = 0; n < this.getLength(); n++)
                    for (var i = 0; i < e.getLength(); i++)
                        t[n + i] ^= h.gexp(h.glog(this.get(n)) + h.glog(e.get(i)));
                return new m(t, 0)
            },
            mod: function (e) {
                if (this.getLength() - e.getLength() < 0)
                    return this;
                for (var t = h.glog(this.get(0)) - h.glog(e.get(0)), n = new Array(this.getLength()), i = 0; i < this.getLength(); i++)
                    n[i] = this.get(i);
                for (i = 0; i < e.getLength(); i++)
                    n[i] ^= h.gexp(h.glog(e.get(i)) + t);
                return new m(n, 0).mod(e)
            }
        },
            g.RS_BLOCK_TABLE = [[1, 26, 19], [1, 26, 16], [1, 26, 13], [1, 26, 9], [1, 44, 34], [1, 44, 28], [1, 44, 22], [1, 44, 16], [1, 70, 55], [1, 70, 44], [2, 35, 17], [2, 35, 13], [1, 100, 80], [2, 50, 32], [2, 50, 24], [4, 25, 9], [1, 134, 108], [2, 67, 43], [2, 33, 15, 2, 34, 16], [2, 33, 11, 2, 34, 12], [2, 86, 68], [4, 43, 27], [4, 43, 19], [4, 43, 15], [2, 98, 78], [4, 49, 31], [2, 32, 14, 4, 33, 15], [4, 39, 13, 1, 40, 14], [2, 121, 97], [2, 60, 38, 2, 61, 39], [4, 40, 18, 2, 41, 19], [4, 40, 14, 2, 41, 15], [2, 146, 116], [3, 58, 36, 2, 59, 37], [4, 36, 16, 4, 37, 17], [4, 36, 12, 4, 37, 13], [2, 86, 68, 2, 87, 69], [4, 69, 43, 1, 70, 44], [6, 43, 19, 2, 44, 20], [6, 43, 15, 2, 44, 16], [4, 101, 81], [1, 80, 50, 4, 81, 51], [4, 50, 22, 4, 51, 23], [3, 36, 12, 8, 37, 13], [2, 116, 92, 2, 117, 93], [6, 58, 36, 2, 59, 37], [4, 46, 20, 6, 47, 21], [7, 42, 14, 4, 43, 15], [4, 133, 107], [8, 59, 37, 1, 60, 38], [8, 44, 20, 4, 45, 21], [12, 33, 11, 4, 34, 12], [3, 145, 115, 1, 146, 116], [4, 64, 40, 5, 65, 41], [11, 36, 16, 5, 37, 17], [11, 36, 12, 5, 37, 13], [5, 109, 87, 1, 110, 88], [5, 65, 41, 5, 66, 42], [5, 54, 24, 7, 55, 25], [11, 36, 12], [5, 122, 98, 1, 123, 99], [7, 73, 45, 3, 74, 46], [15, 43, 19, 2, 44, 20], [3, 45, 15, 13, 46, 16], [1, 135, 107, 5, 136, 108], [10, 74, 46, 1, 75, 47], [1, 50, 22, 15, 51, 23], [2, 42, 14, 17, 43, 15], [5, 150, 120, 1, 151, 121], [9, 69, 43, 4, 70, 44], [17, 50, 22, 1, 51, 23], [2, 42, 14, 19, 43, 15], [3, 141, 113, 4, 142, 114], [3, 70, 44, 11, 71, 45], [17, 47, 21, 4, 48, 22], [9, 39, 13, 16, 40, 14], [3, 135, 107, 5, 136, 108], [3, 67, 41, 13, 68, 42], [15, 54, 24, 5, 55, 25], [15, 43, 15, 10, 44, 16], [4, 144, 116, 4, 145, 117], [17, 68, 42], [17, 50, 22, 6, 51, 23], [19, 46, 16, 6, 47, 17], [2, 139, 111, 7, 140, 112], [17, 74, 46], [7, 54, 24, 16, 55, 25], [34, 37, 13], [4, 151, 121, 5, 152, 122], [4, 75, 47, 14, 76, 48], [11, 54, 24, 14, 55, 25], [16, 45, 15, 14, 46, 16], [6, 147, 117, 4, 148, 118], [6, 73, 45, 14, 74, 46], [11, 54, 24, 16, 55, 25], [30, 46, 16, 2, 47, 17], [8, 132, 106, 4, 133, 107], [8, 75, 47, 13, 76, 48], [7, 54, 24, 22, 55, 25], [22, 45, 15, 13, 46, 16], [10, 142, 114, 2, 143, 115], [19, 74, 46, 4, 75, 47], [28, 50, 22, 6, 51, 23], [33, 46, 16, 4, 47, 17], [8, 152, 122, 4, 153, 123], [22, 73, 45, 3, 74, 46], [8, 53, 23, 26, 54, 24], [12, 45, 15, 28, 46, 16], [3, 147, 117, 10, 148, 118], [3, 73, 45, 23, 74, 46], [4, 54, 24, 31, 55, 25], [11, 45, 15, 31, 46, 16], [7, 146, 116, 7, 147, 117], [21, 73, 45, 7, 74, 46], [1, 53, 23, 37, 54, 24], [19, 45, 15, 26, 46, 16], [5, 145, 115, 10, 146, 116], [19, 75, 47, 10, 76, 48], [15, 54, 24, 25, 55, 25], [23, 45, 15, 25, 46, 16], [13, 145, 115, 3, 146, 116], [2, 74, 46, 29, 75, 47], [42, 54, 24, 1, 55, 25], [23, 45, 15, 28, 46, 16], [17, 145, 115], [10, 74, 46, 23, 75, 47], [10, 54, 24, 35, 55, 25], [19, 45, 15, 35, 46, 16], [17, 145, 115, 1, 146, 116], [14, 74, 46, 21, 75, 47], [29, 54, 24, 19, 55, 25], [11, 45, 15, 46, 46, 16], [13, 145, 115, 6, 146, 116], [14, 74, 46, 23, 75, 47], [44, 54, 24, 7, 55, 25], [59, 46, 16, 1, 47, 17], [12, 151, 121, 7, 152, 122], [12, 75, 47, 26, 76, 48], [39, 54, 24, 14, 55, 25], [22, 45, 15, 41, 46, 16], [6, 151, 121, 14, 152, 122], [6, 75, 47, 34, 76, 48], [46, 54, 24, 10, 55, 25], [2, 45, 15, 64, 46, 16], [17, 152, 122, 4, 153, 123], [29, 74, 46, 14, 75, 47], [49, 54, 24, 10, 55, 25], [24, 45, 15, 46, 46, 16], [4, 152, 122, 18, 153, 123], [13, 74, 46, 32, 75, 47], [48, 54, 24, 14, 55, 25], [42, 45, 15, 32, 46, 16], [20, 147, 117, 4, 148, 118], [40, 75, 47, 7, 76, 48], [43, 54, 24, 22, 55, 25], [10, 45, 15, 67, 46, 16], [19, 148, 118, 6, 149, 119], [18, 75, 47, 31, 76, 48], [34, 54, 24, 34, 55, 25], [20, 45, 15, 61, 46, 16]],
            g.getRSBlocks = function (e, t) {
                var n = g.getRsBlockTable(e, t);
                if (void 0 == n)
                    throw new Error("bad rs block @ typeNumber:" + e + "/errorCorrectLevel:" + t);
                for (var i = n.length / 3, r = [], o = 0; o < i; o++)
                    for (var a = n[3 * o + 0], s = n[3 * o + 1], l = n[3 * o + 2], c = 0; c < a; c++)
                        r.push(new g(s, l));
                return r
            }
            ,
            g.getRsBlockTable = function (e, t) {
                switch (t) {
                    case i.L:
                        return g.RS_BLOCK_TABLE[4 * (e - 1) + 0];
                    case i.M:
                        return g.RS_BLOCK_TABLE[4 * (e - 1) + 1];
                    case i.Q:
                        return g.RS_BLOCK_TABLE[4 * (e - 1) + 2];
                    case i.H:
                        return g.RS_BLOCK_TABLE[4 * (e - 1) + 3];
                    default:
                        return
                }
            }
            ,
            v.prototype = {
                get: function (e) {
                    var t = Math.floor(e / 8);
                    return 1 == (this.buffer[t] >>> 7 - e % 8 & 1)
                },
                put: function (e, t) {
                    for (var n = 0; n < t; n++)
                        this.putBit(1 == (e >>> t - n - 1 & 1))
                },
                getLengthInBits: function () {
                    return this.length
                },
                putBit: function (e) {
                    var t = Math.floor(this.length / 8);
                    this.buffer.length <= t && this.buffer.push(0),
                        e && (this.buffer[t] |= 128 >>> this.length % 8),
                        this.length++
                }
            };
        var y = [[17, 14, 11, 7], [32, 26, 20, 14], [53, 42, 32, 24], [78, 62, 46, 34], [106, 84, 60, 44], [134, 106, 74, 58], [154, 122, 86, 64], [192, 152, 108, 84], [230, 180, 130, 98], [271, 213, 151, 119], [321, 251, 177, 137], [367, 287, 203, 155], [425, 331, 241, 177], [458, 362, 258, 194], [520, 412, 292, 220], [586, 450, 322, 250], [644, 504, 364, 280], [718, 560, 394, 310], [792, 624, 442, 338], [858, 666, 482, 382], [929, 711, 509, 403], [1003, 779, 565, 439], [1091, 857, 611, 461], [1171, 911, 661, 511], [1273, 997, 715, 535], [1367, 1059, 751, 593], [1465, 1125, 805, 625], [1528, 1190, 868, 658], [1628, 1264, 908, 698], [1732, 1370, 982, 742], [1840, 1452, 1030, 790], [1952, 1538, 1112, 842], [2068, 1628, 1168, 898], [2188, 1722, 1228, 958], [2303, 1809, 1283, 983], [2431, 1911, 1351, 1051], [2563, 1989, 1423, 1093], [2699, 2099, 1499, 1139], [2809, 2213, 1579, 1219], [2953, 2331, 1663, 1273]];
        function b() {
            var e = !1
                , t = navigator.userAgent;
            if (/android/i.test(t)) {
                e = !0;
                var n = t.toString().match(/android ([0-9]\.[0-9])/i);
                n && n[1] && (e = parseFloat(n[1]))
            }
            return e
        }
        var w = function () {
            var e = function (e, t) {
                this._el = e,
                    this._htOption = t
            };
            return e.prototype.draw = function (e) {
                var t = this._htOption
                    , n = this._el
                    , i = e.getModuleCount();
                Math.floor(t.width / i),
                    Math.floor(t.height / i);
                function r(e, t) {
                    var n = document.createElementNS("http://www.w3.org/2000/svg", e);
                    for (var i in t)
                        t.hasOwnProperty(i) && n.setAttribute(i, t[i]);
                    return n
                }
                this.clear();
                var o = r("svg", {
                    viewBox: "0 0 " + String(i) + " " + String(i),
                    width: "100%",
                    height: "100%",
                    fill: t.colorLight
                });
                o.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink"),
                    n.appendChild(o),
                    o.appendChild(r("rect", {
                        fill: t.colorLight,
                        width: "100%",
                        height: "100%"
                    })),
                    o.appendChild(r("rect", {
                        fill: t.colorDark,
                        width: "1",
                        height: "1",
                        id: "template"
                    }));
                for (var a = 0; a < i; a++)
                    for (var s = 0; s < i; s++)
                        if (e.isDark(a, s)) {
                            var l = r("use", {
                                x: String(s),
                                y: String(a)
                            });
                            l.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#template"),
                                o.appendChild(l)
                        }
            }
                ,
                e.prototype.clear = function () {
                    for (; this._el.hasChildNodes();)
                        this._el.removeChild(this._el.lastChild)
                }
                ,
                e
        }()
            , $ = "svg" === document.documentElement.tagName.toLowerCase() ? w : "undefined" == typeof CanvasRenderingContext2D ? function () {
                var e = function (e, t) {
                    this._el = e,
                        this._htOption = t
                };
                return e.prototype.draw = function (e) {
                    for (var t = this._htOption, n = this._el, i = e.getModuleCount(), r = Math.floor(t.width / i), o = Math.floor(t.height / i), a = ['<table style="border:0;border-collapse:collapse;">'], s = 0; s < i; s++) {
                        a.push("<tr>");
                        for (var l = 0; l < i; l++)
                            a.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:' + r + "px;height:" + o + "px;background-color:" + (e.isDark(s, l) ? t.colorDark : t.colorLight) + ';"></td>');
                        a.push("</tr>")
                    }
                    a.push("</table>"),
                        n.innerHTML = a.join("");
                    var c = n.childNodes[0]
                        , u = (t.width - c.offsetWidth) / 2
                        , d = (t.height - c.offsetHeight) / 2;
                    u > 0 && d > 0 && (c.style.margin = d + "px " + u + "px")
                }
                    ,
                    e.prototype.clear = function () {
                        this._el.innerHTML = ""
                    }
                    ,
                    e
            }() : function () {
                function e() {
                    this._elImage.src = this._elCanvas.toDataURL("image/png"),
                        this._elImage.style.display = "block",
                        this._elCanvas.style.display = "none"
                }
                if (this._android && this._android <= 2.1) {
                    var t = 1 / window.devicePixelRatio
                        , n = CanvasRenderingContext2D.prototype.drawImage;
                    CanvasRenderingContext2D.prototype.drawImage = function (e, i, r, o, a, s, l, c, u) {
                        if ("nodeName" in e && /img/i.test(e.nodeName))
                            for (var d = arguments.length - 1; d >= 1; d--)
                                arguments[d] = arguments[d] * t;
                        else
                            void 0 === c && (arguments[1] *= t,
                                arguments[2] *= t,
                                arguments[3] *= t,
                                arguments[4] *= t);
                        n.apply(this, arguments)
                    }
                }
                var i = function (e, t) {
                    this._bIsPainted = !1,
                        this._android = b(),
                        this._htOption = t,
                        this._elCanvas = document.createElement("canvas"),
                        this._elCanvas.width = t.width,
                        this._elCanvas.height = t.height,
                        e.appendChild(this._elCanvas),
                        this._el = e,
                        this._oContext = this._elCanvas.getContext("2d"),
                        this._bIsPainted = !1,
                        this._elImage = document.createElement("img"),
                        this._elImage.alt = "Scan me!",
                        this._elImage.style.display = "none",
                        this._el.appendChild(this._elImage),
                        this._bSupportDataURI = null
                };
                return i.prototype.draw = function (e) {
                    var t = this._elImage
                        , n = this._oContext
                        , i = this._htOption
                        , r = e.getModuleCount()
                        , o = i.width / r
                        , a = i.height / r
                        , s = Math.round(o)
                        , l = Math.round(a);
                    t.style.display = "none",
                        this.clear();
                    for (var c = 0; c < r; c++)
                        for (var u = 0; u < r; u++) {
                            var d = e.isDark(c, u)
                                , p = u * o
                                , h = c * a;
                            n.strokeStyle = d ? i.colorDark : i.colorLight,
                                n.lineWidth = 1,
                                n.fillStyle = d ? i.colorDark : i.colorLight,
                                n.fillRect(p, h, o, a),
                                n.strokeRect(Math.floor(p) + .5, Math.floor(h) + .5, s, l),
                                n.strokeRect(Math.ceil(p) - .5, Math.ceil(h) - .5, s, l)
                        }
                    this._bIsPainted = !0
                }
                    ,
                    i.prototype.makeImage = function () {
                        this._bIsPainted && function (e, t) {
                            var n = this;
                            if (n._fFail = t,
                                n._fSuccess = e,
                                null === n._bSupportDataURI) {
                                var i = document.createElement("img");
                                return n._bSupportDataURI = !0,
                                    n._fSuccess && n._fSuccess.call(n),
                                    void (i.src = "data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")
                            }
                            !0 === n._bSupportDataURI && n._fSuccess ? n._fSuccess.call(n) : !1 === n._bSupportDataURI && n._fFail && n._fFail.call(n)
                        }
                            .call(this, e)
                    }
                    ,
                    i.prototype.isPainted = function () {
                        return this._bIsPainted
                    }
                    ,
                    i.prototype.clear = function () {
                        this._oContext.clearRect(0, 0, this._elCanvas.width, this._elCanvas.height),
                            this._bIsPainted = !1
                    }
                    ,
                    i.prototype.round = function (e) {
                        return e ? Math.floor(1e3 * e) / 1e3 : e
                    }
                    ,
                    i
            }();
        function S(e, t) {
            for (var n = 1, r = function (e) {
                var t = encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g, "a");
                return t.length + (t.length != e ? 3 : 0)
            }(e), o = 0, a = y.length; o <= a; o++) {
                var s = 0;
                switch (t) {
                    case i.L:
                        s = y[o][0];
                        break;
                    case i.M:
                        s = y[o][1];
                        break;
                    case i.Q:
                        s = y[o][2];
                        break;
                    case i.H:
                        s = y[o][3]
                }
                if (r <= s)
                    break;
                n++
            }
            if (n > y.length)
                throw new Error("Too long data");
            return n
        }
        (QRCode = function (e, t) {
            if (this._htOption = {
                width: 256,
                height: 256,
                typeNumber: 4,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: i.H
            },
                "string" == typeof t && (t = {
                    text: t
                }),
                t)
                for (var n in t)
                    this._htOption[n] = t[n];
            "string" == typeof e && (e = document.getElementById(e)),
                this._htOption.useSVG && ($ = w),
                this._android = b(),
                this._el = e,
                this._oQRCode = null,
                this._oDrawing = new $(this._el, this._htOption),
                this._htOption.text && this.makeCode(this._htOption.text)
        }
        ).prototype.makeCode = function (e) {
            this._oQRCode = new t(S(e, this._htOption.correctLevel), this._htOption.correctLevel),
                this._oQRCode.addData(e),
                this._oQRCode.make(),
                this._el.title = e,
                this._oDrawing.draw(this._oQRCode),
                this.makeImage()
        }
            ,
            QRCode.prototype.makeImage = function () {
                "function" == typeof this._oDrawing.makeImage && (!this._android || this._android >= 3) && this._oDrawing.makeImage()
            }
            ,
            QRCode.prototype.clear = function () {
                this._oDrawing.clear()
            }
            ,
            QRCode.CorrectLevel = i,
            "function" == typeof define ? define(function () {
                return QRCode
            }) : "undefined" != typeof exports ? module.exports = QRCode : this.QRCode = QRCode
    }(),
    function (e) {
        if ("object" == typeof exports && "undefined" != typeof module)
            module.exports = e();
        else if ("function" == typeof define && define.amd)
            define([], e);
        else {
            ("undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this).LC = e()
        }
    }(function () {
        return function e(t, n, i) {
            function r(a, s) {
                if (!n[a]) {
                    if (!t[a]) {
                        var l = "function" == typeof require && require;
                        if (!s && l)
                            return l(a, !0);
                        if (o)
                            return o(a, !0);
                        var c = new Error("Cannot find module '" + a + "'");
                        throw c.code = "MODULE_NOT_FOUND",
                        c
                    }
                    var u = n[a] = {
                        exports: {}
                    };
                    t[a][0].call(u.exports, function (e) {
                        var n = t[a][1][e];
                        return r(n || e)
                    }, u, u.exports, e, t, n, i)
                }
                return n[a].exports
            }
            for (var o = "function" == typeof require && require, a = 0; a < i.length; a++)
                r(i[a]);
            return r
        }({
            1: [function (e, t, n) {
                var i, r, o, a, s, l, c, u, d, p, h, f, m = function (e, t) {
                    return function () {
                        return e.apply(t, arguments)
                    }
                }, g = [].slice, v = [].indexOf || function (e) {
                    for (var t = 0, n = this.length; t < n; t++)
                        if (t in this && this[t] === e)
                            return t;
                    return -1
                }
                    ;
                o = e("./actions"),
                    a = e("./bindEvents"),
                    l = e("./math"),
                    c = e("./shapes"),
                    s = c.createShape,
                    h = c.shapeToJSON,
                    r = c.JSONToShape,
                    u = e("./canvasRenderer").renderShapeToContext,
                    e("./svgRenderer").renderShapeToSVG,
                    d = e("./renderSnapshotToImage"),
                    p = e("./renderSnapshotToSVG"),
                    e("../tools/Pencil"),
                    f = e("./util"),
                    i = "infinite",
                    t.exports = function () {
                        function e(e, t) {
                            var n, r;
                            this.setImageSize = m(this.setImageSize, this),
                                r = null,
                                n = null,
                                e instanceof HTMLElement ? (n = e,
                                    r = t) : r = e,
                                this.opts = r || {},
                                this.config = {
                                    zoomMin: r.zoomMin || .2,
                                    zoomMax: r.zoomMax || 4,
                                    zoomStep: r.zoomStep || .2
                                },
                                this.colors = {
                                    primary: r.primaryColor || "#000",
                                    secondary: r.secondaryColor || "#fff",
                                    background: r.backgroundColor || "transparent"
                                },
                                this.watermarkImage = r.watermarkImage,
                                this.watermarkScale = r.watermarkScale || 1,
                                this.backgroundCanvas = document.createElement("canvas"),
                                this.backgroundCtx = this.backgroundCanvas.getContext("2d"),
                                this.canvas = document.createElement("canvas"),
                                this.canvas.style["background-color"] = "transparent",
                                this.buffer = document.createElement("canvas"),
                                this.buffer.style["background-color"] = "transparent",
                                this.ctx = this.canvas.getContext("2d"),
                                this.bufferCtx = this.buffer.getContext("2d"),
                                this.backingScale = 1,
                                this.backgroundShapes = r.backgroundShapes || [],
                                this._shapesInProgress = [],
                                this.shapes = [],
                                this.redoStack = deepProxy([], (e, t) => {
                                    "length" == t.key && 0 == t.value ? this.trigger("redoStackChange", 0) : "length" != t.key && this.trigger("redoStackChange", t.target.length + 1)
                                }
                                ),
                                this.undoStack = deepProxy([], (e, t) => {
                                    "delete" != e ? "length" == t.key && 0 == t.value ? this.trigger("undoStackChange", 0) : "length" != t.key && this.trigger("undoStackChange", t.target.length + 1) : this.trigger("undoStackChange", t.target.length - 1)
                                }
                                ),
                                this.isDragging = !1,
                                this.sendMsgTime = 0,
                                this.sendMsgTimeEvery = 100,
                                this.sendMsgTimeInterval = null,
                                this.position = {
                                    x: 0,
                                    y: 0
                                },
                                this.scale = 1,
                                this.setTool(new this.opts.tools[0](this)),
                                this.width = r.imageSize.width || i,
                                this.height = r.imageSize.height || i,
                                this.setZoom(this.scale),
                                r.snapshot && this.loadSnapshot(r.snapshot),
                                this.isBound = !1,
                                n && this.bindToElement(n)
                        }
                        return e.prototype.setLineWidth = function (e) {
                            this.ctx.lineWidth = e,
                                this.bufferCtx.lineWidth = e
                        }
                            ,
                            e.prototype.bindToElement = function (e) {
                                var t, n, i;
                                if (!this.containerEl)
                                    return this.containerEl = e,
                                        this._unsubscribeEvents = a(this, this.containerEl, this.opts.keyboardShortcuts),
                                        this.containerEl.style["background-color"] = this.colors.background,
                                        this.containerEl.appendChild(this.backgroundCanvas),
                                        this.containerEl.appendChild(this.canvas),
                                        this.isBound = !0,
                                        i = this,
                                        n = function () {
                                            return i.keepPanInImageBounds(),
                                                i.repaintAllLayers()
                                        }
                                        ,
                                        this.respondToSizeChange = f.matchElementSize(this.containerEl, [this.backgroundCanvas, this.canvas], this.backingScale, n),
                                        this.watermarkImage && (this.watermarkImage.onload = function (e) {
                                            return function () {
                                                return e.repaintLayer("background")
                                            }
                                        }(this)),
                                        null != (t = this.tool) && t.didBecomeActive(this),
                                        n();
                                console.warn("Trying to bind Literally Canvas to a DOM element more than once is unsupported.")
                            }
                            ,
                            e.prototype._teardown = function () {
                                var e;
                                return null != (e = this.tool) && e.willBecomeInactive(this),
                                    "function" == typeof this._unsubscribeEvents && this._unsubscribeEvents(),
                                    this.tool = null,
                                    this.containerEl = null,
                                    this.isBound = !1
                            }
                            ,
                            e.prototype.trigger = function (e, t) {
                                return this.canvas.dispatchEvent(new CustomEvent(e, {
                                    detail: t
                                })),
                                    null
                            }
                            ,
                            e.prototype.removeEvent = function (e, t) {
                                var n;
                                n = function (e) {
                                    return t(e.detail)
                                }
                                    ,
                                    this.canvas.addEventListener(e, n)
                            }
                            ,
                            e.prototype.on = function (e, t) {
                                var n, i;
                                return n = function (e) {
                                    return t(e.detail)
                                }
                                    ,
                                    this.canvas.addEventListener(e, n),
                                    i = this,
                                    function () {
                                        return i.canvas.removeEventListener(e, n)
                                    }
                            }
                            ,
                            e.prototype.getRenderScale = function () {
                                return this.scale * this.backingScale
                            }
                            ,
                            e.prototype.clientCoordsToDrawingCoords = function (e, t) {
                                return {
                                    x: (e * this.backingScale - this.position.x) / this.getRenderScale(),
                                    y: (t * this.backingScale - this.position.y) / this.getRenderScale()
                                }
                            }
                            ,
                            e.prototype.drawingCoordsToClientCoords = function (e, t) {
                                return {
                                    x: e * this.getRenderScale() + this.position.x,
                                    y: t * this.getRenderScale() + this.position.y
                                }
                            }
                            ,
                            e.prototype.setImageSize = function (e, t) {
                                return this.width = e || i,
                                    this.height = t || i,
                                    this.keepPanInImageBounds(),
                                    this.repaintAllLayers(),
                                    this.trigger("imageSizeChange", {
                                        width: this.width,
                                        height: this.height
                                    })
                            }
                            ,
                            e.prototype.forbidAll = function () {
                                this.setShapesInProgress([]),
                                    this.repaintLayer("main")
                            }
                            ,
                            e.prototype.setTool = function (e) {
                                var t;
                                if (this.isBound && null != (t = this.tool) && t.willBecomeInactive(this),
                                    this.tool = e,
                                    this.trigger("toolChange", {
                                        tool: e
                                    }),
                                    this.isBound)
                                    return this.tool.didBecomeActive(this)
                            }
                            ,
                            e.prototype.setShapesInProgress = function (e) {
                                return this._shapesInProgress = e
                            }
                            ,
                            e.prototype.setShapesInProgressBySingal = function (e) {
                                return console.log(e),
                                    this._shapesInProgress = [e, s("SelectionBox", {
                                        shape: e,
                                        handleSize: 0
                                    })],
                                    this.repaintLayer("main")
                            }
                            ,
                            e.prototype.pointerDown = function (e, t) {
                                var n, i = this, r = /(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent), o = void 0 !== navigator.standalone;
                                return null != this.sendMsgTimeInterval || r || o || (this.sendMsgTimeInterval = setInterval(function () {
                                    i.sendMsgTime += i.sendMsgTimeEvery
                                }, this.sendMsgTimeEvery)),
                                    n = this.clientCoordsToDrawingCoords(e, t),
                                    this.tool.usesSimpleAPI ? (this.tool.begin(n.x, n.y, this),
                                        this.isDragging = !0,
                                        this.trigger("drawStart", {
                                            tool: this.tool
                                        })) : (this.isDragging = !0,
                                            this.trigger("lc-pointerdown", {
                                                tool: this.tool,
                                                x: n.x,
                                                y: n.y,
                                                rawX: e,
                                                rawY: t
                                            }))
                            }
                            ,
                            e.prototype.pointerMove = function (e, t) {
                                return f.requestAnimationFrame((n = this,
                                    function () {
                                        var i, r;
                                        if (i = n.clientCoordsToDrawingCoords(e, t),
                                            null == (r = n.tool) || !r.usesSimpleAPI)
                                            return n.isDragging ? n.trigger("lc-pointerdrag", {
                                                tool: n.tool,
                                                x: i.x,
                                                y: i.y,
                                                rawX: e,
                                                rawY: t
                                            }) : n.trigger("lc-pointermove", {
                                                tool: n.tool,
                                                x: i.x,
                                                y: i.y,
                                                rawX: e,
                                                rawY: t
                                            });
                                        n.isDragging && (n.tool.continue(i.x, i.y, n),
                                            null != n.sendMsgTimeInterval && n.sendMsgTime % 500 == 0 && n.trigger("drawContinue", {
                                                tool: n.tool
                                            }))
                                    }
                                ));
                                var n
                            }
                            ,
                            e.prototype.pointerUp = function (e, t) {
                                var n;
                                return this.sendMsgTime = 0,
                                    clearInterval(this.sendMsgTimeInterval),
                                    this.sendMsgTimeInterval = null,
                                    n = this.clientCoordsToDrawingCoords(e, t),
                                    this.tool.usesSimpleAPI ? this.isDragging ? (this.tool.end(n.x, n.y, this),
                                        this.isDragging = !1,
                                        this.trigger("drawEnd", {
                                            tool: this.tool
                                        })) : void 0 : (this.isDragging = !1,
                                            this.trigger("lc-pointerup", {
                                                tool: this.tool,
                                                x: n.x,
                                                y: n.y,
                                                rawX: e,
                                                rawY: t
                                            }))
                            }
                            ,
                            e.prototype.setColor = function (e, t) {
                                if (this.colors[e] = t,
                                    this.isBound) {
                                    switch (e) {
                                        case "background":
                                            this.containerEl.style.backgroundColor = this.colors.background,
                                                this.repaintLayer("background");
                                            break;
                                        case "primary":
                                            this.repaintLayer("main");
                                            break;
                                        case "secondary":
                                            this.repaintLayer("main")
                                    }
                                    return this.trigger(e + "ColorChange", this.colors[e]),
                                        "background" === e ? this.trigger("drawingChange") : void 0
                                }
                            }
                            ,
                            e.prototype.getColor = function (e) {
                                return this.colors[e]
                            }
                            ,
                            e.prototype.saveShape = function (e, t, n) {
                                return null == t && (t = !0),
                                    null == n && (n = null),
                                    n || (n = this.shapes.length ? this.shapes[this.shapes.length - 1].id : null),
                                    this.execute(new o.AddShapeAction(this, e, n)),
                                    t && this.trigger("shapeSave", {
                                        shape: e,
                                        previousShapeId: n
                                    }),
                                    this.trigger("drawingChange")
                            }
                            ,
                            e.prototype.saveShapeBySingal = function (e, t, n, i = !1) {
                                return i ? this.execute(new o.AddShapeActionBySingal(this, e, n)) : new o.AddShapeActionBySingal(this, e, n).do(),
                                    this.trigger("drawingChange")
                            }
                            ,
                            e.prototype.pan = function (e, t) {
                                return this.setPan(this.position.x - e, this.position.y - t)
                            }
                            ,
                            e.prototype.keepPanInImageBounds = function () {
                                var e, t, n, r;
                                return t = this.getRenderScale(),
                                    n = (e = this.position).x,
                                    r = e.y,
                                    this.width !== i && (n = this.canvas.width > this.width * t ? (this.canvas.width - this.width * t) / 2 : Math.max(Math.min(0, n), this.canvas.width - this.width * t)),
                                    this.height !== i && (r = this.canvas.height > this.height * t ? (this.canvas.height - this.height * t) / 2 : Math.max(Math.min(0, r), this.canvas.height - this.height * t)),
                                    this.position = {
                                        x: n,
                                        y: r
                                    }
                            }
                            ,
                            e.prototype.setPan = function (e, t) {
                                return this.position = {
                                    x: e,
                                    y: t
                                },
                                    this.keepPanInImageBounds(),
                                    this.repaintAllLayers(),
                                    this.trigger("pan", {
                                        x: this.position.x,
                                        y: this.position.y
                                    })
                            }
                            ,
                            e.prototype.zoom = function (e) {
                                var t;
                                return t = this.scale + e,
                                    t = Math.max(t, this.config.zoomMin),
                                    t = Math.min(t, this.config.zoomMax),
                                    t = Math.round(100 * t) / 100,
                                    this.setZoom(t)
                            }
                            ,
                            e.prototype.setZoom = function (e) {
                                var t;
                                return t = this.scale,
                                    this.scale = e,
                                    this.position.x = l.scalePositionScalar(this.position.x, this.canvas.width, t, this.scale),
                                    this.position.y = l.scalePositionScalar(this.position.y, this.canvas.height, t, this.scale),
                                    this.keepPanInImageBounds(),
                                    this.repaintAllLayers(),
                                    this.trigger("zoom", {
                                        oldScale: t,
                                        newScale: this.scale
                                    })
                            }
                            ,
                            e.prototype.setWatermarkImage = function (e) {
                                var t;
                                if (this.watermarkImage = e,
                                    f.addImageOnload(e, (t = this,
                                        function () {
                                            return t.repaintLayer("background")
                                        }
                                    )),
                                    e.width)
                                    return this.repaintLayer("background")
                            }
                            ,
                            e.prototype.repaintAllLayers = function () {
                                var e, t, n, i;
                                for (e = 0,
                                    n = (i = ["background", "main"]).length; e < n; e++)
                                    t = i[e],
                                        this.repaintLayer(t);
                                return null
                            }
                            ,
                            e.prototype.repaintLayer = function (e, t) {
                                var n;
                                if (null == t && (t = "main" === e),
                                    this.isBound) {
                                    switch (e) {
                                        case "background":
                                            this.backgroundCtx.clearRect(0, 0, this.backgroundCanvas.width, this.backgroundCanvas.height),
                                                i = this,
                                                n = function () {
                                                    return i.repaintLayer("background")
                                                }
                                                ,
                                                this.watermarkImage && this._renderWatermark(this.backgroundCtx, !0, n),
                                                this.draw(this.backgroundShapes, this.backgroundCtx, n);
                                            break;
                                        case "main":
                                            n = function (e) {
                                                return function () {
                                                    return e.repaintLayer("main", !0)
                                                }
                                            }(this),
                                                t && (this.buffer.width = this.canvas.width,
                                                    this.buffer.height = this.canvas.height,
                                                    this.bufferCtx.clearRect(0, 0, this.buffer.width, this.buffer.height),
                                                    this.draw(this.shapes, this.bufferCtx, n)),
                                                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height),
                                                this.canvas.width > 0 && this.canvas.height > 0 && (this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height),
                                                    this.clipped(function (e) {
                                                        return function () {
                                                            return e.ctx.clearRect(0, 0, e.canvas.width, e.canvas.height),
                                                                e.ctx.drawImage(e.buffer, 0, 0)
                                                        }
                                                    }(this), this.ctx),
                                                    this.clipped(function (e) {
                                                        return function () {
                                                            return e.transformed(function () {
                                                                var t, n, i, r, o;
                                                                for (r = [],
                                                                    t = 0,
                                                                    n = (i = e._shapesInProgress).length; t < n; t++)
                                                                    o = i[t],
                                                                        r.push(u(e.ctx, o, {
                                                                            bufferCtx: e.bufferCtx,
                                                                            shouldOnlyDrawLatest: !0
                                                                        }));
                                                                return r
                                                            }, e.ctx, e.bufferCtx)
                                                        }
                                                    }(this), this.ctx, this.bufferCtx))
                                    }
                                    var i;
                                    return this.trigger("repaint", {
                                        layerKey: e
                                    })
                                }
                            }
                            ,
                            e.prototype._renderWatermark = function (e, t, n) {
                                if (null == t && (t = !0),
                                    this.watermarkImage.width)
                                    return e.save(),
                                        e.translate(e.canvas.width / 2, e.canvas.height / 2),
                                        e.scale(this.watermarkScale, this.watermarkScale),
                                        t && e.scale(this.backingScale, this.backingScale),
                                        e.drawImage(this.watermarkImage, -this.watermarkImage.width / 2, -this.watermarkImage.height / 2),
                                        e.restore();
                                this.watermarkImage.onload = n
                            }
                            ,
                            e.prototype.drawShapeInProgress = function (e) {
                                return this.repaintLayer("main", !1),
                                    this.clipped((t = this,
                                        function () {
                                            return t.transformed(function () {
                                                return u(t.ctx, e, {
                                                    bufferCtx: t.bufferCtx,
                                                    shouldOnlyDrawLatest: !0
                                                })
                                            }, t.ctx, t.bufferCtx)
                                        }
                                    ), this.ctx, this.bufferCtx);
                                var t
                            }
                            ,
                            e.prototype.drawShapeInProgressBySingal = function (e) {
                                return this.drawShapeInProgress(e),
                                    this.repaintLayer("main")
                            }
                            ,
                            e.prototype.draw = function (e, t, n) {
                                var i, r;
                                if (e.length)
                                    return i = function () {
                                        var i, r, o, a;
                                        for (o = [],
                                            i = 0,
                                            r = e.length; i < r; i++)
                                            a = e[i],
                                                o.push(u(t, a, {
                                                    retryCallback: n
                                                }));
                                        return o
                                    }
                                        ,
                                        this.clipped((r = this,
                                            function () {
                                                return r.transformed(i, t)
                                            }
                                        ), t)
                            }
                            ,
                            e.prototype.clipped = function () {
                                var e, t, n, r, o, a, s, l, c, u, d, p;
                                for (n = arguments[0],
                                    e = 2 <= arguments.length ? g.call(arguments, 1) : [],
                                    d = this.width === i ? 0 : this.position.x,
                                    p = this.height === i ? 0 : this.position.y,
                                    u = function () {
                                        switch (this.width) {
                                            case i:
                                                return this.canvas.width;
                                            default:
                                                return this.width * this.getRenderScale()
                                        }
                                    }
                                        .call(this),
                                    r = function () {
                                        switch (this.height) {
                                            case i:
                                                return this.canvas.height;
                                            default:
                                                return this.height * this.getRenderScale()
                                        }
                                    }
                                        .call(this),
                                    o = 0,
                                    s = e.length; o < s; o++)
                                    (t = e[o]).save(),
                                        t.beginPath(),
                                        t.rect(d, p, u, r),
                                        t.clip();
                                for (n(),
                                    c = [],
                                    a = 0,
                                    l = e.length; a < l; a++)
                                    t = e[a],
                                        c.push(t.restore());
                                return c
                            }
                            ,
                            e.prototype.transformed = function () {
                                var e, t, n, i, r, o, a, s, l;
                                for (n = arguments[0],
                                    i = 0,
                                    o = (e = 2 <= arguments.length ? g.call(arguments, 1) : []).length; i < o; i++)
                                    (t = e[i]).save(),
                                        t.translate(Math.floor(this.position.x), Math.floor(this.position.y)),
                                        l = this.getRenderScale(),
                                        t.scale(l, l);
                                for (n(),
                                    s = [],
                                    r = 0,
                                    a = e.length; r < a; r++)
                                    t = e[r],
                                        s.push(t.restore());
                                return s
                            }
                            ,
                            e.prototype.clear = function (e) {
                                var t, n;
                                return null == e && (e = !0),
                                    n = this.shapes,
                                    t = [],
                                    this.setShapesInProgress([]),
                                    this.execute(new o.ClearAction(this, n, t)),
                                    this.repaintLayer("main"),
                                    e && this.trigger("clear", null),
                                    this.trigger("drawingChange", {})
                            }
                            ,
                            e.prototype.clearAll = function (e) {
                                return null == e && (e = !0),
                                    this.setShapesInProgress([]),
                                    this.shapes = [],
                                    this.repaintLayer("main"),
                                    e && this.trigger("clear", null),
                                    this.trigger("drawingChange", {})
                            }
                            ,
                            e.prototype.execute = function (e) {
                                if (e.shape) {
                                    let t = getArrIndex(this.undoStack, e.shape.id, "id");
                                    e.id = e.shape.id,
                                        -1 == t && (this.undoStack.push(e),
                                            this.redoStack.length = 0),
                                        e.do()
                                } else
                                    this.undoStack.push(e),
                                        e.do(),
                                        this.redoStack.length = 0
                            }
                            ,
                            e.prototype.undo = function () {
                                var e;
                                if (this.undoStack.length)
                                    return (e = this.undoStack.pop()).undo(),
                                        this.redoStack.push(e),
                                        this.trigger("undo", {
                                            action: e
                                        }),
                                        this.trigger("drawingChange", {})
                            }
                            ,
                            e.prototype.redo = function () {
                                var e;
                                if (this.redoStack.length)
                                    return e = this.redoStack.pop(),
                                        this.undoStack.push(e),
                                        e.do(),
                                        this.trigger("redo", {
                                            action: e
                                        }),
                                        this.trigger("drawingChange", {})
                            }
                            ,
                            e.prototype.canUndo = function () {
                                return !!this.undoStack.length
                            }
                            ,
                            e.prototype.canRedo = function () {
                                return !!this.redoStack.length
                            }
                            ,
                            e.prototype.getPixel = function (e, t) {
                                var n, i;
                                return n = this.drawingCoordsToClientCoords(e, t),
                                    (i = this.ctx.getImageData(n.x, n.y, 1, 1).data)[3] ? "rgb(" + i[0] + ", " + i[1] + ", " + i[2] + ")" : null
                            }
                            ,
                            e.prototype.getContentBounds = function () {
                                return f.getBoundingRect(this.shapes.concat(this.backgroundShapes).map(function (e) {
                                    return e.getBoundingRect()
                                }), this.width === i ? 0 : this.width, this.height === i ? 0 : this.height)
                            }
                            ,
                            e.prototype.getDefaultImageRect = function (e, t) {
                                var n;
                                return null == e && (e = {
                                    width: 0,
                                    height: 0
                                }),
                                    null == t && (t = {
                                        top: 0,
                                        right: 0,
                                        bottom: 0,
                                        left: 0
                                    }),
                                    f.getDefaultImageRect(function () {
                                        var e, t, i, r;
                                        for (r = [],
                                            e = 0,
                                            t = (i = this.shapes.concat(this.backgroundShapes)).length; e < t; e++)
                                            n = i[e],
                                                r.push(n.getBoundingRect(this.ctx));
                                        return r
                                    }
                                        .call(this), e, t)
                            }
                            ,
                            e.prototype.getImage = function (e) {
                                return null == e && (e = {}),
                                    null == e.includeWatermark && (e.includeWatermark = !0),
                                    null == e.scaleDownRetina && (e.scaleDownRetina = !0),
                                    null == e.scale && (e.scale = 1),
                                    e.scaleDownRetina || (e.scale *= this.backingScale),
                                    e.includeWatermark && (e.watermarkImage = this.watermarkImage,
                                        e.watermarkScale = this.watermarkScale,
                                        e.scaleDownRetina || (e.watermarkScale *= this.backingScale)),
                                    d(this.getSnapshot(), e)
                            }
                            ,
                            e.prototype.canvasForExport = function () {
                                return this.repaintAllLayers(),
                                    f.combineCanvases(this.backgroundCanvas, this.canvas)
                            }
                            ,
                            e.prototype.canvasWithBackground = function (e) {
                                return f.combineCanvases(e, this.canvasForExport())
                            }
                            ,
                            e.prototype.getSnapshot = function (e) {
                                var t, n, i, r, o, a;
                                for (null == e && (e = null),
                                    null == e && (e = ["shapes", "imageSize", "colors", "position", "scale", "backgroundShapes"]),
                                    a = {},
                                    t = 0,
                                    i = (r = ["colors", "position", "scale"]).length; t < i; t++)
                                    n = r[t],
                                        v.call(e, n) >= 0 && (a[n] = this[n]);
                                return v.call(e, "shapes") >= 0 && (a.shapes = function () {
                                    var e, t, n, i;
                                    for (i = [],
                                        e = 0,
                                        t = (n = this.shapes).length; e < t; e++)
                                        o = n[e],
                                            i.push(h(o));
                                    return i
                                }
                                    .call(this)),
                                    v.call(e, "backgroundShapes") >= 0 && (a.backgroundShapes = function () {
                                        var e, t, n, i;
                                        for (i = [],
                                            e = 0,
                                            t = (n = this.backgroundShapes).length; e < t; e++)
                                            o = n[e],
                                                i.push(h(o));
                                        return i
                                    }
                                        .call(this)),
                                    v.call(e, "imageSize") >= 0 && (a.imageSize = {
                                        width: this.width,
                                        height: this.height
                                    }),
                                    a
                            }
                            ,
                            e.prototype.getSnapshotJSON = function () {
                                return console.warn("lc.getSnapshotJSON() is deprecated. use JSON.stringify(lc.getSnapshot()) instead."),
                                    JSON.stringify(this.getSnapshot())
                            }
                            ,
                            e.prototype.getSVGString = function (e) {
                                return null == e && (e = {}),
                                    p(this.getSnapshot(), e)
                            }
                            ,
                            e.prototype.loadSnapshot = function (e) {
                                var t, n, i, a, s, l, c, u, d, p;
                                if (this.redoStack.length = 0,
                                    this.undoStack.length = 0,
                                    e) {
                                    if (e.colors)
                                        for (t = 0,
                                            a = (l = ["primary", "secondary", "background"]).length; t < a; t++)
                                            i = l[t],
                                                this.setColor(i, e.colors[i]);
                                    if (e.shapes)
                                        for (this.shapes = [],
                                            n = 0,
                                            s = (c = e.shapes).length; n < s; n++)
                                            p = c[n],
                                                (d = r(p)) && this.execute(new o.AddShapeAction(this, d));
                                    return e.backgroundShapes && (this.backgroundShapes = function () {
                                        var t, n, i, o;
                                        for (o = [],
                                            t = 0,
                                            n = (i = e.backgroundShapes).length; t < n; t++)
                                            u = i[t],
                                                o.push(r(u));
                                        return o
                                    }()),
                                        e.imageSize && (this.width = e.imageSize.width,
                                            this.height = e.imageSize.height),
                                        e.position && (this.position = e.position),
                                        e.scale && (this.scale = e.scale),
                                        this.repaintAllLayers(),
                                        this.trigger("snapshotLoad"),
                                        this.trigger("drawingChange", {})
                                }
                            }
                            ,
                            e.prototype.loadSnapshotJSON = function (e) {
                                return console.warn("lc.loadSnapshotJSON() is deprecated. use lc.loadSnapshot(JSON.parse(snapshot)) instead."),
                                    this.loadSnapshot(JSON.parse(e))
                            }
                            ,
                            e
                    }()
            }
                , {
                "../tools/Pencil": 24,
                "./actions": 3,
                "./bindEvents": 4,
                "./canvasRenderer": 5,
                "./math": 10,
                "./renderSnapshotToImage": 11,
                "./renderSnapshotToSVG": 12,
                "./shapes": 13,
                "./svgRenderer": 14,
                "./util": 15
            }],
            2: [function (e, t, n) {
                var i, r, o, a;
                e("./fontmetrics.js"),
                    a = function (e) {
                        var t, n, i, r, o, a;
                        for (n = 0,
                            r = 0,
                            o = (t = e.split(" ")).length; r < o; r++)
                            i = t[r],
                                a = parseInt(i.replace("px", ""), 10),
                                isNaN(a) || (n = a);
                        if (!n)
                            throw "Font size not found";
                        return {
                            fontSize: n,
                            fontFamily: e.substring(t[0].length + 1).replace("bold ", "").replace("italic ", "").replace("underline ", "")
                        }
                    }
                    ,
                    o = function (e, t, n, i, r) {
                        var o, a, s, l, c, u, d, p, h, f;
                        if (!t.length)
                            return ["", ""];
                        a = 0,
                            u = 0,
                            d = 0,
                            f = !1;
                        for (var m = ((i = i || "") + "").split(","); ;)
                            if (l = (c = !(s = (a += 1) >= t.length) && t[a].match(/\s/)) || s,
                                h = t.substring(0, a),
                                (o = 0 == i.length ? !n || e.measureText(h).width <= n : !n || a <= m[r]) && (d = a),
                                l && f && (f = !1,
                                    o && (u = a)),
                                f = !c,
                                s || !o)
                                return o ? [t, ""] : u > 0 ? (p = u = a - 1,
                                    [t.substring(0, u), t.substring(p)]) : [t.substring(0, d), t.substring(d)]
                    }
                    ,
                    r = function (e, t, n, i) {
                        var r, a, s, l, c, u, d, p, h;
                        s = [];
                        var f = 0;
                        for (r = 0,
                            a = (h = t.split(/\r\n|\r|\n/g)).length; r < a; r++)
                            if (p = h[r],
                                l = (c = o(e, p, n, i, f))[0],
                                d = c[1],
                                l)
                                for (; l;)
                                    f++,
                                        s.push(l),
                                        l = (u = o(e, d, n, i, f))[0],
                                        d = u[1];
                            else
                                s.push(p);
                        return s
                    }
                    ,
                    i = function () {
                        function e(e, t, n, i, o, s) {
                            var l, c, u, d;
                            this.text = t,
                                this.font = n,
                                this.forcedWidth = i,
                                this.forcedHeight = o,
                                l = (u = a(this.font)).fontFamily,
                                c = u.fontSize,
                                e.font = this.font,
                                e.textBaseline = "baseline",
                                this.emDashWidth = e.measureTextWidth("—", c, l).width,
                                this.caratWidth = e.measureTextWidth("|", c, l).width,
                                this.lines = r(e, this.text, this.forcedWidth, s),
                                this.metricses = this.lines.map((d = this,
                                    function (t) {
                                        return e.measureText2(t || "X", c, d.font)
                                    }
                                )),
                                this.metrics = {
                                    ascent: Math.max.apply(Math, this.metricses.map(function (e) {
                                        return e.ascent
                                    })),
                                    descent: Math.max.apply(Math, this.metricses.map(function (e) {
                                        return e.descent
                                    })),
                                    fontsize: Math.max.apply(Math, this.metricses.map(function (e) {
                                        return e.fontsize
                                    })),
                                    leading: Math.max.apply(Math, this.metricses.map(function (e) {
                                        return e.leading
                                    })),
                                    width: Math.max.apply(Math, this.metricses.map(function (e) {
                                        return e.width
                                    })),
                                    height: Math.max.apply(Math, this.metricses.map(function (e) {
                                        return e.height
                                    })),
                                    bounds: {
                                        minx: Math.min.apply(Math, this.metricses.map(function (e) {
                                            return e.bounds.minx
                                        })),
                                        miny: Math.min.apply(Math, this.metricses.map(function (e) {
                                            return e.bounds.miny
                                        })),
                                        maxx: Math.max.apply(Math, this.metricses.map(function (e) {
                                            return e.bounds.maxx
                                        })),
                                        maxy: Math.max.apply(Math, this.metricses.map(function (e) {
                                            return e.bounds.maxy
                                        }))
                                    }
                                },
                                this.boundingBoxWidth = Math.ceil(this.metrics.width)
                        }
                        return e.prototype.draw = function (e, t, n) {
                            var i, r, o, a, s, l;
                            for (e.textBaseline = "top",
                                e.font = this.font,
                                i = 0,
                                l = [],
                                r = 0,
                                o = (s = this.lines).length; r < o; r++)
                                a = s[r],
                                    e.fillText(a, t, n + i * this.metrics.leading),
                                    l.push(i += 1);
                            return l
                        }
                            ,
                            e.prototype.getWidth = function (e) {
                                return null == e && (e = !1),
                                    this.forcedWidth ? this.forcedWidth : e ? this.metrics.bounds.maxx + this.caratWidth : this.metrics.bounds.maxx
                            }
                            ,
                            e.prototype.getHeight = function () {
                                return this.forcedHeight || this.metrics.leading * this.lines.length
                            }
                            ,
                            e
                    }(),
                    t.exports = i
            }
                , {
                "./fontmetrics.js": 7
            }],
            3: [function (e, t, n) {
                var i, r, o;
                r = function () {
                    function e(e, t, n) {
                        this.lc = e,
                            this.oldShapes = t,
                            this.newShapes = n
                    }
                    return e.prototype.do = function () {
                        return this.lc.shapes = this.newShapes,
                            this.lc.repaintLayer("main")
                    }
                        ,
                        e.prototype.undo = function () {
                            return this.lc.shapes = this.oldShapes,
                                this.lc.repaintLayer("main")
                        }
                        ,
                        e
                }(),
                    i = function () {
                        function e(e, t, n) {
                            this.lc = e,
                                this.shape = t,
                                this.previousShapeId = null != n ? n : null
                        }
                        return e.prototype.do = function () {
                            var e, t, n, i, r, o;
                            if (this.lc.shapes.length && this.lc.shapes[this.lc.shapes.length - 1].id !== this.previousShapeId && null !== this.previousShapeId) {
                                for (i = [],
                                    e = !1,
                                    t = 0,
                                    n = (r = this.lc.shapes).length; t < n; t++)
                                    o = r[t],
                                        i.push(o),
                                        o.id === this.previousShapeId && (i.push(this.shape),
                                            e = !0);
                                e || i.push(this.shape),
                                    this.lc.shapes = i
                            } else
                                this.lc.shapes.push(this.shape);
                            return this.lc.repaintLayer("main")
                        }
                            ,
                            e.prototype.undo = function () {
                                var e, t, n, i, r;
                                if (0 != this.lc.shapes.length) {
                                    if (this.lc.shapes[this.lc.shapes.length - 1].id === this.shape.id)
                                        this.lc.shapes.pop();
                                    else {
                                        for (n = [],
                                            e = 0,
                                            t = (i = this.lc.shapes).length; e < t; e++)
                                            (r = i[e]).id !== this.shape.id && n.push(r);
                                        this.lc.shapes = n
                                    }
                                    return this.lc.repaintLayer("main")
                                }
                            }
                            ,
                            e
                    }(),
                    o = function () {
                        function e(e, t, n) {
                            this.lc = e,
                                this.shape = t,
                                this.shapeId = null != n ? n : null
                        }
                        return e.prototype.do = function () {
                            if (null === this.shapeId)
                                this.lc.shapes.push(this.shape);
                            else {
                                var e, t, n, i, r, o;
                                for (i = [],
                                    e = !1,
                                    t = 0,
                                    n = (r = this.lc.shapes).length; t < n; t++)
                                    (o = r[t]).id === this.shapeId ? (i.push(this.shape),
                                        e = !0) : i.push(o);
                                e || i.push(this.shape),
                                    this.lc.shapes = i
                            }
                            return this.lc.repaintLayer("main")
                        }
                            ,
                            e.prototype.undo = function () {
                                var e, t, n, i, r;
                                if (this.lc.shapes[this.lc.shapes.length - 1].id === this.shape.id)
                                    this.lc.shapes.pop();
                                else {
                                    for (n = [],
                                        e = 0,
                                        t = (i = this.lc.shapes).length; e < t; e++)
                                        (r = i[e]).id !== this.shape.id && n.push(r);
                                    this.lc.shapes = n
                                }
                                return this.lc.repaintLayer("main")
                            }
                            ,
                            e
                    }(),
                    t.exports = {
                        ClearAction: r,
                        AddShapeAction: i,
                        AddShapeActionBySingal: o
                    }
            }
                , {}],
            4: [function (e, t, n) {
                var i, r;
                i = function (e, t) {
                    var n, i, r;
                    return i = t.changedTouches[0].clientX,
                        r = t.changedTouches[0].clientY,
                        [i - (n = e.getBoundingClientRect()).left, r - n.top]
                }
                    ,
                    r = function (e, t) {
                        var n;
                        return n = e.getBoundingClientRect(),
                        {
                            left: t.clientX - n.left,
                            top: t.clientY - n.top
                        }
                    }
                    ,
                    t.exports = function (e, t, n) {
                        var o, a, s, l, c, u;
                        return null == n && (n = !1),
                            u = [],
                            a = function (n) {
                                var i;
                                return n.preventDefault(),
                                    i = r(t, n),
                                    e.pointerMove(i.left, i.top)
                            }
                            ,
                            s = function (n) {
                                var i;
                                return n.preventDefault(),
                                    t.onselectstart = function () {
                                        return !0
                                    }
                                    ,
                                    i = r(t, n),
                                    e.pointerUp(i.left, i.top),
                                    document.removeEventListener("mousemove", a),
                                    document.removeEventListener("mouseup", s),
                                    t.addEventListener("mousemove", a)
                            }
                            ,
                            t.addEventListener("mousedown", function (n) {
                                var i;
                                if ("canvas" === n.target.tagName.toLowerCase())
                                    return n.preventDefault(),
                                        t.onselectstart = function () {
                                            return !1
                                        }
                                        ,
                                        i = r(t, n),
                                        e.pointerDown(i.left, i.top),
                                        t.removeEventListener("mousemove", a),
                                        document.addEventListener("mousemove", a),
                                        document.addEventListener("mouseup", s)
                            }),
                            c = function (n) {
                                return n.preventDefault(),
                                    e.pointerMove.apply(e, i(t, n))
                            }
                            ,
                            l = function (n) {
                                return n.preventDefault(),
                                    e.pointerUp.apply(e, i(t, n)),
                                    console.log(111),
                                    document.removeEventListener("touchmove", c, {
                                        passive: !1
                                    }),
                                    document.removeEventListener("touchend", l),
                                    document.removeEventListener("touchcancel", l)
                            }
                            ,
                            t.addEventListener("touchstart", function (n) {
                                if ("canvas" === n.target.tagName.toLowerCase())
                                    return n.preventDefault(),
                                        1 === n.touches.length ? (e.pointerDown.apply(e, i(t, n)),
                                            document.addEventListener("touchmove", c, {
                                                passive: !1
                                            }),
                                            document.addEventListener("touchend", l),
                                            document.addEventListener("touchcancel", l)) : e.pointerMove.apply(e, i(t, n))
                            }),
                            n && (console.warn("Keyboard panning is deprecated."),
                                o = function (t) {
                                    switch (t.keyCode) {
                                        case 37:
                                            e.pan(-10, 0);
                                            break;
                                        case 38:
                                            e.pan(0, -10);
                                            break;
                                        case 39:
                                            e.pan(10, 0);
                                            break;
                                        case 40:
                                            e.pan(0, 10)
                                    }
                                    return e.repaintAllLayers()
                                }
                                ,
                                document.addEventListener("keydown", o),
                                u.push(function () {
                                    return document.removeEventListener(o)
                                })),
                            function () {
                                var e, t, n, i;
                                for (i = [],
                                    t = 0,
                                    n = u.length; t < n; t++)
                                    e = u[t],
                                        i.push(e());
                                return i
                            }
                    }
            }
                , {}],
            5: [function (e, t, n) {
                var i, r, o, a, s, l, c, u, d, p;
                s = e("./lineEndCapShapes"),
                    d = {},
                    l = function () { }
                    ,
                    u = function (e, t, n) {
                        var i;
                        if (null == n && (n = {}),
                            null == n.shouldIgnoreUnsupportedShapes && (n.shouldIgnoreUnsupportedShapes = !1),
                            null == n.retryCallback && (n.retryCallback = l),
                            null == n.shouldOnlyDrawLatest && (n.shouldOnlyDrawLatest = !1),
                            null == n.bufferCtx && (n.bufferCtx = null),
                            i = n.bufferCtx,
                            d[t.className])
                            return n.shouldOnlyDrawLatest && d[t.className].drawLatestFunc ? d[t.className].drawLatestFunc(e, i, t, n.retryCallback) : d[t.className].drawFunc(e, t, n.retryCallback);
                        if (n.shouldIgnoreUnsupportedShapes)
                            return console.warn("Can't render shape of type " + t.className + " to canvas");
                        throw "Can't render shape of type " + t.className + " to canvas"
                    }
                    ,
                    c = function (e, t, n) {
                        return u(e.getContext("2d"), t, n)
                    }
                    ,
                    (r = function (e, t, n) {
                        return d[e] = {
                            drawFunc: t,
                            drawLatestFunc: n
                        }
                    }
                    )("Rectangle", function (e, t) {
                        var n, i;
                        return n = t.x,
                            i = t.y,
                            t.strokeWidth % 2 != 0 && (n += .5,
                                i += .5),
                            e.fillStyle = t.fillColor,
                            e.fillRect(n, i, t.width, t.height),
                            e.lineWidth = t.strokeWidth,
                            e.strokeStyle = t.strokeColor,
                            e.strokeRect(n, i, t.width, t.height)
                    }),
                    r("Ellipse", function (e, t) {
                        var n, i, r, o;
                        return e.save(),
                            o = Math.floor(t.width / 2),
                            r = Math.floor(t.height / 2),
                            n = t.x + o,
                            i = t.y + r,
                            e.translate(n, i),
                            e.scale(1, Math.abs(t.height / t.width)),
                            e.beginPath(),
                            e.arc(0, 0, Math.abs(o), 0, 2 * Math.PI),
                            e.closePath(),
                            e.restore(),
                            e.fillStyle = t.fillColor,
                            e.fill(),
                            e.lineWidth = t.strokeWidth,
                            e.strokeStyle = t.strokeColor,
                            e.stroke()
                    }),
                    r("SelectionBox", (p = function (e, t, n) {
                        var i, r;
                        if (i = t.x,
                            r = t.y,
                            0 !== n)
                            return e.fillStyle = "#fff",
                                e.fillRect(i, r, n, n),
                                e.strokeStyle = "#000",
                                e.strokeRect(i, r, n, n)
                    }
                        ,
                        function (e, t) {
                            return p(e, t.getTopLeftHandleRect(), t.handleSize),
                                p(e, t.getTopRightHandleRect(), t.handleSize),
                                p(e, t.getBottomLeftHandleRect(), t.handleSize),
                                p(e, t.getBottomRightHandleRect(), t.handleSize),
                                t.backgroundColor && (e.fillStyle = t.backgroundColor,
                                    e.fillRect(t._br.x - t.margin, t._br.y - t.margin, t._br.width + 2 * t.margin, t._br.height + 2 * t.margin)),
                                e.lineWidth = 1,
                                e.strokeStyle = "#000",
                                e.setLineDash([2, 4]),
                                e.strokeRect(t._br.x - t.margin, t._br.y - t.margin, t._br.width + 2 * t.margin, t._br.height + 2 * t.margin),
                                e.setLineDash([])
                        }
                    )),
                    r("Image", function (e, t, n) {
                        return t.image.width ? 1 === t.scale ? e.drawImage(t.image, t.x, t.y) : e.drawImage(t.image, t.x, t.y, t.image.width * t.scale, t.image.height * t.scale) : n ? t.image.onload = n : void 0
                    }),
                    r("Line", function (e, t) {
                        var n, i, r, o, a;
                        if (t.x1 !== t.x2 || t.y1 !== t.y2)
                            return i = t.x1,
                                r = t.x2,
                                o = t.y1,
                                a = t.y2,
                                t.strokeWidth % 2 != 0 && (i += .5,
                                    r += .5,
                                    o += .5,
                                    a += .5),
                                e.lineWidth = t.strokeWidth,
                                e.strokeStyle = t.color,
                                e.lineCap = t.capStyle,
                                t.dash && e.setLineDash(t.dash),
                                e.beginPath(),
                                e.moveTo(i, o),
                                e.lineTo(r, a),
                                e.stroke(),
                                t.dash && e.setLineDash([]),
                                n = Math.max(2.2 * t.strokeWidth, 5),
                                t.endCapShapes[0] && s[t.endCapShapes[0]].drawToCanvas(e, i, o, Math.atan2(o - a, i - r), n, t.color),
                                t.endCapShapes[1] ? s[t.endCapShapes[1]].drawToCanvas(e, r, a, Math.atan2(a - o, r - i), n, t.color) : void 0
                    }),
                    i = function (e, t, n, i) {
                        var r, o, a, s;
                        if (null == n && (n = !1),
                            null == i && (i = "round"),
                            t.length) {
                            for (e.lineCap = i,
                                e.strokeStyle = t[0].color,
                                e.lineWidth = t[0].size,
                                e.beginPath(),
                                t[0].size % 2 == 0 ? e.moveTo(t[0].x, t[0].y) : e.moveTo(t[0].x + .5, t[0].y + .5),
                                r = 0,
                                o = (s = t.slice(1)).length; r < o; r++)
                                a = s[r],
                                    t[0].size % 2 == 0 ? e.lineTo(a.x, a.y) : e.lineTo(a.x + .5, a.y + .5);
                            return n ? e.closePath() : void 0
                        }
                    }
                    ,
                    r("LinePath", o = function (e, t) {
                        return i(e, t.smoothedPoints),
                            e.stroke()
                    }
                        , a = function (e, t, n) {
                            var r, o, a;
                            return n.tail ? (o = (a = n.smoothedPoints.length - n.segmentSize * n.tailSize) < 2 * n.segmentSize ? 0 : a,
                                r = a + n.segmentSize + 1,
                                i(t, n.smoothedPoints.slice(o, r)),
                                t.stroke()) : (i(t, n.smoothedPoints),
                                    t.stroke())
                        }
                    ),
                    r("ErasedLinePath", function (e, t) {
                        return e.save(),
                            e.globalCompositeOperation = "destination-out",
                            o(e, t),
                            e.restore()
                    }, function (e, t, n) {
                        return e.save(),
                            e.globalCompositeOperation = "destination-out",
                            t.save(),
                            t.globalCompositeOperation = "destination-out",
                            a(0, t, n),
                            e.restore(),
                            t.restore()
                    }),
                    r("Text", function (e, t) {
                        return t.renderer || t._makeRenderer(e, t.scaleText),
                            e.fillStyle = t.color,
                            t.renderer.draw(e, t.x, t.y)
                    }),
                    r("Polygon", function (e, t) {
                        return e.fillStyle = t.fillColor,
                            i(e, t.points, t.isClosed, "butt"),
                            e.fill(),
                            e.stroke()
                    }),
                    t.exports = {
                        defineCanvasRenderer: r,
                        renderShapeToCanvas: c,
                        renderShapeToContext: u
                    }
            }
                , {
                "./lineEndCapShapes": 8
            }],
            6: [function (e, t, n) {
                "use strict";
                t.exports = {
                    imageURLPrefix: "lib/img",
                    primaryColor: "hsla(0, 0%, 0%, 1)",
                    secondaryColor: "hsla(0, 0%, 100%, 1)",
                    backgroundColor: "transparent",
                    strokeWidths: [1, 2, 5, 10, 20, 30],
                    defaultStrokeWidth: 5,
                    toolbarPosition: "top",
                    keyboardShortcuts: !1,
                    imageSize: {
                        width: "infinite",
                        height: "infinite"
                    },
                    backgroundShapes: [],
                    watermarkImage: null,
                    watermarkScale: 1,
                    zoomMin: .2,
                    zoomMax: 4,
                    zoomStep: .2,
                    snapshot: null,
                    onInit: function () { },
                    tools: [e("../tools/Pencil"), e("../tools/Eraser"), e("../tools/Line"), e("../tools/Rectangle"), e("../tools/Ellipse"), e("../tools/Text"), e("../tools/Polygon"), e("../tools/Pan"), e("../tools/Eyedropper")]
                }
            }
                , {
                "../tools/Ellipse": 19,
                "../tools/Eraser": 20,
                "../tools/Eyedropper": 21,
                "../tools/Line": 22,
                "../tools/Pan": 23,
                "../tools/Pencil": 24,
                "../tools/Polygon": 25,
                "../tools/Rectangle": 26,
                "../tools/Text": 28
            }],
            7: [function (e, t, n) {
                "use strict";
                !function () {
                    if (!document.defaultView.getComputedStyle)
                        throw "ERROR: 'document.defaultView.getComputedStyle' not found. This library only works in browsers that can report computed CSS values.";
                    CanvasRenderingContext2D.prototype.measureTextWidth = CanvasRenderingContext2D.prototype.measureText;
                    CanvasRenderingContext2D.prototype.measureText2 = function (e, t, n) {
                        var i = this.measureTextWidth(e)
                            , r = !/\S/.test(e);
                        i.fontsize = t;
                        var o = document.createElement("div");
                        o.style.position = "absolute",
                            o.style.opacity = 0,
                            o.style.font = n,
                            o.innerHTML = e + "<br/>" + e,
                            document.body.appendChild(o),
                            i.leading = 1.2 * t;
                        var a, s, l = (a = o,
                            s = "height",
                            document.defaultView.getComputedStyle(a, null).getPropertyValue(s));
                        if ((l = l.replace("px", "")) >= 2 * t && (i.leading = l / 2 | 0),
                            document.body.removeChild(o),
                            r)
                            i.ascent = 0,
                                i.descent = 0,
                                i.bounds = {
                                    minx: 0,
                                    maxx: i.width,
                                    miny: 0,
                                    maxy: 0
                                },
                                i.height = 0;
                        else {
                            var c = document.createElement("canvas");
                            c.width = i.width + 100,
                                c.height = 3 * t,
                                c.style.opacity = 1,
                                c.style.font = n;
                            var u = c.getContext("2d");
                            u.font = n;
                            var d = c.width
                                , p = c.height
                                , h = p / 2;
                            u.fillStyle = "white",
                                u.fillRect(-1, -1, d + 2, p + 2),
                                u.fillStyle = "black",
                                u.fillText(e, 50, h);
                            for (var f = u.getImageData(0, 0, d, p).data, m = 0, g = 4 * d, v = f.length; ++m < v && 255 === f[m];)
                                ;
                            var y = m / g | 0;
                            for (m = v - 1; --m > 0 && 255 === f[m];)
                                ;
                            var b = m / g | 0;
                            for (m = 0; m < v && 255 === f[m];)
                                (m += g) >= v && (m = m - v + 4);
                            var w = m % g / 4 | 0
                                , $ = 1;
                            for (m = v - 3; m >= 0 && 255 === f[m];)
                                (m -= g) < 0 && (m = v - 3 - 4 * $++);
                            var S = m % g / 4 + 1 | 0;
                            i.ascent = h - y,
                                i.descent = b - h,
                                i.bounds = {
                                    minx: w - 50,
                                    maxx: S - 50,
                                    miny: 0,
                                    maxy: b - y
                                },
                                i.height = b - y + 1
                        }
                        return i
                    }
                }()
            }
                , {}],
            8: [function (e, t, n) {
                var i;
                t.exports = {
                    arrow: (i = function (e, t, n, i, r) {
                        return [{
                            x: e + Math.cos(n + Math.PI / 2) * i / 2,
                            y: t + Math.sin(n + Math.PI / 2) * i / 2
                        }, {
                            x: e + Math.cos(n) * r,
                            y: t + Math.sin(n) * r
                        }, {
                            x: e + Math.cos(n - Math.PI / 2) * i / 2,
                            y: t + Math.sin(n - Math.PI / 2) * i / 2
                        }]
                    }
                        ,
                    {
                        drawToCanvas: function (e, t, n, r, o, a, s) {
                            var l;
                            return null == s && (s = 0),
                                s = s || o,
                                e.fillStyle = a,
                                e.lineWidth = 0,
                                e.strokeStyle = "transparent",
                                e.beginPath(),
                                l = i(t, n, r, o, s),
                                e.moveTo(l[0].x, l[0].y),
                                e.lineTo(l[1].x, l[1].y),
                                e.lineTo(l[2].x, l[2].y),
                                e.fill()
                        },
                        svg: function (e, t, n, r, o, a) {
                            return null == a && (a = 0),
                                "<polygon fill='" + o + "' stroke='none' points='" + i(e, t, n, r, a = a || r).map(function (e) {
                                    return e.x + "," + e.y
                                }) + "' />"
                        }
                    })
                }
            }
                , {}],
            9: [function (e, t, n) {
                var i, r, o;
                o = {},
                    r = function (e) {
                        return o = e
                    }
                    ,
                    i = function (e) {
                        return o[e] || e
                    }
                    ,
                    t.exports = {
                        localize: r,
                        _: i
                    }
            }
                , {}],
            10: [function (e, t, n) {
                var i, r, o, a;
                e("./shapes").Point,
                    e("./util"),
                    (r = {}).toPoly = function (e) {
                        var t, n, r, a, s, l, c;
                        for (l = [],
                            c = [],
                            n = 0,
                            t = 0,
                            r = e.length; t < r; t++)
                            s = e[t],
                                a = o(s, i(e, n)),
                                l = l.concat([a[0]]),
                                c = [a[1]].concat(c),
                                n += 1;
                        return l.concat(c)
                    }
                    ,
                    i = function (e, t) {
                        return e.length < 3 && {
                            x: 0,
                            y: 0
                        },
                            0 === t ? i(e, t + 1) : t === e.length - 1 ? i(e, t - 1) : r.diff(e[t - 1], e[t + 1])
                    }
                    ,
                    r.diff = function (e, t) {
                        return {
                            x: t.x - e.x,
                            y: t.y - e.y
                        }
                    }
                    ,
                    a = function (e) {
                        var t;
                        return t = r.len(e),
                        {
                            x: e.x / t,
                            y: e.y / t
                        }
                    }
                    ,
                    o = function (e, t) {
                        return (t = a(t)).x = t.x * e.size / 2,
                            t.y = t.y * e.size / 2,
                            [{
                                x: e.x - t.y,
                                y: e.y + t.x,
                                color: e.color
                            }, {
                                x: e.x + t.y,
                                y: e.y - t.x,
                                color: e.color
                            }]
                    }
                    ,
                    r.len = function (e) {
                        return Math.sqrt(Math.pow(e.x, 2) + Math.pow(e.y, 2))
                    }
                    ,
                    r.scalePositionScalar = function (e, t, n, i) {
                        return e + (t * n - t * i) / 2
                    }
                    ,
                    t.exports = r
            }
                , {
                "./shapes": 13,
                "./util": 15
            }],
            11: [function (e, t, n) {
                var i, r, o;
                o = e("./util"),
                    i = e("./shapes").JSONToShape,
                    r = function (e, t, n) {
                        if (t.width)
                            return e.save(),
                                e.translate(e.canvas.width / 2, e.canvas.height / 2),
                                e.scale(n, n),
                                e.drawImage(t, -t.width / 2, -t.height / 2),
                                e.restore()
                    }
                    ,
                    t.exports = function (e, t) {
                        var n, a, s, l, c, u, d, p;
                        return null == t && (t = {}),
                            null == t.scale && (t.scale = 1),
                            u = function () {
                                var t, n, r, o;
                                for (o = [],
                                    t = 0,
                                    n = (r = e.shapes).length; t < n; t++)
                                    c = r[t],
                                        o.push(i(c));
                                return o
                            }(),
                            a = [],
                            e.backgroundShapes && (a = function () {
                                var t, n, r, o;
                                for (o = [],
                                    t = 0,
                                    n = (r = e.backgroundShapes).length; t < n; t++)
                                    c = r[t],
                                        o.push(i(c));
                                return o
                            }()),
                            null == t.margin && (t.margin = {
                                top: 0,
                                right: 0,
                                bottom: 0,
                                left: 0
                            }),
                            l = e.imageSize || {
                                width: "infinite",
                                height: "infinite"
                            },
                            s = e.colors || {
                                background: "transparent"
                            },
                            n = u.concat(a),
                            d = document.createElement("canvas"),
                            p = d.getContext("2d"),
                            t.rect ? (t.rect.x -= t.margin.left,
                                t.rect.y -= t.margin.top,
                                t.rect.width += t.margin.left + t.margin.right,
                                t.rect.height += t.margin.top + t.margin.bottom) : t.rect = o.getDefaultImageRect(function () {
                                    var e, t, i;
                                    for (i = [],
                                        e = 0,
                                        t = n.length; e < t; e++)
                                        c = n[e],
                                            i.push(c.getBoundingRect(p));
                                    return i
                                }(), l, t.margin),
                            d.width = t.rect.width * t.scale,
                            d.height = t.rect.height * t.scale,
                            p.fillStyle = s.background,
                            p.fillRect(0, 0, d.width, d.height),
                            t.rect.width && t.rect.height ? (t.watermarkImage && r(p, t.watermarkImage, t.watermarkScale),
                                o.combineCanvases(d, o.renderShapes(a, t.rect, t.scale), o.renderShapes(u, t.rect, t.scale))) : null
                    }
            }
                , {
                "./shapes": 13,
                "./util": 15
            }],
            12: [function (e, t, n) {
                var i, r;
                r = e("./util"),
                    i = e("./shapes").JSONToShape,
                    t.exports = function (e, t) {
                        var n, o, a, s, l, c, u, d;
                        return null == t && (t = {}),
                            d = function () {
                                var t, n, r, o;
                                for (o = [],
                                    t = 0,
                                    n = (r = e.shapes).length; t < n; t++)
                                    u = r[t],
                                        o.push(i(u));
                                return o
                            }(),
                            o = [],
                            e.backgroundShapes && (o = function () {
                                var t, n, r, o;
                                for (o = [],
                                    t = 0,
                                    n = (r = e.backgroundShapes).length; t < n; t++)
                                    u = r[t],
                                        o.push(i(u));
                                return o
                            }()),
                            null == t.margin && (t.margin = {
                                top: 0,
                                right: 0,
                                bottom: 0,
                                left: 0
                            }),
                            c = e.imageSize || {
                                width: "infinite",
                                height: "infinite"
                            },
                            a = e.colors || {
                                background: "transparent"
                            },
                            n = d.concat(o),
                            l = document.createElement("canvas"),
                            s = l.getContext("2d"),
                            t.rect ? (t.rect.x -= t.margin.left,
                                t.rect.y -= t.margin.top,
                                t.rect.width += t.margin.left + t.margin.right,
                                t.rect.height += t.margin.top + t.margin.bottom) : t.rect = r.getDefaultImageRect(function () {
                                    var e, t, i;
                                    for (i = [],
                                        e = 0,
                                        t = n.length; e < t; e++)
                                        u = n[e],
                                            i.push(u.getBoundingRect(s));
                                    return i
                                }(), c, t.margin),
                            LC.renderShapesToSVG(o.concat(d), t.rect, a.background)
                    }
            }
                , {
                "./shapes": 13,
                "./util": 15
            }],
            13: [function (e, t, n) {
                var i, r, o, a, s, l, c, u, d, p, h, f, m, g, v, y, b, w, $, S;
                S = e("./util"),
                    r = e("./TextRenderer"),
                    e("./lineEndCapShapes"),
                    g = e("./canvasRenderer"),
                    p = g.defineCanvasRenderer,
                    y = g.renderShapeToContext,
                    v = e("./svgRenderer"),
                    h = v.defineSVGRenderer,
                    b = v.renderShapeToSVG,
                    $ = {},
                    d = function (e, t, n, i, r, o, a, s, l, c, u, d, p, h, f, m, g) {
                        var v;
                        return (v = new $[e](t, n, i, r, o, a, s, l, c, u, d, p, h, f, m, g)).id = S.getGUID(),
                            v.toolName = e,
                            v
                    }
                    ,
                    i = function (e) {
                        var t, n, i, r, o;
                        return t = e.className,
                            n = e.data,
                            i = e.id,
                            o = e.scaleText,
                            t in $ ? (r = $[t].fromJSON(n)) ? (i && (r.id = i),
                                o && (r.scaleText = o),
                                r) : (console.log("Unreadable shape:", t, n),
                                    null) : (console.log("Unknown shape:", t, n),
                                        null)
                    }
                    ,
                    w = function (e) {
                        var t = ""
                            , n = {
                                className: e.className,
                                data: e.toJSON(),
                                maxLineLenth: t,
                                id: e.id
                            };
                        if (e.renderer && e.renderer.lines)
                            for (var i in e.renderer.lines)
                                0 != e.renderer.lines[i].length && (t += e.renderer.lines[i].length + ",");
                        return n.maxLineLenth = t,
                            n
                    }
                    ,
                    u = function (e, t) {
                        return t ? u(s(s(c(e))), t - 1) : e
                    }
                    ,
                    c = function (e) {
                        var t, n, i, r, o;
                        for (o = [],
                            t = 0,
                            r = 0,
                            n = (e = [e[0]].concat(e).concat(S.last(e))).length; r < n; r++)
                            i = e[r],
                                o[2 * t] = i,
                                e[t + 1] && (o[2 * t + 1] = l(i, e[t + 1])),
                                t += 1;
                        return o
                    }
                    ,
                    s = function (e) {
                        var t, n, i, r, o;
                        for (t = [],
                            n = 0,
                            o = 0,
                            i = e.length; o < i; o++)
                            r = e[o],
                                e[n + 1] && (t[n] = l(r, e[n + 1])),
                                n += 1;
                        return t
                    }
                    ,
                    l = function (e, t) {
                        return d("Point", {
                            x: e.x + (t.x - e.x) / 2,
                            y: e.y + (t.y - e.y) / 2,
                            size: e.size + (t.size - e.size) / 2,
                            color: e.color
                        })
                    }
                    ,
                    (f = function (e, t) {
                        var n, i, r, o, a, s, l, c;
                        for (o in (n = function (e, n, i, r, o, a, s, l, c, u, d, p, h, f, m, g) {
                            return t.constructor.call(this, e, n, i, r, o, a, s, l, c, u, d, p, h, f, m, g),
                                this
                        }
                        ).prototype.className = e,
                            n.fromJSON = t.fromJSON,
                            t.draw && (a = t.draw,
                                s = t.draw || function (e, t, n) {
                                    return this.draw(e, t, n)
                                }
                                ,
                                i = function (e, t, n) {
                                    return a.call(t, e, n)
                                }
                                ,
                                r = function (e, t, n, i) {
                                    return s.call(n, e, t, i)
                                }
                                ,
                                delete t.draw,
                                t.drawLatest && delete t.drawLatest,
                                p(e, i, r)),
                            t.toSVG && (l = t.toSVG,
                                c = function (e) {
                                    return l.call(e)
                                }
                                ,
                                delete t.toSVG,
                                h(e, c)),
                            n.prototype.draw = function (e, t) {
                                return y(e, this, {
                                    retryCallback: t
                                })
                            }
                            ,
                            n.prototype.drawLatest = function (e, t, n) {
                                return y(e, this, {
                                    retryCallback: n,
                                    bufferCtx: t,
                                    shouldOnlyDrawLatest: !0
                                })
                            }
                            ,
                            n.prototype.toSVG = function () {
                                return b(this)
                            }
                            ,
                            t)
                            "fromJSON" !== o && (n.prototype[o] = t[o]);
                        return $[e] = n,
                            n
                    }
                    )("Image", {
                        constructor: function (e) {
                            return null == e && (e = {}),
                                this.x = e.x || 0,
                                this.y = e.y || 0,
                                this.scale = e.scale || 1,
                                this.image = e.image || null
                        },
                        getBoundingRect: function () {
                            return {
                                x: this.x,
                                y: this.y,
                                width: this.image.width * this.scale,
                                height: this.image.height * this.scale
                            }
                        },
                        toJSON: function () {
                            return {
                                x: this.x,
                                y: this.y,
                                imageSrc: this.image.src,
                                imageObject: this.image,
                                scale: this.scale
                            }
                        },
                        fromJSON: function (e) {
                            var t, n;
                            return t = null,
                                (null != (n = e.imageObject) ? n.width : void 0) ? t = e.imageObject : (t = new Image).src = e.imageSrc,
                                d("Image", {
                                    x: e.x,
                                    y: e.y,
                                    image: t,
                                    scale: e.scale
                                })
                        },
                        move: function (e) {
                            return null == e && (e = {}),
                                this.x = this.x - e.xDiff,
                                this.y = this.y - e.yDiff
                        },
                        setUpperLeft: function (e) {
                            return null == e && (e = {}),
                                this.x = e.x,
                                this.y = e.y
                        }
                    }),
                    f("Rectangle", {
                        constructor: function (e) {
                            return null == e && (e = {}),
                                this.x = e.x || 0,
                                this.y = e.y || 0,
                                this.width = e.width || 0,
                                this.height = e.height || 0,
                                this.strokeWidth = e.strokeWidth || 1,
                                this.strokeColor = e.strokeColor || "black",
                                this.fillColor = e.fillColor || "transparent"
                        },
                        getBoundingRect: function () {
                            return {
                                x: this.x - this.strokeWidth / 2,
                                y: this.y - this.strokeWidth / 2,
                                width: this.width + this.strokeWidth,
                                height: this.height + this.strokeWidth
                            }
                        },
                        toJSON: function () {
                            return {
                                x: this.x,
                                y: this.y,
                                width: this.width,
                                height: this.height,
                                strokeWidth: this.strokeWidth,
                                strokeColor: this.strokeColor,
                                fillColor: this.fillColor
                            }
                        },
                        fromJSON: function (e) {
                            return d("Rectangle", e)
                        },
                        move: function (e) {
                            return null == e && (e = {}),
                                this.x = this.x - e.xDiff,
                                this.y = this.y - e.yDiff
                        },
                        setUpperLeft: function (e) {
                            return null == e && (e = {}),
                                this.x = e.x,
                                this.y = e.y
                        }
                    }),
                    f("Ellipse", {
                        constructor: function (e) {
                            return null == e && (e = {}),
                                this.x = e.x || 0,
                                this.y = e.y || 0,
                                this.width = e.width || 0,
                                this.height = e.height || 0,
                                this.strokeWidth = e.strokeWidth || 1,
                                this.strokeColor = e.strokeColor || "black",
                                this.fillColor = e.fillColor || "transparent"
                        },
                        getBoundingRect: function () {
                            return {
                                x: this.x - this.strokeWidth / 2,
                                y: this.y - this.strokeWidth / 2,
                                width: this.width + this.strokeWidth,
                                height: this.height + this.strokeWidth
                            }
                        },
                        toJSON: function () {
                            return {
                                x: this.x,
                                y: this.y,
                                width: this.width,
                                height: this.height,
                                strokeWidth: this.strokeWidth,
                                strokeColor: this.strokeColor,
                                fillColor: this.fillColor
                            }
                        },
                        fromJSON: function (e) {
                            return d("Ellipse", e)
                        },
                        move: function (e) {
                            return null == e && (e = {}),
                                this.x = this.x - e.xDiff,
                                this.y = this.y - e.yDiff
                        },
                        setUpperLeft: function (e) {
                            return null == e && (e = {}),
                                this.x = e.x,
                                this.y = e.y
                        }
                    }),
                    f("Line", {
                        constructor: function (e) {
                            return null == e && (e = {}),
                                this.x1 = e.x1 || 0,
                                this.y1 = e.y1 || 0,
                                this.x2 = e.x2 || 0,
                                this.y2 = e.y2 || 0,
                                this.strokeWidth = e.strokeWidth || 1,
                                this.color = e.color || "black",
                                this.capStyle = e.capStyle || "round",
                                this.endCapShapes = e.endCapShapes || [null, null],
                                this.dash = e.dash || null
                        },
                        getBoundingRect: function () {
                            return {
                                x: Math.min(this.x1, this.x2) - this.strokeWidth / 2,
                                y: Math.min(this.y1, this.y2) - this.strokeWidth / 2,
                                width: Math.abs(this.x2 - this.x1) + this.strokeWidth / 2,
                                height: Math.abs(this.y2 - this.y1) + this.strokeWidth / 2
                            }
                        },
                        toJSON: function () {
                            return {
                                x1: this.x1,
                                y1: this.y1,
                                x2: this.x2,
                                y2: this.y2,
                                strokeWidth: this.strokeWidth,
                                color: this.color,
                                capStyle: this.capStyle,
                                dash: this.dash,
                                endCapShapes: this.endCapShapes
                            }
                        },
                        fromJSON: function (e) {
                            return d("Line", e)
                        },
                        move: function (e) {
                            return null == e && (e = {}),
                                this.x1 = this.x1 - e.xDiff,
                                this.y1 = this.y1 - e.yDiff,
                                this.x2 = this.x2 - e.xDiff,
                                this.y2 = this.y2 - e.yDiff
                        },
                        setUpperLeft: function (e) {
                            var t, n, i;
                            return null == e && (e = {}),
                                n = (t = this.getBoundingRect()).x - e.x,
                                i = t.y - e.y,
                                this.move({
                                    xDiff: n,
                                    yDiff: i
                                })
                        }
                    }),
                    a = function (e) {
                        var t, n, i, r, o;
                        if (!e.length)
                            return !1;
                        for (o = e[0].size,
                            t = e[0].color,
                            r = 0,
                            n = e.length; r < n; r++)
                            if ((i = e[r]).size === o && i.color === t || console.log(o, t, i.size, i.color),
                                i.size !== o || i.color !== t)
                                return !1;
                        return !0
                    }
                    ,
                    o = function (e, t) {
                        var n, r, o, a, s;
                        return r = null,
                            t.points ? r = function () {
                                var e, r, o, a;
                                for (a = [],
                                    r = 0,
                                    e = (o = t.points).length; r < e; r++)
                                    n = o[r],
                                        a.push(i(n));
                                return a
                            }() : t.pointCoordinatePairs && (r = function () {
                                var e, n, r, o, l;
                                for (l = [],
                                    n = 0,
                                    e = (r = t.pointCoordinatePairs).length; n < e; n++)
                                    o = r[n],
                                        a = o[0],
                                        s = o[1],
                                        l.push(i({
                                            className: "Point",
                                            data: {
                                                x: a,
                                                y: s,
                                                size: t.pointSize,
                                                color: t.pointColor,
                                                smooth: t.smooth
                                            }
                                        }));
                                return l
                            }()),
                            o = null,
                            t.smoothedPointCoordinatePairs && (o = function () {
                                var e, n, r, o, l;
                                for (l = [],
                                    n = 0,
                                    e = (r = t.smoothedPointCoordinatePairs).length; n < e; n++)
                                    o = r[n],
                                        a = o[0],
                                        s = o[1],
                                        l.push(i({
                                            className: "Point",
                                            data: {
                                                x: a,
                                                y: s,
                                                size: t.pointSize,
                                                color: t.pointColor,
                                                smooth: t.smooth
                                            }
                                        }));
                                return l
                            }()),
                            r[0] ? d(e, {
                                points: r,
                                smoothedPoints: o,
                                order: t.order,
                                tailSize: t.tailSize,
                                smooth: t.smooth
                            }) : null
                    }
                    ,
                    f("LinePath", m = {
                        constructor: function (e) {
                            var t, n, i, r, o;
                            if (null == e && (e = {}),
                                i = e.points || [],
                                this.order = e.order || 3,
                                this.tailSize = e.tailSize || 3,
                                this.smooth = !("smooth" in e) || e.smooth,
                                this.segmentSize = Math.pow(2, this.order),
                                this.sampleSize = this.tailSize + 1,
                                e.smoothedPoints)
                                return this.points = e.points,
                                    this.smoothedPoints = e.smoothedPoints;
                            for (this.points = [],
                                o = [],
                                r = 0,
                                t = i.length; r < t; r++)
                                n = i[r],
                                    o.push(this.addPoint(n));
                            return o
                        },
                        getBoundingRect: function () {
                            return S.getBoundingRect(this.points.map(function (e) {
                                return {
                                    x: e.x - e.size / 2,
                                    y: e.y - e.size / 2,
                                    width: e.size,
                                    height: e.size
                                }
                            }))
                        },
                        toJSON: function () {
                            var e, t;
                            return a(this.points) ? {
                                order: this.order,
                                tailSize: this.tailSize,
                                smooth: this.smooth,
                                pointCoordinatePairs: function () {
                                    var e, n, i, r;
                                    for (r = [],
                                        n = 0,
                                        e = (i = this.points).length; n < e; n++)
                                        t = i[n],
                                            r.push([t.x, t.y]);
                                    return r
                                }
                                    .call(this),
                                smoothedPointCoordinatePairs: function () {
                                    var e, n, i, r;
                                    for (r = [],
                                        n = 0,
                                        e = (i = this.smoothedPoints).length; n < e; n++)
                                        t = i[n],
                                            r.push([t.x, t.y]);
                                    return r
                                }
                                    .call(this),
                                pointSize: this.points[0].size,
                                pointColor: this.points[0].color
                            } : {
                                    order: this.order,
                                    tailSize: this.tailSize,
                                    smooth: this.smooth,
                                    points: function () {
                                        var t, n, i, r;
                                        for (r = [],
                                            n = 0,
                                            t = (i = this.points).length; n < t; n++)
                                            e = i[n],
                                                r.push(w(e));
                                        return r
                                    }
                                        .call(this)
                                }
                        },
                        fromJSON: function (e) {
                            return o("LinePath", e)
                        },
                        addPoint: function (e) {
                            if (this.points.push(e),
                                this.smooth)
                                return !this.smoothedPoints || this.points.length < this.sampleSize ? this.smoothedPoints = u(this.points, this.order) : (this.tail = S.last(u(S.last(this.points, this.sampleSize), this.order), this.segmentSize * this.tailSize),
                                    this.smoothedPoints = this.smoothedPoints.slice(0, this.smoothedPoints.length - this.segmentSize * (this.tailSize - 1)).concat(this.tail));
                            this.smoothedPoints = this.points
                        },
                        move: function (e) {
                            var t, n, i;
                            for (null == e && (e = {}),
                                i = 0,
                                t = (n = this.smooth ? this.smoothedPoints : this.points).length; i < t; i++)
                                n[i].move(e);
                            return this.points = this.smoothedPoints
                        },
                        setUpperLeft: function (e) {
                            var t, n, i;
                            return null == e && (e = {}),
                                n = (t = this.getBoundingRect()).x - e.x,
                                i = t.y - e.y,
                                this.move({
                                    xDiff: n,
                                    yDiff: i
                                })
                        }
                    }),
                    f("ErasedLinePath", {
                        constructor: m.constructor,
                        toJSON: m.toJSON,
                        addPoint: m.addPoint,
                        getBoundingRect: m.getBoundingRect,
                        fromJSON: function (e) {
                            return o("ErasedLinePath", e)
                        },
                        move: m.move,
                        setUpperLeft: m.setUpperLeft
                    }),
                    f("Point", {
                        constructor: function (e) {
                            return null == e && (e = {}),
                                this.x = e.x || 0,
                                this.y = e.y || 0,
                                this.size = e.size || 0,
                                this.color = e.color || ""
                        },
                        getBoundingRect: function () {
                            return {
                                x: this.x - this.size / 2,
                                y: this.y - this.size / 2,
                                width: this.size,
                                height: this.size
                            }
                        },
                        toJSON: function () {
                            return {
                                x: this.x,
                                y: this.y,
                                size: this.size,
                                color: this.color
                            }
                        },
                        fromJSON: function (e) {
                            return d("Point", e)
                        },
                        move: function (e) {
                            return null == e && (e = {}),
                                this.x = this.x - e.xDiff,
                                this.y = this.y - e.yDiff
                        },
                        setUpperLeft: function (e) {
                            return null == e && (e = {}),
                                this.x = e.x,
                                this.y = e.y
                        }
                    }),
                    f("Polygon", {
                        constructor: function (e) {
                            var t, n, i, r, o;
                            for (null == e && (e = {}),
                                this.points = e.points,
                                this.fillColor = e.fillColor || "white",
                                this.strokeColor = e.strokeColor || "black",
                                this.strokeWidth = e.strokeWidth,
                                this.dash = e.dash || null,
                                null == e.isClosed && (e.isClosed = !0),
                                this.isClosed = e.isClosed,
                                o = [],
                                i = 0,
                                t = (r = this.points).length; i < t; i++)
                                (n = r[i]).color = this.strokeColor,
                                    o.push(n.size = this.strokeWidth);
                            return o
                        },
                        addPoint: function (e, t) {
                            return this.points.push(LC.createShape("Point", {
                                x: e,
                                y: t
                            }))
                        },
                        getBoundingRect: function () {
                            return S.getBoundingRect(this.points.map(function (e) {
                                return e.getBoundingRect()
                            }))
                        },
                        toJSON: function () {
                            return {
                                strokeWidth: this.strokeWidth,
                                fillColor: this.fillColor,
                                strokeColor: this.strokeColor,
                                dash: this.dash,
                                isClosed: this.isClosed,
                                pointCoordinatePairs: this.points.map(function (e) {
                                    return [e.x, e.y]
                                })
                            }
                        },
                        fromJSON: function (e) {
                            return e.points = e.pointCoordinatePairs.map(function (t) {
                                var n, i;
                                return n = t[0],
                                    i = t[1],
                                    d("Point", {
                                        x: n,
                                        y: i,
                                        size: e.strokeWidth,
                                        color: e.strokeColor
                                    })
                            }),
                                d("Polygon", e)
                        },
                        move: function (e) {
                            var t, n, i, r, o;
                            for (null == e && (e = {}),
                                o = [],
                                i = 0,
                                t = (r = this.points).length; i < t; i++)
                                n = r[i],
                                    o.push(n.move(e));
                            return o
                        },
                        setUpperLeft: function (e) {
                            var t, n, i;
                            return null == e && (e = {}),
                                n = (t = this.getBoundingRect()).x - e.x,
                                i = t.y - e.y,
                                this.move({
                                    xDiff: n,
                                    yDiff: i
                                })
                        }
                    }),
                    f("Text", {
                        constructor: function (e) {
                            return null == e && (e = {}),
                                this.x = e.x || 0,
                                this.y = e.y || 0,
                                this.v = e.v || 0,
                                this.text = e.text || "",
                                this.color = e.color || "black",
                                this.font = e.font || "18px sans-serif",
                                this.forcedWidth = e.forcedWidth || null,
                                this.forcedHeight = e.forcedHeight || null
                        },
                        _makeRenderer: function (e, t) {
                            if (e.lineHeight = 1.2,
                                this.renderer = new r(e, this.text, this.font, this.forcedWidth, this.forcedHeight, t),
                                this.v < 1)
                                return console.log("repairing baseline"),
                                    this.v = 1,
                                    this.x -= this.renderer.metrics.bounds.minx,
                                    this.y -= this.renderer.metrics.leading - this.renderer.metrics.descent
                        },
                        setText: function (e) {
                            return this.text = e,
                                this.renderer = null
                        },
                        setFont: function (e) {
                            return this.font = e,
                                this.renderer = null
                        },
                        setPosition: function (e, t) {
                            return this.x = e,
                                this.y = t
                        },
                        setSize: function (e, t) {
                            return this.forcedWidth = Math.max(e, 0),
                                this.forcedHeight = Math.max(t, 0),
                                this.renderer = null
                        },
                        enforceMaxBoundingRect: function (e) {
                            var t, n, i;
                            if (t = this.getBoundingRect(e.ctx),
                                i = {
                                    x: -e.position.x / e.scale,
                                    y: -e.position.y / e.scale,
                                    width: e.canvas.width / e.scale,
                                    height: e.canvas.height / e.scale
                                },
                                t.x + t.width > i.x + i.width)
                                return n = t.x - i.x,
                                    this.forcedWidth = i.width - n - 10,
                                    this.renderer = null
                        },
                        getBoundingRect: function (e, t) {
                            if (null == t && (t = !1),
                                !this.renderer) {
                                if (!e)
                                    throw "Must pass ctx if text hasn't been rendered yet";
                                this._makeRenderer(e)
                            }
                            return {
                                x: Math.floor(this.x),
                                y: Math.floor(this.y),
                                width: Math.ceil(this.renderer.getWidth(!0)),
                                height: Math.ceil(this.renderer.getHeight())
                            }
                        },
                        toJSON: function () {
                            return {
                                x: this.x,
                                y: this.y,
                                text: this.text,
                                color: this.color,
                                font: this.font,
                                forcedWidth: this.forcedWidth,
                                forcedHeight: this.forcedHeight,
                                v: this.v
                            }
                        },
                        fromJSON: function (e) {
                            return d("Text", e)
                        },
                        move: function (e) {
                            return null == e && (e = {}),
                                this.x = this.x - e.xDiff,
                                this.y = this.y - e.yDiff
                        },
                        setUpperLeft: function (e) {
                            return null == e && (e = {}),
                                this.x = e.x,
                                this.y = e.y
                        }
                    }),
                    f("SelectionBox", {
                        constructor: function (e) {
                            return null == e && (e = {}),
                                this.shape = e.shape,
                                null != e.handleSize ? this.handleSize = e.handleSize : this.handleSize = 10,
                                this.margin = 4,
                                this.backgroundColor = e.backgroundColor || null,
                                this._br = this.shape.getBoundingRect(e.ctx)
                        },
                        toJSON: function () {
                            return {
                                shape: w(this.shape),
                                backgroundColor: this.backgroundColor
                            }
                        },
                        fromJSON: function (e) {
                            var t, n;
                            return n = e.shape,
                                e.handleSize,
                                e.margin,
                                t = e.backgroundColor,
                                d("SelectionBox", {
                                    shape: i(n),
                                    backgroundColor: t
                                })
                        },
                        getTopLeftHandleRect: function () {
                            return {
                                x: this._br.x - this.handleSize - this.margin,
                                y: this._br.y - this.handleSize - this.margin,
                                width: this.handleSize,
                                height: this.handleSize
                            }
                        },
                        getBottomLeftHandleRect: function () {
                            return {
                                x: this._br.x - this.handleSize - this.margin,
                                y: this._br.y + this._br.height + this.margin,
                                width: this.handleSize,
                                height: this.handleSize
                            }
                        },
                        getTopRightHandleRect: function () {
                            return {
                                x: this._br.x + this._br.width + this.margin,
                                y: this._br.y - this.handleSize - this.margin,
                                width: this.handleSize,
                                height: this.handleSize
                            }
                        },
                        getBottomRightHandleRect: function () {
                            return {
                                x: this._br.x + this._br.width + this.margin,
                                y: this._br.y + this._br.height + this.margin,
                                width: this.handleSize,
                                height: this.handleSize
                            }
                        },
                        getBoundingRect: function () {
                            return {
                                x: this._br.x - this.margin,
                                y: this._br.y - this.margin,
                                width: this._br.width + 2 * this.margin,
                                height: this._br.height + 2 * this.margin
                            }
                        }
                    }),
                    t.exports = {
                        defineShape: f,
                        createShape: d,
                        JSONToShape: i,
                        shapeToJSON: w
                    }
            }
                , {
                "./TextRenderer": 2,
                "./canvasRenderer": 5,
                "./lineEndCapShapes": 8,
                "./svgRenderer": 14,
                "./util": 15
            }],
            14: [function (e, t, n) {
                var i, r, o, a;
                r = e("./lineEndCapShapes"),
                    a = {},
                    o = function (e, t) {
                        if (null == t && (t = {}),
                            null == t.shouldIgnoreUnsupportedShapes && (t.shouldIgnoreUnsupportedShapes = !1),
                            a[e.className])
                            return a[e.className](e);
                        if (t.shouldIgnoreUnsupportedShapes)
                            return console.warn("Can't render shape of type " + e.className + " to SVG"),
                                "";
                        throw "Can't render shape of type " + e.className + " to SVG"
                    }
                    ,
                    (i = function (e, t) {
                        return a[e] = t
                    }
                    )("Rectangle", function (e) {
                        var t, n, i, r, o, a, s, l;
                        return r = e.x,
                            s = e.y,
                            o = e.x + e.width,
                            l = e.y + e.height,
                            i = Math.min(r, o),
                            a = Math.min(s, l),
                            n = Math.max(r, o) - i,
                            t = Math.max(s, l) - a,
                            e.strokeWidth % 2 != 0 && (i += .5,
                                a += .5),
                            "<rect x='" + i + "' y='" + a + "' width='" + n + "' height='" + t + "' stroke='" + e.strokeColor + "' fill='" + e.fillColor + "' stroke-width='" + e.strokeWidth + "' />"
                    }),
                    i("SelectionBox", function (e) {
                        return ""
                    }),
                    i("Ellipse", function (e) {
                        var t, n;
                        return n = Math.floor(e.width / 2),
                            t = Math.floor(e.height / 2),
                            "<ellipse cx='" + (e.x + n) + "' cy='" + (e.y + t) + "' rx='" + Math.abs(n) + "' ry='" + Math.abs(t) + "' stroke='" + e.strokeColor + "' fill='" + e.fillColor + "' stroke-width='" + e.strokeWidth + "' />"
                    }),
                    i("Image", function (e) {
                        return "<image x='" + e.x + "' y='" + e.y + "' width='" + e.image.naturalWidth * e.scale + "' height='" + e.image.naturalHeight * e.scale + "' xlink:href='" + e.image.src + "' />"
                    }),
                    i("Line", function (e) {
                        var t, n, i, o, a, s, l;
                        return i = e.dash ? "stroke-dasharray='" + e.dash.join(", ") + "'" : "",
                            n = "",
                            t = Math.max(2.2 * e.strokeWidth, 5),
                            o = e.x1,
                            a = e.x2,
                            s = e.y1,
                            l = e.y2,
                            e.strokeWidth % 2 != 0 && (o += .5,
                                a += .5,
                                s += .5,
                                l += .5),
                            e.endCapShapes[0] && (n += r[e.endCapShapes[0]].svg(o, s, Math.atan2(s - l, o - a), t, e.color)),
                            e.endCapShapes[1] && (n += r[e.endCapShapes[1]].svg(a, l, Math.atan2(l - s, a - o), t, e.color)),
                            "<g> <line x1='" + o + "' y1='" + s + "' x2='" + a + "' y2='" + l + "' " + i + " stroke-linecap='" + e.capStyle + "' stroke='" + e.color + " 'stroke-width='" + e.strokeWidth + "' /> " + n + " </g>"
                    }),
                    i("LinePath", function (e) {
                        return "<polyline fill='none' points='" + e.smoothedPoints.map(function (e) {
                            var t;
                            return t = e.strokeWidth % 2 == 0 ? 0 : .5,
                                e.x + t + "," + (e.y + t)
                        }).join(" ") + "' stroke='" + e.points[0].color + "' stroke-linecap='round' stroke-width='" + e.points[0].size + "' />"
                    }),
                    i("ErasedLinePath", function (e) {
                        return ""
                    }),
                    i("Polygon", function (e) {
                        return e.isClosed ? "<polygon fill='" + e.fillColor + "' points='" + e.points.map(function (e) {
                            var t;
                            return t = e.strokeWidth % 2 == 0 ? 0 : .5,
                                e.x + t + "," + (e.y + t)
                        }).join(" ") + "' stroke='" + e.strokeColor + "' stroke-width='" + e.strokeWidth + "' />" : "<polyline fill='" + e.fillColor + "' points='" + e.points.map(function (e) {
                            var t;
                            return t = e.strokeWidth % 2 == 0 ? 0 : .5,
                                e.x + t + "," + (e.y + t)
                        }).join(" ") + "' stroke='none' /> <polyline fill='none' points='" + e.points.map(function (e) {
                            var t;
                            return t = e.strokeWidth % 2 == 0 ? 0 : .5,
                                e.x + t + "," + (e.y + t)
                        }).join(" ") + "' stroke='" + e.strokeColor + "' stroke-width='" + e.strokeWidth + "' />"
                    }),
                    i("Text", function (e) {
                        var t, n, i;
                        return i = e.forcedWidth ? "width='" + e.forcedWidth + "px'" : "",
                            t = e.forcedHeight ? "height='" + e.forcedHeight + "px'" : "",
                            n = e.text.split(/\r\n|\r|\n/g),
                            e.renderer && (n = e.renderer.lines),
                            "<text x='" + e.x + "' y='" + e.y + "' " + i + " " + t + " fill='" + e.color + "' style='font: " + e.font + ";'> " + n.map(function (t, n) {
                                var i;
                                return i = 0 === n ? 0 : "1.2em",
                                    "<tspan x='" + e.x + "' dy='" + i + "' alignment-baseline='text-before-edge'> " + t + " </tspan>"
                            }).join("") + " </text>"
                    }),
                    t.exports = {
                        defineSVGRenderer: i,
                        renderShapeToSVG: o
                    }
            }
                , {
                "./lineEndCapShapes": 8
            }],
            15: [function (e, t, n) {
                var i, r, o, a, s, l = [].slice;
                o = Array.prototype.slice,
                    i = e("./canvasRenderer").renderShapeToContext,
                    r = e("./svgRenderer").renderShapeToSVG,
                    a = {
                        addImageOnload: function (e, t) {
                            var n;
                            return n = e.onload,
                                e.onload = function () {
                                    return "function" == typeof n && n(),
                                        t()
                                }
                                ,
                                e
                        },
                        last: function (e, t) {
                            return null == t && (t = null),
                                t ? o.call(e, Math.max(e.length - t, 0)) : e[e.length - 1]
                        },
                        classSet: function (e) {
                            var t, n;
                            for (n in t = [],
                                e)
                                e[n] && t.push(n);
                            return t.join(" ")
                        },
                        matchElementSize: function (e, t, n, i) {
                            var r;
                            return null == i && (i = function () { }
                            ),
                                r = function () {
                                    var n, r, o;
                                    for (r = 0,
                                        o = t.length; r < o; r++)
                                        (n = t[r]).style.width = $(e).width() + "px",
                                            n.style.height = $(e).height() + "px",
                                            null != n.width && (n.setAttribute("width", $(e).width()),
                                                n.setAttribute("height", $(e).height()));
                                    return i()
                                }
                                ,
                                e.addEventListener("resize", r),
                                window.addEventListener("resize", r),
                                window.addEventListener("orientationchange", r),
                                r(),
                                r
                        },
                        combineCanvases: function () {
                            var e, t, n, i, r, o, a, s;
                            for (n = 1 <= arguments.length ? l.call(arguments, 0) : [],
                                (e = document.createElement("canvas")).width = n[0].width,
                                e.height = n[0].height,
                                r = 0,
                                a = n.length; r < a; r++)
                                t = n[r],
                                    e.width = Math.max(t.width, e.width),
                                    e.height = Math.max(t.height, e.height);
                            for (i = e.getContext("2d"),
                                o = 0,
                                s = n.length; o < s; o++)
                                t = n[o],
                                    i.drawImage(t, 0, 0);
                            return e
                        },
                        renderShapes: function (e, t, n, r) {
                            var o, a, s, l;
                            for (null == n && (n = 1),
                                null == r && (r = null),
                                (r = r || document.createElement("canvas")).width = t.width * n,
                                r.height = t.height * n,
                                (o = r.getContext("2d")).translate(-t.x * n, -t.y * n),
                                o.scale(n, n),
                                a = 0,
                                s = e.length; a < s; a++)
                                l = e[a],
                                    i(o, l);
                            return r
                        },
                        renderShapesToSVG: function (e, t, n) {
                            var i, o, a, s;
                            return a = t.x,
                                s = t.y,
                                ("<svg xmlns='http://www.w3.org/2000/svg' width='" + (o = t.width) + "' height='" + (i = t.height) + "' viewBox='0 0 " + o + " " + i + "'> <rect width='" + o + "' height='" + i + "' x='0' y='0' fill='" + n + "' /> <g transform='translate(" + -a + ", " + -s + ")'> " + e.map(r).join("") + " </g> </svg>").replace(/(\r\n|\n|\r)/gm, "")
                        },
                        getBoundingRect: function (e, t, n) {
                            var i, r, o, a, s, l, c;
                            if (!e.length)
                                return {
                                    x: 0,
                                    y: 0,
                                    width: t,
                                    height: n
                                };
                            for (s = e[0].x,
                                l = e[0].y,
                                o = e[0].x + e[0].width,
                                a = e[0].y + e[0].height,
                                i = 0,
                                r = e.length; i < r; i++)
                                c = e[i],
                                    s = Math.floor(Math.min(c.x, s)),
                                    l = Math.floor(Math.min(c.y, l)),
                                    o = Math.ceil(Math.max(o, c.x + c.width)),
                                    a = Math.ceil(Math.max(a, c.y + c.height));
                            return {
                                x: s = t ? 0 : s,
                                y: l = n ? 0 : l,
                                width: (o = t || o) - s,
                                height: (a = n || a) - l
                            }
                        },
                        getDefaultImageRect: function (e, t, n) {
                            var i, r, o;
                            return null == t && (t = {
                                width: 0,
                                height: 0
                            }),
                                null == n && (n = {
                                    top: 0,
                                    right: 0,
                                    bottom: 0,
                                    left: 0
                                }),
                                o = t.width,
                                i = t.height,
                                (r = a.getBoundingRect(e, "infinite" === o ? 0 : o, "infinite" === i ? 0 : i)).x -= n.left,
                                r.y -= n.top,
                                r.width += n.left + n.right,
                                r.height += n.top + n.bottom,
                                r
                        },
                        getBackingScale: function (e) {
                            return console.error("devicePixelRatio:" + window.devicePixelRatio),
                                null == window.devicePixelRatio ? 1 : window.devicePixelRatio > 1 ? window.devicePixelRatio : 1
                        },
                        requestAnimationFrame: (window.requestAnimationFrame || window.setTimeout).bind(window),
                        getGUID: (s = function () {
                            return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1)
                        }
                            ,
                            function () {
                                return s() + s() + "-" + s() + "-" + s() + "-" + s() + "-" + s() + s() + s()
                            }
                        ),
                        requestAnimationFrame: function (e) {
                            return window.requestAnimationFrame ? window.requestAnimationFrame(e) : window.webkitRequestAnimationFrame ? window.webkitRequestAnimationFrame(e) : window.mozRequestAnimationFrame ? window.mozRequestAnimationFrame(e) : setTimeout(e, 0)
                        },
                        cancelAnimationFrame: function (e) {
                            return window.cancelAnimationFrame ? window.cancelAnimationFrame(e) : window.webkitCancelRequestAnimationFrame ? window.webkitCancelRequestAnimationFrame(e) : window.webkitCancelAnimationFrame ? window.webkitCancelAnimationFrame(e) : window.mozCancelAnimationFrame ? window.mozCancelAnimationFrame(e) : clearTimeout(e)
                        }
                    },
                    t.exports = a
            }
                , {
                "./canvasRenderer": 5,
                "./svgRenderer": 14
            }],
            16: [function (e, t, n) {
                "use strict";
                !function () {
                    function e(e, t) {
                        t = t || {
                            bubbles: !1,
                            cancelable: !1,
                            detail: void 0
                        };
                        var n = document.createEvent("CustomEvent");
                        return n.initCustomEvent(e, t.bubbles, t.cancelable, t.detail),
                            n
                    }
                    e.prototype = window.CustomEvent.prototype,
                        window.CustomEvent = e
                }()
            }
                , {}],
            17: [function (e, t, n) {
                "use strict";
                var i = !1;
                CanvasRenderingContext2D.prototype.setLineDash || (CanvasRenderingContext2D.prototype.setLineDash = function () {
                    i || (console.warn("context2D.setLineDash is a no-op in this browser."),
                        i = !0)
                }
                ),
                    t.exports = null
            }
                , {}],
            18: [function (e, t, n) {
                var i, r, o, a, s, l, c, u, d, p, h, f, m, g, v, y, b;
                e("./ie_customevent"),
                    e("./ie_setLineDash"),
                    i = e("./core/LiterallyCanvas"),
                    s = e("./core/defaultOptions"),
                    o = e("./core/canvasRenderer"),
                    v = e("./core/svgRenderer"),
                    g = e("./core/shapes"),
                    b = e("./core/util"),
                    h = e("./core/renderSnapshotToImage"),
                    f = e("./core/renderSnapshotToSVG"),
                    d = e("./core/localization").localize,
                    a = {
                        snapshotToShapes: function (e) {
                            var t, n, i, r, o;
                            for (r = [],
                                t = 0,
                                n = (i = e.shapes).length; t < n; t++)
                                o = i[t],
                                    r.push(g.JSONToShape(o));
                            return r
                        },
                        snapshotJSONToShapes: function (e) {
                            return a.snapshotToShapes(JSON.parse(e))
                        }
                    },
                    r = e("./tools/base"),
                    y = {
                        Pencil: e("./tools/Pencil"),
                        Eraser: e("./tools/Eraser"),
                        Line: e("./tools/Line"),
                        Rectangle: e("./tools/Rectangle"),
                        Ellipse: e("./tools/Ellipse"),
                        Text: e("./tools/Text"),
                        Polygon: e("./tools/Polygon"),
                        Pan: e("./tools/Pan"),
                        Eyedropper: e("./tools/Eyedropper"),
                        SelectShape: e("./tools/SelectShape"),
                        Tool: r.Tool,
                        ToolWithStroke: r.ToolWithStroke
                    },
                    l = s.tools,
                    s.imageURLPrefix,
                    m = function (e) {
                        return e,
                            s.imageURLPrefix = e
                    }
                    ,
                    c = function (e, t) {
                        var n, i, r, o, a;
                        for (o in null == t && (t = {}),
                            s)
                            o in t || (t[o] = s[o]);
                        for (i = 0,
                            r = (a = e.children).length; i < r; i++)
                            -1 == (n = a[i]).className.indexOf("mask") && e.removeChild(n);
                        return u(e, t)
                    }
                    ,
                    u = function (e, t) {
                        var n, r, o;
                        return o = e.className,
                            -1 === [" ", " "].join(e.className).indexOf(" literally ") && (e.className = e.className + " literally"),
                            -1 == e.className.indexOf("toolbar-hidden") && (e.className = e.className + " toolbar-hidden"),
                            (n = document.createElement("div")).className = "lc-drawing",
                            e.appendChild(n),
                            (r = new i(n, t)).teardown = function () {
                                var t, n, i, a;
                                for (r._teardown(),
                                    n = 0,
                                    i = (a = e.children).length; n < i; n++)
                                    t = a[n],
                                        e.removeChild(t);
                                return e.className = o
                            }
                            ,
                            "onInit" in t && t.onInit(r),
                            r
                    }
                    ,
                    p = function (e) {
                        return e.fn.literallycanvas = function (e) {
                            return null == e && (e = {}),
                                this.each(function (t, n) {
                                    return n.literallycanvas = c(n, e)
                                }),
                                this
                        }
                    }
                    ,
                    "undefined" != typeof window && (window.LC = {
                        init: c
                    },
                        window.$ && p(window.$)),
                    t.exports = {
                        init: c,
                        registerJQueryPlugin: p,
                        util: b,
                        tools: y,
                        setDefaultImageURLPrefix: m,
                        defaultTools: l,
                        defineShape: g.defineShape,
                        createShape: g.createShape,
                        JSONToShape: g.JSONToShape,
                        shapeToJSON: g.shapeToJSON,
                        defineCanvasRenderer: o.defineCanvasRenderer,
                        renderShapeToContext: o.renderShapeToContext,
                        renderShapeToCanvas: o.renderShapeToCanvas,
                        renderShapesToCanvas: b.renderShapes,
                        defineSVGRenderer: v.defineSVGRenderer,
                        renderShapeToSVG: v.renderShapeToSVG,
                        renderShapesToSVG: b.renderShapesToSVG,
                        snapshotToShapes: a.snapshotToShapes,
                        snapshotJSONToShapes: a.snapshotJSONToShapes,
                        renderSnapshotToImage: h,
                        renderSnapshotToSVG: f,
                        localize: d
                    }
            }
                , {
                "./core/LiterallyCanvas": 1,
                "./core/canvasRenderer": 5,
                "./core/defaultOptions": 6,
                "./core/localization": 9,
                "./core/renderSnapshotToImage": 11,
                "./core/renderSnapshotToSVG": 12,
                "./core/shapes": 13,
                "./core/svgRenderer": 14,
                "./core/util": 15,
                "./ie_customevent": 16,
                "./ie_setLineDash": 17,
                "./tools/Ellipse": 19,
                "./tools/Eraser": 20,
                "./tools/Eyedropper": 21,
                "./tools/Line": 22,
                "./tools/Pan": 23,
                "./tools/Pencil": 24,
                "./tools/Polygon": 25,
                "./tools/Rectangle": 26,
                "./tools/SelectShape": 27,
                "./tools/Text": 28,
                "./tools/base": 29
            }],
            19: [function (e, t, n) {
                var i, r, o = {}.hasOwnProperty;
                i = e("./base").ToolWithStroke,
                    r = e("../core/shapes").createShape,
                    t.exports = function (e) {
                        function t() {
                            return t.__super__.constructor.apply(this, arguments)
                        }
                        return function (e, t) {
                            for (var n in t)
                                o.call(t, n) && (e[n] = t[n]);
                            function i() {
                                this.constructor = e
                            }
                            i.prototype = t.prototype,
                                e.prototype = new i,
                                e.__super__ = t.prototype
                        }(t, i),
                            t.prototype.name = "Ellipse",
                            t.prototype.iconName = "ellipse",
                            t.prototype.begin = function (e, t, n) {
                                return this.currentShape = r("Ellipse", {
                                    x: e,
                                    y: t,
                                    strokeWidth: this.strokeWidth,
                                    strokeColor: n.getColor("primary"),
                                    fillColor: n.getColor("secondary")
                                })
                            }
                            ,
                            t.prototype.continue = function (e, t, n) {
                                return this.currentShape.width = e - this.currentShape.x,
                                    this.currentShape.height = t - this.currentShape.y,
                                    n.drawShapeInProgress(this.currentShape)
                            }
                            ,
                            t.prototype.end = function (e, t, n) {
                                return n.saveShape(this.currentShape)
                            }
                            ,
                            t
                    }()
            }
                , {
                "../core/shapes": 13,
                "./base": 29
            }],
            20: [function (e, t, n) {
                var i, r, o = {}.hasOwnProperty;
                i = e("./Pencil"),
                    r = e("../core/shapes").createShape,
                    t.exports = function (e) {
                        function t() {
                            return t.__super__.constructor.apply(this, arguments)
                        }
                        return function (e, t) {
                            for (var n in t)
                                o.call(t, n) && (e[n] = t[n]);
                            function i() {
                                this.constructor = e
                            }
                            i.prototype = t.prototype,
                                e.prototype = new i,
                                e.__super__ = t.prototype
                        }(t, i),
                            t.prototype.name = "Eraser",
                            t.prototype.iconName = "eraser",
                            t.prototype.makePoint = function (e, t, n) {
                                return r("Point", {
                                    x: e,
                                    y: t,
                                    size: this.strokeWidth,
                                    color: "#000"
                                })
                            }
                            ,
                            t.prototype.makeShape = function () {
                                return r("ErasedLinePath")
                            }
                            ,
                            t
                    }()
            }
                , {
                "../core/shapes": 13,
                "./Pencil": 24
            }],
            21: [function (e, t, n) {
                var i, r, o = {}.hasOwnProperty;
                i = e("./base").Tool,
                    r = function (e, t) {
                        var n, i, r;
                        return i = t.x,
                            r = t.y,
                            (n = e.getImageData(i, r, 1, 1).data)[3] ? "rgb(" + n[0] + ", " + n[1] + ", " + n[2] + ")" : null
                    }
                    ,
                    t.exports = function (e) {
                        function t(e) {
                            t.__super__.constructor.call(this, e),
                                this.strokeOrFill = "stroke"
                        }
                        return function (e, t) {
                            for (var n in t)
                                o.call(t, n) && (e[n] = t[n]);
                            function i() {
                                this.constructor = e
                            }
                            i.prototype = t.prototype,
                                e.prototype = new i,
                                e.__super__ = t.prototype
                        }(t, i),
                            t.prototype.name = "Eyedropper",
                            t.prototype.iconName = "eyedropper",
                            t.prototype.optionsStyle = "stroke-or-fill",
                            t.prototype.readColor = function (e, t, n) {
                                var i, o, a;
                                return a = n.getDefaultImageRect(),
                                    i = n.getImage(),
                                    (o = r(i.getContext("2d"), {
                                        x: e - a.x,
                                        y: t - a.y
                                    })) || n.getColor("background"),
                                    "stroke" === this.strokeOrFill ? n.setColor("primary", o) : n.setColor("secondary", o)
                            }
                            ,
                            t.prototype.begin = function (e, t, n) {
                                return this.readColor(e, t, n)
                            }
                            ,
                            t.prototype.continue = function (e, t, n) {
                                return this.readColor(e, t, n)
                            }
                            ,
                            t
                    }()
            }
                , {
                "./base": 29
            }],
            22: [function (e, t, n) {
                var i, r, o = {}.hasOwnProperty;
                i = e("./base").ToolWithStroke,
                    r = e("../core/shapes").createShape,
                    t.exports = function (e) {
                        function t() {
                            return t.__super__.constructor.apply(this, arguments)
                        }
                        return function (e, t) {
                            for (var n in t)
                                o.call(t, n) && (e[n] = t[n]);
                            function i() {
                                this.constructor = e
                            }
                            i.prototype = t.prototype,
                                e.prototype = new i,
                                e.__super__ = t.prototype
                        }(t, i),
                            t.prototype.name = "Line",
                            t.prototype.iconName = "line",
                            t.prototype.optionsStyle = "line-options-and-stroke-width",
                            t.prototype.begin = function (e, t, n) {
                                return this.currentShape = r("Line", {
                                    x1: e,
                                    y1: t,
                                    x2: e,
                                    y2: t,
                                    strokeWidth: this.strokeWidth,
                                    dash: function () {
                                        switch (!1) {
                                            case !this.isDashed:
                                                return [2 * this.strokeWidth, 4 * this.strokeWidth];
                                            default:
                                                return null
                                        }
                                    }
                                        .call(this),
                                    endCapShapes: this.hasEndArrow ? [null, "arrow"] : null,
                                    color: n.getColor("primary")
                                })
                            }
                            ,
                            t.prototype.continue = function (e, t, n) {
                                return this.currentShape.x2 = e,
                                    this.currentShape.y2 = t,
                                    n.drawShapeInProgress(this.currentShape)
                            }
                            ,
                            t.prototype.end = function (e, t, n) {
                                return n.saveShape(this.currentShape)
                            }
                            ,
                            t
                    }()
            }
                , {
                "../core/shapes": 13,
                "./base": 29
            }],
            23: [function (e, t, n) {
                var i, r = {}.hasOwnProperty;
                i = e("./base").Tool,
                    e("../core/shapes").createShape,
                    t.exports = function (e) {
                        function t() {
                            return t.__super__.constructor.apply(this, arguments)
                        }
                        return function (e, t) {
                            for (var n in t)
                                r.call(t, n) && (e[n] = t[n]);
                            function i() {
                                this.constructor = e
                            }
                            i.prototype = t.prototype,
                                e.prototype = new i,
                                e.__super__ = t.prototype
                        }(t, i),
                            t.prototype.name = "Pan",
                            t.prototype.iconName = "pan",
                            t.prototype.usesSimpleAPI = !1,
                            t.prototype.didBecomeActive = function (e) {
                                var t, n;
                                return t = [],
                                    this.unsubscribe = function () {
                                        var e, n, i, r;
                                        for (r = [],
                                            n = 0,
                                            i = t.length; n < i; n++)
                                            e = t[n],
                                                r.push(e());
                                        return r
                                    }
                                    ,
                                    t.push(e.on("lc-pointerdown", (n = this,
                                        function (t) {
                                            var i, r;
                                            return i = t.rawX,
                                                r = t.rawY,
                                                n.oldPosition = e.position,
                                                n.pointerStart = {
                                                    x: i,
                                                    y: r
                                                }
                                        }
                                    ))),
                                    t.push(e.on("lc-pointerdrag", function (t) {
                                        return function (n) {
                                            var i, r, o;
                                            return r = n.rawX,
                                                o = n.rawY,
                                                i = {
                                                    x: (r - t.pointerStart.x) * e.backingScale,
                                                    y: (o - t.pointerStart.y) * e.backingScale
                                                },
                                                e.setPan(t.oldPosition.x + i.x, t.oldPosition.y + i.y)
                                        }
                                    }(this)))
                            }
                            ,
                            t.prototype.willBecomeInactive = function (e) {
                                return this.unsubscribe()
                            }
                            ,
                            t
                    }()
            }
                , {
                "../core/shapes": 13,
                "./base": 29
            }],
            24: [function (e, t, n) {
                var i, r, o = {}.hasOwnProperty;
                i = e("./base").ToolWithStroke,
                    r = e("../core/shapes").createShape,
                    t.exports = function (e) {
                        function t() {
                            return t.__super__.constructor.apply(this, arguments)
                        }
                        return function (e, t) {
                            for (var n in t)
                                o.call(t, n) && (e[n] = t[n]);
                            function i() {
                                this.constructor = e
                            }
                            i.prototype = t.prototype,
                                e.prototype = new i,
                                e.__super__ = t.prototype
                        }(t, i),
                            t.prototype.name = "Pencil",
                            t.prototype.iconName = "pencil",
                            t.prototype.eventTimeThreshold = 10,
                            t.prototype.begin = function (e, t, n) {
                                return this.color = n.getColor("primary"),
                                    this.currentShape = this.makeShape(),
                                    this.currentShape.addPoint(this.makePoint(e, t, n)),
                                    this.lastEventTime = Date.now()
                            }
                            ,
                            t.prototype.continue = function (e, t, n) {
                                var i;
                                if ((i = Date.now() - this.lastEventTime) > this.eventTimeThreshold)
                                    return this.lastEventTime += i,
                                        this.currentShape.addPoint(this.makePoint(e, t, n)),
                                        n.drawShapeInProgress(this.currentShape)
                            }
                            ,
                            t.prototype.end = function (e, t, n) {
                                return n.saveShape(this.currentShape),
                                    this.currentShape = void 0
                            }
                            ,
                            t.prototype.makePoint = function (e, t, n) {
                                return r("Point", {
                                    x: e,
                                    y: t,
                                    size: this.strokeWidth,
                                    color: this.color
                                })
                            }
                            ,
                            t.prototype.makeShape = function () {
                                return r("LinePath")
                            }
                            ,
                            t
                    }()
            }
                , {
                "../core/shapes": 13,
                "./base": 29
            }],
            25: [function (e, t, n) {
                var i, r, o = {}.hasOwnProperty;
                i = e("./base").ToolWithStroke,
                    r = e("../core/shapes").createShape,
                    t.exports = function (e) {
                        function t() {
                            return t.__super__.constructor.apply(this, arguments)
                        }
                        return function (e, t) {
                            for (var n in t)
                                o.call(t, n) && (e[n] = t[n]);
                            function i() {
                                this.constructor = e
                            }
                            i.prototype = t.prototype,
                                e.prototype = new i,
                                e.__super__ = t.prototype
                        }(t, i),
                            t.prototype.name = "Polygon",
                            t.prototype.iconName = "polygon",
                            t.prototype.usesSimpleAPI = !1,
                            t.prototype.didBecomeActive = function (e) {
                                var n, i, r, o, a, s, l, c;
                                return t.__super__.didBecomeActive.call(this, e),
                                    l = [],
                                    this.polygonUnsubscribe = function () {
                                        var e, t, n, i;
                                        for (i = [],
                                            t = 0,
                                            n = l.length; t < n; t++)
                                            e = l[t],
                                                i.push(e());
                                        return i
                                    }
                                    ,
                                    this.points = null,
                                    this.maybePoint = null,
                                    c = this,
                                    r = function () {
                                        return c._getWillFinish() ? c._close(e) : (e.trigger("lc-polygon-started"),
                                            c.points ? c.points.push(c.maybePoint) : c.points = [c.maybePoint],
                                            c.maybePoint = {
                                                x: c.maybePoint.x,
                                                y: c.maybePoint.y
                                            },
                                            e.setShapesInProgress(c._getShapes(e)),
                                            e.repaintLayer("main"))
                                    }
                                    ,
                                    i = function (t) {
                                        return function (n) {
                                            var i, r;
                                            if (i = n.x,
                                                r = n.y,
                                                t.maybePoint)
                                                return t.maybePoint.x = i,
                                                    t.maybePoint.y = r,
                                                    e.setShapesInProgress(t._getShapes(e)),
                                                    e.repaintLayer("main")
                                        }
                                    }(this),
                                    n = function (t) {
                                        return function (n) {
                                            var i, r;
                                            return i = n.x,
                                                r = n.y,
                                                t.maybePoint = {
                                                    x: i,
                                                    y: r
                                                },
                                                e.setShapesInProgress(t._getShapes(e)),
                                                e.repaintLayer("main")
                                        }
                                    }(this),
                                    s = function (t) {
                                        return function () {
                                            return t.maybePoint = {
                                                x: 1 / 0,
                                                y: 1 / 0
                                            },
                                                t._close(e)
                                        }
                                    }(this),
                                    a = function (t) {
                                        return function () {
                                            return t.maybePoint = t.points[0],
                                                t._close(e)
                                        }
                                    }(this),
                                    o = function (t) {
                                        return function () {
                                            return t._cancel(e)
                                        }
                                    }(this),
                                    l.push(e.on("drawingChange", function (t) {
                                        return function () {
                                            return t._cancel(e)
                                        }
                                    }(this))),
                                    l.push(e.on("lc-pointerdown", n)),
                                    l.push(e.on("lc-pointerdrag", i)),
                                    l.push(e.on("lc-pointermove", i)),
                                    l.push(e.on("lc-pointerup", r)),
                                    l.push(e.on("lc-polygon-finishopen", s)),
                                    l.push(e.on("lc-polygon-finishclosed", a)),
                                    l.push(e.on("lc-polygon-cancel", o))
                            }
                            ,
                            t.prototype.willBecomeInactive = function (e) {
                                return t.__super__.willBecomeInactive.call(this, e),
                                    (this.points || this.maybePoint) && this._cancel(e),
                                    this.polygonUnsubscribe()
                            }
                            ,
                            t.prototype._getArePointsClose = function (e, t) {
                                return Math.abs(e.x - t.x) + Math.abs(e.y - t.y) < 10
                            }
                            ,
                            t.prototype._getWillClose = function () {
                                return !!(this.points && this.points.length > 1) && (!!this.maybePoint && this._getArePointsClose(this.points[0], this.maybePoint))
                            }
                            ,
                            t.prototype._getWillFinish = function () {
                                return !!(this.points && this.points.length > 1) && (!!this.maybePoint && (this._getArePointsClose(this.points[0], this.maybePoint) || this._getArePointsClose(this.points[this.points.length - 1], this.maybePoint)))
                            }
                            ,
                            t.prototype._cancel = function (e) {
                                return e.trigger("lc-polygon-stopped"),
                                    this.maybePoint = null,
                                    this.points = null,
                                    e.setShapesInProgress([]),
                                    e.repaintLayer("main")
                            }
                            ,
                            t.prototype._close = function (e) {
                                return e.trigger("lc-polygon-stopped"),
                                    e.setShapesInProgress([]),
                                    this.points.length > 2 && e.saveShape(this._getShape(e, !1)),
                                    this.maybePoint = null,
                                    this.points = null
                            }
                            ,
                            t.prototype._getShapes = function (e, t) {
                                var n;
                                return null == t && (t = !0),
                                    (n = this._getShape(e, t)) ? [n] : []
                            }
                            ,
                            t.prototype._getShape = function (e, t) {
                                var n;
                                return null == t && (t = !0),
                                    n = [],
                                    this.points && (n = n.concat(this.points)),
                                    !t && n.length < 3 ? null : (t && this.maybePoint && n.push(this.maybePoint),
                                        n.length > 1 ? r("Polygon", {
                                            isClosed: this._getWillClose(),
                                            strokeColor: e.getColor("primary"),
                                            fillColor: e.getColor("secondary"),
                                            strokeWidth: this.strokeWidth,
                                            points: n.map(function (e) {
                                                return r("Point", e)
                                            })
                                        }) : null)
                            }
                            ,
                            t.prototype.optionsStyle = "polygon-and-stroke-width",
                            t
                    }()
            }
                , {
                "../core/shapes": 13,
                "./base": 29
            }],
            26: [function (e, t, n) {
                var i, r, o = {}.hasOwnProperty;
                i = e("./base").ToolWithStroke,
                    r = e("../core/shapes").createShape,
                    t.exports = function (e) {
                        function t() {
                            return t.__super__.constructor.apply(this, arguments)
                        }
                        return function (e, t) {
                            for (var n in t)
                                o.call(t, n) && (e[n] = t[n]);
                            function i() {
                                this.constructor = e
                            }
                            i.prototype = t.prototype,
                                e.prototype = new i,
                                e.__super__ = t.prototype
                        }(t, i),
                            t.prototype.name = "Rectangle",
                            t.prototype.iconName = "rectangle",
                            t.prototype.begin = function (e, t, n) {
                                let i = this.strokeWidth;
                                return "transparent" != n.getColor("secondary") && (i = 1),
                                    this.currentShape = r("Rectangle", {
                                        x: e,
                                        y: t,
                                        strokeWidth: i,
                                        strokeColor: n.getColor("primary"),
                                        fillColor: n.getColor("secondary")
                                    })
                            }
                            ,
                            t.prototype.continue = function (e, t, n) {
                                return this.currentShape.width = e - this.currentShape.x,
                                    this.currentShape.height = t - this.currentShape.y,
                                    n.drawShapeInProgress(this.currentShape)
                            }
                            ,
                            t.prototype.end = function (e, t, n) {
                                return n.saveShape(this.currentShape)
                            }
                            ,
                            t
                    }()
            }
                , {
                "../core/shapes": 13,
                "./base": 29
            }],
            27: [function (e, t, n) {
                var i, r, o = {}.hasOwnProperty;
                i = e("./base").Tool,
                    r = e("../core/shapes").createShape,
                    t.exports = function (e) {
                        function t(e) {
                            this.selectCanvas = document.createElement("canvas"),
                                this.selectCanvas.style["background-color"] = "transparent",
                                this.selectCtx = this.selectCanvas.getContext("2d")
                        }
                        return function (e, t) {
                            for (var n in t)
                                o.call(t, n) && (e[n] = t[n]);
                            function i() {
                                this.constructor = e
                            }
                            i.prototype = t.prototype,
                                e.prototype = new i,
                                e.__super__ = t.prototype
                        }(t, i),
                            t.prototype.name = "SelectShape",
                            t.prototype.usesSimpleAPI = !1,
                            t.prototype.didBecomeActive = function (e) {
                                var t, n, i, o, a;
                                return o = [],
                                    this._selectShapeUnsubscribe = function () {
                                        var e, t, n, i;
                                        for (i = [],
                                            t = 0,
                                            n = o.length; t < n; t++)
                                            e = o[t],
                                                i.push(e());
                                        return i
                                    }
                                    ,
                                    a = this,
                                    t = function (t) {
                                        var n, i, o, s;
                                        if (o = t.x,
                                            s = t.y,
                                            a.didDrag = !1,
                                            i = a._getPixel(o, s, e, a.selectCtx),
                                            a.selectedShape = e.shapes[i],
                                            null != a.selectedShape && "ErasedLinePath" == a.selectedShape.toolName && (a.selectedShape = null),
                                            null != a.selectedShape)
                                            return e.trigger("shapeSelected", {
                                                selectedShape: a.selectedShape
                                            }),
                                                e.setShapesInProgress([a.selectedShape, r("SelectionBox", {
                                                    shape: a.selectedShape,
                                                    handleSize: 0
                                                })]),
                                                e.repaintLayer("main"),
                                                n = a.selectedShape.getBoundingRect(),
                                                a.dragOffset = {
                                                    x: o - n.x,
                                                    y: s - n.y
                                                }
                                    }
                                    ,
                                    n = function (t) {
                                        return function (n) {
                                            var i, o;
                                            if (i = n.x,
                                                o = n.y,
                                                null != t.selectedShape)
                                                return t.didDrag = !0,
                                                    t.selectedShape.setUpperLeft({
                                                        x: i - t.dragOffset.x,
                                                        y: o - t.dragOffset.y
                                                    }),
                                                    e.setShapesInProgress([t.selectedShape, r("SelectionBox", {
                                                        shape: t.selectedShape,
                                                        handleSize: 0
                                                    })]),
                                                    e.repaintLayer("main")
                                        }
                                    }(this),
                                    i = function (t) {
                                        return function (n) {
                                            if (n.x,
                                                n.y,
                                                t.didDrag)
                                                return t.didDrag = !1,
                                                    e.trigger("shapeMoved", {
                                                        shape: t.selectedShape
                                                    }),
                                                    e.trigger("drawingChange", {}),
                                                    e.repaintLayer("main"),
                                                    t._drawSelectCanvas(e)
                                        }
                                    }(this),
                                    o.push(e.on("lc-pointerdown", t)),
                                    o.push(e.on("lc-pointerdrag", n)),
                                    o.push(e.on("lc-pointerup", i)),
                                    this._drawSelectCanvas(e)
                            }
                            ,
                            t.prototype.willBecomeInactive = function (e) {
                                return this._selectShapeUnsubscribe(),
                                    e.setShapesInProgress([])
                            }
                            ,
                            t.prototype._drawSelectCanvas = function (e) {
                                var t, n;
                                return this.selectCanvas.width = e.canvas.width,
                                    this.selectCanvas.height = e.canvas.height,
                                    this.selectCtx.clearRect(0, 0, this.selectCanvas.width, this.selectCanvas.height),
                                    t = e.shapes.map((n = this,
                                        function (e, t) {
                                            return r("SelectionBox", {
                                                shape: e,
                                                handleSize: 0,
                                                backgroundColor: "#" + n._intToHex(t)
                                            })
                                        }
                                    )),
                                    e.draw(t, this.selectCtx)
                            }
                            ,
                            t.prototype._intToHex = function (e) {
                                return ("000000" + e.toString(16)).slice(-6)
                            }
                            ,
                            t.prototype._getPixel = function (e, t, n, i) {
                                var r, o;
                                return r = n.drawingCoordsToClientCoords(e, t),
                                    (o = i.getImageData(r.x, r.y, 1, 1).data)[3] ? parseInt(this._rgbToHex(o[0], o[1], o[2]), 16) : null
                            }
                            ,
                            t.prototype._componentToHex = function (e) {
                                return ("0" + e.toString(16)).slice(-2)
                            }
                            ,
                            t.prototype._rgbToHex = function (e, t, n) {
                                return "" + this._componentToHex(e) + this._componentToHex(t) + this._componentToHex(n)
                            }
                            ,
                            t
                    }()
            }
                , {
                "../core/shapes": 13,
                "./base": 29
            }],
            28: [function (e, t, n) {
                var i, r, o, a = {}.hasOwnProperty;
                i = e("./base").Tool,
                    r = e("../core/shapes").createShape,
                    o = function (e, t) {
                        return !(e.x < t.x) && (!(e.y < t.y) && (!(e.x > t.x + t.width) && !(e.y > t.y + t.height)))
                    }
                    ,
                    t.exports = function (e) {
                        function t() {
                            this.text = "",
                                this.font = "bold 24px sans-serif",
                                this.currentShape = null,
                                this.currentShapeState = null,
                                this.initialShapeBoundingRect = null,
                                this.dragAction = null,
                                this.didDrag = !1
                        }
                        return function (e, t) {
                            for (var n in t)
                                a.call(t, n) && (e[n] = t[n]);
                            function i() {
                                this.constructor = e
                            }
                            i.prototype = t.prototype,
                                e.prototype = new i,
                                e.__super__ = t.prototype
                        }(t, i),
                            t.prototype.name = "Text",
                            t.prototype.iconName = "text",
                            t.prototype.didBecomeActive = function (e) {
                                var t, n, i;
                                return t = [],
                                    this.unsubscribe = function () {
                                        var e, n, i, r;
                                        for (r = [],
                                            n = 0,
                                            i = t.length; n < i; n++)
                                            e = t[n],
                                                r.push(e());
                                        return r
                                    }
                                    ,
                                    i = this,
                                    function () {
                                        return i._ensureNotEditing(e),
                                            i._clearCurrentShape(e),
                                            e.repaintLayer("main")
                                    }
                                    ,
                                    n = function (t) {
                                        return function () {
                                            return t._updateInputEl(e)
                                        }
                                    }(this),
                                    t.push(e.on("zoom", n)),
                                    t.push(e.on("imageSizeChange", n)),
                                    t.push(e.on("snapshotLoad", function (t) {
                                        return function () {
                                            return t._clearCurrentShape(e),
                                                e.repaintLayer("main")
                                        }
                                    }(this))),
                                    t.push(e.on("primaryColorChange", function (t) {
                                        return function (n) {
                                            if (t.currentShape)
                                                return t.currentShape.color = n,
                                                    t._updateInputEl(e),
                                                    e.repaintLayer("main")
                                        }
                                    }(this))),
                                    t.push(e.on("setFont", function (t) {
                                        return function (n) {
                                            if (t.font = n,
                                                t.currentShape)
                                                return t.currentShape.setFont(n),
                                                    t._setShapesInProgress(e),
                                                    t._updateInputEl(e),
                                                    e.repaintLayer("main")
                                        }
                                    }(this)))
                            }
                            ,
                            t.prototype.willBecomeInactive = function (e) {
                                return this.currentShape && (this._ensureNotEditing(e),
                                    this.commit(e)),
                                    this.unsubscribe()
                            }
                            ,
                            t.prototype.setText = function (e) {
                                return this.text = e
                            }
                            ,
                            t.prototype._ensureNotEditing = function (e) {
                                if ("editing" === this.currentShapeState)
                                    return this._exitEditingState(e)
                            }
                            ,
                            t.prototype._clearCurrentShape = function (e) {
                                return this.currentShape = null,
                                    this.initialShapeBoundingRect = null,
                                    this.currentShapeState = null,
                                    e.setShapesInProgress([])
                            }
                            ,
                            t.prototype.commit = function (e) {
                                this.currentShape.text && e.saveShape(this.currentShape),
                                    this._clearCurrentShape(e),
                                    e.repaintLayer("main")
                            }
                            ,
                            t.prototype._getSelectionShape = function (e, t) {
                                return null == t && (t = null),
                                    r("SelectionBox", {
                                        shape: this.currentShape,
                                        ctx: e,
                                        backgroundColor: t
                                    })
                            }
                            ,
                            t.prototype._setShapesInProgress = function (e) {
                                switch (this.currentShapeState) {
                                    case "selected":
                                        return e.setShapesInProgress([this._getSelectionShape(e.ctx), this.currentShape]);
                                    case "editing":
                                        return e.setShapesInProgress([this._getSelectionShape(e.ctx, "#fff")]);
                                    default:
                                        return e.setShapesInProgress([this.currentShape])
                                }
                            }
                            ,
                            t.prototype._getPixel = function (e, t, n, i) {
                                var r, o;
                                return r = n.drawingCoordsToClientCoords(e, t),
                                    (o = i.getImageData(r.x, r.y, 1, 1).data)[3] ? parseInt(this._rgbToHex(o[0], o[1], o[2]), 16) : null
                            }
                            ,
                            t.prototype._componentToHex = function (e) {
                                return ("0" + e.toString(16)).slice(-2)
                            }
                            ,
                            t.prototype._rgbToHex = function (e, t, n) {
                                return "" + this._componentToHex(e) + this._componentToHex(t) + this._componentToHex(n)
                            }
                            ,
                            t.prototype.begin = function (e, t, n) {
                                var i, a, s;
                                if (this.dragAction = "none",
                                    this.didDrag = !1,
                                    "selected" === this.currentShapeState || "editing" === this.currentShapeState ? (i = this.currentShape.getBoundingRect(n.ctx),
                                        (s = this._getSelectionShape(n.ctx)).getBoundingRect(),
                                        o(a = {
                                            x: e,
                                            y: t
                                        }, i) && (this.dragAction = "move"),
                                        o(a, s.getBottomRightHandleRect()) && (this.dragAction = "resizeBottomRight"),
                                        o(a, s.getTopLeftHandleRect()) && (this.dragAction = "resizeTopLeft"),
                                        o(a, s.getBottomLeftHandleRect()) && (this.dragAction = "resizeBottomLeft"),
                                        o(a, s.getTopRightHandleRect()) && (this.dragAction = "resizeTopRight"),
                                        "none" === this.dragAction && "editing" === this.currentShapeState && (this.dragAction = "stop-editing",
                                            this._exitEditingState(n))) : (this.color = n.getColor("primary"),
                                                this.currentShape = r("Text", {
                                                    x: e,
                                                    y: t,
                                                    text: this.text,
                                                    color: this.color,
                                                    font: this.font,
                                                    v: 1
                                                }),
                                                this.dragAction = "place",
                                                this.currentShapeState = "selected"),
                                    "none" !== this.dragAction)
                                    return this.initialShapeBoundingRect = this.currentShape.getBoundingRect(n.ctx),
                                        this.dragOffset = {
                                            x: e - this.initialShapeBoundingRect.x,
                                            y: t - this.initialShapeBoundingRect.y
                                        },
                                        this._setShapesInProgress(n),
                                        n.repaintLayer("main");
                                this.commit(n)
                            }
                            ,
                            t.prototype.continue = function (e, t, n) {
                                var i, r, o;
                                if ("none" !== this.dragAction) {
                                    switch (o = (i = this.initialShapeBoundingRect).x + i.width,
                                    r = i.y + i.height,
                                    this.dragAction) {
                                        case "place":
                                            this.currentShape.x = e,
                                                this.currentShape.y = t,
                                                this.didDrag = !0;
                                            break;
                                        case "move":
                                            this.currentShape.x = e - this.dragOffset.x,
                                                this.currentShape.y = t - this.dragOffset.y,
                                                this.didDrag = !0;
                                            break;
                                        case "resizeBottomRight":
                                            this.currentShape.setSize(e - (this.dragOffset.x - this.initialShapeBoundingRect.width) - i.x, t - (this.dragOffset.y - this.initialShapeBoundingRect.height) - i.y);
                                            break;
                                        case "resizeTopLeft":
                                            this.currentShape.setSize(o - e + this.dragOffset.x, r - t + this.dragOffset.y),
                                                this.currentShape.setPosition(e - this.dragOffset.x, t - this.dragOffset.y);
                                            break;
                                        case "resizeBottomLeft":
                                            this.currentShape.setSize(o - e + this.dragOffset.x, t - (this.dragOffset.y - this.initialShapeBoundingRect.height) - i.y),
                                                this.currentShape.setPosition(e - this.dragOffset.x, this.currentShape.y);
                                            break;
                                        case "resizeTopRight":
                                            this.currentShape.setSize(e - (this.dragOffset.x - this.initialShapeBoundingRect.width) - i.x, r - t + this.dragOffset.y),
                                                this.currentShape.setPosition(this.currentShape.x, t - this.dragOffset.y)
                                    }
                                    return this._setShapesInProgress(n),
                                        n.repaintLayer("main"),
                                        this._updateInputEl(n)
                                }
                            }
                            ,
                            t.prototype.end = function (e, t, n) {
                                if (this.currentShape)
                                    return this.currentShape.setSize(this.currentShape.forcedWidth, 0),
                                        "selected" === this.currentShapeState && ("place" === this.dragAction || "move" === this.dragAction && !this.didDrag) && this._enterEditingState(n),
                                        this._setShapesInProgress(n),
                                        n.repaintLayer("main"),
                                        this._updateInputEl(n)
                            }
                            ,
                            t.prototype._enterEditingState = function (e) {
                                var t, n;
                                if (this.currentShapeState = "editing",
                                    this.inputEl)
                                    throw "State error";
                                return this.inputEl = document.createElement("textarea"),
                                    this.inputEl.className = "text-tool-input",
                                    this.inputEl.style.position = "absolute",
                                    this.inputEl.style.transformOrigin = "0px 0px",
                                    this.inputEl.style.backgroundColor = "transparent",
                                    this.inputEl.style.border = "none",
                                    this.inputEl.style.outline = "none",
                                    this.inputEl.style.margin = "0",
                                    this.inputEl.style.padding = "4px",
                                    this.inputEl.style.zIndex = "1000",
                                    this.inputEl.style.overflow = "hidden",
                                    this.inputEl.style.resize = "none",
                                    this.inputEl.value = this.currentShape.text,
                                    this.inputEl.addEventListener("mousedown", function (e) {
                                        return e.stopPropagation()
                                    }),
                                    this.inputEl.addEventListener("touchstart", function (e) {
                                        return e.stopPropagation()
                                    }),
                                    n = this,
                                    t = function (t) {
                                        return n.currentShape.setText(t.target.value),
                                            n.currentShape.enforceMaxBoundingRect(e),
                                            n._setShapesInProgress(e),
                                            e.repaintLayer("main"),
                                            n._updateInputEl(e),
                                            t.stopPropagation()
                                    }
                                    ,
                                    this.inputEl.addEventListener("keydown", function (t) {
                                        return function () {
                                            return t._updateInputEl(e, !0)
                                        }
                                    }(this)),
                                    this.inputEl.addEventListener("keyup", t),
                                    this.inputEl.addEventListener("change", t),
                                    this.inputEl.addEventListener("input", t),
                                    this._updateInputEl(e),
                                    e.containerEl.appendChild(this.inputEl),
                                    this.inputEl.focus(),
                                    this._setShapesInProgress(e)
                            }
                            ,
                            t.prototype._exitEditingState = function (e) {
                                return this.currentShapeState = "selected",
                                    e.containerEl.removeChild(this.inputEl),
                                    this.inputEl = null,
                                    this._setShapesInProgress(e),
                                    e.repaintLayer("main")
                            }
                            ,
                            t.prototype._updateInputEl = function (e, t) {
                                var n, i;
                                if (null == t && (t = !1),
                                    this.inputEl)
                                    return n = this.currentShape.getBoundingRect(e.ctx, !0),
                                        this.inputEl.style.font = this.currentShape.font,
                                        this.inputEl.style.color = this.currentShape.color,
                                        this.inputEl.style.left = e.position.x / e.backingScale + n.x * e.scale - 4 + "px",
                                        this.inputEl.style.top = e.position.y / e.backingScale + n.y * e.scale - 4 + "px",
                                        t && !this.currentShape.forcedWidth ? this.inputEl.style.width = n.width + 10 + this.currentShape.renderer.emDashWidth + "px" : this.inputEl.style.width = n.width + 12 + "px",
                                        this.inputEl.style.height = t ? n.height + 10 + this.currentShape.renderer.metrics.leading + "px" : n.height + 10 + "px",
                                        i = "scale(" + e.scale + ")",
                                        this.inputEl.style.transform = i,
                                        this.inputEl.style.webkitTransform = i,
                                        this.inputEl.style.MozTransform = i,
                                        this.inputEl.style.msTransform = i,
                                        this.inputEl.style.OTransform = i
                            }
                            ,
                            t.prototype.optionsStyle = "font",
                            t
                    }()
            }
                , {
                "../core/shapes": 13,
                "./base": 29
            }],
            29: [function (e, t, n) {
                var i, r, o = {}.hasOwnProperty;
                (r = {}).Tool = i = function () {
                    function e() { }
                    return e.prototype.name = null,
                        e.prototype.iconName = null,
                        e.prototype.usesSimpleAPI = !0,
                        e.prototype.begin = function (e, t, n) { }
                        ,
                        e.prototype.continue = function (e, t, n) { }
                        ,
                        e.prototype.end = function (e, t, n) { }
                        ,
                        e.prototype.optionsStyle = null,
                        e.prototype.didBecomeActive = function (e) { }
                        ,
                        e.prototype.willBecomeInactive = function (e) { }
                        ,
                        e
                }(),
                    r.ToolWithStroke = function (e) {
                        function t(e) {
                            this.strokeWidth = e.opts.defaultStrokeWidth
                        }
                        return function (e, t) {
                            for (var n in t)
                                o.call(t, n) && (e[n] = t[n]);
                            function i() {
                                this.constructor = e
                            }
                            i.prototype = t.prototype,
                                e.prototype = new i,
                                e.__super__ = t.prototype
                        }(t, i),
                            t.prototype.optionsStyle = "stroke-width",
                            t.prototype.didBecomeActive = function (e) {
                                var t, n;
                                return t = [],
                                    this.unsubscribe = function () {
                                        var e, n, i, r;
                                        for (r = [],
                                            n = 0,
                                            i = t.length; n < i; n++)
                                            e = t[n],
                                                r.push(e());
                                        return r
                                    }
                                    ,
                                    t.push(e.on("setStrokeWidth", (n = this,
                                        function (t) {
                                            return n.strokeWidth = t,
                                                e.trigger("toolDidUpdateOptions")
                                        }
                                    )))
                            }
                            ,
                            t.prototype.willBecomeInactive = function (e) {
                                return this.unsubscribe()
                            }
                            ,
                            t
                    }(),
                    t.exports = r
            }
                , {}]
        }, {}, [18])(18)
    }),
    function () {
        var e, t = null;
        function n(n, r, o, a, s) {
            var l = {};
            l.w = $(n).width(),
                l.h = $(n).height();
            var c = 1;
            a && a.msgSize && (c = $(n).width() / a.msgSize.w);
            var u, d = h(r, c);
            function p(e, t) {
                t = t || 1;
                var n = ["x", "y", "x1", "y1", "x2", "y2", "width", "height", "forcedWidth", "forcedHeight"]
                    , i = 0;
                for (var r in e.data)
                    "forcedWidth" == r && (i = e.data[r]),
                        n.indexOf(r) >= 0 && (e.data[r] *= t,
                            "forcedWidth" == r && e.data[r]);
                if (void 0 !== e.data.font) {
                    parseInt(e.data.font.replace(/[^\d]/g, " "));
                    0 != i && (e.scaleText = e.maxLineLenth),
                        e.data.font = "bold " + parseInt(e.data.font.replace(/[^\d]/g, " ")) * t + "px sans-serif"
                }
                function o(e) {
                    if (e)
                        for (var n = 0; n < e.length; n++)
                            e[n][0] *= t,
                                e[n][1] *= t
                }
                return o(e.data.pointCoordinatePairs),
                    o(e.data.smoothedPointCoordinatePairs),
                    e
            }
            function h(e, t) {
                if (e.shapes) {
                    t = t || 1;
                    for (var n = 0; n < e.shapes.length; n++)
                        p(e.shapes[n], t);
                    return e
                }
            }
            if (i.lc)
                return (u = i.lc).id = o,
                    u.setColor("primary", hex2rgba($("#color").val())),
                    u.alpha = "1",
                    u.processingCmd = !0,
                    u.size = l,
                    u.customizeScale = c,
                    u.size = {},
                    u.size.w = $(n).width(),
                    u.size.h = $(n).height(),
                    a && a.msgSize && (u.msgSize = a.msgSize),
                    u.clearAll(),
                    u.loadSnapshot(d),
                    u.respondToSizeChange(),
                    u.processingCmd = !1,
                    u;
            (u = LC.init(n, {
                snapshot: d,
                defaultStrokeWidth: 5,
                strokeWidths: [],
                secondaryColor: "transparent"
            })).id = o,
                u.setColor("primary", hex2rgba($("#color").val())),
                u.alpha = "1",
                u.processingCmd = !1,
                u.size = l,
                u.customizeScale = c,
                u.size = {},
                u.size.w = $(n).width(),
                u.size.h = $(n).height(),
                a && a.msgSize && (u.msgSize = a.msgSize),
                u.changeColor = function () {
                    this.setColor("primary", hex2rgba($("#color").val() + getAlpha())),
                        "transparent" != this.getColor("secondary") && this.setColor("secondary", hex2rgba($("#color").val() + getAlpha()))
                }
                ;
            var f = function () {
                var e = {};
                return e.lcId = u.id,
                    e
            }
                , m = function (e) {
                    if (!u.processingCmd) {
                        var t = f();
                        t.command = "snapshot",
                            void 0 !== u.msgSize ? t.msgSize = u.msgSize : t.msgSize = u.size,
                            t.snapshot = h(u.getSnapshot(), 1 / (u.size.w / t.msgSize.w)),
                            u.setSnapShot(t)
                    }
                };
            return u.scaleShape = p,
                u.scaleSnapshot = h,
                u.on("shapeMoved", function (e) {
                    var t = f();
                    t.command = "shapeMoved",
                        t.id = e.shape.id,
                        t.shape = LC.shapeToJSON(e.shape),
                        t.msgSize = u.size,
                        u.sendMsg(t)
                }),
                u.on("drawStart", function (e) {
                    var t = f();
                    t.command = "drawStart",
                        null != e.tool.currentShape && "Text" != e.tool.currentShape.className && (t.id = e.tool.currentShape.id,
                            t.shape = LC.shapeToJSON(e.tool.currentShape),
                            t.msgSize = u.size,
                            u.sendMsg(t))
                }),
                u.on("drawContinue", function (e) {
                    var t = f();
                    t.command = "drawContinue";
                    var n = e.tool.currentShape;
                    null == n || e.tool instanceof LC.tools.Text || (t.id = n.id,
                        t.shape = LC.shapeToJSON(n),
                        t.msgSize = u.size,
                        u.sendMsg(t))
                }),
                u.on("drawingChange", m),
                u.on("shapeSave", function (e) {
                    var t = f();
                    t.command = "shape",
                        t.previousShapeId = e.previousShapeId,
                        t.shape = LC.shapeToJSON(e.shape),
                        t.msgSize = u.size,
                        u.sendMsg(t)
                }),
                u.on("pan", m),
                u.on("zoom", m),
                u.on("undo", function () {
                    if (!u.processingCmd) {
                        var e = f();
                        e.command = "undo",
                            u.sendMsg(e)
                    }
                }),
                u.on("redo", function () {
                    if (!u.processingCmd) {
                        var e = f();
                        e.command = "redo",
                            u.sendMsg(e)
                    }
                }),
                u.on("clear", function () {
                    if (!u.processingCmd) {
                        var e = f();
                        e.command = "clear",
                            u.sendMsg(e)
                    }
                }),
                u.on("redoStackChange", function (e) {
                    u.redoCallback(e)
                }),
                u.on("undoStackChange", function (e) {
                    u.undoCallback(e)
                }),
                u.setBackground = function (e) {
                    u.containerEl.style.background = "url(" + e + ")"
                }
                ,
                function (n) {
                    $("#clear-lc").click(function () {
                        n.clear(),
                            $(".drop-down-content").removeAttr("style")
                    }),
                        $("#tool-previous").click(function () {
                            n.undo(),
                                $(".drop-down-content").removeAttr("style")
                        }),
                        $("#tool-next").click(function () {
                            n.redo(),
                                $(".drop-down-content").removeAttr("style")
                        }),
                        e = [{
                            name: "pencil",
                            el: document.getElementById("tool-pencil"),
                            tool: new LC.tools.Pencil(n)
                        }, {
                            name: "eraser",
                            el: document.getElementById("tool-eraser"),
                            tool: new LC.tools.Eraser(n)
                        }, {
                            name: "text",
                            el: document.getElementById("tool-text"),
                            tool: new LC.tools.Text(n)
                        }, {
                            name: "line",
                            el: document.getElementById("tool-line"),
                            tool: new LC.tools.Line(n)
                        }, {
                            name: "arrow",
                            el: document.getElementById("tool-arrow"),
                            tool: (arrow = new LC.tools.Line(n),
                                arrow.hasEndArrow = !0,
                                arrow)
                        }, {
                            name: "dashed",
                            el: document.getElementById("tool-dashed"),
                            tool: (dashed = new LC.tools.Line(n),
                                dashed.isDashed = !0,
                                dashed)
                        }, {
                            name: "ellipse",
                            el: document.getElementById("tool-ellipse"),
                            tool: new LC.tools.Ellipse(n)
                        }, {
                            name: "ellipse-fill",
                            el: document.getElementById("tool-ellipse-fill"),
                            tool: new LC.tools.Ellipse(n),
                            fill: !0
                        }, {
                            name: "tool-rectangle",
                            el: document.getElementById("tool-rectangle"),
                            tool: new LC.tools.Rectangle(n)
                        }, {
                            name: "tool-rectangle-fill",
                            el: document.getElementById("tool-rectangle-fill"),
                            tool: new LC.tools.Rectangle(n),
                            fill: !0
                        }, {
                            name: "tool-polygon",
                            el: document.getElementById("tool-polygon"),
                            tool: new LC.tools.Polygon(n)
                        }, {
                            name: "tool-select",
                            el: document.getElementById("tool-select"),
                            tool: new LC.tools.SelectShape(n)
                        }],
                        strokeWidths = [{
                            name: 1,
                            el: document.getElementById("sizeTool-1"),
                            size: 1
                        }, {
                            name: 2,
                            el: document.getElementById("sizeTool-2"),
                            size: 2
                        }, {
                            name: 5,
                            el: document.getElementById("sizeTool-3"),
                            size: 5
                        }, {
                            name: 10,
                            el: document.getElementById("sizeTool-4"),
                            size: 10
                        }, {
                            name: 15,
                            el: document.getElementById("sizeTool-5"),
                            size: 15
                        }, {
                            name: 20,
                            el: document.getElementById("sizeTool-6"),
                            size: 20
                        }],
                        opacity = [{
                            name: 100,
                            el: document.getElementById("opacity-1"),
                            value: 1
                        }, {
                            name: 75,
                            el: document.getElementById("opacity-2"),
                            value: .75
                        }, {
                            name: 50,
                            el: document.getElementById("opacity-3"),
                            value: .5
                        }, {
                            name: 25,
                            el: document.getElementById("opacity-4"),
                            value: .25
                        }],
                        setCurrentByName = function (e, t) {
                            $(".current").removeClass("current"),
                                e.forEach(function (e) {
                                    $(e.el).toggleClass("current", e.name == t),
                                        $(e.el).toggleClass("isFill", e.name == t && ("ellipse-fill" == e.name || "tool-rectangle-fill" == e.name))
                                }),
                                $(".current").parents("li:last").find("a").eq(0).addClass("current")
                        }
                        ,
                        findByName = function (e, t) {
                            var n;
                            return 0 == (n = e.filter(function (e) {
                                return e.name == t
                            })).length ? null : n[0]
                        }
                        ,
                        getAlpha = function () {
                            return Math.round(255 * parseFloat(n.alpha)).toString(16)
                        }
                        ,
                        n.trigger("setStrokeWidth", 1),
                        e.forEach(function (i) {
                            $(i.el).click(function (r) {
                                t = i.tool,
                                    n.setTool(i.tool),
                                    n.setColor("primary", hex2rgba($("#color").val() + getAlpha())),
                                    n.setColor("secondary", hex2rgba($("#color").val() + getAlpha())),
                                    i.fill ? n.setColor("secondary", hex2rgba($("#color").val() + getAlpha())) : n.setColor("secondary", "transparent"),
                                    "Eraser" != t.name ? n.trigger("setStrokeWidth", parseInt($("#lineWidth").val())) : n.trigger("setStrokeWidth", parseInt($("#eraserSize").val()));
                                var o = parseInt($("#fontSize").val());
                                n.trigger("setFont", "bold " + o + "px sans-serif"),
                                    setCurrentByName(e, i.name),
                                    $(this).parents(".drop-down-content").eq(0).removeAttr("style"),
                                    $(this).parents().siblings().children(".drop-down-content").eq(0).removeAttr("style"),
                                    $("#tools-sizes").toggleClass("disabled", "text" == i.name),
                                    r.preventDefault(),
                                    r.stopPropagation()
                            })
                        }),
                        i.isFirst || (setCurrentByName(e, e[0].name),
                            i.isFirst = !0);
                    opacity.forEach(function (e) {
                        e.el && (e.el.value = e.value,
                            $(e.el).click(function () {
                                n.alpha = e.value,
                                    n.changeColor()
                            }))
                    }),
                        $(".drop-down-content a").on("click", function (e) {
                            $(this).parents(".drop-down")
                        })
                }(u),
                u
        }
        var i = {
            initLc: function (e, t, i, r, o) {
                this.lc = n(e, t, i, r)
            },
            setColor: function (e, t) {
                $("#color").val(e),
                    this.lc && (this.lc.setColor("primary", hex2rgba(e + Math.round(255 * parseFloat(this.lc.alpha)).toString(16))),
                        $(".isFill").length > 0 ? this.lc.setColor("secondary", hex2rgba(e + Math.round(255 * parseFloat(this.lc.alpha)).toString(16))) : this.lc.setColor("secondary", "transparent"))
            },
            setSize: function (e) {
                this.lc && (this.lc.trigger("setStrokeWidth", e),
                    $("#lineWidth").val(e))
            },
            setStrokeWidth: function (e, n) {
                this.lc && ("Eraser" == n ? ("Eraser" == t.name && this.lc.trigger("setStrokeWidth", e),
                    $("#eraserSize").val(e)) : (this.lc.trigger("setStrokeWidth", e),
                        $("#lineWidth").val(e)))
            },
            setFontSize: function (e) {
                $("#fontSize").val(e),
                    this.lc.trigger("setFont", "bold " + e + "px sans-serif")
            },
            setOpactity: function (e) {
                $("#opacitySize").val(e),
                    this.lc.alpha = e / 100,
                    this.lc.changeColor()
            },
            clear: function () {
                this.lc && this.lc.clear()
            },
            setTool: function (t) {
                if (!this.lc)
                    return;
                let n;
                0 == t ? n = e[0].tool : 1 == t && (n = e[3].tool),
                    this.lc.setTool(n),
                    this.lc.setColor("primary", hex2rgba($("#color").val() + getAlpha())),
                    this.lc.setColor("secondary", hex2rgba($("#color").val() + getAlpha())),
                    this.lc.trigger("setStrokeWidth", parseInt($("#lineWidth").val()))
            },
            handleMsg: function (e) {
                this.lc.processingCmd = !0;
                var t = e;
                if (t.lcId == this.lc.id) {
                    if ("shape" == t.command) {
                        var n = t.previousShapeId
                            , i = LC.JSONToShape(this.lc.scaleShape(t.shape, this.lc.size.w / e.msgSize.w));
                        void 0 !== this.lc.msgSize && (this.lc.msgSize = e.msgSize),
                            this.lc.saveShape(i, !1, n)
                    } else if ("undo" == t.command)
                        this.lc.setUndoRedo();
                    else if ("redo" == t.command)
                        this.lc.setUndoRedo();
                    else if ("clear" == t.command)
                        this.lc.clear();
                    else if ("shapeMoved" == t.command || "drawStart" == t.command) {
                        n = t.id;
                        var r = !1;
                        i = LC.JSONToShape(this.lc.scaleShape(t.shape, this.lc.size.w / e.msgSize.w));
                        void 0 !== this.lc.msgSize && (this.lc.msgSize = e.msgSize),
                            this.lc.saveShapeBySingal(i, !1, n, r)
                    } else if ("drawContinue" == t.command) {
                        n = t.id,
                            r = !1,
                            i = LC.JSONToShape(this.lc.scaleShape(t.shape, this.lc.size.w / e.msgSize.w));
                        void 0 !== this.lc.msgSize && (this.lc.msgSize = e.msgSize),
                            this.lc.drawShapeInProgress(i)
                    }
                    this.lc.processingCmd = !1
                }
            },
            setSendMsgFunction: function (e) {
                this.lc.sendMsg = e
            },
            setRedoUndoStackChange: function (e, t) {
                this.lc.redoCallback = e,
                    this.lc.undoCallback = t
            },
            setSnapshotFunction: function (e) {
                this.lc.setSnapShot = e
            },
            setUndoRedoFunction: function (e) {
                this.lc.setUndoRedo = e
            },
            undo: function () {
                this.lc.undo()
            },
            redo: function () {
                this.lc.redo()
            },
            getLcStatus: function () {
                if (this.lc) {
                    var e = {};
                    return e.tool = this.lc.tool,
                        e.primaryColor = this.lc.getColor("primary"),
                        e.secondaryColor = this.lc.getColor("secondary"),
                        e.size = $("#lineWidth").val(),
                        e
                }
            },
            setLcStatus: function (e) {
                e && (this.lc.setTool(e.tool),
                    this.lc.setColor("primary", e.primaryColor),
                    this.lc.setColor("secondary", e.secondaryColor),
                    this.lc.trigger("setStrokeWidth", parseInt(e.size)))
            }
        };
        window.api = i
    }(),
    function (e) {
        UIAlert = function (t) {
            this.options = t,
                this.utility = new UIAlertUtility(this),
                this.$body = e("body").eq(0),
                this.$content = e('<div class="uiAlert"></div>'),
                this.$contentwrap = e('<div class="uiAlert-wrap"></div>'),
                this.utility.init(),
                this.utility.trigger("show")
        }
            ,
            UIAlert.DEFAULTS = {
                result: "success",
                textTitle: "提示",
                textContent: "success",
                showButton: !1,
                buttons: [],
                hide: !0,
                handle: function () { }
            },
            UIAlertUtility = function (e) {
                this.e = e
            }
            ,
            UIAlertUtility.prototype.init = function () {
                var t = e('<div class="text"></div>')
                    , n = e('<div class="textContent"></div>');
                switch (n.html(this.e.options.textContent),
                t.append(n),
                this.e.options.result) {
                    case "success":
                        this.e.$content.css("background", "#0AC0F3"),
                            e('<i class="iconfont icon-chenggong"></i>');
                        break;
                    case "fail":
                        this.e.$content.css("background", "#FE2500"),
                            e('<i class="iconfont icon-shibai"></i>');
                        break;
                    case "warning":
                        this.e.$content.css("background", "#FF9A00"),
                            e('<i class="iconfont icon-jinggao"></i>')
                }
                this.e.$content.append(t);
                var i = e('<i class="iconfont icon-guanbi"></i>')
                    , r = this;
                if (i.on("click", function (e) {
                    r.e.$content.remove(),
                        r.e.$contentwrap.remove(),
                        r.e.options.handle(),
                        e.stopPropagation()
                }),
                    this.e.$content.append(i),
                    this.e.options.showButton) {
                    var o = e('<div class="uiAlert-button-area"></div>')
                        , a = e('<div class="button">确定</div>')
                        , s = e('<div class="button">取消</div>');
                    r = this;
                    a.click(function () {
                        r.e.options.buttons[0].handle()
                    }),
                        s.click(function () {
                            i.click()
                        }),
                        o.append(s),
                        o.append(a),
                        this.e.$content.append(o)
                }
                if (this.e.$body.append(this.e.$content),
                    this.e.$body.append(this.e.$contentwrap),
                    this.e.options.hide)
                    var l = setTimeout(function () {
                        r.e.$contentwrap.remove(),
                            r.e.$content.animate({
                                top: "-100px"
                            }, 1e3, "linear", function () {
                                clearTimeout(l),
                                    r.e.$content.remove(),
                                    r.e.options.handle()
                            })
                    }, 2e3)
            }
            ,
            UIAlertUtility.prototype.trigger = function (e) {
                var t = Array.prototype.slice.call(arguments, 1)
                    , n = [e + ".uiAlert"];
                n.push(t),
                    this.e.$content.trigger.apply(this.e.$content, n)
            }
            ,
            Plugin = function (t) {
                var n = e.extend({}, UIAlert.DEFAULTS, t);
                return new UIAlert(n)
            }
            ,
            e.fn.uiAlert = Plugin,
            e.fn.uiAlert.constructor = UIAlert
    }(jQuery),
    function (e, t, n) {
        var r, o = {
            beforeShow: f,
            move: f,
            change: f,
            show: f,
            hide: f,
            color: !1,
            flat: !1,
            showInput: !1,
            allowEmpty: !1,
            showButtons: !0,
            clickoutFiresChange: !1,
            showInitial: !1,
            showPalette: !1,
            showPaletteOnly: !1,
            showSelectionPalette: !0,
            localStorageKey: !1,
            appendTo: "body",
            maxSelectionSize: 7,
            cancelText: "cancel",
            chooseText: "choose",
            clearText: "Clear Color Selection",
            preferredFormat: !1,
            className: "",
            containerClassName: "",
            replacerClassName: "",
            showAlpha: !1,
            theme: "sp-light",
            palette: [["#ffffff", "#000000", "#ff0000", "#ff8000", "#ffff00", "#008000", "#0000ff", "#4b0082", "#9400d3"]],
            selectionPalette: [],
            disabled: !1
        }, a = [], s = !!/msie/i.exec(e.navigator.userAgent), l = function () {
            function e(e, t) {
                return !!~("" + e).indexOf(t)
            }
            var t = document.createElement("div").style;
            return t.cssText = "background-color:rgba(0,0,0,.5)",
                e(t.backgroundColor, "rgba") || e(t.backgroundColor, "hsla")
        }(), c = "color" === (r = t("<input type='color' value='!' />")[0]).type && "!" !== r.value, u = ["<div class='sp-replacer'>", "<img/>", "</div>"].join(""), d = function () {
            var e = "";
            if (s)
                for (var t = 1; t <= 6; t++)
                    e += "<div class='sp-" + t + "'></div>";
            return ["<div class='sp-container sp-hidden'>", "<div class='sp-palette-container'>", "<div class='sp-palette sp-thumb sp-cf'></div>", "</div>", "<div class='sp-picker-container'>", "<div class='sp-top sp-cf'>", "<div class='sp-fill'></div>", "<div class='sp-top-inner'>", "<div class='sp-color'>", "<div class='sp-sat'>", "<div class='sp-val'>", "<div class='sp-dragger'></div>", "</div>", "</div>", "</div>", "<div class='sp-clear sp-clear-display'>", "</div>", "<div class='sp-hue'>", "<div class='sp-slider'></div>", e, "</div>", "</div>", "<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>", "</div>", "<div class='sp-input-container sp-cf'>", "<input class='sp-input' type='text' spellcheck='false'  />", "</div>", "<div class='sp-initial sp-thumb sp-cf'></div>", "<div class='sp-button-container sp-cf'>", "<a class='sp-cancel' href='#'></a>", "<button type='button' class='sp-choose'></button>", "</div>", "</div>", "</div>"].join("")
        }();
        function p(e, t, n, i) {
            for (var r = [], o = 0; o < e.length; o++) {
                var a = e[o];
                if (a) {
                    var s = tinycolor(a)
                        , c = s.toHsl().l < .5 ? "sp-thumb-el sp-thumb-dark" : "sp-thumb-el sp-thumb-light";
                    c += tinycolor.equals(t, a) ? " sp-thumb-active" : "";
                    var u = s.toString(i || "rgb")
                        , d = l ? "background-color:" + s.toRgbString() : "filter:" + s.toFilter();
                    r.push('<span title="' + u + '" data-color="' + s.toRgbString() + '" class="' + c + '"><span class="sp-thumb-inner" style="' + d + ';" /></span>')
                } else {
                    r.push('<span title="No Color Selected" data-color="" style="background-color:transparent;" class="sp-clear-display"></span>')
                }
            }
            return "<div class='sp-cf " + n + "'>" + r.join("") + "</div>"
        }
        function h(r, h) {
            var f, y, b, w, $ = function (e, n) {
                var i = t.extend({}, o, e);
                return i.callbacks = {
                    move: g(i.move, n),
                    change: g(i.change, n),
                    show: g(i.show, n),
                    hide: g(i.hide, n),
                    beforeShow: g(i.beforeShow, n)
                },
                    i
            }(h, r), S = $.flat, C = $.showSelectionPalette, x = $.localStorageKey, T = $.theme, k = $.callbacks, P = (f = Fe,
                y = 10,
                function () {
                    var e = this
                        , t = arguments;
                    b && clearTimeout(w),
                        !b && w || (w = setTimeout(function () {
                            w = null,
                                f.apply(e, t)
                        }, y))
                }
            ), E = !1, I = 0, M = 0, O = 0, D = 0, A = 0, _ = 0, R = 0, L = 0, U = 0, N = 0, j = 1, F = [], B = [], V = {}, z = $.selectionPalette.slice(0), H = $.maxSelectionSize, W = "sp-dragging", q = null, G = r.ownerDocument, Y = (G.body,
                t(r)), X = !1, J = t(d, G).addClass(T), K = J.find(".sp-color"), Q = J.find(".sp-dragger"), Z = J.find(".sp-hue"), ee = J.find(".sp-slider"), te = J.find(".sp-alpha-inner"), ne = J.find(".sp-alpha"), ie = J.find(".sp-alpha-handle"), re = J.find(".sp-input"), oe = J.find(".sp-palette"), ae = J.find(".sp-initial"), se = J.find(".sp-cancel"), le = J.find(".sp-clear"), ce = J.find(".sp-choose"), ue = Y.is("input"), de = ue && c && "color" === Y.attr("type"), pe = ue && !S, he = pe ? t(u).addClass(T).addClass($.className).addClass($.replacerClassName) : t([]), fe = pe ? he : Y, me = he.find(".sp-preview-inner"), ge = $.color || ue && Y.val(), ve = !1, ye = $.preferredFormat, be = ye, we = !$.showButtons || $.clickoutFiresChange, $e = !ge, Se = $.allowEmpty && !de;
            function Ce() {
                if ($.showPaletteOnly && ($.showPalette = !0),
                    $.palette) {
                    F = $.palette.slice(0),
                        B = t.isArray(F[0]) ? F : [F],
                        V = {};
                    for (var e = 0; e < B.length; e++)
                        for (var n = 0; n < B[e].length; n++) {
                            var i = tinycolor(B[e][n]).toRgbString();
                            V[i] = !0
                        }
                }
                J.toggleClass("sp-flat", S),
                    J.toggleClass("sp-input-disabled", !$.showInput),
                    J.toggleClass("sp-alpha-enabled", $.showAlpha),
                    J.toggleClass("sp-clear-enabled", Se),
                    J.toggleClass("sp-buttons-disabled", !$.showButtons),
                    J.toggleClass("sp-palette-disabled", !$.showPalette),
                    J.toggleClass("sp-palette-only", $.showPaletteOnly),
                    J.toggleClass("sp-initial-disabled", !$.showInitial),
                    J.addClass($.className).addClass($.containerClassName),
                    Fe()
            }
            function xe() {
                if (x && e.localStorage) {
                    try {
                        var n = e.localStorage[x].split(",#");
                        n.length > 1 && (delete e.localStorage[x],
                            t.each(n, function (e, t) {
                                Te(t)
                            }))
                    } catch (e) { }
                    try {
                        z = e.localStorage[x].split(";")
                    } catch (e) { }
                }
            }
            function Te(n) {
                if (C) {
                    var i = tinycolor(n).toRgbString();
                    if (!V[i] && -1 === t.inArray(i, z))
                        for (z.push(i); z.length > H;)
                            z.shift();
                    if (x && e.localStorage)
                        try {
                            e.localStorage[x] = z.join(";")
                        } catch (e) { }
                }
            }
            function ke() {
                var e = Re()
                    , n = t.map(B, function (t, n) {
                        return p(t, e, "sp-palette-row sp-palette-row-" + n, $.preferredFormat)
                    });
                xe(),
                    z && n.push(p(function () {
                        var e = [];
                        if ($.showPalette)
                            for (i = 0; i < z.length; i++) {
                                var t = tinycolor(z[i]).toRgbString();
                                V[t] || e.push(z[i])
                            }
                        return e.reverse().slice(0, $.maxSelectionSize)
                    }(), e, "sp-palette-row sp-palette-row-selection", $.preferredFormat)),
                    oe.html(n.join(""))
            }
            function Pe() {
                if ($.showInitial) {
                    var e = ve
                        , t = Re();
                    ae.html(p([e, t], t, "sp-palette-row-initial", $.preferredFormat))
                }
            }
            function Ee() {
                (M <= 0 || I <= 0 || D <= 0) && Fe(),
                    J.addClass(W),
                    q = null,
                    Y.trigger("dragstart.spectrum", [Re()])
            }
            function Ie() {
                J.removeClass(W),
                    Y.trigger("dragstop.spectrum", [Re()])
            }
            function Me() {
                var e = re.val();
                if (null !== e && "" !== e || !Se) {
                    var t = tinycolor(e);
                    t.ok ? (_e(t),
                        je(!0)) : re.addClass("sp-validation-error")
                } else
                    _e(null),
                        je(!0)
            }
            function Oe() {
                E ? Ae() : De()
            }
            function De() {
                var n = t.Event("beforeShow.spectrum");
                E ? Fe() : (Y.trigger(n, [Re()]),
                    !1 === k.beforeShow(Re()) || n.isDefaultPrevented() || (!function () {
                        for (var e = 0; e < a.length; e++)
                            a[e] && a[e].hide()
                    }(),
                        E = !0,
                        t(G).bind("click.spectrum", Ae),
                        t(e).bind("resize.spectrum", P),
                        he.addClass("sp-active"),
                        he.parent().siblings(".drop-down").children(".drop-down-content").removeAttr("style"),
                        J.removeClass("sp-hidden"),
                        Fe(),
                        Ue(),
                        ve = Re(),
                        Pe(),
                        k.show(ve),
                        Y.trigger("show.spectrum", [ve])))
            }
            function Ae(n) {
                n && "click" == n.type && 2 == n.button || E && !S && (E = !1,
                    t(G).unbind("click.spectrum", Ae),
                    t(e).unbind("resize.spectrum", P),
                    he.removeClass("sp-active"),
                    J.addClass("sp-hidden"),
                    !tinycolor.equals(Re(), ve) && (we && "cancel" !== n ? je(!0) : _e(ve, !0)),
                    k.hide(Re()),
                    Y.trigger("hide.spectrum", [Re()]))
            }
            function _e(e, t) {
                var n, i;
                tinycolor.equals(e, Re()) ? Ue() : (!e && Se ? $e = !0 : ($e = !1,
                    i = (n = tinycolor(e)).toHsv(),
                    L = i.h % 360 / 360,
                    U = i.s,
                    N = i.v,
                    j = i.a),
                    Ue(),
                    n && n.ok && !t && (be = ye || n.format))
            }
            function Re(e) {
                return e = e || {},
                    Se && $e ? null : tinycolor.fromRatio({
                        h: L,
                        s: U,
                        v: N,
                        a: Math.round(100 * j) / 100
                    }, {
                        format: e.format || be
                    })
            }
            function Le() {
                Ue(),
                    k.move(Re()),
                    Y.trigger("move.spectrum", [Re()])
            }
            function Ue() {
                re.removeClass("sp-validation-error"),
                    Ne();
                var e = tinycolor.fromRatio({
                    h: L,
                    s: 1,
                    v: 1
                });
                K.css("background-color", e.toHexString());
                var t = be;
                j < 1 && (0 !== j || "name" !== t) && ("hex" !== t && "hex3" !== t && "hex6" !== t && "name" !== t || (t = "rgb"));
                var n = Re({
                    format: t
                })
                    , i = "";
                if (me.removeClass("sp-clear-display"),
                    me.css("background-color", "transparent"),
                    !n && Se)
                    me.addClass("sp-clear-display");
                else {
                    var r = n.toHexString()
                        , o = n.toRgbString();
                    if (l || 1 === n.alpha ? me.css("background-color", o) : (me.css("background-color", "transparent"),
                        me.css("filter", n.toFilter())),
                        $.showAlpha) {
                        var a = n.toRgb();
                        a.a = 0;
                        var c = tinycolor(a).toRgbString()
                            , u = "linear-gradient(left, " + c + ", " + r + ")";
                        s ? te.css("filter", tinycolor(c).toFilter({
                            gradientType: 1
                        }, r)) : (te.css("background", "-webkit-" + u),
                            te.css("background", "-moz-" + u),
                            te.css("background", "-ms-" + u),
                            te.css("background", "linear-gradient(to right, " + c + ", " + r + ")"))
                    }
                    i = n.toString(t)
                }
                $.showInput && re.val(i),
                    $.showPalette && ke(),
                    Pe()
            }
            function Ne() {
                var e = U
                    , t = N;
                if (Se && $e)
                    ie.hide(),
                        ee.hide(),
                        Q.hide();
                else {
                    ie.show(),
                        ee.show(),
                        Q.show();
                    var n = e * I
                        , i = M - t * M;
                    n = Math.max(-O, Math.min(I - O, n - O)),
                        i = Math.max(-O, Math.min(M - O, i - O)),
                        Q.css({
                            top: i + "px",
                            left: n + "px"
                        });
                    var r = j * A;
                    ie.css({
                        left: r - _ / 2 + "px"
                    });
                    var o = L * D;
                    ee.css({
                        top: o - R + "px"
                    })
                }
            }
            function je(e) {
                var t = Re()
                    , n = ""
                    , i = !tinycolor.equals(t, ve);
                t && (n = t.toString(be),
                    Te(t)),
                    ue && Y.val(n),
                    ve = t,
                    e && i && (k.change(t),
                        Y.trigger("change", [t]))
            }
            function Fe() {
                var e, n, i, r, o, a, s, l, c, u;
                I = K.width(),
                    M = K.height(),
                    O = Q.height(),
                    Z.width(),
                    D = Z.height(),
                    R = ee.height(),
                    A = ne.width(),
                    _ = ie.width(),
                    S || (J.css("position", "absolute"),
                        J.offset((n = fe,
                            i = (e = J).outerWidth(),
                            r = e.outerHeight(),
                            o = n.outerHeight(),
                            a = e[0].ownerDocument,
                            s = a.documentElement,
                            l = s.clientWidth + t(a).scrollLeft(),
                            c = s.clientHeight + t(a).scrollTop(),
                            (u = n.offset()).top += o,
                            u.left -= Math.min(u.left, u.left + i > l && l > i ? Math.abs(u.left + i - l) : 0),
                            u.top -= Math.min(u.top, u.top + r > c && c > r ? Math.abs(r + o - 0) : 0),
                            u))),
                    Ne(),
                    $.showPalette && ke(),
                    Y.trigger("reflow.spectrum")
            }
            function Be() {
                Ae(),
                    X = !0,
                    Y.attr("disabled", !0),
                    fe.addClass("sp-disabled")
            }
            !function () {
                if (s && J.find("*:not(input)").attr("unselectable", "on"),
                    Ce(),
                    pe && Y.after(he).hide(),
                    Se || le.hide(),
                    S)
                    Y.after(J).hide();
                else {
                    var e = "parent" === $.appendTo ? Y.parent() : t($.appendTo);
                    1 !== e.length && (e = t("body")),
                        e.append(J)
                }
                function n(e) {
                    return e.data && e.data.ignore ? (_e(t(this).data("color")),
                        Le()) : (_e(t(this).data("color")),
                            Le(),
                            je(!0),
                            Ae()),
                        !1
                }
                xe(),
                    fe.bind("click.spectrum touchstart.spectrum", function (e) {
                        X || Oe(),
                            e.stopPropagation(),
                            t(e.target).is("input") || e.preventDefault()
                    }),
                    (Y.is(":disabled") || !0 === $.disabled) && Be(),
                    J.click(m),
                    re.change(Me),
                    re.bind("paste", function () {
                        setTimeout(Me, 1)
                    }),
                    re.keydown(function (e) {
                        13 == e.keyCode && Me()
                    }),
                    se.text($.cancelText),
                    se.bind("click.spectrum", function (e) {
                        e.stopPropagation(),
                            e.preventDefault(),
                            Ae("cancel")
                    }),
                    le.attr("title", $.clearText),
                    le.bind("click.spectrum", function (e) {
                        e.stopPropagation(),
                            e.preventDefault(),
                            $e = !0,
                            Le(),
                            S && je(!0)
                    }),
                    ce.text($.chooseText),
                    ce.bind("click.spectrum", function (e) {
                        e.stopPropagation(),
                            e.preventDefault(),
                            re.hasClass("sp-validation-error") || (je(!0),
                                Ae())
                    }),
                    v(ne, function (e, t, n) {
                        j = e / A,
                            $e = !1,
                            n.shiftKey && (j = Math.round(10 * j) / 10),
                            Le()
                    }, Ee, Ie),
                    v(Z, function (e, t) {
                        L = parseFloat(t / D),
                            $e = !1,
                            $.showAlpha || (j = 1),
                            Le()
                    }, Ee, Ie),
                    v(K, function (e, t, n) {
                        if (n.shiftKey) {
                            if (!q) {
                                var i = U * I
                                    , r = M - N * M
                                    , o = Math.abs(e - i) > Math.abs(t - r);
                                q = o ? "x" : "y"
                            }
                        } else
                            q = null;
                        var a = !q || "y" === q;
                        (!q || "x" === q) && (U = parseFloat(e / I)),
                            a && (N = parseFloat((M - t) / M)),
                            $e = !1,
                            $.showAlpha || (j = 1),
                            Le()
                    }, Ee, Ie),
                    ge ? (_e(ge),
                        Ue(),
                        be = ye || tinycolor(ge).format,
                        Te(ge)) : Ue(),
                    S && De();
                var i = s ? "mousedown.spectrum" : "click.spectrum touchstart.spectrum";
                oe.delegate(".sp-thumb-el", i, n),
                    ae.delegate(".sp-thumb-el:nth-child(1)", i, {
                        ignore: !0
                    }, n)
            }();
            var Ve = {
                show: De,
                hide: Ae,
                toggle: Oe,
                reflow: Fe,
                option: function (e, i) {
                    return e === n ? t.extend({}, $) : i === n ? $[e] : ($[e] = i,
                        void Ce())
                },
                enable: function () {
                    X = !1,
                        Y.attr("disabled", !1),
                        fe.removeClass("sp-disabled")
                },
                disable: Be,
                set: function (e) {
                    _e(e),
                        je()
                },
                get: Re,
                destroy: function () {
                    Y.show(),
                        fe.unbind("click.spectrum touchstart.spectrum"),
                        J.remove(),
                        he.remove(),
                        a[Ve.id] = null
                },
                container: J
            };
            return Ve.id = a.push(Ve) - 1,
                Ve
        }
        function f() { }
        function m(e) {
            e.stopPropagation()
        }
        function g(e, t) {
            var n = Array.prototype.slice
                , i = n.call(arguments, 2);
            return function () {
                return e.apply(t, i.concat(n.call(arguments)))
            }
        }
        function v(n, i, r, o) {
            i = i || function () { }
                ,
                r = r || function () { }
                ,
                o = o || function () { }
                ;
            var a = n.ownerDocument || document
                , l = !1
                , c = {}
                , u = 0
                , d = 0
                , p = "ontouchstart" in e
                , h = {};
            function f(e) {
                e.stopPropagation && e.stopPropagation(),
                    e.preventDefault && e.preventDefault(),
                    e.returnValue = !1
            }
            function m(e) {
                if (l) {
                    if (s && document.documentMode < 9 && !e.button)
                        return g();
                    var t = e.originalEvent.touches
                        , r = t ? t[0].pageX : e.pageX
                        , o = t ? t[0].pageY : e.pageY
                        , a = Math.max(0, Math.min(r - c.left, d))
                        , h = Math.max(0, Math.min(o - c.top, u));
                    p && f(e),
                        i.apply(n, [a, h, e])
                }
            }
            function g() {
                l && (t(a).unbind(h),
                    t(a.body).removeClass("sp-dragging"),
                    o.apply(n, arguments)),
                    l = !1
            }
            h.selectstart = f,
                h.dragstart = f,
                h["touchmove mousemove"] = m,
                h["touchend mouseup"] = g,
                t(n).bind("touchstart mousedown", function (e) {
                    var i = e.which ? 3 == e.which : 2 == e.button;
                    e.originalEvent.touches,
                        i || l || !1 !== r.apply(n, arguments) && (l = !0,
                            u = t(n).height(),
                            d = t(n).width(),
                            c = t(n).offset(),
                            t(a).bind(h),
                            t(a.body).addClass("sp-dragging"),
                            p || m(e),
                            f(e))
                })
        }
        t.fn.spectrum = function (e, n) {
            if ("string" == typeof e) {
                var i = this
                    , r = Array.prototype.slice.call(arguments, 1);
                return this.each(function () {
                    var n = a[t(this).data("spectrum.id")];
                    if (n) {
                        var o = n[e];
                        if (!o)
                            throw new Error("Spectrum: no such method: '" + e + "'");
                        "get" == e ? i = n.get() : "container" == e ? i = n.container : "option" == e ? i = n.option.apply(n, r) : "destroy" == e ? (n.destroy(),
                            t(this).removeData("spectrum.id")) : o.apply(n, r)
                    }
                }),
                    i
            }
            return this.spectrum("destroy").each(function () {
                var n = h(this, t.extend({}, e, t(this).data()));
                t(this).data("spectrum.id", n.id)
            })
        }
            ,
            t.fn.spectrum.load = !0,
            t.fn.spectrum.loadOpts = {},
            t.fn.spectrum.draggable = v,
            t.fn.spectrum.defaults = o,
            t.spectrum = {},
            t.spectrum.localization = {},
            t.spectrum.palettes = {},
            t.fn.spectrum.processNativeColorInputs = function () {
                c || t("input[type=color]").spectrum({
                    preferredFormat: "hex6"
                })
            }
            ,
            function () {
                var t = /^[\s,#]+/
                    , n = /\s+$/
                    , i = 0
                    , r = Math
                    , o = r.round
                    , a = r.min
                    , s = r.max
                    , l = r.random;
                function c(e, l) {
                    if (e = e || "",
                        l = l || {},
                        "object" == typeof e && e.hasOwnProperty("_tc_id"))
                        return e;
                    var y = function (e) {
                        var i = {
                            r: 0,
                            g: 0,
                            b: 0
                        }
                            , o = 1
                            , l = !1
                            , c = !1;
                        "string" == typeof e && (e = function (e) {
                            e = e.replace(t, "").replace(n, "").toLowerCase();
                            var i, r = !1;
                            if (f[e])
                                e = f[e],
                                    r = !0;
                            else if ("transparent" == e)
                                return {
                                    r: 0,
                                    g: 0,
                                    b: 0,
                                    a: 0,
                                    format: "name"
                                };
                            if (i = T.rgb.exec(e))
                                return {
                                    r: i[1],
                                    g: i[2],
                                    b: i[3]
                                };
                            if (i = T.rgba.exec(e))
                                return {
                                    r: i[1],
                                    g: i[2],
                                    b: i[3],
                                    a: i[4]
                                };
                            if (i = T.hsl.exec(e))
                                return {
                                    h: i[1],
                                    s: i[2],
                                    l: i[3]
                                };
                            if (i = T.hsla.exec(e))
                                return {
                                    h: i[1],
                                    s: i[2],
                                    l: i[3],
                                    a: i[4]
                                };
                            if (i = T.hsv.exec(e))
                                return {
                                    h: i[1],
                                    s: i[2],
                                    v: i[3]
                                };
                            if (i = T.hex8.exec(e))
                                return {
                                    a: (o = i[1],
                                        b(o) / 255),
                                    r: b(i[2]),
                                    g: b(i[3]),
                                    b: b(i[4]),
                                    format: r ? "name" : "hex8"
                                };
                            var o;
                            if (i = T.hex6.exec(e))
                                return {
                                    r: b(i[1]),
                                    g: b(i[2]),
                                    b: b(i[3]),
                                    format: r ? "name" : "hex"
                                };
                            if (i = T.hex3.exec(e))
                                return {
                                    r: b(i[1] + "" + i[1]),
                                    g: b(i[2] + "" + i[2]),
                                    b: b(i[3] + "" + i[3]),
                                    format: r ? "name" : "hex"
                                };
                            return !1
                        }(e));
                        "object" == typeof e && (e.hasOwnProperty("r") && e.hasOwnProperty("g") && e.hasOwnProperty("b") ? (u = e.r,
                            d = e.g,
                            p = e.b,
                            i = {
                                r: 255 * v(u, 255),
                                g: 255 * v(d, 255),
                                b: 255 * v(p, 255)
                            },
                            l = !0,
                            c = "%" === String(e.r).substr(-1) ? "prgb" : "rgb") : e.hasOwnProperty("h") && e.hasOwnProperty("s") && e.hasOwnProperty("v") ? (e.s = $(e.s),
                                e.v = $(e.v),
                                i = function (e, t, n) {
                                    e = 6 * v(e, 360),
                                        t = v(t, 100),
                                        n = v(n, 100);
                                    var i = r.floor(e)
                                        , o = e - i
                                        , a = n * (1 - t)
                                        , s = n * (1 - o * t)
                                        , l = n * (1 - (1 - o) * t)
                                        , c = i % 6;
                                    return {
                                        r: 255 * [n, s, a, a, l, n][c],
                                        g: 255 * [l, n, n, s, a, a][c],
                                        b: 255 * [a, a, l, n, n, s][c]
                                    }
                                }(e.h, e.s, e.v),
                                l = !0,
                                c = "hsv") : e.hasOwnProperty("h") && e.hasOwnProperty("s") && e.hasOwnProperty("l") && (e.s = $(e.s),
                                    e.l = $(e.l),
                                    i = function (e, t, n) {
                                        var i, r, o;
                                        function a(e, t, n) {
                                            return n < 0 && (n += 1),
                                                n > 1 && (n -= 1),
                                                n < 1 / 6 ? e + 6 * (t - e) * n : n < .5 ? t : n < 2 / 3 ? e + (t - e) * (2 / 3 - n) * 6 : e
                                        }
                                        if (e = v(e, 360),
                                            t = v(t, 100),
                                            n = v(n, 100),
                                            0 === t)
                                            i = r = o = n;
                                        else {
                                            var s = n < .5 ? n * (1 + t) : n + t - n * t
                                                , l = 2 * n - s;
                                            i = a(l, s, e + 1 / 3),
                                                r = a(l, s, e),
                                                o = a(l, s, e - 1 / 3)
                                        }
                                        return {
                                            r: 255 * i,
                                            g: 255 * r,
                                            b: 255 * o
                                        }
                                    }(e.h, e.s, e.l),
                                    l = !0,
                                    c = "hsl"),
                            e.hasOwnProperty("a") && (o = e.a));
                        var u, d, p;
                        return o = g(o),
                        {
                            ok: l,
                            format: e.format || c,
                            r: a(255, s(i.r, 0)),
                            g: a(255, s(i.g, 0)),
                            b: a(255, s(i.b, 0)),
                            a: o
                        }
                    }(e)
                        , w = y.r
                        , S = y.g
                        , C = y.b
                        , x = y.a
                        , k = o(100 * x) / 100
                        , P = l.format || y.format;
                    return w < 1 && (w = o(w)),
                        S < 1 && (S = o(S)),
                        C < 1 && (C = o(C)),
                    {
                        ok: y.ok,
                        format: P,
                        _tc_id: i++,
                        alpha: x,
                        getAlpha: function () {
                            return x
                        },
                        setAlpha: function (e) {
                            x = g(e),
                                k = o(100 * x) / 100
                        },
                        toHsv: function () {
                            var e = d(w, S, C);
                            return {
                                h: 360 * e.h,
                                s: e.s,
                                v: e.v,
                                a: x
                            }
                        },
                        toHsvString: function () {
                            var e = d(w, S, C)
                                , t = o(360 * e.h)
                                , n = o(100 * e.s)
                                , i = o(100 * e.v);
                            return 1 == x ? "hsv(" + t + ", " + n + "%, " + i + "%)" : "hsva(" + t + ", " + n + "%, " + i + "%, " + k + ")"
                        },
                        toHsl: function () {
                            var e = u(w, S, C);
                            return {
                                h: 360 * e.h,
                                s: e.s,
                                l: e.l,
                                a: x
                            }
                        },
                        toHslString: function () {
                            var e = u(w, S, C)
                                , t = o(360 * e.h)
                                , n = o(100 * e.s)
                                , i = o(100 * e.l);
                            return 1 == x ? "hsl(" + t + ", " + n + "%, " + i + "%)" : "hsla(" + t + ", " + n + "%, " + i + "%, " + k + ")"
                        },
                        toHex: function (e) {
                            return p(w, S, C, e)
                        },
                        toHexString: function (e) {
                            return "#" + this.toHex(e)
                        },
                        toHex8: function () {
                            return h(w, S, C, x)
                        },
                        toHex8String: function () {
                            return "#" + this.toHex8()
                        },
                        toRgb: function () {
                            return {
                                r: o(w),
                                g: o(S),
                                b: o(C),
                                a: x
                            }
                        },
                        toRgbString: function () {
                            return 1 == x ? "rgb(" + o(w) + ", " + o(S) + ", " + o(C) + ")" : "rgba(" + o(w) + ", " + o(S) + ", " + o(C) + ", " + k + ")"
                        },
                        toPercentageRgb: function () {
                            return {
                                r: o(100 * v(w, 255)) + "%",
                                g: o(100 * v(S, 255)) + "%",
                                b: o(100 * v(C, 255)) + "%",
                                a: x
                            }
                        },
                        toPercentageRgbString: function () {
                            return 1 == x ? "rgb(" + o(100 * v(w, 255)) + "%, " + o(100 * v(S, 255)) + "%, " + o(100 * v(C, 255)) + "%)" : "rgba(" + o(100 * v(w, 255)) + "%, " + o(100 * v(S, 255)) + "%, " + o(100 * v(C, 255)) + "%, " + k + ")"
                        },
                        toName: function () {
                            return 0 === x ? "transparent" : m[p(w, S, C, !0)] || !1
                        },
                        toFilter: function (e) {
                            var t = "#" + h(w, S, C, x)
                                , n = t
                                , i = l && l.gradientType ? "GradientType = 1, " : "";
                            e && (n = c(e).toHex8String());
                            return "progid:DXImageTransform.Microsoft.gradient(" + i + "startColorstr=" + t + ",endColorstr=" + n + ")"
                        },
                        toString: function (e) {
                            var t = !!e;
                            e = e || this.format;
                            var n = !1
                                , i = !t && x < 1 && x > 0 && ("hex" === e || "hex6" === e || "hex3" === e || "name" === e);
                            return "rgb" === e && (n = this.toRgbString()),
                                "prgb" === e && (n = this.toPercentageRgbString()),
                                "hex" !== e && "hex6" !== e || (n = this.toHexString()),
                                "hex3" === e && (n = this.toHexString(!0)),
                                "hex8" === e && (n = this.toHex8String()),
                                "name" === e && (n = this.toName()),
                                "hsl" === e && (n = this.toHslString()),
                                "hsv" === e && (n = this.toHsvString()),
                                i ? this.toRgbString() : n || this.toHexString()
                        }
                    }
                }
                function u(e, t, n) {
                    e = v(e, 255),
                        t = v(t, 255),
                        n = v(n, 255);
                    var i, r, o = s(e, t, n), l = a(e, t, n), c = (o + l) / 2;
                    if (o == l)
                        i = r = 0;
                    else {
                        var u = o - l;
                        switch (r = c > .5 ? u / (2 - o - l) : u / (o + l),
                        o) {
                            case e:
                                i = (t - n) / u + (t < n ? 6 : 0);
                                break;
                            case t:
                                i = (n - e) / u + 2;
                                break;
                            case n:
                                i = (e - t) / u + 4
                        }
                        i /= 6
                    }
                    return {
                        h: i,
                        s: r,
                        l: c
                    }
                }
                function d(e, t, n) {
                    e = v(e, 255),
                        t = v(t, 255),
                        n = v(n, 255);
                    var i, r, o = s(e, t, n), l = a(e, t, n), c = o, u = o - l;
                    if (r = 0 === o ? 0 : u / o,
                        o == l)
                        i = 0;
                    else {
                        switch (o) {
                            case e:
                                i = (t - n) / u + (t < n ? 6 : 0);
                                break;
                            case t:
                                i = (n - e) / u + 2;
                                break;
                            case n:
                                i = (e - t) / u + 4
                        }
                        i /= 6
                    }
                    return {
                        h: i,
                        s: r,
                        v: c
                    }
                }
                function p(e, t, n, i) {
                    var r = [w(o(e).toString(16)), w(o(t).toString(16)), w(o(n).toString(16))];
                    return i && r[0].charAt(0) == r[0].charAt(1) && r[1].charAt(0) == r[1].charAt(1) && r[2].charAt(0) == r[2].charAt(1) ? r[0].charAt(0) + r[1].charAt(0) + r[2].charAt(0) : r.join("")
                }
                function h(e, t, n, i) {
                    var r;
                    return [w((r = i,
                        Math.round(255 * parseFloat(r)).toString(16))), w(o(e).toString(16)), w(o(t).toString(16)), w(o(n).toString(16))].join("")
                }
                c.fromRatio = function (e, t) {
                    if ("object" == typeof e) {
                        var n = {};
                        for (var i in e)
                            e.hasOwnProperty(i) && (n[i] = "a" === i ? e[i] : $(e[i]));
                        e = n
                    }
                    return c(e, t)
                }
                    ,
                    c.equals = function (e, t) {
                        return !(!e || !t) && c(e).toRgbString() == c(t).toRgbString()
                    }
                    ,
                    c.random = function () {
                        return c.fromRatio({
                            r: l(),
                            g: l(),
                            b: l()
                        })
                    }
                    ,
                    c.desaturate = function (e, t) {
                        t = 0 === t ? 0 : t || 10;
                        var n = c(e).toHsl();
                        return n.s -= t / 100,
                            n.s = y(n.s),
                            c(n)
                    }
                    ,
                    c.saturate = function (e, t) {
                        t = 0 === t ? 0 : t || 10;
                        var n = c(e).toHsl();
                        return n.s += t / 100,
                            n.s = y(n.s),
                            c(n)
                    }
                    ,
                    c.greyscale = function (e) {
                        return c.desaturate(e, 100)
                    }
                    ,
                    c.lighten = function (e, t) {
                        t = 0 === t ? 0 : t || 10;
                        var n = c(e).toHsl();
                        return n.l += t / 100,
                            n.l = y(n.l),
                            c(n)
                    }
                    ,
                    c.darken = function (e, t) {
                        t = 0 === t ? 0 : t || 10;
                        var n = c(e).toHsl();
                        return n.l -= t / 100,
                            n.l = y(n.l),
                            c(n)
                    }
                    ,
                    c.complement = function (e) {
                        var t = c(e).toHsl();
                        return t.h = (t.h + 180) % 360,
                            c(t)
                    }
                    ,
                    c.triad = function (e) {
                        var t = c(e).toHsl()
                            , n = t.h;
                        return [c(e), c({
                            h: (n + 120) % 360,
                            s: t.s,
                            l: t.l
                        }), c({
                            h: (n + 240) % 360,
                            s: t.s,
                            l: t.l
                        })]
                    }
                    ,
                    c.tetrad = function (e) {
                        var t = c(e).toHsl()
                            , n = t.h;
                        return [c(e), c({
                            h: (n + 90) % 360,
                            s: t.s,
                            l: t.l
                        }), c({
                            h: (n + 180) % 360,
                            s: t.s,
                            l: t.l
                        }), c({
                            h: (n + 270) % 360,
                            s: t.s,
                            l: t.l
                        })]
                    }
                    ,
                    c.splitcomplement = function (e) {
                        var t = c(e).toHsl()
                            , n = t.h;
                        return [c(e), c({
                            h: (n + 72) % 360,
                            s: t.s,
                            l: t.l
                        }), c({
                            h: (n + 216) % 360,
                            s: t.s,
                            l: t.l
                        })]
                    }
                    ,
                    c.analogous = function (e, t, n) {
                        t = t || 6,
                            n = n || 30;
                        var i = c(e).toHsl()
                            , r = 360 / n
                            , o = [c(e)];
                        for (i.h = (i.h - (r * t >> 1) + 720) % 360; --t;)
                            i.h = (i.h + r) % 360,
                                o.push(c(i));
                        return o
                    }
                    ,
                    c.monochromatic = function (e, t) {
                        t = t || 6;
                        for (var n = c(e).toHsv(), i = n.h, r = n.s, o = n.v, a = [], s = 1 / t; t--;)
                            a.push(c({
                                h: i,
                                s: r,
                                v: o
                            })),
                                o = (o + s) % 1;
                        return a
                    }
                    ,
                    c.readability = function (e, t) {
                        var n = c(e).toRgb()
                            , i = c(t).toRgb()
                            , r = (299 * n.r + 587 * n.g + 114 * n.b) / 1e3
                            , o = (299 * i.r + 587 * i.g + 114 * i.b) / 1e3
                            , a = Math.max(n.r, i.r) - Math.min(n.r, i.r) + Math.max(n.g, i.g) - Math.min(n.g, i.g) + Math.max(n.b, i.b) - Math.min(n.b, i.b);
                        return {
                            brightness: Math.abs(r - o),
                            color: a
                        }
                    }
                    ,
                    c.readable = function (e, t) {
                        var n = c.readability(e, t);
                        return n.brightness > 125 && n.color > 500
                    }
                    ,
                    c.mostReadable = function (e, t) {
                        for (var n = null, i = 0, r = !1, o = 0; o < t.length; o++) {
                            var a = c.readability(e, t[o])
                                , s = a.brightness > 125 && a.color > 500
                                , l = a.brightness / 125 * 3 + a.color / 500;
                            (s && !r || s && r && l > i || !s && !r && l > i) && (r = s,
                                i = l,
                                n = c(t[o]))
                        }
                        return n
                    }
                    ;
                var f = c.names = {
                    aliceblue: "f0f8ff",
                    antiquewhite: "faebd7",
                    aqua: "0ff",
                    aquamarine: "7fffd4",
                    azure: "f0ffff",
                    beige: "f5f5dc",
                    bisque: "ffe4c4",
                    black: "000",
                    blanchedalmond: "ffebcd",
                    blue: "00f",
                    blueviolet: "8a2be2",
                    brown: "a52a2a",
                    burlywood: "deb887",
                    burntsienna: "ea7e5d",
                    cadetblue: "5f9ea0",
                    chartreuse: "7fff00",
                    chocolate: "d2691e",
                    coral: "ff7f50",
                    cornflowerblue: "6495ed",
                    cornsilk: "fff8dc",
                    crimson: "dc143c",
                    cyan: "0ff",
                    darkblue: "00008b",
                    darkcyan: "008b8b",
                    darkgoldenrod: "b8860b",
                    darkgray: "a9a9a9",
                    darkgreen: "006400",
                    darkgrey: "a9a9a9",
                    darkkhaki: "bdb76b",
                    darkmagenta: "8b008b",
                    darkolivegreen: "556b2f",
                    darkorange: "ff8c00",
                    darkorchid: "9932cc",
                    darkred: "8b0000",
                    darksalmon: "e9967a",
                    darkseagreen: "8fbc8f",
                    darkslateblue: "483d8b",
                    darkslategray: "2f4f4f",
                    darkslategrey: "2f4f4f",
                    darkturquoise: "00ced1",
                    darkviolet: "9400d3",
                    deeppink: "ff1493",
                    deepskyblue: "00bfff",
                    dimgray: "696969",
                    dimgrey: "696969",
                    dodgerblue: "1e90ff",
                    firebrick: "b22222",
                    floralwhite: "fffaf0",
                    forestgreen: "228b22",
                    fuchsia: "f0f",
                    gainsboro: "dcdcdc",
                    ghostwhite: "f8f8ff",
                    gold: "ffd700",
                    goldenrod: "daa520",
                    gray: "808080",
                    green: "008000",
                    greenyellow: "adff2f",
                    grey: "808080",
                    honeydew: "f0fff0",
                    hotpink: "ff69b4",
                    indianred: "cd5c5c",
                    indigo: "4b0082",
                    ivory: "fffff0",
                    khaki: "f0e68c",
                    lavender: "e6e6fa",
                    lavenderblush: "fff0f5",
                    lawngreen: "7cfc00",
                    lemonchiffon: "fffacd",
                    lightblue: "add8e6",
                    lightcoral: "f08080",
                    lightcyan: "e0ffff",
                    lightgoldenrodyellow: "fafad2",
                    lightgray: "d3d3d3",
                    lightgreen: "90ee90",
                    lightgrey: "d3d3d3",
                    lightpink: "ffb6c1",
                    lightsalmon: "ffa07a",
                    lightseagreen: "20b2aa",
                    lightskyblue: "87cefa",
                    lightslategray: "789",
                    lightslategrey: "789",
                    lightsteelblue: "b0c4de",
                    lightyellow: "ffffe0",
                    lime: "0f0",
                    limegreen: "32cd32",
                    linen: "faf0e6",
                    magenta: "f0f",
                    maroon: "800000",
                    mediumaquamarine: "66cdaa",
                    mediumblue: "0000cd",
                    mediumorchid: "ba55d3",
                    mediumpurple: "9370db",
                    mediumseagreen: "3cb371",
                    mediumslateblue: "7b68ee",
                    mediumspringgreen: "00fa9a",
                    mediumturquoise: "48d1cc",
                    mediumvioletred: "c71585",
                    midnightblue: "191970",
                    mintcream: "f5fffa",
                    mistyrose: "ffe4e1",
                    moccasin: "ffe4b5",
                    navajowhite: "ffdead",
                    navy: "000080",
                    oldlace: "fdf5e6",
                    olive: "808000",
                    olivedrab: "6b8e23",
                    orange: "ffa500",
                    orangered: "ff4500",
                    orchid: "da70d6",
                    palegoldenrod: "eee8aa",
                    palegreen: "98fb98",
                    paleturquoise: "afeeee",
                    palevioletred: "db7093",
                    papayawhip: "ffefd5",
                    peachpuff: "ffdab9",
                    peru: "cd853f",
                    pink: "ffc0cb",
                    plum: "dda0dd",
                    powderblue: "b0e0e6",
                    purple: "800080",
                    red: "f00",
                    rosybrown: "bc8f8f",
                    royalblue: "4169e1",
                    saddlebrown: "8b4513",
                    salmon: "fa8072",
                    sandybrown: "f4a460",
                    seagreen: "2e8b57",
                    seashell: "fff5ee",
                    sienna: "a0522d",
                    silver: "c0c0c0",
                    skyblue: "87ceeb",
                    slateblue: "6a5acd",
                    slategray: "708090",
                    slategrey: "708090",
                    snow: "fffafa",
                    springgreen: "00ff7f",
                    steelblue: "4682b4",
                    tan: "d2b48c",
                    teal: "008080",
                    thistle: "d8bfd8",
                    tomato: "ff6347",
                    turquoise: "40e0d0",
                    violet: "ee82ee",
                    wheat: "f5deb3",
                    white: "fff",
                    whitesmoke: "f5f5f5",
                    yellow: "ff0",
                    yellowgreen: "9acd32"
                }
                    , m = c.hexNames = function (e) {
                        var t = {};
                        for (var n in e)
                            e.hasOwnProperty(n) && (t[e[n]] = n);
                        return t
                    }(f);
                function g(e) {
                    return e = parseFloat(e),
                        (isNaN(e) || e < 0 || e > 1) && (e = 1),
                        e
                }
                function v(e, t) {
                    (function (e) {
                        return "string" == typeof e && -1 != e.indexOf(".") && 1 === parseFloat(e)
                    }
                    )(e) && (e = "100%");
                    var n = function (e) {
                        return "string" == typeof e && -1 != e.indexOf("%")
                    }(e);
                    return e = a(t, s(0, parseFloat(e))),
                        n && (e = parseInt(e * t, 10) / 100),
                        r.abs(e - t) < 1e-6 ? 1 : e % t / parseFloat(t)
                }
                function y(e) {
                    return a(1, s(0, e))
                }
                function b(e) {
                    return parseInt(e, 16)
                }
                function w(e) {
                    return 1 == e.length ? "0" + e : "" + e
                }
                function $(e) {
                    return e <= 1 && (e = 100 * e + "%"),
                        e
                }
                var S, C, x, T = (C = "[\\s|\\(]+(" + (S = "(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)") + ")[,|\\s]+(" + S + ")[,|\\s]+(" + S + ")\\s*\\)?",
                    x = "[\\s|\\(]+(" + S + ")[,|\\s]+(" + S + ")[,|\\s]+(" + S + ")[,|\\s]+(" + S + ")\\s*\\)?",
                {
                    rgb: new RegExp("rgb" + C),
                    rgba: new RegExp("rgba" + x),
                    hsl: new RegExp("hsl" + C),
                    hsla: new RegExp("hsla" + x),
                    hsv: new RegExp("hsv" + C),
                    hex3: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
                    hex6: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
                    hex8: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/
                });
                e.tinycolor = c
            }(),
            t(function () {
                t.fn.spectrum.load && t.fn.spectrum.processNativeColorInputs()
            })
    }(window, jQuery),
    function (e) {
        EditableSelect = function (t, n) {
            this.options = n,
                this.$select = e(t),
                this.$input = e('<input type="text" autocomplete="off" readonly>'),
                this.$list = e('<ul class="es-list">'),
                this.utility = new EditableSelectUtility(this),
                ["focus", "manual"].indexOf(this.options.trigger) < 0 && (this.options.trigger = "focus"),
                ["default", "fade", "slide"].indexOf(this.options.effects) < 0 && (this.options.effects = "default"),
                isNaN(this.options.duration) && ["fast", "slow"].indexOf(this.options.duration) < 0 && (this.options.duration = "fast"),
                this.$select.replaceWith(this.$input),
                this.$list.appendTo(this.options.appendTo || this.$input.parent()),
                this.utility.initialize(),
                this.utility.initializeList(),
                this.utility.initializeInput(),
                this.utility.trigger("created")
        }
            ,
            EditableSelect.DEFAULTS = {
                filter: !0,
                effects: "default",
                duration: "fast",
                trigger: "focus"
            },
            EditableSelect.prototype.filter = function () {
                var t = 0
                    , n = this.$input.val().toLowerCase().trim();
                this.$list.find("li").addClass("es-visible").show(),
                    this.options.filter && (t = this.$list.find("li").filter(function (t, i) {
                        return e(i).text().toLowerCase().indexOf(n) < 0
                    }).hide().removeClass("es-visible").length,
                        this.$list.find("li").length == t && this.hide())
            }
            ,
            EditableSelect.prototype.show = function () {
                if (this.$list.css({
                    top: this.$input.position().top + this.$input.outerHeight() - 1,
                    left: this.$input.position().left,
                    width: this.$input.outerWidth()
                }),
                    !this.$list.is(":visible") && this.$list.find("li.es-visible").length > 0) {
                    var t = {
                        default: "show",
                        fade: "fadeIn",
                        slide: "slideDown"
                    }[this.options.effects];
                    this.utility.trigger("show"),
                        this.$input.addClass("open"),
                        this.$list[t](this.options.duration, e.proxy(this.utility.trigger, this.utility, "shown"))
                }
            }
            ,
            EditableSelect.prototype.showOrHide = function () {
                if (this.$list.is(":visible"))
                    this.hide();
                else {
                    let e = this.$input.attr("data-value");
                    this.$list.find("li").removeClass("selected"),
                        this.$list.find(`li[data-value=${e}]`).addClass("selected"),
                        this.show()
                }
            }
            ,
            EditableSelect.prototype.hide = function () {
                var t = {
                    default: "hide",
                    fade: "fadeOut",
                    slide: "slideUp"
                }[this.options.effects];
                this.utility.trigger("hide"),
                    this.$input.removeClass("open"),
                    this.$list.is(":visible") && !this.$input.prop("readonly") && this.$input.focus(),
                    this.$list[t](this.options.duration, e.proxy(this.utility.trigger, this.utility, "hidden"))
            }
            ,
            EditableSelect.prototype.select = function (e) {
                if (this.$list.has(e) && e.is("li.es-visible:not([disabled])")) {
                    if ("custom" == e.attr("value"))
                        return this.$input.val(""),
                            this.$input.removeProp("readonly"),
                            void this.$input.focus();
                    this.$input.prop("readonly", "readonly"),
                        this.$input.attr("data-value", e.attr("data-value")),
                        this.$input.val(e.text()),
                        this.options.filter && this.hide(),
                        this.filter(),
                        this.$input.blur()
                }
            }
            ,
            EditableSelect.prototype.add = function (t, n, i, r) {
                var o = e("<li>").html(t)
                    , a = e("<option>").text(t)
                    , s = this.$list.find("li").length;
                0 == (n = isNaN(n) ? s : Math.min(Math.max(0, n), s)) ? (this.$list.prepend(o),
                    this.$select.prepend(a)) : (this.$list.find("li").eq(n - 1).after(o),
                        this.$select.find("option").eq(n - 1).after(a)),
                    this.utility.setAttributes(o, i, r),
                    this.utility.setAttributes(a, i, r),
                    this.filter()
            }
            ,
            EditableSelect.prototype.remove = function (e) {
                var t = this.$list.find("li").length;
                e = isNaN(e) ? t : Math.min(Math.max(0, e), t - 1),
                    this.$list.find("li").eq(e).remove(),
                    this.$select.find("option").eq(e).remove(),
                    this.filter()
            }
            ,
            EditableSelect.prototype.clear = function () {
                this.$list.find("li").remove(),
                    this.$select.find("option").remove(),
                    this.filter()
            }
            ,
            EditableSelect.prototype.destroy = function () {
                this.$list.off("mousemove mousedown mouseup"),
                    this.$input.off("focus blur input keydown"),
                    this.$input.replaceWith(this.$select),
                    this.$list.remove(),
                    this.$select.removeData("editable-select")
            }
            ,
            EditableSelectUtility = function (e) {
                this.es = e
            }
            ,
            EditableSelectUtility.prototype.initialize = function () {
                var t = this;
                t.setAttributes(t.es.$input, t.es.$select[0].attributes, t.es.$select.data()),
                    t.es.$input.addClass("es-input").data("editable-select", t.es),
                    t.es.$select.find("option").each(function (n, i) {
                        var r = e(i).remove();
                        t.es.add(r.text(), n, i.attributes, r.data()),
                            r.attr("selected") && (t.es.$input.val(r.text()),
                                t.es.$input.attr("data-value", r.attr("data-value")))
                    }),
                    t.es.filter()
            }
            ,
            EditableSelectUtility.prototype.initializeList = function () {
                var t = this;
                t.es.$list.on("mousemove", "li:not([disabled])", function () {
                    t.es.$list.find(".selected").removeClass("selected"),
                        e(this).addClass("selected")
                }).on("mousedown", "li", function (n) {
                    e(this).is("[disabled]") ? n.preventDefault() : (t.es.$list.find('[selected="selected"]').removeAttr("selected"),
                        e(this).addClass("selected").siblings().removeClass("selected"),
                        t.es.select(e(this)))
                })
            }
            ,
            EditableSelectUtility.prototype.initializeInput = function () {
                var t = this;
                switch (this.es.options.trigger) {
                    default:
                    case "focus":
                        t.es.$input.on("blur", e.proxy(t.es.hide, t.es)).on("click", e.proxy(t.es.showOrHide, t.es));
                        break;
                    case "manual":
                }
                t.es.$input.on("input keydown", function (e) {
                    switch (e.keyCode) {
                        case 38:
                            var n = (i = t.es.$list.find("li.es-visible:not([disabled])")).index(i.filter("li.selected"));
                            t.highlight(n - 1),
                                e.preventDefault();
                            break;
                        case 40:
                            var i;
                            n = (i = t.es.$list.find("li.es-visible:not([disabled])")).index(i.filter("li.selected"));
                            t.highlight(n + 1),
                                e.preventDefault();
                            break;
                        case 13:
                            t.es.$list.is(":visible") && (t.es.select(t.es.$list.find("li.selected")),
                                e.preventDefault());
                            break;
                        case 9:
                        case 27:
                            t.es.hide()
                    }
                })
            }
            ,
            EditableSelectUtility.prototype.highlight = function (e) {
                var t = this;
                t.es.show(),
                    setTimeout(function () {
                        var n = t.es.$list.find("li.es-visible")
                            , i = t.es.$list.find("li.selected").removeClass("selected")
                            , r = n.index(i);
                        if (n.length > 0) {
                            var o = (n.length + e) % n.length
                                , a = n.eq(o)
                                , s = a.position().top;
                            a.addClass("selected"),
                                o < r && s < 0 && t.es.$list.scrollTop(t.es.$list.scrollTop() + s),
                                o > r && s + a.outerHeight() > t.es.$list.outerHeight() && t.es.$list.scrollTop(t.es.$list.scrollTop() + a.outerHeight() + 2 * (s - t.es.$list.outerHeight()))
                        }
                    })
            }
            ,
            EditableSelectUtility.prototype.setAttributes = function (t, n, i) {
                e.each(n || {}, function (e, n) {
                    t.attr(n.name, n.value)
                }),
                    t.data(i)
            }
            ,
            EditableSelectUtility.prototype.trigger = function (e) {
                var t = Array.prototype.slice.call(arguments, 1)
                    , n = [e + ".editable-select"];
                n.push(t),
                    this.es.$select.trigger.apply(this.es.$select, n),
                    this.es.$input.trigger.apply(this.es.$input, n)
            }
            ,
            Plugin = function (t) {
                var n = Array.prototype.slice.call(arguments, 1);
                return this.each(function () {
                    var i = e(this)
                        , r = i.data("editable-select")
                        , o = e.extend({}, EditableSelect.DEFAULTS, i.data(), "object" == typeof t && t);
                    r || (r = new EditableSelect(this, o)),
                        "string" == typeof t && r[t].apply(r, n)
                })
            }
            ,
            e.fn.editableSelect = Plugin,
            e.fn.editableSelect.Constructor = EditableSelect
    }(jQuery),
    function (e, t) {
        "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : (e = e || self).Swiper = t()
    }(this, function () {
        "use strict";
        var e = "undefined" == typeof document ? {
            body: {},
            addEventListener: function () { },
            removeEventListener: function () { },
            activeElement: {
                blur: function () { },
                nodeName: ""
            },
            querySelector: function () {
                return null
            },
            querySelectorAll: function () {
                return []
            },
            getElementById: function () {
                return null
            },
            createEvent: function () {
                return {
                    initEvent: function () { }
                }
            },
            createElement: function () {
                return {
                    children: [],
                    childNodes: [],
                    style: {},
                    setAttribute: function () { },
                    getElementsByTagName: function () {
                        return []
                    }
                }
            },
            location: {
                hash: ""
            }
        } : document
            , t = "undefined" == typeof window ? {
                document: e,
                navigator: {
                    userAgent: ""
                },
                location: {},
                history: {},
                CustomEvent: function () {
                    return this
                },
                addEventListener: function () { },
                removeEventListener: function () { },
                getComputedStyle: function () {
                    return {
                        getPropertyValue: function () {
                            return ""
                        }
                    }
                },
                Image: function () { },
                Date: function () { },
                screen: {},
                setTimeout: function () { },
                clearTimeout: function () { }
            } : window
            , n = function (e) {
                for (var t = 0; t < e.length; t += 1)
                    this[t] = e[t];
                return this.length = e.length,
                    this
            };
        function i(i, r) {
            var o = []
                , a = 0;
            if (i && !r && i instanceof n)
                return i;
            if (i)
                if ("string" == typeof i) {
                    var s, l, c = i.trim();
                    if (c.indexOf("<") >= 0 && c.indexOf(">") >= 0) {
                        var u = "div";
                        for (0 === c.indexOf("<li") && (u = "ul"),
                            0 === c.indexOf("<tr") && (u = "tbody"),
                            0 !== c.indexOf("<td") && 0 !== c.indexOf("<th") || (u = "tr"),
                            0 === c.indexOf("<tbody") && (u = "table"),
                            0 === c.indexOf("<option") && (u = "select"),
                            (l = e.createElement(u)).innerHTML = c,
                            a = 0; a < l.childNodes.length; a += 1)
                            o.push(l.childNodes[a])
                    } else
                        for (s = r || "#" !== i[0] || i.match(/[ .<>:~]/) ? (r || e).querySelectorAll(i.trim()) : [e.getElementById(i.trim().split("#")[1])],
                            a = 0; a < s.length; a += 1)
                            s[a] && o.push(s[a])
                } else if (i.nodeType || i === t || i === e)
                    o.push(i);
                else if (i.length > 0 && i[0].nodeType)
                    for (a = 0; a < i.length; a += 1)
                        o.push(i[a]);
            return new n(o)
        }
        function r(e) {
            for (var t = [], n = 0; n < e.length; n += 1)
                -1 === t.indexOf(e[n]) && t.push(e[n]);
            return t
        }
        i.fn = n.prototype,
            i.Class = n,
            i.Dom7 = n;
        var o = {
            addClass: function (e) {
                if (void 0 === e)
                    return this;
                for (var t = e.split(" "), n = 0; n < t.length; n += 1)
                    for (var i = 0; i < this.length; i += 1)
                        void 0 !== this[i] && void 0 !== this[i].classList && this[i].classList.add(t[n]);
                return this
            },
            removeClass: function (e) {
                for (var t = e.split(" "), n = 0; n < t.length; n += 1)
                    for (var i = 0; i < this.length; i += 1)
                        void 0 !== this[i] && void 0 !== this[i].classList && this[i].classList.remove(t[n]);
                return this
            },
            hasClass: function (e) {
                return !!this[0] && this[0].classList.contains(e)
            },
            toggleClass: function (e) {
                for (var t = e.split(" "), n = 0; n < t.length; n += 1)
                    for (var i = 0; i < this.length; i += 1)
                        void 0 !== this[i] && void 0 !== this[i].classList && this[i].classList.toggle(t[n]);
                return this
            },
            attr: function (e, t) {
                var n = arguments;
                if (1 === arguments.length && "string" == typeof e)
                    return this[0] ? this[0].getAttribute(e) : void 0;
                for (var i = 0; i < this.length; i += 1)
                    if (2 === n.length)
                        this[i].setAttribute(e, t);
                    else
                        for (var r in e)
                            this[i][r] = e[r],
                                this[i].setAttribute(r, e[r]);
                return this
            },
            removeAttr: function (e) {
                for (var t = 0; t < this.length; t += 1)
                    this[t].removeAttribute(e);
                return this
            },
            data: function (e, t) {
                var n;
                if (void 0 !== t) {
                    for (var i = 0; i < this.length; i += 1)
                        (n = this[i]).dom7ElementDataStorage || (n.dom7ElementDataStorage = {}),
                            n.dom7ElementDataStorage[e] = t;
                    return this
                }
                if (n = this[0])
                    return n.dom7ElementDataStorage && e in n.dom7ElementDataStorage ? n.dom7ElementDataStorage[e] : n.getAttribute("data-" + e) || void 0
            },
            transform: function (e) {
                for (var t = 0; t < this.length; t += 1) {
                    var n = this[t].style;
                    n.webkitTransform = e,
                        n.transform = e
                }
                return this
            },
            transition: function (e) {
                "string" != typeof e && (e += "ms");
                for (var t = 0; t < this.length; t += 1) {
                    var n = this[t].style;
                    n.webkitTransitionDuration = e,
                        n.transitionDuration = e
                }
                return this
            },
            on: function () {
                for (var e, t = [], n = arguments.length; n--;)
                    t[n] = arguments[n];
                var r = t[0]
                    , o = t[1]
                    , a = t[2]
                    , s = t[3];
                function l(e) {
                    var t = e.target;
                    if (t) {
                        var n = e.target.dom7EventData || [];
                        if (n.indexOf(e) < 0 && n.unshift(e),
                            i(t).is(o))
                            a.apply(t, n);
                        else
                            for (var r = i(t).parents(), s = 0; s < r.length; s += 1)
                                i(r[s]).is(o) && a.apply(r[s], n)
                    }
                }
                function c(e) {
                    var t = e && e.target && e.target.dom7EventData || [];
                    t.indexOf(e) < 0 && t.unshift(e),
                        a.apply(this, t)
                }
                "function" == typeof t[1] && (r = (e = t)[0],
                    a = e[1],
                    s = e[2],
                    o = void 0),
                    s || (s = !1);
                for (var u, d = r.split(" "), p = 0; p < this.length; p += 1) {
                    var h = this[p];
                    if (o)
                        for (u = 0; u < d.length; u += 1) {
                            var f = d[u];
                            h.dom7LiveListeners || (h.dom7LiveListeners = {}),
                                h.dom7LiveListeners[f] || (h.dom7LiveListeners[f] = []),
                                h.dom7LiveListeners[f].push({
                                    listener: a,
                                    proxyListener: l
                                }),
                                h.addEventListener(f, l, s)
                        }
                    else
                        for (u = 0; u < d.length; u += 1) {
                            var m = d[u];
                            h.dom7Listeners || (h.dom7Listeners = {}),
                                h.dom7Listeners[m] || (h.dom7Listeners[m] = []),
                                h.dom7Listeners[m].push({
                                    listener: a,
                                    proxyListener: c
                                }),
                                h.addEventListener(m, c, s)
                        }
                }
                return this
            },
            off: function () {
                for (var e, t = [], n = arguments.length; n--;)
                    t[n] = arguments[n];
                var i = t[0]
                    , r = t[1]
                    , o = t[2]
                    , a = t[3];
                "function" == typeof t[1] && (i = (e = t)[0],
                    o = e[1],
                    a = e[2],
                    r = void 0),
                    a || (a = !1);
                for (var s = i.split(" "), l = 0; l < s.length; l += 1)
                    for (var c = s[l], u = 0; u < this.length; u += 1) {
                        var d = this[u]
                            , p = void 0;
                        if (!r && d.dom7Listeners ? p = d.dom7Listeners[c] : r && d.dom7LiveListeners && (p = d.dom7LiveListeners[c]),
                            p && p.length)
                            for (var h = p.length - 1; h >= 0; h -= 1) {
                                var f = p[h];
                                o && f.listener === o ? (d.removeEventListener(c, f.proxyListener, a),
                                    p.splice(h, 1)) : o && f.listener && f.listener.dom7proxy && f.listener.dom7proxy === o ? (d.removeEventListener(c, f.proxyListener, a),
                                        p.splice(h, 1)) : o || (d.removeEventListener(c, f.proxyListener, a),
                                            p.splice(h, 1))
                            }
                    }
                return this
            },
            trigger: function () {
                for (var n = [], i = arguments.length; i--;)
                    n[i] = arguments[i];
                for (var r = n[0].split(" "), o = n[1], a = 0; a < r.length; a += 1)
                    for (var s = r[a], l = 0; l < this.length; l += 1) {
                        var c = this[l]
                            , u = void 0;
                        try {
                            u = new t.CustomEvent(s, {
                                detail: o,
                                bubbles: !0,
                                cancelable: !0
                            })
                        } catch (t) {
                            (u = e.createEvent("Event")).initEvent(s, !0, !0),
                                u.detail = o
                        }
                        c.dom7EventData = n.filter(function (e, t) {
                            return t > 0
                        }),
                            c.dispatchEvent(u),
                            c.dom7EventData = [],
                            delete c.dom7EventData
                    }
                return this
            },
            transitionEnd: function (e) {
                var t, n = ["webkitTransitionEnd", "transitionend"], i = this;
                function r(o) {
                    if (o.target === this)
                        for (e.call(this, o),
                            t = 0; t < n.length; t += 1)
                            i.off(n[t], r)
                }
                if (e)
                    for (t = 0; t < n.length; t += 1)
                        i.on(n[t], r);
                return this
            },
            outerWidth: function (e) {
                if (this.length > 0) {
                    if (e) {
                        var t = this.styles();
                        return this[0].offsetWidth + parseFloat(t.getPropertyValue("margin-right")) + parseFloat(t.getPropertyValue("margin-left"))
                    }
                    return this[0].offsetWidth
                }
                return null
            },
            outerHeight: function (e) {
                if (this.length > 0) {
                    if (e) {
                        var t = this.styles();
                        return this[0].offsetHeight + parseFloat(t.getPropertyValue("margin-top")) + parseFloat(t.getPropertyValue("margin-bottom"))
                    }
                    return this[0].offsetHeight
                }
                return null
            },
            offset: function () {
                if (this.length > 0) {
                    var n = this[0]
                        , i = n.getBoundingClientRect()
                        , r = e.body
                        , o = n.clientTop || r.clientTop || 0
                        , a = n.clientLeft || r.clientLeft || 0
                        , s = n === t ? t.scrollY : n.scrollTop
                        , l = n === t ? t.scrollX : n.scrollLeft;
                    return {
                        top: i.top + s - o,
                        left: i.left + l - a
                    }
                }
                return null
            },
            css: function (e, n) {
                var i;
                if (1 === arguments.length) {
                    if ("string" != typeof e) {
                        for (i = 0; i < this.length; i += 1)
                            for (var r in e)
                                this[i].style[r] = e[r];
                        return this
                    }
                    if (this[0])
                        return t.getComputedStyle(this[0], null).getPropertyValue(e)
                }
                if (2 === arguments.length && "string" == typeof e) {
                    for (i = 0; i < this.length; i += 1)
                        this[i].style[e] = n;
                    return this
                }
                return this
            },
            each: function (e) {
                if (!e)
                    return this;
                for (var t = 0; t < this.length; t += 1)
                    if (!1 === e.call(this[t], t, this[t]))
                        return this;
                return this
            },
            html: function (e) {
                if (void 0 === e)
                    return this[0] ? this[0].innerHTML : void 0;
                for (var t = 0; t < this.length; t += 1)
                    this[t].innerHTML = e;
                return this
            },
            text: function (e) {
                if (void 0 === e)
                    return this[0] ? this[0].textContent.trim() : null;
                for (var t = 0; t < this.length; t += 1)
                    this[t].textContent = e;
                return this
            },
            is: function (r) {
                var o, a, s = this[0];
                if (!s || void 0 === r)
                    return !1;
                if ("string" == typeof r) {
                    if (s.matches)
                        return s.matches(r);
                    if (s.webkitMatchesSelector)
                        return s.webkitMatchesSelector(r);
                    if (s.msMatchesSelector)
                        return s.msMatchesSelector(r);
                    for (o = i(r),
                        a = 0; a < o.length; a += 1)
                        if (o[a] === s)
                            return !0;
                    return !1
                }
                if (r === e)
                    return s === e;
                if (r === t)
                    return s === t;
                if (r.nodeType || r instanceof n) {
                    for (o = r.nodeType ? [r] : r,
                        a = 0; a < o.length; a += 1)
                        if (o[a] === s)
                            return !0;
                    return !1
                }
                return !1
            },
            index: function () {
                var e, t = this[0];
                if (t) {
                    for (e = 0; null !== (t = t.previousSibling);)
                        1 === t.nodeType && (e += 1);
                    return e
                }
            },
            eq: function (e) {
                if (void 0 === e)
                    return this;
                var t, i = this.length;
                return new n(e > i - 1 ? [] : e < 0 ? (t = i + e) < 0 ? [] : [this[t]] : [this[e]])
            },
            append: function () {
                for (var t, i = [], r = arguments.length; r--;)
                    i[r] = arguments[r];
                for (var o = 0; o < i.length; o += 1) {
                    t = i[o];
                    for (var a = 0; a < this.length; a += 1)
                        if ("string" == typeof t) {
                            var s = e.createElement("div");
                            for (s.innerHTML = t; s.firstChild;)
                                this[a].appendChild(s.firstChild)
                        } else if (t instanceof n)
                            for (var l = 0; l < t.length; l += 1)
                                this[a].appendChild(t[l]);
                        else
                            this[a].appendChild(t)
                }
                return this
            },
            prepend: function (t) {
                var i, r;
                for (i = 0; i < this.length; i += 1)
                    if ("string" == typeof t) {
                        var o = e.createElement("div");
                        for (o.innerHTML = t,
                            r = o.childNodes.length - 1; r >= 0; r -= 1)
                            this[i].insertBefore(o.childNodes[r], this[i].childNodes[0])
                    } else if (t instanceof n)
                        for (r = 0; r < t.length; r += 1)
                            this[i].insertBefore(t[r], this[i].childNodes[0]);
                    else
                        this[i].insertBefore(t, this[i].childNodes[0]);
                return this
            },
            next: function (e) {
                return this.length > 0 ? e ? this[0].nextElementSibling && i(this[0].nextElementSibling).is(e) ? new n([this[0].nextElementSibling]) : new n([]) : this[0].nextElementSibling ? new n([this[0].nextElementSibling]) : new n([]) : new n([])
            },
            nextAll: function (e) {
                var t = []
                    , r = this[0];
                if (!r)
                    return new n([]);
                for (; r.nextElementSibling;) {
                    var o = r.nextElementSibling;
                    e ? i(o).is(e) && t.push(o) : t.push(o),
                        r = o
                }
                return new n(t)
            },
            prev: function (e) {
                if (this.length > 0) {
                    var t = this[0];
                    return e ? t.previousElementSibling && i(t.previousElementSibling).is(e) ? new n([t.previousElementSibling]) : new n([]) : t.previousElementSibling ? new n([t.previousElementSibling]) : new n([])
                }
                return new n([])
            },
            prevAll: function (e) {
                var t = []
                    , r = this[0];
                if (!r)
                    return new n([]);
                for (; r.previousElementSibling;) {
                    var o = r.previousElementSibling;
                    e ? i(o).is(e) && t.push(o) : t.push(o),
                        r = o
                }
                return new n(t)
            },
            parent: function (e) {
                for (var t = [], n = 0; n < this.length; n += 1)
                    null !== this[n].parentNode && (e ? i(this[n].parentNode).is(e) && t.push(this[n].parentNode) : t.push(this[n].parentNode));
                return i(r(t))
            },
            parents: function (e) {
                for (var t = [], n = 0; n < this.length; n += 1)
                    for (var o = this[n].parentNode; o;)
                        e ? i(o).is(e) && t.push(o) : t.push(o),
                            o = o.parentNode;
                return i(r(t))
            },
            closest: function (e) {
                var t = this;
                return void 0 === e ? new n([]) : (t.is(e) || (t = t.parents(e).eq(0)),
                    t)
            },
            find: function (e) {
                for (var t = [], i = 0; i < this.length; i += 1)
                    for (var r = this[i].querySelectorAll(e), o = 0; o < r.length; o += 1)
                        t.push(r[o]);
                return new n(t)
            },
            children: function (e) {
                for (var t = [], o = 0; o < this.length; o += 1)
                    for (var a = this[o].childNodes, s = 0; s < a.length; s += 1)
                        e ? 1 === a[s].nodeType && i(a[s]).is(e) && t.push(a[s]) : 1 === a[s].nodeType && t.push(a[s]);
                return new n(r(t))
            },
            filter: function (e) {
                for (var t = [], i = 0; i < this.length; i += 1)
                    e.call(this[i], i, this[i]) && t.push(this[i]);
                return new n(t)
            },
            remove: function () {
                for (var e = 0; e < this.length; e += 1)
                    this[e].parentNode && this[e].parentNode.removeChild(this[e]);
                return this
            },
            add: function () {
                for (var e = [], t = arguments.length; t--;)
                    e[t] = arguments[t];
                var n, r;
                for (n = 0; n < e.length; n += 1) {
                    var o = i(e[n]);
                    for (r = 0; r < o.length; r += 1)
                        this[this.length] = o[r],
                            this.length += 1
                }
                return this
            },
            styles: function () {
                return this[0] ? t.getComputedStyle(this[0], null) : {}
            }
        };
        Object.keys(o).forEach(function (e) {
            i.fn[e] = i.fn[e] || o[e]
        });
        var a = {
            deleteProps: function (e) {
                var t = e;
                Object.keys(t).forEach(function (e) {
                    try {
                        t[e] = null
                    } catch (e) { }
                    try {
                        delete t[e]
                    } catch (e) { }
                })
            },
            nextTick: function (e, t) {
                return void 0 === t && (t = 0),
                    setTimeout(e, t)
            },
            now: function () {
                return Date.now()
            },
            getTranslate: function (e, n) {
                var i, r, o;
                void 0 === n && (n = "x");
                var a = t.getComputedStyle(e, null);
                return t.WebKitCSSMatrix ? ((r = a.transform || a.webkitTransform).split(",").length > 6 && (r = r.split(", ").map(function (e) {
                    return e.replace(",", ".")
                }).join(", ")),
                    o = new t.WebKitCSSMatrix("none" === r ? "" : r)) : i = (o = a.MozTransform || a.OTransform || a.MsTransform || a.msTransform || a.transform || a.getPropertyValue("transform").replace("translate(", "matrix(1, 0, 0, 1,")).toString().split(","),
                    "x" === n && (r = t.WebKitCSSMatrix ? o.m41 : 16 === i.length ? parseFloat(i[12]) : parseFloat(i[4])),
                    "y" === n && (r = t.WebKitCSSMatrix ? o.m42 : 16 === i.length ? parseFloat(i[13]) : parseFloat(i[5])),
                    r || 0
            },
            parseUrlQuery: function (e) {
                var n, i, r, o, a = {}, s = e || t.location.href;
                if ("string" == typeof s && s.length)
                    for (o = (i = (s = s.indexOf("?") > -1 ? s.replace(/\S*\?/, "") : "").split("&").filter(function (e) {
                        return "" !== e
                    })).length,
                        n = 0; n < o; n += 1)
                        r = i[n].replace(/#\S+/g, "").split("="),
                            a[decodeURIComponent(r[0])] = void 0 === r[1] ? void 0 : decodeURIComponent(r[1]) || "";
                return a
            },
            isObject: function (e) {
                return "object" == typeof e && null !== e && e.constructor && e.constructor === Object
            },
            extend: function () {
                for (var e = [], t = arguments.length; t--;)
                    e[t] = arguments[t];
                for (var n = Object(e[0]), i = 1; i < e.length; i += 1) {
                    var r = e[i];
                    if (null != r)
                        for (var o = Object.keys(Object(r)), s = 0, l = o.length; s < l; s += 1) {
                            var c = o[s]
                                , u = Object.getOwnPropertyDescriptor(r, c);
                            void 0 !== u && u.enumerable && (a.isObject(n[c]) && a.isObject(r[c]) ? a.extend(n[c], r[c]) : !a.isObject(n[c]) && a.isObject(r[c]) ? (n[c] = {},
                                a.extend(n[c], r[c])) : n[c] = r[c])
                        }
                }
                return n
            }
        }
            , s = {
                touch: t.Modernizr && !0 === t.Modernizr.touch || !!(t.navigator.maxTouchPoints > 0 || "ontouchstart" in t || t.DocumentTouch && e instanceof t.DocumentTouch),
                pointerEvents: !!t.PointerEvent && "maxTouchPoints" in t.navigator && t.navigator.maxTouchPoints > 0,
                observer: "MutationObserver" in t || "WebkitMutationObserver" in t,
                passiveListener: function () {
                    var e = !1;
                    try {
                        var n = Object.defineProperty({}, "passive", {
                            get: function () {
                                e = !0
                            }
                        });
                        t.addEventListener("testPassiveListener", null, n)
                    } catch (e) { }
                    return e
                }(),
                gestures: "ongesturestart" in t
            }
            , l = function (e) {
                void 0 === e && (e = {});
                var t = this;
                t.params = e,
                    t.eventsListeners = {},
                    t.params && t.params.on && Object.keys(t.params.on).forEach(function (e) {
                        t.on(e, t.params.on[e])
                    })
            }
            , c = {
                components: {
                    configurable: !0
                }
            };
        l.prototype.on = function (e, t, n) {
            var i = this;
            if ("function" != typeof t)
                return i;
            var r = n ? "unshift" : "push";
            return e.split(" ").forEach(function (e) {
                i.eventsListeners[e] || (i.eventsListeners[e] = []),
                    i.eventsListeners[e][r](t)
            }),
                i
        }
            ,
            l.prototype.once = function (e, t, n) {
                var i = this;
                if ("function" != typeof t)
                    return i;
                function r() {
                    for (var n = [], o = arguments.length; o--;)
                        n[o] = arguments[o];
                    t.apply(i, n),
                        i.off(e, r),
                        r.f7proxy && delete r.f7proxy
                }
                return r.f7proxy = t,
                    i.on(e, r, n)
            }
            ,
            l.prototype.off = function (e, t) {
                var n = this;
                return n.eventsListeners ? (e.split(" ").forEach(function (e) {
                    void 0 === t ? n.eventsListeners[e] = [] : n.eventsListeners[e] && n.eventsListeners[e].length && n.eventsListeners[e].forEach(function (i, r) {
                        (i === t || i.f7proxy && i.f7proxy === t) && n.eventsListeners[e].splice(r, 1)
                    })
                }),
                    n) : n
            }
            ,
            l.prototype.emit = function () {
                for (var e = [], t = arguments.length; t--;)
                    e[t] = arguments[t];
                var n, i, r, o = this;
                return o.eventsListeners ? ("string" == typeof e[0] || Array.isArray(e[0]) ? (n = e[0],
                    i = e.slice(1, e.length),
                    r = o) : (n = e[0].events,
                        i = e[0].data,
                        r = e[0].context || o),
                    (Array.isArray(n) ? n : n.split(" ")).forEach(function (e) {
                        if (o.eventsListeners && o.eventsListeners[e]) {
                            var t = [];
                            o.eventsListeners[e].forEach(function (e) {
                                t.push(e)
                            }),
                                t.forEach(function (e) {
                                    e.apply(r, i)
                                })
                        }
                    }),
                    o) : o
            }
            ,
            l.prototype.useModulesParams = function (e) {
                var t = this;
                t.modules && Object.keys(t.modules).forEach(function (n) {
                    var i = t.modules[n];
                    i.params && a.extend(e, i.params)
                })
            }
            ,
            l.prototype.useModules = function (e) {
                void 0 === e && (e = {});
                var t = this;
                t.modules && Object.keys(t.modules).forEach(function (n) {
                    var i = t.modules[n]
                        , r = e[n] || {};
                    i.instance && Object.keys(i.instance).forEach(function (e) {
                        var n = i.instance[e];
                        t[e] = "function" == typeof n ? n.bind(t) : n
                    }),
                        i.on && t.on && Object.keys(i.on).forEach(function (e) {
                            t.on(e, i.on[e])
                        }),
                        i.create && i.create.bind(t)(r)
                })
            }
            ,
            c.components.set = function (e) {
                this.use && this.use(e)
            }
            ,
            l.installModule = function (e) {
                for (var t = [], n = arguments.length - 1; n-- > 0;)
                    t[n] = arguments[n + 1];
                var i = this;
                i.prototype.modules || (i.prototype.modules = {});
                var r = e.name || Object.keys(i.prototype.modules).length + "_" + a.now();
                return i.prototype.modules[r] = e,
                    e.proto && Object.keys(e.proto).forEach(function (t) {
                        i.prototype[t] = e.proto[t]
                    }),
                    e.static && Object.keys(e.static).forEach(function (t) {
                        i[t] = e.static[t]
                    }),
                    e.install && e.install.apply(i, t),
                    i
            }
            ,
            l.use = function (e) {
                for (var t = [], n = arguments.length - 1; n-- > 0;)
                    t[n] = arguments[n + 1];
                var i = this;
                return Array.isArray(e) ? (e.forEach(function (e) {
                    return i.installModule(e)
                }),
                    i) : i.installModule.apply(i, [e].concat(t))
            }
            ,
            Object.defineProperties(l, c);
        var u, d, p, h, f, m, g, v, y, b, w, $, S, C, x, T = {
            updateSize: function () {
                var e, t, n = this.$el;
                e = void 0 !== this.params.width ? this.params.width : n[0].clientWidth,
                    t = void 0 !== this.params.height ? this.params.height : n[0].clientHeight,
                    0 === e && this.isHorizontal() || 0 === t && this.isVertical() || (e = e - parseInt(n.css("padding-left"), 10) - parseInt(n.css("padding-right"), 10),
                        t = t - parseInt(n.css("padding-top"), 10) - parseInt(n.css("padding-bottom"), 10),
                        a.extend(this, {
                            width: e,
                            height: t,
                            size: this.isHorizontal() ? e : t
                        }))
            },
            updateSlides: function () {
                var e = this.params
                    , n = this.$wrapperEl
                    , i = this.size
                    , r = this.rtlTranslate
                    , o = this.wrongRTL
                    , s = this.virtual && e.virtual.enabled
                    , l = s ? this.virtual.slides.length : this.slides.length
                    , c = n.children("." + this.params.slideClass)
                    , u = s ? this.virtual.slides.length : c.length
                    , d = []
                    , p = []
                    , h = [];
                function f(t) {
                    return !e.cssMode || t !== c.length - 1
                }
                var m = e.slidesOffsetBefore;
                "function" == typeof m && (m = e.slidesOffsetBefore.call(this));
                var g = e.slidesOffsetAfter;
                "function" == typeof g && (g = e.slidesOffsetAfter.call(this));
                var v = this.snapGrid.length
                    , y = this.snapGrid.length
                    , b = e.spaceBetween
                    , w = -m
                    , $ = 0
                    , S = 0;
                if (void 0 !== i) {
                    var C, x;
                    "string" == typeof b && b.indexOf("%") >= 0 && (b = parseFloat(b.replace("%", "")) / 100 * i),
                        this.virtualSize = -b,
                        r ? c.css({
                            marginLeft: "",
                            marginTop: ""
                        }) : c.css({
                            marginRight: "",
                            marginBottom: ""
                        }),
                        e.slidesPerColumn > 1 && (C = Math.floor(u / e.slidesPerColumn) === u / this.params.slidesPerColumn ? u : Math.ceil(u / e.slidesPerColumn) * e.slidesPerColumn,
                            "auto" !== e.slidesPerView && "row" === e.slidesPerColumnFill && (C = Math.max(C, e.slidesPerView * e.slidesPerColumn)));
                    for (var T, k = e.slidesPerColumn, P = C / k, E = Math.floor(u / e.slidesPerColumn), I = 0; I < u; I += 1) {
                        x = 0;
                        var M = c.eq(I);
                        if (e.slidesPerColumn > 1) {
                            var O = void 0
                                , D = void 0
                                , A = void 0;
                            if ("row" === e.slidesPerColumnFill && e.slidesPerGroup > 1) {
                                var _ = Math.floor(I / (e.slidesPerGroup * e.slidesPerColumn))
                                    , R = I - e.slidesPerColumn * e.slidesPerGroup * _
                                    , L = 0 === _ ? e.slidesPerGroup : Math.min(Math.ceil((u - _ * k * e.slidesPerGroup) / k), e.slidesPerGroup);
                                O = (D = R - (A = Math.floor(R / L)) * L + _ * e.slidesPerGroup) + A * C / k,
                                    M.css({
                                        "-webkit-box-ordinal-group": O,
                                        "-moz-box-ordinal-group": O,
                                        "-ms-flex-order": O,
                                        "-webkit-order": O,
                                        order: O
                                    })
                            } else
                                "column" === e.slidesPerColumnFill ? (A = I - (D = Math.floor(I / k)) * k,
                                    (D > E || D === E && A === k - 1) && (A += 1) >= k && (A = 0,
                                        D += 1)) : D = I - (A = Math.floor(I / P)) * P;
                            M.css("margin-" + (this.isHorizontal() ? "top" : "left"), 0 !== A && e.spaceBetween && e.spaceBetween + "px")
                        }
                        if ("none" !== M.css("display")) {
                            if ("auto" === e.slidesPerView) {
                                var U = t.getComputedStyle(M[0], null)
                                    , N = M[0].style.transform
                                    , j = M[0].style.webkitTransform;
                                if (N && (M[0].style.transform = "none"),
                                    j && (M[0].style.webkitTransform = "none"),
                                    e.roundLengths)
                                    x = this.isHorizontal() ? M.outerWidth(!0) : M.outerHeight(!0);
                                else if (this.isHorizontal()) {
                                    var F = parseFloat(U.getPropertyValue("width"))
                                        , B = parseFloat(U.getPropertyValue("padding-left"))
                                        , V = parseFloat(U.getPropertyValue("padding-right"))
                                        , z = parseFloat(U.getPropertyValue("margin-left"))
                                        , H = parseFloat(U.getPropertyValue("margin-right"))
                                        , W = U.getPropertyValue("box-sizing");
                                    x = W && "border-box" === W ? F + z + H : F + B + V + z + H
                                } else {
                                    var q = parseFloat(U.getPropertyValue("height"))
                                        , G = parseFloat(U.getPropertyValue("padding-top"))
                                        , Y = parseFloat(U.getPropertyValue("padding-bottom"))
                                        , X = parseFloat(U.getPropertyValue("margin-top"))
                                        , J = parseFloat(U.getPropertyValue("margin-bottom"))
                                        , K = U.getPropertyValue("box-sizing");
                                    x = K && "border-box" === K ? q + X + J : q + G + Y + X + J
                                }
                                N && (M[0].style.transform = N),
                                    j && (M[0].style.webkitTransform = j),
                                    e.roundLengths && (x = Math.floor(x))
                            } else
                                x = (i - (e.slidesPerView - 1) * b) / e.slidesPerView,
                                    e.roundLengths && (x = Math.floor(x)),
                                    c[I] && (this.isHorizontal() ? c[I].style.width = x + "px" : c[I].style.height = x + "px");
                            c[I] && (c[I].swiperSlideSize = x),
                                h.push(x),
                                e.centeredSlides ? (w = w + x / 2 + $ / 2 + b,
                                    0 === $ && 0 !== I && (w = w - i / 2 - b),
                                    0 === I && (w = w - i / 2 - b),
                                    Math.abs(w) < .001 && (w = 0),
                                    e.roundLengths && (w = Math.floor(w)),
                                    S % e.slidesPerGroup == 0 && d.push(w),
                                    p.push(w)) : (e.roundLengths && (w = Math.floor(w)),
                                        S % e.slidesPerGroup == 0 && d.push(w),
                                        p.push(w),
                                        w = w + x + b),
                                this.virtualSize += x + b,
                                $ = x,
                                S += 1
                        }
                    }
                    if (this.virtualSize = Math.max(this.virtualSize, i) + g,
                        r && o && ("slide" === e.effect || "coverflow" === e.effect) && n.css({
                            width: this.virtualSize + e.spaceBetween + "px"
                        }),
                        e.setWrapperSize && (this.isHorizontal() ? n.css({
                            width: this.virtualSize + e.spaceBetween + "px"
                        }) : n.css({
                            height: this.virtualSize + e.spaceBetween + "px"
                        })),
                        e.slidesPerColumn > 1 && (this.virtualSize = (x + e.spaceBetween) * C,
                            this.virtualSize = Math.ceil(this.virtualSize / e.slidesPerColumn) - e.spaceBetween,
                            this.isHorizontal() ? n.css({
                                width: this.virtualSize + e.spaceBetween + "px"
                            }) : n.css({
                                height: this.virtualSize + e.spaceBetween + "px"
                            }),
                            e.centeredSlides)) {
                        T = [];
                        for (var Q = 0; Q < d.length; Q += 1) {
                            var Z = d[Q];
                            e.roundLengths && (Z = Math.floor(Z)),
                                d[Q] < this.virtualSize + d[0] && T.push(Z)
                        }
                        d = T
                    }
                    if (!e.centeredSlides) {
                        T = [];
                        for (var ee = 0; ee < d.length; ee += 1) {
                            var te = d[ee];
                            e.roundLengths && (te = Math.floor(te)),
                                d[ee] <= this.virtualSize - i && T.push(te)
                        }
                        d = T,
                            Math.floor(this.virtualSize - i) - Math.floor(d[d.length - 1]) > 1 && d.push(this.virtualSize - i)
                    }
                    if (0 === d.length && (d = [0]),
                        0 !== e.spaceBetween && (this.isHorizontal() ? r ? c.filter(f).css({
                            marginLeft: b + "px"
                        }) : c.filter(f).css({
                            marginRight: b + "px"
                        }) : c.filter(f).css({
                            marginBottom: b + "px"
                        })),
                        e.centeredSlides && e.centeredSlidesBounds) {
                        var ne = 0;
                        h.forEach(function (t) {
                            ne += t + (e.spaceBetween ? e.spaceBetween : 0)
                        });
                        var ie = (ne -= e.spaceBetween) - i;
                        d = d.map(function (e) {
                            return e < 0 ? -m : e > ie ? ie + g : e
                        })
                    }
                    if (e.centerInsufficientSlides) {
                        var re = 0;
                        if (h.forEach(function (t) {
                            re += t + (e.spaceBetween ? e.spaceBetween : 0)
                        }),
                            (re -= e.spaceBetween) < i) {
                            var oe = (i - re) / 2;
                            d.forEach(function (e, t) {
                                d[t] = e - oe
                            }),
                                p.forEach(function (e, t) {
                                    p[t] = e + oe
                                })
                        }
                    }
                    a.extend(this, {
                        slides: c,
                        snapGrid: d,
                        slidesGrid: p,
                        slidesSizesGrid: h
                    }),
                        u !== l && this.emit("slidesLengthChange"),
                        d.length !== v && (this.params.watchOverflow && this.checkOverflow(),
                            this.emit("snapGridLengthChange")),
                        p.length !== y && this.emit("slidesGridLengthChange"),
                        (e.watchSlidesProgress || e.watchSlidesVisibility) && this.updateSlidesOffset()
                }
            },
            updateAutoHeight: function (e) {
                var t, n = [], i = 0;
                if ("number" == typeof e ? this.setTransition(e) : !0 === e && this.setTransition(this.params.speed),
                    "auto" !== this.params.slidesPerView && this.params.slidesPerView > 1)
                    for (t = 0; t < Math.ceil(this.params.slidesPerView); t += 1) {
                        var r = this.activeIndex + t;
                        if (r > this.slides.length)
                            break;
                        n.push(this.slides.eq(r)[0])
                    }
                else
                    n.push(this.slides.eq(this.activeIndex)[0]);
                for (t = 0; t < n.length; t += 1)
                    if (void 0 !== n[t]) {
                        var o = n[t].offsetHeight;
                        i = o > i ? o : i
                    }
                i && this.$wrapperEl.css("height", i + "px")
            },
            updateSlidesOffset: function () {
                for (var e = this.slides, t = 0; t < e.length; t += 1)
                    e[t].swiperSlideOffset = this.isHorizontal() ? e[t].offsetLeft : e[t].offsetTop
            },
            updateSlidesProgress: function (e) {
                void 0 === e && (e = this && this.translate || 0);
                var t = this.params
                    , n = this.slides
                    , r = this.rtlTranslate;
                if (0 !== n.length) {
                    void 0 === n[0].swiperSlideOffset && this.updateSlidesOffset();
                    var o = -e;
                    r && (o = e),
                        n.removeClass(t.slideVisibleClass),
                        this.visibleSlidesIndexes = [],
                        this.visibleSlides = [];
                    for (var a = 0; a < n.length; a += 1) {
                        var s = n[a]
                            , l = (o + (t.centeredSlides ? this.minTranslate() : 0) - s.swiperSlideOffset) / (s.swiperSlideSize + t.spaceBetween);
                        if (t.watchSlidesVisibility) {
                            var c = -(o - s.swiperSlideOffset)
                                , u = c + this.slidesSizesGrid[a];
                            (c >= 0 && c < this.size - 1 || u > 1 && u <= this.size || c <= 0 && u >= this.size) && (this.visibleSlides.push(s),
                                this.visibleSlidesIndexes.push(a),
                                n.eq(a).addClass(t.slideVisibleClass))
                        }
                        s.progress = r ? -l : l
                    }
                    this.visibleSlides = i(this.visibleSlides)
                }
            },
            updateProgress: function (e) {
                if (void 0 === e) {
                    var t = this.rtlTranslate ? -1 : 1;
                    e = this && this.translate && this.translate * t || 0
                }
                var n = this.params
                    , i = this.maxTranslate() - this.minTranslate()
                    , r = this.progress
                    , o = this.isBeginning
                    , s = this.isEnd
                    , l = o
                    , c = s;
                0 === i ? (r = 0,
                    o = !0,
                    s = !0) : (o = (r = (e - this.minTranslate()) / i) <= 0,
                        s = r >= 1),
                    a.extend(this, {
                        progress: r,
                        isBeginning: o,
                        isEnd: s
                    }),
                    (n.watchSlidesProgress || n.watchSlidesVisibility) && this.updateSlidesProgress(e),
                    o && !l && this.emit("reachBeginning toEdge"),
                    s && !c && this.emit("reachEnd toEdge"),
                    (l && !o || c && !s) && this.emit("fromEdge"),
                    this.emit("progress", r)
            },
            updateSlidesClasses: function () {
                var e, t = this.slides, n = this.params, i = this.$wrapperEl, r = this.activeIndex, o = this.realIndex, a = this.virtual && n.virtual.enabled;
                t.removeClass(n.slideActiveClass + " " + n.slideNextClass + " " + n.slidePrevClass + " " + n.slideDuplicateActiveClass + " " + n.slideDuplicateNextClass + " " + n.slideDuplicatePrevClass),
                    (e = a ? this.$wrapperEl.find("." + n.slideClass + '[data-swiper-slide-index="' + r + '"]') : t.eq(r)).addClass(n.slideActiveClass),
                    n.loop && (e.hasClass(n.slideDuplicateClass) ? i.children("." + n.slideClass + ":not(." + n.slideDuplicateClass + ')[data-swiper-slide-index="' + o + '"]').addClass(n.slideDuplicateActiveClass) : i.children("." + n.slideClass + "." + n.slideDuplicateClass + '[data-swiper-slide-index="' + o + '"]').addClass(n.slideDuplicateActiveClass));
                var s = e.nextAll("." + n.slideClass).eq(0).addClass(n.slideNextClass);
                n.loop && 0 === s.length && (s = t.eq(0)).addClass(n.slideNextClass);
                var l = e.prevAll("." + n.slideClass).eq(0).addClass(n.slidePrevClass);
                n.loop && 0 === l.length && (l = t.eq(-1)).addClass(n.slidePrevClass),
                    n.loop && (s.hasClass(n.slideDuplicateClass) ? i.children("." + n.slideClass + ":not(." + n.slideDuplicateClass + ')[data-swiper-slide-index="' + s.attr("data-swiper-slide-index") + '"]').addClass(n.slideDuplicateNextClass) : i.children("." + n.slideClass + "." + n.slideDuplicateClass + '[data-swiper-slide-index="' + s.attr("data-swiper-slide-index") + '"]').addClass(n.slideDuplicateNextClass),
                        l.hasClass(n.slideDuplicateClass) ? i.children("." + n.slideClass + ":not(." + n.slideDuplicateClass + ')[data-swiper-slide-index="' + l.attr("data-swiper-slide-index") + '"]').addClass(n.slideDuplicatePrevClass) : i.children("." + n.slideClass + "." + n.slideDuplicateClass + '[data-swiper-slide-index="' + l.attr("data-swiper-slide-index") + '"]').addClass(n.slideDuplicatePrevClass))
            },
            updateActiveIndex: function (e) {
                var t, n = this.rtlTranslate ? this.translate : -this.translate, i = this.slidesGrid, r = this.snapGrid, o = this.params, s = this.activeIndex, l = this.realIndex, c = this.snapIndex, u = e;
                if (void 0 === u) {
                    for (var d = 0; d < i.length; d += 1)
                        void 0 !== i[d + 1] ? n >= i[d] && n < i[d + 1] - (i[d + 1] - i[d]) / 2 ? u = d : n >= i[d] && n < i[d + 1] && (u = d + 1) : n >= i[d] && (u = d);
                    o.normalizeSlideIndex && (u < 0 || void 0 === u) && (u = 0)
                }
                if ((t = r.indexOf(n) >= 0 ? r.indexOf(n) : Math.floor(u / o.slidesPerGroup)) >= r.length && (t = r.length - 1),
                    u !== s) {
                    var p = parseInt(this.slides.eq(u).attr("data-swiper-slide-index") || u, 10);
                    a.extend(this, {
                        snapIndex: t,
                        realIndex: p,
                        previousIndex: s,
                        activeIndex: u
                    }),
                        this.emit("activeIndexChange"),
                        this.emit("snapIndexChange"),
                        l !== p && this.emit("realIndexChange"),
                        (this.initialized || this.runCallbacksOnInit) && this.emit("slideChange")
                } else
                    t !== c && (this.snapIndex = t,
                        this.emit("snapIndexChange"))
            },
            updateClickedSlide: function (e) {
                var t = this.params
                    , n = i(e.target).closest("." + t.slideClass)[0]
                    , r = !1;
                if (n)
                    for (var o = 0; o < this.slides.length; o += 1)
                        this.slides[o] === n && (r = !0);
                if (!n || !r)
                    return this.clickedSlide = void 0,
                        void (this.clickedIndex = void 0);
                this.clickedSlide = n,
                    this.virtual && this.params.virtual.enabled ? this.clickedIndex = parseInt(i(n).attr("data-swiper-slide-index"), 10) : this.clickedIndex = i(n).index(),
                    t.slideToClickedSlide && void 0 !== this.clickedIndex && this.clickedIndex !== this.activeIndex && this.slideToClickedSlide()
            }
        }, k = {
            getTranslate: function (e) {
                void 0 === e && (e = this.isHorizontal() ? "x" : "y");
                var t = this.params
                    , n = this.rtlTranslate
                    , i = this.translate
                    , r = this.$wrapperEl;
                if (t.virtualTranslate)
                    return n ? -i : i;
                if (t.cssMode)
                    return i;
                var o = a.getTranslate(r[0], e);
                return n && (o = -o),
                    o || 0
            },
            setTranslate: function (e, t) {
                var n = this.rtlTranslate
                    , i = this.params
                    , r = this.$wrapperEl
                    , o = this.wrapperEl
                    , a = this.progress
                    , s = 0
                    , l = 0;
                this.isHorizontal() ? s = n ? -e : e : l = e,
                    i.roundLengths && (s = Math.floor(s),
                        l = Math.floor(l)),
                    i.cssMode ? o[this.isHorizontal() ? "scrollLeft" : "scrollTop"] = this.isHorizontal() ? -s : -l : i.virtualTranslate || r.transform("translate3d(" + s + "px, " + l + "px, 0px)"),
                    this.previousTranslate = this.translate,
                    this.translate = this.isHorizontal() ? s : l;
                var c = this.maxTranslate() - this.minTranslate();
                (0 === c ? 0 : (e - this.minTranslate()) / c) !== a && this.updateProgress(e),
                    this.emit("setTranslate", this.translate, t)
            },
            minTranslate: function () {
                return -this.snapGrid[0]
            },
            maxTranslate: function () {
                return -this.snapGrid[this.snapGrid.length - 1]
            },
            translateTo: function (e, t, n, i, r) {
                var o;
                void 0 === e && (e = 0),
                    void 0 === t && (t = this.params.speed),
                    void 0 === n && (n = !0),
                    void 0 === i && (i = !0);
                var a = this
                    , s = a.params
                    , l = a.wrapperEl;
                if (a.animating && s.preventInteractionOnTransition)
                    return !1;
                var c, u = a.minTranslate(), d = a.maxTranslate();
                if (c = i && e > u ? u : i && e < d ? d : e,
                    a.updateProgress(c),
                    s.cssMode) {
                    var p = a.isHorizontal();
                    return 0 === t ? l[p ? "scrollLeft" : "scrollTop"] = -c : l.scrollTo ? l.scrollTo(((o = {})[p ? "left" : "top"] = -c,
                        o.behavior = "smooth",
                        o)) : l[p ? "scrollLeft" : "scrollTop"] = -c,
                        !0
                }
                return 0 === t ? (a.setTransition(0),
                    a.setTranslate(c),
                    n && (a.emit("beforeTransitionStart", t, r),
                        a.emit("transitionEnd"))) : (a.setTransition(t),
                            a.setTranslate(c),
                            n && (a.emit("beforeTransitionStart", t, r),
                                a.emit("transitionStart")),
                            a.animating || (a.animating = !0,
                                a.onTranslateToWrapperTransitionEnd || (a.onTranslateToWrapperTransitionEnd = function (e) {
                                    a && !a.destroyed && e.target === this && (a.$wrapperEl[0].removeEventListener("transitionend", a.onTranslateToWrapperTransitionEnd),
                                        a.$wrapperEl[0].removeEventListener("webkitTransitionEnd", a.onTranslateToWrapperTransitionEnd),
                                        a.onTranslateToWrapperTransitionEnd = null,
                                        delete a.onTranslateToWrapperTransitionEnd,
                                        n && a.emit("transitionEnd"))
                                }
                                ),
                                a.$wrapperEl[0].addEventListener("transitionend", a.onTranslateToWrapperTransitionEnd),
                                a.$wrapperEl[0].addEventListener("webkitTransitionEnd", a.onTranslateToWrapperTransitionEnd))),
                    !0
            }
        }, P = {
            slideTo: function (e, t, n, i) {
                var r;
                void 0 === e && (e = 0),
                    void 0 === t && (t = this.params.speed),
                    void 0 === n && (n = !0);
                var o = this
                    , a = e;
                a < 0 && (a = 0);
                var s = o.params
                    , l = o.snapGrid
                    , c = o.slidesGrid
                    , u = o.previousIndex
                    , d = o.activeIndex
                    , p = o.rtlTranslate
                    , h = o.wrapperEl;
                if (o.animating && s.preventInteractionOnTransition)
                    return !1;
                var f = Math.floor(a / s.slidesPerGroup);
                f >= l.length && (f = l.length - 1),
                    (d || s.initialSlide || 0) === (u || 0) && n && o.emit("beforeSlideChangeStart");
                var m, g = -l[f];
                if (o.updateProgress(g),
                    s.normalizeSlideIndex)
                    for (var v = 0; v < c.length; v += 1)
                        -Math.floor(100 * g) >= Math.floor(100 * c[v]) && (a = v);
                if (o.initialized && a !== d) {
                    if (!o.allowSlideNext && g < o.translate && g < o.minTranslate())
                        return !1;
                    if (!o.allowSlidePrev && g > o.translate && g > o.maxTranslate() && (d || 0) !== a)
                        return !1
                }
                if (m = a > d ? "next" : a < d ? "prev" : "reset",
                    p && -g === o.translate || !p && g === o.translate)
                    return o.updateActiveIndex(a),
                        s.autoHeight && o.updateAutoHeight(),
                        o.updateSlidesClasses(),
                        "slide" !== s.effect && o.setTranslate(g),
                        "reset" !== m && (o.transitionStart(n, m),
                            o.transitionEnd(n, m)),
                        !1;
                if (s.cssMode) {
                    var y = o.isHorizontal();
                    return 0 === t ? h[y ? "scrollLeft" : "scrollTop"] = -g : h.scrollTo ? h.scrollTo(((r = {})[y ? "left" : "top"] = -g,
                        r.behavior = "smooth",
                        r)) : h[y ? "scrollLeft" : "scrollTop"] = -g,
                        !0
                }
                return 0 === t ? (o.setTransition(0),
                    o.setTranslate(g),
                    o.updateActiveIndex(a),
                    o.updateSlidesClasses(),
                    o.emit("beforeTransitionStart", t, i),
                    o.transitionStart(n, m),
                    o.transitionEnd(n, m)) : (o.setTransition(t),
                        o.setTranslate(g),
                        o.updateActiveIndex(a),
                        o.updateSlidesClasses(),
                        o.emit("beforeTransitionStart", t, i),
                        o.transitionStart(n, m),
                        o.animating || (o.animating = !0,
                            o.onSlideToWrapperTransitionEnd || (o.onSlideToWrapperTransitionEnd = function (e) {
                                o && !o.destroyed && e.target === this && (o.$wrapperEl[0].removeEventListener("transitionend", o.onSlideToWrapperTransitionEnd),
                                    o.$wrapperEl[0].removeEventListener("webkitTransitionEnd", o.onSlideToWrapperTransitionEnd),
                                    o.onSlideToWrapperTransitionEnd = null,
                                    delete o.onSlideToWrapperTransitionEnd,
                                    o.transitionEnd(n, m))
                            }
                            ),
                            o.$wrapperEl[0].addEventListener("transitionend", o.onSlideToWrapperTransitionEnd),
                            o.$wrapperEl[0].addEventListener("webkitTransitionEnd", o.onSlideToWrapperTransitionEnd))),
                    !0
            },
            slideToLoop: function (e, t, n, i) {
                void 0 === e && (e = 0),
                    void 0 === t && (t = this.params.speed),
                    void 0 === n && (n = !0);
                var r = e;
                return this.params.loop && (r += this.loopedSlides),
                    this.slideTo(r, t, n, i)
            },
            slideNext: function (e, t, n) {
                void 0 === e && (e = this.params.speed),
                    void 0 === t && (t = !0);
                var i = this.params
                    , r = this.animating;
                return i.loop ? !r && (this.loopFix(),
                    this._clientLeft = this.$wrapperEl[0].clientLeft,
                    this.slideTo(this.activeIndex + i.slidesPerGroup, e, t, n)) : this.slideTo(this.activeIndex + i.slidesPerGroup, e, t, n)
            },
            slidePrev: function (e, t, n) {
                void 0 === e && (e = this.params.speed),
                    void 0 === t && (t = !0);
                var i = this.params
                    , r = this.animating
                    , o = this.snapGrid
                    , a = this.slidesGrid
                    , s = this.rtlTranslate;
                if (i.loop) {
                    if (r)
                        return !1;
                    this.loopFix(),
                        this._clientLeft = this.$wrapperEl[0].clientLeft
                }
                function l(e) {
                    return e < 0 ? -Math.floor(Math.abs(e)) : Math.floor(e)
                }
                var c, u = l(s ? this.translate : -this.translate), d = o.map(function (e) {
                    return l(e)
                }), p = (a.map(function (e) {
                    return l(e)
                }),
                    o[d.indexOf(u)],
                    o[d.indexOf(u) - 1]);
                return void 0 === p && i.cssMode && o.forEach(function (e) {
                    !p && u >= e && (p = e)
                }),
                    void 0 !== p && (c = a.indexOf(p)) < 0 && (c = this.activeIndex - 1),
                    this.slideTo(c, e, t, n)
            },
            slideReset: function (e, t, n) {
                return void 0 === e && (e = this.params.speed),
                    void 0 === t && (t = !0),
                    this.slideTo(this.activeIndex, e, t, n)
            },
            slideToClosest: function (e, t, n, i) {
                void 0 === e && (e = this.params.speed),
                    void 0 === t && (t = !0),
                    void 0 === i && (i = .5);
                var r = this.activeIndex
                    , o = Math.floor(r / this.params.slidesPerGroup)
                    , a = this.rtlTranslate ? this.translate : -this.translate;
                if (a >= this.snapGrid[o]) {
                    var s = this.snapGrid[o];
                    a - s > (this.snapGrid[o + 1] - s) * i && (r += this.params.slidesPerGroup)
                } else {
                    var l = this.snapGrid[o - 1];
                    a - l <= (this.snapGrid[o] - l) * i && (r -= this.params.slidesPerGroup)
                }
                return r = Math.max(r, 0),
                    r = Math.min(r, this.snapGrid.length - 1),
                    this.slideTo(r, e, t, n)
            },
            slideToClickedSlide: function () {
                var e, t = this, n = t.params, r = t.$wrapperEl, o = "auto" === n.slidesPerView ? t.slidesPerViewDynamic() : n.slidesPerView, s = t.clickedIndex;
                if (n.loop) {
                    if (t.animating)
                        return;
                    e = parseInt(i(t.clickedSlide).attr("data-swiper-slide-index"), 10),
                        n.centeredSlides ? s < t.loopedSlides - o / 2 || s > t.slides.length - t.loopedSlides + o / 2 ? (t.loopFix(),
                            s = r.children("." + n.slideClass + '[data-swiper-slide-index="' + e + '"]:not(.' + n.slideDuplicateClass + ")").eq(0).index(),
                            a.nextTick(function () {
                                t.slideTo(s)
                            })) : t.slideTo(s) : s > t.slides.length - o ? (t.loopFix(),
                                s = r.children("." + n.slideClass + '[data-swiper-slide-index="' + e + '"]:not(.' + n.slideDuplicateClass + ")").eq(0).index(),
                                a.nextTick(function () {
                                    t.slideTo(s)
                                })) : t.slideTo(s)
                } else
                    t.slideTo(s)
            }
        }, E = {
            loopCreate: function () {
                var t = this
                    , n = t.params
                    , r = t.$wrapperEl;
                r.children("." + n.slideClass + "." + n.slideDuplicateClass).remove();
                var o = r.children("." + n.slideClass);
                if (n.loopFillGroupWithBlank) {
                    var a = n.slidesPerGroup - o.length % n.slidesPerGroup;
                    if (a !== n.slidesPerGroup) {
                        for (var s = 0; s < a; s += 1) {
                            var l = i(e.createElement("div")).addClass(n.slideClass + " " + n.slideBlankClass);
                            r.append(l)
                        }
                        o = r.children("." + n.slideClass)
                    }
                }
                "auto" !== n.slidesPerView || n.loopedSlides || (n.loopedSlides = o.length),
                    t.loopedSlides = Math.ceil(parseFloat(n.loopedSlides || n.slidesPerView, 10)),
                    t.loopedSlides += n.loopAdditionalSlides,
                    t.loopedSlides > o.length && (t.loopedSlides = o.length);
                var c = []
                    , u = [];
                o.each(function (e, n) {
                    var r = i(n);
                    e < t.loopedSlides && u.push(n),
                        e < o.length && e >= o.length - t.loopedSlides && c.push(n),
                        r.attr("data-swiper-slide-index", e)
                });
                for (var d = 0; d < u.length; d += 1)
                    r.append(i(u[d].cloneNode(!0)).addClass(n.slideDuplicateClass));
                for (var p = c.length - 1; p >= 0; p -= 1)
                    r.prepend(i(c[p].cloneNode(!0)).addClass(n.slideDuplicateClass))
            },
            loopFix: function () {
                var e, t = this.activeIndex, n = this.slides, i = this.loopedSlides, r = this.allowSlidePrev, o = this.allowSlideNext, a = this.snapGrid, s = this.rtlTranslate;
                this.allowSlidePrev = !0,
                    this.allowSlideNext = !0;
                var l = -a[t] - this.getTranslate();
                t < i ? (e = n.length - 3 * i + t,
                    e += i,
                    this.slideTo(e, 0, !1, !0) && 0 !== l && this.setTranslate((s ? -this.translate : this.translate) - l)) : t >= n.length - i && (e = -n.length + t + i,
                        e += i,
                        this.slideTo(e, 0, !1, !0) && 0 !== l && this.setTranslate((s ? -this.translate : this.translate) - l)),
                    this.allowSlidePrev = r,
                    this.allowSlideNext = o
            },
            loopDestroy: function () {
                var e = this.$wrapperEl
                    , t = this.params
                    , n = this.slides;
                e.children("." + t.slideClass + "." + t.slideDuplicateClass + ",." + t.slideClass + "." + t.slideBlankClass).remove(),
                    n.removeAttr("data-swiper-slide-index")
            }
        }, I = {
            setGrabCursor: function (e) {
                if (!(s.touch || !this.params.simulateTouch || this.params.watchOverflow && this.isLocked || this.params.cssMode)) {
                    var t = this.el;
                    t.style.cursor = "move",
                        t.style.cursor = e ? "-webkit-grabbing" : "-webkit-grab",
                        t.style.cursor = e ? "-moz-grabbin" : "-moz-grab",
                        t.style.cursor = e ? "grabbing" : "grab"
                }
            },
            unsetGrabCursor: function () {
                s.touch || this.params.watchOverflow && this.isLocked || this.params.cssMode || (this.el.style.cursor = "")
            }
        }, M = {
            appendSlide: function (e) {
                var t = this.$wrapperEl
                    , n = this.params;
                if (n.loop && this.loopDestroy(),
                    "object" == typeof e && "length" in e)
                    for (var i = 0; i < e.length; i += 1)
                        e[i] && t.append(e[i]);
                else
                    t.append(e);
                n.loop && this.loopCreate(),
                    n.observer && s.observer || this.update()
            },
            prependSlide: function (e) {
                var t = this.params
                    , n = this.$wrapperEl
                    , i = this.activeIndex;
                t.loop && this.loopDestroy();
                var r = i + 1;
                if ("object" == typeof e && "length" in e) {
                    for (var o = 0; o < e.length; o += 1)
                        e[o] && n.prepend(e[o]);
                    r = i + e.length
                } else
                    n.prepend(e);
                t.loop && this.loopCreate(),
                    t.observer && s.observer || this.update(),
                    this.slideTo(r, 0, !1)
            },
            addSlide: function (e, t) {
                var n = this.$wrapperEl
                    , i = this.params
                    , r = this.activeIndex;
                i.loop && (r -= this.loopedSlides,
                    this.loopDestroy(),
                    this.slides = n.children("." + i.slideClass));
                var o = this.slides.length;
                if (e <= 0)
                    this.prependSlide(t);
                else if (e >= o)
                    this.appendSlide(t);
                else {
                    for (var a = r > e ? r + 1 : r, l = [], c = o - 1; c >= e; c -= 1) {
                        var u = this.slides.eq(c);
                        u.remove(),
                            l.unshift(u)
                    }
                    if ("object" == typeof t && "length" in t) {
                        for (var d = 0; d < t.length; d += 1)
                            t[d] && n.append(t[d]);
                        a = r > e ? r + t.length : r
                    } else
                        n.append(t);
                    for (var p = 0; p < l.length; p += 1)
                        n.append(l[p]);
                    i.loop && this.loopCreate(),
                        i.observer && s.observer || this.update(),
                        i.loop ? this.slideTo(a + this.loopedSlides, 0, !1) : this.slideTo(a, 0, !1)
                }
            },
            removeSlide: function (e) {
                var t = this.params
                    , n = this.$wrapperEl
                    , i = this.activeIndex;
                t.loop && (i -= this.loopedSlides,
                    this.loopDestroy(),
                    this.slides = n.children("." + t.slideClass));
                var r, o = i;
                if ("object" == typeof e && "length" in e) {
                    for (var a = 0; a < e.length; a += 1)
                        r = e[a],
                            this.slides[r] && this.slides.eq(r).remove(),
                            r < o && (o -= 1);
                    o = Math.max(o, 0)
                } else
                    r = e,
                        this.slides[r] && this.slides.eq(r).remove(),
                        r < o && (o -= 1),
                        o = Math.max(o, 0);
                t.loop && this.loopCreate(),
                    t.observer && s.observer || this.update(),
                    t.loop ? this.slideTo(o + this.loopedSlides, 0, !1) : this.slideTo(o, 0, !1)
            },
            removeAllSlides: function () {
                for (var e = [], t = 0; t < this.slides.length; t += 1)
                    e.push(t);
                this.removeSlide(e)
            }
        }, O = (u = t.navigator.platform,
            d = t.navigator.userAgent,
            p = {
                ios: !1,
                android: !1,
                androidChrome: !1,
                desktop: !1,
                iphone: !1,
                ipod: !1,
                ipad: !1,
                edge: !1,
                ie: !1,
                firefox: !1,
                macos: !1,
                windows: !1,
                cordova: !(!t.cordova && !t.phonegap),
                phonegap: !(!t.cordova && !t.phonegap),
                electron: !1
            },
            h = t.screen.width,
            f = t.screen.height,
            m = d.match(/(Android);?[\s\/]+([\d.]+)?/),
            g = d.match(/(iPad).*OS\s([\d_]+)/),
            v = d.match(/(iPod)(.*OS\s([\d_]+))?/),
            y = !g && d.match(/(iPhone\sOS|iOS)\s([\d_]+)/),
            b = d.indexOf("MSIE ") >= 0 || d.indexOf("Trident/") >= 0,
            w = d.indexOf("Edge/") >= 0,
            $ = d.indexOf("Gecko/") >= 0 && d.indexOf("Firefox/") >= 0,
            S = "Win32" === u,
            C = d.toLowerCase().indexOf("electron") >= 0,
            x = "MacIntel" === u,
            !g && x && s.touch && (1024 === h && 1366 === f || 834 === h && 1194 === f || 834 === h && 1112 === f || 768 === h && 1024 === f) && (g = d.match(/(Version)\/([\d.]+)/),
                x = !1),
            p.ie = b,
            p.edge = w,
            p.firefox = $,
            m && !S && (p.os = "android",
                p.osVersion = m[2],
                p.android = !0,
                p.androidChrome = d.toLowerCase().indexOf("chrome") >= 0),
            (g || y || v) && (p.os = "ios",
                p.ios = !0),
            y && !v && (p.osVersion = y[2].replace(/_/g, "."),
                p.iphone = !0),
            g && (p.osVersion = g[2].replace(/_/g, "."),
                p.ipad = !0),
            v && (p.osVersion = v[3] ? v[3].replace(/_/g, ".") : null,
                p.ipod = !0),
            p.ios && p.osVersion && d.indexOf("Version/") >= 0 && "10" === p.osVersion.split(".")[0] && (p.osVersion = d.toLowerCase().split("version/")[1].split(" ")[0]),
            p.webView = !(!(y || g || v) || !d.match(/.*AppleWebKit(?!.*Safari)/i) && !t.navigator.standalone) || t.matchMedia && t.matchMedia("(display-mode: standalone)").matches,
            p.webview = p.webView,
            p.standalone = p.webView,
            p.desktop = !(p.ios || p.android) || C,
            p.desktop && (p.electron = C,
                p.macos = x,
                p.windows = S,
                p.macos && (p.os = "macos"),
                p.windows && (p.os = "windows")),
            p.pixelRatio = t.devicePixelRatio || 1,
            p);
        function D(n) {
            var r = this.touchEventsData
                , o = this.params
                , s = this.touches;
            if (!this.animating || !o.preventInteractionOnTransition) {
                var l = n;
                l.originalEvent && (l = l.originalEvent);
                var c = i(l.target);
                if (("wrapper" !== o.touchEventsTarget || c.closest(this.wrapperEl).length) && (r.isTouchEvent = "touchstart" === l.type,
                    (r.isTouchEvent || !("which" in l) || 3 !== l.which) && !(!r.isTouchEvent && "button" in l && l.button > 0 || r.isTouched && r.isMoved)))
                    if (o.noSwiping && c.closest(o.noSwipingSelector ? o.noSwipingSelector : "." + o.noSwipingClass)[0])
                        this.allowClick = !0;
                    else if (!o.swipeHandler || c.closest(o.swipeHandler)[0]) {
                        s.currentX = "touchstart" === l.type ? l.targetTouches[0].pageX : l.pageX,
                            s.currentY = "touchstart" === l.type ? l.targetTouches[0].pageY : l.pageY;
                        var u = s.currentX
                            , d = s.currentY
                            , p = o.edgeSwipeDetection || o.iOSEdgeSwipeDetection
                            , h = o.edgeSwipeThreshold || o.iOSEdgeSwipeThreshold;
                        if (!p || !(u <= h || u >= t.screen.width - h)) {
                            if (a.extend(r, {
                                isTouched: !0,
                                isMoved: !1,
                                allowTouchCallbacks: !0,
                                isScrolling: void 0,
                                startMoving: void 0
                            }),
                                s.startX = u,
                                s.startY = d,
                                r.touchStartTime = a.now(),
                                this.allowClick = !0,
                                this.updateSize(),
                                this.swipeDirection = void 0,
                                o.threshold > 0 && (r.allowThresholdMove = !1),
                                "touchstart" !== l.type) {
                                var f = !0;
                                c.is(r.formElements) && (f = !1),
                                    e.activeElement && i(e.activeElement).is(r.formElements) && e.activeElement !== c[0] && e.activeElement.blur();
                                var m = f && this.allowTouchMove && o.touchStartPreventDefault;
                                (o.touchStartForcePreventDefault || m) && l.preventDefault()
                            }
                            this.emit("touchStart", l)
                        }
                    }
            }
        }
        function A(t) {
            var n = this.touchEventsData
                , r = this.params
                , o = this.touches
                , s = this.rtlTranslate
                , l = t;
            if (l.originalEvent && (l = l.originalEvent),
                n.isTouched) {
                if (!n.isTouchEvent || "mousemove" !== l.type) {
                    var c = "touchmove" === l.type && l.targetTouches && (l.targetTouches[0] || l.changedTouches[0])
                        , u = "touchmove" === l.type ? c.pageX : l.pageX
                        , d = "touchmove" === l.type ? c.pageY : l.pageY;
                    if (l.preventedByNestedSwiper)
                        return o.startX = u,
                            void (o.startY = d);
                    if (!this.allowTouchMove)
                        return this.allowClick = !1,
                            void (n.isTouched && (a.extend(o, {
                                startX: u,
                                startY: d,
                                currentX: u,
                                currentY: d
                            }),
                                n.touchStartTime = a.now()));
                    if (n.isTouchEvent && r.touchReleaseOnEdges && !r.loop)
                        if (this.isVertical()) {
                            if (d < o.startY && this.translate <= this.maxTranslate() || d > o.startY && this.translate >= this.minTranslate())
                                return n.isTouched = !1,
                                    void (n.isMoved = !1)
                        } else if (u < o.startX && this.translate <= this.maxTranslate() || u > o.startX && this.translate >= this.minTranslate())
                            return;
                    if (n.isTouchEvent && e.activeElement && l.target === e.activeElement && i(l.target).is(n.formElements))
                        return n.isMoved = !0,
                            void (this.allowClick = !1);
                    if (n.allowTouchCallbacks && this.emit("touchMove", l),
                        !(l.targetTouches && l.targetTouches.length > 1)) {
                        o.currentX = u,
                            o.currentY = d;
                        var p, h = o.currentX - o.startX, f = o.currentY - o.startY;
                        if (!(this.params.threshold && Math.sqrt(Math.pow(h, 2) + Math.pow(f, 2)) < this.params.threshold))
                            if (void 0 === n.isScrolling && (this.isHorizontal() && o.currentY === o.startY || this.isVertical() && o.currentX === o.startX ? n.isScrolling = !1 : h * h + f * f >= 25 && (p = 180 * Math.atan2(Math.abs(f), Math.abs(h)) / Math.PI,
                                n.isScrolling = this.isHorizontal() ? p > r.touchAngle : 90 - p > r.touchAngle)),
                                n.isScrolling && this.emit("touchMoveOpposite", l),
                                void 0 === n.startMoving && (o.currentX === o.startX && o.currentY === o.startY || (n.startMoving = !0)),
                                n.isScrolling)
                                n.isTouched = !1;
                            else if (n.startMoving) {
                                this.allowClick = !1,
                                    r.cssMode || l.preventDefault(),
                                    r.touchMoveStopPropagation && !r.nested && l.stopPropagation(),
                                    n.isMoved || (r.loop && this.loopFix(),
                                        n.startTranslate = this.getTranslate(),
                                        this.setTransition(0),
                                        this.animating && this.$wrapperEl.trigger("webkitTransitionEnd transitionend"),
                                        n.allowMomentumBounce = !1,
                                        !r.grabCursor || !0 !== this.allowSlideNext && !0 !== this.allowSlidePrev || this.setGrabCursor(!0),
                                        this.emit("sliderFirstMove", l)),
                                    this.emit("sliderMove", l),
                                    n.isMoved = !0;
                                var m = this.isHorizontal() ? h : f;
                                o.diff = m,
                                    m *= r.touchRatio,
                                    s && (m = -m),
                                    this.swipeDirection = m > 0 ? "prev" : "next",
                                    n.currentTranslate = m + n.startTranslate;
                                var g = !0
                                    , v = r.resistanceRatio;
                                if (r.touchReleaseOnEdges && (v = 0),
                                    m > 0 && n.currentTranslate > this.minTranslate() ? (g = !1,
                                        r.resistance && (n.currentTranslate = this.minTranslate() - 1 + Math.pow(-this.minTranslate() + n.startTranslate + m, v))) : m < 0 && n.currentTranslate < this.maxTranslate() && (g = !1,
                                            r.resistance && (n.currentTranslate = this.maxTranslate() + 1 - Math.pow(this.maxTranslate() - n.startTranslate - m, v))),
                                    g && (l.preventedByNestedSwiper = !0),
                                    !this.allowSlideNext && "next" === this.swipeDirection && n.currentTranslate < n.startTranslate && (n.currentTranslate = n.startTranslate),
                                    !this.allowSlidePrev && "prev" === this.swipeDirection && n.currentTranslate > n.startTranslate && (n.currentTranslate = n.startTranslate),
                                    r.threshold > 0) {
                                    if (!(Math.abs(m) > r.threshold || n.allowThresholdMove))
                                        return void (n.currentTranslate = n.startTranslate);
                                    if (!n.allowThresholdMove)
                                        return n.allowThresholdMove = !0,
                                            o.startX = o.currentX,
                                            o.startY = o.currentY,
                                            n.currentTranslate = n.startTranslate,
                                            void (o.diff = this.isHorizontal() ? o.currentX - o.startX : o.currentY - o.startY)
                                }
                                r.followFinger && !r.cssMode && ((r.freeMode || r.watchSlidesProgress || r.watchSlidesVisibility) && (this.updateActiveIndex(),
                                    this.updateSlidesClasses()),
                                    r.freeMode && (0 === n.velocities.length && n.velocities.push({
                                        position: o[this.isHorizontal() ? "startX" : "startY"],
                                        time: n.touchStartTime
                                    }),
                                        n.velocities.push({
                                            position: o[this.isHorizontal() ? "currentX" : "currentY"],
                                            time: a.now()
                                        })),
                                    this.updateProgress(n.currentTranslate),
                                    this.setTranslate(n.currentTranslate))
                            }
                    }
                }
            } else
                n.startMoving && n.isScrolling && this.emit("touchMoveOpposite", l)
        }
        function _(e) {
            var t = this
                , n = t.touchEventsData
                , i = t.params
                , r = t.touches
                , o = t.rtlTranslate
                , s = t.$wrapperEl
                , l = t.slidesGrid
                , c = t.snapGrid
                , u = e;
            if (u.originalEvent && (u = u.originalEvent),
                n.allowTouchCallbacks && t.emit("touchEnd", u),
                n.allowTouchCallbacks = !1,
                !n.isTouched)
                return n.isMoved && i.grabCursor && t.setGrabCursor(!1),
                    n.isMoved = !1,
                    void (n.startMoving = !1);
            i.grabCursor && n.isMoved && n.isTouched && (!0 === t.allowSlideNext || !0 === t.allowSlidePrev) && t.setGrabCursor(!1);
            var d, p = a.now(), h = p - n.touchStartTime;
            if (t.allowClick && (t.updateClickedSlide(u),
                t.emit("tap click", u),
                h < 300 && p - n.lastClickTime < 300 && t.emit("doubleTap doubleClick", u)),
                n.lastClickTime = a.now(),
                a.nextTick(function () {
                    t.destroyed || (t.allowClick = !0)
                }),
                !n.isTouched || !n.isMoved || !t.swipeDirection || 0 === r.diff || n.currentTranslate === n.startTranslate)
                return n.isTouched = !1,
                    n.isMoved = !1,
                    void (n.startMoving = !1);
            if (n.isTouched = !1,
                n.isMoved = !1,
                n.startMoving = !1,
                d = i.followFinger ? o ? t.translate : -t.translate : -n.currentTranslate,
                !i.cssMode)
                if (i.freeMode) {
                    if (d < -t.minTranslate())
                        return void t.slideTo(t.activeIndex);
                    if (d > -t.maxTranslate())
                        return void (t.slides.length < c.length ? t.slideTo(c.length - 1) : t.slideTo(t.slides.length - 1));
                    if (i.freeModeMomentum) {
                        if (n.velocities.length > 1) {
                            var f = n.velocities.pop()
                                , m = n.velocities.pop()
                                , g = f.position - m.position
                                , v = f.time - m.time;
                            t.velocity = g / v,
                                t.velocity /= 2,
                                Math.abs(t.velocity) < i.freeModeMinimumVelocity && (t.velocity = 0),
                                (v > 150 || a.now() - f.time > 300) && (t.velocity = 0)
                        } else
                            t.velocity = 0;
                        t.velocity *= i.freeModeMomentumVelocityRatio,
                            n.velocities.length = 0;
                        var y = 1e3 * i.freeModeMomentumRatio
                            , b = t.velocity * y
                            , w = t.translate + b;
                        o && (w = -w);
                        var $, S, C = !1, x = 20 * Math.abs(t.velocity) * i.freeModeMomentumBounceRatio;
                        if (w < t.maxTranslate())
                            i.freeModeMomentumBounce ? (w + t.maxTranslate() < -x && (w = t.maxTranslate() - x),
                                $ = t.maxTranslate(),
                                C = !0,
                                n.allowMomentumBounce = !0) : w = t.maxTranslate(),
                                i.loop && i.centeredSlides && (S = !0);
                        else if (w > t.minTranslate())
                            i.freeModeMomentumBounce ? (w - t.minTranslate() > x && (w = t.minTranslate() + x),
                                $ = t.minTranslate(),
                                C = !0,
                                n.allowMomentumBounce = !0) : w = t.minTranslate(),
                                i.loop && i.centeredSlides && (S = !0);
                        else if (i.freeModeSticky) {
                            for (var T, k = 0; k < c.length; k += 1)
                                if (c[k] > -w) {
                                    T = k;
                                    break
                                }
                            w = -(w = Math.abs(c[T] - w) < Math.abs(c[T - 1] - w) || "next" === t.swipeDirection ? c[T] : c[T - 1])
                        }
                        if (S && t.once("transitionEnd", function () {
                            t.loopFix()
                        }),
                            0 !== t.velocity) {
                            if (y = o ? Math.abs((-w - t.translate) / t.velocity) : Math.abs((w - t.translate) / t.velocity),
                                i.freeModeSticky) {
                                var P = Math.abs((o ? -w : w) - t.translate)
                                    , E = t.slidesSizesGrid[t.activeIndex];
                                y = P < E ? i.speed : P < 2 * E ? 1.5 * i.speed : 2.5 * i.speed
                            }
                        } else if (i.freeModeSticky)
                            return void t.slideToClosest();
                        i.freeModeMomentumBounce && C ? (t.updateProgress($),
                            t.setTransition(y),
                            t.setTranslate(w),
                            t.transitionStart(!0, t.swipeDirection),
                            t.animating = !0,
                            s.transitionEnd(function () {
                                t && !t.destroyed && n.allowMomentumBounce && (t.emit("momentumBounce"),
                                    t.setTransition(i.speed),
                                    t.setTranslate($),
                                    s.transitionEnd(function () {
                                        t && !t.destroyed && t.transitionEnd()
                                    }))
                            })) : t.velocity ? (t.updateProgress(w),
                                t.setTransition(y),
                                t.setTranslate(w),
                                t.transitionStart(!0, t.swipeDirection),
                                t.animating || (t.animating = !0,
                                    s.transitionEnd(function () {
                                        t && !t.destroyed && t.transitionEnd()
                                    }))) : t.updateProgress(w),
                            t.updateActiveIndex(),
                            t.updateSlidesClasses()
                    } else if (i.freeModeSticky)
                        return void t.slideToClosest();
                    (!i.freeModeMomentum || h >= i.longSwipesMs) && (t.updateProgress(),
                        t.updateActiveIndex(),
                        t.updateSlidesClasses())
                } else {
                    for (var I = 0, M = t.slidesSizesGrid[0], O = 0; O < l.length; O += i.slidesPerGroup)
                        void 0 !== l[O + i.slidesPerGroup] ? d >= l[O] && d < l[O + i.slidesPerGroup] && (I = O,
                            M = l[O + i.slidesPerGroup] - l[O]) : d >= l[O] && (I = O,
                                M = l[l.length - 1] - l[l.length - 2]);
                    var D = (d - l[I]) / M;
                    if (h > i.longSwipesMs) {
                        if (!i.longSwipes)
                            return void t.slideTo(t.activeIndex);
                        "next" === t.swipeDirection && (D >= i.longSwipesRatio ? t.slideTo(I + i.slidesPerGroup) : t.slideTo(I)),
                            "prev" === t.swipeDirection && (D > 1 - i.longSwipesRatio ? t.slideTo(I + i.slidesPerGroup) : t.slideTo(I))
                    } else {
                        if (!i.shortSwipes)
                            return void t.slideTo(t.activeIndex);
                        !t.navigation || u.target !== t.navigation.nextEl && u.target !== t.navigation.prevEl ? ("next" === t.swipeDirection && t.slideTo(I + i.slidesPerGroup),
                            "prev" === t.swipeDirection && t.slideTo(I)) : u.target === t.navigation.nextEl ? t.slideTo(I + i.slidesPerGroup) : t.slideTo(I)
                    }
                }
        }
        function R() {
            var e = this.params
                , t = this.el;
            if (!t || 0 !== t.offsetWidth) {
                e.breakpoints && this.setBreakpoint();
                var n = this.allowSlideNext
                    , i = this.allowSlidePrev
                    , r = this.snapGrid;
                this.allowSlideNext = !0,
                    this.allowSlidePrev = !0,
                    this.updateSize(),
                    this.updateSlides(),
                    this.updateSlidesClasses(),
                    ("auto" === e.slidesPerView || e.slidesPerView > 1) && this.isEnd && !this.params.centeredSlides ? this.slideTo(this.slides.length - 1, 0, !1, !0) : this.slideTo(this.activeIndex, 0, !1, !0),
                    this.autoplay && this.autoplay.running && this.autoplay.paused && this.autoplay.run(),
                    this.allowSlidePrev = i,
                    this.allowSlideNext = n,
                    this.params.watchOverflow && r !== this.snapGrid && this.checkOverflow()
            }
        }
        var L = !1;
        function U() { }
        var N = {
            init: !0,
            direction: "horizontal",
            touchEventsTarget: "container",
            initialSlide: 0,
            speed: 300,
            cssMode: !1,
            preventInteractionOnTransition: !1,
            edgeSwipeDetection: !1,
            edgeSwipeThreshold: 20,
            freeMode: !1,
            freeModeMomentum: !0,
            freeModeMomentumRatio: 1,
            freeModeMomentumBounce: !0,
            freeModeMomentumBounceRatio: 1,
            freeModeMomentumVelocityRatio: 1,
            freeModeSticky: !1,
            freeModeMinimumVelocity: .02,
            autoHeight: !1,
            setWrapperSize: !1,
            virtualTranslate: !1,
            effect: "slide",
            breakpoints: void 0,
            spaceBetween: 0,
            slidesPerView: 1,
            slidesPerColumn: 1,
            slidesPerColumnFill: "column",
            slidesPerGroup: 1,
            centeredSlides: !1,
            centeredSlidesBounds: !1,
            slidesOffsetBefore: 0,
            slidesOffsetAfter: 0,
            normalizeSlideIndex: !0,
            centerInsufficientSlides: !1,
            watchOverflow: !1,
            roundLengths: !1,
            touchRatio: 1,
            touchAngle: 45,
            simulateTouch: !0,
            shortSwipes: !0,
            longSwipes: !0,
            longSwipesRatio: .5,
            longSwipesMs: 300,
            followFinger: !0,
            allowTouchMove: !0,
            threshold: 0,
            touchMoveStopPropagation: !1,
            touchStartPreventDefault: !0,
            touchStartForcePreventDefault: !1,
            touchReleaseOnEdges: !1,
            uniqueNavElements: !0,
            resistance: !0,
            resistanceRatio: .85,
            watchSlidesProgress: !1,
            watchSlidesVisibility: !1,
            grabCursor: !1,
            preventClicks: !0,
            preventClicksPropagation: !0,
            slideToClickedSlide: !1,
            preloadImages: !0,
            updateOnImagesReady: !0,
            loop: !1,
            loopAdditionalSlides: 0,
            loopedSlides: null,
            loopFillGroupWithBlank: !1,
            allowSlidePrev: !0,
            allowSlideNext: !0,
            swipeHandler: null,
            noSwiping: !0,
            noSwipingClass: "swiper-no-swiping",
            noSwipingSelector: null,
            passiveListeners: !0,
            containerModifierClass: "swiper-container-",
            slideClass: "swiper-slide",
            slideBlankClass: "swiper-slide-invisible-blank",
            slideActiveClass: "swiper-slide-active",
            slideDuplicateActiveClass: "swiper-slide-duplicate-active",
            slideVisibleClass: "swiper-slide-visible",
            slideDuplicateClass: "swiper-slide-duplicate",
            slideNextClass: "swiper-slide-next",
            slideDuplicateNextClass: "swiper-slide-duplicate-next",
            slidePrevClass: "swiper-slide-prev",
            slideDuplicatePrevClass: "swiper-slide-duplicate-prev",
            wrapperClass: "swiper-wrapper",
            runCallbacksOnInit: !0
        }
            , j = {
                update: T,
                translate: k,
                transition: {
                    setTransition: function (e, t) {
                        this.params.cssMode || this.$wrapperEl.transition(e),
                            this.emit("setTransition", e, t)
                    },
                    transitionStart: function (e, t) {
                        void 0 === e && (e = !0);
                        var n = this.activeIndex
                            , i = this.params
                            , r = this.previousIndex;
                        if (!i.cssMode) {
                            i.autoHeight && this.updateAutoHeight();
                            var o = t;
                            if (o || (o = n > r ? "next" : n < r ? "prev" : "reset"),
                                this.emit("transitionStart"),
                                e && n !== r) {
                                if ("reset" === o)
                                    return void this.emit("slideResetTransitionStart");
                                this.emit("slideChangeTransitionStart"),
                                    "next" === o ? this.emit("slideNextTransitionStart") : this.emit("slidePrevTransitionStart")
                            }
                        }
                    },
                    transitionEnd: function (e, t) {
                        void 0 === e && (e = !0);
                        var n = this.activeIndex
                            , i = this.previousIndex
                            , r = this.params;
                        if (this.animating = !1,
                            !r.cssMode) {
                            this.setTransition(0);
                            var o = t;
                            if (o || (o = n > i ? "next" : n < i ? "prev" : "reset"),
                                this.emit("transitionEnd"),
                                e && n !== i) {
                                if ("reset" === o)
                                    return void this.emit("slideResetTransitionEnd");
                                this.emit("slideChangeTransitionEnd"),
                                    "next" === o ? this.emit("slideNextTransitionEnd") : this.emit("slidePrevTransitionEnd")
                            }
                        }
                    }
                },
                slide: P,
                loop: E,
                grabCursor: I,
                manipulation: M,
                events: {
                    attachEvents: function () {
                        var t = this.params
                            , n = this.touchEvents
                            , i = this.el
                            , r = this.wrapperEl;
                        this.onTouchStart = D.bind(this),
                            this.onTouchMove = A.bind(this),
                            this.onTouchEnd = _.bind(this),
                            t.cssMode && (this.onScroll = function () {
                                var e = this.wrapperEl;
                                this.previousTranslate = this.translate,
                                    this.translate = this.isHorizontal() ? -e.scrollLeft : -e.scrollTop,
                                    -0 === this.translate && (this.translate = 0),
                                    this.updateActiveIndex(),
                                    this.updateSlidesClasses();
                                var t = this.maxTranslate() - this.minTranslate();
                                (0 === t ? 0 : (this.translate - this.minTranslate()) / t) !== this.progress && this.updateProgress(this.translate),
                                    this.emit("setTranslate", this.translate, !1)
                            }
                                .bind(this)),
                            this.onClick = function (e) {
                                this.allowClick || (this.params.preventClicks && e.preventDefault(),
                                    this.params.preventClicksPropagation && this.animating && (e.stopPropagation(),
                                        e.stopImmediatePropagation()))
                            }
                                .bind(this);
                        var o = !!t.nested;
                        if (!s.touch && s.pointerEvents)
                            i.addEventListener(n.start, this.onTouchStart, !1),
                                e.addEventListener(n.move, this.onTouchMove, o),
                                e.addEventListener(n.end, this.onTouchEnd, !1);
                        else {
                            if (s.touch) {
                                var a = !("touchstart" !== n.start || !s.passiveListener || !t.passiveListeners) && {
                                    passive: !0,
                                    capture: !1
                                };
                                i.addEventListener(n.start, this.onTouchStart, a),
                                    i.addEventListener(n.move, this.onTouchMove, s.passiveListener ? {
                                        passive: !1,
                                        capture: o
                                    } : o),
                                    i.addEventListener(n.end, this.onTouchEnd, a),
                                    n.cancel && i.addEventListener(n.cancel, this.onTouchEnd, a),
                                    L || (e.addEventListener("touchstart", U),
                                        L = !0)
                            }
                            (t.simulateTouch && !O.ios && !O.android || t.simulateTouch && !s.touch && O.ios) && (i.addEventListener("mousedown", this.onTouchStart, !1),
                                e.addEventListener("mousemove", this.onTouchMove, o),
                                e.addEventListener("mouseup", this.onTouchEnd, !1))
                        }
                        (t.preventClicks || t.preventClicksPropagation) && i.addEventListener("click", this.onClick, !0),
                            t.cssMode && r.addEventListener("scroll", this.onScroll),
                            this.on(O.ios || O.android ? "resize orientationchange observerUpdate" : "resize observerUpdate", R, !0)
                    },
                    detachEvents: function () {
                        var t = this.params
                            , n = this.touchEvents
                            , i = this.el
                            , r = this.wrapperEl
                            , o = !!t.nested;
                        if (!s.touch && s.pointerEvents)
                            i.removeEventListener(n.start, this.onTouchStart, !1),
                                e.removeEventListener(n.move, this.onTouchMove, o),
                                e.removeEventListener(n.end, this.onTouchEnd, !1);
                        else {
                            if (s.touch) {
                                var a = !("onTouchStart" !== n.start || !s.passiveListener || !t.passiveListeners) && {
                                    passive: !0,
                                    capture: !1
                                };
                                i.removeEventListener(n.start, this.onTouchStart, a),
                                    i.removeEventListener(n.move, this.onTouchMove, o),
                                    i.removeEventListener(n.end, this.onTouchEnd, a),
                                    n.cancel && i.removeEventListener(n.cancel, this.onTouchEnd, a)
                            }
                            (t.simulateTouch && !O.ios && !O.android || t.simulateTouch && !s.touch && O.ios) && (i.removeEventListener("mousedown", this.onTouchStart, !1),
                                e.removeEventListener("mousemove", this.onTouchMove, o),
                                e.removeEventListener("mouseup", this.onTouchEnd, !1))
                        }
                        (t.preventClicks || t.preventClicksPropagation) && i.removeEventListener("click", this.onClick, !0),
                            t.cssMode && r.removeEventListener("scroll", this.onScroll),
                            this.off(O.ios || O.android ? "resize orientationchange observerUpdate" : "resize observerUpdate", R)
                    }
                },
                breakpoints: {
                    setBreakpoint: function () {
                        var e = this.activeIndex
                            , t = this.initialized
                            , n = this.loopedSlides;
                        void 0 === n && (n = 0);
                        var i = this.params
                            , r = this.$el
                            , o = i.breakpoints;
                        if (o && (!o || 0 !== Object.keys(o).length)) {
                            var s = this.getBreakpoint(o);
                            if (s && this.currentBreakpoint !== s) {
                                var l = s in o ? o[s] : void 0;
                                l && ["slidesPerView", "spaceBetween", "slidesPerGroup", "slidesPerColumn"].forEach(function (e) {
                                    var t = l[e];
                                    void 0 !== t && (l[e] = "slidesPerView" !== e || "AUTO" !== t && "auto" !== t ? "slidesPerView" === e ? parseFloat(t) : parseInt(t, 10) : "auto")
                                });
                                var c = l || this.originalParams
                                    , u = i.slidesPerColumn > 1
                                    , d = c.slidesPerColumn > 1;
                                u && !d ? r.removeClass(i.containerModifierClass + "multirow " + i.containerModifierClass + "multirow-column") : !u && d && (r.addClass(i.containerModifierClass + "multirow"),
                                    "column" === c.slidesPerColumnFill && r.addClass(i.containerModifierClass + "multirow-column"));
                                var p = c.direction && c.direction !== i.direction
                                    , h = i.loop && (c.slidesPerView !== i.slidesPerView || p);
                                p && t && this.changeDirection(),
                                    a.extend(this.params, c),
                                    a.extend(this, {
                                        allowTouchMove: this.params.allowTouchMove,
                                        allowSlideNext: this.params.allowSlideNext,
                                        allowSlidePrev: this.params.allowSlidePrev
                                    }),
                                    this.currentBreakpoint = s,
                                    h && t && (this.loopDestroy(),
                                        this.loopCreate(),
                                        this.updateSlides(),
                                        this.slideTo(e - n + this.loopedSlides, 0, !1)),
                                    this.emit("breakpoint", c)
                            }
                        }
                    },
                    getBreakpoint: function (e) {
                        if (e) {
                            var n = !1
                                , i = [];
                            Object.keys(e).forEach(function (e) {
                                i.push(e)
                            }),
                                i.sort(function (e, t) {
                                    return parseInt(e, 10) - parseInt(t, 10)
                                });
                            for (var r = 0; r < i.length; r += 1) {
                                var o = i[r];
                                o <= t.innerWidth && (n = o)
                            }
                            return n || "max"
                        }
                    }
                },
                checkOverflow: {
                    checkOverflow: function () {
                        var e = this.params
                            , t = this.isLocked
                            , n = this.slides.length > 0 && e.slidesOffsetBefore + e.spaceBetween * (this.slides.length - 1) + this.slides[0].offsetWidth * this.slides.length;
                        e.slidesOffsetBefore && e.slidesOffsetAfter && n ? this.isLocked = n <= this.size : this.isLocked = 1 === this.snapGrid.length,
                            this.allowSlideNext = !this.isLocked,
                            this.allowSlidePrev = !this.isLocked,
                            t !== this.isLocked && this.emit(this.isLocked ? "lock" : "unlock"),
                            t && t !== this.isLocked && (this.isEnd = !1,
                                this.navigation.update())
                    }
                },
                classes: {
                    addClasses: function () {
                        var e = this.classNames
                            , t = this.params
                            , n = this.rtl
                            , i = this.$el
                            , r = [];
                        r.push("initialized"),
                            r.push(t.direction),
                            t.freeMode && r.push("free-mode"),
                            t.autoHeight && r.push("autoheight"),
                            n && r.push("rtl"),
                            t.slidesPerColumn > 1 && (r.push("multirow"),
                                "column" === t.slidesPerColumnFill && r.push("multirow-column")),
                            O.android && r.push("android"),
                            O.ios && r.push("ios"),
                            t.cssMode && r.push("css-mode"),
                            r.forEach(function (n) {
                                e.push(t.containerModifierClass + n)
                            }),
                            i.addClass(e.join(" "))
                    },
                    removeClasses: function () {
                        var e = this.$el
                            , t = this.classNames;
                        e.removeClass(t.join(" "))
                    }
                },
                images: {
                    loadImage: function (e, n, i, r, o, a) {
                        var s;
                        function l() {
                            a && a()
                        }
                        e.complete && o ? l() : n ? ((s = new t.Image).onload = l,
                            s.onerror = l,
                            r && (s.sizes = r),
                            i && (s.srcset = i),
                            n && (s.src = n)) : l()
                    },
                    preloadImages: function () {
                        var e = this;
                        function t() {
                            null != e && e && !e.destroyed && (void 0 !== e.imagesLoaded && (e.imagesLoaded += 1),
                                e.imagesLoaded === e.imagesToLoad.length && (e.params.updateOnImagesReady && e.update(),
                                    e.emit("imagesReady")))
                        }
                        e.imagesToLoad = e.$el.find("img");
                        for (var n = 0; n < e.imagesToLoad.length; n += 1) {
                            var i = e.imagesToLoad[n];
                            e.loadImage(i, i.currentSrc || i.getAttribute("src"), i.srcset || i.getAttribute("srcset"), i.sizes || i.getAttribute("sizes"), !0, t)
                        }
                    }
                }
            }
            , F = {}
            , B = function (e) {
                function t() {
                    for (var n, r, o, l = [], c = arguments.length; c--;)
                        l[c] = arguments[c];
                    1 === l.length && l[0].constructor && l[0].constructor === Object ? o = l[0] : (r = (n = l)[0],
                        o = n[1]),
                        o || (o = {}),
                        o = a.extend({}, o),
                        r && !o.el && (o.el = r),
                        e.call(this, o),
                        Object.keys(j).forEach(function (e) {
                            Object.keys(j[e]).forEach(function (n) {
                                t.prototype[n] || (t.prototype[n] = j[e][n])
                            })
                        });
                    var u = this;
                    void 0 === u.modules && (u.modules = {}),
                        Object.keys(u.modules).forEach(function (e) {
                            var t = u.modules[e];
                            if (t.params) {
                                var n = Object.keys(t.params)[0]
                                    , i = t.params[n];
                                if ("object" != typeof i || null === i)
                                    return;
                                if (!(n in o && "enabled" in i))
                                    return;
                                !0 === o[n] && (o[n] = {
                                    enabled: !0
                                }),
                                    "object" != typeof o[n] || "enabled" in o[n] || (o[n].enabled = !0),
                                    o[n] || (o[n] = {
                                        enabled: !1
                                    })
                            }
                        });
                    var d = a.extend({}, N);
                    u.useModulesParams(d),
                        u.params = a.extend({}, d, F, o),
                        u.originalParams = a.extend({}, u.params),
                        u.passedParams = a.extend({}, o),
                        u.$ = i;
                    var p = i(u.params.el);
                    if (r = p[0]) {
                        if (p.length > 1) {
                            var h = [];
                            return p.each(function (e, n) {
                                var i = a.extend({}, o, {
                                    el: n
                                });
                                h.push(new t(i))
                            }),
                                h
                        }
                        var f, m, g;
                        return r.swiper = u,
                            p.data("swiper", u),
                            r && r.shadowRoot && r.shadowRoot.querySelector ? (f = i(r.shadowRoot.querySelector("." + u.params.wrapperClass))).children = function (e) {
                                return p.children(e)
                            }
                                : f = p.children("." + u.params.wrapperClass),
                            a.extend(u, {
                                $el: p,
                                el: r,
                                $wrapperEl: f,
                                wrapperEl: f[0],
                                classNames: [],
                                slides: i(),
                                slidesGrid: [],
                                snapGrid: [],
                                slidesSizesGrid: [],
                                isHorizontal: function () {
                                    return "horizontal" === u.params.direction
                                },
                                isVertical: function () {
                                    return "vertical" === u.params.direction
                                },
                                rtl: "rtl" === r.dir.toLowerCase() || "rtl" === p.css("direction"),
                                rtlTranslate: "horizontal" === u.params.direction && ("rtl" === r.dir.toLowerCase() || "rtl" === p.css("direction")),
                                wrongRTL: "-webkit-box" === f.css("display"),
                                activeIndex: 0,
                                realIndex: 0,
                                isBeginning: !0,
                                isEnd: !1,
                                translate: 0,
                                previousTranslate: 0,
                                progress: 0,
                                velocity: 0,
                                animating: !1,
                                allowSlideNext: u.params.allowSlideNext,
                                allowSlidePrev: u.params.allowSlidePrev,
                                touchEvents: (m = ["touchstart", "touchmove", "touchend", "touchcancel"],
                                    g = ["mousedown", "mousemove", "mouseup"],
                                    s.pointerEvents && (g = ["pointerdown", "pointermove", "pointerup"]),
                                    u.touchEventsTouch = {
                                        start: m[0],
                                        move: m[1],
                                        end: m[2],
                                        cancel: m[3]
                                    },
                                    u.touchEventsDesktop = {
                                        start: g[0],
                                        move: g[1],
                                        end: g[2]
                                    },
                                    s.touch || !u.params.simulateTouch ? u.touchEventsTouch : u.touchEventsDesktop),
                                touchEventsData: {
                                    isTouched: void 0,
                                    isMoved: void 0,
                                    allowTouchCallbacks: void 0,
                                    touchStartTime: void 0,
                                    isScrolling: void 0,
                                    currentTranslate: void 0,
                                    startTranslate: void 0,
                                    allowThresholdMove: void 0,
                                    formElements: "input, select, option, textarea, button, video",
                                    lastClickTime: a.now(),
                                    clickTimeout: void 0,
                                    velocities: [],
                                    allowMomentumBounce: void 0,
                                    isTouchEvent: void 0,
                                    startMoving: void 0
                                },
                                allowClick: !0,
                                allowTouchMove: u.params.allowTouchMove,
                                touches: {
                                    startX: 0,
                                    startY: 0,
                                    currentX: 0,
                                    currentY: 0,
                                    diff: 0
                                },
                                imagesToLoad: [],
                                imagesLoaded: 0
                            }),
                            u.useModules(),
                            u.params.init && u.init(),
                            u
                    }
                }
                e && (t.__proto__ = e),
                    t.prototype = Object.create(e && e.prototype),
                    t.prototype.constructor = t;
                var n = {
                    extendedDefaults: {
                        configurable: !0
                    },
                    defaults: {
                        configurable: !0
                    },
                    Class: {
                        configurable: !0
                    },
                    $: {
                        configurable: !0
                    }
                };
                return t.prototype.slidesPerViewDynamic = function () {
                    var e = this.params
                        , t = this.slides
                        , n = this.slidesGrid
                        , i = this.size
                        , r = this.activeIndex
                        , o = 1;
                    if (e.centeredSlides) {
                        for (var a, s = t[r].swiperSlideSize, l = r + 1; l < t.length; l += 1)
                            t[l] && !a && (o += 1,
                                (s += t[l].swiperSlideSize) > i && (a = !0));
                        for (var c = r - 1; c >= 0; c -= 1)
                            t[c] && !a && (o += 1,
                                (s += t[c].swiperSlideSize) > i && (a = !0))
                    } else
                        for (var u = r + 1; u < t.length; u += 1)
                            n[u] - n[r] < i && (o += 1);
                    return o
                }
                    ,
                    t.prototype.update = function () {
                        var e = this;
                        if (e && !e.destroyed) {
                            var t = e.snapGrid
                                , n = e.params;
                            n.breakpoints && e.setBreakpoint(),
                                e.updateSize(),
                                e.updateSlides(),
                                e.updateProgress(),
                                e.updateSlidesClasses(),
                                e.params.freeMode ? (i(),
                                    e.params.autoHeight && e.updateAutoHeight()) : (("auto" === e.params.slidesPerView || e.params.slidesPerView > 1) && e.isEnd && !e.params.centeredSlides ? e.slideTo(e.slides.length - 1, 0, !1, !0) : e.slideTo(e.activeIndex, 0, !1, !0)) || i(),
                                n.watchOverflow && t !== e.snapGrid && e.checkOverflow(),
                                e.emit("update")
                        }
                        function i() {
                            var t = e.rtlTranslate ? -1 * e.translate : e.translate
                                , n = Math.min(Math.max(t, e.maxTranslate()), e.minTranslate());
                            e.setTranslate(n),
                                e.updateActiveIndex(),
                                e.updateSlidesClasses()
                        }
                    }
                    ,
                    t.prototype.changeDirection = function (e, t) {
                        void 0 === t && (t = !0);
                        var n = this.params.direction;
                        return e || (e = "horizontal" === n ? "vertical" : "horizontal"),
                            e === n || "horizontal" !== e && "vertical" !== e ? this : (this.$el.removeClass("" + this.params.containerModifierClass + n).addClass("" + this.params.containerModifierClass + e),
                                this.params.direction = e,
                                this.slides.each(function (t, n) {
                                    "vertical" === e ? n.style.width = "" : n.style.height = ""
                                }),
                                this.emit("changeDirection"),
                                t && this.update(),
                                this)
                    }
                    ,
                    t.prototype.init = function () {
                        this.initialized || (this.emit("beforeInit"),
                            this.params.breakpoints && this.setBreakpoint(),
                            this.addClasses(),
                            this.params.loop && this.loopCreate(),
                            this.updateSize(),
                            this.updateSlides(),
                            this.params.watchOverflow && this.checkOverflow(),
                            this.params.grabCursor && this.setGrabCursor(),
                            this.params.preloadImages && this.preloadImages(),
                            this.params.loop ? this.slideTo(this.params.initialSlide + this.loopedSlides, 0, this.params.runCallbacksOnInit) : this.slideTo(this.params.initialSlide, 0, this.params.runCallbacksOnInit),
                            this.attachEvents(),
                            this.initialized = !0,
                            this.emit("init"))
                    }
                    ,
                    t.prototype.destroy = function (e, t) {
                        void 0 === e && (e = !0),
                            void 0 === t && (t = !0);
                        var n = this
                            , i = n.params
                            , r = n.$el
                            , o = n.$wrapperEl
                            , s = n.slides;
                        return void 0 === n.params || n.destroyed ? null : (n.emit("beforeDestroy"),
                            n.initialized = !1,
                            n.detachEvents(),
                            i.loop && n.loopDestroy(),
                            t && (n.removeClasses(),
                                r.removeAttr("style"),
                                o.removeAttr("style"),
                                s && s.length && s.removeClass([i.slideVisibleClass, i.slideActiveClass, i.slideNextClass, i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),
                            n.emit("destroy"),
                            Object.keys(n.eventsListeners).forEach(function (e) {
                                n.off(e)
                            }),
                            !1 !== e && (n.$el[0].swiper = null,
                                n.$el.data("swiper", null),
                                a.deleteProps(n)),
                            n.destroyed = !0,
                            null)
                    }
                    ,
                    t.extendDefaults = function (e) {
                        a.extend(F, e)
                    }
                    ,
                    n.extendedDefaults.get = function () {
                        return F
                    }
                    ,
                    n.defaults.get = function () {
                        return N
                    }
                    ,
                    n.Class.get = function () {
                        return e
                    }
                    ,
                    n.$.get = function () {
                        return i
                    }
                    ,
                    Object.defineProperties(t, n),
                    t
            }(l)
            , V = {
                name: "device",
                proto: {
                    device: O
                },
                static: {
                    device: O
                }
            }
            , z = {
                name: "support",
                proto: {
                    support: s
                },
                static: {
                    support: s
                }
            }
            , H = {
                isEdge: !!t.navigator.userAgent.match(/Edge/g),
                isSafari: function () {
                    var e = t.navigator.userAgent.toLowerCase();
                    return e.indexOf("safari") >= 0 && e.indexOf("chrome") < 0 && e.indexOf("android") < 0
                }(),
                isUiWebView: /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)
            }
            , W = {
                name: "browser",
                proto: {
                    browser: H
                },
                static: {
                    browser: H
                }
            }
            , q = {
                name: "resize",
                create: function () {
                    var e = this;
                    a.extend(e, {
                        resize: {
                            resizeHandler: function () {
                                e && !e.destroyed && e.initialized && (e.emit("beforeResize"),
                                    e.emit("resize"))
                            },
                            orientationChangeHandler: function () {
                                e && !e.destroyed && e.initialized && e.emit("orientationchange")
                            }
                        }
                    })
                },
                on: {
                    init: function () {
                        t.addEventListener("resize", this.resize.resizeHandler),
                            t.addEventListener("orientationchange", this.resize.orientationChangeHandler)
                    },
                    destroy: function () {
                        t.removeEventListener("resize", this.resize.resizeHandler),
                            t.removeEventListener("orientationchange", this.resize.orientationChangeHandler)
                    }
                }
            }
            , G = {
                func: t.MutationObserver || t.WebkitMutationObserver,
                attach: function (e, n) {
                    void 0 === n && (n = {});
                    var i = this
                        , r = new (0,
                            G.func)(function (e) {
                                if (1 !== e.length) {
                                    var n = function () {
                                        i.emit("observerUpdate", e[0])
                                    };
                                    t.requestAnimationFrame ? t.requestAnimationFrame(n) : t.setTimeout(n, 0)
                                } else
                                    i.emit("observerUpdate", e[0])
                            }
                            );
                    r.observe(e, {
                        attributes: void 0 === n.attributes || n.attributes,
                        childList: void 0 === n.childList || n.childList,
                        characterData: void 0 === n.characterData || n.characterData
                    }),
                        i.observer.observers.push(r)
                },
                init: function () {
                    if (s.observer && this.params.observer) {
                        if (this.params.observeParents)
                            for (var e = this.$el.parents(), t = 0; t < e.length; t += 1)
                                this.observer.attach(e[t]);
                        this.observer.attach(this.$el[0], {
                            childList: this.params.observeSlideChildren
                        }),
                            this.observer.attach(this.$wrapperEl[0], {
                                attributes: !1
                            })
                    }
                },
                destroy: function () {
                    this.observer.observers.forEach(function (e) {
                        e.disconnect()
                    }),
                        this.observer.observers = []
                }
            }
            , Y = {
                name: "observer",
                params: {
                    observer: !1,
                    observeParents: !1,
                    observeSlideChildren: !1
                },
                create: function () {
                    a.extend(this, {
                        observer: {
                            init: G.init.bind(this),
                            attach: G.attach.bind(this),
                            destroy: G.destroy.bind(this),
                            observers: []
                        }
                    })
                },
                on: {
                    init: function () {
                        this.observer.init()
                    },
                    destroy: function () {
                        this.observer.destroy()
                    }
                }
            }
            , X = {
                update: function (e) {
                    var t = this
                        , n = t.params
                        , i = n.slidesPerView
                        , r = n.slidesPerGroup
                        , o = n.centeredSlides
                        , s = t.params.virtual
                        , l = s.addSlidesBefore
                        , c = s.addSlidesAfter
                        , u = t.virtual
                        , d = u.from
                        , p = u.to
                        , h = u.slides
                        , f = u.slidesGrid
                        , m = u.renderSlide
                        , g = u.offset;
                    t.updateActiveIndex();
                    var v, y, b, w = t.activeIndex || 0;
                    v = t.rtlTranslate ? "right" : t.isHorizontal() ? "left" : "top",
                        o ? (y = Math.floor(i / 2) + r + l,
                            b = Math.floor(i / 2) + r + c) : (y = i + (r - 1) + l,
                                b = r + c);
                    var $ = Math.max((w || 0) - b, 0)
                        , S = Math.min((w || 0) + y, h.length - 1)
                        , C = (t.slidesGrid[$] || 0) - (t.slidesGrid[0] || 0);
                    function x() {
                        t.updateSlides(),
                            t.updateProgress(),
                            t.updateSlidesClasses(),
                            t.lazy && t.params.lazy.enabled && t.lazy.load()
                    }
                    if (a.extend(t.virtual, {
                        from: $,
                        to: S,
                        offset: C,
                        slidesGrid: t.slidesGrid
                    }),
                        d === $ && p === S && !e)
                        return t.slidesGrid !== f && C !== g && t.slides.css(v, C + "px"),
                            void t.updateProgress();
                    if (t.params.virtual.renderExternal)
                        return t.params.virtual.renderExternal.call(t, {
                            offset: C,
                            from: $,
                            to: S,
                            slides: function () {
                                for (var e = [], t = $; t <= S; t += 1)
                                    e.push(h[t]);
                                return e
                            }()
                        }),
                            void x();
                    var T = []
                        , k = [];
                    if (e)
                        t.$wrapperEl.find("." + t.params.slideClass).remove();
                    else
                        for (var P = d; P <= p; P += 1)
                            (P < $ || P > S) && t.$wrapperEl.find("." + t.params.slideClass + '[data-swiper-slide-index="' + P + '"]').remove();
                    for (var E = 0; E < h.length; E += 1)
                        E >= $ && E <= S && (void 0 === p || e ? k.push(E) : (E > p && k.push(E),
                            E < d && T.push(E)));
                    k.forEach(function (e) {
                        t.$wrapperEl.append(m(h[e], e))
                    }),
                        T.sort(function (e, t) {
                            return t - e
                        }).forEach(function (e) {
                            t.$wrapperEl.prepend(m(h[e], e))
                        }),
                        t.$wrapperEl.children(".swiper-slide").css(v, C + "px"),
                        x()
                },
                renderSlide: function (e, t) {
                    var n = this.params.virtual;
                    if (n.cache && this.virtual.cache[t])
                        return this.virtual.cache[t];
                    var r = n.renderSlide ? i(n.renderSlide.call(this, e, t)) : i('<div class="' + this.params.slideClass + '" data-swiper-slide-index="' + t + '">' + e + "</div>");
                    return r.attr("data-swiper-slide-index") || r.attr("data-swiper-slide-index", t),
                        n.cache && (this.virtual.cache[t] = r),
                        r
                },
                appendSlide: function (e) {
                    if ("object" == typeof e && "length" in e)
                        for (var t = 0; t < e.length; t += 1)
                            e[t] && this.virtual.slides.push(e[t]);
                    else
                        this.virtual.slides.push(e);
                    this.virtual.update(!0)
                },
                prependSlide: function (e) {
                    var t = this.activeIndex
                        , n = t + 1
                        , i = 1;
                    if (Array.isArray(e)) {
                        for (var r = 0; r < e.length; r += 1)
                            e[r] && this.virtual.slides.unshift(e[r]);
                        n = t + e.length,
                            i = e.length
                    } else
                        this.virtual.slides.unshift(e);
                    if (this.params.virtual.cache) {
                        var o = this.virtual.cache
                            , a = {};
                        Object.keys(o).forEach(function (e) {
                            var t = o[e]
                                , n = t.attr("data-swiper-slide-index");
                            n && t.attr("data-swiper-slide-index", parseInt(n, 10) + 1),
                                a[parseInt(e, 10) + i] = t
                        }),
                            this.virtual.cache = a
                    }
                    this.virtual.update(!0),
                        this.slideTo(n, 0)
                },
                removeSlide: function (e) {
                    if (null != e) {
                        var t = this.activeIndex;
                        if (Array.isArray(e))
                            for (var n = e.length - 1; n >= 0; n -= 1)
                                this.virtual.slides.splice(e[n], 1),
                                    this.params.virtual.cache && delete this.virtual.cache[e[n]],
                                    e[n] < t && (t -= 1),
                                    t = Math.max(t, 0);
                        else
                            this.virtual.slides.splice(e, 1),
                                this.params.virtual.cache && delete this.virtual.cache[e],
                                e < t && (t -= 1),
                                t = Math.max(t, 0);
                        this.virtual.update(!0),
                            this.slideTo(t, 0)
                    }
                },
                removeAllSlides: function () {
                    this.virtual.slides = [],
                        this.params.virtual.cache && (this.virtual.cache = {}),
                        this.virtual.update(!0),
                        this.slideTo(0, 0)
                }
            }
            , J = {
                name: "virtual",
                params: {
                    virtual: {
                        enabled: !1,
                        slides: [],
                        cache: !0,
                        renderSlide: null,
                        renderExternal: null,
                        addSlidesBefore: 0,
                        addSlidesAfter: 0
                    }
                },
                create: function () {
                    a.extend(this, {
                        virtual: {
                            update: X.update.bind(this),
                            appendSlide: X.appendSlide.bind(this),
                            prependSlide: X.prependSlide.bind(this),
                            removeSlide: X.removeSlide.bind(this),
                            removeAllSlides: X.removeAllSlides.bind(this),
                            renderSlide: X.renderSlide.bind(this),
                            slides: this.params.virtual.slides,
                            cache: {}
                        }
                    })
                },
                on: {
                    beforeInit: function () {
                        if (this.params.virtual.enabled) {
                            this.classNames.push(this.params.containerModifierClass + "virtual");
                            var e = {
                                watchSlidesProgress: !0
                            };
                            a.extend(this.params, e),
                                a.extend(this.originalParams, e),
                                this.params.initialSlide || this.virtual.update()
                        }
                    },
                    setTranslate: function () {
                        this.params.virtual.enabled && this.virtual.update()
                    }
                }
            }
            , K = {
                handle: function (n) {
                    var i = this.rtlTranslate
                        , r = n;
                    r.originalEvent && (r = r.originalEvent);
                    var o = r.keyCode || r.charCode;
                    if (!this.allowSlideNext && (this.isHorizontal() && 39 === o || this.isVertical() && 40 === o || 34 === o))
                        return !1;
                    if (!this.allowSlidePrev && (this.isHorizontal() && 37 === o || this.isVertical() && 38 === o || 33 === o))
                        return !1;
                    if (!(r.shiftKey || r.altKey || r.ctrlKey || r.metaKey || e.activeElement && e.activeElement.nodeName && ("input" === e.activeElement.nodeName.toLowerCase() || "textarea" === e.activeElement.nodeName.toLowerCase()))) {
                        if (this.params.keyboard.onlyInViewport && (33 === o || 34 === o || 37 === o || 39 === o || 38 === o || 40 === o)) {
                            var a = !1;
                            if (this.$el.parents("." + this.params.slideClass).length > 0 && 0 === this.$el.parents("." + this.params.slideActiveClass).length)
                                return;
                            var s = t.innerWidth
                                , l = t.innerHeight
                                , c = this.$el.offset();
                            i && (c.left -= this.$el[0].scrollLeft);
                            for (var u = [[c.left, c.top], [c.left + this.width, c.top], [c.left, c.top + this.height], [c.left + this.width, c.top + this.height]], d = 0; d < u.length; d += 1) {
                                var p = u[d];
                                p[0] >= 0 && p[0] <= s && p[1] >= 0 && p[1] <= l && (a = !0)
                            }
                            if (!a)
                                return
                        }
                        this.isHorizontal() ? (33 !== o && 34 !== o && 37 !== o && 39 !== o || (r.preventDefault ? r.preventDefault() : r.returnValue = !1),
                            (34 !== o && 39 !== o || i) && (33 !== o && 37 !== o || !i) || this.slideNext(),
                            (33 !== o && 37 !== o || i) && (34 !== o && 39 !== o || !i) || this.slidePrev()) : (33 !== o && 34 !== o && 38 !== o && 40 !== o || (r.preventDefault ? r.preventDefault() : r.returnValue = !1),
                                34 !== o && 40 !== o || this.slideNext(),
                                33 !== o && 38 !== o || this.slidePrev()),
                            this.emit("keyPress", o)
                    }
                },
                enable: function () {
                    this.keyboard.enabled || (i(e).on("keydown", this.keyboard.handle),
                        this.keyboard.enabled = !0)
                },
                disable: function () {
                    this.keyboard.enabled && (i(e).off("keydown", this.keyboard.handle),
                        this.keyboard.enabled = !1)
                }
            }
            , Q = {
                name: "keyboard",
                params: {
                    keyboard: {
                        enabled: !1,
                        onlyInViewport: !0
                    }
                },
                create: function () {
                    a.extend(this, {
                        keyboard: {
                            enabled: !1,
                            enable: K.enable.bind(this),
                            disable: K.disable.bind(this),
                            handle: K.handle.bind(this)
                        }
                    })
                },
                on: {
                    init: function () {
                        this.params.keyboard.enabled && this.keyboard.enable()
                    },
                    destroy: function () {
                        this.keyboard.enabled && this.keyboard.disable()
                    }
                }
            }
            , Z = {
                lastScrollTime: a.now(),
                lastEventBeforeSnap: void 0,
                recentWheelEvents: [],
                event: function () {
                    return t.navigator.userAgent.indexOf("firefox") > -1 ? "DOMMouseScroll" : function () {
                        var t = "onwheel" in e;
                        if (!t) {
                            var n = e.createElement("div");
                            n.setAttribute("onwheel", "return;"),
                                t = "function" == typeof n.onwheel
                        }
                        return !t && e.implementation && e.implementation.hasFeature && !0 !== e.implementation.hasFeature("", "") && (t = e.implementation.hasFeature("Events.wheel", "3.0")),
                            t
                    }() ? "wheel" : "mousewheel"
                },
                normalize: function (e) {
                    var t = 0
                        , n = 0
                        , i = 0
                        , r = 0;
                    return "detail" in e && (n = e.detail),
                        "wheelDelta" in e && (n = -e.wheelDelta / 120),
                        "wheelDeltaY" in e && (n = -e.wheelDeltaY / 120),
                        "wheelDeltaX" in e && (t = -e.wheelDeltaX / 120),
                        "axis" in e && e.axis === e.HORIZONTAL_AXIS && (t = n,
                            n = 0),
                        i = 10 * t,
                        r = 10 * n,
                        "deltaY" in e && (r = e.deltaY),
                        "deltaX" in e && (i = e.deltaX),
                        e.shiftKey && !i && (i = r,
                            r = 0),
                        (i || r) && e.deltaMode && (1 === e.deltaMode ? (i *= 40,
                            r *= 40) : (i *= 800,
                                r *= 800)),
                        i && !t && (t = i < 1 ? -1 : 1),
                        r && !n && (n = r < 1 ? -1 : 1),
                    {
                        spinX: t,
                        spinY: n,
                        pixelX: i,
                        pixelY: r
                    }
                },
                handleMouseEnter: function () {
                    this.mouseEntered = !0
                },
                handleMouseLeave: function () {
                    this.mouseEntered = !1
                },
                handle: function (e) {
                    var n = e
                        , i = this
                        , r = i.params.mousewheel;
                    if (i.params.cssMode && n.preventDefault(),
                        !i.mouseEntered && !r.releaseOnEdges)
                        return !0;
                    n.originalEvent && (n = n.originalEvent);
                    var o = 0
                        , s = i.rtlTranslate ? -1 : 1
                        , l = Z.normalize(n);
                    if (r.forceToAxis)
                        if (i.isHorizontal()) {
                            if (!(Math.abs(l.pixelX) > Math.abs(l.pixelY)))
                                return !0;
                            o = l.pixelX * s
                        } else {
                            if (!(Math.abs(l.pixelY) > Math.abs(l.pixelX)))
                                return !0;
                            o = l.pixelY
                        }
                    else
                        o = Math.abs(l.pixelX) > Math.abs(l.pixelY) ? -l.pixelX * s : -l.pixelY;
                    if (0 === o)
                        return !0;
                    if (r.invert && (o = -o),
                        i.params.freeMode) {
                        var c = {
                            time: a.now(),
                            delta: Math.abs(o),
                            direction: Math.sign(o)
                        }
                            , u = i.mousewheel.lastEventBeforeSnap
                            , d = u && c.time < u.time + 500 && c.delta <= u.delta && c.direction === u.direction;
                        if (!d) {
                            i.mousewheel.lastEventBeforeSnap = void 0,
                                i.params.loop && i.loopFix();
                            var p = i.getTranslate() + o * r.sensitivity
                                , h = i.isBeginning
                                , f = i.isEnd;
                            if (p >= i.minTranslate() && (p = i.minTranslate()),
                                p <= i.maxTranslate() && (p = i.maxTranslate()),
                                i.setTransition(0),
                                i.setTranslate(p),
                                i.updateProgress(),
                                i.updateActiveIndex(),
                                i.updateSlidesClasses(),
                                (!h && i.isBeginning || !f && i.isEnd) && i.updateSlidesClasses(),
                                i.params.freeModeSticky) {
                                clearTimeout(i.mousewheel.timeout),
                                    i.mousewheel.timeout = void 0;
                                var m = i.mousewheel.recentWheelEvents;
                                m.length >= 15 && m.shift();
                                var g = m.length ? m[m.length - 1] : void 0
                                    , v = m[0];
                                if (m.push(c),
                                    g && (c.delta > g.delta || c.direction !== g.direction))
                                    m.splice(0);
                                else if (m.length >= 15 && c.time - v.time < 500 && v.delta - c.delta >= 1 && c.delta <= 6) {
                                    var y = o > 0 ? .8 : .2;
                                    i.mousewheel.lastEventBeforeSnap = c,
                                        m.splice(0),
                                        i.mousewheel.timeout = a.nextTick(function () {
                                            i.slideToClosest(i.params.speed, !0, void 0, y)
                                        }, 0)
                                }
                                i.mousewheel.timeout || (i.mousewheel.timeout = a.nextTick(function () {
                                    i.mousewheel.lastEventBeforeSnap = c,
                                        m.splice(0),
                                        i.slideToClosest(i.params.speed, !0, void 0, .5)
                                }, 500))
                            }
                            if (d || i.emit("scroll", n),
                                i.params.autoplay && i.params.autoplayDisableOnInteraction && i.autoplay.stop(),
                                p === i.minTranslate() || p === i.maxTranslate())
                                return !0
                        }
                    } else {
                        if (a.now() - i.mousewheel.lastScrollTime > 60)
                            if (o < 0)
                                if (i.isEnd && !i.params.loop || i.animating) {
                                    if (r.releaseOnEdges)
                                        return !0
                                } else
                                    i.slideNext(),
                                        i.emit("scroll", n);
                            else if (i.isBeginning && !i.params.loop || i.animating) {
                                if (r.releaseOnEdges)
                                    return !0
                            } else
                                i.slidePrev(),
                                    i.emit("scroll", n);
                        i.mousewheel.lastScrollTime = (new t.Date).getTime()
                    }
                    return n.preventDefault ? n.preventDefault() : n.returnValue = !1,
                        !1
                },
                enable: function () {
                    var e = Z.event();
                    if (this.params.cssMode)
                        return this.wrapperEl.removeEventListener(e, this.mousewheel.handle),
                            !0;
                    if (!e)
                        return !1;
                    if (this.mousewheel.enabled)
                        return !1;
                    var t = this.$el;
                    return "container" !== this.params.mousewheel.eventsTarged && (t = i(this.params.mousewheel.eventsTarged)),
                        t.on("mouseenter", this.mousewheel.handleMouseEnter),
                        t.on("mouseleave", this.mousewheel.handleMouseLeave),
                        t.on(e, this.mousewheel.handle),
                        this.mousewheel.enabled = !0,
                        !0
                },
                disable: function () {
                    var e = Z.event();
                    if (this.params.cssMode)
                        return this.wrapperEl.addEventListener(e, this.mousewheel.handle),
                            !0;
                    if (!e)
                        return !1;
                    if (!this.mousewheel.enabled)
                        return !1;
                    var t = this.$el;
                    return "container" !== this.params.mousewheel.eventsTarged && (t = i(this.params.mousewheel.eventsTarged)),
                        t.off(e, this.mousewheel.handle),
                        this.mousewheel.enabled = !1,
                        !0
                }
            }
            , ee = {
                update: function () {
                    var e = this.params.navigation;
                    if (!this.params.loop) {
                        var t = this.navigation
                            , n = t.$nextEl
                            , i = t.$prevEl;
                        i && i.length > 0 && (this.isBeginning ? i.addClass(e.disabledClass) : i.removeClass(e.disabledClass),
                            i[this.params.watchOverflow && this.isLocked ? "addClass" : "removeClass"](e.lockClass)),
                            n && n.length > 0 && (this.isEnd ? n.addClass(e.disabledClass) : n.removeClass(e.disabledClass),
                                n[this.params.watchOverflow && this.isLocked ? "addClass" : "removeClass"](e.lockClass))
                    }
                },
                onPrevClick: function (e) {
                    e.preventDefault(),
                        this.isBeginning && !this.params.loop || this.slidePrev()
                },
                onNextClick: function (e) {
                    e.preventDefault(),
                        this.isEnd && !this.params.loop || this.slideNext()
                },
                init: function () {
                    var e, t, n = this.params.navigation;
                    (n.nextEl || n.prevEl) && (n.nextEl && (e = i(n.nextEl),
                        this.params.uniqueNavElements && "string" == typeof n.nextEl && e.length > 1 && 1 === this.$el.find(n.nextEl).length && (e = this.$el.find(n.nextEl))),
                        n.prevEl && (t = i(n.prevEl),
                            this.params.uniqueNavElements && "string" == typeof n.prevEl && t.length > 1 && 1 === this.$el.find(n.prevEl).length && (t = this.$el.find(n.prevEl))),
                        e && e.length > 0 && e.on("click", this.navigation.onNextClick),
                        t && t.length > 0 && t.on("click", this.navigation.onPrevClick),
                        a.extend(this.navigation, {
                            $nextEl: e,
                            nextEl: e && e[0],
                            $prevEl: t,
                            prevEl: t && t[0]
                        }))
                },
                destroy: function () {
                    var e = this.navigation
                        , t = e.$nextEl
                        , n = e.$prevEl;
                    t && t.length && (t.off("click", this.navigation.onNextClick),
                        t.removeClass(this.params.navigation.disabledClass)),
                        n && n.length && (n.off("click", this.navigation.onPrevClick),
                            n.removeClass(this.params.navigation.disabledClass))
                }
            }
            , te = {
                update: function () {
                    var e = this.rtl
                        , t = this.params.pagination;
                    if (t.el && this.pagination.el && this.pagination.$el && 0 !== this.pagination.$el.length) {
                        var n, r = this.virtual && this.params.virtual.enabled ? this.virtual.slides.length : this.slides.length, o = this.pagination.$el, a = this.params.loop ? Math.ceil((r - 2 * this.loopedSlides) / this.params.slidesPerGroup) : this.snapGrid.length;
                        if (this.params.loop ? ((n = Math.ceil((this.activeIndex - this.loopedSlides) / this.params.slidesPerGroup)) > r - 1 - 2 * this.loopedSlides && (n -= r - 2 * this.loopedSlides),
                            n > a - 1 && (n -= a),
                            n < 0 && "bullets" !== this.params.paginationType && (n = a + n)) : n = void 0 !== this.snapIndex ? this.snapIndex : this.activeIndex || 0,
                            "bullets" === t.type && this.pagination.bullets && this.pagination.bullets.length > 0) {
                            var s, l, c, u = this.pagination.bullets;
                            if (t.dynamicBullets && (this.pagination.bulletSize = u.eq(0)[this.isHorizontal() ? "outerWidth" : "outerHeight"](!0),
                                o.css(this.isHorizontal() ? "width" : "height", this.pagination.bulletSize * (t.dynamicMainBullets + 4) + "px"),
                                t.dynamicMainBullets > 1 && void 0 !== this.previousIndex && (this.pagination.dynamicBulletIndex += n - this.previousIndex,
                                    this.pagination.dynamicBulletIndex > t.dynamicMainBullets - 1 ? this.pagination.dynamicBulletIndex = t.dynamicMainBullets - 1 : this.pagination.dynamicBulletIndex < 0 && (this.pagination.dynamicBulletIndex = 0)),
                                s = n - this.pagination.dynamicBulletIndex,
                                c = ((l = s + (Math.min(u.length, t.dynamicMainBullets) - 1)) + s) / 2),
                                u.removeClass(t.bulletActiveClass + " " + t.bulletActiveClass + "-next " + t.bulletActiveClass + "-next-next " + t.bulletActiveClass + "-prev " + t.bulletActiveClass + "-prev-prev " + t.bulletActiveClass + "-main"),
                                o.length > 1)
                                u.each(function (e, r) {
                                    var o = i(r)
                                        , a = o.index();
                                    a === n && o.addClass(t.bulletActiveClass),
                                        t.dynamicBullets && (a >= s && a <= l && o.addClass(t.bulletActiveClass + "-main"),
                                            a === s && o.prev().addClass(t.bulletActiveClass + "-prev").prev().addClass(t.bulletActiveClass + "-prev-prev"),
                                            a === l && o.next().addClass(t.bulletActiveClass + "-next").next().addClass(t.bulletActiveClass + "-next-next"))
                                });
                            else {
                                var d = u.eq(n)
                                    , p = d.index();
                                if (d.addClass(t.bulletActiveClass),
                                    t.dynamicBullets) {
                                    for (var h = u.eq(s), f = u.eq(l), m = s; m <= l; m += 1)
                                        u.eq(m).addClass(t.bulletActiveClass + "-main");
                                    if (this.params.loop)
                                        if (p >= u.length - t.dynamicMainBullets) {
                                            for (var g = t.dynamicMainBullets; g >= 0; g -= 1)
                                                u.eq(u.length - g).addClass(t.bulletActiveClass + "-main");
                                            u.eq(u.length - t.dynamicMainBullets - 1).addClass(t.bulletActiveClass + "-prev")
                                        } else
                                            h.prev().addClass(t.bulletActiveClass + "-prev").prev().addClass(t.bulletActiveClass + "-prev-prev"),
                                                f.next().addClass(t.bulletActiveClass + "-next").next().addClass(t.bulletActiveClass + "-next-next");
                                    else
                                        h.prev().addClass(t.bulletActiveClass + "-prev").prev().addClass(t.bulletActiveClass + "-prev-prev"),
                                            f.next().addClass(t.bulletActiveClass + "-next").next().addClass(t.bulletActiveClass + "-next-next")
                                }
                            }
                            if (t.dynamicBullets) {
                                var v = Math.min(u.length, t.dynamicMainBullets + 4)
                                    , y = (this.pagination.bulletSize * v - this.pagination.bulletSize) / 2 - c * this.pagination.bulletSize
                                    , b = e ? "right" : "left";
                                u.css(this.isHorizontal() ? b : "top", y + "px")
                            }
                        }
                        if ("fraction" === t.type && (o.find("." + t.currentClass).text(t.formatFractionCurrent(n + 1)),
                            o.find("." + t.totalClass).text(t.formatFractionTotal(a))),
                            "progressbar" === t.type) {
                            var w;
                            w = t.progressbarOpposite ? this.isHorizontal() ? "vertical" : "horizontal" : this.isHorizontal() ? "horizontal" : "vertical";
                            var $ = (n + 1) / a
                                , S = 1
                                , C = 1;
                            "horizontal" === w ? S = $ : C = $,
                                o.find("." + t.progressbarFillClass).transform("translate3d(0,0,0) scaleX(" + S + ") scaleY(" + C + ")").transition(this.params.speed)
                        }
                        "custom" === t.type && t.renderCustom ? (o.html(t.renderCustom(this, n + 1, a)),
                            this.emit("paginationRender", this, o[0])) : this.emit("paginationUpdate", this, o[0]),
                            o[this.params.watchOverflow && this.isLocked ? "addClass" : "removeClass"](t.lockClass)
                    }
                },
                render: function () {
                    var e = this.params.pagination;
                    if (e.el && this.pagination.el && this.pagination.$el && 0 !== this.pagination.$el.length) {
                        var t = this.virtual && this.params.virtual.enabled ? this.virtual.slides.length : this.slides.length
                            , n = this.pagination.$el
                            , i = "";
                        if ("bullets" === e.type) {
                            for (var r = this.params.loop ? Math.ceil((t - 2 * this.loopedSlides) / this.params.slidesPerGroup) : this.snapGrid.length, o = 0; o < r; o += 1)
                                e.renderBullet ? i += e.renderBullet.call(this, o, e.bulletClass) : i += "<" + e.bulletElement + ' class="' + e.bulletClass + '"></' + e.bulletElement + ">";
                            n.html(i),
                                this.pagination.bullets = n.find("." + e.bulletClass)
                        }
                        "fraction" === e.type && (i = e.renderFraction ? e.renderFraction.call(this, e.currentClass, e.totalClass) : '<span class="' + e.currentClass + '"></span> / <span class="' + e.totalClass + '"></span>',
                            n.html(i)),
                            "progressbar" === e.type && (i = e.renderProgressbar ? e.renderProgressbar.call(this, e.progressbarFillClass) : '<span class="' + e.progressbarFillClass + '"></span>',
                                n.html(i)),
                            "custom" !== e.type && this.emit("paginationRender", this.pagination.$el[0])
                    }
                },
                init: function () {
                    var e = this
                        , t = e.params.pagination;
                    if (t.el) {
                        var n = i(t.el);
                        0 !== n.length && (e.params.uniqueNavElements && "string" == typeof t.el && n.length > 1 && 1 === e.$el.find(t.el).length && (n = e.$el.find(t.el)),
                            "bullets" === t.type && t.clickable && n.addClass(t.clickableClass),
                            n.addClass(t.modifierClass + t.type),
                            "bullets" === t.type && t.dynamicBullets && (n.addClass("" + t.modifierClass + t.type + "-dynamic"),
                                e.pagination.dynamicBulletIndex = 0,
                                t.dynamicMainBullets < 1 && (t.dynamicMainBullets = 1)),
                            "progressbar" === t.type && t.progressbarOpposite && n.addClass(t.progressbarOppositeClass),
                            t.clickable && n.on("click", "." + t.bulletClass, function (t) {
                                t.preventDefault();
                                var n = i(this).index() * e.params.slidesPerGroup;
                                e.params.loop && (n += e.loopedSlides),
                                    e.slideTo(n)
                            }),
                            a.extend(e.pagination, {
                                $el: n,
                                el: n[0]
                            }))
                    }
                },
                destroy: function () {
                    var e = this.params.pagination;
                    if (e.el && this.pagination.el && this.pagination.$el && 0 !== this.pagination.$el.length) {
                        var t = this.pagination.$el;
                        t.removeClass(e.hiddenClass),
                            t.removeClass(e.modifierClass + e.type),
                            this.pagination.bullets && this.pagination.bullets.removeClass(e.bulletActiveClass),
                            e.clickable && t.off("click", "." + e.bulletClass)
                    }
                }
            }
            , ne = {
                setTranslate: function () {
                    if (this.params.scrollbar.el && this.scrollbar.el) {
                        var e = this.scrollbar
                            , t = this.rtlTranslate
                            , n = this.progress
                            , i = e.dragSize
                            , r = e.trackSize
                            , o = e.$dragEl
                            , a = e.$el
                            , s = this.params.scrollbar
                            , l = i
                            , c = (r - i) * n;
                        t ? (c = -c) > 0 ? (l = i - c,
                            c = 0) : -c + i > r && (l = r + c) : c < 0 ? (l = i + c,
                                c = 0) : c + i > r && (l = r - c),
                            this.isHorizontal() ? (o.transform("translate3d(" + c + "px, 0, 0)"),
                                o[0].style.width = l + "px") : (o.transform("translate3d(0px, " + c + "px, 0)"),
                                    o[0].style.height = l + "px"),
                            s.hide && (clearTimeout(this.scrollbar.timeout),
                                a[0].style.opacity = 1,
                                this.scrollbar.timeout = setTimeout(function () {
                                    a[0].style.opacity = 0,
                                        a.transition(400)
                                }, 1e3))
                    }
                },
                setTransition: function (e) {
                    this.params.scrollbar.el && this.scrollbar.el && this.scrollbar.$dragEl.transition(e)
                },
                updateSize: function () {
                    if (this.params.scrollbar.el && this.scrollbar.el) {
                        var e = this.scrollbar
                            , t = e.$dragEl
                            , n = e.$el;
                        t[0].style.width = "",
                            t[0].style.height = "";
                        var i, r = this.isHorizontal() ? n[0].offsetWidth : n[0].offsetHeight, o = this.size / this.virtualSize, s = o * (r / this.size);
                        i = "auto" === this.params.scrollbar.dragSize ? r * o : parseInt(this.params.scrollbar.dragSize, 10),
                            this.isHorizontal() ? t[0].style.width = i + "px" : t[0].style.height = i + "px",
                            n[0].style.display = o >= 1 ? "none" : "",
                            this.params.scrollbar.hide && (n[0].style.opacity = 0),
                            a.extend(e, {
                                trackSize: r,
                                divider: o,
                                moveDivider: s,
                                dragSize: i
                            }),
                            e.$el[this.params.watchOverflow && this.isLocked ? "addClass" : "removeClass"](this.params.scrollbar.lockClass)
                    }
                },
                getPointerPosition: function (e) {
                    return this.isHorizontal() ? "touchstart" === e.type || "touchmove" === e.type ? e.targetTouches[0].clientX : e.clientX : "touchstart" === e.type || "touchmove" === e.type ? e.targetTouches[0].clientY : e.clientY
                },
                setDragPosition: function (e) {
                    var t, n = this.scrollbar, i = this.rtlTranslate, r = n.$el, o = n.dragSize, a = n.trackSize, s = n.dragStartPos;
                    t = (n.getPointerPosition(e) - r.offset()[this.isHorizontal() ? "left" : "top"] - (null !== s ? s : o / 2)) / (a - o),
                        t = Math.max(Math.min(t, 1), 0),
                        i && (t = 1 - t);
                    var l = this.minTranslate() + (this.maxTranslate() - this.minTranslate()) * t;
                    this.updateProgress(l),
                        this.setTranslate(l),
                        this.updateActiveIndex(),
                        this.updateSlidesClasses()
                },
                onDragStart: function (e) {
                    var t = this.params.scrollbar
                        , n = this.scrollbar
                        , i = this.$wrapperEl
                        , r = n.$el
                        , o = n.$dragEl;
                    this.scrollbar.isTouched = !0,
                        this.scrollbar.dragStartPos = e.target === o[0] || e.target === o ? n.getPointerPosition(e) - e.target.getBoundingClientRect()[this.isHorizontal() ? "left" : "top"] : null,
                        e.preventDefault(),
                        e.stopPropagation(),
                        i.transition(100),
                        o.transition(100),
                        n.setDragPosition(e),
                        clearTimeout(this.scrollbar.dragTimeout),
                        r.transition(0),
                        t.hide && r.css("opacity", 1),
                        this.params.cssMode && this.$wrapperEl.css("scroll-snap-type", "none"),
                        this.emit("scrollbarDragStart", e)
                },
                onDragMove: function (e) {
                    var t = this.scrollbar
                        , n = this.$wrapperEl
                        , i = t.$el
                        , r = t.$dragEl;
                    this.scrollbar.isTouched && (e.preventDefault ? e.preventDefault() : e.returnValue = !1,
                        t.setDragPosition(e),
                        n.transition(0),
                        i.transition(0),
                        r.transition(0),
                        this.emit("scrollbarDragMove", e))
                },
                onDragEnd: function (e) {
                    var t = this.params.scrollbar
                        , n = this.scrollbar
                        , i = this.$wrapperEl
                        , r = n.$el;
                    this.scrollbar.isTouched && (this.scrollbar.isTouched = !1,
                        this.params.cssMode && (this.$wrapperEl.css("scroll-snap-type", ""),
                            i.transition("")),
                        t.hide && (clearTimeout(this.scrollbar.dragTimeout),
                            this.scrollbar.dragTimeout = a.nextTick(function () {
                                r.css("opacity", 0),
                                    r.transition(400)
                            }, 1e3)),
                        this.emit("scrollbarDragEnd", e),
                        t.snapOnRelease && this.slideToClosest())
                },
                enableDraggable: function () {
                    if (this.params.scrollbar.el) {
                        var t = this.scrollbar
                            , n = this.touchEventsTouch
                            , i = this.touchEventsDesktop
                            , r = this.params
                            , o = t.$el[0]
                            , a = !(!s.passiveListener || !r.passiveListeners) && {
                                passive: !1,
                                capture: !1
                            }
                            , l = !(!s.passiveListener || !r.passiveListeners) && {
                                passive: !0,
                                capture: !1
                            };
                        s.touch ? (o.addEventListener(n.start, this.scrollbar.onDragStart, a),
                            o.addEventListener(n.move, this.scrollbar.onDragMove, a),
                            o.addEventListener(n.end, this.scrollbar.onDragEnd, l)) : (o.addEventListener(i.start, this.scrollbar.onDragStart, a),
                                e.addEventListener(i.move, this.scrollbar.onDragMove, a),
                                e.addEventListener(i.end, this.scrollbar.onDragEnd, l))
                    }
                },
                disableDraggable: function () {
                    if (this.params.scrollbar.el) {
                        var t = this.scrollbar
                            , n = this.touchEventsTouch
                            , i = this.touchEventsDesktop
                            , r = this.params
                            , o = t.$el[0]
                            , a = !(!s.passiveListener || !r.passiveListeners) && {
                                passive: !1,
                                capture: !1
                            }
                            , l = !(!s.passiveListener || !r.passiveListeners) && {
                                passive: !0,
                                capture: !1
                            };
                        s.touch ? (o.removeEventListener(n.start, this.scrollbar.onDragStart, a),
                            o.removeEventListener(n.move, this.scrollbar.onDragMove, a),
                            o.removeEventListener(n.end, this.scrollbar.onDragEnd, l)) : (o.removeEventListener(i.start, this.scrollbar.onDragStart, a),
                                e.removeEventListener(i.move, this.scrollbar.onDragMove, a),
                                e.removeEventListener(i.end, this.scrollbar.onDragEnd, l))
                    }
                },
                init: function () {
                    if (this.params.scrollbar.el) {
                        var e = this.scrollbar
                            , t = this.$el
                            , n = this.params.scrollbar
                            , r = i(n.el);
                        this.params.uniqueNavElements && "string" == typeof n.el && r.length > 1 && 1 === t.find(n.el).length && (r = t.find(n.el));
                        var o = r.find("." + this.params.scrollbar.dragClass);
                        0 === o.length && (o = i('<div class="' + this.params.scrollbar.dragClass + '"></div>'),
                            r.append(o)),
                            a.extend(e, {
                                $el: r,
                                el: r[0],
                                $dragEl: o,
                                dragEl: o[0]
                            }),
                            n.draggable && e.enableDraggable()
                    }
                },
                destroy: function () {
                    this.scrollbar.disableDraggable()
                }
            }
            , ie = {
                setTransform: function (e, t) {
                    var n = this.rtl
                        , r = i(e)
                        , o = n ? -1 : 1
                        , a = r.attr("data-swiper-parallax") || "0"
                        , s = r.attr("data-swiper-parallax-x")
                        , l = r.attr("data-swiper-parallax-y")
                        , c = r.attr("data-swiper-parallax-scale")
                        , u = r.attr("data-swiper-parallax-opacity");
                    if (s || l ? (s = s || "0",
                        l = l || "0") : this.isHorizontal() ? (s = a,
                            l = "0") : (l = a,
                                s = "0"),
                        s = s.indexOf("%") >= 0 ? parseInt(s, 10) * t * o + "%" : s * t * o + "px",
                        l = l.indexOf("%") >= 0 ? parseInt(l, 10) * t + "%" : l * t + "px",
                        null != u) {
                        var d = u - (u - 1) * (1 - Math.abs(t));
                        r[0].style.opacity = d
                    }
                    if (null == c)
                        r.transform("translate3d(" + s + ", " + l + ", 0px)");
                    else {
                        var p = c - (c - 1) * (1 - Math.abs(t));
                        r.transform("translate3d(" + s + ", " + l + ", 0px) scale(" + p + ")")
                    }
                },
                setTranslate: function () {
                    var e = this
                        , t = e.$el
                        , n = e.slides
                        , r = e.progress
                        , o = e.snapGrid;
                    t.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each(function (t, n) {
                        e.parallax.setTransform(n, r)
                    }),
                        n.each(function (t, n) {
                            var a = n.progress;
                            e.params.slidesPerGroup > 1 && "auto" !== e.params.slidesPerView && (a += Math.ceil(t / 2) - r * (o.length - 1)),
                                a = Math.min(Math.max(a, -1), 1),
                                i(n).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each(function (t, n) {
                                    e.parallax.setTransform(n, a)
                                })
                        })
                },
                setTransition: function (e) {
                    void 0 === e && (e = this.params.speed),
                        this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each(function (t, n) {
                            var r = i(n)
                                , o = parseInt(r.attr("data-swiper-parallax-duration"), 10) || e;
                            0 === e && (o = 0),
                                r.transition(o)
                        })
                }
            }
            , re = {
                getDistanceBetweenTouches: function (e) {
                    if (e.targetTouches.length < 2)
                        return 1;
                    var t = e.targetTouches[0].pageX
                        , n = e.targetTouches[0].pageY
                        , i = e.targetTouches[1].pageX
                        , r = e.targetTouches[1].pageY;
                    return Math.sqrt(Math.pow(i - t, 2) + Math.pow(r - n, 2))
                },
                onGestureStart: function (e) {
                    var t = this.params.zoom
                        , n = this.zoom
                        , r = n.gesture;
                    if (n.fakeGestureTouched = !1,
                        n.fakeGestureMoved = !1,
                        !s.gestures) {
                        if ("touchstart" !== e.type || "touchstart" === e.type && e.targetTouches.length < 2)
                            return;
                        n.fakeGestureTouched = !0,
                            r.scaleStart = re.getDistanceBetweenTouches(e)
                    }
                    r.$slideEl && r.$slideEl.length || (r.$slideEl = i(e.target).closest(".swiper-slide"),
                        0 === r.$slideEl.length && (r.$slideEl = this.slides.eq(this.activeIndex)),
                        r.$imageEl = r.$slideEl.find("img, svg, canvas"),
                        r.$imageWrapEl = r.$imageEl.parent("." + t.containerClass),
                        r.maxRatio = r.$imageWrapEl.attr("data-swiper-zoom") || t.maxRatio,
                        0 !== r.$imageWrapEl.length) ? (r.$imageEl.transition(0),
                            this.zoom.isScaling = !0) : r.$imageEl = void 0
                },
                onGestureChange: function (e) {
                    var t = this.params.zoom
                        , n = this.zoom
                        , i = n.gesture;
                    if (!s.gestures) {
                        if ("touchmove" !== e.type || "touchmove" === e.type && e.targetTouches.length < 2)
                            return;
                        n.fakeGestureMoved = !0,
                            i.scaleMove = re.getDistanceBetweenTouches(e)
                    }
                    i.$imageEl && 0 !== i.$imageEl.length && (s.gestures ? n.scale = e.scale * n.currentScale : n.scale = i.scaleMove / i.scaleStart * n.currentScale,
                        n.scale > i.maxRatio && (n.scale = i.maxRatio - 1 + Math.pow(n.scale - i.maxRatio + 1, .5)),
                        n.scale < t.minRatio && (n.scale = t.minRatio + 1 - Math.pow(t.minRatio - n.scale + 1, .5)),
                        i.$imageEl.transform("translate3d(0,0,0) scale(" + n.scale + ")"))
                },
                onGestureEnd: function (e) {
                    var t = this.params.zoom
                        , n = this.zoom
                        , i = n.gesture;
                    if (!s.gestures) {
                        if (!n.fakeGestureTouched || !n.fakeGestureMoved)
                            return;
                        if ("touchend" !== e.type || "touchend" === e.type && e.changedTouches.length < 2 && !O.android)
                            return;
                        n.fakeGestureTouched = !1,
                            n.fakeGestureMoved = !1
                    }
                    i.$imageEl && 0 !== i.$imageEl.length && (n.scale = Math.max(Math.min(n.scale, i.maxRatio), t.minRatio),
                        i.$imageEl.transition(this.params.speed).transform("translate3d(0,0,0) scale(" + n.scale + ")"),
                        n.currentScale = n.scale,
                        n.isScaling = !1,
                        1 === n.scale && (i.$slideEl = void 0))
                },
                onTouchStart: function (e) {
                    var t = this.zoom
                        , n = t.gesture
                        , i = t.image;
                    n.$imageEl && 0 !== n.$imageEl.length && (i.isTouched || (O.android && e.preventDefault(),
                        i.isTouched = !0,
                        i.touchesStart.x = "touchstart" === e.type ? e.targetTouches[0].pageX : e.pageX,
                        i.touchesStart.y = "touchstart" === e.type ? e.targetTouches[0].pageY : e.pageY))
                },
                onTouchMove: function (e) {
                    var t = this.zoom
                        , n = t.gesture
                        , i = t.image
                        , r = t.velocity;
                    if (n.$imageEl && 0 !== n.$imageEl.length && (this.allowClick = !1,
                        i.isTouched && n.$slideEl)) {
                        i.isMoved || (i.width = n.$imageEl[0].offsetWidth,
                            i.height = n.$imageEl[0].offsetHeight,
                            i.startX = a.getTranslate(n.$imageWrapEl[0], "x") || 0,
                            i.startY = a.getTranslate(n.$imageWrapEl[0], "y") || 0,
                            n.slideWidth = n.$slideEl[0].offsetWidth,
                            n.slideHeight = n.$slideEl[0].offsetHeight,
                            n.$imageWrapEl.transition(0),
                            this.rtl && (i.startX = -i.startX,
                                i.startY = -i.startY));
                        var o = i.width * t.scale
                            , s = i.height * t.scale;
                        if (!(o < n.slideWidth && s < n.slideHeight)) {
                            if (i.minX = Math.min(n.slideWidth / 2 - o / 2, 0),
                                i.maxX = -i.minX,
                                i.minY = Math.min(n.slideHeight / 2 - s / 2, 0),
                                i.maxY = -i.minY,
                                i.touchesCurrent.x = "touchmove" === e.type ? e.targetTouches[0].pageX : e.pageX,
                                i.touchesCurrent.y = "touchmove" === e.type ? e.targetTouches[0].pageY : e.pageY,
                                !i.isMoved && !t.isScaling) {
                                if (this.isHorizontal() && (Math.floor(i.minX) === Math.floor(i.startX) && i.touchesCurrent.x < i.touchesStart.x || Math.floor(i.maxX) === Math.floor(i.startX) && i.touchesCurrent.x > i.touchesStart.x))
                                    return void (i.isTouched = !1);
                                if (!this.isHorizontal() && (Math.floor(i.minY) === Math.floor(i.startY) && i.touchesCurrent.y < i.touchesStart.y || Math.floor(i.maxY) === Math.floor(i.startY) && i.touchesCurrent.y > i.touchesStart.y))
                                    return void (i.isTouched = !1)
                            }
                            e.preventDefault(),
                                e.stopPropagation(),
                                i.isMoved = !0,
                                i.currentX = i.touchesCurrent.x - i.touchesStart.x + i.startX,
                                i.currentY = i.touchesCurrent.y - i.touchesStart.y + i.startY,
                                i.currentX < i.minX && (i.currentX = i.minX + 1 - Math.pow(i.minX - i.currentX + 1, .8)),
                                i.currentX > i.maxX && (i.currentX = i.maxX - 1 + Math.pow(i.currentX - i.maxX + 1, .8)),
                                i.currentY < i.minY && (i.currentY = i.minY + 1 - Math.pow(i.minY - i.currentY + 1, .8)),
                                i.currentY > i.maxY && (i.currentY = i.maxY - 1 + Math.pow(i.currentY - i.maxY + 1, .8)),
                                r.prevPositionX || (r.prevPositionX = i.touchesCurrent.x),
                                r.prevPositionY || (r.prevPositionY = i.touchesCurrent.y),
                                r.prevTime || (r.prevTime = Date.now()),
                                r.x = (i.touchesCurrent.x - r.prevPositionX) / (Date.now() - r.prevTime) / 2,
                                r.y = (i.touchesCurrent.y - r.prevPositionY) / (Date.now() - r.prevTime) / 2,
                                Math.abs(i.touchesCurrent.x - r.prevPositionX) < 2 && (r.x = 0),
                                Math.abs(i.touchesCurrent.y - r.prevPositionY) < 2 && (r.y = 0),
                                r.prevPositionX = i.touchesCurrent.x,
                                r.prevPositionY = i.touchesCurrent.y,
                                r.prevTime = Date.now(),
                                n.$imageWrapEl.transform("translate3d(" + i.currentX + "px, " + i.currentY + "px,0)")
                        }
                    }
                },
                onTouchEnd: function () {
                    var e = this.zoom
                        , t = e.gesture
                        , n = e.image
                        , i = e.velocity;
                    if (t.$imageEl && 0 !== t.$imageEl.length) {
                        if (!n.isTouched || !n.isMoved)
                            return n.isTouched = !1,
                                void (n.isMoved = !1);
                        n.isTouched = !1,
                            n.isMoved = !1;
                        var r = 300
                            , o = 300
                            , a = i.x * r
                            , s = n.currentX + a
                            , l = i.y * o
                            , c = n.currentY + l;
                        0 !== i.x && (r = Math.abs((s - n.currentX) / i.x)),
                            0 !== i.y && (o = Math.abs((c - n.currentY) / i.y));
                        var u = Math.max(r, o);
                        n.currentX = s,
                            n.currentY = c;
                        var d = n.width * e.scale
                            , p = n.height * e.scale;
                        n.minX = Math.min(t.slideWidth / 2 - d / 2, 0),
                            n.maxX = -n.minX,
                            n.minY = Math.min(t.slideHeight / 2 - p / 2, 0),
                            n.maxY = -n.minY,
                            n.currentX = Math.max(Math.min(n.currentX, n.maxX), n.minX),
                            n.currentY = Math.max(Math.min(n.currentY, n.maxY), n.minY),
                            t.$imageWrapEl.transition(u).transform("translate3d(" + n.currentX + "px, " + n.currentY + "px,0)")
                    }
                },
                onTransitionEnd: function () {
                    var e = this.zoom
                        , t = e.gesture;
                    t.$slideEl && this.previousIndex !== this.activeIndex && (t.$imageEl.transform("translate3d(0,0,0) scale(1)"),
                        t.$imageWrapEl.transform("translate3d(0,0,0)"),
                        e.scale = 1,
                        e.currentScale = 1,
                        t.$slideEl = void 0,
                        t.$imageEl = void 0,
                        t.$imageWrapEl = void 0)
                },
                toggle: function (e) {
                    var t = this.zoom;
                    t.scale && 1 !== t.scale ? t.out() : t.in(e)
                },
                in: function (e) {
                    var t, n, r, o, a, s, l, c, u, d, p, h, f, m, g, v, y = this.zoom, b = this.params.zoom, w = y.gesture, $ = y.image;
                    w.$slideEl || (w.$slideEl = this.clickedSlide ? i(this.clickedSlide) : this.slides.eq(this.activeIndex),
                        w.$imageEl = w.$slideEl.find("img, svg, canvas"),
                        w.$imageWrapEl = w.$imageEl.parent("." + b.containerClass)),
                        w.$imageEl && 0 !== w.$imageEl.length && (w.$slideEl.addClass("" + b.zoomedSlideClass),
                            void 0 === $.touchesStart.x && e ? (t = "touchend" === e.type ? e.changedTouches[0].pageX : e.pageX,
                                n = "touchend" === e.type ? e.changedTouches[0].pageY : e.pageY) : (t = $.touchesStart.x,
                                    n = $.touchesStart.y),
                            y.scale = w.$imageWrapEl.attr("data-swiper-zoom") || b.maxRatio,
                            y.currentScale = w.$imageWrapEl.attr("data-swiper-zoom") || b.maxRatio,
                            e ? (g = w.$slideEl[0].offsetWidth,
                                v = w.$slideEl[0].offsetHeight,
                                r = w.$slideEl.offset().left + g / 2 - t,
                                o = w.$slideEl.offset().top + v / 2 - n,
                                l = w.$imageEl[0].offsetWidth,
                                c = w.$imageEl[0].offsetHeight,
                                u = l * y.scale,
                                d = c * y.scale,
                                f = -(p = Math.min(g / 2 - u / 2, 0)),
                                m = -(h = Math.min(v / 2 - d / 2, 0)),
                                (a = r * y.scale) < p && (a = p),
                                a > f && (a = f),
                                (s = o * y.scale) < h && (s = h),
                                s > m && (s = m)) : (a = 0,
                                    s = 0),
                            w.$imageWrapEl.transition(300).transform("translate3d(" + a + "px, " + s + "px,0)"),
                            w.$imageEl.transition(300).transform("translate3d(0,0,0) scale(" + y.scale + ")"))
                },
                out: function () {
                    var e = this.zoom
                        , t = this.params.zoom
                        , n = e.gesture;
                    n.$slideEl || (n.$slideEl = this.clickedSlide ? i(this.clickedSlide) : this.slides.eq(this.activeIndex),
                        n.$imageEl = n.$slideEl.find("img, svg, canvas"),
                        n.$imageWrapEl = n.$imageEl.parent("." + t.containerClass)),
                        n.$imageEl && 0 !== n.$imageEl.length && (e.scale = 1,
                            e.currentScale = 1,
                            n.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),
                            n.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),
                            n.$slideEl.removeClass("" + t.zoomedSlideClass),
                            n.$slideEl = void 0)
                },
                enable: function () {
                    var e = this.zoom;
                    if (!e.enabled) {
                        e.enabled = !0;
                        var t = !("touchstart" !== this.touchEvents.start || !s.passiveListener || !this.params.passiveListeners) && {
                            passive: !0,
                            capture: !1
                        }
                            , n = !s.passiveListener || {
                                passive: !1,
                                capture: !0
                            };
                        s.gestures ? (this.$wrapperEl.on("gesturestart", ".swiper-slide", e.onGestureStart, t),
                            this.$wrapperEl.on("gesturechange", ".swiper-slide", e.onGestureChange, t),
                            this.$wrapperEl.on("gestureend", ".swiper-slide", e.onGestureEnd, t)) : "touchstart" === this.touchEvents.start && (this.$wrapperEl.on(this.touchEvents.start, ".swiper-slide", e.onGestureStart, t),
                                this.$wrapperEl.on(this.touchEvents.move, ".swiper-slide", e.onGestureChange, n),
                                this.$wrapperEl.on(this.touchEvents.end, ".swiper-slide", e.onGestureEnd, t),
                                this.touchEvents.cancel && this.$wrapperEl.on(this.touchEvents.cancel, ".swiper-slide", e.onGestureEnd, t)),
                            this.$wrapperEl.on(this.touchEvents.move, "." + this.params.zoom.containerClass, e.onTouchMove, n)
                    }
                },
                disable: function () {
                    var e = this.zoom;
                    if (e.enabled) {
                        this.zoom.enabled = !1;
                        var t = !("touchstart" !== this.touchEvents.start || !s.passiveListener || !this.params.passiveListeners) && {
                            passive: !0,
                            capture: !1
                        }
                            , n = !s.passiveListener || {
                                passive: !1,
                                capture: !0
                            };
                        s.gestures ? (this.$wrapperEl.off("gesturestart", ".swiper-slide", e.onGestureStart, t),
                            this.$wrapperEl.off("gesturechange", ".swiper-slide", e.onGestureChange, t),
                            this.$wrapperEl.off("gestureend", ".swiper-slide", e.onGestureEnd, t)) : "touchstart" === this.touchEvents.start && (this.$wrapperEl.off(this.touchEvents.start, ".swiper-slide", e.onGestureStart, t),
                                this.$wrapperEl.off(this.touchEvents.move, ".swiper-slide", e.onGestureChange, n),
                                this.$wrapperEl.off(this.touchEvents.end, ".swiper-slide", e.onGestureEnd, t),
                                this.touchEvents.cancel && this.$wrapperEl.off(this.touchEvents.cancel, ".swiper-slide", e.onGestureEnd, t)),
                            this.$wrapperEl.off(this.touchEvents.move, "." + this.params.zoom.containerClass, e.onTouchMove, n)
                    }
                }
            }
            , oe = {
                loadInSlide: function (e, t) {
                    void 0 === t && (t = !0);
                    var n = this
                        , r = n.params.lazy;
                    if (void 0 !== e && 0 !== n.slides.length) {
                        var o = n.virtual && n.params.virtual.enabled ? n.$wrapperEl.children("." + n.params.slideClass + '[data-swiper-slide-index="' + e + '"]') : n.slides.eq(e)
                            , a = o.find("." + r.elementClass + ":not(." + r.loadedClass + "):not(." + r.loadingClass + ")");
                        !o.hasClass(r.elementClass) || o.hasClass(r.loadedClass) || o.hasClass(r.loadingClass) || (a = a.add(o[0])),
                            0 !== a.length && a.each(function (e, a) {
                                var s = i(a);
                                s.addClass(r.loadingClass);
                                var l = s.attr("data-background")
                                    , c = s.attr("data-src")
                                    , u = s.attr("data-srcset")
                                    , d = s.attr("data-sizes");
                                n.loadImage(s[0], c || l, u, d, !1, function () {
                                    if (null != n && n && (!n || n.params) && !n.destroyed) {
                                        if (l ? (s.css("background-image", 'url("' + l + '")'),
                                            s.removeAttr("data-background")) : (u && (s.attr("srcset", u),
                                                s.removeAttr("data-srcset")),
                                                d && (s.attr("sizes", d),
                                                    s.removeAttr("data-sizes")),
                                                c && (s.attr("src", c),
                                                    s.removeAttr("data-src"))),
                                            s.addClass(r.loadedClass).removeClass(r.loadingClass),
                                            o.find("." + r.preloaderClass).remove(),
                                            n.params.loop && t) {
                                            var e = o.attr("data-swiper-slide-index");
                                            if (o.hasClass(n.params.slideDuplicateClass)) {
                                                var i = n.$wrapperEl.children('[data-swiper-slide-index="' + e + '"]:not(.' + n.params.slideDuplicateClass + ")");
                                                n.lazy.loadInSlide(i.index(), !1)
                                            } else {
                                                var a = n.$wrapperEl.children("." + n.params.slideDuplicateClass + '[data-swiper-slide-index="' + e + '"]');
                                                n.lazy.loadInSlide(a.index(), !1)
                                            }
                                        }
                                        n.emit("lazyImageReady", o[0], s[0])
                                    }
                                }),
                                    n.emit("lazyImageLoad", o[0], s[0])
                            })
                    }
                },
                load: function () {
                    var e = this
                        , t = e.$wrapperEl
                        , n = e.params
                        , r = e.slides
                        , o = e.activeIndex
                        , a = e.virtual && n.virtual.enabled
                        , s = n.lazy
                        , l = n.slidesPerView;
                    function c(e) {
                        if (a) {
                            if (t.children("." + n.slideClass + '[data-swiper-slide-index="' + e + '"]').length)
                                return !0
                        } else if (r[e])
                            return !0;
                        return !1
                    }
                    function u(e) {
                        return a ? i(e).attr("data-swiper-slide-index") : i(e).index()
                    }
                    if ("auto" === l && (l = 0),
                        e.lazy.initialImageLoaded || (e.lazy.initialImageLoaded = !0),
                        e.params.watchSlidesVisibility)
                        t.children("." + n.slideVisibleClass).each(function (t, n) {
                            var r = a ? i(n).attr("data-swiper-slide-index") : i(n).index();
                            e.lazy.loadInSlide(r)
                        });
                    else if (l > 1)
                        for (var d = o; d < o + l; d += 1)
                            c(d) && e.lazy.loadInSlide(d);
                    else
                        e.lazy.loadInSlide(o);
                    if (s.loadPrevNext)
                        if (l > 1 || s.loadPrevNextAmount && s.loadPrevNextAmount > 1) {
                            for (var p = s.loadPrevNextAmount, h = l, f = Math.min(o + h + Math.max(p, h), r.length), m = Math.max(o - Math.max(h, p), 0), g = o + l; g < f; g += 1)
                                c(g) && e.lazy.loadInSlide(g);
                            for (var v = m; v < o; v += 1)
                                c(v) && e.lazy.loadInSlide(v)
                        } else {
                            var y = t.children("." + n.slideNextClass);
                            y.length > 0 && e.lazy.loadInSlide(u(y));
                            var b = t.children("." + n.slidePrevClass);
                            b.length > 0 && e.lazy.loadInSlide(u(b))
                        }
                }
            }
            , ae = {
                LinearSpline: function (e, t) {
                    var n, i, r, o, a;
                    return this.x = e,
                        this.y = t,
                        this.lastIndex = e.length - 1,
                        this.interpolate = function (e) {
                            return e ? (a = function (e, t) {
                                for (i = -1,
                                    n = e.length; n - i > 1;)
                                    e[r = n + i >> 1] <= t ? i = r : n = r;
                                return n
                            }(this.x, e),
                                o = a - 1,
                                (e - this.x[o]) * (this.y[a] - this.y[o]) / (this.x[a] - this.x[o]) + this.y[o]) : 0
                        }
                        ,
                        this
                },
                getInterpolateFunction: function (e) {
                    this.controller.spline || (this.controller.spline = this.params.loop ? new ae.LinearSpline(this.slidesGrid, e.slidesGrid) : new ae.LinearSpline(this.snapGrid, e.snapGrid))
                },
                setTranslate: function (e, t) {
                    var n, i, r = this, o = r.controller.control;
                    function a(e) {
                        var t = r.rtlTranslate ? -r.translate : r.translate;
                        "slide" === r.params.controller.by && (r.controller.getInterpolateFunction(e),
                            i = -r.controller.spline.interpolate(-t)),
                            i && "container" !== r.params.controller.by || (n = (e.maxTranslate() - e.minTranslate()) / (r.maxTranslate() - r.minTranslate()),
                                i = (t - r.minTranslate()) * n + e.minTranslate()),
                            r.params.controller.inverse && (i = e.maxTranslate() - i),
                            e.updateProgress(i),
                            e.setTranslate(i, r),
                            e.updateActiveIndex(),
                            e.updateSlidesClasses()
                    }
                    if (Array.isArray(o))
                        for (var s = 0; s < o.length; s += 1)
                            o[s] !== t && o[s] instanceof B && a(o[s]);
                    else
                        o instanceof B && t !== o && a(o)
                },
                setTransition: function (e, t) {
                    var n, i = this, r = i.controller.control;
                    function o(t) {
                        t.setTransition(e, i),
                            0 !== e && (t.transitionStart(),
                                t.params.autoHeight && a.nextTick(function () {
                                    t.updateAutoHeight()
                                }),
                                t.$wrapperEl.transitionEnd(function () {
                                    r && (t.params.loop && "slide" === i.params.controller.by && t.loopFix(),
                                        t.transitionEnd())
                                }))
                    }
                    if (Array.isArray(r))
                        for (n = 0; n < r.length; n += 1)
                            r[n] !== t && r[n] instanceof B && o(r[n]);
                    else
                        r instanceof B && t !== r && o(r)
                }
            }
            , se = {
                makeElFocusable: function (e) {
                    return e.attr("tabIndex", "0"),
                        e
                },
                addElRole: function (e, t) {
                    return e.attr("role", t),
                        e
                },
                addElLabel: function (e, t) {
                    return e.attr("aria-label", t),
                        e
                },
                disableEl: function (e) {
                    return e.attr("aria-disabled", !0),
                        e
                },
                enableEl: function (e) {
                    return e.attr("aria-disabled", !1),
                        e
                },
                onEnterKey: function (e) {
                    var t = this.params.a11y;
                    if (13 === e.keyCode) {
                        var n = i(e.target);
                        this.navigation && this.navigation.$nextEl && n.is(this.navigation.$nextEl) && (this.isEnd && !this.params.loop || this.slideNext(),
                            this.isEnd ? this.a11y.notify(t.lastSlideMessage) : this.a11y.notify(t.nextSlideMessage)),
                            this.navigation && this.navigation.$prevEl && n.is(this.navigation.$prevEl) && (this.isBeginning && !this.params.loop || this.slidePrev(),
                                this.isBeginning ? this.a11y.notify(t.firstSlideMessage) : this.a11y.notify(t.prevSlideMessage)),
                            this.pagination && n.is("." + this.params.pagination.bulletClass) && n[0].click()
                    }
                },
                notify: function (e) {
                    var t = this.a11y.liveRegion;
                    0 !== t.length && (t.html(""),
                        t.html(e))
                },
                updateNavigation: function () {
                    if (!this.params.loop) {
                        var e = this.navigation
                            , t = e.$nextEl
                            , n = e.$prevEl;
                        n && n.length > 0 && (this.isBeginning ? this.a11y.disableEl(n) : this.a11y.enableEl(n)),
                            t && t.length > 0 && (this.isEnd ? this.a11y.disableEl(t) : this.a11y.enableEl(t))
                    }
                },
                updatePagination: function () {
                    var e = this
                        , t = e.params.a11y;
                    e.pagination && e.params.pagination.clickable && e.pagination.bullets && e.pagination.bullets.length && e.pagination.bullets.each(function (n, r) {
                        var o = i(r);
                        e.a11y.makeElFocusable(o),
                            e.a11y.addElRole(o, "button"),
                            e.a11y.addElLabel(o, t.paginationBulletMessage.replace(/{{index}}/, o.index() + 1))
                    })
                },
                init: function () {
                    this.$el.append(this.a11y.liveRegion);
                    var e, t, n = this.params.a11y;
                    this.navigation && this.navigation.$nextEl && (e = this.navigation.$nextEl),
                        this.navigation && this.navigation.$prevEl && (t = this.navigation.$prevEl),
                        e && (this.a11y.makeElFocusable(e),
                            this.a11y.addElRole(e, "button"),
                            this.a11y.addElLabel(e, n.nextSlideMessage),
                            e.on("keydown", this.a11y.onEnterKey)),
                        t && (this.a11y.makeElFocusable(t),
                            this.a11y.addElRole(t, "button"),
                            this.a11y.addElLabel(t, n.prevSlideMessage),
                            t.on("keydown", this.a11y.onEnterKey)),
                        this.pagination && this.params.pagination.clickable && this.pagination.bullets && this.pagination.bullets.length && this.pagination.$el.on("keydown", "." + this.params.pagination.bulletClass, this.a11y.onEnterKey)
                },
                destroy: function () {
                    var e, t;
                    this.a11y.liveRegion && this.a11y.liveRegion.length > 0 && this.a11y.liveRegion.remove(),
                        this.navigation && this.navigation.$nextEl && (e = this.navigation.$nextEl),
                        this.navigation && this.navigation.$prevEl && (t = this.navigation.$prevEl),
                        e && e.off("keydown", this.a11y.onEnterKey),
                        t && t.off("keydown", this.a11y.onEnterKey),
                        this.pagination && this.params.pagination.clickable && this.pagination.bullets && this.pagination.bullets.length && this.pagination.$el.off("keydown", "." + this.params.pagination.bulletClass, this.a11y.onEnterKey)
                }
            }
            , le = {
                init: function () {
                    if (this.params.history) {
                        if (!t.history || !t.history.pushState)
                            return this.params.history.enabled = !1,
                                void (this.params.hashNavigation.enabled = !0);
                        var e = this.history;
                        e.initialized = !0,
                            e.paths = le.getPathValues(),
                            (e.paths.key || e.paths.value) && (e.scrollToSlide(0, e.paths.value, this.params.runCallbacksOnInit),
                                this.params.history.replaceState || t.addEventListener("popstate", this.history.setHistoryPopState))
                    }
                },
                destroy: function () {
                    this.params.history.replaceState || t.removeEventListener("popstate", this.history.setHistoryPopState)
                },
                setHistoryPopState: function () {
                    this.history.paths = le.getPathValues(),
                        this.history.scrollToSlide(this.params.speed, this.history.paths.value, !1)
                },
                getPathValues: function () {
                    var e = t.location.pathname.slice(1).split("/").filter(function (e) {
                        return "" !== e
                    })
                        , n = e.length;
                    return {
                        key: e[n - 2],
                        value: e[n - 1]
                    }
                },
                setHistory: function (e, n) {
                    if (this.history.initialized && this.params.history.enabled) {
                        var i = this.slides.eq(n)
                            , r = le.slugify(i.attr("data-history"));
                        t.location.pathname.includes(e) || (r = e + "/" + r);
                        var o = t.history.state;
                        o && o.value === r || (this.params.history.replaceState ? t.history.replaceState({
                            value: r
                        }, null, r) : t.history.pushState({
                            value: r
                        }, null, r))
                    }
                },
                slugify: function (e) {
                    return e.toString().replace(/\s+/g, "-").replace(/[^\w-]+/g, "").replace(/--+/g, "-").replace(/^-+/, "").replace(/-+$/, "")
                },
                scrollToSlide: function (e, t, n) {
                    if (t)
                        for (var i = 0, r = this.slides.length; i < r; i += 1) {
                            var o = this.slides.eq(i);
                            if (le.slugify(o.attr("data-history")) === t && !o.hasClass(this.params.slideDuplicateClass)) {
                                var a = o.index();
                                this.slideTo(a, e, n)
                            }
                        }
                    else
                        this.slideTo(0, e, n)
                }
            }
            , ce = {
                onHashCange: function () {
                    var t = e.location.hash.replace("#", "");
                    if (t !== this.slides.eq(this.activeIndex).attr("data-hash")) {
                        var n = this.$wrapperEl.children("." + this.params.slideClass + '[data-hash="' + t + '"]').index();
                        if (void 0 === n)
                            return;
                        this.slideTo(n)
                    }
                },
                setHash: function () {
                    if (this.hashNavigation.initialized && this.params.hashNavigation.enabled)
                        if (this.params.hashNavigation.replaceState && t.history && t.history.replaceState)
                            t.history.replaceState(null, null, "#" + this.slides.eq(this.activeIndex).attr("data-hash") || "");
                        else {
                            var n = this.slides.eq(this.activeIndex)
                                , i = n.attr("data-hash") || n.attr("data-history");
                            e.location.hash = i || ""
                        }
                },
                init: function () {
                    if (!(!this.params.hashNavigation.enabled || this.params.history && this.params.history.enabled)) {
                        this.hashNavigation.initialized = !0;
                        var n = e.location.hash.replace("#", "");
                        if (n)
                            for (var r = 0, o = this.slides.length; r < o; r += 1) {
                                var a = this.slides.eq(r);
                                if ((a.attr("data-hash") || a.attr("data-history")) === n && !a.hasClass(this.params.slideDuplicateClass)) {
                                    var s = a.index();
                                    this.slideTo(s, 0, this.params.runCallbacksOnInit, !0)
                                }
                            }
                        this.params.hashNavigation.watchState && i(t).on("hashchange", this.hashNavigation.onHashCange)
                    }
                },
                destroy: function () {
                    this.params.hashNavigation.watchState && i(t).off("hashchange", this.hashNavigation.onHashCange)
                }
            }
            , ue = {
                run: function () {
                    var e = this
                        , t = e.slides.eq(e.activeIndex)
                        , n = e.params.autoplay.delay;
                    t.attr("data-swiper-autoplay") && (n = t.attr("data-swiper-autoplay") || e.params.autoplay.delay),
                        clearTimeout(e.autoplay.timeout),
                        e.autoplay.timeout = a.nextTick(function () {
                            e.params.autoplay.reverseDirection ? e.params.loop ? (e.loopFix(),
                                e.slidePrev(e.params.speed, !0, !0),
                                e.emit("autoplay")) : e.isBeginning ? e.params.autoplay.stopOnLastSlide ? e.autoplay.stop() : (e.slideTo(e.slides.length - 1, e.params.speed, !0, !0),
                                    e.emit("autoplay")) : (e.slidePrev(e.params.speed, !0, !0),
                                        e.emit("autoplay")) : e.params.loop ? (e.loopFix(),
                                            e.slideNext(e.params.speed, !0, !0),
                                            e.emit("autoplay")) : e.isEnd ? e.params.autoplay.stopOnLastSlide ? e.autoplay.stop() : (e.slideTo(0, e.params.speed, !0, !0),
                                                e.emit("autoplay")) : (e.slideNext(e.params.speed, !0, !0),
                                                    e.emit("autoplay")),
                                e.params.cssMode && e.autoplay.running && e.autoplay.run()
                        }, n)
                },
                start: function () {
                    return void 0 === this.autoplay.timeout && !this.autoplay.running && (this.autoplay.running = !0,
                        this.emit("autoplayStart"),
                        this.autoplay.run(),
                        !0)
                },
                stop: function () {
                    return !!this.autoplay.running && void 0 !== this.autoplay.timeout && (this.autoplay.timeout && (clearTimeout(this.autoplay.timeout),
                        this.autoplay.timeout = void 0),
                        this.autoplay.running = !1,
                        this.emit("autoplayStop"),
                        !0)
                },
                pause: function (e) {
                    this.autoplay.running && (this.autoplay.paused || (this.autoplay.timeout && clearTimeout(this.autoplay.timeout),
                        this.autoplay.paused = !0,
                        0 !== e && this.params.autoplay.waitForTransition ? (this.$wrapperEl[0].addEventListener("transitionend", this.autoplay.onTransitionEnd),
                            this.$wrapperEl[0].addEventListener("webkitTransitionEnd", this.autoplay.onTransitionEnd)) : (this.autoplay.paused = !1,
                                this.autoplay.run())))
                }
            }
            , de = {
                setTranslate: function () {
                    for (var e = this.slides, t = 0; t < e.length; t += 1) {
                        var n = this.slides.eq(t)
                            , i = -n[0].swiperSlideOffset;
                        this.params.virtualTranslate || (i -= this.translate);
                        var r = 0;
                        this.isHorizontal() || (r = i,
                            i = 0);
                        var o = this.params.fadeEffect.crossFade ? Math.max(1 - Math.abs(n[0].progress), 0) : 1 + Math.min(Math.max(n[0].progress, -1), 0);
                        n.css({
                            opacity: o
                        }).transform("translate3d(" + i + "px, " + r + "px, 0px)")
                    }
                },
                setTransition: function (e) {
                    var t = this
                        , n = t.slides
                        , i = t.$wrapperEl;
                    if (n.transition(e),
                        t.params.virtualTranslate && 0 !== e) {
                        var r = !1;
                        n.transitionEnd(function () {
                            if (!r && t && !t.destroyed) {
                                r = !0,
                                    t.animating = !1;
                                for (var e = ["webkitTransitionEnd", "transitionend"], n = 0; n < e.length; n += 1)
                                    i.trigger(e[n])
                            }
                        })
                    }
                }
            }
            , pe = {
                setTranslate: function () {
                    var e, t = this.$el, n = this.$wrapperEl, r = this.slides, o = this.width, a = this.height, s = this.rtlTranslate, l = this.size, c = this.params.cubeEffect, u = this.isHorizontal(), d = this.virtual && this.params.virtual.enabled, p = 0;
                    c.shadow && (u ? (0 === (e = n.find(".swiper-cube-shadow")).length && (e = i('<div class="swiper-cube-shadow"></div>'),
                        n.append(e)),
                        e.css({
                            height: o + "px"
                        })) : 0 === (e = t.find(".swiper-cube-shadow")).length && (e = i('<div class="swiper-cube-shadow"></div>'),
                            t.append(e)));
                    for (var h = 0; h < r.length; h += 1) {
                        var f = r.eq(h)
                            , m = h;
                        d && (m = parseInt(f.attr("data-swiper-slide-index"), 10));
                        var g = 90 * m
                            , v = Math.floor(g / 360);
                        s && (g = -g,
                            v = Math.floor(-g / 360));
                        var y = Math.max(Math.min(f[0].progress, 1), -1)
                            , b = 0
                            , w = 0
                            , $ = 0;
                        m % 4 == 0 ? (b = 4 * -v * l,
                            $ = 0) : (m - 1) % 4 == 0 ? (b = 0,
                                $ = 4 * -v * l) : (m - 2) % 4 == 0 ? (b = l + 4 * v * l,
                                    $ = l) : (m - 3) % 4 == 0 && (b = -l,
                                        $ = 3 * l + 4 * l * v),
                            s && (b = -b),
                            u || (w = b,
                                b = 0);
                        var S = "rotateX(" + (u ? 0 : -g) + "deg) rotateY(" + (u ? g : 0) + "deg) translate3d(" + b + "px, " + w + "px, " + $ + "px)";
                        if (y <= 1 && y > -1 && (p = 90 * m + 90 * y,
                            s && (p = 90 * -m - 90 * y)),
                            f.transform(S),
                            c.slideShadows) {
                            var C = u ? f.find(".swiper-slide-shadow-left") : f.find(".swiper-slide-shadow-top")
                                , x = u ? f.find(".swiper-slide-shadow-right") : f.find(".swiper-slide-shadow-bottom");
                            0 === C.length && (C = i('<div class="swiper-slide-shadow-' + (u ? "left" : "top") + '"></div>'),
                                f.append(C)),
                                0 === x.length && (x = i('<div class="swiper-slide-shadow-' + (u ? "right" : "bottom") + '"></div>'),
                                    f.append(x)),
                                C.length && (C[0].style.opacity = Math.max(-y, 0)),
                                x.length && (x[0].style.opacity = Math.max(y, 0))
                        }
                    }
                    if (n.css({
                        "-webkit-transform-origin": "50% 50% -" + l / 2 + "px",
                        "-moz-transform-origin": "50% 50% -" + l / 2 + "px",
                        "-ms-transform-origin": "50% 50% -" + l / 2 + "px",
                        "transform-origin": "50% 50% -" + l / 2 + "px"
                    }),
                        c.shadow)
                        if (u)
                            e.transform("translate3d(0px, " + (o / 2 + c.shadowOffset) + "px, " + -o / 2 + "px) rotateX(90deg) rotateZ(0deg) scale(" + c.shadowScale + ")");
                        else {
                            var T = Math.abs(p) - 90 * Math.floor(Math.abs(p) / 90)
                                , k = 1.5 - (Math.sin(2 * T * Math.PI / 360) / 2 + Math.cos(2 * T * Math.PI / 360) / 2)
                                , P = c.shadowScale
                                , E = c.shadowScale / k
                                , I = c.shadowOffset;
                            e.transform("scale3d(" + P + ", 1, " + E + ") translate3d(0px, " + (a / 2 + I) + "px, " + -a / 2 / E + "px) rotateX(-90deg)")
                        }
                    var M = H.isSafari || H.isUiWebView ? -l / 2 : 0;
                    n.transform("translate3d(0px,0," + M + "px) rotateX(" + (this.isHorizontal() ? 0 : p) + "deg) rotateY(" + (this.isHorizontal() ? -p : 0) + "deg)")
                },
                setTransition: function (e) {
                    var t = this.$el;
                    this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),
                        this.params.cubeEffect.shadow && !this.isHorizontal() && t.find(".swiper-cube-shadow").transition(e)
                }
            }
            , he = {
                setTranslate: function () {
                    for (var e = this.slides, t = this.rtlTranslate, n = 0; n < e.length; n += 1) {
                        var r = e.eq(n)
                            , o = r[0].progress;
                        this.params.flipEffect.limitRotation && (o = Math.max(Math.min(r[0].progress, 1), -1));
                        var a = -180 * o
                            , s = 0
                            , l = -r[0].swiperSlideOffset
                            , c = 0;
                        if (this.isHorizontal() ? t && (a = -a) : (c = l,
                            l = 0,
                            s = -a,
                            a = 0),
                            r[0].style.zIndex = -Math.abs(Math.round(o)) + e.length,
                            this.params.flipEffect.slideShadows) {
                            var u = this.isHorizontal() ? r.find(".swiper-slide-shadow-left") : r.find(".swiper-slide-shadow-top")
                                , d = this.isHorizontal() ? r.find(".swiper-slide-shadow-right") : r.find(".swiper-slide-shadow-bottom");
                            0 === u.length && (u = i('<div class="swiper-slide-shadow-' + (this.isHorizontal() ? "left" : "top") + '"></div>'),
                                r.append(u)),
                                0 === d.length && (d = i('<div class="swiper-slide-shadow-' + (this.isHorizontal() ? "right" : "bottom") + '"></div>'),
                                    r.append(d)),
                                u.length && (u[0].style.opacity = Math.max(-o, 0)),
                                d.length && (d[0].style.opacity = Math.max(o, 0))
                        }
                        r.transform("translate3d(" + l + "px, " + c + "px, 0px) rotateX(" + s + "deg) rotateY(" + a + "deg)")
                    }
                },
                setTransition: function (e) {
                    var t = this
                        , n = t.slides
                        , i = t.activeIndex
                        , r = t.$wrapperEl;
                    if (n.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),
                        t.params.virtualTranslate && 0 !== e) {
                        var o = !1;
                        n.eq(i).transitionEnd(function () {
                            if (!o && t && !t.destroyed) {
                                o = !0,
                                    t.animating = !1;
                                for (var e = ["webkitTransitionEnd", "transitionend"], n = 0; n < e.length; n += 1)
                                    r.trigger(e[n])
                            }
                        })
                    }
                }
            }
            , fe = {
                setTranslate: function () {
                    for (var e = this.width, t = this.height, n = this.slides, r = this.$wrapperEl, o = this.slidesSizesGrid, a = this.params.coverflowEffect, l = this.isHorizontal(), c = this.translate, u = l ? e / 2 - c : t / 2 - c, d = l ? a.rotate : -a.rotate, p = a.depth, h = 0, f = n.length; h < f; h += 1) {
                        var m = n.eq(h)
                            , g = o[h]
                            , v = (u - m[0].swiperSlideOffset - g / 2) / g * a.modifier
                            , y = l ? d * v : 0
                            , b = l ? 0 : d * v
                            , w = -p * Math.abs(v)
                            , $ = l ? 0 : a.stretch * v
                            , S = l ? a.stretch * v : 0;
                        Math.abs(S) < .001 && (S = 0),
                            Math.abs($) < .001 && ($ = 0),
                            Math.abs(w) < .001 && (w = 0),
                            Math.abs(y) < .001 && (y = 0),
                            Math.abs(b) < .001 && (b = 0);
                        var C = "translate3d(" + S + "px," + $ + "px," + w + "px)  rotateX(" + b + "deg) rotateY(" + y + "deg)";
                        if (m.transform(C),
                            m[0].style.zIndex = 1 - Math.abs(Math.round(v)),
                            a.slideShadows) {
                            var x = l ? m.find(".swiper-slide-shadow-left") : m.find(".swiper-slide-shadow-top")
                                , T = l ? m.find(".swiper-slide-shadow-right") : m.find(".swiper-slide-shadow-bottom");
                            0 === x.length && (x = i('<div class="swiper-slide-shadow-' + (l ? "left" : "top") + '"></div>'),
                                m.append(x)),
                                0 === T.length && (T = i('<div class="swiper-slide-shadow-' + (l ? "right" : "bottom") + '"></div>'),
                                    m.append(T)),
                                x.length && (x[0].style.opacity = v > 0 ? v : 0),
                                T.length && (T[0].style.opacity = -v > 0 ? -v : 0)
                        }
                    }
                    (s.pointerEvents || s.prefixedPointerEvents) && (r[0].style.perspectiveOrigin = u + "px 50%")
                },
                setTransition: function (e) {
                    this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)
                }
            }
            , me = {
                init: function () {
                    var e = this.params.thumbs
                        , t = this.constructor;
                    e.swiper instanceof t ? (this.thumbs.swiper = e.swiper,
                        a.extend(this.thumbs.swiper.originalParams, {
                            watchSlidesProgress: !0,
                            slideToClickedSlide: !1
                        }),
                        a.extend(this.thumbs.swiper.params, {
                            watchSlidesProgress: !0,
                            slideToClickedSlide: !1
                        })) : a.isObject(e.swiper) && (this.thumbs.swiper = new t(a.extend({}, e.swiper, {
                            watchSlidesVisibility: !0,
                            watchSlidesProgress: !0,
                            slideToClickedSlide: !1
                        })),
                            this.thumbs.swiperCreated = !0),
                        this.thumbs.swiper.$el.addClass(this.params.thumbs.thumbsContainerClass),
                        this.thumbs.swiper.on("tap", this.thumbs.onThumbClick)
                },
                onThumbClick: function () {
                    var e = this.thumbs.swiper;
                    if (e) {
                        var t = e.clickedIndex
                            , n = e.clickedSlide;
                        if (!(n && i(n).hasClass(this.params.thumbs.slideThumbActiveClass) || null == t)) {
                            var r;
                            if (r = e.params.loop ? parseInt(i(e.clickedSlide).attr("data-swiper-slide-index"), 10) : t,
                                this.params.loop) {
                                var o = this.activeIndex;
                                this.slides.eq(o).hasClass(this.params.slideDuplicateClass) && (this.loopFix(),
                                    this._clientLeft = this.$wrapperEl[0].clientLeft,
                                    o = this.activeIndex);
                                var a = this.slides.eq(o).prevAll('[data-swiper-slide-index="' + r + '"]').eq(0).index()
                                    , s = this.slides.eq(o).nextAll('[data-swiper-slide-index="' + r + '"]').eq(0).index();
                                r = void 0 === a ? s : void 0 === s ? a : s - o < o - a ? s : a
                            }
                            this.slideTo(r)
                        }
                    }
                },
                update: function (e) {
                    var t = this.thumbs.swiper;
                    if (t) {
                        var n = "auto" === t.params.slidesPerView ? t.slidesPerViewDynamic() : t.params.slidesPerView;
                        if (this.realIndex !== t.realIndex) {
                            var i, r = t.activeIndex;
                            if (t.params.loop) {
                                t.slides.eq(r).hasClass(t.params.slideDuplicateClass) && (t.loopFix(),
                                    t._clientLeft = t.$wrapperEl[0].clientLeft,
                                    r = t.activeIndex);
                                var o = t.slides.eq(r).prevAll('[data-swiper-slide-index="' + this.realIndex + '"]').eq(0).index()
                                    , a = t.slides.eq(r).nextAll('[data-swiper-slide-index="' + this.realIndex + '"]').eq(0).index();
                                i = void 0 === o ? a : void 0 === a ? o : a - r == r - o ? r : a - r < r - o ? a : o
                            } else
                                i = this.realIndex;
                            t.visibleSlidesIndexes && t.visibleSlidesIndexes.indexOf(i) < 0 && (t.params.centeredSlides ? i = i > r ? i - Math.floor(n / 2) + 1 : i + Math.floor(n / 2) - 1 : i > r && (i = i - n + 1),
                                t.slideTo(i, e ? 0 : void 0))
                        }
                        var s = 1
                            , l = this.params.thumbs.slideThumbActiveClass;
                        if (this.params.slidesPerView > 1 && !this.params.centeredSlides && (s = this.params.slidesPerView),
                            t.slides.removeClass(l),
                            t.params.loop || t.params.virtual && t.params.virtual.enabled)
                            for (var c = 0; c < s; c += 1)
                                t.$wrapperEl.children('[data-swiper-slide-index="' + (this.realIndex + c) + '"]').addClass(l);
                        else
                            for (var u = 0; u < s; u += 1)
                                t.slides.eq(this.realIndex + u).addClass(l)
                    }
                }
            }
            , ge = [V, z, W, q, Y, J, Q, {
                name: "mousewheel",
                params: {
                    mousewheel: {
                        enabled: !1,
                        releaseOnEdges: !1,
                        invert: !1,
                        forceToAxis: !1,
                        sensitivity: 1,
                        eventsTarged: "container"
                    }
                },
                create: function () {
                    a.extend(this, {
                        mousewheel: {
                            enabled: !1,
                            enable: Z.enable.bind(this),
                            disable: Z.disable.bind(this),
                            handle: Z.handle.bind(this),
                            handleMouseEnter: Z.handleMouseEnter.bind(this),
                            handleMouseLeave: Z.handleMouseLeave.bind(this),
                            lastScrollTime: a.now(),
                            lastEventBeforeSnap: void 0,
                            recentWheelEvents: []
                        }
                    })
                },
                on: {
                    init: function () {
                        !this.params.mousewheel.enabled && this.params.cssMode && this.mousewheel.disable(),
                            this.params.mousewheel.enabled && this.mousewheel.enable()
                    },
                    destroy: function () {
                        this.params.cssMode && this.mousewheel.enable(),
                            this.mousewheel.enabled && this.mousewheel.disable()
                    }
                }
            }, {
                    name: "navigation",
                    params: {
                        navigation: {
                            nextEl: null,
                            prevEl: null,
                            hideOnClick: !1,
                            disabledClass: "swiper-button-disabled",
                            hiddenClass: "swiper-button-hidden",
                            lockClass: "swiper-button-lock"
                        }
                    },
                    create: function () {
                        a.extend(this, {
                            navigation: {
                                init: ee.init.bind(this),
                                update: ee.update.bind(this),
                                destroy: ee.destroy.bind(this),
                                onNextClick: ee.onNextClick.bind(this),
                                onPrevClick: ee.onPrevClick.bind(this)
                            }
                        })
                    },
                    on: {
                        init: function () {
                            this.navigation.init(),
                                this.navigation.update()
                        },
                        toEdge: function () {
                            this.navigation.update()
                        },
                        fromEdge: function () {
                            this.navigation.update()
                        },
                        destroy: function () {
                            this.navigation.destroy()
                        },
                        click: function (e) {
                            var t, n = this.navigation, r = n.$nextEl, o = n.$prevEl;
                            !this.params.navigation.hideOnClick || i(e.target).is(o) || i(e.target).is(r) || (r ? t = r.hasClass(this.params.navigation.hiddenClass) : o && (t = o.hasClass(this.params.navigation.hiddenClass)),
                                !0 === t ? this.emit("navigationShow", this) : this.emit("navigationHide", this),
                                r && r.toggleClass(this.params.navigation.hiddenClass),
                                o && o.toggleClass(this.params.navigation.hiddenClass))
                        }
                    }
                }, {
                    name: "pagination",
                    params: {
                        pagination: {
                            el: null,
                            bulletElement: "span",
                            clickable: !1,
                            hideOnClick: !1,
                            renderBullet: null,
                            renderProgressbar: null,
                            renderFraction: null,
                            renderCustom: null,
                            progressbarOpposite: !1,
                            type: "bullets",
                            dynamicBullets: !1,
                            dynamicMainBullets: 1,
                            formatFractionCurrent: function (e) {
                                return e
                            },
                            formatFractionTotal: function (e) {
                                return e
                            },
                            bulletClass: "swiper-pagination-bullet",
                            bulletActiveClass: "swiper-pagination-bullet-active",
                            modifierClass: "swiper-pagination-",
                            currentClass: "swiper-pagination-current",
                            totalClass: "swiper-pagination-total",
                            hiddenClass: "swiper-pagination-hidden",
                            progressbarFillClass: "swiper-pagination-progressbar-fill",
                            progressbarOppositeClass: "swiper-pagination-progressbar-opposite",
                            clickableClass: "swiper-pagination-clickable",
                            lockClass: "swiper-pagination-lock"
                        }
                    },
                    create: function () {
                        a.extend(this, {
                            pagination: {
                                init: te.init.bind(this),
                                render: te.render.bind(this),
                                update: te.update.bind(this),
                                destroy: te.destroy.bind(this),
                                dynamicBulletIndex: 0
                            }
                        })
                    },
                    on: {
                        init: function () {
                            this.pagination.init(),
                                this.pagination.render(),
                                this.pagination.update()
                        },
                        activeIndexChange: function () {
                            this.params.loop ? this.pagination.update() : void 0 === this.snapIndex && this.pagination.update()
                        },
                        snapIndexChange: function () {
                            this.params.loop || this.pagination.update()
                        },
                        slidesLengthChange: function () {
                            this.params.loop && (this.pagination.render(),
                                this.pagination.update())
                        },
                        snapGridLengthChange: function () {
                            this.params.loop || (this.pagination.render(),
                                this.pagination.update())
                        },
                        destroy: function () {
                            this.pagination.destroy()
                        },
                        click: function (e) {
                            this.params.pagination.el && this.params.pagination.hideOnClick && this.pagination.$el.length > 0 && !i(e.target).hasClass(this.params.pagination.bulletClass) && (!0 === this.pagination.$el.hasClass(this.params.pagination.hiddenClass) ? this.emit("paginationShow", this) : this.emit("paginationHide", this),
                                this.pagination.$el.toggleClass(this.params.pagination.hiddenClass))
                        }
                    }
                }, {
                    name: "scrollbar",
                    params: {
                        scrollbar: {
                            el: null,
                            dragSize: "auto",
                            hide: !1,
                            draggable: !1,
                            snapOnRelease: !0,
                            lockClass: "swiper-scrollbar-lock",
                            dragClass: "swiper-scrollbar-drag"
                        }
                    },
                    create: function () {
                        a.extend(this, {
                            scrollbar: {
                                init: ne.init.bind(this),
                                destroy: ne.destroy.bind(this),
                                updateSize: ne.updateSize.bind(this),
                                setTranslate: ne.setTranslate.bind(this),
                                setTransition: ne.setTransition.bind(this),
                                enableDraggable: ne.enableDraggable.bind(this),
                                disableDraggable: ne.disableDraggable.bind(this),
                                setDragPosition: ne.setDragPosition.bind(this),
                                getPointerPosition: ne.getPointerPosition.bind(this),
                                onDragStart: ne.onDragStart.bind(this),
                                onDragMove: ne.onDragMove.bind(this),
                                onDragEnd: ne.onDragEnd.bind(this),
                                isTouched: !1,
                                timeout: null,
                                dragTimeout: null
                            }
                        })
                    },
                    on: {
                        init: function () {
                            this.scrollbar.init(),
                                this.scrollbar.updateSize(),
                                this.scrollbar.setTranslate()
                        },
                        update: function () {
                            this.scrollbar.updateSize()
                        },
                        resize: function () {
                            this.scrollbar.updateSize()
                        },
                        observerUpdate: function () {
                            this.scrollbar.updateSize()
                        },
                        setTranslate: function () {
                            this.scrollbar.setTranslate()
                        },
                        setTransition: function (e) {
                            this.scrollbar.setTransition(e)
                        },
                        destroy: function () {
                            this.scrollbar.destroy()
                        }
                    }
                }, {
                    name: "parallax",
                    params: {
                        parallax: {
                            enabled: !1
                        }
                    },
                    create: function () {
                        a.extend(this, {
                            parallax: {
                                setTransform: ie.setTransform.bind(this),
                                setTranslate: ie.setTranslate.bind(this),
                                setTransition: ie.setTransition.bind(this)
                            }
                        })
                    },
                    on: {
                        beforeInit: function () {
                            this.params.parallax.enabled && (this.params.watchSlidesProgress = !0,
                                this.originalParams.watchSlidesProgress = !0)
                        },
                        init: function () {
                            this.params.parallax.enabled && this.parallax.setTranslate()
                        },
                        setTranslate: function () {
                            this.params.parallax.enabled && this.parallax.setTranslate()
                        },
                        setTransition: function (e) {
                            this.params.parallax.enabled && this.parallax.setTransition(e)
                        }
                    }
                }, {
                    name: "zoom",
                    params: {
                        zoom: {
                            enabled: !1,
                            maxRatio: 3,
                            minRatio: 1,
                            toggle: !0,
                            containerClass: "swiper-zoom-container",
                            zoomedSlideClass: "swiper-slide-zoomed"
                        }
                    },
                    create: function () {
                        var e = this
                            , t = {
                                enabled: !1,
                                scale: 1,
                                currentScale: 1,
                                isScaling: !1,
                                gesture: {
                                    $slideEl: void 0,
                                    slideWidth: void 0,
                                    slideHeight: void 0,
                                    $imageEl: void 0,
                                    $imageWrapEl: void 0,
                                    maxRatio: 3
                                },
                                image: {
                                    isTouched: void 0,
                                    isMoved: void 0,
                                    currentX: void 0,
                                    currentY: void 0,
                                    minX: void 0,
                                    minY: void 0,
                                    maxX: void 0,
                                    maxY: void 0,
                                    width: void 0,
                                    height: void 0,
                                    startX: void 0,
                                    startY: void 0,
                                    touchesStart: {},
                                    touchesCurrent: {}
                                },
                                velocity: {
                                    x: void 0,
                                    y: void 0,
                                    prevPositionX: void 0,
                                    prevPositionY: void 0,
                                    prevTime: void 0
                                }
                            };
                        "onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach(function (n) {
                            t[n] = re[n].bind(e)
                        }),
                            a.extend(e, {
                                zoom: t
                            });
                        var n = 1;
                        Object.defineProperty(e.zoom, "scale", {
                            get: function () {
                                return n
                            },
                            set: function (t) {
                                if (n !== t) {
                                    var i = e.zoom.gesture.$imageEl ? e.zoom.gesture.$imageEl[0] : void 0
                                        , r = e.zoom.gesture.$slideEl ? e.zoom.gesture.$slideEl[0] : void 0;
                                    e.emit("zoomChange", t, i, r)
                                }
                                n = t
                            }
                        })
                    },
                    on: {
                        init: function () {
                            this.params.zoom.enabled && this.zoom.enable()
                        },
                        destroy: function () {
                            this.zoom.disable()
                        },
                        touchStart: function (e) {
                            this.zoom.enabled && this.zoom.onTouchStart(e)
                        },
                        touchEnd: function (e) {
                            this.zoom.enabled && this.zoom.onTouchEnd(e)
                        },
                        doubleTap: function (e) {
                            this.params.zoom.enabled && this.zoom.enabled && this.params.zoom.toggle && this.zoom.toggle(e)
                        },
                        transitionEnd: function () {
                            this.zoom.enabled && this.params.zoom.enabled && this.zoom.onTransitionEnd()
                        },
                        slideChange: function () {
                            this.zoom.enabled && this.params.zoom.enabled && this.params.cssMode && this.zoom.onTransitionEnd()
                        }
                    }
                }, {
                    name: "lazy",
                    params: {
                        lazy: {
                            enabled: !1,
                            loadPrevNext: !1,
                            loadPrevNextAmount: 1,
                            loadOnTransitionStart: !1,
                            elementClass: "swiper-lazy",
                            loadingClass: "swiper-lazy-loading",
                            loadedClass: "swiper-lazy-loaded",
                            preloaderClass: "swiper-lazy-preloader"
                        }
                    },
                    create: function () {
                        a.extend(this, {
                            lazy: {
                                initialImageLoaded: !1,
                                load: oe.load.bind(this),
                                loadInSlide: oe.loadInSlide.bind(this)
                            }
                        })
                    },
                    on: {
                        beforeInit: function () {
                            this.params.lazy.enabled && this.params.preloadImages && (this.params.preloadImages = !1)
                        },
                        init: function () {
                            this.params.lazy.enabled && !this.params.loop && 0 === this.params.initialSlide && this.lazy.load()
                        },
                        scroll: function () {
                            this.params.freeMode && !this.params.freeModeSticky && this.lazy.load()
                        },
                        resize: function () {
                            this.params.lazy.enabled && this.lazy.load()
                        },
                        scrollbarDragMove: function () {
                            this.params.lazy.enabled && this.lazy.load()
                        },
                        transitionStart: function () {
                            this.params.lazy.enabled && (this.params.lazy.loadOnTransitionStart || !this.params.lazy.loadOnTransitionStart && !this.lazy.initialImageLoaded) && this.lazy.load()
                        },
                        transitionEnd: function () {
                            this.params.lazy.enabled && !this.params.lazy.loadOnTransitionStart && this.lazy.load()
                        },
                        slideChange: function () {
                            this.params.lazy.enabled && this.params.cssMode && this.lazy.load()
                        }
                    }
                }, {
                    name: "controller",
                    params: {
                        controller: {
                            control: void 0,
                            inverse: !1,
                            by: "slide"
                        }
                    },
                    create: function () {
                        a.extend(this, {
                            controller: {
                                control: this.params.controller.control,
                                getInterpolateFunction: ae.getInterpolateFunction.bind(this),
                                setTranslate: ae.setTranslate.bind(this),
                                setTransition: ae.setTransition.bind(this)
                            }
                        })
                    },
                    on: {
                        update: function () {
                            this.controller.control && this.controller.spline && (this.controller.spline = void 0,
                                delete this.controller.spline)
                        },
                        resize: function () {
                            this.controller.control && this.controller.spline && (this.controller.spline = void 0,
                                delete this.controller.spline)
                        },
                        observerUpdate: function () {
                            this.controller.control && this.controller.spline && (this.controller.spline = void 0,
                                delete this.controller.spline)
                        },
                        setTranslate: function (e, t) {
                            this.controller.control && this.controller.setTranslate(e, t)
                        },
                        setTransition: function (e, t) {
                            this.controller.control && this.controller.setTransition(e, t)
                        }
                    }
                }, {
                    name: "a11y",
                    params: {
                        a11y: {
                            enabled: !0,
                            notificationClass: "swiper-notification",
                            prevSlideMessage: "Previous slide",
                            nextSlideMessage: "Next slide",
                            firstSlideMessage: "This is the first slide",
                            lastSlideMessage: "This is the last slide",
                            paginationBulletMessage: "Go to slide {{index}}"
                        }
                    },
                    create: function () {
                        var e = this;
                        a.extend(e, {
                            a11y: {
                                liveRegion: i('<span class="' + e.params.a11y.notificationClass + '" aria-live="assertive" aria-atomic="true"></span>')
                            }
                        }),
                            Object.keys(se).forEach(function (t) {
                                e.a11y[t] = se[t].bind(e)
                            })
                    },
                    on: {
                        init: function () {
                            this.params.a11y.enabled && (this.a11y.init(),
                                this.a11y.updateNavigation())
                        },
                        toEdge: function () {
                            this.params.a11y.enabled && this.a11y.updateNavigation()
                        },
                        fromEdge: function () {
                            this.params.a11y.enabled && this.a11y.updateNavigation()
                        },
                        paginationUpdate: function () {
                            this.params.a11y.enabled && this.a11y.updatePagination()
                        },
                        destroy: function () {
                            this.params.a11y.enabled && this.a11y.destroy()
                        }
                    }
                }, {
                    name: "history",
                    params: {
                        history: {
                            enabled: !1,
                            replaceState: !1,
                            key: "slides"
                        }
                    },
                    create: function () {
                        a.extend(this, {
                            history: {
                                init: le.init.bind(this),
                                setHistory: le.setHistory.bind(this),
                                setHistoryPopState: le.setHistoryPopState.bind(this),
                                scrollToSlide: le.scrollToSlide.bind(this),
                                destroy: le.destroy.bind(this)
                            }
                        })
                    },
                    on: {
                        init: function () {
                            this.params.history.enabled && this.history.init()
                        },
                        destroy: function () {
                            this.params.history.enabled && this.history.destroy()
                        },
                        transitionEnd: function () {
                            this.history.initialized && this.history.setHistory(this.params.history.key, this.activeIndex)
                        },
                        slideChange: function () {
                            this.history.initialized && this.params.cssMode && this.history.setHistory(this.params.history.key, this.activeIndex)
                        }
                    }
                }, {
                    name: "hash-navigation",
                    params: {
                        hashNavigation: {
                            enabled: !1,
                            replaceState: !1,
                            watchState: !1
                        }
                    },
                    create: function () {
                        a.extend(this, {
                            hashNavigation: {
                                initialized: !1,
                                init: ce.init.bind(this),
                                destroy: ce.destroy.bind(this),
                                setHash: ce.setHash.bind(this),
                                onHashCange: ce.onHashCange.bind(this)
                            }
                        })
                    },
                    on: {
                        init: function () {
                            this.params.hashNavigation.enabled && this.hashNavigation.init()
                        },
                        destroy: function () {
                            this.params.hashNavigation.enabled && this.hashNavigation.destroy()
                        },
                        transitionEnd: function () {
                            this.hashNavigation.initialized && this.hashNavigation.setHash()
                        },
                        slideChange: function () {
                            this.hashNavigation.initialized && this.params.cssMode && this.hashNavigation.setHash()
                        }
                    }
                }, {
                    name: "autoplay",
                    params: {
                        autoplay: {
                            enabled: !1,
                            delay: 3e3,
                            waitForTransition: !0,
                            disableOnInteraction: !0,
                            stopOnLastSlide: !1,
                            reverseDirection: !1
                        }
                    },
                    create: function () {
                        var e = this;
                        a.extend(e, {
                            autoplay: {
                                running: !1,
                                paused: !1,
                                run: ue.run.bind(e),
                                start: ue.start.bind(e),
                                stop: ue.stop.bind(e),
                                pause: ue.pause.bind(e),
                                onVisibilityChange: function () {
                                    "hidden" === document.visibilityState && e.autoplay.running && e.autoplay.pause(),
                                        "visible" === document.visibilityState && e.autoplay.paused && (e.autoplay.run(),
                                            e.autoplay.paused = !1)
                                },
                                onTransitionEnd: function (t) {
                                    e && !e.destroyed && e.$wrapperEl && t.target === this && (e.$wrapperEl[0].removeEventListener("transitionend", e.autoplay.onTransitionEnd),
                                        e.$wrapperEl[0].removeEventListener("webkitTransitionEnd", e.autoplay.onTransitionEnd),
                                        e.autoplay.paused = !1,
                                        e.autoplay.running ? e.autoplay.run() : e.autoplay.stop())
                                }
                            }
                        })
                    },
                    on: {
                        init: function () {
                            this.params.autoplay.enabled && (this.autoplay.start(),
                                document.addEventListener("visibilitychange", this.autoplay.onVisibilityChange))
                        },
                        beforeTransitionStart: function (e, t) {
                            this.autoplay.running && (t || !this.params.autoplay.disableOnInteraction ? this.autoplay.pause(e) : this.autoplay.stop())
                        },
                        sliderFirstMove: function () {
                            this.autoplay.running && (this.params.autoplay.disableOnInteraction ? this.autoplay.stop() : this.autoplay.pause())
                        },
                        touchEnd: function () {
                            this.params.cssMode && this.autoplay.paused && !this.params.autoplay.disableOnInteraction && this.autoplay.run()
                        },
                        destroy: function () {
                            this.autoplay.running && this.autoplay.stop(),
                                document.removeEventListener("visibilitychange", this.autoplay.onVisibilityChange)
                        }
                    }
                }, {
                    name: "effect-fade",
                    params: {
                        fadeEffect: {
                            crossFade: !1
                        }
                    },
                    create: function () {
                        a.extend(this, {
                            fadeEffect: {
                                setTranslate: de.setTranslate.bind(this),
                                setTransition: de.setTransition.bind(this)
                            }
                        })
                    },
                    on: {
                        beforeInit: function () {
                            if ("fade" === this.params.effect) {
                                this.classNames.push(this.params.containerModifierClass + "fade");
                                var e = {
                                    slidesPerView: 1,
                                    slidesPerColumn: 1,
                                    slidesPerGroup: 1,
                                    watchSlidesProgress: !0,
                                    spaceBetween: 0,
                                    virtualTranslate: !0
                                };
                                a.extend(this.params, e),
                                    a.extend(this.originalParams, e)
                            }
                        },
                        setTranslate: function () {
                            "fade" === this.params.effect && this.fadeEffect.setTranslate()
                        },
                        setTransition: function (e) {
                            "fade" === this.params.effect && this.fadeEffect.setTransition(e)
                        }
                    }
                }, {
                    name: "effect-cube",
                    params: {
                        cubeEffect: {
                            slideShadows: !0,
                            shadow: !0,
                            shadowOffset: 20,
                            shadowScale: .94
                        }
                    },
                    create: function () {
                        a.extend(this, {
                            cubeEffect: {
                                setTranslate: pe.setTranslate.bind(this),
                                setTransition: pe.setTransition.bind(this)
                            }
                        })
                    },
                    on: {
                        beforeInit: function () {
                            if ("cube" === this.params.effect) {
                                this.classNames.push(this.params.containerModifierClass + "cube"),
                                    this.classNames.push(this.params.containerModifierClass + "3d");
                                var e = {
                                    slidesPerView: 1,
                                    slidesPerColumn: 1,
                                    slidesPerGroup: 1,
                                    watchSlidesProgress: !0,
                                    resistanceRatio: 0,
                                    spaceBetween: 0,
                                    centeredSlides: !1,
                                    virtualTranslate: !0
                                };
                                a.extend(this.params, e),
                                    a.extend(this.originalParams, e)
                            }
                        },
                        setTranslate: function () {
                            "cube" === this.params.effect && this.cubeEffect.setTranslate()
                        },
                        setTransition: function (e) {
                            "cube" === this.params.effect && this.cubeEffect.setTransition(e)
                        }
                    }
                }, {
                    name: "effect-flip",
                    params: {
                        flipEffect: {
                            slideShadows: !0,
                            limitRotation: !0
                        }
                    },
                    create: function () {
                        a.extend(this, {
                            flipEffect: {
                                setTranslate: he.setTranslate.bind(this),
                                setTransition: he.setTransition.bind(this)
                            }
                        })
                    },
                    on: {
                        beforeInit: function () {
                            if ("flip" === this.params.effect) {
                                this.classNames.push(this.params.containerModifierClass + "flip"),
                                    this.classNames.push(this.params.containerModifierClass + "3d");
                                var e = {
                                    slidesPerView: 1,
                                    slidesPerColumn: 1,
                                    slidesPerGroup: 1,
                                    watchSlidesProgress: !0,
                                    spaceBetween: 0,
                                    virtualTranslate: !0
                                };
                                a.extend(this.params, e),
                                    a.extend(this.originalParams, e)
                            }
                        },
                        setTranslate: function () {
                            "flip" === this.params.effect && this.flipEffect.setTranslate()
                        },
                        setTransition: function (e) {
                            "flip" === this.params.effect && this.flipEffect.setTransition(e)
                        }
                    }
                }, {
                    name: "effect-coverflow",
                    params: {
                        coverflowEffect: {
                            rotate: 50,
                            stretch: 0,
                            depth: 100,
                            modifier: 1,
                            slideShadows: !0
                        }
                    },
                    create: function () {
                        a.extend(this, {
                            coverflowEffect: {
                                setTranslate: fe.setTranslate.bind(this),
                                setTransition: fe.setTransition.bind(this)
                            }
                        })
                    },
                    on: {
                        beforeInit: function () {
                            "coverflow" === this.params.effect && (this.classNames.push(this.params.containerModifierClass + "coverflow"),
                                this.classNames.push(this.params.containerModifierClass + "3d"),
                                this.params.watchSlidesProgress = !0,
                                this.originalParams.watchSlidesProgress = !0)
                        },
                        setTranslate: function () {
                            "coverflow" === this.params.effect && this.coverflowEffect.setTranslate()
                        },
                        setTransition: function (e) {
                            "coverflow" === this.params.effect && this.coverflowEffect.setTransition(e)
                        }
                    }
                }, {
                    name: "thumbs",
                    params: {
                        thumbs: {
                            swiper: null,
                            slideThumbActiveClass: "swiper-slide-thumb-active",
                            thumbsContainerClass: "swiper-container-thumbs"
                        }
                    },
                    create: function () {
                        a.extend(this, {
                            thumbs: {
                                swiper: null,
                                init: me.init.bind(this),
                                update: me.update.bind(this),
                                onThumbClick: me.onThumbClick.bind(this)
                            }
                        })
                    },
                    on: {
                        beforeInit: function () {
                            var e = this.params.thumbs;
                            e && e.swiper && (this.thumbs.init(),
                                this.thumbs.update(!0))
                        },
                        slideChange: function () {
                            this.thumbs.swiper && this.thumbs.update()
                        },
                        update: function () {
                            this.thumbs.swiper && this.thumbs.update()
                        },
                        resize: function () {
                            this.thumbs.swiper && this.thumbs.update()
                        },
                        observerUpdate: function () {
                            this.thumbs.swiper && this.thumbs.update()
                        },
                        setTransition: function (e) {
                            var t = this.thumbs.swiper;
                            t && t.setTransition(e)
                        },
                        beforeDestroy: function () {
                            var e = this.thumbs.swiper;
                            e && this.thumbs.swiperCreated && e && e.destroy()
                        }
                    }
                }];
        return void 0 === B.use && (B.use = B.Class.use,
            B.installModule = B.Class.installModule),
            B.use(ge),
            B
    }),
    function () {
        "use strict";
        function e() { }
        function t(e, t) {
            for (var n = e.length; n--;)
                if (e[n].listener === t)
                    return n;
            return -1
        }
        function n(e) {
            return function () {
                return this[e].apply(this, arguments)
            }
        }
        var i = e.prototype
            , r = this
            , o = r.EventEmitter;
        i.getListeners = function (e) {
            var t, n, i = this._getEvents();
            if (e instanceof RegExp)
                for (n in t = {},
                    i)
                    i.hasOwnProperty(n) && e.test(n) && (t[n] = i[n]);
            else
                t = i[e] || (i[e] = []);
            return t
        }
            ,
            i.flattenListeners = function (e) {
                var t, n = [];
                for (t = 0; t < e.length; t += 1)
                    n.push(e[t].listener);
                return n
            }
            ,
            i.getListenersAsObject = function (e) {
                var t, n = this.getListeners(e);
                return n instanceof Array && ((t = {})[e] = n),
                    t || n
            }
            ,
            i.addListener = function (e, n) {
                var i, r = this.getListenersAsObject(e), o = "object" == typeof n;
                for (i in r)
                    r.hasOwnProperty(i) && -1 === t(r[i], n) && r[i].push(o ? n : {
                        listener: n,
                        once: !1
                    });
                return this
            }
            ,
            i.on = n("addListener"),
            i.addOnceListener = function (e, t) {
                return this.addListener(e, {
                    listener: t,
                    once: !0
                })
            }
            ,
            i.once = n("addOnceListener"),
            i.defineEvent = function (e) {
                return this.getListeners(e),
                    this
            }
            ,
            i.defineEvents = function (e) {
                for (var t = 0; t < e.length; t += 1)
                    this.defineEvent(e[t]);
                return this
            }
            ,
            i.removeListener = function (e, n) {
                var i, r, o = this.getListenersAsObject(e);
                for (r in o)
                    o.hasOwnProperty(r) && (-1 !== (i = t(o[r], n)) && o[r].splice(i, 1));
                return this
            }
            ,
            i.off = n("removeListener"),
            i.addListeners = function (e, t) {
                return this.manipulateListeners(!1, e, t)
            }
            ,
            i.removeListeners = function (e, t) {
                return this.manipulateListeners(!0, e, t)
            }
            ,
            i.manipulateListeners = function (e, t, n) {
                var i, r, o = e ? this.removeListener : this.addListener, a = e ? this.removeListeners : this.addListeners;
                if ("object" != typeof t || t instanceof RegExp)
                    for (i = n.length; i--;)
                        o.call(this, t, n[i]);
                else
                    for (i in t)
                        t.hasOwnProperty(i) && (r = t[i]) && ("function" == typeof r ? o.call(this, i, r) : a.call(this, i, r));
                return this
            }
            ,
            i.removeEvent = function (e) {
                var t, n = typeof e, i = this._getEvents();
                if ("string" === n)
                    delete i[e];
                else if (e instanceof RegExp)
                    for (t in i)
                        i.hasOwnProperty(t) && e.test(t) && delete i[t];
                else
                    delete this._events;
                return this
            }
            ,
            i.removeAllListeners = n("removeEvent"),
            i.emitEvent = function (e, t) {
                var n, i, r, o = this.getListenersAsObject(e);
                for (r in o)
                    if (o.hasOwnProperty(r))
                        for (i = o[r].length; i--;)
                            !0 === (n = o[r][i]).once && this.removeListener(e, n.listener),
                                n.listener.apply(this, t || []) === this._getOnceReturnValue() && this.removeListener(e, n.listener);
                return this
            }
            ,
            i.trigger = n("emitEvent"),
            i.emit = function (e) {
                var t = Array.prototype.slice.call(arguments, 1);
                return this.emitEvent(e, t)
            }
            ,
            i.setOnceReturnValue = function (e) {
                return this._onceReturnValue = e,
                    this
            }
            ,
            i._getOnceReturnValue = function () {
                return !this.hasOwnProperty("_onceReturnValue") || this._onceReturnValue
            }
            ,
            i._getEvents = function () {
                return this._events || (this._events = {})
            }
            ,
            e.noConflict = function () {
                return r.EventEmitter = o,
                    e
            }
            ,
            "function" == typeof define && define.amd ? define(function () {
                return e
            }) : "object" == typeof module && module.exports ? module.exports = e : r.EventEmitter = e
    }
        .call(this),
    function (e) {
        "object" == typeof exports && "undefined" != typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define([], e) : ("undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this).Wy = e()
    }(function () {
        return function e(t, n, i) {
            function r(a, s) {
                if (!n[a]) {
                    if (!t[a]) {
                        var l = "function" == typeof require && require;
                        if (!s && l)
                            return l(a, !0);
                        if (o)
                            return o(a, !0);
                        var c = new Error("Cannot find module '" + a + "'");
                        throw c.code = "MODULE_NOT_FOUND",
                        c
                    }
                    var u = n[a] = {
                        exports: {}
                    };
                    t[a][0].call(u.exports, function (e) {
                        return r(t[a][1][e] || e)
                    }, u, u.exports, e, t, n, i)
                }
                return n[a].exports
            }
            for (var o = "function" == typeof require && require, a = 0; a < i.length; a++)
                r(i[a]);
            return r
        }({
            1: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.Base64 = void 0;
                var i = function () {
                    var e, t, n, i = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "+", "/"], r = [];
                    for (n = 0; n < i.length; n += 1)
                        r[i[n]] = n;
                    var o = function (n) {
                        e = n,
                            t = 0
                    }
                        , a = function () {
                            if (!e)
                                return -1;
                            if (t >= e.length)
                                return -1;
                            var n = 255 & e.charCodeAt(t);
                            return t += 1,
                                n
                        }
                        , s = function () {
                            if (!e)
                                return -1;
                            for (; ;) {
                                if (t >= e.length)
                                    return -1;
                                var n = e.charAt(t);
                                if (t += 1,
                                    r[n])
                                    return r[n];
                                if ("A" === n)
                                    return 0
                            }
                        }
                        , l = function (e) {
                            return 1 === (e = e.toString(16)).length && (e = "0" + e),
                                e = "%" + e,
                                unescape(e)
                        };
                    return {
                        encodeBase64: function (e) {
                            var t, n;
                            o(e),
                                t = "";
                            var r = new Array(3);
                            for (n = !1; !n && -1 !== (r[0] = a());)
                                r[1] = a(),
                                    r[2] = a(),
                                    t += i[r[0] >> 2],
                                    -1 !== r[1] ? (t += i[r[0] << 4 & 48 | r[1] >> 4],
                                        -1 !== r[2] ? (t += i[r[1] << 2 & 60 | r[2] >> 6],
                                            t += i[63 & r[2]]) : (t += i[r[1] << 2 & 60],
                                                t += "=",
                                                n = !0)) : (t += i[r[0] << 4 & 48],
                                                    t += "=",
                                                    t += "=",
                                                    n = !0);
                            return t
                        },
                        decodeBase64: function (e) {
                            var t, n;
                            o(e),
                                t = "";
                            var i = new Array(4);
                            for (n = !1; !n && -1 !== (i[0] = s()) && -1 !== (i[1] = s());)
                                i[2] = s(),
                                    i[3] = s(),
                                    t += l(i[0] << 2 & 255 | i[1] >> 4),
                                    -1 !== i[2] ? (t += l(i[1] << 4 & 255 | i[2] >> 2),
                                        -1 !== i[3] ? t += l(i[2] << 6 & 255 | i[3]) : n = !0) : n = !0;
                            return t
                        }
                    }
                }();
                n.Base64 = i
            }
                , {}],
            2: [function (e, t, n) {
                "use strict";
                function i(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.VideoEncodingParameters = n.VideoCodecParameters = n.VideoCodec = n.AudioEncodingParameters = n.AudioCodecParameters = n.AudioCodec = void 0,
                    n.AudioCodec = {
                        PCMU: "pcmu",
                        PCMA: "pcma",
                        OPUS: "opus",
                        G722: "g722",
                        ISAC: "iSAC",
                        ILBC: "iLBC",
                        AAC: "aac",
                        AC3: "ac3",
                        NELLYMOSER: "nellymoser"
                    },
                    n.AudioCodecParameters = function e(t, n, r) {
                        i(this, e),
                            this.name = t,
                            this.channelCount = n,
                            this.clockRate = r
                    }
                    ,
                    n.AudioEncodingParameters = function e(t, n) {
                        i(this, e),
                            this.codec = t,
                            this.maxBitrate = n
                    }
                    ,
                    n.VideoCodec = {
                        VP8: "vp8",
                        VP9: "vp9",
                        H264: "h264",
                        H265: "h265"
                    },
                    n.VideoCodecParameters = function e(t, n) {
                        i(this, e),
                            this.name = t,
                            this.profile = n
                    }
                    ,
                    n.VideoEncodingParameters = function e(t, n) {
                        i(this, e),
                            this.codec = t,
                            this.maxBitrate = n
                    }
            }
                , {}],
            3: [function (e, t, n) {
                "use strict";
                function i(e) {
                    return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                        return typeof e
                    }
                        : function (e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        }
                    )(e)
                }
                function r(e, t) {
                    return !t || "object" !== i(t) && "function" != typeof t ? function (e) {
                        if (void 0 === e)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e
                    }(e) : t
                }
                function o(e) {
                    return (o = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                function a(e, t) {
                    if ("function" != typeof t && null !== t)
                        throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                        t && function (e, t) {
                            (Object.setPrototypeOf || function (e, t) {
                                return e.__proto__ = t,
                                    e
                            }
                            )(e, t)
                        }(e, t)
                }
                function s(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.MuteEvent = n.ErrorEvent = n.MessageEvent = n.OwtEvent = n.EventDispatcher = void 0,
                    n.EventDispatcher = function () {
                        var e = {
                            dispatcher: {}
                        };
                        e.dispatcher.eventListeners = {},
                            this.addEventListener = function (t, n) {
                                void 0 === e.dispatcher.eventListeners[t] && (e.dispatcher.eventListeners[t] = []),
                                    e.dispatcher.eventListeners[t].push(n)
                            }
                            ,
                            this.removeEventListener = function (t, n) {
                                if (e.dispatcher.eventListeners[t]) {
                                    var i = e.dispatcher.eventListeners[t].indexOf(n);
                                    -1 !== i && e.dispatcher.eventListeners[t].splice(i, 1)
                                }
                            }
                            ,
                            this.clearEventListener = function (t) {
                                e.dispatcher.eventListeners[t] = []
                            }
                            ,
                            this.dispatchEvent = function (t) {
                                e.dispatcher.eventListeners[t.type] && e.dispatcher.eventListeners[t.type].map(function (e) {
                                    e(t)
                                })
                            }
                    }
                    ;
                var l = function e(t) {
                    s(this, e),
                        this.type = t
                };
                n.OwtEvent = l;
                var c = function (e) {
                    function t(e, n) {
                        var i;
                        return s(this, t),
                            (i = r(this, o(t).call(this, e))).origin = n.origin,
                            i.message = n.message,
                            i.to = n.to,
                            i
                    }
                    return a(t, l),
                        t
                }();
                n.MessageEvent = c;
                var u = function (e) {
                    function t(e, n) {
                        var i;
                        return s(this, t),
                            (i = r(this, o(t).call(this, e))).error = n.error,
                            i
                    }
                    return a(t, l),
                        t
                }();
                n.ErrorEvent = u;
                var d = function (e) {
                    function t(e, n) {
                        var i;
                        return s(this, t),
                            (i = r(this, o(t).call(this, e))).kind = n.kind,
                            i
                    }
                    return a(t, l),
                        t
                }();
                n.MuteEvent = d
            }
                , {}],
            4: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                });
                var i = e("./mediastream-factory.js");
                Object.keys(i).forEach(function (e) {
                    "default" !== e && "__esModule" !== e && Object.defineProperty(n, e, {
                        enumerable: !0,
                        get: function () {
                            return i[e]
                        }
                    })
                });
                var r = e("./stream.js");
                Object.keys(r).forEach(function (e) {
                    "default" !== e && "__esModule" !== e && Object.defineProperty(n, e, {
                        enumerable: !0,
                        get: function () {
                            return r[e]
                        }
                    })
                });
                var o = e("./mediaformat.js");
                Object.keys(o).forEach(function (e) {
                    "default" !== e && "__esModule" !== e && Object.defineProperty(n, e, {
                        enumerable: !0,
                        get: function () {
                            return o[e]
                        }
                    })
                })
            }
                , {
                "./mediaformat.js": 6,
                "./mediastream-factory.js": 7,
                "./stream.js": 10
            }],
            5: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.default = void 0;
                var i = function () {
                    var e = function () { }
                        , t = {
                            DEBUG: 0,
                            TRACE: 1,
                            INFO: 2,
                            WARNING: 3,
                            ERROR: 4,
                            NONE: 5
                        };
                    t.log = window.console.log.bind(window.console);
                    var n = function (e) {
                        return "function" == typeof window.console[e] ? window.console[e].bind(window.console) : window.console.log.bind(window.console)
                    }
                        , i = function (i) {
                            t.debug = i <= 0 ? n("log") : e,
                                t.trace = i <= 1 ? n("trace") : e,
                                t.info = i <= 2 ? n("info") : e,
                                t.warning = i <= 3 ? n("warn") : e,
                                t.error = i <= 4 ? n("error") : e
                        };
                    return i(0),
                        t.setLogLevel = i,
                        t
                }();
                n.default = i
            }
                , {}],
            6: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.Resolution = n.TrackKind = n.VideoSourceInfo = n.AudioSourceInfo = void 0,
                    n.AudioSourceInfo = {
                        MIC: "mic",
                        SCREENCAST: "screen-cast",
                        FILE: "file",
                        MIXED: "mixed"
                    },
                    n.VideoSourceInfo = {
                        CAMERA: "camera",
                        SCREENCAST: "screen-cast",
                        FILE: "file",
                        MIXED: "mixed"
                    },
                    n.TrackKind = {
                        AUDIO: "audio",
                        VIDEO: "video",
                        AUDIO_AND_VIDEO: "av"
                    },
                    n.Resolution = function e(t, n) {
                        !function (e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, e),
                            this.width = t,
                            this.height = n
                    }
            }
                , {}],
            7: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.MediaStreamFactory = n.StreamConstraints = n.VideoTrackConstraints = n.AudioTrackConstraints = void 0;
                var i, r = a(e("./utils.js")), o = ((i = e("./logger.js")) && i.__esModule,
                    a(e("./mediaformat.js")));
                function a(e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            if (Object.prototype.hasOwnProperty.call(e, n)) {
                                var i = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(e, n) : {};
                                i.get || i.set ? Object.defineProperty(t, n, i) : t[n] = e[n]
                            }
                    return t.default = e,
                        t
                }
                function s(e, t) {
                    for (var n = 0; n < t.length; n++) {
                        var i = t[n];
                        i.enumerable = i.enumerable || !1,
                            i.configurable = !0,
                            "value" in i && (i.writable = !0),
                            Object.defineProperty(e, i.key, i)
                    }
                }
                function l(e) {
                    return (l = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                        return typeof e
                    }
                        : function (e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        }
                    )(e)
                }
                function c(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }
                function u(e) {
                    return "object" === l(e.video) && e.video.source === o.VideoSourceInfo.SCREENCAST
                }
                n.AudioTrackConstraints = function e(t) {
                    var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : void 0;
                    if (c(this, e),
                        !Object.values(o.AudioSourceInfo).some(function (e) {
                            return e === t
                        }))
                        throw new TypeError("Invalid source.");
                    this.source = t,
                        this.deviceId = n
                }
                    ,
                    n.VideoTrackConstraints = function e(t) {
                        var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : void 0
                            , i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0
                            , r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : void 0;
                        if (c(this, e),
                            !Object.values(o.VideoSourceInfo).some(function (e) {
                                return e === t
                            }))
                            throw new TypeError("Invalid source.");
                        this.source = t,
                            this.deviceId = n,
                            this.resolution = i,
                            this.frameRate = r
                    }
                    ,
                    n.StreamConstraints = function e() {
                        var t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]
                            , n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                        c(this, e),
                            this.audio = t,
                            this.video = n
                    }
                    ;
                var d = function () {
                    function e() {
                        c(this, e)
                    }
                    var t, n;
                    return t = e,
                        n = [{
                            key: "createMediaStream",
                            value: function (e) {
                                var t = Object.create({});
                                return new Promise(function (n, i) {
                                    return "object" !== l(e) || !e.audio && !e.video ? Promise.reject(new TypeError("Invalid constrains")) : u(e) || "object" !== l(e.audio) || e.audio.source !== o.AudioSourceInfo.SCREENCAST ? !u(e) || r.isChrome() || r.isFirefox() ? u(e) && "object" === l(e.audio) && e.audio.source !== o.AudioSourceInfo.SCREENCAST ? Promise.reject(new TypeError("Cannot capture video from screen cast while capture audio from other source.")) : e.audio || e.video ? ("object" === l(e.audio) && e.audio.source === o.AudioSourceInfo.MIC ? (t.audio = Object.create({}),
                                        r.isEdge() ? t.audio.deviceId = e.audio.deviceId : void 0 !== e.audio.deviceId && 0 !== e.audio.deviceId.length && (t.audio.deviceId = {
                                            exact: e.audio.deviceId
                                        })) : e.audio.source === o.AudioSourceInfo.SCREENCAST ? t.audio = !0 : t.audio = e.audio,
                                        "object" === l(e.video) ? (t.video = Object.create({}),
                                            "number" == typeof e.video.frameRate && (t.video.frameRate = Object.create({}),
                                                t.video.frameRate.min = 8,
                                                t.video.frameRate.ideal = e.video.frameRate,
                                                t.video.frameRate.max = e.video.frameRate),
                                            e.video.resolution && e.video.resolution.width && e.video.resolution.height && (e.video.source === o.VideoSourceInfo.SCREENCAST ? (t.video.width = e.video.resolution.width,
                                                t.video.height = e.video.resolution.height) : (t.video.width = Object.create({}),
                                                    t.video.width.ideal = e.video.resolution.width,
                                                    t.video.width.max = e.video.resolution.width,
                                                    t.video.height = Object.create({}),
                                                    t.video.height.min = 180,
                                                    t.video.height.ideal = e.video.resolution.height,
                                                    t.video.height.max = e.video.resolution.height)),
                                            "string" == typeof e.video.deviceId && (t.video.deviceId = e.video.deviceId),
                                            r.isFirefox() && e.video.source === o.VideoSourceInfo.SCREENCAST && (t.video.mediaSource = "screen")) : t.video = e.video,
                                        "object" === l(t.video) && 0 === Object.keys(t.video).length && (t.video = !0),
                                        "object" === l(t.audio) && 0 === Object.keys(t.audio).length && (t.audio = !0),
                                        void (u(e) ? n({
                                            getMedia: navigator.mediaDevices.getDisplayMedia(t),
                                            _mediaConstraints: t
                                        }) : n({
                                            getMedia: navigator.mediaDevices.getUserMedia(t),
                                            _mediaConstraints: t
                                        }))) : Promise.reject(new TypeError("At least one of audio and video must be requested.")) : Promise.reject(new TypeError("Screen sharing only supports Chrome and Firefox.")) : Promise.reject(new TypeError("Cannot share screen without video."))
                                }
                                )
                            }
                        }],
                        null && s(t.prototype, null),
                        n && s(t, n),
                        e
                }();
                n.MediaStreamFactory = d
            }
                , {
                "./logger.js": 5,
                "./mediaformat.js": 6,
                "./utils.js": 11
            }],
            8: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.PublishOptions = n.Publication = n.PublicationSettings = n.VideoPublicationSettings = n.AudioPublicationSettings = void 0;
                var i = o(e("./utils.js"))
                    , r = (o(e("./mediaformat.js")),
                        e("../base/event.js"));
                function o(e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            if (Object.prototype.hasOwnProperty.call(e, n)) {
                                var i = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(e, n) : {};
                                i.get || i.set ? Object.defineProperty(t, n, i) : t[n] = e[n]
                            }
                    return t.default = e,
                        t
                }
                function a(e) {
                    return (a = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                        return typeof e
                    }
                        : function (e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        }
                    )(e)
                }
                function s(e) {
                    return (s = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                function l(e, t) {
                    return (l = Object.setPrototypeOf || function (e, t) {
                        return e.__proto__ = t,
                            e
                    }
                    )(e, t)
                }
                function c(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e
                }
                function u(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }
                n.AudioPublicationSettings = function e(t) {
                    u(this, e),
                        this.codec = t
                }
                    ,
                    n.VideoPublicationSettings = function e(t, n, i, r, o) {
                        u(this, e),
                            this.codec = t,
                            this.resolution = n,
                            this.frameRate = i,
                            this.bitrate = r,
                            this.keyFrameInterval = o
                    }
                    ,
                    n.PublicationSettings = function e(t, n) {
                        u(this, e),
                            this.audio = t,
                            this.video = n
                    }
                    ;
                var d = function (e) {
                    function t(e, n, r, o, l) {
                        var d, p;
                        return u(this, t),
                            this,
                            d = !(p = s(t).call(this)) || "object" !== a(p) && "function" != typeof p ? c(this) : p,
                            Object.defineProperty(c(c(d)), "id", {
                                configurable: !1,
                                writable: !1,
                                value: e || i.createUuid()
                            }),
                            d.stop = n,
                            d.getStats = r,
                            d.mute = o,
                            d.unmute = l,
                            d
                    }
                    return function (e, t) {
                        if ("function" != typeof t && null !== t)
                            throw new TypeError("Super expression must either be null or a function");
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                            t && l(e, t)
                    }(t, r.EventDispatcher),
                        t
                }();
                n.Publication = d,
                    n.PublishOptions = function e(t, n) {
                        u(this, e),
                            this.audio = t,
                            this.video = n
                    }
            }
                , {
                "../base/event.js": 3,
                "./mediaformat.js": 6,
                "./utils.js": 11
            }],
            9: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.reorderCodecs = function (e, t, n) {
                        if (!n || 0 === n.length)
                            return e;
                        n = "audio" === t ? n.concat(p) : n.concat(h);
                        var i = e.split("\r\n")
                            , r = c(i, "m=", t);
                        if (null === r)
                            return e;
                        var o = i[r].split(" ");
                        o.splice(0, 3);
                        var a = []
                            , l = !0
                            , m = !1
                            , g = void 0;
                        try {
                            for (var v, y = n[Symbol.iterator](); !(l = (v = y.next()).done); l = !0)
                                for (var b = v.value, w = 0; w < i.length; w++) {
                                    var $ = u(i, w, -1, "a=rtpmap", b);
                                    if (null !== $) {
                                        var S = d(i[$]);
                                        S && (a.push(S),
                                            w = $)
                                    }
                                }
                        } catch (e) {
                            m = !0,
                                g = e
                        } finally {
                            try {
                                l || null == y.return || y.return()
                            } finally {
                                if (m)
                                    throw g
                            }
                        }
                        a = function (e, t) {
                            var n = !0
                                , i = !1
                                , r = void 0;
                            try {
                                for (var o, a = t[Symbol.iterator](); !(n = (o = a.next()).done); n = !0) {
                                    var l = c(e, "a=fmtp", "apt=" + o.value);
                                    if (null !== l) {
                                        var u = s(e[l]);
                                        t.push(u.pt)
                                    }
                                }
                            } catch (e) {
                                i = !0,
                                    r = e
                            } finally {
                                try {
                                    n || null == a.return || a.return()
                                } finally {
                                    if (i)
                                        throw r
                                }
                            }
                            return t
                        }(i, a),
                            i[r] = function (e, t) {
                                var n = e.split(" ").slice(0, 3);
                                return (n = n.concat(t)).join(" ")
                            }(i[r], a);
                        var C = !0
                            , x = !1
                            , T = void 0;
                        try {
                            for (var k, P = o[Symbol.iterator](); !(C = (k = P.next()).done); C = !0) {
                                var E = k.value;
                                -1 === a.indexOf(E) && (i = f(i, E))
                            }
                        } catch (e) {
                            x = !0,
                                T = e
                        } finally {
                            try {
                                C || null == P.return || P.return()
                            } finally {
                                if (x)
                                    throw T
                            }
                        }
                        return i.join("\r\n")
                    }
                    ,
                    n.setVideoSendBitRate = function (e) {
                        return function (e, t) {
                            return t.videoSendBitrate ? (r.default.debug("Prefer video send bitrate: " + t.videoSendBitrate),
                                o(e, t.videoSendBitrate, "video")) : e
                        }(e, {
                            videoSendBitrate: "100"
                        })
                    }
                    ,
                    n.setVideoReceivBitRate = function (e) {
                        return function (e, t) {
                            return t.videoRecvBitrate ? (r.default.debug("Prefer video receive bitrate: " + t.videoRecvBitrate),
                                o(e, t.videoRecvBitrate, "video")) : e
                        }(e, {
                            videoRecvBitrate: "100"
                        })
                    }
                    ,
                    n.setMaxBitrate = function (e, t) {
                        var n = !0
                            , i = !1
                            , r = void 0;
                        try {
                            for (var o, s = t[Symbol.iterator](); !(n = (o = s.next()).done); n = !0) {
                                var l = o.value;
                                l.startBitrate && (e = a(e, l.codec.name, "x-google-start-bitrate", l.startBitrate.toString())),
                                    l.maxBitrate && (e = a(e, l.codec.name, "x-google-max-bitrate", l.maxBitrate.toString())),
                                    l.minBitrate && (e = l.minBitrate > 9e4 ? a(e, l.codec.name, "x-google-min-bitrate", "90000") : a(e, l.codec.name, "x-google-min-bitrate", l.minBitrate.toString()))
                            }
                        } catch (e) {
                            i = !0,
                                r = e
                        } finally {
                            try {
                                n || null == s.return || s.return()
                            } finally {
                                if (i)
                                    throw r
                            }
                        }
                        return console.log("sdp:", e),
                            e
                    }
                    ;
                var i, r = (i = e("./logger.js")) && i.__esModule ? i : {
                    default: i
                };
                function o(e, t, n) {
                    var i = e.split("\r\n")
                        , o = c(i, "m=", n);
                    if (null === o)
                        return r.default.debug("Failed to add bandwidth line to sdp, as no m-line found"),
                            e;
                    var a = u(i, o + 1, -1, "m=");
                    null === a && (a = i.length);
                    var s = u(i, o + 1, a, "c=");
                    if (null === s)
                        return r.default.debug("Failed to add bandwidth line to sdp, as no c-line found"),
                            e;
                    var l = u(i, s + 1, a, "b=AS");
                    l && i.splice(l, 1);
                    var d = "b=AS:" + t;
                    return i.splice(s + 1, 0, d),
                        i.join("\r\n")
                }
                function a(e, t, n, i) {
                    var r = e.split("\r\n");
                    r.length <= 1 && (r = e.split("\n"));
                    var o = function (e, t) {
                        var n = function (e, t) {
                            var n = c(e, "a=rtpmap", t);
                            return n ? d(e[n]) : null
                        }(e, t);
                        return n ? c(e, "a=fmtp:" + n.toString()) : null
                    }(r, t)
                        , a = {};
                    if (null === o) {
                        var u = c(r, "a=rtpmap", t);
                        if (null === u)
                            return e;
                        var p = d(r[u]);
                        a.pt = p.toString(),
                            a.params = {},
                            a.params[n] = i,
                            r.splice(u + 1, 0, l(a))
                    } else
                        (a = s(r[o])).params[n] = i,
                            r[o] = l(a);
                    return r.join("\r\n")
                }
                function s(e) {
                    var t = {}
                        , n = e.indexOf(" ")
                        , i = e.substring(n + 1).split(";")
                        , r = new RegExp("a=fmtp:(\\d+)")
                        , o = e.match(r);
                    if (!o || 2 !== o.length)
                        return null;
                    t.pt = o[1];
                    for (var a = {}, s = 0; s < i.length; ++s) {
                        var l = i[s].split("=");
                        2 === l.length && (a[l[0]] = l[1])
                    }
                    return t.params = a,
                        t
                }
                function l(e) {
                    if (!e.hasOwnProperty("pt") || !e.hasOwnProperty("params"))
                        return null;
                    var t = e.pt
                        , n = e.params
                        , i = []
                        , r = 0;
                    for (var o in n)
                        i[r] = o + "=" + n[o],
                            ++r;
                    return 0 === r ? null : "a=fmtp:" + t.toString() + " " + i.join(";")
                }
                function c(e, t, n) {
                    return u(e, 0, -1, t, n)
                }
                function u(e, t, n, i, r) {
                    for (var o = -1 !== n ? n : e.length, a = t; a < o; ++a)
                        if (0 === e[a].indexOf(i) && (!r || -1 !== e[a].toLowerCase().indexOf(r.toLowerCase())))
                            return a;
                    return null
                }
                function d(e) {
                    var t = new RegExp("a=rtpmap:(\\d+) [a-zA-Z0-9-]+\\/\\d+")
                        , n = e.match(t);
                    return n && 2 === n.length ? n[1] : null
                }
                var p = ["CN", "telephone-event"]
                    , h = ["red", "ulpfec"];
                function f(e, t) {
                    for (var n = new RegExp("a=(rtpmap|rtcp-fb|fmtp):" + t + "\\s"), i = e.length - 1; i > 0; i--)
                        e[i].match(n) && e.splice(i, 1);
                    return e
                }
            }
                , {
                "./logger.js": 5
            }],
            10: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.StreamEvent = n.RemoteStream = n.LocalStream = n.Stream = n.StreamSourceInfo = void 0,
                    (i = e("./logger.js")) && i.__esModule;
                var i, r = e("./event.js"), o = function (e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            if (Object.prototype.hasOwnProperty.call(e, n)) {
                                var i = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(e, n) : {};
                                i.get || i.set ? Object.defineProperty(t, n, i) : t[n] = e[n]
                            }
                    return t.default = e,
                        t
                }(e("./utils.js"));
                function a(e) {
                    return (a = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                        return typeof e
                    }
                        : function (e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        }
                    )(e)
                }
                function s(e, t) {
                    return !t || "object" !== a(t) && "function" != typeof t ? u(e) : t
                }
                function l(e) {
                    return (l = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                function c(e, t) {
                    if ("function" != typeof t && null !== t)
                        throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                        t && function (e, t) {
                            (Object.setPrototypeOf || function (e, t) {
                                return e.__proto__ = t,
                                    e
                            }
                            )(e, t)
                        }(e, t)
                }
                function u(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e
                }
                function d(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }
                function p(e, t) {
                    return t.some(function (t) {
                        return t === e
                    })
                }
                n.StreamSourceInfo = function e(t, n) {
                    if (d(this, e),
                        !p(t, [void 0, "mic", "screen-cast", "file", "mixed"]))
                        throw new TypeError("Incorrect value for audioSourceInfo");
                    if (!p(n, [void 0, "camera", "screen-cast", "file", "encoded-file", "raw-file", "mixed"]))
                        throw new TypeError("Incorrect value for videoSourceInfo");
                    this.audio = t,
                        this.video = n
                }
                    ;
                var h = function (e) {
                    function t(e, n, i) {
                        var r;
                        if (d(this, t),
                            r = s(this, l(t).call(this)),
                            e && !(e instanceof MediaStream) || "object" !== a(n))
                            throw new TypeError("Invalid stream or sourceInfo.");
                        if (e && (e.getAudioTracks().length > 0 && !n.audio || e.getVideoTracks().length > 0 && !n.video))
                            throw new TypeError("Missing audio source info or video source info.");
                        return Object.defineProperty(u(u(r)), "mediaStream", {
                            configurable: !1,
                            writable: !0,
                            value: e
                        }),
                            Object.defineProperty(u(u(r)), "source", {
                                configurable: !1,
                                writable: !1,
                                value: n
                            }),
                            Object.defineProperty(u(u(r)), "attributes", {
                                configurable: !0,
                                writable: !1,
                                value: i
                            }),
                            r
                    }
                    return c(t, r.EventDispatcher),
                        t
                }();
                n.Stream = h;
                var f = function (e) {
                    function t(e, n, i) {
                        var r;
                        if (d(this, t),
                            !(e instanceof MediaStream))
                            throw new TypeError("Invalid stream.");
                        return r = s(this, l(t).call(this, e, n, i)),
                            Object.defineProperty(u(u(r)), "id", {
                                configurable: !1,
                                writable: !1,
                                value: o.createUuid()
                            }),
                            r
                    }
                    return c(t, h),
                        t
                }();
                n.LocalStream = f;
                var m = function (e) {
                    function t(e, n, i, r, a) {
                        var c;
                        return d(this, t),
                            c = s(this, l(t).call(this, i, r, a)),
                            Object.defineProperty(u(u(c)), "id", {
                                configurable: !1,
                                writable: !1,
                                value: e || "test" - o.createUuid()
                            }),
                            Object.defineProperty(u(u(c)), "origin", {
                                configurable: !1,
                                writable: !1,
                                value: n
                            }),
                            c.settings = void 0,
                            c.capabilities = void 0,
                            c
                    }
                    return c(t, h),
                        t
                }();
                n.RemoteStream = m;
                var g = function (e) {
                    function t(e, n) {
                        var i;
                        return d(this, t),
                            (i = s(this, l(t).call(this, e))).stream = n.stream,
                            i
                    }
                    return c(t, r.OwtEvent),
                        t
                }();
                n.StreamEvent = g
            }
                , {
                "./event.js": 3,
                "./logger.js": 5,
                "./utils.js": 11
            }],
            11: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.isFirefox = function () {
                        return null !== window.navigator.userAgent.match("Firefox")
                    }
                    ,
                    n.isChrome = function () {
                        return null !== window.navigator.userAgent.match("Chrome")
                    }
                    ,
                    n.isSafari = r,
                    n.isEdge = function () {
                        return null !== window.navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)
                    }
                    ,
                    n.createUuid = function () {
                        return "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g, function (e) {
                            var t = 16 * Math.random() | 0;
                            return ("x" === e ? t : 3 & t | 8).toString(16)
                        })
                    }
                    ,
                    n.sysInfo = function () {
                        var e = Object.create({});
                        e.sdk = {
                            version: i,
                            type: "JavaScript"
                        };
                        var t = navigator.userAgent
                            , n = /Chrome\/([0-9\.]+)/.exec(t);
                        return n ? e.runtime = {
                            name: "Chrome",
                            version: n[1]
                        } : (n = /Firefox\/([0-9\.]+)/.exec(t)) ? e.runtime = {
                            name: "Firefox",
                            version: n[1]
                        } : (n = /Edge\/([0-9\.]+)/.exec(t)) ? e.runtime = {
                            name: "Edge",
                            version: n[1]
                        } : r() ? (n = /Version\/([0-9\.]+) Safari/.exec(t),
                            e.runtime = {
                                name: "Safari"
                            },
                            e.runtime.version = n ? n[1] : "Unknown") : e.runtime = {
                                name: "Unknown",
                                version: "Unknown"
                            },
                            (n = /Windows NT ([0-9\.]+)/.exec(t)) ? e.os = {
                                name: "Windows NT",
                                version: n[1]
                            } : (n = /Intel Mac OS X ([0-9_\.]+)/.exec(t)) ? e.os = {
                                name: "Mac OS X",
                                version: n[1].replace(/_/g, ".")
                            } : (n = /iPhone OS ([0-9_\.]+)/.exec(t)) ? e.os = {
                                name: "iPhone OS",
                                version: n[1].replace(/_/g, ".")
                            } : (n = /X11; Linux/.exec(t)) ? e.os = {
                                name: "Linux",
                                version: "Unknown"
                            } : (n = /Android( ([0-9\.]+))?/.exec(t)) ? e.os = {
                                name: "Android",
                                version: n[1] || "Unknown"
                            } : (n = /CrOS/.exec(t)) ? e.os = {
                                name: "Chrome OS",
                                version: "Unknown"
                            } : e.os = {
                                name: "Unknown",
                                version: "Unknown"
                            },
                            e.capabilities = {
                                continualIceGathering: !1,
                                unifiedPlan: !0,
                                streamRemovable: "Firefox" !== e.runtime.name
                            },
                            e
                    }
                    ;
                var i = "4.2.1";
                function r() {
                    return /^((?!chrome|android).)*safari/i.test(window.navigator.userAgent)
                }
            }
                , {}],
            12: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.ConferencePeerConnectionChannel = void 0;
                var i, r = (i = e("../base/logger.js")) && i.__esModule ? i : {
                    default: i
                }, o = e("../base/event.js"), a = e("../base/mediaformat.js"), s = e("../base/publication.js"), l = e("./subscription.js"), c = e("./error.js"), u = p(e("../base/utils.js")), d = p(e("../base/sdputils.js"));
                function p(e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            if (Object.prototype.hasOwnProperty.call(e, n)) {
                                var i = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(e, n) : {};
                                i.get || i.set ? Object.defineProperty(t, n, i) : t[n] = e[n]
                            }
                    return t.default = e,
                        t
                }
                function h(e) {
                    return (h = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                        return typeof e
                    }
                        : function (e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        }
                    )(e)
                }
                function f(e, t) {
                    for (var n = 0; n < t.length; n++) {
                        var i = t[n];
                        i.enumerable = i.enumerable || !1,
                            i.configurable = !0,
                            "value" in i && (i.writable = !0),
                            Object.defineProperty(e, i.key, i)
                    }
                }
                function m(e) {
                    return (m = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                function g(e, t) {
                    return (g = Object.setPrototypeOf || function (e, t) {
                        return e.__proto__ = t,
                            e
                    }
                    )(e, t)
                }
                var v = function (e) {
                    function t(e, n) {
                        var i;
                        return function (e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, t),
                            (i = function (e, t) {
                                return !t || "object" !== h(t) && "function" != typeof t ? function (e) {
                                    if (void 0 === e)
                                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                    return e
                                }(e) : t
                            }(this, m(t).call(this)))._config = e,
                            i._options = null,
                            i._signaling = n,
                            i._pc = null,
                            i._internalId = null,
                            i._pendingCandidates = [],
                            i._subscribePromise = null,
                            i._publishPromise = null,
                            i._subscribedStream = null,
                            i._publishedStream = null,
                            i._publication = null,
                            i._subscription = null,
                            i._disconnectTimer = null,
                            i._ended = !1,
                            i
                    }
                    var n, i;
                    return function (e, t) {
                        if ("function" != typeof t && null !== t)
                            throw new TypeError("Super expression must either be null or a function");
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                            t && g(e, t)
                    }(t, o.EventDispatcher),
                        n = t,
                        (i = [{
                            key: "onMessage",
                            value: function (e, t) {
                                switch (e) {
                                    case "progress":
                                        "soac" === t.status ? this._sdpHandler(t.data) : "ready" === t.status ? this._readyHandler() : "error" === t.status && this._errorHandler(t.data);
                                        break;
                                    case "stream":
                                        this._onStreamEvent(t);
                                        break;
                                    default:
                                        r.default.warning("Unknown notification from MCU.")
                                }
                            }
                        }, {
                            key: "publish",
                            value: function (e, t) {
                                var n = this;
                                if (void 0 === t && (t = {
                                    audio: !!e.mediaStream.getAudioTracks(),
                                    video: !!e.mediaStream.getVideoTracks()
                                }),
                                    "object" !== h(t))
                                    return Promise.reject(new TypeError("Options should be an object."));
                                if (void 0 === t.audio && (t.audio = !!e.mediaStream.getAudioTracks()),
                                    void 0 === t.video && (t.video = !!e.mediaStream.getVideoTracks()),
                                    !(!1 !== t.audio && null !== t.audio || !1 !== t.video && null !== t.video))
                                    return Promise.reject(new c.ConferenceError("Cannot publish a stream without audio and video."));
                                this._options = t;
                                var i = {};
                                if (this._createPeerConnection(),
                                    e.mediaStream.getAudioTracks().length > 0 && !1 !== t.audio && null !== t.audio) {
                                    if (e.mediaStream.getAudioTracks().length > 1 && r.default.warning("Publishing a stream with multiple audio tracks is not fully supported."),
                                        "boolean" != typeof t.audio && "object" !== h(t.audio))
                                        return Promise.reject(new c.ConferenceError("Type of audio options should be boolean or an object."));
                                    i.audio = {},
                                        i.audio.source = e.source.audio;
                                    var a = !0
                                        , s = !1
                                        , l = void 0;
                                    try {
                                        for (var u, d = e.mediaStream.getAudioTracks()[Symbol.iterator](); !(a = (u = d.next()).done); a = !0) {
                                            var p = u.value;
                                            this._pc.addTrack(p, e.mediaStream)
                                        }
                                    } catch (e) {
                                        s = !0,
                                            l = e
                                    } finally {
                                        try {
                                            a || null == d.return || d.return()
                                        } finally {
                                            if (s)
                                                throw l
                                        }
                                    }
                                } else
                                    i.audio = !1;
                                if (e.mediaStream.getVideoTracks().length > 0 && !1 !== t.video && null !== t.video) {
                                    e.mediaStream.getVideoTracks().length > 1 && r.default.warning("Publishing a stream with multiple video tracks is not fully supported."),
                                        i.video = {},
                                        i.video.source = e.source.video;
                                    var f = e.mediaStream.getVideoTracks()[0].getSettings();
                                    i.video.parameters = {
                                        resolution: {
                                            width: f.width,
                                            height: f.height
                                        },
                                        framerate: f.frameRate
                                    };
                                    var m = !0
                                        , g = !1
                                        , v = void 0;
                                    try {
                                        for (var y, b = e.mediaStream.getVideoTracks()[Symbol.iterator](); !(m = (y = b.next()).done); m = !0) {
                                            var w = y.value;
                                            this._pc.addTrack(w, e.mediaStream)
                                        }
                                    } catch (e) {
                                        g = !0,
                                            v = e
                                    } finally {
                                        try {
                                            m || null == b.return || b.return()
                                        } finally {
                                            if (g)
                                                throw v
                                        }
                                    }
                                } else
                                    i.video = !1;
                                return this._publishedStream = e,
                                    this._signaling.sendSignalingMessage("publish", {
                                        media: i,
                                        attributes: e.attributes
                                    }).then(function (a) {
                                        var s, l = new o.MessageEvent("id", {
                                            message: a.id,
                                            origin: n._remoteId
                                        });
                                        n.dispatchEvent(l),
                                            n._internalId = a.id,
                                            navigator.userAgent.indexOf("Safari"),
                                            "function" == typeof n._pc.addTransceiver && (i.audio && e.mediaStream.getAudioTracks() > 0 && n._pc.addTransceiver("audio", {
                                                direction: "sendonly"
                                            }),
                                                i.video && e.mediaStream.getVideoTracks() > 0 && n._pc.addTransceiver("video", {
                                                    direction: "sendonly"
                                                })),
                                            n._pc.createOffer({}).then(function (e) {
                                                return t && (e.sdp = n._setRtpReceiverOptions(e.sdp, t)),
                                                    e
                                            }).then(function (e) {
                                                return s = e,
                                                    n._pc.setLocalDescription(e)
                                            }).then(function () {
                                                n._signaling.sendSignalingMessage("soac", {
                                                    id: n._internalId,
                                                    signaling: s
                                                })
                                            }).catch(function (e) {
                                                r.default.error("Failed to create offer or set SDP. Message: " + e.message),
                                                    n._unpublish(),
                                                    n._rejectPromise(e),
                                                    n._fireEndedEventOnPublicationOrSubscription()
                                            })
                                    }).catch(function (e) {
                                        n._unpublish(),
                                            n._rejectPromise(e),
                                            n._fireEndedEventOnPublicationOrSubscription()
                                    }),
                                    new Promise(function (e, t) {
                                        n._publishPromise = {
                                            resolve: e,
                                            reject: t
                                        }
                                    }
                                    )
                            }
                        }, {
                            key: "subscribe",
                            value: function (e, t) {
                                var n = this;
                                if (void 0 === t && (t = {
                                    audio: !!e.capabilities.audio,
                                    video: !!e.capabilities.video
                                }),
                                    "object" !== h(t))
                                    return Promise.reject(new TypeError("Options should be an object."));
                                if (void 0 === t.audio && (t.audio = !!e.capabilities.audio),
                                    void 0 === t.video && (t.video = !!e.capabilities.video),
                                    void 0 !== t.audio && "object" !== h(t.audio) && "boolean" != typeof t.audio && null !== t.audio || void 0 !== t.video && "object" !== h(t.video) && "boolean" != typeof t.video && null !== t.video)
                                    return Promise.reject(new TypeError("Invalid options type."));
                                if (t.audio && !e.capabilities.audio || t.video && !e.capabilities.video)
                                    return Promise.reject(new c.ConferenceError("options.audio/video cannot be true or an object if there is no audio/video track in remote stream."));
                                if (!1 === t.audio && !1 === t.video)
                                    return Promise.reject(new c.ConferenceError("Cannot subscribe a stream without audio and video."));
                                this._options = t;
                                var i = {};
                                if (t.audio) {
                                    if ("object" === h(t.audio) && Array.isArray(t.audio.codecs) && 0 === t.audio.codecs.length)
                                        return Promise.reject(new TypeError("Audio codec cannot be an empty array."));
                                    i.audio = {},
                                        i.audio.from = e.id
                                } else
                                    i.audio = !1;
                                if (t.video) {
                                    if ("object" === h(t.video) && Array.isArray(t.video.codecs) && 0 === t.video.codecs.length)
                                        return Promise.reject(new TypeError("Video codec cannot be an empty array."));
                                    i.video = {},
                                        i.video.from = e.id,
                                        (t.video.resolution || t.video.frameRate || t.video.bitrateMultiplier && 1 !== t.video.bitrateMultiplier || t.video.keyFrameInterval) && (i.video.parameters = {
                                            resolution: t.video.resolution,
                                            framerate: t.video.frameRate,
                                            bitrate: t.video.bitrateMultiplier ? "x" + t.video.bitrateMultiplier.toString() : void 0,
                                            keyFrameInterval: t.video.keyFrameInterval
                                        })
                                } else
                                    i.video = !1;
                                return this._subscribedStream = e,
                                    this._signaling.sendSignalingMessage("subscribe", {
                                        media: i
                                    }).then(function (e) {
                                        var a = new o.MessageEvent("id", {
                                            message: e.id,
                                            origin: n._remoteId
                                        });
                                        n.dispatchEvent(a),
                                            n._internalId = e.id,
                                            n._createPeerConnection();
                                        var s = navigator.userAgent
                                            , l = {};
                                        s.indexOf("Safari") > -1 && -1 == s.indexOf("Chrome") || (l = {
                                            offerToReceiveAudio: !!t.audio,
                                            offerToReceiveVideo: !!t.video
                                        }),
                                            "function" == typeof n._pc.addTransceiver && (i.audio && n._pc.addTransceiver("audio", {
                                                direction: "recvonly"
                                            }),
                                                i.video && n._pc.addTransceiver("video", {
                                                    direction: "recvonly"
                                                })),
                                            n._pc.createOffer(l).then(function (e) {
                                                t && (e.sdp = n._setRtpReceiverOptions(e.sdp, t)),
                                                    n._pc.setLocalDescription(e).then(function () {
                                                        n._signaling.sendSignalingMessage("soac", {
                                                            id: n._internalId,
                                                            signaling: e
                                                        })
                                                    }, function (e) {
                                                        r.default.error("Set local description failed. Message: " + JSON.stringify(e))
                                                    })
                                            }, function (e) {
                                                r.default.error("Create offer failed. Error info: " + JSON.stringify(e))
                                            }).catch(function (e) {
                                                r.default.error("Failed to create offer or set SDP. Message: " + e.message),
                                                    n._unsubscribe(),
                                                    n._rejectPromise(e),
                                                    n._fireEndedEventOnPublicationOrSubscription()
                                            })
                                    }).catch(function (e) {
                                        n._unsubscribe(),
                                            n._rejectPromise(e),
                                            n._fireEndedEventOnPublicationOrSubscription()
                                    }),
                                    new Promise(function (e, t) {
                                        n._subscribePromise = {
                                            resolve: e,
                                            reject: t
                                        }
                                    }
                                    )
                            }
                        }, {
                            key: "_unpublish",
                            value: function () {
                                this._signaling.sendSignalingMessage("unpublish", {
                                    id: this._internalId
                                }).catch(function (e) {
                                    r.default.warning("MCU returns negative ack for unpublishing, " + e)
                                }),
                                    this._pc && "closed" !== this._pc.signalingState && this._pc.close()
                            }
                        }, {
                            key: "_unsubscribe",
                            value: function () {
                                this._signaling.sendSignalingMessage("unsubscribe", {
                                    id: this._internalId
                                }).catch(function (e) {
                                    r.default.warning("MCU returns negative ack for unsubscribing, " + e)
                                }),
                                    this._pc && "closed" !== this._pc.signalingState && this._pc.close()
                            }
                        }, {
                            key: "_muteOrUnmute",
                            value: function (e, t, n) {
                                var i = this
                                    , r = t ? "stream-control" : "subscription-control"
                                    , a = e ? "pause" : "play";
                                return this._signaling.sendSignalingMessage(r, {
                                    id: this._internalId,
                                    operation: a,
                                    data: n
                                }).then(function () {
                                    if (!t) {
                                        var r = e ? "mute" : "unmute";
                                        i._subscription.dispatchEvent(new o.MuteEvent(r, {
                                            kind: n
                                        }))
                                    }
                                })
                            }
                        }, {
                            key: "_applyOptions",
                            value: function (e) {
                                if ("object" !== h(e) || "object" !== h(e.video))
                                    return Promise.reject(new c.ConferenceError("Options should be an object."));
                                var t = {};
                                return t.resolution = e.video.resolution,
                                    t.framerate = e.video.frameRate,
                                    t.bitrate = e.video.bitrateMultiplier ? "x" + e.video.bitrateMultiplier.toString() : void 0,
                                    t.keyFrameInterval = e.video.keyFrameInterval,
                                    this._signaling.sendSignalingMessage("subscription-control", {
                                        id: this._internalId,
                                        operation: "update",
                                        data: {
                                            video: {
                                                parameters: t
                                            }
                                        }
                                    }).then()
                            }
                        }, {
                            key: "_onRemoteStreamAdded",
                            value: function (e) {
                                r.default.debug("Remote stream added."),
                                    this._subscribedStream ? this._subscribedStream.mediaStream = e.streams[0] : r.default.warning("Received remote stream without subscription.")
                            }
                        }, {
                            key: "_onLocalIceCandidate",
                            value: function (e) {
                                e.candidate ? "stable" !== this._pc.signalingState ? this._pendingCandidates.push(e.candidate) : this._sendCandidate(e.candidate) : r.default.debug("Empty candidate.")
                            }
                        }, {
                            key: "_fireEndedEventOnPublicationOrSubscription",
                            value: function () {
                                if (!this._ended) {
                                    this._ended = !0;
                                    var e = new o.OwtEvent("ended");
                                    this._publication ? (this._publication.dispatchEvent(e),
                                        this._publication.stop()) : this._subscription && (this._subscription.dispatchEvent(e),
                                            this._subscription.stop())
                                }
                            }
                        }, {
                            key: "_rejectPromise",
                            value: function (e) {
                                e || new c.ConferenceError("Connection failed or closed."),
                                    this._publishPromise ? (this._publishPromise.reject(e),
                                        this._publishPromise = void 0) : this._subscribePromise && (this._subscribePromise.reject(e),
                                            this._subscribePromise = void 0)
                            }
                        }, {
                            key: "_onIceConnectionStateChange",
                            value: function (e) {
                                e && e.currentTarget && (r.default.debug("ICE connection state changed to " + e.currentTarget.iceConnectionState),
                                    "closed" !== e.currentTarget.iceConnectionState && "failed" !== e.currentTarget.iceConnectionState || ("failed" === e.currentTarget.iceConnectionState && this._handleError("ICE connection failed."),
                                        this._fireEndedEventOnPublicationOrSubscription()))
                            }
                        }, {
                            key: "_sendCandidate",
                            value: function (e) {
                                this._signaling.sendSignalingMessage("soac", {
                                    id: this._internalId,
                                    signaling: {
                                        type: "candidate",
                                        candidate: {
                                            candidate: "a=" + e.candidate,
                                            sdpMid: e.sdpMid,
                                            sdpMLineIndex: e.sdpMLineIndex
                                        }
                                    }
                                })
                            }
                        }, {
                            key: "_createPeerConnection",
                            value: function () {
                                var e = this
                                    , t = this._config.rtcConfiguration || {};
                                u.isChrome() && (t.sdpSemantics = "unified-plan"),
                                    this._pc = new RTCPeerConnection(t),
                                    this._pc.onicecandidate = function (t) {
                                        e._onLocalIceCandidate.apply(e, [t])
                                    }
                                    ,
                                    this._pc.ontrack = function (t) {
                                        e._onRemoteStreamAdded.apply(e, [t])
                                    }
                                    ,
                                    this._pc.oniceconnectionstatechange = function (t) {
                                        e._onIceConnectionStateChange.apply(e, [t])
                                    }
                            }
                        }, {
                            key: "_getStats",
                            value: function () {
                                return this._pc ? this._pc.getStats() : Promise.reject(new c.ConferenceError("PeerConnection is not available."))
                            }
                        }, {
                            key: "_readyHandler",
                            value: function () {
                                var e = this;
                                this._subscribePromise ? (this._subscription = new l.Subscription(this._internalId, function () {
                                    e._unsubscribe()
                                }
                                    , function () {
                                        return e._getStats()
                                    }
                                    , function (t) {
                                        return e._muteOrUnmute(!0, !1, t)
                                    }
                                    , function (t) {
                                        return e._muteOrUnmute(!1, !1, t)
                                    }
                                    , function (t) {
                                        return e._applyOptions(t)
                                    }
                                ),
                                    this._subscribedStream.addEventListener("ended", function () {
                                        e._subscription.dispatchEvent("ended", new o.OwtEvent("ended"))
                                    }),
                                    this._subscribePromise.resolve(this._subscription)) : this._publishPromise && (this._publication = new s.Publication(this._internalId, function () {
                                        return e._unpublish(),
                                            Promise.resolve()
                                    }
                                        , function () {
                                            return e._getStats()
                                        }
                                        , function (t) {
                                            return e._muteOrUnmute(!0, !0, t)
                                        }
                                        , function (t) {
                                            return e._muteOrUnmute(!1, !0, t)
                                        }
                                    ),
                                        this._publishPromise.resolve(this._publication)),
                                    this._publishPromise = null,
                                    this._subscribePromise = null
                            }
                        }, {
                            key: "_sdpHandler",
                            value: function (e) {
                                var t = this;
                                "answer" === e.type && ((this._publication || this._publishPromise) && this._options && (e.sdp = this._setRtpSenderOptions(e.sdp, this._options)),
                                    this._pc.setRemoteDescription(e).then(function () {
                                        if (t._pendingCandidates.length > 0) {
                                            var e = !0
                                                , n = !1
                                                , i = void 0;
                                            try {
                                                for (var r, o = t._pendingCandidates[Symbol.iterator](); !(e = (r = o.next()).done); e = !0) {
                                                    var a = r.value;
                                                    t._sendCandidate(a)
                                                }
                                            } catch (e) {
                                                n = !0,
                                                    i = e
                                            } finally {
                                                try {
                                                    e || null == o.return || o.return()
                                                } finally {
                                                    if (n)
                                                        throw i
                                                }
                                            }
                                        }
                                    }, function (e) {
                                        r.default.error("Set remote description failed: " + e),
                                            t._rejectPromise(e),
                                            t._fireEndedEventOnPublicationOrSubscription()
                                    }))
                            }
                        }, {
                            key: "_errorHandler",
                            value: function (e) {
                                return this._handleError(e)
                            }
                        }, {
                            key: "_handleError",
                            value: function (e) {
                                var t = new c.ConferenceError(e);
                                if (this._publishPromise || this._subscribePromise)
                                    return this._rejectPromise(t);
                                if (!this._ended) {
                                    var n = this._publication || this._subscription;
                                    if (n) {
                                        var i = new o.ErrorEvent("error", {
                                            error: t
                                        });
                                        n.dispatchEvent(i)
                                    } else
                                        r.default.warning("Neither publication nor subscription is available.")
                                }
                            }
                        }, {
                            key: "_setCodecOrder",
                            value: function (e, t) {
                                if (this._publication || this._publishPromise) {
                                    if (t.audio) {
                                        var n = Array.from(t.audio, function (e) {
                                            return e.codec.name
                                        });
                                        e = d.reorderCodecs(e, "audio", n)
                                    }
                                    if (t.video) {
                                        var i = Array.from(t.video.encodingParameters, function (e) {
                                            return e.codec.name
                                        });
                                        e = d.reorderCodecs(e, "video", i)
                                    }
                                } else {
                                    if (t.audio && t.audio.codecs) {
                                        var r = Array.from(t.audio.codecs, function (e) {
                                            return e.name
                                        });
                                        e = d.reorderCodecs(e, "audio", r)
                                    }
                                    if (t.video && t.video.codecs) {
                                        var o = Array.from(t.video.codecs, function (e) {
                                            return e.name
                                        });
                                        e = d.reorderCodecs(e, "video", o)
                                    }
                                }
                                return e
                            }
                        }, {
                            key: "_setMaxBitrate",
                            value: function (e, t) {
                                return "object" === h(t.audio) && Array.isArray(t.audio.encodingParameters) && (e = d.setMaxBitrate(e, t.audio.encodingParameters)),
                                    "object" === h(t.video) && Array.isArray(t.video.encodingParameters) && (e = d.setMaxBitrate(e, t.video.encodingParameters)),
                                    e
                            }
                        }, {
                            key: "_setRtpSenderOptions",
                            value: function (e, t) {
                                return this._setMaxBitrate(e, t)
                            }
                        }, {
                            key: "_setRtpReceiverOptions",
                            value: function (e, t) {
                                return this._setCodecOrder(e, t)
                            }
                        }, {
                            key: "_onStreamEvent",
                            value: function (e) {
                                var t, n;
                                this._publication && e.id === this._publication.id ? t = this._publication : this._subscribedStream && e.id === this._subscribedStream.id && (t = this._subscription),
                                    t && ("audio.status" === e.data.field ? n = a.TrackKind.AUDIO : "video.status" === e.data.field ? n = a.TrackKind.VIDEO : r.default.warning("Invalid data field for stream update info."),
                                        "active" === e.data.value ? t.dispatchEvent(new o.MuteEvent("unmute", {
                                            kind: n
                                        })) : "inactive" === e.data.value ? t.dispatchEvent(new o.MuteEvent("mute", {
                                            kind: n
                                        })) : r.default.warning("Invalid data value for stream update info."))
                            }
                        }]) && f(n.prototype, i),
                        t
                }();
                n.ConferencePeerConnectionChannel = v
            }
                , {
                "../base/event.js": 3,
                "../base/logger.js": 5,
                "../base/mediaformat.js": 6,
                "../base/publication.js": 8,
                "../base/sdputils.js": 9,
                "../base/utils.js": 11,
                "./error.js": 14,
                "./subscription.js": 21
            }],
            13: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.ConferenceClient = void 0;
                var i, r = g(e("../base/event.js")), o = e("./signaling.js"), a = (i = e("../base/logger.js")) && i.__esModule ? i : {
                    default: i
                }, s = e("../base/base64.js"), l = e("./error.js"), c = g(e("../base/utils.js")), u = g(e("../base/stream.js")), d = e("./participant.js"), p = e("./info.js"), h = e("./channel.js"), f = e("./mixedstream.js"), m = g(e("./streamutils.js"));
                function g(e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            if (Object.prototype.hasOwnProperty.call(e, n)) {
                                var i = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(e, n) : {};
                                i.get || i.set ? Object.defineProperty(t, n, i) : t[n] = e[n]
                            }
                    return t.default = e,
                        t
                }
                var v = function (e, t) {
                    var n = new r.OwtEvent(e, t);
                    return n.participant = t.participant,
                        n
                };
                n.ConferenceClient = function (e, t) {
                    Object.setPrototypeOf(this, new r.EventDispatcher),
                        e = e || {};
                    var n, i, g = this, y = 1, b = t || new o.SioSignaling, w = new Map, $ = new Map, S = new Map, C = new Map;
                    function x(e) {
                        if ("mixed" === e.type)
                            return new f.RemoteMixedStream(e);
                        var t, n;
                        e.media.audio && (t = e.media.audio.source),
                            e.media.video && (n = e.media.video.source);
                        var i = new u.RemoteStream(e.id, e.info.owner, void 0, new u.StreamSourceInfo(t, n), e.info.attributes);
                        return i.settings = m.convertToPublicationSettings(e.media),
                            i.capabilities = m.convertToSubscriptionCapabilities(e.media),
                            i
                    }
                    function T(e, t) {
                        return b.send(e, t)
                    }
                    function k() {
                        var t = Object.create(r.EventDispatcher);
                        t.sendSignalingMessage = T;
                        var n = new h.ConferencePeerConnectionChannel(e, t);
                        return n.addEventListener("id", function (e) {
                            C.set(e.message, n)
                        }),
                            n
                    }
                    function P() {
                        $.clear(),
                            w.clear()
                    }
                    b.addEventListener("data", function (e) {
                        !function (e, t) {
                            if ("soac" === e || "progress" === e) {
                                if (!C.has(t.id))
                                    return void a.default.warning("Cannot find a channel for incoming data.");
                                C.get(t.id).onMessage(e, t)
                            } else
                                "stream" === e ? "add" === t.status ? function (e) {
                                    var t = x(e);
                                    w.set(t.id, t);
                                    var n = new u.StreamEvent("streamadded", {
                                        stream: t
                                    });
                                    g.dispatchEvent(n)
                                }(t.data) : "remove" === t.status ? function (e) {
                                    if (w.has(e.id)) {
                                        var t = w.get(e.id)
                                            , n = new r.OwtEvent("ended");
                                        w.delete(t.id),
                                            t.dispatchEvent(n)
                                    } else
                                        a.default.warning("Cannot find specific remote stream.")
                                }(t) : "update" === t.status && ("audio.status" === t.data.field || "video.status" === t.data.field ? C.forEach(function (n) {
                                    n.onMessage(e, t)
                                }) : "activeInput" === t.data.field ? function (e) {
                                    if (w.has(e.id)) {
                                        var t = w.get(e.id)
                                            , n = new f.ActiveAudioInputChangeEvent("activeaudioinputchange", {
                                                activeAudioInputStreamId: e.data.value
                                            });
                                        t.dispatchEvent(n)
                                    } else
                                        a.default.warning("Cannot find specific remote stream.")
                                }(t) : "video.layout" === t.data.field ? function (e) {
                                    if (w.has(e.id)) {
                                        var t = w.get(e.id)
                                            , n = new f.LayoutChangeEvent("layoutchange", {
                                                layout: e.data.value
                                            });
                                        t.dispatchEvent(n)
                                    } else
                                        a.default.warning("Cannot find specific remote stream.")
                                }(t) : "." === t.data.field ? function (e) {
                                    if (w.has(e.id)) {
                                        var t = w.get(e.id);
                                        t.settings = m.convertToPublicationSettings(e.media),
                                            t.capabilities = m.convertToSubscriptionCapabilities(e.media),
                                            t.room_config = e.room_config;
                                        var n = new r.OwtEvent("updated");
                                        t.dispatchEvent(n)
                                    } else
                                        a.default.warning("Cannot find specific remote stream.")
                                }(t.data.value) : a.default.warning("Unknown stream event from MCU.")) : "text" === e ? function (e) {
                                    var t = new r.MessageEvent("messagereceived", {
                                        message: e.message,
                                        origin: e.from,
                                        to: e.to
                                    });
                                    g.dispatchEvent(t)
                                }(t) : "participant" === e && function (e) {
                                    if ("join" === e.action) {
                                        e = e.data;
                                        var t = new d.Participant(e.id, e.role, e.user, e.properties);
                                        $.set(e.id, t);
                                        var n = new v("participantjoined", {
                                            participant: t
                                        });
                                        g.dispatchEvent(n)
                                    } else if ("leave" === e.action) {
                                        var i = e.data;
                                        if (!$.has(i))
                                            return void a.default.warning("Received leave message from MCU for an unknown participant.");
                                        var o = $.get(i);
                                        $.delete(i),
                                            o.dispatchEvent(new r.OwtEvent("left"));
                                        var s = new v("participantleft", {
                                            participant: o
                                        });
                                        g.dispatchEvent(s)
                                    }
                                }(t)
                        }(e.message.notification, e.message.data)
                    }),
                        b.addEventListener("disconnect", function () {
                            P(),
                                y = 1,
                                g.dispatchEvent(new r.OwtEvent("serverdisconnected"))
                        }),
                        Object.defineProperty(this, "info", {
                            configurable: !1,
                            get: function () {
                                return i ? new p.ConferenceInfo(i.id, Array.from($, function (e) {
                                    return e[1]
                                }), Array.from(w, function (e) {
                                    return e[1]
                                }), n) : null
                            }
                        }),
                        this.join = function (e) {
                            return new Promise(function (t, r) {
                                var o = JSON.parse(s.Base64.decodeBase64(e))
                                    , a = !0 === o.secure
                                    , u = o.host;
                                if ("string" == typeof u)
                                    if (-1 === u.indexOf("http") && (u = a ? "https://" + u : "http://" + u),
                                        1 === y) {
                                        y = 2;
                                        var h = {
                                            token: e,
                                            userAgent: c.sysInfo(),
                                            protocol: "1.0"
                                        };
                                        b.connect(u, a, h).then(function (e) {
                                            if (y = 3,
                                                void 0 !== (i = e.room).streams) {
                                                var r = !0
                                                    , o = !1
                                                    , a = void 0;
                                                try {
                                                    for (var s, l = i.streams[Symbol.iterator](); !(r = (s = l.next()).done); r = !0) {
                                                        var c = s.value;
                                                        "mixed" === c.type && (c.viewport = c.info.label),
                                                            w.set(c.id, x(c))
                                                    }
                                                } catch (e) {
                                                    o = !0,
                                                        a = e
                                                } finally {
                                                    try {
                                                        r || null == l.return || l.return()
                                                    } finally {
                                                        if (o)
                                                            throw a
                                                    }
                                                }
                                            }
                                            if (e.room && void 0 !== e.room.participants) {
                                                var u = !0
                                                    , h = !1
                                                    , f = void 0;
                                                try {
                                                    for (var m, g = e.room.participants[Symbol.iterator](); !(u = (m = g.next()).done); u = !0) {
                                                        var v = m.value;
                                                        $.set(v.id, new d.Participant(v.id, v.role, v.user, v.properties)),
                                                            v.id === e.id && (n = $.get(v.id))
                                                    }
                                                } catch (e) {
                                                    h = !0,
                                                        f = e
                                                } finally {
                                                    try {
                                                        u || null == g.return || g.return()
                                                    } finally {
                                                        if (h)
                                                            throw f
                                                    }
                                                }
                                            }
                                            t(new p.ConferenceInfo(e.room.id, Array.from($.values()), Array.from(w.values()), n, e.room.messageList))
                                        }, function (e) {
                                            y = 1,
                                                r(new l.ConferenceError(e))
                                        })
                                    } else
                                        r(new l.ConferenceError("connection state invalid"));
                                else
                                    r(new l.ConferenceError("Invalid host."))
                            }
                            )
                        }
                        ,
                        this.publish = function (e, t) {
                            return e instanceof u.LocalStream ? S.has(e.mediaStream.id) ? Promise.reject(new l.ConferenceError("Cannot publish a published stream.")) : k().publish(e, t) : Promise.reject(new l.ConferenceError("Invalid stream."))
                        }
                        ,
                        this.subscribe = function (e, t) {
                            return e instanceof u.RemoteStream ? k().subscribe(e, t) : Promise.reject(new l.ConferenceError("Invalid stream."))
                        }
                        ,
                        this.send = function (e, t) {
                            return void 0 === t && (t = "all"),
                                T("text", {
                                    to: t,
                                    message: e
                                })
                        }
                        ,
                        this.leave = function () {
                            return b.disconnect().then(function () {
                                P(),
                                    y = 1
                            })
                        }
                }
            }
                , {
                "../base/base64.js": 1,
                "../base/event.js": 3,
                "../base/logger.js": 5,
                "../base/stream.js": 10,
                "../base/utils.js": 11,
                "./channel.js": 12,
                "./error.js": 14,
                "./info.js": 16,
                "./mixedstream.js": 17,
                "./participant.js": 18,
                "./signaling.js": 19,
                "./streamutils.js": 20
            }],
            14: [function (e, t, n) {
                "use strict";
                function i(e) {
                    return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                        return typeof e
                    }
                        : function (e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        }
                    )(e)
                }
                function r(e) {
                    var t = "function" == typeof Map ? new Map : void 0;
                    return (r = function (e) {
                        if (null === e || (n = e,
                            -1 === Function.toString.call(n).indexOf("[native code]")))
                            return e;
                        var n;
                        if ("function" != typeof e)
                            throw new TypeError("Super expression must either be null or a function");
                        if (void 0 !== t) {
                            if (t.has(e))
                                return t.get(e);
                            t.set(e, i)
                        }
                        function i() {
                            return function (e, t, n) {
                                return (function () {
                                    if ("undefined" == typeof Reflect || !Reflect.construct)
                                        return !1;
                                    if (Reflect.construct.sham)
                                        return !1;
                                    if ("function" == typeof Proxy)
                                        return !0;
                                    try {
                                        return Date.prototype.toString.call(Reflect.construct(Date, [], function () { })),
                                            !0
                                    } catch (e) {
                                        return !1
                                    }
                                }() ? Reflect.construct : function (e, t, n) {
                                    var i = [null];
                                    i.push.apply(i, t);
                                    var r = new (Function.bind.apply(e, i));
                                    return n && o(r, n.prototype),
                                        r
                                }
                                ).apply(null, arguments)
                            }(e, arguments, a(this).constructor)
                        }
                        return i.prototype = Object.create(e.prototype, {
                            constructor: {
                                value: i,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                            o(i, e)
                    }
                    )(e)
                }
                function o(e, t) {
                    return (o = Object.setPrototypeOf || function (e, t) {
                        return e.__proto__ = t,
                            e
                    }
                    )(e, t)
                }
                function a(e) {
                    return (a = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.ConferenceError = void 0;
                var s = function (e) {
                    function t(e) {
                        return function (e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, t),
                            function (e, t) {
                                return !t || "object" !== i(t) && "function" != typeof t ? function (e) {
                                    if (void 0 === e)
                                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                    return e
                                }(e) : t
                            }(this, a(t).call(this, e))
                    }
                    return function (e, t) {
                        if ("function" != typeof t && null !== t)
                            throw new TypeError("Super expression must either be null or a function");
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                            t && o(e, t)
                    }(t, r(Error)),
                        t
                }();
                n.ConferenceError = s
            }
                , {}],
            15: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    Object.defineProperty(n, "ConferenceClient", {
                        enumerable: !0,
                        get: function () {
                            return i.ConferenceClient
                        }
                    }),
                    Object.defineProperty(n, "SioSignaling", {
                        enumerable: !0,
                        get: function () {
                            return r.SioSignaling
                        }
                    });
                var i = e("./client.js")
                    , r = e("./signaling.js")
            }
                , {
                "./client.js": 13,
                "./signaling.js": 19
            }],
            16: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.ConferenceInfo = void 0,
                    n.ConferenceInfo = function e(t, n, i, r, o) {
                        !function (e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, e),
                            this.id = t,
                            this.participants = n,
                            this.remoteStreams = i,
                            this.self = r,
                            this.messageList = o
                    }
            }
                , {}],
            17: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.LayoutChangeEvent = n.ActiveAudioInputChangeEvent = n.RemoteMixedStream = void 0;
                var i = a(e("../base/stream.js"))
                    , r = a(e("./streamutils.js"))
                    , o = e("../base/event.js");
                function a(e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            if (Object.prototype.hasOwnProperty.call(e, n)) {
                                var i = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(e, n) : {};
                                i.get || i.set ? Object.defineProperty(t, n, i) : t[n] = e[n]
                            }
                    return t.default = e,
                        t
                }
                function s(e) {
                    return (s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                        return typeof e
                    }
                        : function (e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        }
                    )(e)
                }
                function l(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }
                function c(e, t) {
                    return !t || "object" !== s(t) && "function" != typeof t ? function (e) {
                        if (void 0 === e)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e
                    }(e) : t
                }
                function u(e) {
                    return (u = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                function d(e, t) {
                    if ("function" != typeof t && null !== t)
                        throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                        t && function (e, t) {
                            (Object.setPrototypeOf || function (e, t) {
                                return e.__proto__ = t,
                                    e
                            }
                            )(e, t)
                        }(e, t)
                }
                var p = function (e) {
                    function t(e) {
                        var n;
                        if (l(this, t),
                            "mixed" !== e.type)
                            throw new TypeError("Not a mixed stream");
                        return (n = c(this, u(t).call(this, e.id, void 0, void 0, new i.StreamSourceInfo("mixed", "mixed")))).settings = r.convertToPublicationSettings(e.media),
                            n.capabilities = new r.convertToSubscriptionCapabilities(e.media),
                            n
                    }
                    return d(t, i.RemoteStream),
                        t
                }();
                n.RemoteMixedStream = p;
                var h = function (e) {
                    function t(e, n) {
                        var i;
                        return l(this, t),
                            (i = c(this, u(t).call(this, e))).activeAudioInputStreamId = n.activeAudioInputStreamId,
                            i
                    }
                    return d(t, o.OwtEvent),
                        t
                }();
                n.ActiveAudioInputChangeEvent = h;
                var f = function (e) {
                    function t(e, n) {
                        var i;
                        return l(this, t),
                            (i = c(this, u(t).call(this, e))).layout = n.layout,
                            i
                    }
                    return d(t, o.OwtEvent),
                        t
                }();
                n.LayoutChangeEvent = f
            }
                , {
                "../base/event.js": 3,
                "../base/stream.js": 10,
                "./streamutils.js": 20
            }],
            18: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.Participant = void 0;
                var i = function (e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            if (Object.prototype.hasOwnProperty.call(e, n)) {
                                var i = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(e, n) : {};
                                i.get || i.set ? Object.defineProperty(t, n, i) : t[n] = e[n]
                            }
                    return t.default = e,
                        t
                }(e("../base/event.js"));
                function r(e) {
                    return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                        return typeof e
                    }
                        : function (e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        }
                    )(e)
                }
                function o(e) {
                    return (o = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                function a(e, t) {
                    return (a = Object.setPrototypeOf || function (e, t) {
                        return e.__proto__ = t,
                            e
                    }
                    )(e, t)
                }
                function s(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e
                }
                var l = function (e) {
                    function t(e, n, i) {
                        var a, l, c = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {};
                        return function (e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, t),
                            this,
                            a = !(l = o(t).call(this)) || "object" !== r(l) && "function" != typeof l ? s(this) : l,
                            Object.defineProperty(s(s(a)), "id", {
                                configurable: !1,
                                writable: !1,
                                value: e
                            }),
                            Object.defineProperty(s(s(a)), "role", {
                                configurable: !1,
                                writable: !1,
                                value: n
                            }),
                            Object.defineProperty(s(s(a)), "userId", {
                                configurable: !1,
                                writable: !1,
                                value: i
                            }),
                            Object.defineProperty(s(s(a)), "properties", {
                                configurable: !1,
                                writable: !1,
                                value: c
                            }),
                            a
                    }
                    return function (e, t) {
                        if ("function" != typeof t && null !== t)
                            throw new TypeError("Super expression must either be null or a function");
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                            t && a(e, t)
                    }(t, i.EventDispatcher),
                        t
                }();
                n.Participant = l
            }
                , {
                "../base/event.js": 3
            }],
            19: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.SioSignaling = void 0;
                var i, r = (i = e("../base/logger.js")) && i.__esModule ? i : {
                    default: i
                }, o = function (e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            if (Object.prototype.hasOwnProperty.call(e, n)) {
                                var i = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(e, n) : {};
                                i.get || i.set ? Object.defineProperty(t, n, i) : t[n] = e[n]
                            }
                    return t.default = e,
                        t
                }(e("../base/event.js")), a = e("./error.js"), s = e("../base/base64.js");
                function l(e) {
                    return (l = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                        return typeof e
                    }
                        : function (e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        }
                    )(e)
                }
                function c(e, t) {
                    for (var n = 0; n < t.length; n++) {
                        var i = t[n];
                        i.enumerable = i.enumerable || !1,
                            i.configurable = !0,
                            "value" in i && (i.writable = !0),
                            Object.defineProperty(e, i.key, i)
                    }
                }
                function u(e, t) {
                    return !t || "object" !== l(t) && "function" != typeof t ? function (e) {
                        if (void 0 === e)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e
                    }(e) : t
                }
                function d(e) {
                    return (d = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                function p(e, t) {
                    return (p = Object.setPrototypeOf || function (e, t) {
                        return e.__proto__ = t,
                            e
                    }
                    )(e, t)
                }
                function h(e, t, n, i) {
                    "ok" === e || "success" === e ? n(t) : "error" === e ? i(t) : r.default.error("MCU returns unknown ack.")
                }
                var f = function (e) {
                    function t() {
                        var e;
                        return function (e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, t),
                            (e = u(this, d(t).call(this)))._socket = null,
                            e._loggedIn = !1,
                            e._reconnectTimes = 0,
                            e._reconnectionTicket = null,
                            e._refreshReconnectionTicket = null,
                            e
                    }
                    var n, i;
                    return function (e, t) {
                        if ("function" != typeof t && null !== t)
                            throw new TypeError("Super expression must either be null or a function");
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                            t && p(e, t)
                    }(t, o.EventDispatcher),
                        n = t,
                        (i = [{
                            key: "connect",
                            value: function (e, t, n) {
                                var i = this;
                                return new Promise(function (t, r) {
                                    i._socket = io(e, {
                                        reconnection: !0,
                                        reconnectionAttempts: 10,
                                        "force new connection": !0
                                    }),
                                        ["participant", "text", "stream", "progress"].forEach(function (e) {
                                            i._socket.on(e, function (t) {
                                                i.dispatchEvent(new o.MessageEvent("data", {
                                                    message: {
                                                        notification: e,
                                                        data: t
                                                    }
                                                }))
                                            })
                                        }),
                                        i._socket.on("reconnecting", function () {
                                            i._reconnectTimes++
                                        }),
                                        i._socket.on("reconnect_failed", function () {
                                            i._reconnectTimes >= 10 && i.dispatchEvent(new o.OwtEvent("disconnect"))
                                        }),
                                        i._socket.on("connect_error", function (t) {
                                            r("connect_error:".concat(e))
                                        }),
                                        i._socket.on("drop", function () {
                                            i._reconnectTimes = 10
                                        }),
                                        i._socket.on("disconnect", function () {
                                            i._clearReconnectionTask(),
                                                i._reconnectTimes >= 10 && (i._loggedIn = !1,
                                                    i.dispatchEvent(new o.OwtEvent("disconnect")))
                                        }),
                                        i._socket.emit("login", n, function (e, n) {
                                            "ok" === e && (i._loggedIn = !0,
                                                i._onReconnectionTicket(n.reconnectionTicket),
                                                i._socket.on("connect", function () {
                                                    i._socket.emit("relogin", i._reconnectionTicket, function (e, t) {
                                                        "ok" === e ? (i._reconnectTimes = 0,
                                                            i._onReconnectionTicket(t)) : i.dispatchEvent(new o.OwtEvent("disconnect"))
                                                    })
                                                })),
                                                h(e, n, t, r)
                                        })
                                }
                                )
                            }
                        }, {
                            key: "disconnect",
                            value: function () {
                                var e = this;
                                return !this._socket || this._socket.disconnected ? Promise.reject(new a.ConferenceError("Portal is not connected.")) : new Promise(function (t, n) {
                                    e._socket.emit("logout", function (i, r) {
                                        e._reconnectTimes = 10,
                                            e._socket.disconnect(),
                                            h(i, r, t, n)
                                    })
                                }
                                )
                            }
                        }, {
                            key: "send",
                            value: function (e, t) {
                                var n = this;
                                return new Promise(function (i, r) {
                                    n._socket.emit(e, t, function (e, t) {
                                        h(e, t, i, r)
                                    })
                                }
                                )
                            }
                        }, {
                            key: "_onReconnectionTicket",
                            value: function (e) {
                                var t = this;
                                this._reconnectionTicket = e;
                                var n = JSON.parse(s.Base64.decodeBase64(e))
                                    , i = Date.now();
                                if (n.notAfter <= i - 1e4)
                                    r.default.warning("Reconnection ticket expires too soon.");
                                else {
                                    var o = n.notAfter - i - 6e4;
                                    o < 0 && (o = n.notAfter - i - 1e4),
                                        this._clearReconnectionTask(),
                                        this._refreshReconnectionTicket = setTimeout(function () {
                                            t._socket.emit("refreshReconnectionTicket", function (e, n) {
                                                "ok" === e ? t._onReconnectionTicket(n) : r.default.warning("Failed to refresh reconnection ticket.")
                                            })
                                        }, o)
                                }
                            }
                        }, {
                            key: "_clearReconnectionTask",
                            value: function () {
                                clearTimeout(this._refreshReconnectionTicket),
                                    this._refreshReconnectionTicket = null
                            }
                        }]) && c(n.prototype, i),
                        t
                }();
                n.SioSignaling = f
            }
                , {
                "../base/base64.js": 1,
                "../base/event.js": 3,
                "../base/logger.js": 5,
                "./error.js": 14
            }],
            20: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.convertToPublicationSettings = function (e) {
                        var t, n, a, s, l, c, u, d;
                        return e.audio && (e.audio.format && (n = new o.AudioCodecParameters(e.audio.format.codec, e.audio.format.channelNum, e.audio.format.sampleRate)),
                            t = new i.AudioPublicationSettings(n)),
                            e.video && (e.video.format && (s = new o.VideoCodecParameters(e.video.format.codec, e.video.format.profile)),
                                e.video.parameters && (e.video.parameters.resolution && (l = new r.Resolution(e.video.parameters.resolution.width, e.video.parameters.resolution.height)),
                                    c = e.video.parameters.framerate,
                                    u = 1e3 * e.video.parameters.bitrate,
                                    d = e.video.parameters.keyFrameInterval),
                                a = new i.VideoPublicationSettings(s, l, c, u, d)),
                            new i.PublicationSettings(t, a)
                    }
                    ,
                    n.convertToSubscriptionCapabilities = function (e) {
                        var t, n;
                        if (e.audio) {
                            var i = [];
                            if (e.audio && e.audio.format && i.push(new o.AudioCodecParameters(e.audio.format.codec, e.audio.format.channelNum, e.audio.format.sampleRate)),
                                e.audio && e.audio.optional && e.audio.optional.format) {
                                var s = !0
                                    , u = !1
                                    , d = void 0;
                                try {
                                    for (var p, h = e.audio.optional.format[Symbol.iterator](); !(s = (p = h.next()).done); s = !0) {
                                        var f = p.value
                                            , m = new o.AudioCodecParameters(f.codec, f.channelNum, f.sampleRate);
                                        i.push(m)
                                    }
                                } catch (e) {
                                    u = !0,
                                        d = e
                                } finally {
                                    try {
                                        s || null == h.return || h.return()
                                    } finally {
                                        if (u)
                                            throw d
                                    }
                                }
                            }
                            i.sort(),
                                t = new a.AudioSubscriptionCapabilities(i)
                        }
                        if (e.video) {
                            var g = [];
                            if (e.video && e.video.format && g.push(new o.VideoCodecParameters(e.video.format.codec, e.video.format.profile)),
                                e.video && e.video.optional && e.video.optional.format) {
                                var v = !0
                                    , y = !1
                                    , b = void 0;
                                try {
                                    for (var w, $ = e.video.optional.format[Symbol.iterator](); !(v = (w = $.next()).done); v = !0) {
                                        var S = w.value
                                            , C = new o.VideoCodecParameters(S.codec, S.profile);
                                        g.push(C)
                                    }
                                } catch (e) {
                                    y = !0,
                                        b = e
                                } finally {
                                    try {
                                        v || null == $.return || $.return()
                                    } finally {
                                        if (y)
                                            throw b
                                    }
                                }
                            }
                            g.sort();
                            var x = Array.from(e.video.optional.parameters.resolution, function (e) {
                                return new r.Resolution(e.width, e.height)
                            });
                            x.sort(c);
                            var T = Array.from(e.video.optional.parameters.bitrate, function (e) {
                                return function (e) {
                                    return "string" == typeof e && e.startsWith("x") ? Number.parseFloat(e.replace(/^x/, "")) : (L.Logger.warning("Invalid bitrate multiplier input."),
                                        0)
                                }(e)
                            });
                            T.push(1),
                                T.sort(l);
                            var k = JSON.parse(JSON.stringify(e.video.optional.parameters.framerate));
                            e.video && e.video.parameters && e.video.parameters.framerate && k.push(e.video.parameters.framerate),
                                k.sort(l);
                            var P = JSON.parse(JSON.stringify(e.video.optional.parameters.keyFrameInterval));
                            e.video && e.video.parameters && e.video.parameters.keyFrameInterval && P.push(e.video.parameters.keyFrameInterval),
                                P.sort(l),
                                n = new a.VideoSubscriptionCapabilities(g, x, k, T, P)
                        }
                        return new a.SubscriptionCapabilities(t, n)
                    }
                    ;
                var i = s(e("../base/publication.js"))
                    , r = s(e("../base/mediaformat.js"))
                    , o = s(e("../base/codec.js"))
                    , a = s(e("./subscription.js"));
                function s(e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            if (Object.prototype.hasOwnProperty.call(e, n)) {
                                var i = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(e, n) : {};
                                i.get || i.set ? Object.defineProperty(t, n, i) : t[n] = e[n]
                            }
                    return t.default = e,
                        t
                }
                function l(e, t) {
                    return e - t
                }
                function c(e, t) {
                    return e.width !== t.width ? e.width - t.width : e.height - t.height
                }
            }
                , {
                "../base/codec.js": 2,
                "../base/mediaformat.js": 6,
                "../base/publication.js": 8,
                "./subscription.js": 21
            }],
            21: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.Subscription = n.SubscriptionUpdateOptions = n.VideoSubscriptionUpdateOptions = n.SubscribeOptions = n.VideoSubscriptionConstraints = n.AudioSubscriptionConstraints = n.SubscriptionCapabilities = n.VideoSubscriptionCapabilities = n.AudioSubscriptionCapabilities = void 0,
                    r(e("../base/mediaformat.js")),
                    r(e("../base/codec.js"));
                var i = e("../base/event.js");
                function r(e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            if (Object.prototype.hasOwnProperty.call(e, n)) {
                                var i = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(e, n) : {};
                                i.get || i.set ? Object.defineProperty(t, n, i) : t[n] = e[n]
                            }
                    return t.default = e,
                        t
                }
                function o(e) {
                    return (o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                        return typeof e
                    }
                        : function (e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        }
                    )(e)
                }
                function a(e) {
                    return (a = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                function s(e, t) {
                    return (s = Object.setPrototypeOf || function (e, t) {
                        return e.__proto__ = t,
                            e
                    }
                    )(e, t)
                }
                function l(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e
                }
                function c(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }
                n.AudioSubscriptionCapabilities = function e(t) {
                    c(this, e),
                        this.codecs = t
                }
                    ,
                    n.VideoSubscriptionCapabilities = function e(t, n, i, r, o) {
                        c(this, e),
                            this.codecs = t,
                            this.resolutions = n,
                            this.frameRates = i,
                            this.bitrateMultipliers = r,
                            this.keyFrameIntervals = o
                    }
                    ,
                    n.SubscriptionCapabilities = function e(t, n) {
                        c(this, e),
                            this.audio = t,
                            this.video = n
                    }
                    ,
                    n.AudioSubscriptionConstraints = function e(t) {
                        c(this, e),
                            this.codecs = t
                    }
                    ,
                    n.VideoSubscriptionConstraints = function e(t, n, i, r, o) {
                        c(this, e),
                            this.codecs = t,
                            this.resolution = n,
                            this.frameRate = i,
                            this.bitrateMultiplier = r,
                            this.keyFrameInterval = o
                    }
                    ,
                    n.SubscribeOptions = function e(t, n) {
                        c(this, e),
                            this.audio = t,
                            this.video = n
                    }
                    ,
                    n.VideoSubscriptionUpdateOptions = function e() {
                        c(this, e),
                            this.resolution = void 0,
                            this.frameRate = void 0,
                            this.bitrateMultipliers = void 0,
                            this.keyFrameInterval = void 0
                    }
                    ,
                    n.SubscriptionUpdateOptions = function e() {
                        c(this, e),
                            this.video = void 0
                    }
                    ;
                var u = function (e) {
                    function t(e, n, i, r, s, u) {
                        var d, p;
                        if (c(this, t),
                            this,
                            d = !(p = a(t).call(this)) || "object" !== o(p) && "function" != typeof p ? l(this) : p,
                            !e)
                            throw new TypeError("ID cannot be null or undefined.");
                        return Object.defineProperty(l(l(d)), "id", {
                            configurable: !1,
                            writable: !1,
                            value: e
                        }),
                            d.stop = n,
                            d.getStats = i,
                            d.mute = r,
                            d.unmute = s,
                            d.applyOptions = u,
                            d
                    }
                    return function (e, t) {
                        if ("function" != typeof t && null !== t)
                            throw new TypeError("Super expression must either be null or a function");
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                            t && s(e, t)
                    }(t, i.EventDispatcher),
                        t
                }();
                n.Subscription = u
            }
                , {
                "../base/codec.js": 2,
                "../base/event.js": 3,
                "../base/mediaformat.js": 6
            }],
            22: [function (e, t, n) {
                "use strict";
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }),
                    n.Conference = n.Base = void 0;
                var i = o(e("./base/export.js"))
                    , r = o(e("./conference/export.js"));
                function o(e) {
                    if (e && e.__esModule)
                        return e;
                    var t = {};
                    if (null != e)
                        for (var n in e)
                            if (Object.prototype.hasOwnProperty.call(e, n)) {
                                var i = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(e, n) : {};
                                i.get || i.set ? Object.defineProperty(t, n, i) : t[n] = e[n]
                            }
                    return t.default = e,
                        t
                }
                var a = i;
                n.Base = a;
                var s = r;
                n.Conference = s
            }
                , {
                "./base/export.js": 4,
                "./conference/export.js": 15
            }]
        }, {}, [22])(22)
    }),
    "undefined" == typeof jQuery)
    throw new Error("Bootstrap's JavaScript requires jQuery");
!function (e) {
    "use strict";
    var t = e.fn.jquery.split(" ")[0].split(".");
    if (t[0] < 2 && t[1] < 9 || 1 == t[0] && 9 == t[1] && t[2] < 1 || t[0] > 3)
        throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")
}(jQuery),
    function (e) {
        "use strict";
        e.fn.emulateTransitionEnd = function (t) {
            var n = !1
                , i = this;
            e(this).one("bsTransitionEnd", function () {
                n = !0
            });
            return setTimeout(function () {
                n || e(i).trigger(e.support.transition.end)
            }, t),
                this
        }
            ,
            e(function () {
                e.support.transition = function () {
                    var e = document.createElement("bootstrap")
                        , t = {
                            WebkitTransition: "webkitTransitionEnd",
                            MozTransition: "transitionend",
                            OTransition: "oTransitionEnd otransitionend",
                            transition: "transitionend"
                        };
                    for (var n in t)
                        if (void 0 !== e.style[n])
                            return {
                                end: t[n]
                            };
                    return !1
                }(),
                    e.support.transition && (e.event.special.bsTransitionEnd = {
                        bindType: e.support.transition.end,
                        delegateType: e.support.transition.end,
                        handle: function (t) {
                            if (e(t.target).is(this))
                                return t.handleObj.handler.apply(this, arguments)
                        }
                    })
            })
    }(jQuery),
    function (e) {
        "use strict";
        var t = '[data-dismiss="alert"]'
            , n = function (n) {
                e(n).on("click", t, this.close)
            };
        n.VERSION = "3.3.7",
            n.TRANSITION_DURATION = 150,
            n.prototype.close = function (t) {
                function i() {
                    a.detach().trigger("closed.bs.alert").remove()
                }
                var r = e(this)
                    , o = r.attr("data-target");
                o || (o = (o = r.attr("href")) && o.replace(/.*(?=#[^\s]*$)/, ""));
                var a = e("#" === o ? [] : o);
                t && t.preventDefault(),
                    a.length || (a = r.closest(".alert")),
                    a.trigger(t = e.Event("close.bs.alert")),
                    t.isDefaultPrevented() || (a.removeClass("in"),
                        e.support.transition && a.hasClass("fade") ? a.one("bsTransitionEnd", i).emulateTransitionEnd(n.TRANSITION_DURATION) : i())
            }
            ;
        var i = e.fn.alert;
        e.fn.alert = function (t) {
            return this.each(function () {
                var i = e(this)
                    , r = i.data("bs.alert");
                r || i.data("bs.alert", r = new n(this)),
                    "string" == typeof t && r[t].call(i)
            })
        }
            ,
            e.fn.alert.Constructor = n,
            e.fn.alert.noConflict = function () {
                return e.fn.alert = i,
                    this
            }
            ,
            e(document).on("click.bs.alert.data-api", t, n.prototype.close)
    }(jQuery),
    function (e) {
        "use strict";
        function t(t) {
            return this.each(function () {
                var i = e(this)
                    , r = i.data("bs.button")
                    , o = "object" == typeof t && t;
                r || i.data("bs.button", r = new n(this, o)),
                    "toggle" == t ? r.toggle() : t && r.setState(t)
            })
        }
        var n = function (t, i) {
            this.$element = e(t),
                this.options = e.extend({}, n.DEFAULTS, i),
                this.isLoading = !1
        };
        n.VERSION = "3.3.7",
            n.DEFAULTS = {
                loadingText: "loading..."
            },
            n.prototype.setState = function (t) {
                var n = "disabled"
                    , i = this.$element
                    , r = i.is("input") ? "val" : "html"
                    , o = i.data();
                t += "Text",
                    null == o.resetText && i.data("resetText", i[r]()),
                    setTimeout(e.proxy(function () {
                        i[r](null == o[t] ? this.options[t] : o[t]),
                            "loadingText" == t ? (this.isLoading = !0,
                                i.addClass(n).attr(n, n).prop(n, !0)) : this.isLoading && (this.isLoading = !1,
                                    i.removeClass(n).removeAttr(n).prop(n, !1))
                    }, this), 0)
            }
            ,
            n.prototype.toggle = function () {
                var e = !0
                    , t = this.$element.closest('[data-toggle="buttons"]');
                if (t.length) {
                    var n = this.$element.find("input");
                    "radio" == n.prop("type") ? (n.prop("checked") && (e = !1),
                        t.find(".active").removeClass("active"),
                        this.$element.addClass("active")) : "checkbox" == n.prop("type") && (n.prop("checked") !== this.$element.hasClass("active") && (e = !1),
                            this.$element.toggleClass("active")),
                        n.prop("checked", this.$element.hasClass("active")),
                        e && n.trigger("change")
                } else
                    this.$element.attr("aria-pressed", !this.$element.hasClass("active")),
                        this.$element.toggleClass("active")
            }
            ;
        var i = e.fn.button;
        e.fn.button = t,
            e.fn.button.Constructor = n,
            e.fn.button.noConflict = function () {
                return e.fn.button = i,
                    this
            }
            ,
            e(document).on("click.bs.button.data-api", '[data-toggle^="button"]', function (n) {
                var i = e(n.target).closest(".btn");
                t.call(i, "toggle"),
                    e(n.target).is('input[type="radio"], input[type="checkbox"]') || (n.preventDefault(),
                        i.is("input,button") ? i.trigger("focus") : i.find("input:visible,button:visible").first().trigger("focus"))
            }).on("focus.bs.button.data-api blur.bs.button.data-api", '[data-toggle^="button"]', function (t) {
                e(t.target).closest(".btn").toggleClass("focus", /^focus(in)?$/.test(t.type))
            })
    }(jQuery),
    function (e) {
        "use strict";
        function t(t) {
            return this.each(function () {
                var i = e(this)
                    , r = i.data("bs.carousel")
                    , o = e.extend({}, n.DEFAULTS, i.data(), "object" == typeof t && t)
                    , a = "string" == typeof t ? t : o.slide;
                r || i.data("bs.carousel", r = new n(this, o)),
                    "number" == typeof t ? r.to(t) : a ? r[a]() : o.interval && r.pause().cycle()
            })
        }
        var n = function (t, n) {
            this.$element = e(t),
                this.$indicators = this.$element.find(".carousel-indicators"),
                this.options = n,
                this.paused = null,
                this.sliding = null,
                this.interval = null,
                this.$active = null,
                this.$items = null,
                this.options.keyboard && this.$element.on("keydown.bs.carousel", e.proxy(this.keydown, this)),
                "hover" == this.options.pause && !("ontouchstart" in document.documentElement) && this.$element.on("mouseenter.bs.carousel", e.proxy(this.pause, this)).on("mouseleave.bs.carousel", e.proxy(this.cycle, this))
        };
        n.VERSION = "3.3.7",
            n.TRANSITION_DURATION = 600,
            n.DEFAULTS = {
                interval: 5e3,
                pause: "hover",
                wrap: !0,
                keyboard: !0
            },
            n.prototype.keydown = function (e) {
                if (!/input|textarea/i.test(e.target.tagName)) {
                    switch (e.which) {
                        case 37:
                            this.prev();
                            break;
                        case 39:
                            this.next();
                            break;
                        default:
                            return
                    }
                    e.preventDefault()
                }
            }
            ,
            n.prototype.cycle = function (t) {
                return t || (this.paused = !1),
                    this.interval && clearInterval(this.interval),
                    this.options.interval && !this.paused && (this.interval = setInterval(e.proxy(this.next, this), this.options.interval)),
                    this
            }
            ,
            n.prototype.getItemIndex = function (e) {
                return this.$items = e.parent().children(".item"),
                    this.$items.index(e || this.$active)
            }
            ,
            n.prototype.getItemForDirection = function (e, t) {
                var n = this.getItemIndex(t);
                if (("prev" == e && 0 === n || "next" == e && n == this.$items.length - 1) && !this.options.wrap)
                    return t;
                var i = (n + ("prev" == e ? -1 : 1)) % this.$items.length;
                return this.$items.eq(i)
            }
            ,
            n.prototype.to = function (e) {
                var t = this
                    , n = this.getItemIndex(this.$active = this.$element.find(".item.active"));
                if (!(e > this.$items.length - 1 || e < 0))
                    return this.sliding ? this.$element.one("slid.bs.carousel", function () {
                        t.to(e)
                    }) : n == e ? this.pause().cycle() : this.slide(e > n ? "next" : "prev", this.$items.eq(e))
            }
            ,
            n.prototype.pause = function (t) {
                return t || (this.paused = !0),
                    this.$element.find(".next, .prev").length && e.support.transition && (this.$element.trigger(e.support.transition.end),
                        this.cycle(!0)),
                    this.interval = clearInterval(this.interval),
                    this
            }
            ,
            n.prototype.next = function () {
                if (!this.sliding)
                    return this.slide("next")
            }
            ,
            n.prototype.prev = function () {
                if (!this.sliding)
                    return this.slide("prev")
            }
            ,
            n.prototype.slide = function (t, i) {
                var r = this.$element.find(".item.active")
                    , o = i || this.getItemForDirection(t, r)
                    , a = this.interval
                    , s = "next" == t ? "left" : "right"
                    , l = this;
                if (o.hasClass("active"))
                    return this.sliding = !1;
                var c = o[0]
                    , u = e.Event("slide.bs.carousel", {
                        relatedTarget: c,
                        direction: s
                    });
                if (this.$element.trigger(u),
                    !u.isDefaultPrevented()) {
                    if (this.sliding = !0,
                        a && this.pause(),
                        this.$indicators.length) {
                        this.$indicators.find(".active").removeClass("active");
                        var d = e(this.$indicators.children()[this.getItemIndex(o)]);
                        d && d.addClass("active")
                    }
                    var p = e.Event("slid.bs.carousel", {
                        relatedTarget: c,
                        direction: s
                    });
                    return e.support.transition && this.$element.hasClass("slide") ? (o.addClass(t),
                        o[0].offsetWidth,
                        r.addClass(s),
                        o.addClass(s),
                        r.one("bsTransitionEnd", function () {
                            o.removeClass([t, s].join(" ")).addClass("active"),
                                r.removeClass(["active", s].join(" ")),
                                l.sliding = !1,
                                setTimeout(function () {
                                    l.$element.trigger(p)
                                }, 0)
                        }).emulateTransitionEnd(n.TRANSITION_DURATION)) : (r.removeClass("active"),
                            o.addClass("active"),
                            this.sliding = !1,
                            this.$element.trigger(p)),
                        a && this.cycle(),
                        this
                }
            }
            ;
        var i = e.fn.carousel;
        e.fn.carousel = t,
            e.fn.carousel.Constructor = n,
            e.fn.carousel.noConflict = function () {
                return e.fn.carousel = i,
                    this
            }
            ;
        var r = function (n) {
            var i, r = e(this), o = e(r.attr("data-target") || (i = r.attr("href")) && i.replace(/.*(?=#[^\s]+$)/, ""));
            if (o.hasClass("carousel")) {
                var a = e.extend({}, o.data(), r.data())
                    , s = r.attr("data-slide-to");
                s && (a.interval = !1),
                    t.call(o, a),
                    s && o.data("bs.carousel").to(s),
                    n.preventDefault()
            }
        };
        e(document).on("click.bs.carousel.data-api", "[data-slide]", r).on("click.bs.carousel.data-api", "[data-slide-to]", r),
            e(window).on("load", function () {
                e('[data-ride="carousel"]').each(function () {
                    var n = e(this);
                    t.call(n, n.data())
                })
            })
    }(jQuery),
    function (e) {
        "use strict";
        function t(t) {
            var n, i = t.attr("data-target") || (n = t.attr("href")) && n.replace(/.*(?=#[^\s]+$)/, "");
            return e(i)
        }
        function n(t) {
            return this.each(function () {
                var n = e(this)
                    , r = n.data("bs.collapse")
                    , o = e.extend({}, i.DEFAULTS, n.data(), "object" == typeof t && t);
                !r && o.toggle && /show|hide/.test(t) && (o.toggle = !1),
                    r || n.data("bs.collapse", r = new i(this, o)),
                    "string" == typeof t && r[t]()
            })
        }
        var i = function (t, n) {
            this.$element = e(t),
                this.options = e.extend({}, i.DEFAULTS, n),
                this.$trigger = e('[data-toggle="collapse"][href="#' + t.id + '"],[data-toggle="collapse"][data-target="#' + t.id + '"]'),
                this.transitioning = null,
                this.options.parent ? this.$parent = this.getParent() : this.addAriaAndCollapsedClass(this.$element, this.$trigger),
                this.options.toggle && this.toggle()
        };
        i.VERSION = "3.3.7",
            i.TRANSITION_DURATION = 350,
            i.DEFAULTS = {
                toggle: !0
            },
            i.prototype.dimension = function () {
                return this.$element.hasClass("width") ? "width" : "height"
            }
            ,
            i.prototype.show = function () {
                if (!this.transitioning && !this.$element.hasClass("in")) {
                    var t, r = this.$parent && this.$parent.children(".panel").children(".in, .collapsing");
                    if (!(r && r.length && (t = r.data("bs.collapse"),
                        t && t.transitioning))) {
                        var o = e.Event("show.bs.collapse");
                        if (this.$element.trigger(o),
                            !o.isDefaultPrevented()) {
                            r && r.length && (n.call(r, "hide"),
                                t || r.data("bs.collapse", null));
                            var a = this.dimension();
                            this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded", !0),
                                this.$trigger.removeClass("collapsed").attr("aria-expanded", !0),
                                this.transitioning = 1;
                            var s = function () {
                                this.$element.removeClass("collapsing").addClass("collapse in")[a](""),
                                    this.transitioning = 0,
                                    this.$element.trigger("shown.bs.collapse")
                            };
                            if (!e.support.transition)
                                return s.call(this);
                            var l = e.camelCase(["scroll", a].join("-"));
                            this.$element.one("bsTransitionEnd", e.proxy(s, this)).emulateTransitionEnd(i.TRANSITION_DURATION)[a](this.$element[0][l])
                        }
                    }
                }
            }
            ,
            i.prototype.hide = function () {
                if (!this.transitioning && this.$element.hasClass("in")) {
                    var t = e.Event("hide.bs.collapse");
                    if (this.$element.trigger(t),
                        !t.isDefaultPrevented()) {
                        var n = this.dimension();
                        this.$element[n](this.$element[n]())[0].offsetHeight,
                            this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded", !1),
                            this.$trigger.addClass("collapsed").attr("aria-expanded", !1),
                            this.transitioning = 1;
                        var r = function () {
                            this.transitioning = 0,
                                this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")
                        };
                        return e.support.transition ? void this.$element[n](0).one("bsTransitionEnd", e.proxy(r, this)).emulateTransitionEnd(i.TRANSITION_DURATION) : r.call(this)
                    }
                }
            }
            ,
            i.prototype.toggle = function () {
                this[this.$element.hasClass("in") ? "hide" : "show"]()
            }
            ,
            i.prototype.getParent = function () {
                return e(this.options.parent).find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]').each(e.proxy(function (n, i) {
                    var r = e(i);
                    this.addAriaAndCollapsedClass(t(r), r)
                }, this)).end()
            }
            ,
            i.prototype.addAriaAndCollapsedClass = function (e, t) {
                var n = e.hasClass("in");
                e.attr("aria-expanded", n),
                    t.toggleClass("collapsed", !n).attr("aria-expanded", n)
            }
            ;
        var r = e.fn.collapse;
        e.fn.collapse = n,
            e.fn.collapse.Constructor = i,
            e.fn.collapse.noConflict = function () {
                return e.fn.collapse = r,
                    this
            }
            ,
            e(document).on("click.bs.collapse.data-api", '[data-toggle="collapse"]', function (i) {
                var r = e(this);
                r.attr("data-target") || i.preventDefault();
                var o = t(r)
                    , a = o.data("bs.collapse") ? "toggle" : r.data();
                n.call(o, a)
            })
    }(jQuery),
    function (e) {
        "use strict";
        function t(t) {
            var n = t.attr("data-target");
            n || (n = (n = t.attr("href")) && /#[A-Za-z]/.test(n) && n.replace(/.*(?=#[^\s]*$)/, ""));
            var i = n && e(n);
            return i && i.length ? i : t.parent()
        }
        function n(n) {
            n && 3 === n.which || (e(i).remove(),
                e(r).each(function () {
                    var i = e(this)
                        , r = t(i)
                        , o = {
                            relatedTarget: this
                        };
                    r.hasClass("open") && (n && "click" == n.type && /input|textarea/i.test(n.target.tagName) && e.contains(r[0], n.target) || (r.trigger(n = e.Event("hide.bs.dropdown", o)),
                        n.isDefaultPrevented() || (i.attr("aria-expanded", "false"),
                            r.removeClass("open").trigger(e.Event("hidden.bs.dropdown", o)))))
                }))
        }
        var i = ".dropdown-backdrop"
            , r = '[data-toggle="dropdown"]'
            , o = function (t) {
                e(t).on("click.bs.dropdown", this.toggle)
            };
        o.VERSION = "3.3.7",
            o.prototype.toggle = function (i) {
                var r = e(this);
                if (!r.is(".disabled, :disabled")) {
                    var o = t(r)
                        , a = o.hasClass("open");
                    if (n(),
                        !a) {
                        "ontouchstart" in document.documentElement && !o.closest(".navbar-nav").length && e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click", n);
                        var s = {
                            relatedTarget: this
                        };
                        if (o.trigger(i = e.Event("show.bs.dropdown", s)),
                            i.isDefaultPrevented())
                            return;
                        r.trigger("focus").attr("aria-expanded", "true"),
                            o.toggleClass("open").trigger(e.Event("shown.bs.dropdown", s))
                    }
                    return !1
                }
            }
            ,
            o.prototype.keydown = function (n) {
                if (/(38|40|27|32)/.test(n.which) && !/input|textarea/i.test(n.target.tagName)) {
                    var i = e(this);
                    if (n.preventDefault(),
                        n.stopPropagation(),
                        !i.is(".disabled, :disabled")) {
                        var o = t(i)
                            , a = o.hasClass("open");
                        if (!a && 27 != n.which || a && 27 == n.which)
                            return 27 == n.which && o.find(r).trigger("focus"),
                                i.trigger("click");
                        var s = o.find(".dropdown-menu li:not(.disabled):visible a");
                        if (s.length) {
                            var l = s.index(n.target);
                            38 == n.which && l > 0 && l--,
                                40 == n.which && l < s.length - 1 && l++,
                                ~l || (l = 0),
                                s.eq(l).trigger("focus")
                        }
                    }
                }
            }
            ;
        var a = e.fn.dropdown;
        e.fn.dropdown = function (t) {
            return this.each(function () {
                var n = e(this)
                    , i = n.data("bs.dropdown");
                i || n.data("bs.dropdown", i = new o(this)),
                    "string" == typeof t && i[t].call(n)
            })
        }
            ,
            e.fn.dropdown.Constructor = o,
            e.fn.dropdown.noConflict = function () {
                return e.fn.dropdown = a,
                    this
            }
            ,
            e(document).on("click.bs.dropdown.data-api", n).on("click.bs.dropdown.data-api", ".dropdown form", function (e) {
                e.stopPropagation()
            }).on("click.bs.dropdown.data-api", r, o.prototype.toggle).on("keydown.bs.dropdown.data-api", r, o.prototype.keydown).on("keydown.bs.dropdown.data-api", ".dropdown-menu", o.prototype.keydown)
    }(jQuery),
    function (e) {
        "use strict";
        function t(t, i) {
            return this.each(function () {
                var r = e(this)
                    , o = r.data("bs.modal")
                    , a = e.extend({}, n.DEFAULTS, r.data(), "object" == typeof t && t);
                o || r.data("bs.modal", o = new n(this, a)),
                    "string" == typeof t ? o[t](i) : a.show && o.show(i)
            })
        }
        var n = function (t, n) {
            this.options = n,
                this.$body = e(document.body),
                this.$element = e(t),
                this.$dialog = this.$element.find(".modal-dialog"),
                this.$backdrop = null,
                this.isShown = null,
                this.originalBodyPad = null,
                this.scrollbarWidth = 0,
                this.ignoreBackdropClick = !1,
                this.options.remote && this.$element.find(".modal-content").load(this.options.remote, e.proxy(function () {
                    this.$element.trigger("loaded.bs.modal")
                }, this))
        };
        n.VERSION = "3.3.7",
            n.TRANSITION_DURATION = 300,
            n.BACKDROP_TRANSITION_DURATION = 150,
            n.DEFAULTS = {
                backdrop: !0,
                keyboard: !0,
                show: !0
            },
            n.prototype.toggle = function (e) {
                return this.isShown ? this.hide() : this.show(e)
            }
            ,
            n.prototype.show = function (t) {
                var i = this
                    , r = e.Event("show.bs.modal", {
                        relatedTarget: t
                    });
                this.$element.trigger(r),
                    this.isShown || r.isDefaultPrevented() || (this.isShown = !0,
                        this.checkScrollbar(),
                        this.setScrollbar(),
                        this.$body.addClass("modal-open"),
                        this.escape(),
                        this.resize(),
                        this.$element.on("click.dismiss.bs.modal", '[data-dismiss="modal"]', e.proxy(this.hide, this)),
                        this.$dialog.on("mousedown.dismiss.bs.modal", function () {
                            i.$element.one("mouseup.dismiss.bs.modal", function (t) {
                                e(t.target).is(i.$element) && (i.ignoreBackdropClick = !0)
                            })
                        }),
                        this.backdrop(function () {
                            var r = e.support.transition && i.$element.hasClass("fade");
                            i.$element.parent().length || i.$element.appendTo(i.$body),
                                i.$element.show().scrollTop(0),
                                i.adjustDialog(),
                                r && i.$element[0].offsetWidth,
                                i.$element.addClass("in"),
                                i.enforceFocus();
                            var o = e.Event("shown.bs.modal", {
                                relatedTarget: t
                            });
                            r ? i.$dialog.one("bsTransitionEnd", function () {
                                i.$element.trigger("focus").trigger(o)
                            }).emulateTransitionEnd(n.TRANSITION_DURATION) : i.$element.trigger("focus").trigger(o)
                        }))
            }
            ,
            n.prototype.hide = function (t) {
                t && t.preventDefault(),
                    t = e.Event("hide.bs.modal"),
                    this.$element.trigger(t),
                    this.isShown && !t.isDefaultPrevented() && (this.isShown = !1,
                        this.escape(),
                        this.resize(),
                        e(document).off("focusin.bs.modal"),
                        this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),
                        this.$dialog.off("mousedown.dismiss.bs.modal"),
                        e.support.transition && this.$element.hasClass("fade") ? this.$element.one("bsTransitionEnd", e.proxy(this.hideModal, this)).emulateTransitionEnd(n.TRANSITION_DURATION) : this.hideModal())
            }
            ,
            n.prototype.enforceFocus = function () {
                e(document).off("focusin.bs.modal").on("focusin.bs.modal", e.proxy(function (e) {
                    document === e.target || this.$element[0] === e.target || this.$element.has(e.target).length || this.$element.trigger("focus")
                }, this))
            }
            ,
            n.prototype.escape = function () {
                this.isShown && this.options.keyboard ? this.$element.on("keydown.dismiss.bs.modal", e.proxy(function (e) {
                    27 == e.which && this.hide()
                }, this)) : this.isShown || this.$element.off("keydown.dismiss.bs.modal")
            }
            ,
            n.prototype.resize = function () {
                this.isShown ? e(window).on("resize.bs.modal", e.proxy(this.handleUpdate, this)) : e(window).off("resize.bs.modal")
            }
            ,
            n.prototype.hideModal = function () {
                var e = this;
                this.$element.hide(),
                    this.backdrop(function () {
                        e.$body.removeClass("modal-open"),
                            e.resetAdjustments(),
                            e.resetScrollbar(),
                            e.$element.trigger("hidden.bs.modal")
                    })
            }
            ,
            n.prototype.removeBackdrop = function () {
                this.$backdrop && this.$backdrop.remove(),
                    this.$backdrop = null
            }
            ,
            n.prototype.backdrop = function (t) {
                var i = this
                    , r = this.$element.hasClass("fade") ? "fade" : "";
                if (this.isShown && this.options.backdrop) {
                    var o = e.support.transition && r;
                    if (this.$backdrop = e(document.createElement("div")).addClass("modal-backdrop " + r).appendTo(this.$body),
                        this.$element.on("click.dismiss.bs.modal", e.proxy(function (e) {
                            return this.ignoreBackdropClick ? void (this.ignoreBackdropClick = !1) : void (e.target === e.currentTarget && ("static" == this.options.backdrop ? this.$element[0].focus() : this.hide()))
                        }, this)),
                        o && this.$backdrop[0].offsetWidth,
                        this.$backdrop.addClass("in"),
                        !t)
                        return;
                    o ? this.$backdrop.one("bsTransitionEnd", t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION) : t()
                } else if (!this.isShown && this.$backdrop) {
                    this.$backdrop.removeClass("in");
                    var a = function () {
                        i.removeBackdrop(),
                            t && t()
                    };
                    e.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one("bsTransitionEnd", a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION) : a()
                } else
                    t && t()
            }
            ,
            n.prototype.handleUpdate = function () {
                this.adjustDialog()
            }
            ,
            n.prototype.adjustDialog = function () {
                var e = this.$element[0].scrollHeight > document.documentElement.clientHeight;
                this.$element.css({
                    paddingLeft: !this.bodyIsOverflowing && e ? this.scrollbarWidth : "",
                    paddingRight: this.bodyIsOverflowing && !e ? this.scrollbarWidth : ""
                })
            }
            ,
            n.prototype.resetAdjustments = function () {
                this.$element.css({
                    paddingLeft: "",
                    paddingRight: ""
                })
            }
            ,
            n.prototype.checkScrollbar = function () {
                var e = window.innerWidth;
                if (!e) {
                    var t = document.documentElement.getBoundingClientRect();
                    e = t.right - Math.abs(t.left)
                }
                this.bodyIsOverflowing = document.body.clientWidth < e,
                    this.scrollbarWidth = this.measureScrollbar()
            }
            ,
            n.prototype.setScrollbar = function () {
                var e = parseInt(this.$body.css("padding-right") || 0, 10);
                this.originalBodyPad = document.body.style.paddingRight || "",
                    this.bodyIsOverflowing && this.$body.css("padding-right", e + this.scrollbarWidth)
            }
            ,
            n.prototype.resetScrollbar = function () {
                this.$body.css("padding-right", this.originalBodyPad)
            }
            ,
            n.prototype.measureScrollbar = function () {
                var e = document.createElement("div");
                e.className = "modal-scrollbar-measure",
                    this.$body.append(e);
                var t = e.offsetWidth - e.clientWidth;
                return this.$body[0].removeChild(e),
                    t
            }
            ;
        var i = e.fn.modal;
        e.fn.modal = t,
            e.fn.modal.Constructor = n,
            e.fn.modal.noConflict = function () {
                return e.fn.modal = i,
                    this
            }
            ,
            e(document).on("click.bs.modal.data-api", '[data-toggle="modal"]', function (n) {
                var i = e(this)
                    , r = i.attr("href")
                    , o = e(i.attr("data-target") || r && r.replace(/.*(?=#[^\s]+$)/, ""))
                    , a = o.data("bs.modal") ? "toggle" : e.extend({
                        remote: !/#/.test(r) && r
                    }, o.data(), i.data());
                i.is("a") && n.preventDefault(),
                    o.one("show.bs.modal", function (e) {
                        e.isDefaultPrevented() || o.one("hidden.bs.modal", function () {
                            i.is(":visible") && i.trigger("focus")
                        })
                    }),
                    t.call(o, a, this)
            })
    }(jQuery),
    function (e) {
        "use strict";
        var t = function (e, t) {
            this.type = null,
                this.options = null,
                this.enabled = null,
                this.timeout = null,
                this.hoverState = null,
                this.$element = null,
                this.inState = null,
                this.init("tooltip", e, t)
        };
        t.VERSION = "3.3.7",
            t.TRANSITION_DURATION = 150,
            t.DEFAULTS = {
                animation: !0,
                placement: "top",
                selector: !1,
                template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
                trigger: "hover focus",
                title: "",
                delay: 0,
                html: !1,
                container: !1,
                viewport: {
                    selector: "body",
                    padding: 0
                }
            },
            t.prototype.init = function (t, n, i) {
                if (this.enabled = !0,
                    this.type = t,
                    this.$element = e(n),
                    this.options = this.getOptions(i),
                    this.$viewport = this.options.viewport && e(e.isFunction(this.options.viewport) ? this.options.viewport.call(this, this.$element) : this.options.viewport.selector || this.options.viewport),
                    this.inState = {
                        click: !1,
                        hover: !1,
                        focus: !1
                    },
                    this.$element[0] instanceof document.constructor && !this.options.selector)
                    throw new Error("`selector` option must be specified when initializing " + this.type + " on the window.document object!");
                for (var r = this.options.trigger.split(" "), o = r.length; o--;) {
                    var a = r[o];
                    if ("click" == a)
                        this.$element.on("click." + this.type, this.options.selector, e.proxy(this.toggle, this));
                    else if ("manual" != a) {
                        var s = "hover" == a ? "mouseenter" : "focusin"
                            , l = "hover" == a ? "mouseleave" : "focusout";
                        this.$element.on(s + "." + this.type, this.options.selector, e.proxy(this.enter, this)),
                            this.$element.on(l + "." + this.type, this.options.selector, e.proxy(this.leave, this))
                    }
                }
                this.options.selector ? this._options = e.extend({}, this.options, {
                    trigger: "manual",
                    selector: ""
                }) : this.fixTitle()
            }
            ,
            t.prototype.getDefaults = function () {
                return t.DEFAULTS
            }
            ,
            t.prototype.getOptions = function (t) {
                return (t = e.extend({}, this.getDefaults(), this.$element.data(), t)).delay && "number" == typeof t.delay && (t.delay = {
                    show: t.delay,
                    hide: t.delay
                }),
                    t
            }
            ,
            t.prototype.getDelegateOptions = function () {
                var t = {}
                    , n = this.getDefaults();
                return this._options && e.each(this._options, function (e, i) {
                    n[e] != i && (t[e] = i)
                }),
                    t
            }
            ,
            t.prototype.enter = function (t) {
                var n = t instanceof this.constructor ? t : e(t.currentTarget).data("bs." + this.type);
                return n || (n = new this.constructor(t.currentTarget, this.getDelegateOptions()),
                    e(t.currentTarget).data("bs." + this.type, n)),
                    t instanceof e.Event && (n.inState["focusin" == t.type ? "focus" : "hover"] = !0),
                    n.tip().hasClass("in") || "in" == n.hoverState ? void (n.hoverState = "in") : (clearTimeout(n.timeout),
                        n.hoverState = "in",
                        n.options.delay && n.options.delay.show ? void (n.timeout = setTimeout(function () {
                            "in" == n.hoverState && n.show()
                        }, n.options.delay.show)) : n.show())
            }
            ,
            t.prototype.isInStateTrue = function () {
                for (var e in this.inState)
                    if (this.inState[e])
                        return !0;
                return !1
            }
            ,
            t.prototype.leave = function (t) {
                var n = t instanceof this.constructor ? t : e(t.currentTarget).data("bs." + this.type);
                if (n || (n = new this.constructor(t.currentTarget, this.getDelegateOptions()),
                    e(t.currentTarget).data("bs." + this.type, n)),
                    t instanceof e.Event && (n.inState["focusout" == t.type ? "focus" : "hover"] = !1),
                    !n.isInStateTrue())
                    return clearTimeout(n.timeout),
                        n.hoverState = "out",
                        n.options.delay && n.options.delay.hide ? void (n.timeout = setTimeout(function () {
                            "out" == n.hoverState && n.hide()
                        }, n.options.delay.hide)) : n.hide()
            }
            ,
            t.prototype.show = function () {
                var n = e.Event("show.bs." + this.type);
                if (this.hasContent() && this.enabled) {
                    this.$element.trigger(n);
                    var i = e.contains(this.$element[0].ownerDocument.documentElement, this.$element[0]);
                    if (n.isDefaultPrevented() || !i)
                        return;
                    var r = this
                        , o = this.tip()
                        , a = this.getUID(this.type);
                    this.setContent(),
                        o.attr("id", a),
                        this.$element.attr("aria-describedby", a),
                        this.options.animation && o.addClass("fade");
                    var s = "function" == typeof this.options.placement ? this.options.placement.call(this, o[0], this.$element[0]) : this.options.placement
                        , l = /\s?auto?\s?/i
                        , c = l.test(s);
                    c && (s = s.replace(l, "") || "top"),
                        o.detach().css({
                            top: 0,
                            left: 0,
                            display: "block"
                        }).addClass(s).data("bs." + this.type, this),
                        this.options.container ? o.appendTo(this.options.container) : o.insertAfter(this.$element),
                        this.$element.trigger("inserted.bs." + this.type);
                    var u = this.getPosition()
                        , d = o[0].offsetWidth
                        , p = o[0].offsetHeight;
                    if (c) {
                        var h = s
                            , f = this.getPosition(this.$viewport);
                        s = "bottom" == s && u.bottom + p > f.bottom ? "top" : "top" == s && u.top - p < f.top ? "bottom" : "right" == s && u.right + d > f.width ? "left" : "left" == s && u.left - d < f.left ? "right" : s,
                            o.removeClass(h).addClass(s)
                    }
                    var m = this.getCalculatedOffset(s, u, d, p);
                    this.applyPlacement(m, s);
                    var g = function () {
                        var e = r.hoverState;
                        r.$element.trigger("shown.bs." + r.type),
                            r.hoverState = null,
                            "out" == e && r.leave(r)
                    };
                    e.support.transition && this.$tip.hasClass("fade") ? o.one("bsTransitionEnd", g).emulateTransitionEnd(t.TRANSITION_DURATION) : g()
                }
            }
            ,
            t.prototype.applyPlacement = function (t, n) {
                var i = this.tip()
                    , r = i[0].offsetWidth
                    , o = i[0].offsetHeight
                    , a = parseInt(i.css("margin-top"), 10)
                    , s = parseInt(i.css("margin-left"), 10);
                isNaN(a) && (a = 0),
                    isNaN(s) && (s = 0),
                    t.top += a,
                    t.left += s,
                    e.offset.setOffset(i[0], e.extend({
                        using: function (e) {
                            i.css({
                                top: Math.round(e.top),
                                left: Math.round(e.left)
                            })
                        }
                    }, t), 0),
                    i.addClass("in");
                var l = i[0].offsetWidth
                    , c = i[0].offsetHeight;
                "top" == n && c != o && (t.top = t.top + o - c);
                var u = this.getViewportAdjustedDelta(n, t, l, c);
                u.left ? t.left += u.left : t.top += u.top;
                var d = /top|bottom/.test(n)
                    , p = d ? 2 * u.left - r + l : 2 * u.top - o + c
                    , h = d ? "offsetWidth" : "offsetHeight";
                i.offset(t),
                    this.replaceArrow(p, i[0][h], d)
            }
            ,
            t.prototype.replaceArrow = function (e, t, n) {
                this.arrow().css(n ? "left" : "top", 50 * (1 - e / t) + "%").css(n ? "top" : "left", "")
            }
            ,
            t.prototype.setContent = function () {
                var e = this.tip()
                    , t = this.getTitle();
                e.find(".tooltip-inner")[this.options.html ? "html" : "text"](t),
                    e.removeClass("fade in top bottom left right")
            }
            ,
            t.prototype.hide = function (n) {
                function i() {
                    "in" != r.hoverState && o.detach(),
                        r.$element && r.$element.removeAttr("aria-describedby").trigger("hidden.bs." + r.type),
                        n && n()
                }
                var r = this
                    , o = e(this.$tip)
                    , a = e.Event("hide.bs." + this.type);
                if (this.$element.trigger(a),
                    !a.isDefaultPrevented())
                    return o.removeClass("in"),
                        e.support.transition && o.hasClass("fade") ? o.one("bsTransitionEnd", i).emulateTransitionEnd(t.TRANSITION_DURATION) : i(),
                        this.hoverState = null,
                        this
            }
            ,
            t.prototype.fixTitle = function () {
                var e = this.$element;
                (e.attr("title") || "string" != typeof e.attr("data-original-title")) && e.attr("data-original-title", e.attr("title") || "").attr("title", "")
            }
            ,
            t.prototype.hasContent = function () {
                return this.getTitle()
            }
            ,
            t.prototype.getPosition = function (t) {
                var n = (t = t || this.$element)[0]
                    , i = "BODY" == n.tagName
                    , r = n.getBoundingClientRect();
                null == r.width && (r = e.extend({}, r, {
                    width: r.right - r.left,
                    height: r.bottom - r.top
                }));
                var o = window.SVGElement && n instanceof window.SVGElement
                    , a = i ? {
                        top: 0,
                        left: 0
                    } : o ? null : t.offset()
                    , s = {
                        scroll: i ? document.documentElement.scrollTop || document.body.scrollTop : t.scrollTop()
                    }
                    , l = i ? {
                        width: e(window).width(),
                        height: e(window).height()
                    } : null;
                return e.extend({}, r, s, l, a)
            }
            ,
            t.prototype.getCalculatedOffset = function (e, t, n, i) {
                return "bottom" == e ? {
                    top: t.top + t.height,
                    left: t.left + t.width / 2 - n / 2
                } : "top" == e ? {
                    top: t.top - i,
                    left: t.left + t.width / 2 - n / 2
                } : "left" == e ? {
                    top: t.top + t.height / 2 - i / 2,
                    left: t.left - n
                } : {
                                top: t.top + t.height / 2 - i / 2,
                                left: t.left + t.width
                            }
            }
            ,
            t.prototype.getViewportAdjustedDelta = function (e, t, n, i) {
                var r = {
                    top: 0,
                    left: 0
                };
                if (!this.$viewport)
                    return r;
                var o = this.options.viewport && this.options.viewport.padding || 0
                    , a = this.getPosition(this.$viewport);
                if (/right|left/.test(e)) {
                    var s = t.top - o - a.scroll
                        , l = t.top + o - a.scroll + i;
                    s < a.top ? r.top = a.top - s : l > a.top + a.height && (r.top = a.top + a.height - l)
                } else {
                    var c = t.left - o
                        , u = t.left + o + n;
                    c < a.left ? r.left = a.left - c : u > a.right && (r.left = a.left + a.width - u)
                }
                return r
            }
            ,
            t.prototype.getTitle = function () {
                var e = this.$element
                    , t = this.options;
                return e.attr("data-original-title") || ("function" == typeof t.title ? t.title.call(e[0]) : t.title)
            }
            ,
            t.prototype.getUID = function (e) {
                do {
                    e += ~~(1e6 * Math.random())
                } while (document.getElementById(e)); return e
            }
            ,
            t.prototype.tip = function () {
                if (!this.$tip && (this.$tip = e(this.options.template),
                    1 != this.$tip.length))
                    throw new Error(this.type + " `template` option must consist of exactly 1 top-level element!");
                return this.$tip
            }
            ,
            t.prototype.arrow = function () {
                return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow")
            }
            ,
            t.prototype.enable = function () {
                this.enabled = !0
            }
            ,
            t.prototype.disable = function () {
                this.enabled = !1
            }
            ,
            t.prototype.toggleEnabled = function () {
                this.enabled = !this.enabled
            }
            ,
            t.prototype.toggle = function (t) {
                var n = this;
                t && ((n = e(t.currentTarget).data("bs." + this.type)) || (n = new this.constructor(t.currentTarget, this.getDelegateOptions()),
                    e(t.currentTarget).data("bs." + this.type, n))),
                    t ? (n.inState.click = !n.inState.click,
                        n.isInStateTrue() ? n.enter(n) : n.leave(n)) : n.tip().hasClass("in") ? n.leave(n) : n.enter(n)
            }
            ,
            t.prototype.destroy = function () {
                var e = this;
                clearTimeout(this.timeout),
                    this.hide(function () {
                        e.$element.off("." + e.type).removeData("bs." + e.type),
                            e.$tip && e.$tip.detach(),
                            e.$tip = null,
                            e.$arrow = null,
                            e.$viewport = null,
                            e.$element = null
                    })
            }
            ;
        var n = e.fn.tooltip;
        e.fn.tooltip = function (n) {
            return this.each(function () {
                var i = e(this)
                    , r = i.data("bs.tooltip")
                    , o = "object" == typeof n && n;
                !r && /destroy|hide/.test(n) || (r || i.data("bs.tooltip", r = new t(this, o)),
                    "string" == typeof n && r[n]())
            })
        }
            ,
            e.fn.tooltip.Constructor = t,
            e.fn.tooltip.noConflict = function () {
                return e.fn.tooltip = n,
                    this
            }
    }(jQuery),
    function (e) {
        "use strict";
        var t = function (e, t) {
            this.init("popover", e, t)
        };
        if (!e.fn.tooltip)
            throw new Error("Popover requires tooltip.js");
        t.VERSION = "3.3.7",
            t.DEFAULTS = e.extend({}, e.fn.tooltip.Constructor.DEFAULTS, {
                placement: "right",
                trigger: "click",
                content: "",
                template: '<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
            }),
            t.prototype = e.extend({}, e.fn.tooltip.Constructor.prototype),
            t.prototype.constructor = t,
            t.prototype.getDefaults = function () {
                return t.DEFAULTS
            }
            ,
            t.prototype.setContent = function () {
                var e = this.tip()
                    , t = this.getTitle()
                    , n = this.getContent();
                e.find(".popover-title")[this.options.html ? "html" : "text"](t),
                    e.find(".popover-content").children().detach().end()[this.options.html ? "string" == typeof n ? "html" : "append" : "text"](n),
                    e.removeClass("fade top bottom left right in"),
                    e.find(".popover-title").html() || e.find(".popover-title").hide()
            }
            ,
            t.prototype.hasContent = function () {
                return this.getTitle() || this.getContent()
            }
            ,
            t.prototype.getContent = function () {
                var e = this.$element
                    , t = this.options;
                return e.attr("data-content") || ("function" == typeof t.content ? t.content.call(e[0]) : t.content)
            }
            ,
            t.prototype.arrow = function () {
                return this.$arrow = this.$arrow || this.tip().find(".arrow")
            }
            ;
        var n = e.fn.popover;
        e.fn.popover = function (n) {
            return this.each(function () {
                var i = e(this)
                    , r = i.data("bs.popover")
                    , o = "object" == typeof n && n;
                !r && /destroy|hide/.test(n) || (r || i.data("bs.popover", r = new t(this, o)),
                    "string" == typeof n && r[n]())
            })
        }
            ,
            e.fn.popover.Constructor = t,
            e.fn.popover.noConflict = function () {
                return e.fn.popover = n,
                    this
            }
    }(jQuery),
    function (e) {
        "use strict";
        function t(n, i) {
            this.$body = e(document.body),
                this.$scrollElement = e(e(n).is(document.body) ? window : n),
                this.options = e.extend({}, t.DEFAULTS, i),
                this.selector = (this.options.target || "") + " .nav li > a",
                this.offsets = [],
                this.targets = [],
                this.activeTarget = null,
                this.scrollHeight = 0,
                this.$scrollElement.on("scroll.bs.scrollspy", e.proxy(this.process, this)),
                this.refresh(),
                this.process()
        }
        function n(n) {
            return this.each(function () {
                var i = e(this)
                    , r = i.data("bs.scrollspy")
                    , o = "object" == typeof n && n;
                r || i.data("bs.scrollspy", r = new t(this, o)),
                    "string" == typeof n && r[n]()
            })
        }
        t.VERSION = "3.3.7",
            t.DEFAULTS = {
                offset: 10
            },
            t.prototype.getScrollHeight = function () {
                return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
            }
            ,
            t.prototype.refresh = function () {
                var t = this
                    , n = "offset"
                    , i = 0;
                this.offsets = [],
                    this.targets = [],
                    this.scrollHeight = this.getScrollHeight(),
                    e.isWindow(this.$scrollElement[0]) || (n = "position",
                        i = this.$scrollElement.scrollTop()),
                    this.$body.find(this.selector).map(function () {
                        var t = e(this)
                            , r = t.data("target") || t.attr("href")
                            , o = /^#./.test(r) && e(r);
                        return o && o.length && o.is(":visible") && [[o[n]().top + i, r]] || null
                    }).sort(function (e, t) {
                        return e[0] - t[0]
                    }).each(function () {
                        t.offsets.push(this[0]),
                            t.targets.push(this[1])
                    })
            }
            ,
            t.prototype.process = function () {
                var e, t = this.$scrollElement.scrollTop() + this.options.offset, n = this.getScrollHeight(), i = this.options.offset + n - this.$scrollElement.height(), r = this.offsets, o = this.targets, a = this.activeTarget;
                if (this.scrollHeight != n && this.refresh(),
                    t >= i)
                    return a != (e = o[o.length - 1]) && this.activate(e);
                if (a && t < r[0])
                    return this.activeTarget = null,
                        this.clear();
                for (e = r.length; e--;)
                    a != o[e] && t >= r[e] && (void 0 === r[e + 1] || t < r[e + 1]) && this.activate(o[e])
            }
            ,
            t.prototype.activate = function (t) {
                this.activeTarget = t,
                    this.clear();
                var n = this.selector + '[data-target="' + t + '"],' + this.selector + '[href="' + t + '"]'
                    , i = e(n).parents("li").addClass("active");
                i.parent(".dropdown-menu").length && (i = i.closest("li.dropdown").addClass("active")),
                    i.trigger("activate.bs.scrollspy")
            }
            ,
            t.prototype.clear = function () {
                e(this.selector).parentsUntil(this.options.target, ".active").removeClass("active")
            }
            ;
        var i = e.fn.scrollspy;
        e.fn.scrollspy = n,
            e.fn.scrollspy.Constructor = t,
            e.fn.scrollspy.noConflict = function () {
                return e.fn.scrollspy = i,
                    this
            }
            ,
            e(window).on("load.bs.scrollspy.data-api", function () {
                e('[data-spy="scroll"]').each(function () {
                    var t = e(this);
                    n.call(t, t.data())
                })
            })
    }(jQuery),
    function (e) {
        "use strict";
        function t(t) {
            return this.each(function () {
                var i = e(this)
                    , r = i.data("bs.tab");
                r || i.data("bs.tab", r = new n(this)),
                    "string" == typeof t && r[t]()
            })
        }
        var n = function (t) {
            this.element = e(t)
        };
        n.VERSION = "3.3.7",
            n.TRANSITION_DURATION = 150,
            n.prototype.show = function () {
                var t = this.element
                    , n = t.closest("ul:not(.dropdown-menu)")
                    , i = t.data("target");
                if (i || (i = (i = t.attr("href")) && i.replace(/.*(?=#[^\s]*$)/, "")),
                    !t.parent("li").hasClass("active")) {
                    var r = n.find(".active:last a")
                        , o = e.Event("hide.bs.tab", {
                            relatedTarget: t[0]
                        })
                        , a = e.Event("show.bs.tab", {
                            relatedTarget: r[0]
                        });
                    if (r.trigger(o),
                        t.trigger(a),
                        !a.isDefaultPrevented() && !o.isDefaultPrevented()) {
                        var s = e(i);
                        this.activate(t.closest("li"), n),
                            this.activate(s, s.parent(), function () {
                                r.trigger({
                                    type: "hidden.bs.tab",
                                    relatedTarget: t[0]
                                }),
                                    t.trigger({
                                        type: "shown.bs.tab",
                                        relatedTarget: r[0]
                                    })
                            })
                    }
                }
            }
            ,
            n.prototype.activate = function (t, i, r) {
                function o() {
                    a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded", !1),
                        t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded", !0),
                        s ? (t[0].offsetWidth,
                            t.addClass("in")) : t.removeClass("fade"),
                        t.parent(".dropdown-menu").length && t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded", !0),
                        r && r()
                }
                var a = i.find("> .active")
                    , s = r && e.support.transition && (a.length && a.hasClass("fade") || !!i.find("> .fade").length);
                a.length && s ? a.one("bsTransitionEnd", o).emulateTransitionEnd(n.TRANSITION_DURATION) : o(),
                    a.removeClass("in")
            }
            ;
        var i = e.fn.tab;
        e.fn.tab = t,
            e.fn.tab.Constructor = n,
            e.fn.tab.noConflict = function () {
                return e.fn.tab = i,
                    this
            }
            ;
        var r = function (n) {
            n.preventDefault(),
                t.call(e(this), "show")
        };
        e(document).on("click.bs.tab.data-api", '[data-toggle="tab"]', r).on("click.bs.tab.data-api", '[data-toggle="pill"]', r)
    }(jQuery),
    function (e) {
        "use strict";
        function t(t) {
            return this.each(function () {
                var i = e(this)
                    , r = i.data("bs.affix")
                    , o = "object" == typeof t && t;
                r || i.data("bs.affix", r = new n(this, o)),
                    "string" == typeof t && r[t]()
            })
        }
        var n = function (t, i) {
            this.options = e.extend({}, n.DEFAULTS, i),
                this.$target = e(this.options.target).on("scroll.bs.affix.data-api", e.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", e.proxy(this.checkPositionWithEventLoop, this)),
                this.$element = e(t),
                this.affixed = null,
                this.unpin = null,
                this.pinnedOffset = null,
                this.checkPosition()
        };
        n.VERSION = "3.3.7",
            n.RESET = "affix affix-top affix-bottom",
            n.DEFAULTS = {
                offset: 0,
                target: window
            },
            n.prototype.getState = function (e, t, n, i) {
                var r = this.$target.scrollTop()
                    , o = this.$element.offset()
                    , a = this.$target.height();
                if (null != n && "top" == this.affixed)
                    return r < n && "top";
                if ("bottom" == this.affixed)
                    return null != n ? !(r + this.unpin <= o.top) && "bottom" : !(r + a <= e - i) && "bottom";
                var s = null == this.affixed
                    , l = s ? r : o.top;
                return null != n && r <= n ? "top" : null != i && l + (s ? a : t) >= e - i && "bottom"
            }
            ,
            n.prototype.getPinnedOffset = function () {
                if (this.pinnedOffset)
                    return this.pinnedOffset;
                this.$element.removeClass(n.RESET).addClass("affix");
                var e = this.$target.scrollTop()
                    , t = this.$element.offset();
                return this.pinnedOffset = t.top - e
            }
            ,
            n.prototype.checkPositionWithEventLoop = function () {
                setTimeout(e.proxy(this.checkPosition, this), 1)
            }
            ,
            n.prototype.checkPosition = function () {
                if (this.$element.is(":visible")) {
                    var t = this.$element.height()
                        , i = this.options.offset
                        , r = i.top
                        , o = i.bottom
                        , a = Math.max(e(document).height(), e(document.body).height());
                    "object" != typeof i && (o = r = i),
                        "function" == typeof r && (r = i.top(this.$element)),
                        "function" == typeof o && (o = i.bottom(this.$element));
                    var s = this.getState(a, t, r, o);
                    if (this.affixed != s) {
                        null != this.unpin && this.$element.css("top", "");
                        var l = "affix" + (s ? "-" + s : "")
                            , c = e.Event(l + ".bs.affix");
                        if (this.$element.trigger(c),
                            c.isDefaultPrevented())
                            return;
                        this.affixed = s,
                            this.unpin = "bottom" == s ? this.getPinnedOffset() : null,
                            this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix", "affixed") + ".bs.affix")
                    }
                    "bottom" == s && this.$element.offset({
                        top: a - t - o
                    })
                }
            }
            ;
        var i = e.fn.affix;
        e.fn.affix = t,
            e.fn.affix.Constructor = n,
            e.fn.affix.noConflict = function () {
                return e.fn.affix = i,
                    this
            }
            ,
            e(window).on("load", function () {
                e('[data-spy="affix"]').each(function () {
                    var n = e(this)
                        , i = n.data();
                    i.offset = i.offset || {},
                        null != i.offsetBottom && (i.offset.bottom = i.offsetBottom),
                        null != i.offsetTop && (i.offset.top = i.offsetTop),
                        t.call(n, i)
                })
            })
    }(jQuery),
    function (e, t, n) {
        "use strict";
        function i(e) {
            return function () {
                var t, n = arguments[0];
                for (t = "[" + (e ? e + ":" : "") + n + "] http://errors.angularjs.org/1.4.0-rc.2/" + (e ? e + "/" : "") + n,
                    n = 1; n < arguments.length; n++) {
                    var i;
                    t = t + (1 == n ? "?" : "&") + "p" + (n - 1) + "=",
                        t += encodeURIComponent(i = "function" == typeof (i = arguments[n]) ? i.toString().replace(/ \{[\s\S]*$/, "") : void 0 === i ? "undefined" : "string" != typeof i ? JSON.stringify(i) : i)
                }
                return Error(t)
            }
        }
        function r(e) {
            if (null == e || k(e))
                return !1;
            var t = "length" in Object(e) && e.length;
            return !(e.nodeType !== Xn || !t) || ($(e) || Fn(e) || 0 === t || "number" == typeof t && 0 < t && t - 1 in e)
        }
        function o(e, t, n) {
            var i, a;
            if (e)
                if (x(e))
                    for (i in e)
                        "prototype" == i || "length" == i || "name" == i || e.hasOwnProperty && !e.hasOwnProperty(i) || t.call(n, e[i], i, e);
                else if (Fn(e) || r(e)) {
                    var s = "object" != typeof e;
                    for (i = 0,
                        a = e.length; i < a; i++)
                        (s || i in e) && t.call(n, e[i], i, e)
                } else if (e.forEach && e.forEach !== o)
                    e.forEach(t, n, e);
                else if (w(e))
                    for (i in e)
                        t.call(n, e[i], i, e);
                else if ("function" == typeof e.hasOwnProperty)
                    for (i in e)
                        e.hasOwnProperty(i) && t.call(n, e[i], i, e);
                else
                    for (i in e)
                        In.call(e, i) && t.call(n, e[i], i, e);
            return e
        }
        function a(e, t, n) {
            for (var i = Object.keys(e).sort(), r = 0; r < i.length; r++)
                t.call(n, e[i[r]], i[r]);
            return i
        }
        function s(e) {
            return function (t, n) {
                e(n, t)
            }
        }
        function l(e, t) {
            t ? e.$$hashKey = t : delete e.$$hashKey
        }
        function c(e, t, n) {
            for (var i = e.$$hashKey, r = 0, o = t.length; r < o; ++r) {
                var a = t[r];
                if (b(a) || x(a))
                    for (var s = Object.keys(a), u = 0, d = s.length; u < d; u++) {
                        var p = s[u]
                            , h = a[p];
                        n && b(h) ? (b(e[p]) || (e[p] = Fn(h) ? [] : {}),
                            c(e[p], [h], !0)) : e[p] = h
                    }
            }
            return l(e, i),
                e
        }
        function u(e) {
            return c(e, On.call(arguments, 1), !1)
        }
        function d(e) {
            return c(e, On.call(arguments, 1), !0)
        }
        function p(e) {
            return parseInt(e, 10)
        }
        function h(e, t) {
            return u(Object.create(e), t)
        }
        function f() { }
        function m(e) {
            return e
        }
        function g(e) {
            return function () {
                return e
            }
        }
        function v(e) {
            return void 0 === e
        }
        function y(e) {
            return void 0 !== e
        }
        function b(e) {
            return null !== e && "object" == typeof e
        }
        function w(e) {
            return null !== e && "object" == typeof e && !Rn(e)
        }
        function $(e) {
            return "string" == typeof e
        }
        function S(e) {
            return "number" == typeof e
        }
        function C(e) {
            return "[object Date]" === _n.call(e)
        }
        function x(e) {
            return "function" == typeof e
        }
        function T(e) {
            return "[object RegExp]" === _n.call(e)
        }
        function k(e) {
            return e && e.window === e
        }
        function P(e) {
            return e && e.$evalAsync && e.$watch
        }
        function E(e) {
            return "boolean" == typeof e
        }
        function I(e) {
            return !(!e || !(e.nodeName || e.prop && e.attr && e.find))
        }
        function M(e) {
            return En(e.nodeName || e[0] && e[0].nodeName)
        }
        function O(e, t) {
            var n = e.indexOf(t);
            return 0 <= n && e.splice(n, 1),
                n
        }
        function D(e, t, n, i) {
            function r(e, t, n, i, r) {
                var o = D(t, null, i, r);
                b(t) && (i.push(t),
                    r.push(o)),
                    n[e] = o
            }
            if (k(e) || P(e))
                throw Ln("cpws");
            if (Bn.test(_n.call(t)))
                throw Ln("cpta");
            if (t) {
                if (e === t)
                    throw Ln("cpi");
                if (n = n || [],
                    i = i || [],
                    b(e)) {
                    var a = n.indexOf(e);
                    if (-1 !== a)
                        return i[a];
                    n.push(e),
                        i.push(t)
                }
                var s;
                if (Fn(e))
                    for (a = t.length = 0; a < e.length; a++)
                        s = D(e[a], null, n, i),
                            b(e[a]) && (n.push(e[a]),
                                i.push(s)),
                            t.push(s);
                else {
                    if (a = t.$$hashKey,
                        Fn(t) ? t.length = 0 : o(t, function (e, n) {
                            delete t[n]
                        }),
                        w(e))
                        for (s in e)
                            r(s, e[s], t, n, i);
                    else if (e && "function" == typeof e.hasOwnProperty)
                        for (s in e)
                            e.hasOwnProperty(s) && r(s, e[s], t, n, i);
                    else
                        for (s in e)
                            In.call(e, s) && r(s, e[s], t, n, i);
                    l(t, a)
                }
            } else
                (t = e) && (Fn(e) ? t = D(e, [], n, i) : Bn.test(_n.call(e)) ? t = new e.constructor(e) : C(e) ? t = new Date(e.getTime()) : T(e) ? (t = new RegExp(e.source, e.toString().match(/[^\/]*$/)[0])).lastIndex = e.lastIndex : b(e) && (s = Object.create(Rn(e)),
                    t = D(e, s, n, i)));
            return t
        }
        function A(e, t) {
            if (Fn(e)) {
                t = t || [];
                for (var n = 0, i = e.length; n < i; n++)
                    t[n] = e[n]
            } else if (b(e))
                for (n in t = t || {},
                    e)
                    "$" === n.charAt(0) && "$" === n.charAt(1) || (t[n] = e[n]);
            return t || e
        }
        function _(e, t) {
            if (e === t)
                return !0;
            if (null === e || null === t)
                return !1;
            if (e != e && t != t)
                return !0;
            var i, r = typeof e;
            if (r == typeof t && "object" == r) {
                if (!Fn(e)) {
                    if (C(e))
                        return !!C(t) && _(e.getTime(), t.getTime());
                    if (T(e))
                        return !!T(t) && e.toString() == t.toString();
                    if (P(e) || P(t) || k(e) || k(t) || Fn(t) || C(t) || T(t))
                        return !1;
                    for (i in r = re(),
                        e)
                        if ("$" !== i.charAt(0) && !x(e[i])) {
                            if (!_(e[i], t[i]))
                                return !1;
                            r[i] = !0
                        }
                    for (i in t)
                        if (!(i in r || "$" === i.charAt(0) || t[i] === n || x(t[i])))
                            return !1;
                    return !0
                }
                if (!Fn(t))
                    return !1;
                if ((r = e.length) == t.length) {
                    for (i = 0; i < r; i++)
                        if (!_(e[i], t[i]))
                            return !1;
                    return !0
                }
            }
            return !1
        }
        function R(e, t, n) {
            return e.concat(On.call(t, n))
        }
        function L(e, t) {
            var n = 2 < arguments.length ? On.call(arguments, 2) : [];
            return !x(t) || t instanceof RegExp ? t : n.length ? function () {
                return arguments.length ? t.apply(e, R(n, arguments, 0)) : t.apply(e, n)
            }
                : function () {
                    return arguments.length ? t.apply(e, arguments) : t.call(e)
                }
        }
        function U(e, i) {
            var r = i;
            return "string" == typeof e && "$" === e.charAt(0) && "$" === e.charAt(1) ? r = n : k(i) ? r = "$WINDOW" : i && t === i ? r = "$DOCUMENT" : P(i) && (r = "$SCOPE"),
                r
        }
        function N(e, t) {
            return void 0 === e ? n : (S(t) || (t = t ? 2 : null),
                JSON.stringify(e, U, t))
        }
        function j(e) {
            return $(e) ? JSON.parse(e) : e
        }
        function F(e, t) {
            var n = Date.parse("Jan 01, 1970 00:00:00 " + e) / 6e4;
            return isNaN(n) ? t : n
        }
        function B(e, t, n) {
            n = n ? -1 : 1;
            var i = F(t, e.getTimezoneOffset());
            return t = e,
                e = n * (i - e.getTimezoneOffset()),
                (t = new Date(t.getTime())).setMinutes(t.getMinutes() + e),
                t
        }
        function V(e) {
            e = xn(e).clone();
            try {
                e.empty()
            } catch (e) { }
            var t = xn("<div>").append(e).html();
            try {
                return e[0].nodeType === Jn ? En(t) : t.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/, function (e, t) {
                    return "<" + En(t)
                })
            } catch (e) {
                return En(t)
            }
        }
        function z(e) {
            try {
                return decodeURIComponent(e)
            } catch (e) { }
        }
        function H(e) {
            var t, n, i = {};
            return o((e || "").split("&"), function (e) {
                e && (t = e.replace(/\+/g, "%20").split("="),
                    y(n = z(t[0])) && (e = !y(t[1]) || z(t[1]),
                        In.call(i, n) ? Fn(i[n]) ? i[n].push(e) : i[n] = [i[n], e] : i[n] = e))
            }),
                i
        }
        function W(e) {
            var t = [];
            return o(e, function (e, n) {
                Fn(e) ? o(e, function (e) {
                    t.push(G(n, !0) + (!0 === e ? "" : "=" + G(e, !0)))
                }) : t.push(G(n, !0) + (!0 === e ? "" : "=" + G(e, !0)))
            }),
                t.length ? t.join("&") : ""
        }
        function q(e) {
            return G(e, !0).replace(/%26/gi, "&").replace(/%3D/gi, "=").replace(/%2B/gi, "+")
        }
        function G(e, t) {
            return encodeURIComponent(e).replace(/%40/gi, "@").replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%3B/gi, ";").replace(/%20/g, t ? "%20" : "+")
        }
        function Y(e, t) {
            var n, i, r = {};
            o(qn, function (t) {
                t += "app",
                    !n && e.hasAttribute && e.hasAttribute(t) && (n = e,
                        i = e.getAttribute(t))
            }),
                o(qn, function (t) {
                    var r;
                    t += "app",
                        !n && (r = e.querySelector("[" + t.replace(":", "\\:") + "]")) && (n = r,
                            i = r.getAttribute(t))
                }),
                n && (r.strictDi = null !== function (e, t) {
                    var n, i, r = qn.length;
                    for (i = 0; i < r; ++i)
                        if (n = qn[i] + t,
                            $(n = e.getAttribute(n)))
                            return n;
                    return null
                }(n, "strict-di"),
                    t(n, i ? [i] : [], r))
        }
        function X(n, i, r) {
            b(r) || (r = {}),
                r = u({
                    strictDi: !1
                }, r);
            var a = function () {
                if ((n = xn(n)).injector()) {
                    var e = n[0] === t ? "document" : V(n);
                    throw Ln("btstrpd", e.replace(/</, "&lt;").replace(/>/, "&gt;"))
                }
                return (i = i || []).unshift(["$provide", function (e) {
                    e.value("$rootElement", n)
                }
                ]),
                    r.debugInfoEnabled && i.push(["$compileProvider", function (e) {
                        e.debugInfoEnabled(!0)
                    }
                    ]),
                    i.unshift("ng"),
                    (e = Pe(i, r.strictDi)).invoke(["$rootScope", "$rootElement", "$compile", "$injector", function (e, t, n, i) {
                        e.$apply(function () {
                            t.data("$injector", i),
                                n(t)(e)
                        })
                    }
                    ]),
                    e
            }
                , s = /^NG_ENABLE_DEBUG_INFO!/
                , l = /^NG_DEFER_BOOTSTRAP!/;
            if (e && s.test(e.name) && (r.debugInfoEnabled = !0,
                e.name = e.name.replace(s, "")),
                e && !l.test(e.name))
                return a();
            e.name = e.name.replace(l, ""),
                Un.resumeBootstrap = function (e) {
                    return o(e, function (e) {
                        i.push(e)
                    }),
                        a()
                }
                ,
                x(Un.resumeDeferredBootstrap) && Un.resumeDeferredBootstrap()
        }
        function J() {
            e.name = "NG_ENABLE_DEBUG_INFO!" + e.name,
                e.location.reload()
        }
        function K(e) {
            if (!(e = Un.element(e).injector()))
                throw Ln("test");
            return e.get("$$testability")
        }
        function Q(e, t) {
            return t = t || "_",
                e.replace(Gn, function (e, n) {
                    return (n ? t : "") + e.toLowerCase()
                })
        }
        function Z(e, t, n) {
            if (!e)
                throw Ln("areq", t || "?", n || "required");
            return e
        }
        function ee(e, t, n) {
            return n && Fn(e) && (e = e[e.length - 1]),
                Z(x(e), t, "not a function, got " + (e && "object" == typeof e ? e.constructor.name || "Object" : typeof e)),
                e
        }
        function te(e, t) {
            if ("hasOwnProperty" === e)
                throw Ln("badname", t)
        }
        function ne(e, t, n) {
            if (!t)
                return e;
            for (var i, r = e, o = (t = t.split(".")).length, a = 0; a < o; a++)
                i = t[a],
                    e && (e = (r = e)[i]);
            return !n && x(e) ? L(r, e) : e
        }
        function ie(e) {
            var t = e[0];
            e = e[e.length - 1];
            var n = [t];
            do {
                if (!(t = t.nextSibling))
                    break;
                n.push(t)
            } while (t !== e); return xn(n)
        }
        function re() {
            return Object.create(null)
        }
        function oe(e) {
            return e.replace(ei, function (e, t, n, i) {
                return i ? n.toUpperCase() : n
            }).replace(ti, "Moz$1")
        }
        function ae(e) {
            return (e = e.nodeType) === Xn || !e || 9 === e
        }
        function se(e, t) {
            var n, i, r = t.createDocumentFragment(), a = [];
            if (oi.test(e)) {
                for (n = n || r.appendChild(t.createElement("div")),
                    i = (ai.exec(e) || ["", ""])[1].toLowerCase(),
                    i = li[i] || li._default,
                    n.innerHTML = i[1] + e.replace(si, "<$1></$2>") + i[2],
                    i = i[0]; i--;)
                    n = n.lastChild;
                a = R(a, n.childNodes),
                    (n = r.firstChild).textContent = ""
            } else
                a.push(t.createTextNode(e));
            return r.textContent = "",
                r.innerHTML = "",
                o(a, function (e) {
                    r.appendChild(e)
                }),
                r
        }
        function le(e) {
            if (e instanceof le)
                return e;
            var n, i;
            if ($(e) && (e = Vn(e),
                n = !0),
                !(this instanceof le)) {
                if (n && "<" != e.charAt(0))
                    throw ii("nosel");
                return new le(e)
            }
            n && (n = t,
                e = (i = ri.exec(e)) ? [n.createElement(i[1])] : (i = se(e, n)) ? i.childNodes : []);
            ye(this, e)
        }
        function ce(e) {
            return e.cloneNode(!0)
        }
        function ue(e, t) {
            if (t || pe(e),
                e.querySelectorAll)
                for (var n = e.querySelectorAll("*"), i = 0, r = n.length; i < r; i++)
                    pe(n[i])
        }
        function de(e, t, n, i) {
            if (y(i))
                throw ii("offargs");
            var r = (i = he(e)) && i.events
                , a = i && i.handle;
            if (a)
                if (t)
                    o(t.split(" "), function (t) {
                        if (y(n)) {
                            var i = r[t];
                            if (O(i || [], n),
                                i && 0 < i.length)
                                return
                        }
                        e.removeEventListener(t, a, !1),
                            delete r[t]
                    });
                else
                    for (t in r)
                        "$destroy" !== t && e.removeEventListener(t, a, !1),
                            delete r[t]
        }
        function pe(e, t) {
            var i = e.ng339
                , r = i && Qn[i];
            r && (t ? delete r.data[t] : (r.handle && (r.events.$destroy && r.handle({}, "$destroy"),
                de(e)),
                delete Qn[i],
                e.ng339 = n))
        }
        function he(e, t) {
            var i = (i = e.ng339) && Qn[i];
            return t && !i && (e.ng339 = i = ++Zn,
                i = Qn[i] = {
                    events: {},
                    data: {},
                    handle: n
                }),
                i
        }
        function fe(e, t, n) {
            if (ae(e)) {
                var i = y(n)
                    , r = !i && t && !b(t)
                    , o = !t;
                if (e = (e = he(e, !r)) && e.data,
                    i)
                    e[t] = n;
                else {
                    if (o)
                        return e;
                    if (r)
                        return e && e[t];
                    u(e, t)
                }
            }
        }
        function me(e, t) {
            return !!e.getAttribute && -1 < (" " + (e.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").indexOf(" " + t + " ")
        }
        function ge(e, t) {
            t && e.setAttribute && o(t.split(" "), function (t) {
                e.setAttribute("class", Vn((" " + (e.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").replace(" " + Vn(t) + " ", " ")))
            })
        }
        function ve(e, t) {
            if (t && e.setAttribute) {
                var n = (" " + (e.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ");
                o(t.split(" "), function (e) {
                    e = Vn(e),
                        -1 === n.indexOf(" " + e + " ") && (n += e + " ")
                }),
                    e.setAttribute("class", Vn(n))
            }
        }
        function ye(e, t) {
            if (t)
                if (t.nodeType)
                    e[e.length++] = t;
                else {
                    var n = t.length;
                    if ("number" == typeof n && t.window !== t) {
                        if (n)
                            for (var i = 0; i < n; i++)
                                e[e.length++] = t[i]
                    } else
                        e[e.length++] = t
                }
        }
        function be(e, t) {
            return we(e, "$" + (t || "ngController") + "Controller")
        }
        function we(e, t, i) {
            for (9 == e.nodeType && (e = e.documentElement),
                t = Fn(t) ? t : [t]; e;) {
                for (var r = 0, o = t.length; r < o; r++)
                    if ((i = xn.data(e, t[r])) !== n)
                        return i;
                e = e.parentNode || 11 === e.nodeType && e.host
            }
        }
        function $e(e) {
            for (ue(e, !0); e.firstChild;)
                e.removeChild(e.firstChild)
        }
        function Se(e, t) {
            t || ue(e);
            var n = e.parentNode;
            n && n.removeChild(e)
        }
        function Ce(e, t) {
            var n = ui[t.toLowerCase()];
            return n && di[M(e)] && n
        }
        function xe() {
            this.$get = function () {
                return u(le, {
                    hasClass: function (e, t) {
                        return e.attr && (e = e[0]),
                            me(e, t)
                    },
                    addClass: function (e, t) {
                        return e.attr && (e = e[0]),
                            ve(e, t)
                    },
                    removeClass: function (e, t) {
                        return e.attr && (e = e[0]),
                            ge(e, t)
                    }
                })
            }
        }
        function Te(e, t) {
            var n = e && e.$$hashKey;
            return n ? ("function" == typeof n && (n = e.$$hashKey()),
                n) : "function" == (n = typeof e) || "object" == n && null !== e ? e.$$hashKey = n + ":" + (t || function () {
                    return ++Nn
                }
                )() : n + ":" + e
        }
        function ke(e, t) {
            if (t) {
                var n = 0;
                this.nextUid = function () {
                    return ++n
                }
            }
            o(e, this.put, this)
        }
        function Pe(e, t) {
            function i(e) {
                return function (t, n) {
                    if (!b(t))
                        return e(t, n);
                    o(t, s(e))
                }
            }
            function r(e, t) {
                if (te(e, "service"),
                    (x(t) || Fn(t)) && (t = h.instantiate(t)),
                    !t.$get)
                    throw yi("pget", e);
                return p[e + "Provider"] = t
            }
            function a(e, t, n) {
                return r(e, {
                    $get: !1 !== n ? function (e, t) {
                        return function () {
                            var n = y.invoke(t, this);
                            if (v(n))
                                throw yi("undef", e);
                            return n
                        }
                    }(e, t) : t
                })
            }
            function l(e, n) {
                function i(t, i) {
                    if (e.hasOwnProperty(t)) {
                        if (e[t] === c)
                            throw yi("cdep", t + " <- " + u.join(" <- "));
                        return e[t]
                    }
                    try {
                        return u.unshift(t),
                            e[t] = c,
                            e[t] = n(t, i)
                    } catch (n) {
                        throw e[t] === c && delete e[t],
                        n
                    } finally {
                        u.shift()
                    }
                }
                function r(e, n, r, o) {
                    "string" == typeof r && (o = r,
                        r = null);
                    var a, s, l, c = [], u = Pe.$$annotate(e, t, o);
                    for (s = 0,
                        a = u.length; s < a; s++) {
                        if ("string" != typeof (l = u[s]))
                            throw yi("itkn", l);
                        c.push(r && r.hasOwnProperty(l) ? r[l] : i(l, o))
                    }
                    return Fn(e) && (e = e[a]),
                        e.apply(n, c)
                }
                return {
                    invoke: r,
                    instantiate: function (e, t, n) {
                        var i = Object.create((Fn(e) ? e[e.length - 1] : e).prototype || null);
                        return b(e = r(e, i, t, n)) || x(e) ? e : i
                    },
                    get: i,
                    annotate: Pe.$$annotate,
                    has: function (t) {
                        return p.hasOwnProperty(t + "Provider") || e.hasOwnProperty(t)
                    }
                }
            }
            t = !0 === t;
            var c = {}
                , u = []
                , d = new ke([], !0)
                , p = {
                    $provide: {
                        provider: i(r),
                        factory: i(a),
                        service: i(function (e, t) {
                            return a(e, ["$injector", function (e) {
                                return e.instantiate(t)
                            }
                            ])
                        }),
                        value: i(function (e, t) {
                            return a(e, g(t), !1)
                        }),
                        constant: i(function (e, t) {
                            te(e, "constant"),
                                p[e] = t,
                                m[e] = t
                        }),
                        decorator: function (e, t) {
                            var n = h.get(e + "Provider")
                                , i = n.$get;
                            n.$get = function () {
                                var e = y.invoke(i, n);
                                return y.invoke(t, null, {
                                    $delegate: e
                                })
                            }
                        }
                    }
                }
                , h = p.$injector = l(p, function (e, t) {
                    throw Un.isString(t) && u.push(t),
                    yi("unpr", u.join(" <- "))
                })
                , m = {}
                , y = m.$injector = l(m, function (e, t) {
                    var i = h.get(e + "Provider", t);
                    return y.invoke(i.$get, i, n, e)
                });
            return o(function e(t) {
                var n, i = [];
                return o(t, function (t) {
                    function r(e) {
                        var t, n;
                        for (t = 0,
                            n = e.length; t < n; t++) {
                            var i = e[t]
                                , r = h.get(i[0]);
                            r[i[1]].apply(r, i[2])
                        }
                    }
                    if (!d.get(t)) {
                        d.put(t, !0);
                        try {
                            $(t) ? (n = kn(t),
                                i = i.concat(e(n.requires)).concat(n._runBlocks),
                                r(n._invokeQueue),
                                r(n._configBlocks)) : x(t) ? i.push(h.invoke(t)) : Fn(t) ? i.push(h.invoke(t)) : ee(t, "module")
                        } catch (e) {
                            throw Fn(t) && (t = t[t.length - 1]),
                            e.message && e.stack && -1 == e.stack.indexOf(e.message) && (e = e.message + "\n" + e.stack),
                            yi("modulerr", t, e.stack || e.message || e)
                        }
                    }
                }),
                    i
            }(e), function (e) {
                y.invoke(e || f)
            }),
                y
        }
        function Ee() {
            var t = !0;
            this.disableAutoScrolling = function () {
                t = !1
            }
                ,
                this.$get = ["$window", "$location", "$rootScope", function (n, i, r) {
                    function o(e) {
                        var t;
                        e ? (e.scrollIntoView(),
                            x(t = a.yOffset) ? t = t() : I(t) ? (t = t[0],
                                t = "fixed" !== n.getComputedStyle(t).position ? 0 : t.getBoundingClientRect().bottom) : S(t) || (t = 0),
                            t && (e = e.getBoundingClientRect().top,
                                n.scrollBy(0, e - t))) : n.scrollTo(0, 0)
                    }
                    function a(e) {
                        var t;
                        (e = $(e) ? e : i.hash()) ? (t = s.getElementById(e)) ? o(t) : (t = function (e) {
                            var t = null;
                            return Array.prototype.some.call(e, function (e) {
                                if ("a" === M(e))
                                    return t = e,
                                        !0
                            }),
                                t
                        }(s.getElementsByName(e))) ? o(t) : "top" === e && o(null) : o(null)
                    }
                    var s = n.document;
                    return t && r.$watch(function () {
                        return i.hash()
                    }, function (t, n) {
                        t === n && "" === t || function (t, n) {
                            "complete" === (n = n || e).document.readyState ? n.setTimeout(t) : xn(n).on("load", t)
                        }(function () {
                            r.$evalAsync(a)
                        })
                    }),
                        a
                }
                ]
        }
        function Ie(e, t) {
            return e || t ? e ? t ? (Fn(e) && (e = e.join(" ")),
                Fn(t) && (t = t.join(" ")),
                e + " " + t) : e : t : ""
        }
        function Me() {
            this.$get = ["$$rAF", "$timeout", function (e, t) {
                return e.supported ? function (t) {
                    return e(t)
                }
                    : function (e) {
                        return t(e, 0, !1)
                    }
            }
            ]
        }
        function Oe() {
            this.$get = ["$window", "$log", "$sniffer", "$document", function (e, t, n, i) {
                return new function (e, t, n, i) {
                    function r(e) {
                        try {
                            e.apply(null, On.call(arguments, 1))
                        } finally {
                            if (0 == --g)
                                for (; y.length;)
                                    try {
                                        y.pop()()
                                    } catch (e) {
                                        n.error(e)
                                    }
                        }
                    }
                    function a() {
                        s(),
                            l()
                    }
                    function s() {
                        e: {
                            try {
                                b = d.state;
                                break e
                            } catch (e) { }
                            b = void 0
                        }
                        _(b = v(b) ? null : b, k) && (b = k),
                            k = b
                    }
                    function l() {
                        $ === c.url() && w === b || ($ = c.url(),
                            w = b,
                            o(x, function (e) {
                                e(c.url(), b)
                            }))
                    }
                    var c = this
                        , u = e.location
                        , d = e.history
                        , p = e.setTimeout
                        , h = e.clearTimeout
                        , m = {};
                    c.isMock = !1;
                    var g = 0
                        , y = [];
                    c.$$completeOutstandingRequest = r,
                        c.$$incOutstandingRequestCount = function () {
                            g++
                        }
                        ,
                        c.notifyWhenNoOutstandingRequests = function (e) {
                            0 === g ? e() : y.push(e)
                        }
                        ;
                    var b, w, $ = u.href, S = t.find("base"), C = null;
                    s(),
                        w = b,
                        c.url = function (t, n, r) {
                            if (v(r) && (r = null),
                                u !== e.location && (u = e.location),
                                d !== e.history && (d = e.history),
                                t) {
                                var o = w === r;
                                if ($ === t && (!i.history || o))
                                    return c;
                                var a = $ && rt($) === rt(t);
                                return $ = t,
                                    w = r,
                                    !i.history || a && o ? (a || (C = t),
                                        n ? u.replace(t) : a ? (n = u,
                                            t = -1 === (r = t.indexOf("#")) ? "" : t.substr(r + 1),
                                            n.hash = t) : u.href = t) : (d[n ? "replaceState" : "pushState"](r, "", t),
                                                s(),
                                                w = b),
                                    c
                            }
                            return C || u.href.replace(/%27/g, "'")
                        }
                        ,
                        c.state = function () {
                            return b
                        }
                        ;
                    var x = []
                        , T = !1
                        , k = null;
                    c.onUrlChange = function (t) {
                        return T || (i.history && xn(e).on("popstate", a),
                            xn(e).on("hashchange", a),
                            T = !0),
                            x.push(t),
                            t
                    }
                        ,
                        c.$$applicationDestroyed = function () {
                            xn(e).off("hashchange popstate", a)
                        }
                        ,
                        c.$$checkUrlChange = l,
                        c.baseHref = function () {
                            var e = S.attr("href");
                            return e ? e.replace(/^(https?\:)?\/\/[^\/]*/, "") : ""
                        }
                        ,
                        c.defer = function (e, t) {
                            var n;
                            return g++,
                                n = p(function () {
                                    delete m[n],
                                        r(e)
                                }, t || 0),
                                m[n] = !0,
                                n
                        }
                        ,
                        c.defer.cancel = function (e) {
                            return !!m[e] && (delete m[e],
                                h(e),
                                r(f),
                                !0)
                        }
                }
                    (e, i, t, n)
            }
            ]
        }
        function De() {
            this.$get = function () {
                function e(e, n) {
                    function r(e) {
                        e != p && (h ? h == e && (h = e.n) : h = e,
                            o(e.n, e.p),
                            o(e, p),
                            (p = e).n = null)
                    }
                    function o(e, t) {
                        e != t && (e && (e.p = t),
                            t && (t.n = e))
                    }
                    if (e in t)
                        throw i("$cacheFactory")("iid", e);
                    var a = 0
                        , s = u({}, n, {
                            id: e
                        })
                        , l = {}
                        , c = n && n.capacity || Number.MAX_VALUE
                        , d = {}
                        , p = null
                        , h = null;
                    return t[e] = {
                        put: function (e, t) {
                            if (!v(t)) {
                                if (c < Number.MAX_VALUE)
                                    r(d[e] || (d[e] = {
                                        key: e
                                    }));
                                return e in l || a++,
                                    l[e] = t,
                                    a > c && this.remove(h.key),
                                    t
                            }
                        },
                        get: function (e) {
                            if (c < Number.MAX_VALUE) {
                                var t = d[e];
                                if (!t)
                                    return;
                                r(t)
                            }
                            return l[e]
                        },
                        remove: function (e) {
                            if (c < Number.MAX_VALUE) {
                                var t = d[e];
                                if (!t)
                                    return;
                                t == p && (p = t.p),
                                    t == h && (h = t.n),
                                    o(t.n, t.p),
                                    delete d[e]
                            }
                            delete l[e],
                                a--
                        },
                        removeAll: function () {
                            l = {},
                                a = 0,
                                d = {},
                                p = h = null
                        },
                        destroy: function () {
                            d = s = l = null,
                                delete t[e]
                        },
                        info: function () {
                            return u({}, s, {
                                size: a
                            })
                        }
                    }
                }
                var t = {};
                return e.info = function () {
                    var e = {};
                    return o(t, function (t, n) {
                        e[n] = t.info()
                    }),
                        e
                }
                    ,
                    e.get = function (e) {
                        return t[e]
                    }
                    ,
                    e
            }
        }
        function Ae() {
            this.$get = ["$cacheFactory", function (e) {
                return e("templates")
            }
            ]
        }
        function _e(e, i) {
            function r(e, t, n) {
                var i = /^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/
                    , r = {};
                return o(e, function (e, o) {
                    var a = e.match(i);
                    if (!a)
                        throw Ci("iscp", t, o, e, n ? "controller bindings definition" : "isolate scope definition");
                    r[o] = {
                        mode: a[1][0],
                        collection: "*" === a[2],
                        optional: "?" === a[3],
                        attrName: a[4] || o
                    }
                }),
                    r
            }
            var a = {}
                , l = /^\s*directive\:\s*([\w\-]+)\s+(.*)$/
                , c = /(([\w\-]+)(?:\:([^;]+))?;?)/
                , d = function (e) {
                    var t, n = {};
                    for (e = e.split(","),
                        t = 0; t < e.length; t++)
                        n[e[t]] = !0;
                    return n
                }("ngSrc,ngSrcset,src,srcset")
                , p = /^(?:(\^\^?)?(\?)?(\^\^?)?)?/
                , v = /^(on[a-z]+|formaction)$/;
            this.directive = function t(n, i) {
                return te(n, "directive"),
                    $(n) ? (function (e) {
                        var t = e.charAt(0);
                        if (!t || t !== En(t))
                            throw Ci("baddir", e);
                        if (e !== e.trim())
                            throw Ci("baddir", e)
                    }(n),
                        Z(i, "directiveFactory"),
                        a.hasOwnProperty(n) || (a[n] = [],
                            e.factory(n + "Directive", ["$injector", "$exceptionHandler", function (e, t) {
                                var i = [];
                                return o(a[n], function (o, a) {
                                    try {
                                        var s = e.invoke(o);
                                        x(s) ? s = {
                                            compile: g(s)
                                        } : !s.compile && s.link && (s.compile = g(s.link)),
                                            s.priority = s.priority || 0,
                                            s.index = a,
                                            s.name = s.name || n,
                                            s.require = s.require || s.controller && s.name,
                                            s.restrict = s.restrict || "EA";
                                        var l = s
                                            , c = s
                                            , u = s.name
                                            , d = {
                                                isolateScope: null,
                                                bindToController: null
                                            };
                                        if (b(c.scope) && (!0 === c.bindToController ? (d.bindToController = r(c.scope, u, !0),
                                            d.isolateScope = {}) : d.isolateScope = r(c.scope, u, !1)),
                                            b(c.bindToController) && (d.bindToController = r(c.bindToController, u, !0)),
                                            b(d.bindToController)) {
                                            var p, h = c.controller, f = c.controllerAs;
                                            if (!h)
                                                throw Ci("noctrl", u);
                                            e: if (f && $(f))
                                                p = f;
                                            else {
                                                if ($(h)) {
                                                    var m = ki.exec(h);
                                                    if (m) {
                                                        p = m[3];
                                                        break e
                                                    }
                                                }
                                                p = void 0
                                            }
                                            if (!p)
                                                throw Ci("noident", u)
                                        }
                                        var v = l.$$bindings = d;
                                        b(v.isolateScope) && (s.$$isolateBindings = v.isolateScope),
                                            i.push(s)
                                    } catch (e) {
                                        t(e)
                                    }
                                }),
                                    i
                            }
                            ])),
                        a[n].push(i)) : o(n, s(t)),
                    this
            }
                ,
                this.aHrefSanitizationWhitelist = function (e) {
                    return y(e) ? (i.aHrefSanitizationWhitelist(e),
                        this) : i.aHrefSanitizationWhitelist()
                }
                ,
                this.imgSrcSanitizationWhitelist = function (e) {
                    return y(e) ? (i.imgSrcSanitizationWhitelist(e),
                        this) : i.imgSrcSanitizationWhitelist()
                }
                ;
            var w = !0;
            this.debugInfoEnabled = function (e) {
                return y(e) ? (w = e,
                    this) : w
            }
                ,
                this.$get = ["$injector", "$interpolate", "$exceptionHandler", "$templateRequest", "$parse", "$controller", "$rootScope", "$document", "$sce", "$animate", "$$sanitizeUri", function (e, i, r, s, g, y, S, C, T, k, E) {
                    function I(e, t) {
                        try {
                            e.addClass(t)
                        } catch (e) { }
                    }
                    function D(e, t, n, i, r) {
                        e instanceof xn || (e = xn(e)),
                            o(e, function (t, n) {
                                t.nodeType == Jn && t.nodeValue.match(/\S+/) && (e[n] = xn(t).wrap("<span></span>").parent()[0])
                            });
                        var a = A(e, t, e, n, i, r);
                        D.$$addScopeClass(e);
                        var s = null;
                        return function (t, n, i) {
                            Z(t, "scope");
                            var r = (i = i || {}).parentBoundTranscludeFn
                                , o = i.transcludeControllers;
                            if (i = i.futureParentElement,
                                r && r.$$boundTransclude && (r = r.$$boundTransclude),
                                s || (s = (i = i && i[0]) && "foreignobject" !== M(i) && i.toString().match(/SVG/) ? "svg" : "html"),
                                i = "html" !== s ? xn(X(s, xn("<div>").append(e).html())) : n ? ci.clone.call(e) : e,
                                o)
                                for (var l in o)
                                    i.data("$" + l + "Controller", o[l].instance);
                            return D.$$addScopeInfo(i, t),
                                n && n(i, t),
                                a && a(t, i, i, r),
                                i
                        }
                    }
                    function A(e, t, i, r, o, a) {
                        for (var s, l, c, u, d, p = [], h = 0; h < e.length; h++)
                            s = new ie,
                                (a = (l = L(e[h], [], s, 0 === h ? r : n, o)).length ? j(l, e[h], s, t, i, null, [], [], a) : null) && a.scope && D.$$addScopeClass(s.$$element),
                                s = a && a.terminal || !(c = e[h].childNodes) || !c.length ? null : A(c, a ? (a.transcludeOnThisElement || !a.templateOnThisElement) && a.transclude : t),
                                (a || s) && (p.push(h, a, s),
                                    u = !0,
                                    d = d || a),
                                a = null;
                        return u ? function (e, i, r, o) {
                            var a, s, l, c, u, h, f;
                            if (d)
                                for (f = Array(i.length),
                                    c = 0; c < p.length; c += 3)
                                    f[a = p[c]] = i[a];
                            else
                                f = i;
                            for (c = 0,
                                u = p.length; c < u;)
                                s = f[p[c++]],
                                    i = p[c++],
                                    a = p[c++],
                                    i ? (i.scope ? (l = e.$new(),
                                        D.$$addScopeInfo(xn(s), l),
                                        (h = i.$$destroyBindings) && (i.$$destroyBindings = null,
                                            l.$on("$destroyed", h))) : l = e,
                                        i(a, l, s, r, h = i.transcludeOnThisElement ? R(e, i.transclude, o, i.elementTranscludeOnThisElement) : !i.templateOnThisElement && o ? o : !o && t ? R(e, t) : null, i)) : a && a(e, s.childNodes, n, o)
                        }
                            : null
                    }
                    function R(e, t, n, i) {
                        return function (i, r, o, a, s) {
                            return i || ((i = e.$new(!1, s)).$$transcluded = !0),
                                t(i, r, {
                                    parentBoundTranscludeFn: n,
                                    transcludeControllers: o,
                                    futureParentElement: a
                                })
                        }
                    }
                    function L(e, t, n, i, r) {
                        var o, a = n.$attr;
                        switch (e.nodeType) {
                            case Xn:
                                B(t, Re(M(e)), "E", i, r);
                                for (var s, u, d, p = e.attributes, h = 0, f = p && p.length; h < f; h++) {
                                    var m = !1
                                        , g = !1;
                                    o = (s = p[h]).name,
                                        u = Vn(s.value),
                                        s = Re(o),
                                        (d = le.test(s)) && (o = o.replace(xi, "").substr(8).replace(/_(.)/g, function (e, t) {
                                            return t.toUpperCase()
                                        }));
                                    var v = s.replace(/(Start|End)$/, "");
                                    z(v) && s === v + "Start" && (m = o,
                                        g = o.substr(0, o.length - 5) + "end",
                                        o = o.substr(0, o.length - 6)),
                                        a[s = Re(o.toLowerCase())] = o,
                                        !d && n.hasOwnProperty(s) || (n[s] = u,
                                            Ce(e, s) && (n[s] = !0)),
                                        J(e, t, u, s, d),
                                        B(t, s, "A", i, r, m, g)
                                }
                                if (b(e = e.className) && (e = e.animVal),
                                    $(e) && "" !== e)
                                    for (; o = c.exec(e);)
                                        B(t, s = Re(o[2]), "C", i, r) && (n[s] = Vn(o[3])),
                                            e = e.substr(o.index + o[0].length);
                                break;
                            case Jn:
                                Y(t, e.nodeValue);
                                break;
                            case 8:
                                try {
                                    (o = l.exec(e.nodeValue)) && (B(t, s = Re(o[1]), "M", i, r) && (n[s] = Vn(o[2])))
                                } catch (e) { }
                        }
                        return t.sort(q),
                            t
                    }
                    function U(e, t, n) {
                        var i = []
                            , r = 0;
                        if (t && e.hasAttribute && e.hasAttribute(t))
                            do {
                                if (!e)
                                    throw Ci("uterdir", t, n);
                                e.nodeType == Xn && (e.hasAttribute(t) && r++,
                                    e.hasAttribute(n) && r--),
                                    i.push(e),
                                    e = e.nextSibling
                            } while (0 < r);
                        else
                            i.push(e);
                        return xn(i)
                    }
                    function N(e, t, n) {
                        return function (i, r, o, a, s) {
                            return r = U(r[0], t, n),
                                e(i, r, o, a, s)
                        }
                    }
                    function j(e, i, o, a, s, l, c, u, d) {
                        function h(e, t, n, i) {
                            e && (n && (e = N(e, n, i)),
                                e.require = w.require,
                                e.directiveName = S,
                                (I === w || w.$$isolateScope) && (e = ee(e, {
                                    isolateScope: !0
                                })),
                                c.push(e)),
                                t && (n && (t = N(t, n, i)),
                                    t.require = w.require,
                                    t.directiveName = S,
                                    (I === w || w.$$isolateScope) && (t = ee(t, {
                                        isolateScope: !0
                                    })),
                                    u.push(t))
                        }
                        function f(e, t, n, i) {
                            var r;
                            if ($(t)) {
                                var o = t.match(p);
                                t = t.substring(o[0].length);
                                var a = o[1] || o[3];
                                o = "?" === o[2];
                                if ("^^" === a ? n = n.parent() : r = (r = i && i[t]) && r.instance,
                                    r || (i = "$" + t + "Controller",
                                        r = a ? n.inheritedData(i) : n.data(i)),
                                    !r && !o)
                                    throw Ci("ctreq", t, e)
                            } else if (Fn(t))
                                for (r = [],
                                    a = 0,
                                    o = t.length; a < o; a++)
                                    r[a] = f(e, t[a], n, i);
                            return r || null
                        }
                        function m(e, t, n, i, r, o) {
                            var a, s = re();
                            for (a in i) {
                                var l = i[a]
                                    , c = {
                                        $scope: l === I || l.$$isolateScope ? r : o,
                                        $element: e,
                                        $attrs: t,
                                        $transclude: n
                                    }
                                    , u = l.controller;
                                "@" == u && (u = t[l.name]),
                                    c = y(u, c, !0, l.controllerAs),
                                    s[l.name] = c,
                                    R || e.data("$" + l.name + "Controller", c.instance)
                            }
                            return s
                        }
                        function g(e, t, r, a, s, l) {
                            var d, p, h, g, y, b, $;
                            if (i === r ? (a = o,
                                $ = o.$$element) : ($ = xn(r),
                                    a = new ie($, o)),
                                I && (g = t.$new(!0)),
                                s && ((b = function (e, t, i) {
                                    var r;
                                    return P(e) || (i = t,
                                        t = e,
                                        e = n),
                                        R && (r = y),
                                        i || (i = R ? $.parent() : $),
                                        s(e, t, r, i, T)
                                }
                                ).$$boundTransclude = s),
                                E && (y = m($, a, b, E, g, t)),
                                I && (D.$$addScopeInfo($, g, !0, !(M && (M === I || M === I.$$originalDirective))),
                                    D.$$addScopeClass($, !0),
                                    g.$$isolateBindings = I.$$isolateBindings,
                                    ne(t, a, g, g.$$isolateBindings, I, g)),
                                y) {
                                var S, C = I || v;
                                for (d in C && y[C.name] && (p = C.$$bindings.bindToController,
                                    (h = y[C.name]) && h.identifier && p && (S = h,
                                        l.$$destroyBindings = ne(t, a, h.instance, p, C))),
                                    y) {
                                    var x = (h = y[d])();
                                    x !== h.instance && (h.instance = x,
                                        $.data("$" + w.name + "Controller", x),
                                        h === S && (l.$$destroyBindings(),
                                            l.$$destroyBindings = ne(t, a, x, p, C)))
                                }
                            }
                            for (d = 0,
                                l = c.length; d < l; d++)
                                te(p = c[d], p.isolateScope ? g : t, $, a, p.require && f(p.directiveName, p.require, $, y), b);
                            var T = t;
                            for (I && (I.template || null === I.templateUrl) && (T = g),
                                e && e(T, r.childNodes, n, s),
                                d = u.length - 1; 0 <= d; d--)
                                te(p = u[d], p.isolateScope ? g : t, $, a, p.require && f(p.directiveName, p.require, $, y), b)
                        }
                        d = d || {};
                        for (var v, w, S, C, T, k = -Number.MAX_VALUE, E = d.controllerDirectives, I = d.newIsolateScopeDirective, M = d.templateDirective, O = d.nonTlbTranscludeDirective, A = !1, _ = !1, R = d.hasElementTranscludeDirective, j = o.$$element = xn(i), B = a, z = 0, q = e.length; z < q; z++) {
                            var Y = (w = e[z]).$$start
                                , J = w.$$end;
                            if (Y && (j = U(i, Y, J)),
                                C = n,
                                k > w.priority)
                                break;
                            if ((C = w.scope) && (w.templateUrl || (b(C) ? (G("new/isolated scope", I || v, w, j),
                                I = w) : G("new/isolated scope", I, w, j)),
                                v = v || w),
                                S = w.name,
                                !w.templateUrl && w.controller && (C = w.controller,
                                    E = E || re(),
                                    G("'" + S + "' controller", E[S], w, j),
                                    E[S] = w),
                                (C = w.transclude) && (A = !0,
                                    w.$$tlb || (G("transclusion", O, w, j),
                                        O = w),
                                    "element" == C ? (R = !0,
                                        k = w.priority,
                                        C = j,
                                        j = o.$$element = xn(t.createComment(" " + S + ": " + o[S] + " ")),
                                        i = j[0],
                                        K(s, On.call(C, 0), i),
                                        B = D(C, a, k, l && l.name, {
                                            nonTlbTranscludeDirective: O
                                        })) : (C = xn(ce(i)).contents(),
                                            j.empty(),
                                            B = D(C, a))),
                                w.template)
                                if (_ = !0,
                                    G("template", M, w, j),
                                    M = w,
                                    C = x(w.template) ? w.template(j, o) : w.template,
                                    C = se(C),
                                    w.replace) {
                                    if (l = w,
                                        C = oi.test(C) ? Ue(X(w.templateNamespace, Vn(C))) : [],
                                        i = C[0],
                                        1 != C.length || i.nodeType !== Xn)
                                        throw Ci("tplrt", S, "");
                                    K(s, j, i),
                                        C = L(i, [], q = {
                                            $attr: {}
                                        });
                                    var Q = e.splice(z + 1, e.length - (z + 1));
                                    I && F(C),
                                        e = e.concat(C).concat(Q),
                                        H(o, q),
                                        q = e.length
                                } else
                                    j.html(C);
                            if (w.templateUrl)
                                _ = !0,
                                    G("template", M, w, j),
                                    M = w,
                                    w.replace && (l = w),
                                    g = W(e.splice(z, e.length - z), j, o, s, A && B, c, u, {
                                        controllerDirectives: E,
                                        newIsolateScopeDirective: I,
                                        templateDirective: M,
                                        nonTlbTranscludeDirective: O
                                    }),
                                    q = e.length;
                            else if (w.compile)
                                try {
                                    x(T = w.compile(j, o, B)) ? h(null, T, Y, J) : T && h(T.pre, T.post, Y, J)
                                } catch (e) {
                                    r(e, V(j))
                                }
                            w.terminal && (g.terminal = !0,
                                k = Math.max(k, w.priority))
                        }
                        return g.scope = v && !0 === v.scope,
                            g.transcludeOnThisElement = A,
                            g.elementTranscludeOnThisElement = R,
                            g.templateOnThisElement = _,
                            g.transclude = B,
                            d.hasElementTranscludeDirective = R,
                            g
                    }
                    function F(e) {
                        for (var t = 0, n = e.length; t < n; t++)
                            e[t] = h(e[t], {
                                $$isolateScope: !0
                            })
                    }
                    function B(t, i, o, s, l, c, u) {
                        if (i === l)
                            return null;
                        if (l = null,
                            a.hasOwnProperty(i))
                            for (var d, p = 0, f = (i = e.get(i + "Directive")).length; p < f; p++)
                                try {
                                    d = i[p],
                                        (s === n || s > d.priority) && -1 != d.restrict.indexOf(o) && (c && (d = h(d, {
                                            $$start: c,
                                            $$end: u
                                        })),
                                            t.push(d),
                                            l = d)
                                } catch (e) {
                                    r(e)
                                }
                        return l
                    }
                    function z(t) {
                        if (a.hasOwnProperty(t))
                            for (var n = e.get(t + "Directive"), i = 0, r = n.length; i < r; i++)
                                if ((t = n[i]).multiElement)
                                    return !0;
                        return !1
                    }
                    function H(e, t) {
                        var n = t.$attr
                            , i = e.$attr
                            , r = e.$$element;
                        o(e, function (i, r) {
                            "$" != r.charAt(0) && (t[r] && t[r] !== i && (i += ("style" === r ? ";" : " ") + t[r]),
                                e.$set(r, i, !0, n[r]))
                        }),
                            o(t, function (t, o) {
                                "class" == o ? (I(r, t),
                                    e.class = (e.class ? e.class + " " : "") + t) : "style" == o ? (r.attr("style", r.attr("style") + ";" + t),
                                        e.style = (e.style ? e.style + ";" : "") + t) : "$" == o.charAt(0) || e.hasOwnProperty(o) || (e[o] = t,
                                            i[o] = n[o])
                            })
                    }
                    function W(e, t, n, i, r, a, l, c) {
                        var u, d, p = [], f = t[0], m = e.shift(), g = h(m, {
                            templateUrl: null,
                            transclude: null,
                            replace: null,
                            $$originalDirective: m
                        }), v = x(m.templateUrl) ? m.templateUrl(t, n) : m.templateUrl, y = m.templateNamespace;
                        return t.empty(),
                            s(T.getTrustedResourceUrl(v)).then(function (s) {
                                var h, w;
                                if (s = se(s),
                                    m.replace) {
                                    if (s = oi.test(s) ? Ue(X(y, Vn(s))) : [],
                                        h = s[0],
                                        1 != s.length || h.nodeType !== Xn)
                                        throw Ci("tplrt", m.name, v);
                                    s = {
                                        $attr: {}
                                    },
                                        K(i, t, h);
                                    var $ = L(h, [], s);
                                    b(m.scope) && F($),
                                        e = $.concat(e),
                                        H(n, s)
                                } else
                                    h = f,
                                        t.html(s);
                                for (e.unshift(g),
                                    u = j(e, h, n, r, t, m, a, l, c),
                                    o(i, function (e, n) {
                                        e == h && (i[n] = t[0])
                                    }),
                                    d = A(t[0].childNodes, r); p.length;) {
                                    s = p.shift(),
                                        w = p.shift();
                                    var S = p.shift()
                                        , C = p.shift();
                                    $ = t[0];
                                    if (!s.$$destroyed) {
                                        if (w !== f) {
                                            var x = w.className;
                                            c.hasElementTranscludeDirective && m.replace || ($ = ce(h)),
                                                K(S, xn(w), $),
                                                I(xn($), x)
                                        }
                                        w = u.transcludeOnThisElement ? R(s, u.transclude, C) : C,
                                            u(d, s, $, i, w, u)
                                    }
                                }
                                p = null
                            }),
                            function (e, t, n, i, r) {
                                e = r,
                                    t.$$destroyed || (p ? p.push(t, n, i, e) : (u.transcludeOnThisElement && (e = R(t, u.transclude, r)),
                                        u(d, t, n, i, e, u)))
                            }
                    }
                    function q(e, t) {
                        var n = t.priority - e.priority;
                        return 0 !== n ? n : e.name !== t.name ? e.name < t.name ? -1 : 1 : e.index - t.index
                    }
                    function G(e, t, n, i) {
                        if (t)
                            throw Ci("multidir", t.name, n.name, e, V(i))
                    }
                    function Y(e, t) {
                        var n = i(t, !0);
                        n && e.push({
                            priority: 0,
                            compile: function (e) {
                                var t = !!(e = e.parent()).length;
                                return t && D.$$addBindingClass(e),
                                    function (e, i) {
                                        var r = i.parent();
                                        t || D.$$addBindingClass(r),
                                            D.$$addBindingInfo(r, n.expressions),
                                            e.$watch(n, function (e) {
                                                i[0].nodeValue = e
                                            })
                                    }
                            }
                        })
                    }
                    function X(e, n) {
                        switch (e = En(e || "html")) {
                            case "svg":
                            case "math":
                                var i = t.createElement("div");
                                return i.innerHTML = "<" + e + ">" + n + "</" + e + ">",
                                    i.childNodes[0].childNodes;
                            default:
                                return n
                        }
                    }
                    function J(e, t, n, r, o) {
                        var a = function (e, t) {
                            if ("srcdoc" == t)
                                return T.HTML;
                            var n = M(e);
                            return "xlinkHref" == t || "form" == n && "action" == t || "img" != n && ("src" == t || "ngSrc" == t) ? T.RESOURCE_URL : void 0
                        }(e, r);
                        o = d[r] || o;
                        var s = i(n, !0, a, o);
                        if (s) {
                            if ("multiple" === r && "select" === M(e))
                                throw Ci("selmulti", V(e));
                            t.push({
                                priority: 100,
                                compile: function () {
                                    return {
                                        pre: function (e, t, l) {
                                            if (t = l.$$observers || (l.$$observers = {}),
                                                v.test(r))
                                                throw Ci("nodomevents");
                                            var c = l[r];
                                            c !== n && (s = c && i(c, !0, a, o),
                                                n = c),
                                                s && (l[r] = s(e),
                                                    (t[r] || (t[r] = [])).$$inter = !0,
                                                    (l.$$observers && l.$$observers[r].$$scope || e).$watch(s, function (e, t) {
                                                        "class" === r && e != t ? l.$updateClass(e, t) : l.$set(r, e)
                                                    }))
                                        }
                                    }
                                }
                            })
                        }
                    }
                    function K(e, n, i) {
                        var r, o, a = n[0], s = n.length, l = a.parentNode;
                        if (e)
                            for (r = 0,
                                o = e.length; r < o; r++)
                                if (e[r] == a) {
                                    e[r++] = i,
                                        o = r + s - 1;
                                    for (var c = e.length; r < c; r++,
                                        o++)
                                        o < c ? e[r] = e[o] : delete e[r];
                                    e.length -= s - 1,
                                        e.context === a && (e.context = i);
                                    break
                                }
                        for (l && l.replaceChild(i, a),
                            (e = t.createDocumentFragment()).appendChild(a),
                            xn(i).data(xn(a).data()),
                            Tn ? (jn = !0,
                                Tn.cleanData([a])) : delete xn.cache[a[xn.expando]],
                            a = 1,
                            s = n.length; a < s; a++)
                            l = n[a],
                                xn(l).remove(),
                                e.appendChild(l),
                                delete n[a];
                        n[0] = i,
                            n.length = 1
                    }
                    function ee(e, t) {
                        return u(function () {
                            return e.apply(null, arguments)
                        }, e, t)
                    }
                    function te(e, t, n, i, o, a) {
                        try {
                            e(t, n, i, o, a)
                        } catch (e) {
                            r(e, V(n))
                        }
                    }
                    function ne(e, t, n, r, a, s) {
                        var l;
                        return o(r, function (r, o) {
                            var s, c, u, d, p = r.attrName, h = r.optional;
                            switch (r.mode) {
                                case "@":
                                    t.$observe(p, function (e) {
                                        n[o] = e
                                    }),
                                        t.$$observers[p].$$scope = e,
                                        t[p] && (n[o] = i(t[p])(e));
                                    break;
                                case "=":
                                    if (h && !t[p])
                                        break;
                                    c = g(t[p]),
                                        d = c.literal ? _ : function (e, t) {
                                            return e === t || e != e && t != t
                                        }
                                        ,
                                        u = c.assign || function () {
                                            throw s = n[o] = c(e),
                                            Ci("nonassign", t[p], a.name)
                                        }
                                        ,
                                        s = n[o] = c(e),
                                        (h = function (t) {
                                            return d(t, n[o]) || (d(t, s) ? u(e, t = n[o]) : n[o] = t),
                                                s = t
                                        }
                                        ).$stateful = !0,
                                        h = r.collection ? e.$watchCollection(t[p], h) : e.$watch(g(t[p], h), null, c.literal),
                                        (l = l || []).push(h);
                                    break;
                                case "&":
                                    if (!t.hasOwnProperty(p) && h)
                                        break;
                                    if ((c = g(t[p])) === f && h)
                                        break;
                                    n[o] = function (t) {
                                        return c(e, t)
                                    }
                            }
                        }),
                            r = l ? function () {
                                for (var e = 0, t = l.length; e < t; ++e)
                                    l[e]()
                            }
                                : f,
                            s && r !== f ? (s.$on("$destroy", r),
                                f) : r
                    }
                    var ie = function (e, t) {
                        if (t) {
                            var n, i, r, o = Object.keys(t);
                            for (n = 0,
                                i = o.length; n < i; n++)
                                this[r = o[n]] = t[r]
                        } else
                            this.$attr = {};
                        this.$$element = e
                    };
                    ie.prototype = {
                        $normalize: Re,
                        $addClass: function (e) {
                            e && 0 < e.length && k.addClass(this.$$element, e)
                        },
                        $removeClass: function (e) {
                            e && 0 < e.length && k.removeClass(this.$$element, e)
                        },
                        $updateClass: function (e, t) {
                            var n = Le(e, t);
                            n && n.length && k.addClass(this.$$element, n),
                                (n = Le(t, e)) && n.length && k.removeClass(this.$$element, n)
                        },
                        $set: function (e, t, i, a) {
                            var s = Ce(c = this.$$element[0], e)
                                , l = function (e, t) {
                                    var n = e.nodeName;
                                    return ("INPUT" === n || "TEXTAREA" === n) && pi[t]
                                }(c, e)
                                , c = e;
                            if (s ? (this.$$element.prop(e, t),
                                a = s) : l && (this[l] = t,
                                    c = l),
                                this[e] = t,
                                a ? this.$attr[e] = a : (a = this.$attr[e]) || (this.$attr[e] = a = Q(e, "-")),
                                "a" === (s = M(this.$$element)) && "href" === e || "img" === s && "src" === e)
                                this[e] = t = E(t, "src" === e);
                            else if ("img" === s && "srcset" === e) {
                                s = "",
                                    l = Vn(t);
                                for (var u = /(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/, d = (u = /\s/.test(l) ? u : /(,)/,
                                    l = l.split(u),
                                    u = Math.floor(l.length / 2),
                                    0); d < u; d++) {
                                    var p = 2 * d;
                                    s = (s = s + E(Vn(l[p]), !0)) + " " + Vn(l[p + 1])
                                }
                                l = Vn(l[2 * d]).split(/\s/),
                                    s += E(Vn(l[0]), !0),
                                    2 === l.length && (s += " " + Vn(l[1])),
                                    this[e] = t = s
                            }
                            !1 !== i && (null === t || t === n ? this.$$element.removeAttr(a) : this.$$element.attr(a, t)),
                                (e = this.$$observers) && o(e[c], function (e) {
                                    try {
                                        e(t)
                                    } catch (e) {
                                        r(e)
                                    }
                                })
                        },
                        $observe: function (e, t) {
                            var n = this
                                , i = n.$$observers || (n.$$observers = re())
                                , r = i[e] || (i[e] = []);
                            return r.push(t),
                                S.$evalAsync(function () {
                                    !r.$$inter && n.hasOwnProperty(e) && t(n[e])
                                }),
                                function () {
                                    O(r, t)
                                }
                        }
                    };
                    var oe = i.startSymbol()
                        , ae = i.endSymbol()
                        , se = "{{" == oe || "}}" == ae ? m : function (e) {
                            return e.replace(/\{\{/g, oe).replace(/}}/g, ae)
                        }
                        , le = /^ngAttr[A-Z]/;
                    return D.$$addBindingInfo = w ? function (e, t) {
                        var n = e.data("$binding") || [];
                        Fn(t) ? n = n.concat(t) : n.push(t),
                            e.data("$binding", n)
                    }
                        : f,
                        D.$$addBindingClass = w ? function (e) {
                            I(e, "ng-binding")
                        }
                            : f,
                        D.$$addScopeInfo = w ? function (e, t, n, i) {
                            e.data(n ? i ? "$isolateScopeNoTemplate" : "$isolateScope" : "$scope", t)
                        }
                            : f,
                        D.$$addScopeClass = w ? function (e, t) {
                            I(e, t ? "ng-isolate-scope" : "ng-scope")
                        }
                            : f,
                        D
                }
                ]
        }
        function Re(e) {
            return oe(e.replace(xi, ""))
        }
        function Le(e, t) {
            var n = ""
                , i = e.split(/\s+/)
                , r = t.split(/\s+/)
                , o = 0;
            e: for (; o < i.length; o++) {
                for (var a = i[o], s = 0; s < r.length; s++)
                    if (a == r[s])
                        continue e;
                n += (0 < n.length ? " " : "") + a
            }
            return n
        }
        function Ue(e) {
            var t = (e = xn(e)).length;
            if (1 >= t)
                return e;
            for (; t--;)
                8 === e[t].nodeType && Dn.call(e, t, 1);
            return e
        }
        function Ne() {
            var e = {}
                , t = !1;
            this.register = function (t, n) {
                te(t, "controller"),
                    b(t) ? u(e, t) : e[t] = n
            }
                ,
                this.allowGlobals = function () {
                    t = !0
                }
                ,
                this.$get = ["$injector", "$window", function (r, o) {
                    function a(e, t, n, r) {
                        if (!e || !b(e.$scope))
                            throw i("$controller")("noscp", r, t);
                        e.$scope[t] = n
                    }
                    return function (i, s, l, c) {
                        var d, p, h;
                        if (l = !0 === l,
                            c && $(c) && (h = c),
                            $(i)) {
                            if (!(c = i.match(ki)))
                                throw Ti("ctrlfmt", i);
                            p = c[1],
                                h = h || c[3],
                                ee(i = e.hasOwnProperty(p) ? e[p] : ne(s.$scope, p, !0) || (t ? ne(o, p, !0) : n), p, !0)
                        }
                        return l ? (l = (Fn(i) ? i[i.length - 1] : i).prototype,
                            d = Object.create(l || null),
                            h && a(s, h, d, p || i.name),
                            u(function () {
                                var e = r.invoke(i, d, s, p);
                                return e !== d && (b(e) || x(e)) && (d = e,
                                    h && a(s, h, d, p || i.name)),
                                    d
                            }, {
                                instance: d,
                                identifier: h
                            })) : (d = r.instantiate(i, s, p),
                                h && a(s, h, d, p || i.name),
                                d)
                    }
                }
                ]
        }
        function je() {
            this.$get = ["$window", function (e) {
                return xn(e.document)
            }
            ]
        }
        function Fe() {
            this.$get = ["$log", function (e) {
                return function (t, n) {
                    e.error.apply(e, arguments)
                }
            }
            ]
        }
        function Be(e) {
            return b(e) ? C(e) ? e.toISOString() : N(e) : e
        }
        function Ve() {
            this.$get = function () {
                return function (e) {
                    if (!e)
                        return "";
                    var t = [];
                    return a(e, function (e, n) {
                        null === e || v(e) || (Fn(e) ? o(e, function (e, i) {
                            t.push(G(n) + "=" + G(Be(e)))
                        }) : t.push(G(n) + "=" + G(Be(e))))
                    }),
                        t.join("&")
                }
            }
        }
        function ze() {
            this.$get = function () {
                return function (e) {
                    if (!e)
                        return "";
                    var t = [];
                    return function e(n, i, r) {
                        null === n || v(n) || (Fn(n) ? o(n, function (t) {
                            e(t, i + "[]")
                        }) : b(n) && !C(n) ? a(n, function (t, n) {
                            e(t, i + (r ? "" : "[") + n + (r ? "" : "]"))
                        }) : t.push(G(i) + "=" + G(Be(n))))
                    }(e, "", !0),
                        t.join("&")
                }
            }
        }
        function He(e, t) {
            if ($(e)) {
                var n = e.replace(Oi, "").trim();
                if (n) {
                    var i = t("Content-Type");
                    (i = i && 0 === i.indexOf(Pi)) || (i = (i = n.match(Ii)) && Mi[i[0]].test(n)),
                        i && (e = j(n))
                }
            }
            return e
        }
        function We(e) {
            var t, n = re();
            return $(e) ? o(e.split("\n"), function (e) {
                t = e.indexOf(":");
                var i = En(Vn(e.substr(0, t)));
                e = Vn(e.substr(t + 1)),
                    i && (n[i] = n[i] ? n[i] + ", " + e : e)
            }) : b(e) && o(e, function (e, t) {
                var i = En(t)
                    , r = Vn(e);
                i && (n[i] = n[i] ? n[i] + ", " + r : r)
            }),
                n
        }
        function qe(e) {
            var t;
            return function (n) {
                return t || (t = We(e)),
                    n ? (void 0 === (n = t[En(n)]) && (n = null),
                        n) : t
            }
        }
        function Ge(e, t, n, i) {
            return x(i) ? i(e, t, n) : (o(i, function (i) {
                e = i(e, t, n)
            }),
                e)
        }
        function Ye() {
            var e = this.defaults = {
                transformResponse: [He],
                transformRequest: [function (e) {
                    return b(e) && "[object File]" !== _n.call(e) && "[object Blob]" !== _n.call(e) && "[object FormData]" !== _n.call(e) ? N(e) : e
                }
                ],
                headers: {
                    common: {
                        Accept: "application/json, text/plain, */*"
                    },
                    post: A(Ei),
                    put: A(Ei),
                    patch: A(Ei)
                },
                xsrfCookieName: "XSRF-TOKEN",
                xsrfHeaderName: "X-XSRF-TOKEN",
                paramSerializer: "$httpParamSerializer"
            }
                , t = !1;
            this.useApplyAsync = function (e) {
                return y(e) ? (t = !!e,
                    this) : t
            }
                ;
            var r = this.interceptors = [];
            this.$get = ["$httpBackend", "$$cookieReader", "$cacheFactory", "$rootScope", "$q", "$injector", function (a, s, l, c, d, p) {
                function h(t) {
                    function r(e) {
                        var t = u({}, e);
                        return t.data = e.data ? Ge(e.data, e.headers, e.status, a.transformResponse) : e.data,
                            200 <= (e = e.status) && 300 > e ? t : d.reject(t)
                    }
                    if (!Un.isObject(t))
                        throw i("$http")("badreq", t);
                    var a = u({
                        method: "get",
                        transformRequest: e.transformRequest,
                        transformResponse: e.transformResponse,
                        paramSerializer: e.paramSerializer
                    }, t);
                    a.headers = function (t) {
                        var n, i, r, a = e.headers, s = u({}, t.headers);
                        a = u({}, a.common, a[En(t.method)]);
                        e: for (n in a) {
                            for (r in i = En(n),
                                s)
                                if (En(r) === i)
                                    continue e;
                            s[n] = a[n]
                        }
                        return function (e, t) {
                            var n, i = {};
                            return o(e, function (e, r) {
                                x(e) ? null != (n = e(t)) && (i[r] = n) : i[r] = e
                            }),
                                i
                        }(s, A(t))
                    }(t),
                        a.method = Mn(a.method),
                        a.paramSerializer = $(a.paramSerializer) ? p.get(a.paramSerializer) : a.paramSerializer;
                    var s = [function (t) {
                        var i = t.headers
                            , a = Ge(t.data, qe(i), n, t.transformRequest);
                        return v(a) && o(i, function (e, t) {
                            "content-type" === En(t) && delete i[t]
                        }),
                            v(t.withCredentials) && !v(e.withCredentials) && (t.withCredentials = e.withCredentials),
                            f(t, a).then(r, r)
                    }
                        , n]
                        , l = d.when(a);
                    for (o(g, function (e) {
                        (e.request || e.requestError) && s.unshift(e.request, e.requestError),
                            (e.response || e.responseError) && s.push(e.response, e.responseError)
                    }); s.length;) {
                        t = s.shift();
                        var c = s.shift();
                        l = l.then(t, c)
                    }
                    return l.success = function (e) {
                        return ee(e, "fn"),
                            l.then(function (t) {
                                e(t.data, t.status, t.headers, a)
                            }),
                            l
                    }
                        ,
                        l.error = function (e) {
                            return ee(e, "fn"),
                                l.then(null, function (t) {
                                    e(t.data, t.status, t.headers, a)
                                }),
                                l
                        }
                        ,
                        l
                }
                function f(i, r) {
                    function o(e, t, n, r) {
                        (200 <= (t = Math.max(t, 0)) && 300 > t ? g.resolve : g.reject)({
                            data: e,
                            status: t,
                            headers: qe(n),
                            config: i,
                            statusText: r
                        })
                    }
                    function l(e) {
                        o(e.data, e.status, A(e.headers()), e.statusText)
                    }
                    function u() {
                        var e = h.pendingRequests.indexOf(i);
                        -1 !== e && h.pendingRequests.splice(e, 1)
                    }
                    var p, f, g = d.defer(), w = g.promise, $ = i.headers, S = function (e, t) {
                        return 0 < t.length && (e += (-1 == e.indexOf("?") ? "?" : "&") + t),
                            e
                    }(i.url, i.paramSerializer(i.params));
                    return h.pendingRequests.push(i),
                        w.then(u, u),
                        !i.cache && !e.cache || !1 === i.cache || "GET" !== i.method && "JSONP" !== i.method || (p = b(i.cache) ? i.cache : b(e.cache) ? e.cache : m),
                        p && (y(f = p.get(S)) ? f && x(f.then) ? f.then(l, l) : Fn(f) ? o(f[1], f[0], A(f[2]), f[3]) : o(f, 200, {}, "OK") : p.put(S, w)),
                        v(f) && ((f = Ht(i.url) ? s()[i.xsrfCookieName || e.xsrfCookieName] : n) && ($[i.xsrfHeaderName || e.xsrfHeaderName] = f),
                            a(i.method, S, r, function (e, n, i, r) {
                                function a() {
                                    o(n, e, i, r)
                                }
                                p && (200 <= e && 300 > e ? p.put(S, [e, n, We(i), r]) : p.remove(S)),
                                    t ? c.$applyAsync(a) : (a(),
                                        c.$$phase || c.$apply())
                            }, $, i.timeout, i.withCredentials, i.responseType)),
                        w
                }
                var m = l("$http");
                e.paramSerializer = $(e.paramSerializer) ? p.get(e.paramSerializer) : e.paramSerializer;
                var g = [];
                return o(r, function (e) {
                    g.unshift($(e) ? p.get(e) : p.invoke(e))
                }),
                    h.pendingRequests = [],
                    function (e) {
                        o(arguments, function (e) {
                            h[e] = function (t, n) {
                                return h(u(n || {}, {
                                    method: e,
                                    url: t
                                }))
                            }
                        })
                    }("get", "delete", "head", "jsonp"),
                    function (e) {
                        o(arguments, function (e) {
                            h[e] = function (t, n, i) {
                                return h(u(i || {}, {
                                    method: e,
                                    url: t,
                                    data: n
                                }))
                            }
                        })
                    }("post", "put", "patch"),
                    h.defaults = e,
                    h
            }
            ]
        }
        function Xe() {
            return new e.XMLHttpRequest
        }
        function Je() {
            this.$get = ["$browser", "$window", "$document", function (e, t, i) {
                return function (e, t, i, r, a) {
                    function s(e, t, n) {
                        var i = a.createElement("script")
                            , o = null;
                        return i.type = "text/javascript",
                            i.src = e,
                            i.async = !0,
                            o = function (e) {
                                i.removeEventListener("load", o, !1),
                                    i.removeEventListener("error", o, !1),
                                    a.body.removeChild(i),
                                    i = null;
                                var s = -1
                                    , l = "unknown";
                                e && ("load" !== e.type || r[t].called || (e = {
                                    type: "error"
                                }),
                                    l = e.type,
                                    s = "error" === e.type ? 404 : 200),
                                    n && n(s, l)
                            }
                            ,
                            i.addEventListener("load", o, !1),
                            i.addEventListener("error", o, !1),
                            a.body.appendChild(i),
                            o
                    }
                    return function (a, l, c, u, d, p, h, m) {
                        function g() {
                            w && w(),
                                $ && $.abort()
                        }
                        function v(t, r, o, a, s) {
                            S !== n && i.cancel(S),
                                w = $ = null,
                                t(r, o, a, s),
                                e.$$completeOutstandingRequest(f)
                        }
                        if (e.$$incOutstandingRequestCount(),
                            l = l || e.url(),
                            "jsonp" == En(a)) {
                            var b = "_" + (r.counter++).toString(36);
                            r[b] = function (e) {
                                r[b].data = e,
                                    r[b].called = !0
                            }
                                ;
                            var w = s(l.replace("JSON_CALLBACK", "angular.callbacks." + b), b, function (e, t) {
                                v(u, e, r[b].data, "", t),
                                    r[b] = f
                            })
                        } else {
                            var $ = t();
                            if ($.open(a, l, !0),
                                o(d, function (e, t) {
                                    y(e) && $.setRequestHeader(t, e)
                                }),
                                $.onload = function () {
                                    var e = $.statusText || ""
                                        , t = "response" in $ ? $.response : $.responseText
                                        , n = 1223 === $.status ? 204 : $.status;
                                    0 === n && (n = t ? 200 : "file" == zt(l).protocol ? 404 : 0),
                                        v(u, n, t, $.getAllResponseHeaders(), e)
                                }
                                ,
                                a = function () {
                                    v(u, -1, null, null, "")
                                }
                                ,
                                $.onerror = a,
                                $.onabort = a,
                                h && ($.withCredentials = !0),
                                m)
                                try {
                                    $.responseType = m
                                } catch (e) {
                                    if ("json" !== m)
                                        throw e
                                }
                            $.send(c)
                        }
                        if (0 < p)
                            var S = i(g, p);
                        else
                            p && x(p.then) && p.then(g)
                    }
                }(e, Xe, e.defer, t.angular.callbacks, i[0])
            }
            ]
        }
        function Ke() {
            var e = "{{"
                , t = "}}";
            this.startSymbol = function (t) {
                return t ? (e = t,
                    this) : e
            }
                ,
                this.endSymbol = function (e) {
                    return e ? (t = e,
                        this) : t
                }
                ,
                this.$get = ["$parse", "$exceptionHandler", "$sce", function (n, i, r) {
                    function o(e) {
                        return "\\\\\\" + e
                    }
                    function a(n) {
                        return n.replace(d, e).replace(p, t)
                    }
                    function s(o, s, d, p) {
                        function h(e) {
                            try {
                                var t, n = e;
                                if (e = d ? r.getTrusted(d, n) : r.valueOf(n),
                                    p && !y(e))
                                    t = e;
                                else if (null == e)
                                    t = "";
                                else {
                                    switch (typeof e) {
                                        case "string":
                                            break;
                                        case "number":
                                            e = "" + e;
                                            break;
                                        default:
                                            e = N(e)
                                    }
                                    t = e
                                }
                                return t
                            } catch (e) {
                                i(Di.interr(o, e))
                            }
                        }
                        p = !!p;
                        for (var f, m, g = 0, b = [], w = [], $ = o.length, S = [], C = []; g < $;) {
                            if (-1 == (f = o.indexOf(e, g)) || -1 == (m = o.indexOf(t, f + l))) {
                                g !== $ && S.push(a(o.substring(g)));
                                break
                            }
                            g !== f && S.push(a(o.substring(g, f))),
                                g = o.substring(f + l, m),
                                b.push(g),
                                w.push(n(g, h)),
                                g = m + c,
                                C.push(S.length),
                                S.push("")
                        }
                        if (d && 1 < S.length && Di.throwNoconcat(o),
                            !s || b.length) {
                            var T = function (e) {
                                for (var t = 0, n = b.length; t < n; t++) {
                                    if (p && v(e[t]))
                                        return;
                                    S[C[t]] = e[t]
                                }
                                return S.join("")
                            };
                            return u(function (e) {
                                var t = 0
                                    , n = b.length
                                    , r = Array(n);
                                try {
                                    for (; t < n; t++)
                                        r[t] = w[t](e);
                                    return T(r)
                                } catch (e) {
                                    i(Di.interr(o, e))
                                }
                            }, {
                                exp: o,
                                expressions: b,
                                $$watchDelegate: function (e, t) {
                                    var n;
                                    return e.$watchGroup(w, function (i, r) {
                                        var o = T(i);
                                        x(t) && t.call(this, o, i !== r ? n : o, e),
                                            n = o
                                    })
                                }
                            })
                        }
                    }
                    var l = e.length
                        , c = t.length
                        , d = new RegExp(e.replace(/./g, o), "g")
                        , p = new RegExp(t.replace(/./g, o), "g");
                    return s.startSymbol = function () {
                        return e
                    }
                        ,
                        s.endSymbol = function () {
                            return t
                        }
                        ,
                        s
                }
                ]
        }
        function Qe() {
            this.$get = ["$rootScope", "$window", "$q", "$$q", function (e, t, n, i) {
                function r(r, a, s, l) {
                    var c = 4 < arguments.length
                        , u = c ? On.call(arguments, 4) : []
                        , d = t.setInterval
                        , p = t.clearInterval
                        , h = 0
                        , f = y(l) && !l
                        , m = (f ? i : n).defer()
                        , g = m.promise;
                    return s = y(s) ? s : 0,
                        g.then(null, null, c ? function () {
                            r.apply(null, u)
                        }
                            : r),
                        g.$$intervalId = d(function () {
                            m.notify(h++),
                                0 < s && h >= s && (m.resolve(h),
                                    p(g.$$intervalId),
                                    delete o[g.$$intervalId]),
                                f || e.$apply()
                        }, a),
                        o[g.$$intervalId] = m,
                        g
                }
                var o = {};
                return r.cancel = function (e) {
                    return !!(e && e.$$intervalId in o) && (o[e.$$intervalId].reject("canceled"),
                        t.clearInterval(e.$$intervalId),
                        delete o[e.$$intervalId],
                        !0)
                }
                    ,
                    r
            }
            ]
        }
        function Ze() {
            this.$get = function () {
                return {
                    id: "en-us",
                    NUMBER_FORMATS: {
                        DECIMAL_SEP: ".",
                        GROUP_SEP: ",",
                        PATTERNS: [{
                            minInt: 1,
                            minFrac: 0,
                            maxFrac: 3,
                            posPre: "",
                            posSuf: "",
                            negPre: "-",
                            negSuf: "",
                            gSize: 3,
                            lgSize: 3
                        }, {
                            minInt: 1,
                            minFrac: 2,
                            maxFrac: 2,
                            posPre: "¤",
                            posSuf: "",
                            negPre: "(¤",
                            negSuf: ")",
                            gSize: 3,
                            lgSize: 3
                        }],
                        CURRENCY_SYM: "$"
                    },
                    DATETIME_FORMATS: {
                        MONTH: "January February March April May June July August September October November December".split(" "),
                        SHORTMONTH: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
                        DAY: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
                        SHORTDAY: "Sun Mon Tue Wed Thu Fri Sat".split(" "),
                        AMPMS: ["AM", "PM"],
                        medium: "MMM d, y h:mm:ss a",
                        short: "M/d/yy h:mm a",
                        fullDate: "EEEE, MMMM d, y",
                        longDate: "MMMM d, y",
                        mediumDate: "MMM d, y",
                        shortDate: "M/d/yy",
                        mediumTime: "h:mm:ss a",
                        shortTime: "h:mm a",
                        ERANAMES: ["Before Christ", "Anno Domini"],
                        ERAS: ["BC", "AD"]
                    },
                    pluralCat: function (e) {
                        return 1 === e ? "one" : "other"
                    }
                }
            }
        }
        function et(e) {
            for (var t = (e = e.split("/")).length; t--;)
                e[t] = q(e[t]);
            return e.join("/")
        }
        function tt(e, t) {
            var n = zt(e);
            t.$$protocol = n.protocol,
                t.$$host = n.hostname,
                t.$$port = p(n.port) || _i[n.protocol] || null
        }
        function nt(e, t) {
            var n = "/" !== e.charAt(0);
            n && (e = "/" + e);
            var i = zt(e);
            t.$$path = decodeURIComponent(n && "/" === i.pathname.charAt(0) ? i.pathname.substring(1) : i.pathname),
                t.$$search = H(i.search),
                t.$$hash = decodeURIComponent(i.hash),
                t.$$path && "/" != t.$$path.charAt(0) && (t.$$path = "/" + t.$$path)
        }
        function it(e, t) {
            if (0 === t.indexOf(e))
                return t.substr(e.length)
        }
        function rt(e) {
            var t = e.indexOf("#");
            return -1 == t ? e : e.substr(0, t)
        }
        function ot(e) {
            return e.replace(/(#.+)|#$/, "$1")
        }
        function at(e) {
            return e.substr(0, rt(e).lastIndexOf("/") + 1)
        }
        function st(e, t) {
            this.$$html5 = !0,
                t = t || "";
            var i = at(e);
            tt(e, this),
                this.$$parse = function (e) {
                    var t = it(i, e);
                    if (!$(t))
                        throw Ri("ipthprfx", e, i);
                    nt(t, this),
                        this.$$path || (this.$$path = "/"),
                        this.$$compose()
                }
                ,
                this.$$compose = function () {
                    var e = W(this.$$search)
                        , t = this.$$hash ? "#" + q(this.$$hash) : "";
                    this.$$url = et(this.$$path) + (e ? "?" + e : "") + t,
                        this.$$absUrl = i + this.$$url.substr(1)
                }
                ,
                this.$$parseLinkUrl = function (r, o) {
                    return o && "#" === o[0] ? (this.hash(o.slice(1)),
                        !0) : ((a = it(e, r)) !== n ? (s = a,
                            s = (a = it(t, a)) !== n ? i + (it("/", a) || a) : e + s) : (a = it(i, r)) !== n ? s = i + a : i == r + "/" && (s = i),
                            s && this.$$parse(s),
                            !!s);
                    var a, s
                }
        }
        function lt(e, t) {
            var n = at(e);
            tt(e, this),
                this.$$parse = function (i) {
                    var r;
                    "#" === (i = it(e, i) || it(n, i)).charAt(0) ? v(r = it(t, i)) && (r = i) : r = this.$$html5 ? i : "",
                        nt(r, this),
                        i = this.$$path;
                    var o = /^\/[A-Z]:(\/.*)/;
                    0 === r.indexOf(e) && (r = r.replace(e, "")),
                        o.exec(r) || (i = (r = o.exec(i)) ? r[1] : i),
                        this.$$path = i,
                        this.$$compose()
                }
                ,
                this.$$compose = function () {
                    var n = W(this.$$search)
                        , i = this.$$hash ? "#" + q(this.$$hash) : "";
                    this.$$url = et(this.$$path) + (n ? "?" + n : "") + i,
                        this.$$absUrl = e + (this.$$url ? t + this.$$url : "")
                }
                ,
                this.$$parseLinkUrl = function (t, n) {
                    return rt(e) == rt(t) && (this.$$parse(t),
                        !0)
                }
        }
        function ct(e, t) {
            this.$$html5 = !0,
                lt.apply(this, arguments);
            var n = at(e);
            this.$$parseLinkUrl = function (i, r) {
                return r && "#" === r[0] ? (this.hash(r.slice(1)),
                    !0) : (e == rt(i) ? o = i : (a = it(n, i)) ? o = e + t + a : n === i + "/" && (o = n),
                        o && this.$$parse(o),
                        !!o);
                var o, a
            }
                ,
                this.$$compose = function () {
                    var n = W(this.$$search)
                        , i = this.$$hash ? "#" + q(this.$$hash) : "";
                    this.$$url = et(this.$$path) + (n ? "?" + n : "") + i,
                        this.$$absUrl = e + t + this.$$url
                }
        }
        function ut(e) {
            return function () {
                return this[e]
            }
        }
        function dt(e, t) {
            return function (n) {
                return v(n) ? this[e] : (this[e] = t(n),
                    this.$$compose(),
                    this)
            }
        }
        function pt() {
            var e = ""
                , t = {
                    enabled: !1,
                    requireBase: !0,
                    rewriteLinks: !0
                };
            this.hashPrefix = function (t) {
                return y(t) ? (e = t,
                    this) : e
            }
                ,
                this.html5Mode = function (e) {
                    return E(e) ? (t.enabled = e,
                        this) : b(e) ? (E(e.enabled) && (t.enabled = e.enabled),
                            E(e.requireBase) && (t.requireBase = e.requireBase),
                            E(e.rewriteLinks) && (t.rewriteLinks = e.rewriteLinks),
                            this) : t
                }
                ,
                this.$get = ["$rootScope", "$browser", "$sniffer", "$rootElement", "$window", function (n, i, r, o, a) {
                    function s(e, t, n) {
                        var r = c.url()
                            , o = c.$$state;
                        try {
                            i.url(e, t, n),
                                c.$$state = i.state()
                        } catch (e) {
                            throw c.url(r),
                            c.$$state = o,
                            e
                        }
                    }
                    function l(e, t) {
                        n.$broadcast("$locationChangeSuccess", c.absUrl(), e, c.$$state, t)
                    }
                    var c, u;
                    u = i.baseHref();
                    var d, p = i.url();
                    if (t.enabled) {
                        if (!u && t.requireBase)
                            throw Ri("nobase");
                        d = p.substring(0, p.indexOf("/", p.indexOf("//") + 2)) + (u || "/"),
                            u = r.history ? st : ct
                    } else
                        d = rt(p),
                            u = lt;
                    (c = new u(d, "#" + e)).$$parseLinkUrl(p, p),
                        c.$$state = i.state();
                    var h = /^\s*(javascript|mailto):/i;
                    o.on("click", function (e) {
                        if (t.rewriteLinks && !e.ctrlKey && !e.metaKey && !e.shiftKey && 2 != e.which && 2 != e.button) {
                            for (var r = xn(e.target); "a" !== M(r[0]);)
                                if (r[0] === o[0] || !(r = r.parent())[0])
                                    return;
                            var s = r.prop("href")
                                , l = r.attr("href") || r.attr("xlink:href");
                            b(s) && "[object SVGAnimatedString]" === s.toString() && (s = zt(s.animVal).href),
                                h.test(s) || !s || r.attr("target") || e.isDefaultPrevented() || !c.$$parseLinkUrl(s, l) || (e.preventDefault(),
                                    c.absUrl() != i.url() && (n.$apply(),
                                        a.angular["ff-684208-preventDefault"] = !0))
                        }
                    }),
                        ot(c.absUrl()) != ot(p) && i.url(c.absUrl(), !0);
                    var f = !0;
                    return i.onUrlChange(function (e, t) {
                        n.$evalAsync(function () {
                            var i, r = c.absUrl(), o = c.$$state;
                            c.$$parse(e),
                                c.$$state = t,
                                i = n.$broadcast("$locationChangeStart", e, r, t, o).defaultPrevented,
                                c.absUrl() === e && (i ? (c.$$parse(r),
                                    c.$$state = o,
                                    s(r, !1, o)) : (f = !1,
                                        l(r, o)))
                        }),
                            n.$$phase || n.$digest()
                    }),
                        n.$watch(function () {
                            var e = ot(i.url())
                                , t = ot(c.absUrl())
                                , o = i.state()
                                , a = c.$$replace
                                , u = e !== t || c.$$html5 && r.history && o !== c.$$state;
                            (f || u) && (f = !1,
                                n.$evalAsync(function () {
                                    var t = c.absUrl()
                                        , i = n.$broadcast("$locationChangeStart", t, e, c.$$state, o).defaultPrevented;
                                    c.absUrl() === t && (i ? (c.$$parse(e),
                                        c.$$state = o) : (u && s(t, a, o === c.$$state ? null : c.$$state),
                                            l(e, o)))
                                })),
                                c.$$replace = !1
                        }),
                        c
                }
                ]
        }
        function ht() {
            var e = !0
                , t = this;
            this.debugEnabled = function (t) {
                return y(t) ? (e = t,
                    this) : e
            }
                ,
                this.$get = ["$window", function (n) {
                    function i(e) {
                        var t = n.console || {}
                            , i = t[e] || t.log || f;
                        e = !1;
                        try {
                            e = !!i.apply
                        } catch (e) { }
                        return e ? function () {
                            var e = [];
                            return o(arguments, function (t) {
                                e.push(function (e) {
                                    return e instanceof Error && (e.stack ? e = e.message && -1 === e.stack.indexOf(e.message) ? "Error: " + e.message + "\n" + e.stack : e.stack : e.sourceURL && (e = e.message + "\n" + e.sourceURL + ":" + e.line)),
                                        e
                                }(t))
                            }),
                                i.apply(t, e)
                        }
                            : function (e, t) {
                                i(e, null == t ? "" : t)
                            }
                    }
                    return {
                        log: i("log"),
                        info: i("info"),
                        warn: i("warn"),
                        error: i("error"),
                        debug: function () {
                            var n = i("debug");
                            return function () {
                                e && n.apply(t, arguments)
                            }
                        }()
                    }
                }
                ]
        }
        function ft(e, t) {
            if ("__defineGetter__" === e || "__defineSetter__" === e || "__lookupGetter__" === e || "__lookupSetter__" === e || "__proto__" === e)
                throw Ui("isecfld", t);
            return e
        }
        function mt(e, t) {
            if (e) {
                if (e.constructor === e)
                    throw Ui("isecfn", t);
                if (e.window === e)
                    throw Ui("isecwindow", t);
                if (e.children && (e.nodeName || e.prop && e.attr && e.find))
                    throw Ui("isecdom", t);
                if (e === Object)
                    throw Ui("isecobj", t)
            }
            return e
        }
        function gt(e, t) {
            if (e) {
                if (e.constructor === e)
                    throw Ui("isecfn", t);
                if (e === Ni || e === ji || e === Fi)
                    throw Ui("isecff", t)
            }
        }
        function vt(e, t) {
            return void 0 !== e ? e : t
        }
        function yt(e, t) {
            return void 0 === e ? t : void 0 === t ? e : e + t
        }
        function bt(e, t) {
            var n, i;
            switch (e.type) {
                case Hi.Program:
                    n = !0,
                        o(e.body, function (e) {
                            bt(e.expression, t),
                                n = n && e.expression.constant
                        }),
                        e.constant = n;
                    break;
                case Hi.Literal:
                    e.constant = !0,
                        e.toWatch = [];
                    break;
                case Hi.UnaryExpression:
                    bt(e.argument, t),
                        e.constant = e.argument.constant,
                        e.toWatch = e.argument.toWatch;
                    break;
                case Hi.BinaryExpression:
                    bt(e.left, t),
                        bt(e.right, t),
                        e.constant = e.left.constant && e.right.constant,
                        e.toWatch = e.left.toWatch.concat(e.right.toWatch);
                    break;
                case Hi.LogicalExpression:
                    bt(e.left, t),
                        bt(e.right, t),
                        e.constant = e.left.constant && e.right.constant,
                        e.toWatch = e.constant ? [] : [e];
                    break;
                case Hi.ConditionalExpression:
                    bt(e.test, t),
                        bt(e.alternate, t),
                        bt(e.consequent, t),
                        e.constant = e.test.constant && e.alternate.constant && e.consequent.constant,
                        e.toWatch = e.constant ? [] : [e];
                    break;
                case Hi.Identifier:
                    e.constant = !1,
                        e.toWatch = [e];
                    break;
                case Hi.MemberExpression:
                    bt(e.object, t),
                        e.computed && bt(e.property, t),
                        e.constant = e.object.constant && (!e.computed || e.property.constant),
                        e.toWatch = [e];
                    break;
                case Hi.CallExpression:
                    n = !!e.filter && !t(e.callee.name).$stateful,
                        i = [],
                        o(e.arguments, function (e) {
                            bt(e, t),
                                n = n && e.constant,
                                e.constant || i.push.apply(i, e.toWatch)
                        }),
                        e.constant = n,
                        e.toWatch = e.filter && !t(e.callee.name).$stateful ? i : [e];
                    break;
                case Hi.AssignmentExpression:
                    bt(e.left, t),
                        bt(e.right, t),
                        e.constant = e.left.constant && e.right.constant,
                        e.toWatch = [e];
                    break;
                case Hi.ArrayExpression:
                    n = !0,
                        i = [],
                        o(e.elements, function (e) {
                            bt(e, t),
                                n = n && e.constant,
                                e.constant || i.push.apply(i, e.toWatch)
                        }),
                        e.constant = n,
                        e.toWatch = i;
                    break;
                case Hi.ObjectExpression:
                    n = !0,
                        i = [],
                        o(e.properties, function (e) {
                            bt(e.value, t),
                                n = n && e.value.constant,
                                e.value.constant || i.push.apply(i, e.value.toWatch)
                        }),
                        e.constant = n,
                        e.toWatch = i;
                    break;
                case Hi.ThisExpression:
                    e.constant = !1,
                        e.toWatch = []
            }
        }
        function wt(e) {
            if (1 == e.length) {
                var t = (e = e[0].expression).toWatch;
                return 1 !== t.length ? t : t[0] !== e ? t : n
            }
        }
        function $t(e) {
            return e.type === Hi.Identifier || e.type === Hi.MemberExpression
        }
        function St(e) {
            if (1 === e.body.length && $t(e.body[0].expression))
                return {
                    type: Hi.AssignmentExpression,
                    left: e.body[0].expression,
                    right: {
                        type: Hi.NGValueParameter
                    },
                    operator: "="
                }
        }
        function Ct(e) {
            return 0 === e.body.length || 1 === e.body.length && (e.body[0].expression.type === Hi.Literal || e.body[0].expression.type === Hi.ArrayExpression || e.body[0].expression.type === Hi.ObjectExpression)
        }
        function xt(e, t) {
            this.astBuilder = e,
                this.$filter = t
        }
        function Tt(e, t) {
            this.astBuilder = e,
                this.$filter = t
        }
        function kt(e, t, n, i) {
            mt(e, i),
                t = t.split(".");
            for (var r, o = 0; 1 < t.length; o++) {
                var a = mt(e[r = ft(t.shift(), i)], i);
                a || (a = {},
                    e[r] = a),
                    e = a
            }
            return mt(e[r = ft(t.shift(), i)], i),
                e[r] = n
        }
        function Pt(e) {
            return "constructor" == e
        }
        function Et(e) {
            return x(e.valueOf) ? e.valueOf() : qi.call(e)
        }
        function It() {
            var e = re()
                , t = re();
            this.$get = ["$filter", "$sniffer", function (i, r) {
                function a(e, t) {
                    return null == e || null == t ? e === t : ("object" != typeof e || "object" != typeof (e = Et(e))) && (e === t || e != e && t != t)
                }
                function s(e, t, i, r, o) {
                    var s;
                    if (1 === (c = r.inputs).length) {
                        var l = a
                            , c = c[0];
                        return e.$watch(function (e) {
                            var t = c(e);
                            return a(t, l) || (s = r(e, n, n, [t]),
                                l = t && Et(t)),
                                s
                        }, t, i, o)
                    }
                    for (var u = [], d = [], p = 0, h = c.length; p < h; p++)
                        u[p] = a,
                            d[p] = null;
                    return e.$watch(function (e) {
                        for (var t = !1, i = 0, o = c.length; i < o; i++) {
                            var l = c[i](e);
                            (t || (t = !a(l, u[i]))) && (d[i] = l,
                                u[i] = l && Et(l))
                        }
                        return t && (s = r(e, n, n, d)),
                            s
                    }, t, i, o)
                }
                function l(e, t, n, i) {
                    var r, o;
                    return r = e.$watch(function (e) {
                        return i(e)
                    }, function (e, n, i) {
                        o = e,
                            x(t) && t.apply(this, arguments),
                            y(e) && i.$$postDigest(function () {
                                y(o) && r()
                            })
                    }, n)
                }
                function c(e, t, n, i) {
                    function r(e) {
                        var t = !0;
                        return o(e, function (e) {
                            y(e) || (t = !1)
                        }),
                            t
                    }
                    var a, s;
                    return a = e.$watch(function (e) {
                        return i(e)
                    }, function (e, n, i) {
                        s = e,
                            x(t) && t.call(this, e, n, i),
                            r(e) && i.$$postDigest(function () {
                                r(s) && a()
                            })
                    }, n)
                }
                function u(e, t, n, i) {
                    var r;
                    return r = e.$watch(function (e) {
                        return i(e)
                    }, function (e, n, i) {
                        x(t) && t.apply(this, arguments),
                            r()
                    }, n)
                }
                function d(e, t) {
                    if (!t)
                        return e;
                    var n = (n = e.$$watchDelegate) !== c && n !== l ? function (n, i, r, o) {
                        return r = e(n, i, r, o),
                            t(r, n, i)
                    }
                        : function (n, i, r, o) {
                            return r = e(n, i, r, o),
                                n = t(r, n, i),
                                y(r) ? n : r
                        }
                        ;
                    return e.$$watchDelegate && e.$$watchDelegate !== s ? n.$$watchDelegate = e.$$watchDelegate : t.$stateful || (n.$$watchDelegate = s,
                        n.inputs = e.inputs ? e.inputs : [e]),
                        n
                }
                var p = {
                    csp: r.csp,
                    expensiveChecks: !1
                }
                    , h = {
                        csp: r.csp,
                        expensiveChecks: !0
                    };
                return function (n, r, o) {
                    var a, m, g;
                    switch (typeof n) {
                        case "string":
                            g = n = n.trim();
                            var v = o ? t : e;
                            return (a = v[g]) || (":" === n.charAt(0) && ":" === n.charAt(1) && (m = !0,
                                n = n.substring(2)),
                                a = new zi(o = o ? h : p),
                                (a = new Wi(a, i, o).parse(n)).constant ? a.$$watchDelegate = u : m ? a.$$watchDelegate = a.literal ? c : l : a.inputs && (a.$$watchDelegate = s),
                                v[g] = a),
                                d(a, r);
                        case "function":
                            return d(n, r);
                        default:
                            return f
                    }
                }
            }
            ]
        }
        function Mt() {
            this.$get = ["$rootScope", "$exceptionHandler", function (e, t) {
                return Dt(function (t) {
                    e.$evalAsync(t)
                }, t)
            }
            ]
        }
        function Ot() {
            this.$get = ["$browser", "$exceptionHandler", function (e, t) {
                return Dt(function (t) {
                    e.defer(t)
                }, t)
            }
            ]
        }
        function Dt(e, t) {
            function r() {
                this.$$state = {
                    status: 0
                }
            }
            function a(e, t) {
                return function (n) {
                    t.call(e, n)
                }
            }
            function s(i) {
                !i.processScheduled && i.pending && (i.processScheduled = !0,
                    e(function () {
                        var e, r, o;
                        o = i.pending,
                            i.processScheduled = !1,
                            i.pending = n;
                        for (var a = 0, s = o.length; a < s; ++a) {
                            r = o[a][0],
                                e = o[a][i.status];
                            try {
                                x(e) ? r.resolve(e(i.value)) : 1 === i.status ? r.resolve(i.value) : r.reject(i.value)
                            } catch (e) {
                                r.reject(e),
                                    t(e)
                            }
                        }
                    }))
            }
            function l() {
                this.promise = new r,
                    this.resolve = a(this, this.resolve),
                    this.reject = a(this, this.reject),
                    this.notify = a(this, this.notify)
            }
            var c = i("$q", TypeError);
            r.prototype = {
                then: function (e, t, n) {
                    var i = new l;
                    return this.$$state.pending = this.$$state.pending || [],
                        this.$$state.pending.push([i, e, t, n]),
                        0 < this.$$state.status && s(this.$$state),
                        i.promise
                },
                catch: function (e) {
                    return this.then(null, e)
                },
                finally: function (e, t) {
                    return this.then(function (t) {
                        return d(t, !0, e)
                    }, function (t) {
                        return d(t, !1, e)
                    }, t)
                }
            },
                l.prototype = {
                    resolve: function (e) {
                        this.promise.$$state.status || (e === this.promise ? this.$$reject(c("qcycle", e)) : this.$$resolve(e))
                    },
                    $$resolve: function (e) {
                        var n, i;
                        i = function (e, t, n) {
                            function i(t) {
                                return function (n) {
                                    r || (r = !0,
                                        t.call(e, n))
                                }
                            }
                            var r = !1;
                            return [i(t), i(n)]
                        }(this, this.$$resolve, this.$$reject);
                        try {
                            (b(e) || x(e)) && (n = e && e.then),
                                x(n) ? (this.promise.$$state.status = -1,
                                    n.call(e, i[0], i[1], this.notify)) : (this.promise.$$state.value = e,
                                        this.promise.$$state.status = 1,
                                        s(this.promise.$$state))
                        } catch (e) {
                            i[1](e),
                                t(e)
                        }
                    },
                    reject: function (e) {
                        this.promise.$$state.status || this.$$reject(e)
                    },
                    $$reject: function (e) {
                        this.promise.$$state.value = e,
                            this.promise.$$state.status = 2,
                            s(this.promise.$$state)
                    },
                    notify: function (n) {
                        var i = this.promise.$$state.pending;
                        0 >= this.promise.$$state.status && i && i.length && e(function () {
                            for (var e, r, o = 0, a = i.length; o < a; o++) {
                                r = i[o][0],
                                    e = i[o][3];
                                try {
                                    r.notify(x(e) ? e(n) : n)
                                } catch (e) {
                                    t(e)
                                }
                            }
                        })
                    }
                };
            var u = function (e, t) {
                var n = new l;
                return t ? n.resolve(e) : n.reject(e),
                    n.promise
            }
                , d = function (e, t, n) {
                    var i = null;
                    try {
                        x(n) && (i = n())
                    } catch (e) {
                        return u(e, !1)
                    }
                    return i && x(i.then) ? i.then(function () {
                        return u(e, t)
                    }, function (e) {
                        return u(e, !1)
                    }) : u(e, t)
                }
                , p = function (e, t, n, i) {
                    var r = new l;
                    return r.resolve(e),
                        r.promise.then(t, n, i)
                }
                , h = function e(t) {
                    if (!x(t))
                        throw c("norslvr", t);
                    if (!(this instanceof e))
                        return new e(t);
                    var n = new l;
                    return t(function (e) {
                        n.resolve(e)
                    }, function (e) {
                        n.reject(e)
                    }),
                        n.promise
                };
            return h.defer = function () {
                return new l
            }
                ,
                h.reject = function (e) {
                    var t = new l;
                    return t.reject(e),
                        t.promise
                }
                ,
                h.when = p,
                h.all = function (e) {
                    var t = new l
                        , n = 0
                        , i = Fn(e) ? [] : {};
                    return o(e, function (e, r) {
                        n++,
                            p(e).then(function (e) {
                                i.hasOwnProperty(r) || (i[r] = e,
                                    --n || t.resolve(i))
                            }, function (e) {
                                i.hasOwnProperty(r) || t.reject(e)
                            })
                    }),
                        0 === n && t.resolve(i),
                        t.promise
                }
                ,
                h
        }
        function At() {
            this.$get = ["$window", "$timeout", function (e, t) {
                function n() {
                    for (var e = 0; e < u.length; e++) {
                        var t = u[e];
                        t && (u[e] = null,
                            t())
                    }
                    c = u.length = 0
                }
                function i(e) {
                    var t = u.length;
                    return c++,
                        u.push(e),
                        0 === t && (l = s(n)),
                        function () {
                            0 <= t && (t = u[t] = null,
                                0 == --c && l && (l(),
                                    l = null,
                                    u.length = 0))
                        }
                }
                var r = e.requestAnimationFrame || e.webkitRequestAnimationFrame
                    , o = e.cancelAnimationFrame || e.webkitCancelAnimationFrame || e.webkitCancelRequestAnimationFrame
                    , a = !!r
                    , s = a ? function (e) {
                        var t = r(e);
                        return function () {
                            o(t)
                        }
                    }
                        : function (e) {
                            var n = t(e, 16.66, !1);
                            return function () {
                                t.cancel(n)
                            }
                        }
                    ;
                i.supported = a;
                var l, c = 0, u = [];
                return i
            }
            ]
        }
        function _t() {
            var e = 10
                , t = i("$rootScope")
                , n = null
                , a = null;
            this.digestTtl = function (t) {
                return arguments.length && (e = t),
                    e
            }
                ,
                this.$get = ["$injector", "$exceptionHandler", "$parse", "$browser", function (i, s, l, c) {
                    function u(e) {
                        e.currentScope.$$destroyed = !0
                    }
                    function d() {
                        this.$id = ++Nn,
                            this.$$phase = this.$parent = this.$$watchers = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = null,
                            this.$root = this,
                            this.$$destroyed = !1,
                            this.$$listeners = {},
                            this.$$listenerCount = {},
                            this.$$watchersCount = 0,
                            this.$$isolateBindings = null
                    }
                    function p(e) {
                        if (w.$$phase)
                            throw t("inprog", w.$$phase);
                        w.$$phase = e
                    }
                    function h(e, t) {
                        do {
                            e.$$watchersCount += t
                        } while (e = e.$parent)
                    }
                    function m(e, t, n) {
                        do {
                            e.$$listenerCount[n] -= t,
                                0 === e.$$listenerCount[n] && delete e.$$listenerCount[n]
                        } while (e = e.$parent)
                    }
                    function g() { }
                    function y() {
                        for (; C.length;)
                            try {
                                C.shift()()
                            } catch (e) {
                                s(e)
                            }
                        a = null
                    }
                    d.prototype = {
                        constructor: d,
                        $new: function (e, t) {
                            var n;
                            return t = t || this,
                                e ? (n = new d).$root = this.$root : (this.$$ChildScope || (this.$$ChildScope = function (e) {
                                    function t() {
                                        this.$$watchers = this.$$nextSibling = this.$$childHead = this.$$childTail = null,
                                            this.$$listeners = {},
                                            this.$$listenerCount = {},
                                            this.$$watchersCount = 0,
                                            this.$id = ++Nn,
                                            this.$$ChildScope = null
                                    }
                                    return t.prototype = e,
                                        t
                                }(this)),
                                    n = new this.$$ChildScope),
                                n.$parent = t,
                                n.$$prevSibling = t.$$childTail,
                                t.$$childHead ? (t.$$childTail.$$nextSibling = n,
                                    t.$$childTail = n) : t.$$childHead = t.$$childTail = n,
                                (e || t != this) && n.$on("$destroy", u),
                                n
                        },
                        $watch: function (e, t, i, r) {
                            var o = l(e);
                            if (o.$$watchDelegate)
                                return o.$$watchDelegate(this, t, i, o, e);
                            var a = this
                                , s = a.$$watchers
                                , c = {
                                    fn: t,
                                    last: g,
                                    get: o,
                                    exp: r || e,
                                    eq: !!i
                                };
                            return n = null,
                                x(t) || (c.fn = f),
                                s || (s = a.$$watchers = []),
                                s.unshift(c),
                                h(this, 1),
                                function () {
                                    0 <= O(s, c) && h(a, -1),
                                        n = null
                                }
                        },
                        $watchGroup: function (e, t) {
                            function n() {
                                l = !1,
                                    c ? (c = !1,
                                        t(r, r, s)) : t(r, i, s)
                            }
                            var i = Array(e.length)
                                , r = Array(e.length)
                                , a = []
                                , s = this
                                , l = !1
                                , c = !0;
                            if (!e.length) {
                                var u = !0;
                                return s.$evalAsync(function () {
                                    u && t(r, r, s)
                                }),
                                    function () {
                                        u = !1
                                    }
                            }
                            return 1 === e.length ? this.$watch(e[0], function (e, n, o) {
                                r[0] = e,
                                    i[0] = n,
                                    t(r, e === n ? r : i, o)
                            }) : (o(e, function (e, t) {
                                var o = s.$watch(e, function (e, o) {
                                    r[t] = e,
                                        i[t] = o,
                                        l || (l = !0,
                                            s.$evalAsync(n))
                                });
                                a.push(o)
                            }),
                                function () {
                                    for (; a.length;)
                                        a.shift()()
                                }
                                )
                        },
                        $watchCollection: function (e, t) {
                            function n(e) {
                                var t, n, a;
                                if (!v(i = e)) {
                                    if (b(i))
                                        if (r(i))
                                            for (o !== p && (m = (o = p).length = 0,
                                                u++),
                                                e = i.length,
                                                m !== e && (u++,
                                                    o.length = m = e),
                                                t = 0; t < e; t++)
                                                a = o[t],
                                                    n = i[t],
                                                    a != a && n != n || a === n || (u++,
                                                        o[t] = n);
                                        else {
                                            for (t in o !== h && (o = h = {},
                                                m = 0,
                                                u++),
                                                e = 0,
                                                i)
                                                i.hasOwnProperty(t) && (e++,
                                                    n = i[t],
                                                    a = o[t],
                                                    t in o ? a != a && n != n || a === n || (u++,
                                                        o[t] = n) : (m++,
                                                            o[t] = n,
                                                            u++));
                                            if (m > e)
                                                for (t in u++,
                                                    o)
                                                    i.hasOwnProperty(t) || (m--,
                                                        delete o[t])
                                        }
                                    else
                                        o !== i && (o = i,
                                            u++);
                                    return u
                                }
                            }
                            n.$stateful = !0;
                            var i, o, a, s = this, c = 1 < t.length, u = 0, d = l(e, n), p = [], h = {}, f = !0, m = 0;
                            return this.$watch(d, function () {
                                if (f ? (f = !1,
                                    t(i, i, s)) : t(i, a, s),
                                    c)
                                    if (b(i))
                                        if (r(i)) {
                                            a = Array(i.length);
                                            for (var e = 0; e < i.length; e++)
                                                a[e] = i[e]
                                        } else
                                            for (e in a = {},
                                                i)
                                                In.call(i, e) && (a[e] = i[e]);
                                    else
                                        a = i
                            })
                        },
                        $digest: function () {
                            var i, r, o, l, u, d, h, f, m, v = e, b = [];
                            p("$digest"),
                                c.$$checkUrlChange(),
                                this === w && null !== a && (c.defer.cancel(a),
                                    y()),
                                n = null;
                            do {
                                for (d = !1,
                                    h = this; $.length;) {
                                    try {
                                        (m = $.shift()).scope.$eval(m.expression, m.locals)
                                    } catch (e) {
                                        s(e)
                                    }
                                    n = null
                                }
                                e: do {
                                    if (l = h.$$watchers)
                                        for (u = l.length; u--;)
                                            try {
                                                if (i = l[u])
                                                    if ((r = i.get(h)) === (o = i.last) || (i.eq ? _(r, o) : "number" == typeof r && "number" == typeof o && isNaN(r) && isNaN(o))) {
                                                        if (i === n) {
                                                            d = !1;
                                                            break e
                                                        }
                                                    } else
                                                        d = !0,
                                                            n = i,
                                                            i.last = i.eq ? D(r, null) : r,
                                                            i.fn(r, o === g ? r : o, h),
                                                            5 > v && (b[f = 4 - v] || (b[f] = []),
                                                                b[f].push({
                                                                    msg: x(i.exp) ? "fn: " + (i.exp.name || i.exp.toString()) : i.exp,
                                                                    newVal: r,
                                                                    oldVal: o
                                                                }))
                                            } catch (e) {
                                                s(e)
                                            }
                                    if (!(l = h.$$watchersCount && h.$$childHead || h !== this && h.$$nextSibling))
                                        for (; h !== this && !(l = h.$$nextSibling);)
                                            h = h.$parent
                                } while (h = l); if ((d || $.length) && !v--)
                                    throw w.$$phase = null,
                                    t("infdig", e, b)
                            } while (d || $.length); for (w.$$phase = null; S.length;)
                                try {
                                    S.shift()()
                                } catch (e) {
                                    s(e)
                                }
                        },
                        $destroy: function () {
                            if (!this.$$destroyed) {
                                var e = this.$parent;
                                for (var t in this.$broadcast("$destroy"),
                                    this.$$destroyed = !0,
                                    this === w && c.$$applicationDestroyed(),
                                    h(this, -this.$$watchersCount),
                                    this.$$listenerCount)
                                    m(this, this.$$listenerCount[t], t);
                                e && e.$$childHead == this && (e.$$childHead = this.$$nextSibling),
                                    e && e.$$childTail == this && (e.$$childTail = this.$$prevSibling),
                                    this.$$prevSibling && (this.$$prevSibling.$$nextSibling = this.$$nextSibling),
                                    this.$$nextSibling && (this.$$nextSibling.$$prevSibling = this.$$prevSibling),
                                    this.$destroy = this.$digest = this.$apply = this.$evalAsync = this.$applyAsync = f,
                                    this.$on = this.$watch = this.$watchGroup = function () {
                                        return f
                                    }
                                    ,
                                    this.$$listeners = {},
                                    this.$parent = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = this.$root = this.$$watchers = null
                            }
                        },
                        $eval: function (e, t) {
                            return l(e)(this, t)
                        },
                        $evalAsync: function (e, t) {
                            w.$$phase || $.length || c.defer(function () {
                                $.length && w.$digest()
                            }),
                                $.push({
                                    scope: this,
                                    expression: e,
                                    locals: t
                                })
                        },
                        $$postDigest: function (e) {
                            S.push(e)
                        },
                        $apply: function (e) {
                            try {
                                return p("$apply"),
                                    this.$eval(e)
                            } catch (e) {
                                s(e)
                            } finally {
                                w.$$phase = null;
                                try {
                                    w.$digest()
                                } catch (e) {
                                    throw s(e),
                                    e
                                }
                            }
                        },
                        $applyAsync: function (e) {
                            var t = this;
                            e && C.push(function () {
                                t.$eval(e)
                            }),
                                null === a && (a = c.defer(function () {
                                    w.$apply(y)
                                }))
                        },
                        $on: function (e, t) {
                            var n = this.$$listeners[e];
                            n || (this.$$listeners[e] = n = []),
                                n.push(t);
                            var i = this;
                            do {
                                i.$$listenerCount[e] || (i.$$listenerCount[e] = 0),
                                    i.$$listenerCount[e]++
                            } while (i = i.$parent); var r = this;
                            return function () {
                                var i = n.indexOf(t);
                                -1 !== i && (n[i] = null,
                                    m(r, 1, e))
                            }
                        },
                        $emit: function (e, t) {
                            var n, i, r, o = [], a = this, l = !1, c = {
                                name: e,
                                targetScope: a,
                                stopPropagation: function () {
                                    l = !0
                                },
                                preventDefault: function () {
                                    c.defaultPrevented = !0
                                },
                                defaultPrevented: !1
                            }, u = R([c], arguments, 1);
                            do {
                                for (n = a.$$listeners[e] || o,
                                    c.currentScope = a,
                                    i = 0,
                                    r = n.length; i < r; i++)
                                    if (n[i])
                                        try {
                                            n[i].apply(null, u)
                                        } catch (e) {
                                            s(e)
                                        }
                                    else
                                        n.splice(i, 1),
                                            i--,
                                            r--;
                                if (l)
                                    return c.currentScope = null,
                                        c;
                                a = a.$parent
                            } while (a); return c.currentScope = null,
                                c
                        },
                        $broadcast: function (e, t) {
                            var n = this
                                , i = this
                                , r = {
                                    name: e,
                                    targetScope: this,
                                    preventDefault: function () {
                                        r.defaultPrevented = !0
                                    },
                                    defaultPrevented: !1
                                };
                            if (!this.$$listenerCount[e])
                                return r;
                            for (var o, a, l = R([r], arguments, 1); n = i;) {
                                for (r.currentScope = n,
                                    o = 0,
                                    a = (i = n.$$listeners[e] || []).length; o < a; o++)
                                    if (i[o])
                                        try {
                                            i[o].apply(null, l)
                                        } catch (e) {
                                            s(e)
                                        }
                                    else
                                        i.splice(o, 1),
                                            o--,
                                            a--;
                                if (!(i = n.$$listenerCount[e] && n.$$childHead || n !== this && n.$$nextSibling))
                                    for (; n !== this && !(i = n.$$nextSibling);)
                                        n = n.$parent
                            }
                            return r.currentScope = null,
                                r
                        }
                    };
                    var w = new d
                        , $ = w.$$asyncQueue = []
                        , S = w.$$postDigestQueue = []
                        , C = w.$$applyAsyncQueue = [];
                    return w
                }
                ]
        }
        function Rt() {
            var e = /^\s*(https?|ftp|mailto|tel|file):/
                , t = /^\s*((https?|ftp|file|blob):|data:image\/)/;
            this.aHrefSanitizationWhitelist = function (t) {
                return y(t) ? (e = t,
                    this) : e
            }
                ,
                this.imgSrcSanitizationWhitelist = function (e) {
                    return y(e) ? (t = e,
                        this) : t
                }
                ,
                this.$get = function () {
                    return function (n, i) {
                        var r, o = i ? t : e;
                        return "" === (r = zt(n).href) || r.match(o) ? n : "unsafe:" + r
                    }
                }
        }
        function Lt(e) {
            var t = [];
            return y(e) && o(e, function (e) {
                t.push(function (e) {
                    if ("self" === e)
                        return e;
                    if ($(e)) {
                        if (-1 < e.indexOf("***"))
                            throw Gi("iwcard", e);
                        return e = zn(e).replace("\\*\\*", ".*").replace("\\*", "[^:/.?&;]*"),
                            new RegExp("^" + e + "$")
                    }
                    if (T(e))
                        return new RegExp("^" + e.source + "$");
                    throw Gi("imatcher")
                }(e))
            }),
                t
        }
        function Ut() {
            this.SCE_CONTEXTS = Yi;
            var e = ["self"]
                , t = [];
            this.resourceUrlWhitelist = function (t) {
                return arguments.length && (e = Lt(t)),
                    e
            }
                ,
                this.resourceUrlBlacklist = function (e) {
                    return arguments.length && (t = Lt(e)),
                        t
                }
                ,
                this.$get = ["$injector", function (i) {
                    function r(e, t) {
                        return "self" === e ? Ht(t) : !!e.exec(t.href)
                    }
                    function o(e) {
                        var t = function (e) {
                            this.$$unwrapTrustedValue = function () {
                                return e
                            }
                        };
                        return e && (t.prototype = new e),
                            t.prototype.valueOf = function () {
                                return this.$$unwrapTrustedValue()
                            }
                            ,
                            t.prototype.toString = function () {
                                return this.$$unwrapTrustedValue().toString()
                            }
                            ,
                            t
                    }
                    var a = function (e) {
                        throw Gi("unsafe")
                    };
                    i.has("$sanitize") && (a = i.get("$sanitize"));
                    var s = o()
                        , l = {};
                    return l[Yi.HTML] = o(s),
                        l[Yi.CSS] = o(s),
                        l[Yi.URL] = o(s),
                        l[Yi.JS] = o(s),
                        l[Yi.RESOURCE_URL] = o(l[Yi.URL]),
                    {
                        trustAs: function (e, t) {
                            var i = l.hasOwnProperty(e) ? l[e] : null;
                            if (!i)
                                throw Gi("icontext", e, t);
                            if (null === t || t === n || "" === t)
                                return t;
                            if ("string" != typeof t)
                                throw Gi("itype", e);
                            return new i(t)
                        },
                        getTrusted: function (i, o) {
                            if (null === o || o === n || "" === o)
                                return o;
                            if ((u = l.hasOwnProperty(i) ? l[i] : null) && o instanceof u)
                                return o.$$unwrapTrustedValue();
                            if (i === Yi.RESOURCE_URL) {
                                var s, c, u = zt(o.toString()), d = !1;
                                for (s = 0,
                                    c = e.length; s < c; s++)
                                    if (r(e[s], u)) {
                                        d = !0;
                                        break
                                    }
                                if (d)
                                    for (s = 0,
                                        c = t.length; s < c; s++)
                                        if (r(t[s], u)) {
                                            d = !1;
                                            break
                                        }
                                if (d)
                                    return o;
                                throw Gi("insecurl", o.toString())
                            }
                            if (i === Yi.HTML)
                                return a(o);
                            throw Gi("unsafe")
                        },
                        valueOf: function (e) {
                            return e instanceof s ? e.$$unwrapTrustedValue() : e
                        }
                    }
                }
                ]
        }
        function Nt() {
            var e = !0;
            this.enabled = function (t) {
                return arguments.length && (e = !!t),
                    e
            }
                ,
                this.$get = ["$parse", "$sceDelegate", function (t, n) {
                    if (e && 8 > Cn)
                        throw Gi("iequirks");
                    var i = A(Yi);
                    i.isEnabled = function () {
                        return e
                    }
                        ,
                        i.trustAs = n.trustAs,
                        i.getTrusted = n.getTrusted,
                        i.valueOf = n.valueOf,
                        e || (i.trustAs = i.getTrusted = function (e, t) {
                            return t
                        }
                            ,
                            i.valueOf = m),
                        i.parseAs = function (e, n) {
                            var r = t(n);
                            return r.literal && r.constant ? r : t(n, function (t) {
                                return i.getTrusted(e, t)
                            })
                        }
                        ;
                    var r = i.parseAs
                        , a = i.getTrusted
                        , s = i.trustAs;
                    return o(Yi, function (e, t) {
                        var n = En(t);
                        i[oe("parse_as_" + n)] = function (t) {
                            return r(e, t)
                        }
                            ,
                            i[oe("get_trusted_" + n)] = function (t) {
                                return a(e, t)
                            }
                            ,
                            i[oe("trust_as_" + n)] = function (t) {
                                return s(e, t)
                            }
                    }),
                        i
                }
                ]
        }
        function jt() {
            this.$get = ["$window", "$document", function (e, t) {
                var n, i = {}, r = p((/android (\d+)/.exec(En((e.navigator || {}).userAgent)) || [])[1]), o = /Boxee/i.test((e.navigator || {}).userAgent), a = t[0] || {}, s = /^(Moz|webkit|ms)(?=[A-Z])/, l = a.body && a.body.style, c = !1, u = !1;
                if (l) {
                    for (var d in l)
                        if (c = s.exec(d)) {
                            n = (n = c[0]).substr(0, 1).toUpperCase() + n.substr(1);
                            break
                        }
                    n || (n = "WebkitOpacity" in l && "webkit"),
                        c = !!("transition" in l || n + "Transition" in l),
                        u = !!("animation" in l || n + "Animation" in l),
                        !r || c && u || (c = $(l.webkitTransition),
                            u = $(l.webkitAnimation))
                }
                return {
                    history: !(!e.history || !e.history.pushState || 4 > r || o),
                    hasEvent: function (e) {
                        if ("input" === e && 11 >= Cn)
                            return !1;
                        if (v(i[e])) {
                            var t = a.createElement("div");
                            i[e] = "on" + e in t
                        }
                        return i[e]
                    },
                    csp: Hn(),
                    vendorPrefix: n,
                    transitions: c,
                    animations: u,
                    android: r
                }
            }
            ]
        }
        function Ft() {
            this.$get = ["$templateCache", "$http", "$q", function (e, t, n) {
                function i(r, o) {
                    i.totalPendingRequests++;
                    var a = t.defaults && t.defaults.transformResponse;
                    return Fn(a) ? a = a.filter(function (e) {
                        return e !== He
                    }) : a === He && (a = null),
                        t.get(r, {
                            cache: e,
                            transformResponse: a
                        }).finally(function () {
                            i.totalPendingRequests--
                        }).then(function (t) {
                            return e.put(r, t.data),
                                t.data
                        }, function (e) {
                            if (!o)
                                throw Ci("tpload", r, e.status, e.statusText);
                            return n.reject(e)
                        })
                }
                return i.totalPendingRequests = 0,
                    i
            }
            ]
        }
        function Bt() {
            this.$get = ["$rootScope", "$browser", "$location", function (e, t, n) {
                return {
                    findBindings: function (e, t, n) {
                        var i = [];
                        return o(e = e.getElementsByClassName("ng-binding"), function (e) {
                            var r = Un.element(e).data("$binding");
                            r && o(r, function (r) {
                                n ? new RegExp("(^|\\s)" + zn(t) + "(\\s|\\||$)").test(r) && i.push(e) : -1 != r.indexOf(t) && i.push(e)
                            })
                        }),
                            i
                    },
                    findModels: function (e, t, n) {
                        for (var i = ["ng-", "data-ng-", "ng\\:"], r = 0; r < i.length; ++r) {
                            var o = e.querySelectorAll("[" + i[r] + "model" + (n ? "=" : "*=") + '"' + t + '"]');
                            if (o.length)
                                return o
                        }
                    },
                    getLocation: function () {
                        return n.url()
                    },
                    setLocation: function (t) {
                        t !== n.url() && (n.url(t),
                            e.$digest())
                    },
                    whenStable: function (e) {
                        t.notifyWhenNoOutstandingRequests(e)
                    }
                }
            }
            ]
        }
        function Vt() {
            this.$get = ["$rootScope", "$browser", "$q", "$$q", "$exceptionHandler", function (e, t, n, i, r) {
                function o(o, s, l) {
                    x(o) || (l = s,
                        s = o,
                        o = f);
                    var c, u = On.call(arguments, 3), d = y(l) && !l, p = (d ? i : n).defer(), h = p.promise;
                    return c = t.defer(function () {
                        try {
                            p.resolve(o.apply(null, u))
                        } catch (e) {
                            p.reject(e),
                                r(e)
                        } finally {
                            delete a[h.$$timeoutId]
                        }
                        d || e.$apply()
                    }, s),
                        h.$$timeoutId = c,
                        a[c] = p,
                        h
                }
                var a = {};
                return o.cancel = function (e) {
                    return !!(e && e.$$timeoutId in a) && (a[e.$$timeoutId].reject("canceled"),
                        delete a[e.$$timeoutId],
                        t.defer.cancel(e.$$timeoutId))
                }
                    ,
                    o
            }
            ]
        }
        function zt(e) {
            return Cn && (Xi.setAttribute("href", e),
                e = Xi.href),
                Xi.setAttribute("href", e),
            {
                href: Xi.href,
                protocol: Xi.protocol ? Xi.protocol.replace(/:$/, "") : "",
                host: Xi.host,
                search: Xi.search ? Xi.search.replace(/^\?/, "") : "",
                hash: Xi.hash ? Xi.hash.replace(/^#/, "") : "",
                hostname: Xi.hostname,
                port: Xi.port,
                pathname: "/" === Xi.pathname.charAt(0) ? Xi.pathname : "/" + Xi.pathname
            }
        }
        function Ht(e) {
            return (e = $(e) ? zt(e) : e).protocol === Ji.protocol && e.host === Ji.host
        }
        function Wt() {
            this.$get = g(e)
        }
        function qt(e) {
            function t(e) {
                try {
                    return decodeURIComponent(e)
                } catch (t) {
                    return e
                }
            }
            var i = e[0] || {}
                , r = {}
                , o = "";
            return function () {
                var e, a, s, l, c;
                if ((e = i.cookie || "") !== o)
                    for (e = (o = e).split("; "),
                        r = {},
                        s = 0; s < e.length; s++)
                        0 < (l = (a = e[s]).indexOf("=")) && (c = t(a.substring(0, l)),
                            r[c] === n && (r[c] = t(a.substring(l + 1))));
                return r
            }
        }
        function Gt() {
            this.$get = qt
        }
        function Yt(e) {
            function t(n, i) {
                if (b(n)) {
                    var r = {};
                    return o(n, function (e, n) {
                        r[n] = t(n, e)
                    }),
                        r
                }
                return e.factory(n + "Filter", i)
            }
            this.register = t,
                this.$get = ["$injector", function (e) {
                    return function (t) {
                        return e.get(t + "Filter")
                    }
                }
                ],
                t("currency", Qt),
                t("date", ln),
                t("filter", Xt),
                t("json", cn),
                t("limitTo", un),
                t("lowercase", tr),
                t("number", Zt),
                t("orderBy", dn),
                t("uppercase", nr)
        }
        function Xt() {
            return function (e, t, n) {
                if (!Fn(e)) {
                    if (null == e)
                        return e;
                    throw i("filter")("notarray", e)
                }
                var r;
                switch (Kt(t)) {
                    case "function":
                        break;
                    case "boolean":
                    case "null":
                    case "number":
                    case "string":
                        r = !0;
                    case "object":
                        t = function (e, t, n) {
                            var i = b(e) && "$" in e;
                            return !0 === t ? t = _ : x(t) || (t = function (e, t) {
                                return !v(e) && (null === e || null === t ? e === t : (!(n = b(t)) && (n = b(e)) && (n = !(x((n = e).toString) && n.toString !== Object.prototype.toString)),
                                    !n && (e = En("" + e),
                                        t = En("" + t),
                                        -1 !== e.indexOf(t))));
                                var n
                            }
                            ),
                                function (r) {
                                    return i && !b(r) ? Jt(r, e.$, t, !1) : Jt(r, e, t, n)
                                }
                        }(t, n, r);
                        break;
                    default:
                        return e
                }
                return e.filter(t)
            }
        }
        function Jt(e, t, n, i, r) {
            var o = Kt(e)
                , a = Kt(t);
            if ("string" === a && "!" === t.charAt(0))
                return !Jt(e, t.substring(1), n, i);
            if (Fn(e))
                return e.some(function (e) {
                    return Jt(e, t, n, i)
                });
            switch (o) {
                case "object":
                    var s;
                    if (i) {
                        for (s in e)
                            if ("$" !== s.charAt(0) && Jt(e[s], t, n, !0))
                                return !0;
                        return !r && Jt(e, t, n, !1)
                    }
                    if ("object" === a) {
                        for (s in t)
                            if (!x(r = t[s]) && !v(r) && !Jt((o = "$" === s) ? e : e[s], r, n, o, o))
                                return !1;
                        return !0
                    }
                    return n(e, t);
                case "function":
                    return !1;
                default:
                    return n(e, t)
            }
        }
        function Kt(e) {
            return null === e ? "null" : typeof e
        }
        function Qt(e) {
            var t = e.NUMBER_FORMATS;
            return function (e, n, i) {
                return v(n) && (n = t.CURRENCY_SYM),
                    v(i) && (i = t.PATTERNS[1].maxFrac),
                    null == e ? e : en(e, t.PATTERNS[1], t.GROUP_SEP, t.DECIMAL_SEP, i).replace(/\u00A4/g, n)
            }
        }
        function Zt(e) {
            var t = e.NUMBER_FORMATS;
            return function (e, n) {
                return null == e ? e : en(e, t.PATTERNS[0], t.GROUP_SEP, t.DECIMAL_SEP, n)
            }
        }
        function en(e, t, n, i, r) {
            if (b(e))
                return "";
            var o = 0 > e;
            if (!(u = 1 / 0 === (e = Math.abs(e))) && !isFinite(e))
                return "";
            var a = e + ""
                , s = ""
                , l = !1
                , c = [];
            (u && (s = "∞"),
                u || -1 === a.indexOf("e")) || ((d = a.match(/([\d\.]+)e(-?)(\d+)/)) && "-" == d[2] && d[3] > r + 1 ? e = 0 : (s = a,
                    l = !0));
            if (u || l)
                0 < r && 1 > e && (s = e.toFixed(r),
                    e = parseFloat(s));
            else {
                u = (a.split(Ki)[1] || "").length,
                    v(r) && (r = Math.min(Math.max(t.minFrac, u), t.maxFrac));
                a = (u = ("" + (e = +(Math.round(+(e.toString() + "e" + r)).toString() + "e" + -r))).split(Ki))[0];
                var u = u[1] || ""
                    , d = 0
                    , p = t.lgSize
                    , h = t.gSize;
                if (a.length >= p + h)
                    for (d = a.length - p,
                        l = 0; l < d; l++)
                        0 == (d - l) % h && 0 !== l && (s += n),
                            s += a.charAt(l);
                for (l = d; l < a.length; l++)
                    0 == (a.length - l) % p && 0 !== l && (s += n),
                        s += a.charAt(l);
                for (; u.length < r;)
                    u += "0";
                r && "0" !== r && (s += i + u.substr(0, r))
            }
            return 0 === e && (o = !1),
                c.push(o ? t.negPre : t.posPre, s, o ? t.negSuf : t.posSuf),
                c.join("")
        }
        function tn(e, t, n) {
            var i = "";
            for (0 > e && (i = "-",
                e = -e),
                e = "" + e; e.length < t;)
                e = "0" + e;
            return n && (e = e.substr(e.length - t)),
                i + e
        }
        function nn(e, t, n, i) {
            return n = n || 0,
                function (r) {
                    return r = r["get" + e](),
                        (0 < n || r > -n) && (r += n),
                        0 === r && -12 == n && (r = 12),
                        tn(r, t, i)
                }
        }
        function rn(e, t) {
            return function (n, i) {
                var r = n["get" + e]();
                return i[Mn(t ? "SHORT" + e : e)][r]
            }
        }
        function on(e) {
            var t = new Date(e, 0, 1).getDay();
            return new Date(e, 0, (4 >= t ? 5 : 12) - t)
        }
        function an(e) {
            return function (t) {
                var n = on(t.getFullYear());
                return t = +new Date(t.getFullYear(), t.getMonth(), t.getDate() + (4 - t.getDay())) - +n,
                    tn(t = 1 + Math.round(t / 6048e5), e)
            }
        }
        function sn(e, t) {
            return 0 >= e.getFullYear() ? t.ERAS[0] : t.ERAS[1]
        }
        function ln(e) {
            function t(e) {
                var t;
                if (t = e.match(n)) {
                    e = new Date(0);
                    var i = 0
                        , r = 0
                        , o = t[8] ? e.setUTCFullYear : e.setFullYear
                        , a = t[8] ? e.setUTCHours : e.setHours;
                    t[9] && (i = p(t[9] + t[10]),
                        r = p(t[9] + t[11])),
                        o.call(e, p(t[1]), p(t[2]) - 1, p(t[3])),
                        i = p(t[4] || 0) - i,
                        r = p(t[5] || 0) - r,
                        o = p(t[6] || 0),
                        t = Math.round(1e3 * parseFloat("0." + (t[7] || 0))),
                        a.call(e, i, r, o, t)
                }
                return e
            }
            var n = /^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
            return function (n, i, r) {
                var a, s, l = "", c = [];
                if (i = i || "mediumDate",
                    i = e.DATETIME_FORMATS[i] || i,
                    $(n) && (n = er.test(n) ? p(n) : t(n)),
                    S(n) && (n = new Date(n)),
                    !C(n) || !isFinite(n.getTime()))
                    return n;
                for (; i;)
                    (s = Zi.exec(i)) ? i = (c = R(c, s, 1)).pop() : (c.push(i),
                        i = null);
                var u = n.getTimezoneOffset();
                return r && (u = F(r, n.getTimezoneOffset()),
                    n = B(n, r, !0)),
                    o(c, function (t) {
                        a = Qi[t],
                            l += a ? a(n, e.DATETIME_FORMATS, u) : t.replace(/(^'|'$)/g, "").replace(/''/g, "'")
                    }),
                    l
            }
        }
        function cn() {
            return function (e, t) {
                return v(t) && (t = 2),
                    N(e, t)
            }
        }
        function un() {
            return function (e, t, n) {
                return t = 1 / 0 === Math.abs(Number(t)) ? Number(t) : p(t),
                    isNaN(t) ? e : (S(e) && (e = e.toString()),
                        Fn(e) || $(e) ? (n = 0 > (n = !n || isNaN(n) ? 0 : p(n)) && n >= -e.length ? e.length + n : n,
                            0 <= t ? e.slice(n, n + t) : 0 === n ? e.slice(t, e.length) : e.slice(Math.max(0, n + t), n)) : e)
            }
        }
        function dn(e) {
            return function (t, n, i) {
                function o(e, t) {
                    return t ? function (t, n) {
                        return e(n, t)
                    }
                        : e
                }
                function a(e) {
                    switch (typeof e) {
                        case "number":
                        case "boolean":
                        case "string":
                            return !0;
                        default:
                            return !1
                    }
                }
                function s(e) {
                    return null === e ? "null" : "function" == typeof e.valueOf && a(e = e.valueOf()) || "function" == typeof e.toString && a(e = e.toString()) ? e : ""
                }
                function l(e, t) {
                    var n = typeof e
                        , i = typeof t;
                    return n === i && "object" === n && (e = s(e),
                        t = s(t)),
                        n === i ? ("string" === n && (e = e.toLowerCase(),
                            t = t.toLowerCase()),
                            e === t ? 0 : e < t ? -1 : 1) : n < i ? -1 : 1
                }
                return r(t) ? (0 === (n = Fn(n) ? n : [n]).length && (n = ["+"]),
                    n = n.map(function (t) {
                        var n = !1
                            , i = t || m;
                        if ($(t)) {
                            if ("+" != t.charAt(0) && "-" != t.charAt(0) || (n = "-" == t.charAt(0),
                                t = t.substring(1)),
                                "" === t)
                                return o(l, n);
                            if ((i = e(t)).constant) {
                                var r = i();
                                return o(function (e, t) {
                                    return l(e[r], t[r])
                                }, n)
                            }
                        }
                        return o(function (e, t) {
                            return l(i(e), i(t))
                        }, n)
                    }),
                    On.call(t).sort(o(function (e, t) {
                        for (var i = 0; i < n.length; i++) {
                            var r = n[i](e, t);
                            if (0 !== r)
                                return r
                        }
                        return 0
                    }, i))) : t
            }
        }
        function pn(e) {
            return x(e) && (e = {
                link: e
            }),
                e.restrict = e.restrict || "AC",
                g(e)
        }
        function hn(e, t, i, r, a) {
            var s = this
                , l = []
                , c = s.$$parentForm = e.parent().controller("form") || or;
            s.$error = {},
                s.$$success = {},
                s.$pending = n,
                s.$name = a(t.name || t.ngForm || "")(i),
                s.$dirty = !1,
                s.$pristine = !0,
                s.$valid = !0,
                s.$invalid = !1,
                s.$submitted = !1,
                c.$addControl(s),
                s.$rollbackViewValue = function () {
                    o(l, function (e) {
                        e.$rollbackViewValue()
                    })
                }
                ,
                s.$commitViewValue = function () {
                    o(l, function (e) {
                        e.$commitViewValue()
                    })
                }
                ,
                s.$addControl = function (e) {
                    te(e.$name, "input"),
                        l.push(e),
                        e.$name && (s[e.$name] = e)
                }
                ,
                s.$$renameControl = function (e, t) {
                    var n = e.$name;
                    s[n] === e && delete s[n],
                        s[t] = e,
                        e.$name = t
                }
                ,
                s.$removeControl = function (e) {
                    e.$name && s[e.$name] === e && delete s[e.$name],
                        o(s.$pending, function (t, n) {
                            s.$setValidity(n, null, e)
                        }),
                        o(s.$error, function (t, n) {
                            s.$setValidity(n, null, e)
                        }),
                        o(s.$$success, function (t, n) {
                            s.$setValidity(n, null, e)
                        }),
                        O(l, e)
                }
                ,
                $n({
                    ctrl: this,
                    $element: e,
                    set: function (e, t, n) {
                        var i = e[t];
                        i ? -1 === i.indexOf(n) && i.push(n) : e[t] = [n]
                    },
                    unset: function (e, t, n) {
                        var i = e[t];
                        i && (O(i, n),
                            0 === i.length && delete e[t])
                    },
                    parentForm: c,
                    $animate: r
                }),
                s.$setDirty = function () {
                    r.removeClass(e, Fr),
                        r.addClass(e, Br),
                        s.$dirty = !0,
                        s.$pristine = !1,
                        c.$setDirty()
                }
                ,
                s.$setPristine = function () {
                    r.setClass(e, Fr, Br + " ng-submitted"),
                        s.$dirty = !1,
                        s.$pristine = !0,
                        s.$submitted = !1,
                        o(l, function (e) {
                            e.$setPristine()
                        })
                }
                ,
                s.$setUntouched = function () {
                    o(l, function (e) {
                        e.$setUntouched()
                    })
                }
                ,
                s.$setSubmitted = function () {
                    r.addClass(e, "ng-submitted"),
                        s.$submitted = !0,
                        c.$setSubmitted()
                }
        }
        function fn(e) {
            e.$formatters.push(function (t) {
                return e.$isEmpty(t) ? t : t.toString()
            })
        }
        function mn(e, t, n, i, r, o) {
            var a = En(t[0].type);
            if (!r.android) {
                var s = !1;
                t.on("compositionstart", function (e) {
                    s = !0
                }),
                    t.on("compositionend", function () {
                        s = !1,
                            l()
                    })
            }
            var l = function (e) {
                if (c && (o.defer.cancel(c),
                    c = null),
                    !s) {
                    var r = t.val();
                    e = e && e.type,
                        "password" === a || n.ngTrim && "false" === n.ngTrim || (r = Vn(r)),
                        (i.$viewValue !== r || "" === r && i.$$hasNativeValidators) && i.$setViewValue(r, e)
                }
            };
            if (r.hasEvent("input"))
                t.on("input", l);
            else {
                var c, u = function (e, t, n) {
                    c || (c = o.defer(function () {
                        c = null,
                            t && t.value === n || l(e)
                    }))
                };
                t.on("keydown", function (e) {
                    var t = e.keyCode;
                    91 === t || 15 < t && 19 > t || 37 <= t && 40 >= t || u(e, this, this.value)
                }),
                    r.hasEvent("paste") && t.on("paste cut", u)
            }
            t.on("change", l),
                i.$render = function () {
                    t.val(i.$isEmpty(i.$viewValue) ? "" : i.$viewValue)
                }
        }
        function gn(e, t) {
            return function (n, i) {
                var r, a;
                if (C(n))
                    return n;
                if ($(n)) {
                    if ('"' == n.charAt(0) && '"' == n.charAt(n.length - 1) && (n = n.substring(1, n.length - 1)),
                        cr.test(n))
                        return new Date(n);
                    if (e.lastIndex = 0,
                        r = e.exec(n))
                        return r.shift(),
                            a = i ? {
                                yyyy: i.getFullYear(),
                                MM: i.getMonth() + 1,
                                dd: i.getDate(),
                                HH: i.getHours(),
                                mm: i.getMinutes(),
                                ss: i.getSeconds(),
                                sss: i.getMilliseconds() / 1e3
                            } : {
                                    yyyy: 1970,
                                    MM: 1,
                                    dd: 1,
                                    HH: 0,
                                    mm: 0,
                                    ss: 0,
                                    sss: 0
                                },
                            o(r, function (e, n) {
                                n < t.length && (a[t[n]] = +e)
                            }),
                            new Date(a.yyyy, a.MM - 1, a.dd, a.HH, a.mm, a.ss || 0, 1e3 * a.sss || 0)
                }
                return NaN
            }
        }
        function vn(e, t, i, r) {
            return function (o, a, s, l, c, u, d) {
                function p(e) {
                    return e && !(e.getTime && e.getTime() != e.getTime())
                }
                function h(e) {
                    return y(e) ? C(e) ? e : i(e) : n
                }
                yn(o, a, s, l),
                    mn(0, a, s, l, c, u);
                var f, m, g, b = l && l.$options && l.$options.timezone;
                (l.$$parserName = e,
                    l.$parsers.push(function (e) {
                        return l.$isEmpty(e) ? null : t.test(e) ? (e = i(e, f),
                            b && (e = B(e, b)),
                            e) : n
                    }),
                    l.$formatters.push(function (e) {
                        if (e && !C(e))
                            throw zr("datefmt", e);
                        return p(e) ? ((f = e) && b && (f = B(f, b, !0)),
                            d("date")(e, r, b)) : (f = null,
                                "")
                    }),
                    y(s.min) || s.ngMin) && (l.$validators.min = function (e) {
                        return !p(e) || v(m) || i(e) >= m
                    }
                        ,
                        s.$observe("min", function (e) {
                            m = h(e),
                                l.$validate()
                        }));
                (y(s.max) || s.ngMax) && (l.$validators.max = function (e) {
                    return !p(e) || v(g) || i(e) <= g
                }
                    ,
                    s.$observe("max", function (e) {
                        g = h(e),
                            l.$validate()
                    }))
            }
        }
        function yn(e, t, i, r) {
            (r.$$hasNativeValidators = b(t[0].validity)) && r.$parsers.push(function (e) {
                var i = t.prop("validity") || {};
                return i.badInput && !i.typeMismatch ? n : e
            })
        }
        function bn(e, t, n, r, o) {
            if (y(r)) {
                if (!(e = e(r)).constant)
                    throw i("ngModel")("constexpr", n, r);
                return e(t)
            }
            return o
        }
        function wn(e, t) {
            return e = "ngClass" + e,
                ["$animate", function (n) {
                    function i(e, t) {
                        var n = []
                            , i = 0;
                        e: for (; i < e.length; i++) {
                            for (var r = e[i], o = 0; o < t.length; o++)
                                if (r == t[o])
                                    continue e;
                            n.push(r)
                        }
                        return n
                    }
                    function r(e) {
                        var t = [];
                        return Fn(e) ? (o(e, function (e) {
                            t = t.concat(r(e))
                        }),
                            t) : $(e) ? e.split(" ") : b(e) ? (o(e, function (e, n) {
                                e && (t = t.concat(n.split(" ")))
                            }),
                                t) : e
                    }
                    return {
                        restrict: "AC",
                        link: function (a, s, l) {
                            function c(e, t) {
                                var n = s.data("$classCounts") || re()
                                    , i = [];
                                return o(e, function (e) {
                                    (0 < t || n[e]) && (n[e] = (n[e] || 0) + t,
                                        n[e] === +(0 < t) && i.push(e))
                                }),
                                    s.data("$classCounts", n),
                                    i.join(" ")
                            }
                            function u(e) {
                                if (!0 === t || a.$index % 2 === t) {
                                    var o = r(e || []);
                                    if (d) {
                                        if (!_(e, d)) {
                                            var u = r(d);
                                            p = i(o, u),
                                                o = i(u, o),
                                                p = c(p, 1),
                                                o = c(o, -1);
                                            p && p.length && n.addClass(s, p),
                                                o && o.length && n.removeClass(s, o)
                                        }
                                    } else {
                                        var p = c(o, 1);
                                        l.$addClass(p)
                                    }
                                }
                                d = A(e)
                            }
                            var d;
                            a.$watch(l[e], u, !0),
                                l.$observe("class", function (t) {
                                    u(a.$eval(l[e]))
                                }),
                                "ngClass" !== e && a.$watch("$index", function (n, i) {
                                    var o = 1 & n;
                                    if (o !== (1 & i)) {
                                        var s = r(a.$eval(l[e]));
                                        o === t ? (o = c(s, 1),
                                            l.$addClass(o)) : (o = c(s, -1),
                                                l.$removeClass(o))
                                    }
                                })
                        }
                    }
                }
                ]
        }
        function $n(e) {
            function t(e, t) {
                t && !a[e] ? (u.addClass(o, e),
                    a[e] = !0) : !t && a[e] && (u.removeClass(o, e),
                        a[e] = !1)
            }
            function i(e, n) {
                e = e ? "-" + Q(e, "-") : "",
                    t(Nr + e, !0 === n),
                    t(jr + e, !1 === n)
            }
            var r = e.ctrl
                , o = e.$element
                , a = {}
                , s = e.set
                , l = e.unset
                , c = e.parentForm
                , u = e.$animate;
            a[jr] = !(a[Nr] = o.hasClass(Nr)),
                r.$setValidity = function (e, o, a) {
                    o === n ? (r.$pending || (r.$pending = {}),
                        s(r.$pending, e, a)) : (r.$pending && l(r.$pending, e, a),
                            Sn(r.$pending) && (r.$pending = n)),
                        E(o) ? o ? (l(r.$error, e, a),
                            s(r.$$success, e, a)) : (s(r.$error, e, a),
                                l(r.$$success, e, a)) : (l(r.$error, e, a),
                                    l(r.$$success, e, a)),
                        r.$pending ? (t(Vr, !0),
                            r.$valid = r.$invalid = n,
                            i("", null)) : (t(Vr, !1),
                                r.$valid = Sn(r.$error),
                                r.$invalid = !r.$valid,
                                i("", r.$valid)),
                        i(e, o = r.$pending && r.$pending[e] ? n : !r.$error[e] && (!!r.$$success[e] || null)),
                        c.$setValidity(e, o, r)
                }
        }
        function Sn(e) {
            if (e)
                for (var t in e)
                    return !1;
            return !0
        }
        var Cn, xn, Tn, kn, Pn = /^\/(.+)\/([a-z]*)$/, En = function (e) {
            return $(e) ? e.toLowerCase() : e
        }, In = Object.prototype.hasOwnProperty, Mn = function (e) {
            return $(e) ? e.toUpperCase() : e
        }, On = [].slice, Dn = [].splice, An = [].push, _n = Object.prototype.toString, Rn = Object.getPrototypeOf, Ln = i("ng"), Un = e.angular || (e.angular = {}), Nn = 0;
        Cn = t.documentMode,
            f.$inject = [],
            m.$inject = [];
        var jn, Fn = Array.isArray, Bn = /^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/, Vn = function (e) {
            return $(e) ? e.trim() : e
        }, zn = function (e) {
            return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g, "\\$1").replace(/\x08/g, "\\x08")
        }, Hn = function () {
            if (y(Hn.isActive_))
                return Hn.isActive_;
            var e = !(!t.querySelector("[ng-csp]") && !t.querySelector("[data-ng-csp]"));
            if (!e)
                try {
                    new Function("")
                } catch (t) {
                    e = !0
                }
            return Hn.isActive_ = e
        }, Wn = function () {
            if (y(Wn.name_))
                return Wn.name_;
            var e, n, i, r, o = qn.length;
            for (n = 0; n < o; ++n)
                if (i = qn[n],
                    e = t.querySelector("[" + i.replace(":", "\\:") + "jq]")) {
                    r = e.getAttribute(i + "jq");
                    break
                }
            return Wn.name_ = r
        }, qn = ["ng-", "data-ng-", "ng:", "x-ng-"], Gn = /[A-Z]/g, Yn = !1, Xn = 1, Jn = 3, Kn = {
            full: "1.4.0-rc.2",
            major: 1,
            minor: 4,
            dot: 0,
            codeName: "rocket-zambonimation"
        };
        le.expando = "ng339";
        var Qn = le.cache = {}
            , Zn = 1;
        le._data = function (e) {
            return this.cache[e[this.expando]] || {}
        }
            ;
        var ei = /([\:\-\_]+(.))/g
            , ti = /^moz([A-Z])/
            , ni = {
                mouseleave: "mouseout",
                mouseenter: "mouseover"
            }
            , ii = i("jqLite")
            , ri = /^<(\w+)\s*\/?>(?:<\/\1>|)$/
            , oi = /<|&#?\w+;/
            , ai = /<([\w:]+)/
            , si = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi
            , li = {
                option: [1, '<select multiple="multiple">', "</select>"],
                thead: [1, "<table>", "</table>"],
                col: [2, "<table><colgroup>", "</colgroup></table>"],
                tr: [2, "<table><tbody>", "</tbody></table>"],
                td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                _default: [0, "", ""]
            };
        li.optgroup = li.option,
            li.tbody = li.tfoot = li.colgroup = li.caption = li.thead,
            li.th = li.td;
        var ci = le.prototype = {
            ready: function (n) {
                function i() {
                    r || (r = !0,
                        n())
                }
                var r = !1;
                "complete" === t.readyState ? setTimeout(i) : (this.on("DOMContentLoaded", i),
                    le(e).on("load", i))
            },
            toString: function () {
                var e = [];
                return o(this, function (t) {
                    e.push("" + t)
                }),
                    "[" + e.join(", ") + "]"
            },
            eq: function (e) {
                return xn(0 <= e ? this[e] : this[this.length + e])
            },
            length: 0,
            push: An,
            sort: [].sort,
            splice: [].splice
        }
            , ui = {};
        o("multiple selected checked disabled readOnly required open".split(" "), function (e) {
            ui[En(e)] = e
        });
        var di = {};
        o("input select option textarea button form details".split(" "), function (e) {
            di[e] = !0
        });
        var pi = {
            ngMinlength: "minlength",
            ngMaxlength: "maxlength",
            ngMin: "min",
            ngMax: "max",
            ngPattern: "pattern"
        };
        o({
            data: fe,
            removeData: pe
        }, function (e, t) {
            le[t] = e
        }),
            o({
                data: fe,
                inheritedData: we,
                scope: function (e) {
                    return xn.data(e, "$scope") || we(e.parentNode || e, ["$isolateScope", "$scope"])
                },
                isolateScope: function (e) {
                    return xn.data(e, "$isolateScope") || xn.data(e, "$isolateScopeNoTemplate")
                },
                controller: be,
                injector: function (e) {
                    return we(e, "$injector")
                },
                removeAttr: function (e, t) {
                    e.removeAttribute(t)
                },
                hasClass: me,
                css: function (e, t, n) {
                    if (t = oe(t),
                        !y(n))
                        return e.style[t];
                    e.style[t] = n
                },
                attr: function (e, t, i) {
                    var r = e.nodeType;
                    if (r !== Jn && 2 !== r && 8 !== r)
                        if (r = En(t),
                            ui[r]) {
                            if (!y(i))
                                return e[t] || (e.attributes.getNamedItem(t) || f).specified ? r : n;
                            i ? (e[t] = !0,
                                e.setAttribute(t, r)) : (e[t] = !1,
                                    e.removeAttribute(r))
                        } else if (y(i))
                            e.setAttribute(t, i);
                        else if (e.getAttribute)
                            return null === (e = e.getAttribute(t, 2)) ? n : e
                },
                prop: function (e, t, n) {
                    if (!y(n))
                        return e[t];
                    e[t] = n
                },
                text: function () {
                    function e(e, t) {
                        if (v(t)) {
                            var n = e.nodeType;
                            return n === Xn || n === Jn ? e.textContent : ""
                        }
                        e.textContent = t
                    }
                    return e.$dv = "",
                        e
                }(),
                val: function (e, t) {
                    if (v(t)) {
                        if (e.multiple && "select" === M(e)) {
                            var n = [];
                            return o(e.options, function (e) {
                                e.selected && n.push(e.value || e.text)
                            }),
                                0 === n.length ? null : n
                        }
                        return e.value
                    }
                    e.value = t
                },
                html: function (e, t) {
                    if (v(t))
                        return e.innerHTML;
                    ue(e, !0),
                        e.innerHTML = t
                },
                empty: $e
            }, function (e, t) {
                le.prototype[t] = function (t, i) {
                    var r, o, a = this.length;
                    if (e !== $e && (2 == e.length && e !== me && e !== be ? t : i) === n) {
                        if (b(t)) {
                            for (r = 0; r < a; r++)
                                if (e === fe)
                                    e(this[r], t);
                                else
                                    for (o in t)
                                        e(this[r], o, t[o]);
                            return this
                        }
                        for (a = (r = e.$dv) === n ? Math.min(a, 1) : a,
                            o = 0; o < a; o++) {
                            var s = e(this[o], t, i);
                            r = r ? r + s : s
                        }
                        return r
                    }
                    for (r = 0; r < a; r++)
                        e(this[r], t, i);
                    return this
                }
            }),
            o({
                removeData: pe,
                on: function e(t, n, i, r) {
                    if (y(r))
                        throw ii("onargs");
                    if (ae(t)) {
                        r = (a = he(t, !0)).events;
                        var o = a.handle;
                        o || (o = a.handle = function (e, t) {
                            var n = function (n, i) {
                                n.isDefaultPrevented = function () {
                                    return n.defaultPrevented
                                }
                                    ;
                                var r = t[i || n.type]
                                    , o = r ? r.length : 0;
                                if (o) {
                                    if (v(n.immediatePropagationStopped)) {
                                        var a = n.stopImmediatePropagation;
                                        n.stopImmediatePropagation = function () {
                                            n.immediatePropagationStopped = !0,
                                                n.stopPropagation && n.stopPropagation(),
                                                a && a.call(n)
                                        }
                                    }
                                    n.isImmediatePropagationStopped = function () {
                                        return !0 === n.immediatePropagationStopped
                                    }
                                        ,
                                        1 < o && (r = A(r));
                                    for (var s = 0; s < o; s++)
                                        n.isImmediatePropagationStopped() || r[s].call(e, n)
                                }
                            };
                            return n.elem = e,
                                n
                        }(t, r));
                        for (var a, s = (a = 0 <= n.indexOf(" ") ? n.split(" ") : [n]).length; s--;) {
                            var l = r[n = a[s]];
                            l || (r[n] = [],
                                "mouseenter" === n || "mouseleave" === n ? e(t, ni[n], function (e) {
                                    var t = e.relatedTarget;
                                    t && (t === this || this.contains(t)) || o(e, n)
                                }) : "$destroy" !== n && t.addEventListener(n, o, !1),
                                l = r[n]),
                                l.push(i)
                        }
                    }
                },
                off: de,
                one: function (e, t, n) {
                    (e = xn(e)).on(t, function i() {
                        e.off(t, n),
                            e.off(t, i)
                    }),
                        e.on(t, n)
                },
                replaceWith: function (e, t) {
                    var n, i = e.parentNode;
                    ue(e),
                        o(new le(t), function (t) {
                            n ? i.insertBefore(t, n.nextSibling) : i.replaceChild(t, e),
                                n = t
                        })
                },
                children: function (e) {
                    var t = [];
                    return o(e.childNodes, function (e) {
                        e.nodeType === Xn && t.push(e)
                    }),
                        t
                },
                contents: function (e) {
                    return e.contentDocument || e.childNodes || []
                },
                append: function (e, t) {
                    if ((n = e.nodeType) === Xn || 11 === n)
                        for (var n = 0, i = (t = new le(t)).length; n < i; n++)
                            e.appendChild(t[n])
                },
                prepend: function (e, t) {
                    if (e.nodeType === Xn) {
                        var n = e.firstChild;
                        o(new le(t), function (t) {
                            e.insertBefore(t, n)
                        })
                    }
                },
                wrap: function (e, t) {
                    t = xn(t).eq(0).clone()[0];
                    var n = e.parentNode;
                    n && n.replaceChild(t, e),
                        t.appendChild(e)
                },
                remove: Se,
                detach: function (e) {
                    Se(e, !0)
                },
                after: function (e, t) {
                    for (var n = e, i = e.parentNode, r = 0, o = (t = new le(t)).length; r < o; r++) {
                        var a = t[r];
                        i.insertBefore(a, n.nextSibling),
                            n = a
                    }
                },
                addClass: ve,
                removeClass: ge,
                toggleClass: function (e, t, n) {
                    t && o(t.split(" "), function (t) {
                        var i = n;
                        v(i) && (i = !me(e, t)),
                            (i ? ve : ge)(e, t)
                    })
                },
                parent: function (e) {
                    return (e = e.parentNode) && 11 !== e.nodeType ? e : null
                },
                next: function (e) {
                    return e.nextElementSibling
                },
                find: function (e, t) {
                    return e.getElementsByTagName ? e.getElementsByTagName(t) : []
                },
                clone: ce,
                triggerHandler: function (e, t, n) {
                    var i, r, a = t.type || t, s = he(e);
                    (s = (s = s && s.events) && s[a]) && (i = {
                        preventDefault: function () {
                            this.defaultPrevented = !0
                        },
                        isDefaultPrevented: function () {
                            return !0 === this.defaultPrevented
                        },
                        stopImmediatePropagation: function () {
                            this.immediatePropagationStopped = !0
                        },
                        isImmediatePropagationStopped: function () {
                            return !0 === this.immediatePropagationStopped
                        },
                        stopPropagation: f,
                        type: a,
                        target: e
                    },
                        t.type && (i = u(i, t)),
                        t = A(s),
                        r = n ? [i].concat(n) : [i],
                        o(t, function (t) {
                            i.isImmediatePropagationStopped() || t.apply(e, r)
                        }))
                }
            }, function (e, t) {
                le.prototype[t] = function (t, n, i) {
                    for (var r, o = 0, a = this.length; o < a; o++)
                        v(r) ? y(r = e(this[o], t, n, i)) && (r = xn(r)) : ye(r, e(this[o], t, n, i));
                    return y(r) ? r : this
                }
                    ,
                    le.prototype.bind = le.prototype.on,
                    le.prototype.unbind = le.prototype.off
            }),
            ke.prototype = {
                put: function (e, t) {
                    this[Te(e, this.nextUid)] = t
                },
                get: function (e) {
                    return this[Te(e, this.nextUid)]
                },
                remove: function (e) {
                    var t = this[e = Te(e, this.nextUid)];
                    return delete this[e],
                        t
                }
            };
        var hi = [function () {
            this.$get = [function () {
                return ke
            }
            ]
        }
        ]
            , fi = /^function\s*[^\(]*\(\s*([^\)]*)\)/m
            , mi = /,/
            , gi = /^\s*(_?)(\S+?)\1\s*$/
            , vi = /((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm
            , yi = i("$injector");
        Pe.$$annotate = function (e, t, n) {
            var i, r;
            if ("function" == typeof e) {
                if (!(i = e.$inject)) {
                    if (i = [],
                        e.length) {
                        if (t)
                            throw $(n) && n || (n = e.name || ((r = (r = e).toString().replace(vi, "").match(fi)) ? "function(" + (r[1] || "").replace(/[\s\r\n]+/, " ") + ")" : "fn")),
                            yi("strictdi", n);
                        o((t = (t = e.toString().replace(vi, "")).match(fi))[1].split(mi), function (e) {
                            e.replace(gi, function (e, t, n) {
                                i.push(n)
                            })
                        })
                    }
                    e.$inject = i
                }
            } else
                Fn(e) ? (ee(e[t = e.length - 1], "fn"),
                    i = e.slice(0, t)) : ee(e, "fn", !0);
            return i
        }
            ;
        var bi = i("$animate")
            , wi = function () {
                this.$get = ["$q", "$$rAF", function (e, t) {
                    function n() { }
                    return n.all = f,
                        n.chain = f,
                        n.prototype = {
                            end: f,
                            cancel: f,
                            resume: f,
                            pause: f,
                            complete: f,
                            then: function (n, i) {
                                return e(function (e) {
                                    t(function () {
                                        e()
                                    })
                                }).then(n, i)
                            }
                        },
                        n
                }
                ]
            }
            , $i = function () {
                var e = new ke
                    , t = [];
                this.$get = ["$$AnimateRunner", "$rootScope", function (n, i) {
                    function r(n, r, a) {
                        var s = e.get(n);
                        s || (e.put(n, s = {}),
                            t.push(n)),
                            r && o(r.split(" "), function (e) {
                                e && (s[e] = !0)
                            }),
                            a && o(a.split(" "), function (e) {
                                e && (s[e] = !1)
                            }),
                            1 < t.length || i.$$postDigest(function () {
                                o(t, function (t) {
                                    var n = e.get(t);
                                    if (n) {
                                        var i = function (e) {
                                            $(e) && (e = e.split(" "));
                                            var t = re();
                                            return o(e, function (e) {
                                                e.length && (t[e] = !0)
                                            }),
                                                t
                                        }(t.attr("class"))
                                            , r = ""
                                            , a = "";
                                        o(n, function (e, t) {
                                            e !== !!i[t] && (e ? r += (r.length ? " " : "") + t : a += (a.length ? " " : "") + t)
                                        }),
                                            o(t, function (e) {
                                                r && ve(e, r),
                                                    a && ge(e, a)
                                            }),
                                            e.remove(t)
                                    }
                                }),
                                    t.length = 0
                            })
                    }
                    return {
                        enabled: f,
                        on: f,
                        off: f,
                        pin: f,
                        push: function (e, t, i, o) {
                            return o && o(),
                                (i = i || {}).from && e.css(i.from),
                                i.to && e.css(i.to),
                                (i.addClass || i.removeClass) && r(e, i.addClass, i.removeClass),
                                new n
                        }
                    }
                }
                ]
            }
            , Si = ["$provide", function (e) {
                var t = this;
                this.$$registeredAnimations = Object.create(null),
                    this.register = function (n, i) {
                        if (n && "." !== n.charAt(0))
                            throw bi("notcsel", n);
                        var r = n + "-animation";
                        t.$$registeredAnimations[n.substr(1)] = r,
                            e.factory(r, i)
                    }
                    ,
                    this.classNameFilter = function (e) {
                        if (1 === arguments.length && (this.$$classNameFilter = e instanceof RegExp ? e : null) && /(\s+|\/)ng-animate(\s+|\/)/.test(this.$$classNameFilter.toString()))
                            throw bi("nongcls", "ng-animate");
                        return this.$$classNameFilter
                    }
                    ,
                    this.$get = ["$$animateQueue", function (e) {
                        function t(e, t, n) {
                            if (n) {
                                var i;
                                e: {
                                    for (i = 0; i < n.length; i++) {
                                        var r = n[i];
                                        if (1 === r.nodeType) {
                                            i = r;
                                            break e
                                        }
                                    }
                                    i = void 0
                                }
                                !i || i.parentNode || i.previousElementSibling || (n = null)
                            }
                            n ? n.after(e) : t.prepend(e)
                        }
                        return {
                            on: e.on,
                            off: e.off,
                            pin: e.pin,
                            enabled: e.enabled,
                            cancel: function (e) {
                                e.end && e.end()
                            },
                            enter: function (n, i, r, o) {
                                return t(n, i = i || r.parent(), r),
                                    e.push(n, "enter", o)
                            },
                            move: function (n, i, r, o) {
                                return t(n, i = i || r.parent(), r),
                                    e.push(n, "move", o)
                            },
                            leave: function (t, n) {
                                return e.push(t, "leave", n, function () {
                                    t.remove()
                                })
                            },
                            addClass: function (t, n, i) {
                                return (i = i || {}).addClass = Ie(i.addclass, n),
                                    e.push(t, "addClass", i)
                            },
                            removeClass: function (t, n, i) {
                                return (i = i || {}).removeClass = Ie(i.removeClass, n),
                                    e.push(t, "removeClass", i)
                            },
                            setClass: function (t, n, i, r) {
                                return (r = r || {}).addClass = Ie(r.addClass, n),
                                    r.removeClass = Ie(r.removeClass, i),
                                    e.push(t, "setClass", r)
                            },
                            animate: function (t, n, i, r, o) {
                                return (o = o || {}).from = o.from ? u(o.from, n) : n,
                                    o.to = o.to ? u(o.to, i) : i,
                                    o.tempClasses = Ie(o.tempClasses, r || "ng-inline-animate"),
                                    e.push(t, "animate", o)
                            }
                        }
                    }
                    ]
            }
            ]
            , Ci = i("$compile");
        _e.$inject = ["$provide", "$$sanitizeUriProvider"];
        var xi = /^((?:x|data)[\:\-_])/i
            , Ti = i("$controller")
            , ki = /^(\S+)(\s+as\s+(\w+))?$/
            , Pi = "application/json"
            , Ei = {
                "Content-Type": Pi + ";charset=utf-8"
            }
            , Ii = /^\[|^\{(?!\{)/
            , Mi = {
                "[": /]$/,
                "{": /}$/
            }
            , Oi = /^\)\]\}',?\n/
            , Di = Un.$interpolateMinErr = i("$interpolate");
        Di.throwNoconcat = function (e) {
            throw Di("noconcat", e)
        }
            ,
            Di.interr = function (e, t) {
                return Di("interr", e, t.toString())
            }
            ;
        var Ai = /^([^\?#]*)(\?([^#]*))?(#(.*))?$/
            , _i = {
                http: 80,
                https: 443,
                ftp: 21
            }
            , Ri = i("$location")
            , Li = {
                $$html5: !1,
                $$replace: !1,
                absUrl: ut("$$absUrl"),
                url: function (e) {
                    if (v(e))
                        return this.$$url;
                    var t = Ai.exec(e);
                    return (t[1] || "" === e) && this.path(decodeURIComponent(t[1])),
                        (t[2] || t[1] || "" === e) && this.search(t[3] || ""),
                        this.hash(t[5] || ""),
                        this
                },
                protocol: ut("$$protocol"),
                host: ut("$$host"),
                port: ut("$$port"),
                path: dt("$$path", function (e) {
                    return "/" == (e = null !== e ? e.toString() : "").charAt(0) ? e : "/" + e
                }),
                search: function (e, t) {
                    switch (arguments.length) {
                        case 0:
                            return this.$$search;
                        case 1:
                            if ($(e) || S(e))
                                e = e.toString(),
                                    this.$$search = H(e);
                            else {
                                if (!b(e))
                                    throw Ri("isrcharg");
                                o(e = D(e, {}), function (t, n) {
                                    null == t && delete e[n]
                                }),
                                    this.$$search = e
                            }
                            break;
                        default:
                            v(t) || null === t ? delete this.$$search[e] : this.$$search[e] = t
                    }
                    return this.$$compose(),
                        this
                },
                hash: dt("$$hash", function (e) {
                    return null !== e ? e.toString() : ""
                }),
                replace: function () {
                    return this.$$replace = !0,
                        this
                }
            };
        o([ct, lt, st], function (e) {
            e.prototype = Object.create(Li),
                e.prototype.state = function (t) {
                    if (!arguments.length)
                        return this.$$state;
                    if (e !== st || !this.$$html5)
                        throw Ri("nostate");
                    return this.$$state = v(t) ? null : t,
                        this
                }
        });
        var Ui = i("$parse")
            , Ni = Function.prototype.call
            , ji = Function.prototype.apply
            , Fi = Function.prototype.bind
            , Bi = re();
        o("+ - * / % === !== == != < > <= >= && || ! = |".split(" "), function (e) {
            Bi[e] = !0
        });
        var Vi = {
            n: "\n",
            f: "\f",
            r: "\r",
            t: "\t",
            v: "\v",
            "'": "'",
            '"': '"'
        }
            , zi = function (e) {
                this.options = e
            };
        zi.prototype = {
            constructor: zi,
            lex: function (e) {
                for (this.text = e,
                    this.index = 0,
                    this.tokens = []; this.index < this.text.length;)
                    if ('"' === (e = this.text.charAt(this.index)) || "'" === e)
                        this.readString(e);
                    else if (this.isNumber(e) || "." === e && this.isNumber(this.peek()))
                        this.readNumber();
                    else if (this.isIdent(e))
                        this.readIdent();
                    else if (this.is(e, "(){}[].,;:?"))
                        this.tokens.push({
                            index: this.index,
                            text: e
                        }),
                            this.index++;
                    else if (this.isWhitespace(e))
                        this.index++;
                    else {
                        var t = e + this.peek()
                            , n = t + this.peek(2)
                            , i = Bi[t]
                            , r = Bi[n];
                        Bi[e] || i || r ? (e = r ? n : i ? t : e,
                            this.tokens.push({
                                index: this.index,
                                text: e,
                                operator: !0
                            }),
                            this.index += e.length) : this.throwError("Unexpected next character ", this.index, this.index + 1)
                    }
                return this.tokens
            },
            is: function (e, t) {
                return -1 !== t.indexOf(e)
            },
            peek: function (e) {
                return e = e || 1,
                    this.index + e < this.text.length && this.text.charAt(this.index + e)
            },
            isNumber: function (e) {
                return "0" <= e && "9" >= e && "string" == typeof e
            },
            isWhitespace: function (e) {
                return " " === e || "\r" === e || "\t" === e || "\n" === e || "\v" === e || " " === e
            },
            isIdent: function (e) {
                return "a" <= e && "z" >= e || "A" <= e && "Z" >= e || "_" === e || "$" === e
            },
            isExpOperator: function (e) {
                return "-" === e || "+" === e || this.isNumber(e)
            },
            throwError: function (e, t, n) {
                throw n = n || this.index,
                t = y(t) ? "s " + t + "-" + this.index + " [" + this.text.substring(t, n) + "]" : " " + n,
                Ui("lexerr", e, t, this.text)
            },
            readNumber: function () {
                for (var e = "", t = this.index; this.index < this.text.length;) {
                    var n = En(this.text.charAt(this.index));
                    if ("." == n || this.isNumber(n))
                        e += n;
                    else {
                        var i = this.peek();
                        if ("e" == n && this.isExpOperator(i))
                            e += n;
                        else if (this.isExpOperator(n) && i && this.isNumber(i) && "e" == e.charAt(e.length - 1))
                            e += n;
                        else {
                            if (!this.isExpOperator(n) || i && this.isNumber(i) || "e" != e.charAt(e.length - 1))
                                break;
                            this.throwError("Invalid exponent")
                        }
                    }
                    this.index++
                }
                this.tokens.push({
                    index: t,
                    text: e,
                    constant: !0,
                    value: Number(e)
                })
            },
            readIdent: function () {
                for (var e = this.index; this.index < this.text.length;) {
                    var t = this.text.charAt(this.index);
                    if (!this.isIdent(t) && !this.isNumber(t))
                        break;
                    this.index++
                }
                this.tokens.push({
                    index: e,
                    text: this.text.slice(e, this.index),
                    identifier: !0
                })
            },
            readString: function (e) {
                var t = this.index;
                this.index++;
                for (var n = "", i = e, r = !1; this.index < this.text.length;) {
                    var o = this.text.charAt(this.index);
                    i = i + o;
                    if (r)
                        "u" === o ? ((r = this.text.substring(this.index + 1, this.index + 5)).match(/[\da-f]{4}/i) || this.throwError("Invalid unicode escape [\\u" + r + "]"),
                            this.index += 4,
                            n += String.fromCharCode(parseInt(r, 16))) : n += Vi[o] || o,
                            r = !1;
                    else if ("\\" === o)
                        r = !0;
                    else {
                        if (o === e)
                            return this.index++,
                                void this.tokens.push({
                                    index: t,
                                    text: i,
                                    constant: !0,
                                    value: n
                                });
                        n += o
                    }
                    this.index++
                }
                this.throwError("Unterminated quote", t)
            }
        };
        var Hi = function (e, t) {
            this.lexer = e,
                this.options = t
        };
        Hi.Program = "Program",
            Hi.ExpressionStatement = "ExpressionStatement",
            Hi.AssignmentExpression = "AssignmentExpression",
            Hi.ConditionalExpression = "ConditionalExpression",
            Hi.LogicalExpression = "LogicalExpression",
            Hi.BinaryExpression = "BinaryExpression",
            Hi.UnaryExpression = "UnaryExpression",
            Hi.CallExpression = "CallExpression",
            Hi.MemberExpression = "MemberExpression",
            Hi.Identifier = "Identifier",
            Hi.Literal = "Literal",
            Hi.ArrayExpression = "ArrayExpression",
            Hi.Property = "Property",
            Hi.ObjectExpression = "ObjectExpression",
            Hi.ThisExpression = "ThisExpression",
            Hi.NGValueParameter = "NGValueParameter",
            Hi.prototype = {
                ast: function (e) {
                    return this.text = e,
                        this.tokens = this.lexer.lex(e),
                        e = this.program(),
                        0 !== this.tokens.length && this.throwError("is an unexpected token", this.tokens[0]),
                        e
                },
                program: function () {
                    for (var e = []; ;)
                        if (0 < this.tokens.length && !this.peek("}", ")", ";", "]") && e.push(this.expressionStatement()),
                            !this.expect(";"))
                            return {
                                type: Hi.Program,
                                body: e
                            }
                },
                expressionStatement: function () {
                    return {
                        type: Hi.ExpressionStatement,
                        expression: this.filterChain()
                    }
                },
                filterChain: function () {
                    for (var e = this.expression(); this.expect("|");)
                        e = this.filter(e);
                    return e
                },
                expression: function () {
                    return this.assignment()
                },
                assignment: function () {
                    var e = this.ternary();
                    return this.expect("=") && (e = {
                        type: Hi.AssignmentExpression,
                        left: e,
                        right: this.assignment(),
                        operator: "="
                    }),
                        e
                },
                ternary: function () {
                    var e, t, n = this.logicalOR();
                    return this.expect("?") && (e = this.expression(),
                        this.consume(":")) ? (t = this.expression(),
                        {
                            type: Hi.ConditionalExpression,
                            test: n,
                            alternate: e,
                            consequent: t
                        }) : n
                },
                logicalOR: function () {
                    for (var e = this.logicalAND(); this.expect("||");)
                        e = {
                            type: Hi.LogicalExpression,
                            operator: "||",
                            left: e,
                            right: this.logicalAND()
                        };
                    return e
                },
                logicalAND: function () {
                    for (var e = this.equality(); this.expect("&&");)
                        e = {
                            type: Hi.LogicalExpression,
                            operator: "&&",
                            left: e,
                            right: this.equality()
                        };
                    return e
                },
                equality: function () {
                    for (var e, t = this.relational(); e = this.expect("==", "!=", "===", "!==");)
                        t = {
                            type: Hi.BinaryExpression,
                            operator: e.text,
                            left: t,
                            right: this.relational()
                        };
                    return t
                },
                relational: function () {
                    for (var e, t = this.additive(); e = this.expect("<", ">", "<=", ">=");)
                        t = {
                            type: Hi.BinaryExpression,
                            operator: e.text,
                            left: t,
                            right: this.additive()
                        };
                    return t
                },
                additive: function () {
                    for (var e, t = this.multiplicative(); e = this.expect("+", "-");)
                        t = {
                            type: Hi.BinaryExpression,
                            operator: e.text,
                            left: t,
                            right: this.multiplicative()
                        };
                    return t
                },
                multiplicative: function () {
                    for (var e, t = this.unary(); e = this.expect("*", "/", "%");)
                        t = {
                            type: Hi.BinaryExpression,
                            operator: e.text,
                            left: t,
                            right: this.unary()
                        };
                    return t
                },
                unary: function () {
                    var e;
                    return (e = this.expect("+", "-", "!")) ? {
                        type: Hi.UnaryExpression,
                        operator: e.text,
                        prefix: !0,
                        argument: this.unary()
                    } : this.primary()
                },
                primary: function () {
                    var e, t;
                    for (this.expect("(") ? (e = this.filterChain(),
                        this.consume(")")) : this.expect("[") ? e = this.arrayDeclaration() : this.expect("{") ? e = this.object() : this.constants.hasOwnProperty(this.peek().text) ? e = D(this.constants[this.consume().text]) : this.peek().identifier ? e = this.identifier() : this.peek().constant ? e = this.constant() : this.throwError("not a primary expression", this.peek()); t = this.expect("(", "[", ".");)
                        "(" === t.text ? (e = {
                            type: Hi.CallExpression,
                            callee: e,
                            arguments: this.parseArguments()
                        },
                            this.consume(")")) : "[" === t.text ? (e = {
                                type: Hi.MemberExpression,
                                object: e,
                                property: this.expression(),
                                computed: !0
                            },
                                this.consume("]")) : "." === t.text ? e = {
                                    type: Hi.MemberExpression,
                                    object: e,
                                    property: this.identifier(),
                                    computed: !1
                                } : this.throwError("IMPOSSIBLE");
                    return e
                },
                filter: function (e) {
                    e = [e];
                    for (var t = {
                        type: Hi.CallExpression,
                        callee: this.identifier(),
                        arguments: e,
                        filter: !0
                    }; this.expect(":");)
                        e.push(this.expression());
                    return t
                },
                parseArguments: function () {
                    var e = [];
                    if (")" !== this.peekToken().text)
                        do {
                            e.push(this.expression())
                        } while (this.expect(",")); return e
                },
                identifier: function () {
                    var e = this.consume();
                    return e.identifier || this.throwError("is not a valid identifier", e),
                    {
                        type: Hi.Identifier,
                        name: e.text
                    }
                },
                constant: function () {
                    return {
                        type: Hi.Literal,
                        value: this.consume().value
                    }
                },
                arrayDeclaration: function () {
                    var e = [];
                    if ("]" !== this.peekToken().text)
                        do {
                            if (this.peek("]"))
                                break;
                            e.push(this.expression())
                        } while (this.expect(",")); return this.consume("]"),
                        {
                            type: Hi.ArrayExpression,
                            elements: e
                        }
                },
                object: function () {
                    var e, t = [];
                    if ("}" !== this.peekToken().text)
                        do {
                            if (this.peek("}"))
                                break;
                            e = {
                                type: Hi.Property,
                                kind: "init"
                            },
                                this.peek().constant ? e.key = this.constant() : this.peek().identifier ? e.key = this.identifier() : this.throwError("invalid key", this.peek()),
                                this.consume(":"),
                                e.value = this.expression(),
                                t.push(e)
                        } while (this.expect(",")); return this.consume("}"),
                        {
                            type: Hi.ObjectExpression,
                            properties: t
                        }
                },
                throwError: function (e, t) {
                    throw Ui("syntax", t.text, e, t.index + 1, this.text, this.text.substring(t.index))
                },
                consume: function (e) {
                    if (0 === this.tokens.length)
                        throw Ui("ueoe", this.text);
                    var t = this.expect(e);
                    return t || this.throwError("is unexpected, expecting [" + e + "]", this.peek()),
                        t
                },
                peekToken: function () {
                    if (0 === this.tokens.length)
                        throw Ui("ueoe", this.text);
                    return this.tokens[0]
                },
                peek: function (e, t, n, i) {
                    return this.peekAhead(0, e, t, n, i)
                },
                peekAhead: function (e, t, n, i, r) {
                    if (this.tokens.length > e) {
                        var o = (e = this.tokens[e]).text;
                        if (o === t || o === n || o === i || o === r || !(t || n || i || r))
                            return e
                    }
                    return !1
                },
                expect: function (e, t, n, i) {
                    return !!(e = this.peek(e, t, n, i)) && (this.tokens.shift(),
                        e)
                },
                constants: {
                    true: {
                        type: Hi.Literal,
                        value: !0
                    },
                    false: {
                        type: Hi.Literal,
                        value: !1
                    },
                    null: {
                        type: Hi.Literal,
                        value: null
                    },
                    undefined: {
                        type: Hi.Literal,
                        value: n
                    },
                    this: {
                        type: Hi.ThisExpression
                    }
                }
            },
            xt.prototype = {
                compile: function (e, t) {
                    var i = this
                        , r = this.astBuilder.ast(e);
                    this.state = {
                        nextId: 0,
                        filters: {},
                        expensiveChecks: t,
                        fn: {
                            vars: [],
                            body: [],
                            own: {}
                        },
                        assign: {
                            vars: [],
                            body: [],
                            own: {}
                        },
                        inputs: []
                    },
                        bt(r, i.$filter);
                    var a, s = "";
                    return this.stage = "assign",
                        (a = St(r)) && (this.state.computing = "assign",
                            s = this.nextId(),
                            this.recurse(a, s),
                            s = "fn.assign=" + this.generateFunction("assign", "s,v,l")),
                        a = wt(r.body),
                        i.stage = "inputs",
                        o(a, function (e, t) {
                            var n = "fn" + t;
                            i.state[n] = {
                                vars: [],
                                body: [],
                                own: {}
                            },
                                i.state.computing = n;
                            var r = i.nextId();
                            i.recurse(e, r),
                                i.return_(r),
                                i.state.inputs.push(n),
                                e.watchId = t
                        }),
                        this.state.computing = "fn",
                        this.stage = "main",
                        this.recurse(r),
                        s = '"' + this.USE + " " + this.STRICT + '";\n' + this.filterPrefix() + "var fn=" + this.generateFunction("fn", "s,l,a,i") + s + this.watchFns() + "return fn;",
                        s = new Function("$filter", "ensureSafeMemberName", "ensureSafeObject", "ensureSafeFunction", "ifDefined", "plus", "text", s)(this.$filter, ft, mt, gt, vt, yt, e),
                        this.state = this.stage = n,
                        s.literal = Ct(r),
                        s.constant = r.constant,
                        s
                },
                USE: "use",
                STRICT: "strict",
                watchFns: function () {
                    var e = []
                        , t = this.state.inputs
                        , n = this;
                    return o(t, function (t) {
                        e.push("var " + t + "=" + n.generateFunction(t, "s"))
                    }),
                        t.length && e.push("fn.inputs=[" + t.join(",") + "];"),
                        e.join("")
                },
                generateFunction: function (e, t) {
                    return "function(" + t + "){" + this.varsPrefix(e) + this.body(e) + "};"
                },
                filterPrefix: function () {
                    var e = []
                        , t = this;
                    return o(this.state.filters, function (n, i) {
                        e.push(n + "=$filter(" + t.escape(i) + ")")
                    }),
                        e.length ? "var " + e.join(",") + ";" : ""
                },
                varsPrefix: function (e) {
                    return this.state[e].vars.length ? "var " + this.state[e].vars.join(",") + ";" : ""
                },
                body: function (e) {
                    return this.state[e].body.join("")
                },
                recurse: function (e, t, i, r, a, s) {
                    var l, c, u, d, p = this;
                    if (r = r || f,
                        !s && y(e.watchId))
                        t = t || this.nextId(),
                            this.if_("i", this.lazyAssign(t, this.computedMember("i", e.watchId)), this.lazyRecurse(e, t, i, r, a, !0));
                    else
                        switch (e.type) {
                            case Hi.Program:
                                o(e.body, function (t, i) {
                                    p.recurse(t.expression, n, n, function (e) {
                                        c = e
                                    }),
                                        i !== e.body.length - 1 ? p.current().body.push(c, ";") : p.return_(c)
                                });
                                break;
                            case Hi.Literal:
                                d = this.escape(e.value),
                                    this.assign(t, d),
                                    r(d);
                                break;
                            case Hi.UnaryExpression:
                                this.recurse(e.argument, n, n, function (e) {
                                    c = e
                                }),
                                    d = e.operator + "(" + this.ifDefined(c, 0) + ")",
                                    this.assign(t, d),
                                    r(d);
                                break;
                            case Hi.BinaryExpression:
                                this.recurse(e.left, n, n, function (e) {
                                    l = e
                                }),
                                    this.recurse(e.right, n, n, function (e) {
                                        c = e
                                    }),
                                    d = "+" === e.operator ? this.plus(l, c) : "-" === e.operator ? this.ifDefined(l, 0) + e.operator + this.ifDefined(c, 0) : "(" + l + ")" + e.operator + "(" + c + ")",
                                    this.assign(t, d),
                                    r(d);
                                break;
                            case Hi.LogicalExpression:
                                t = t || this.nextId(),
                                    p.recurse(e.left, t),
                                    p.if_("&&" === e.operator ? t : p.not(t), p.lazyRecurse(e.right, t)),
                                    r(t);
                                break;
                            case Hi.ConditionalExpression:
                                t = t || this.nextId(),
                                    p.recurse(e.test, t),
                                    p.if_(t, p.lazyRecurse(e.alternate, t), p.lazyRecurse(e.consequent, t)),
                                    r(t);
                                break;
                            case Hi.Identifier:
                                t = t || this.nextId(),
                                    i && (i.context = "inputs" === p.stage ? "s" : this.assign(this.nextId(), this.getHasOwnProperty("l", e.name) + "?l:s"),
                                        i.computed = !1,
                                        i.name = e.name),
                                    ft(e.name),
                                    p.if_("inputs" === p.stage || p.not(p.getHasOwnProperty("l", e.name)), function () {
                                        p.if_("inputs" === p.stage || "s", function () {
                                            a && 1 !== a && p.if_(p.not(p.nonComputedMember("s", e.name)), p.lazyAssign(p.nonComputedMember("s", e.name), "{}")),
                                                p.assign(t, p.nonComputedMember("s", e.name))
                                        })
                                    }, t && p.lazyAssign(t, p.nonComputedMember("l", e.name))),
                                    (p.state.expensiveChecks || Pt(e.name)) && p.addEnsureSafeObject(t),
                                    r(t);
                                break;
                            case Hi.MemberExpression:
                                l = i && (i.context = this.nextId()) || this.nextId(),
                                    t = t || this.nextId(),
                                    p.recurse(e.object, l, n, function () {
                                        p.if_(p.notNull(l), function () {
                                            e.computed ? (c = p.nextId(),
                                                p.recurse(e.property, c),
                                                p.addEnsureSafeMemberName(c),
                                                a && 1 !== a && p.if_(p.not(p.computedMember(l, c)), p.lazyAssign(p.computedMember(l, c), "{}")),
                                                d = p.ensureSafeObject(p.computedMember(l, c)),
                                                p.assign(t, d),
                                                i && (i.computed = !0,
                                                    i.name = c)) : (ft(e.property.name),
                                                        a && 1 !== a && p.if_(p.not(p.nonComputedMember(l, e.property.name)), p.lazyAssign(p.nonComputedMember(l, e.property.name), "{}")),
                                                        d = p.nonComputedMember(l, e.property.name),
                                                        (p.state.expensiveChecks || Pt(e.property.name)) && (d = p.ensureSafeObject(d)),
                                                        p.assign(t, d),
                                                        i && (i.computed = !1,
                                                            i.name = e.property.name)),
                                                r(t)
                                        })
                                    }, !!a);
                                break;
                            case Hi.CallExpression:
                                t = t || this.nextId(),
                                    e.filter ? (c = p.filter(e.callee.name),
                                        u = [],
                                        o(e.arguments, function (e) {
                                            var t = p.nextId();
                                            p.recurse(e, t),
                                                u.push(t)
                                        }),
                                        d = c + "(" + u.join(",") + ")",
                                        p.assign(t, d),
                                        r(t)) : (c = p.nextId(),
                                            l = {},
                                            u = [],
                                            p.recurse(e.callee, c, l, function () {
                                                p.if_(p.notNull(c), function () {
                                                    p.addEnsureSafeFunction(c),
                                                        o(e.arguments, function (e) {
                                                            p.recurse(e, p.nextId(), n, function (e) {
                                                                u.push(p.ensureSafeObject(e))
                                                            })
                                                        }),
                                                        l.name ? (p.state.expensiveChecks || p.addEnsureSafeObject(l.context),
                                                            d = p.member(l.context, l.name, l.computed) + "(" + u.join(",") + ")") : d = c + "(" + u.join(",") + ")",
                                                        d = p.ensureSafeObject(d),
                                                        p.assign(t, d),
                                                        r(t)
                                                })
                                            }));
                                break;
                            case Hi.AssignmentExpression:
                                if (c = this.nextId(),
                                    l = {},
                                    !$t(e.left))
                                    throw Ui("lval");
                                this.recurse(e.left, n, l, function () {
                                    p.if_(p.notNull(l.context), function () {
                                        p.recurse(e.right, c),
                                            p.addEnsureSafeObject(p.member(l.context, l.name, l.computed)),
                                            d = p.member(l.context, l.name, l.computed) + e.operator + c,
                                            p.assign(t, d),
                                            r(t || d)
                                    })
                                }, 1);
                                break;
                            case Hi.ArrayExpression:
                                u = [],
                                    o(e.elements, function (e) {
                                        p.recurse(e, p.nextId(), n, function (e) {
                                            u.push(e)
                                        })
                                    }),
                                    d = "[" + u.join(",") + "]",
                                    this.assign(t, d),
                                    r(d);
                                break;
                            case Hi.ObjectExpression:
                                u = [],
                                    o(e.properties, function (e) {
                                        p.recurse(e.value, p.nextId(), n, function (t) {
                                            u.push(p.escape(e.key.type === Hi.Identifier ? e.key.name : "" + e.key.value) + ":" + t)
                                        })
                                    }),
                                    d = "{" + u.join(",") + "}",
                                    this.assign(t, d),
                                    r(d);
                                break;
                            case Hi.ThisExpression:
                                this.assign(t, "s"),
                                    r("s");
                                break;
                            case Hi.NGValueParameter:
                                this.assign(t, "v"),
                                    r("v")
                        }
                },
                getHasOwnProperty: function (e, t) {
                    var n = e + "." + t
                        , i = this.current().own;
                    return i.hasOwnProperty(n) || (i[n] = this.nextId(!1, e + "&&(" + this.escape(t) + " in " + e + ")")),
                        i[n]
                },
                assign: function (e, t) {
                    if (e)
                        return this.current().body.push(e, "=", t, ";"),
                            e
                },
                filter: function (e) {
                    return this.state.filters.hasOwnProperty(e) || (this.state.filters[e] = this.nextId(!0)),
                        this.state.filters[e]
                },
                ifDefined: function (e, t) {
                    return "ifDefined(" + e + "," + this.escape(t) + ")"
                },
                plus: function (e, t) {
                    return "plus(" + e + "," + t + ")"
                },
                return_: function (e) {
                    this.current().body.push("return ", e, ";")
                },
                if_: function (e, t, n) {
                    if (!0 === e)
                        t();
                    else {
                        var i = this.current().body;
                        i.push("if(", e, "){"),
                            t(),
                            i.push("}"),
                            n && (i.push("else{"),
                                n(),
                                i.push("}"))
                    }
                },
                not: function (e) {
                    return "!(" + e + ")"
                },
                notNull: function (e) {
                    return e + "!=null"
                },
                nonComputedMember: function (e, t) {
                    return e + "." + t
                },
                computedMember: function (e, t) {
                    return e + "[" + t + "]"
                },
                member: function (e, t, n) {
                    return n ? this.computedMember(e, t) : this.nonComputedMember(e, t)
                },
                addEnsureSafeObject: function (e) {
                    this.current().body.push(this.ensureSafeObject(e), ";")
                },
                addEnsureSafeMemberName: function (e) {
                    this.current().body.push(this.ensureSafeMemberName(e), ";")
                },
                addEnsureSafeFunction: function (e) {
                    this.current().body.push(this.ensureSafeFunction(e), ";")
                },
                ensureSafeObject: function (e) {
                    return "ensureSafeObject(" + e + ",text)"
                },
                ensureSafeMemberName: function (e) {
                    return "ensureSafeMemberName(" + e + ",text)"
                },
                ensureSafeFunction: function (e) {
                    return "ensureSafeFunction(" + e + ",text)"
                },
                lazyRecurse: function (e, t, n, i, r, o) {
                    var a = this;
                    return function () {
                        a.recurse(e, t, n, i, r, o)
                    }
                },
                lazyAssign: function (e, t) {
                    var n = this;
                    return function () {
                        n.assign(e, t)
                    }
                },
                stringEscapeRegex: /[^ a-zA-Z0-9]/g,
                stringEscapeFn: function (e) {
                    return "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4)
                },
                escape: function (e) {
                    if ($(e))
                        return "'" + e.replace(this.stringEscapeRegex, this.stringEscapeFn) + "'";
                    if (S(e))
                        return e.toString();
                    if (!0 === e)
                        return "true";
                    if (!1 === e)
                        return "false";
                    if (null === e)
                        return "null";
                    if (void 0 === e)
                        return "undefined";
                    throw Ui("esc")
                },
                nextId: function (e, t) {
                    var n = "v" + this.state.nextId++;
                    return e || this.current().vars.push(n + (t ? "=" + t : "")),
                        n
                },
                current: function () {
                    return this.state[this.state.computing]
                }
            },
            Tt.prototype = {
                compile: function (e, t) {
                    var n, i, r, a = this, s = this.astBuilder.ast(e);
                    this.expression = e,
                        this.expensiveChecks = t,
                        bt(s, a.$filter),
                        (n = St(s)) && (i = this.recurse(n)),
                        (n = wt(s.body)) && (r = [],
                            o(n, function (e, t) {
                                var n = a.recurse(e);
                                e.input = n,
                                    r.push(n),
                                    e.watchId = t
                            }));
                    var l = [];
                    return o(s.body, function (e) {
                        l.push(a.recurse(e.expression))
                    }),
                        n = 0 === s.body.length ? function () { }
                            : 1 === s.body.length ? l[0] : function (e, t) {
                                var n;
                                return o(l, function (i) {
                                    n = i(e, t)
                                }),
                                    n
                            }
                        ,
                        i && (n.assign = function (e, t, n) {
                            return i(e, n, t)
                        }
                        ),
                        r && (n.inputs = r),
                        n.literal = Ct(s),
                        n.constant = s.constant,
                        n
                },
                recurse: function (e, t, i) {
                    var r, a, s, l = this;
                    if (e.input)
                        return this.inputs(e.input, e.watchId);
                    switch (e.type) {
                        case Hi.Literal:
                            return this.value(e.value, t);
                        case Hi.UnaryExpression:
                            return a = this.recurse(e.argument),
                                this["unary" + e.operator](a, t);
                        case Hi.BinaryExpression:
                        case Hi.LogicalExpression:
                            return r = this.recurse(e.left),
                                a = this.recurse(e.right),
                                this["binary" + e.operator](r, a, t);
                        case Hi.ConditionalExpression:
                            return this["ternary?:"](this.recurse(e.test), this.recurse(e.alternate), this.recurse(e.consequent), t);
                        case Hi.Identifier:
                            return ft(e.name, l.expression),
                                l.identifier(e.name, l.expensiveChecks || Pt(e.name), t, i, l.expression);
                        case Hi.MemberExpression:
                            return r = this.recurse(e.object, !1, !!i),
                                e.computed || (ft(e.property.name, l.expression),
                                    a = e.property.name),
                                e.computed && (a = this.recurse(e.property)),
                                e.computed ? this.computedMember(r, a, t, i, l.expression) : this.nonComputedMember(r, a, l.expensiveChecks, t, i, l.expression);
                        case Hi.CallExpression:
                            return s = [],
                                o(e.arguments, function (e) {
                                    s.push(l.recurse(e))
                                }),
                                e.filter && (a = this.$filter(e.callee.name)),
                                e.filter || (a = this.recurse(e.callee, !0)),
                                e.filter ? function (e, i, r, o) {
                                    for (var l = [], c = 0; c < s.length; ++c)
                                        l.push(s[c](e, i, r, o));
                                    return e = a.apply(n, l, o),
                                        t ? {
                                            context: n,
                                            name: n,
                                            value: e
                                        } : e
                                }
                                    : function (e, n, i, r) {
                                        var o, c = a(e, n, i, r);
                                        if (null != c.value) {
                                            mt(c.context, l.expression),
                                                gt(c.value, l.expression),
                                                o = [];
                                            for (var u = 0; u < s.length; ++u)
                                                o.push(mt(s[u](e, n, i, r), l.expression));
                                            o = mt(c.value.apply(c.context, o), l.expression)
                                        }
                                        return t ? {
                                            value: o
                                        } : o
                                    }
                                ;
                        case Hi.AssignmentExpression:
                            return r = this.recurse(e.left, !0, 1),
                                a = this.recurse(e.right),
                                function (e, n, i, o) {
                                    var s = r(e, n, i, o);
                                    return e = a(e, n, i, o),
                                        mt(s.value, l.expression),
                                        s.context[s.name] = e,
                                        t ? {
                                            value: e
                                        } : e
                                }
                                ;
                        case Hi.ArrayExpression:
                            return s = [],
                                o(e.elements, function (e) {
                                    s.push(l.recurse(e))
                                }),
                                function (e, n, i, r) {
                                    for (var o = [], a = 0; a < s.length; ++a)
                                        o.push(s[a](e, n, i, r));
                                    return t ? {
                                        value: o
                                    } : o
                                }
                                ;
                        case Hi.ObjectExpression:
                            return s = [],
                                o(e.properties, function (e) {
                                    s.push({
                                        key: e.key.type === Hi.Identifier ? e.key.name : "" + e.key.value,
                                        value: l.recurse(e.value)
                                    })
                                }),
                                function (e, n, i, r) {
                                    for (var o = {}, a = 0; a < s.length; ++a)
                                        o[s[a].key] = s[a].value(e, n, i, r);
                                    return t ? {
                                        value: o
                                    } : o
                                }
                                ;
                        case Hi.ThisExpression:
                            return function (e) {
                                return t ? {
                                    value: e
                                } : e
                            }
                                ;
                        case Hi.NGValueParameter:
                            return function (e, n, i, r) {
                                return t ? {
                                    value: i
                                } : i
                            }
                    }
                },
                "unary+": function (e, t) {
                    return function (n, i, r, o) {
                        return n = y(n = e(n, i, r, o)) ? +n : 0,
                            t ? {
                                value: n
                            } : n
                    }
                },
                "unary-": function (e, t) {
                    return function (n, i, r, o) {
                        return n = y(n = e(n, i, r, o)) ? -n : 0,
                            t ? {
                                value: n
                            } : n
                    }
                },
                "unary!": function (e, t) {
                    return function (n, i, r, o) {
                        return n = !e(n, i, r, o),
                            t ? {
                                value: n
                            } : n
                    }
                },
                "binary+": function (e, t, n) {
                    return function (i, r, o, a) {
                        var s = e(i, r, o, a);
                        return s = yt(s, i = t(i, r, o, a)),
                            n ? {
                                value: s
                            } : s
                    }
                },
                "binary-": function (e, t, n) {
                    return function (i, r, o, a) {
                        var s = e(i, r, o, a);
                        return i = t(i, r, o, a),
                            s = (y(s) ? s : 0) - (y(i) ? i : 0),
                            n ? {
                                value: s
                            } : s
                    }
                },
                "binary*": function (e, t, n) {
                    return function (i, r, o, a) {
                        return i = e(i, r, o, a) * t(i, r, o, a),
                            n ? {
                                value: i
                            } : i
                    }
                },
                "binary/": function (e, t, n) {
                    return function (i, r, o, a) {
                        return i = e(i, r, o, a) / t(i, r, o, a),
                            n ? {
                                value: i
                            } : i
                    }
                },
                "binary%": function (e, t, n) {
                    return function (i, r, o, a) {
                        return i = e(i, r, o, a) % t(i, r, o, a),
                            n ? {
                                value: i
                            } : i
                    }
                },
                "binary===": function (e, t, n) {
                    return function (i, r, o, a) {
                        return i = e(i, r, o, a) === t(i, r, o, a),
                            n ? {
                                value: i
                            } : i
                    }
                },
                "binary!==": function (e, t, n) {
                    return function (i, r, o, a) {
                        return i = e(i, r, o, a) !== t(i, r, o, a),
                            n ? {
                                value: i
                            } : i
                    }
                },
                "binary==": function (e, t, n) {
                    return function (i, r, o, a) {
                        return i = e(i, r, o, a) == t(i, r, o, a),
                            n ? {
                                value: i
                            } : i
                    }
                },
                "binary!=": function (e, t, n) {
                    return function (i, r, o, a) {
                        return i = e(i, r, o, a) != t(i, r, o, a),
                            n ? {
                                value: i
                            } : i
                    }
                },
                "binary<": function (e, t, n) {
                    return function (i, r, o, a) {
                        return i = e(i, r, o, a) < t(i, r, o, a),
                            n ? {
                                value: i
                            } : i
                    }
                },
                "binary>": function (e, t, n) {
                    return function (i, r, o, a) {
                        return i = e(i, r, o, a) > t(i, r, o, a),
                            n ? {
                                value: i
                            } : i
                    }
                },
                "binary<=": function (e, t, n) {
                    return function (i, r, o, a) {
                        return i = e(i, r, o, a) <= t(i, r, o, a),
                            n ? {
                                value: i
                            } : i
                    }
                },
                "binary>=": function (e, t, n) {
                    return function (i, r, o, a) {
                        return i = e(i, r, o, a) >= t(i, r, o, a),
                            n ? {
                                value: i
                            } : i
                    }
                },
                "binary&&": function (e, t, n) {
                    return function (i, r, o, a) {
                        return i = e(i, r, o, a) && t(i, r, o, a),
                            n ? {
                                value: i
                            } : i
                    }
                },
                "binary||": function (e, t, n) {
                    return function (i, r, o, a) {
                        return i = e(i, r, o, a) || t(i, r, o, a),
                            n ? {
                                value: i
                            } : i
                    }
                },
                "ternary?:": function (e, t, n, i) {
                    return function (r, o, a, s) {
                        return r = e(r, o, a, s) ? t(r, o, a, s) : n(r, o, a, s),
                            i ? {
                                value: r
                            } : r
                    }
                },
                value: function (e, t) {
                    return function () {
                        return t ? {
                            context: n,
                            name: n,
                            value: e
                        } : e
                    }
                },
                identifier: function (e, t, i, r, o) {
                    return function (a, s, l, c) {
                        return a = s && e in s ? s : a,
                            r && 1 !== r && a && !a[e] && (a[e] = {}),
                            s = a ? a[e] : n,
                            t && mt(s, o),
                            i ? {
                                context: a,
                                name: e,
                                value: s
                            } : s
                    }
                },
                computedMember: function (e, t, n, i, r) {
                    return function (o, a, s, l) {
                        var c, u, d = e(o, a, s, l);
                        return null != d && (ft(c = t(o, a, s, l), r),
                            i && 1 !== i && d && !d[c] && (d[c] = {}),
                            mt(u = d[c], r)),
                            n ? {
                                context: d,
                                name: c,
                                value: u
                            } : u
                    }
                },
                nonComputedMember: function (e, t, i, r, o, a) {
                    return function (s, l, c, u) {
                        return s = e(s, l, c, u),
                            o && 1 !== o && s && !s[t] && (s[t] = {}),
                            l = null != s ? s[t] : n,
                            (i || Pt(t)) && mt(l, a),
                            r ? {
                                context: s,
                                name: t,
                                value: l
                            } : l
                    }
                },
                inputs: function (e, t) {
                    return function (n, i, r, o) {
                        return o ? o[t] : e(n, i, r)
                    }
                }
            };
        var Wi = function (e, t, n) {
            this.lexer = e,
                this.$filter = t,
                this.options = n,
                this.ast = new Hi(this.lexer),
                this.astCompiler = n.csp ? new Tt(this.ast, t) : new xt(this.ast, t)
        };
        Wi.prototype = {
            constructor: Wi,
            parse: function (e) {
                return this.astCompiler.compile(e, this.options.expensiveChecks)
            }
        },
            re(),
            re();
        var qi = Object.prototype.valueOf
            , Gi = i("$sce")
            , Yi = {
                HTML: "html",
                CSS: "css",
                URL: "url",
                RESOURCE_URL: "resourceUrl",
                JS: "js"
            }
            , Xi = (Ci = i("$compile"),
                t.createElement("a"))
            , Ji = zt(e.location.href);
        qt.$inject = ["$document"],
            Yt.$inject = ["$provide"],
            Qt.$inject = ["$locale"],
            Zt.$inject = ["$locale"];
        var Ki = "."
            , Qi = {
                yyyy: nn("FullYear", 4),
                yy: nn("FullYear", 2, 0, !0),
                y: nn("FullYear", 1),
                MMMM: rn("Month"),
                MMM: rn("Month", !0),
                MM: nn("Month", 2, 1),
                M: nn("Month", 1, 1),
                dd: nn("Date", 2),
                d: nn("Date", 1),
                HH: nn("Hours", 2),
                H: nn("Hours", 1),
                hh: nn("Hours", 2, -12),
                h: nn("Hours", 1, -12),
                mm: nn("Minutes", 2),
                m: nn("Minutes", 1),
                ss: nn("Seconds", 2),
                s: nn("Seconds", 1),
                sss: nn("Milliseconds", 3),
                EEEE: rn("Day"),
                EEE: rn("Day", !0),
                a: function (e, t) {
                    return 12 > e.getHours() ? t.AMPMS[0] : t.AMPMS[1]
                },
                Z: function (e, t, n) {
                    return (0 <= (e = -1 * n) ? "+" : "") + (tn(Math[0 < e ? "floor" : "ceil"](e / 60), 2) + tn(Math.abs(e % 60), 2))
                },
                ww: an(2),
                w: an(1),
                G: sn,
                GG: sn,
                GGG: sn,
                GGGG: function (e, t) {
                    return 0 >= e.getFullYear() ? t.ERANAMES[0] : t.ERANAMES[1]
                }
            }
            , Zi = /((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/
            , er = /^\-?\d+$/;
        ln.$inject = ["$locale"];
        var tr = g(En)
            , nr = g(Mn);
        dn.$inject = ["$parse"];
        var ir = g({
            restrict: "E",
            compile: function (e, t) {
                if (!t.href && !t.xlinkHref)
                    return function (e, t) {
                        if ("a" === t[0].nodeName.toLowerCase()) {
                            var n = "[object SVGAnimatedString]" === _n.call(t.prop("href")) ? "xlink:href" : "href";
                            t.on("click", function (e) {
                                t.attr(n) || e.preventDefault()
                            })
                        }
                    }
            }
        })
            , rr = {};
        o(ui, function (e, t) {
            function n(e, n, r) {
                e.$watch(r[i], function (e) {
                    r.$set(t, !!e)
                })
            }
            if ("multiple" != e) {
                var i = Re("ng-" + t)
                    , r = n;
                "checked" === e && (r = function (e, t, r) {
                    r.ngModel !== r[i] && n(e, 0, r)
                }
                ),
                    rr[i] = function () {
                        return {
                            restrict: "A",
                            priority: 100,
                            link: r
                        }
                    }
            }
        }),
            o(pi, function (e, t) {
                rr[t] = function () {
                    return {
                        priority: 100,
                        link: function (e, n, i) {
                            "ngPattern" === t && "/" == i.ngPattern.charAt(0) && (n = i.ngPattern.match(Pn)) ? i.$set("ngPattern", new RegExp(n[1], n[2])) : e.$watch(i[t], function (e) {
                                i.$set(t, e)
                            })
                        }
                    }
                }
            }),
            o(["src", "srcset", "href"], function (e) {
                var t = Re("ng-" + e);
                rr[t] = function () {
                    return {
                        priority: 99,
                        link: function (n, i, r) {
                            var o = e
                                , a = e;
                            "href" === e && "[object SVGAnimatedString]" === _n.call(i.prop("href")) && (a = "xlinkHref",
                                r.$attr[a] = "xlink:href",
                                o = null),
                                r.$observe(t, function (t) {
                                    t ? (r.$set(a, t),
                                        Cn && o && i.prop(o, r[a])) : "href" === e && r.$set(a, null)
                                })
                        }
                    }
                }
            });
        var or = {
            $addControl: f,
            $$renameControl: function (e, t) {
                e.$name = t
            },
            $removeControl: f,
            $setValidity: f,
            $setDirty: f,
            $setPristine: f,
            $setSubmitted: f
        };
        hn.$inject = ["$element", "$attrs", "$scope", "$animate", "$interpolate"];
        var ar = function (e) {
            return ["$timeout", function (t) {
                return {
                    name: "form",
                    restrict: e ? "EAC" : "E",
                    controller: hn,
                    compile: function (i, r) {
                        i.addClass(Fr).addClass(Nr);
                        var o = r.name ? "name" : !(!e || !r.ngForm) && "ngForm";
                        return {
                            pre: function (e, i, r, a) {
                                if (!("action" in r)) {
                                    var s = function (t) {
                                        e.$apply(function () {
                                            a.$commitViewValue(),
                                                a.$setSubmitted()
                                        }),
                                            t.preventDefault()
                                    };
                                    i[0].addEventListener("submit", s, !1),
                                        i.on("$destroy", function () {
                                            t(function () {
                                                i[0].removeEventListener("submit", s, !1)
                                            }, 0, !1)
                                        })
                                }
                                var l = a.$$parentForm;
                                o && (kt(e, a.$name, a, a.$name),
                                    r.$observe(o, function (t) {
                                        a.$name !== t && (kt(e, a.$name, n, a.$name),
                                            l.$$renameControl(a, t),
                                            kt(e, a.$name, a, a.$name))
                                    })),
                                    i.on("$destroy", function () {
                                        l.$removeControl(a),
                                            o && kt(e, r[o], n, a.$name),
                                            u(a, or)
                                    })
                            }
                        }
                    }
                }
            }
            ]
        }
            , sr = ar()
            , lr = ar(!0)
            , cr = /\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/
            , ur = /^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/
            , dr = /^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i
            , pr = /^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/
            , hr = /^(\d{4})-(\d{2})-(\d{2})$/
            , fr = /^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/
            , mr = /^(\d{4})-W(\d\d)$/
            , gr = /^(\d{4})-(\d\d)$/
            , vr = /^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/
            , yr = {
                text: function (e, t, n, i, r, o) {
                    mn(0, t, n, i, r, o),
                        fn(i)
                },
                date: vn("date", hr, gn(hr, ["yyyy", "MM", "dd"]), "yyyy-MM-dd"),
                "datetime-local": vn("datetimelocal", fr, gn(fr, "yyyy MM dd HH mm ss sss".split(" ")), "yyyy-MM-ddTHH:mm:ss.sss"),
                time: vn("time", vr, gn(vr, ["HH", "mm", "ss", "sss"]), "HH:mm:ss.sss"),
                week: vn("week", mr, function (e, t) {
                    if (C(e))
                        return e;
                    if ($(e)) {
                        mr.lastIndex = 0;
                        var n = mr.exec(e);
                        if (n) {
                            var i = +n[1]
                                , r = +n[2]
                                , o = n = 0
                                , a = 0
                                , s = 0
                                , l = on(i);
                            r = 7 * (r - 1);
                            return t && (n = t.getHours(),
                                o = t.getMinutes(),
                                a = t.getSeconds(),
                                s = t.getMilliseconds()),
                                new Date(i, 0, l.getDate() + r, n, o, a, s)
                        }
                    }
                    return NaN
                }, "yyyy-Www"),
                month: vn("month", gr, gn(gr, ["yyyy", "MM"]), "yyyy-MM"),
                number: function (e, t, i, r, o, a) {
                    var s, l;
                    (yn(0, t, 0, r),
                        mn(0, t, i, r, o, a),
                        r.$$parserName = "number",
                        r.$parsers.push(function (e) {
                            return r.$isEmpty(e) ? null : pr.test(e) ? parseFloat(e) : n
                        }),
                        r.$formatters.push(function (e) {
                            if (!r.$isEmpty(e)) {
                                if (!S(e))
                                    throw zr("numfmt", e);
                                e = e.toString()
                            }
                            return e
                        }),
                        y(i.min) || i.ngMin) && (r.$validators.min = function (e) {
                            return r.$isEmpty(e) || v(s) || e >= s
                        }
                            ,
                            i.$observe("min", function (e) {
                                y(e) && !S(e) && (e = parseFloat(e, 10)),
                                    s = S(e) && !isNaN(e) ? e : n,
                                    r.$validate()
                            }));
                    (y(i.max) || i.ngMax) && (r.$validators.max = function (e) {
                        return r.$isEmpty(e) || v(l) || e <= l
                    }
                        ,
                        i.$observe("max", function (e) {
                            y(e) && !S(e) && (e = parseFloat(e, 10)),
                                l = S(e) && !isNaN(e) ? e : n,
                                r.$validate()
                        }))
                },
                url: function (e, t, n, i, r, o) {
                    mn(0, t, n, i, r, o),
                        fn(i),
                        i.$$parserName = "url",
                        i.$validators.url = function (e, t) {
                            var n = e || t;
                            return i.$isEmpty(n) || ur.test(n)
                        }
                },
                email: function (e, t, n, i, r, o) {
                    mn(0, t, n, i, r, o),
                        fn(i),
                        i.$$parserName = "email",
                        i.$validators.email = function (e, t) {
                            var n = e || t;
                            return i.$isEmpty(n) || dr.test(n)
                        }
                },
                radio: function (e, t, n, i) {
                    v(n.name) && t.attr("name", ++Nn),
                        t.on("click", function (e) {
                            t[0].checked && i.$setViewValue(n.value, e && e.type)
                        }),
                        i.$render = function () {
                            t[0].checked = n.value == i.$viewValue
                        }
                        ,
                        n.$observe("value", i.$render)
                },
                checkbox: function (e, t, n, i, r, o, a, s) {
                    var l = bn(s, e, "ngTrueValue", n.ngTrueValue, !0)
                        , c = bn(s, e, "ngFalseValue", n.ngFalseValue, !1);
                    t.on("click", function (e) {
                        i.$setViewValue(t[0].checked, e && e.type)
                    }),
                        i.$render = function () {
                            t[0].checked = i.$viewValue
                        }
                        ,
                        i.$isEmpty = function (e) {
                            return !1 === e
                        }
                        ,
                        i.$formatters.push(function (e) {
                            return _(e, l)
                        }),
                        i.$parsers.push(function (e) {
                            return e ? l : c
                        })
                },
                hidden: f,
                button: f,
                submit: f,
                reset: f,
                file: f
            }
            , br = ["$browser", "$sniffer", "$filter", "$parse", function (e, t, n, i) {
                return {
                    restrict: "E",
                    require: ["?ngModel"],
                    link: {
                        pre: function (r, o, a, s) {
                            s[0] && (yr[En(a.type)] || yr.text)(r, o, a, s[0], t, e, n, i)
                        }
                    }
                }
            }
            ]
            , wr = /^(true|false|\d+)$/
            , $r = function () {
                return {
                    restrict: "A",
                    priority: 100,
                    compile: function (e, t) {
                        return wr.test(t.ngValue) ? function (e, t, n) {
                            n.$set("value", e.$eval(n.ngValue))
                        }
                            : function (e, t, n) {
                                e.$watch(n.ngValue, function (e) {
                                    n.$set("value", e)
                                })
                            }
                    }
                }
            }
            , Sr = ["$compile", function (e) {
                return {
                    restrict: "AC",
                    compile: function (t) {
                        return e.$$addBindingClass(t),
                            function (t, i, r) {
                                e.$$addBindingInfo(i, r.ngBind),
                                    i = i[0],
                                    t.$watch(r.ngBind, function (e) {
                                        i.textContent = e === n ? "" : e
                                    })
                            }
                    }
                }
            }
            ]
            , Cr = ["$interpolate", "$compile", function (e, t) {
                return {
                    compile: function (i) {
                        return t.$$addBindingClass(i),
                            function (i, r, o) {
                                i = e(r.attr(o.$attr.ngBindTemplate)),
                                    t.$$addBindingInfo(r, i.expressions),
                                    r = r[0],
                                    o.$observe("ngBindTemplate", function (e) {
                                        r.textContent = e === n ? "" : e
                                    })
                            }
                    }
                }
            }
            ]
            , xr = ["$sce", "$parse", "$compile", function (e, t, n) {
                return {
                    restrict: "A",
                    compile: function (i, r) {
                        var o = t(r.ngBindHtml)
                            , a = t(r.ngBindHtml, function (e) {
                                return (e || "").toString()
                            });
                        return n.$$addBindingClass(i),
                            function (t, i, r) {
                                n.$$addBindingInfo(i, r.ngBindHtml),
                                    t.$watch(a, function () {
                                        i.html(e.getTrustedHtml(o(t)) || "")
                                    })
                            }
                    }
                }
            }
            ]
            , Tr = g({
                restrict: "A",
                require: "ngModel",
                link: function (e, t, n, i) {
                    i.$viewChangeListeners.push(function () {
                        e.$eval(n.ngChange)
                    })
                }
            })
            , kr = wn("", !0)
            , Pr = wn("Odd", 0)
            , Er = wn("Even", 1)
            , Ir = pn({
                compile: function (e, t) {
                    t.$set("ngCloak", n),
                        e.removeClass("ng-cloak")
                }
            })
            , Mr = [function () {
                return {
                    restrict: "A",
                    scope: !0,
                    controller: "@",
                    priority: 500
                }
            }
            ]
            , Or = {}
            , Dr = {
                blur: !0,
                focus: !0
            };
        o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "), function (e) {
            var t = Re("ng-" + e);
            Or[t] = ["$parse", "$rootScope", function (n, i) {
                return {
                    restrict: "A",
                    compile: function (r, o) {
                        var a = n(o[t], null, !0);
                        return function (t, n) {
                            n.on(e, function (n) {
                                var r = function () {
                                    a(t, {
                                        $event: n
                                    })
                                };
                                Dr[e] && i.$$phase ? t.$evalAsync(r) : t.$apply(r)
                            })
                        }
                    }
                }
            }
            ]
        });
        var Ar = ["$animate", function (e) {
            return {
                multiElement: !0,
                transclude: "element",
                priority: 600,
                terminal: !0,
                restrict: "A",
                $$tlb: !0,
                link: function (n, i, r, o, a) {
                    var s, l, c;
                    n.$watch(r.ngIf, function (n) {
                        n ? l || a(function (n, o) {
                            l = o,
                                n[n.length++] = t.createComment(" end ngIf: " + r.ngIf + " "),
                                s = {
                                    clone: n
                                },
                                e.enter(n, i.parent(), i)
                        }) : (c && (c.remove(),
                            c = null),
                            l && (l.$destroy(),
                                l = null),
                            s && (c = ie(s.clone),
                                e.leave(c).then(function () {
                                    c = null
                                }),
                                s = null))
                    })
                }
            }
        }
        ]
            , _r = ["$templateRequest", "$anchorScroll", "$animate", "$sce", function (e, t, n, i) {
                return {
                    restrict: "ECA",
                    priority: 400,
                    terminal: !0,
                    transclude: "element",
                    controller: Un.noop,
                    compile: function (r, o) {
                        var a = o.ngInclude || o.src
                            , s = o.onload || ""
                            , l = o.autoscroll;
                        return function (r, o, c, u, d) {
                            var p, h, f, m = 0, g = function () {
                                h && (h.remove(),
                                    h = null),
                                    p && (p.$destroy(),
                                        p = null),
                                    f && (n.leave(f).then(function () {
                                        h = null
                                    }),
                                        h = f,
                                        f = null)
                            };
                            r.$watch(i.parseAsResourceUrl(a), function (i) {
                                var a = function () {
                                    !y(l) || l && !r.$eval(l) || t()
                                }
                                    , c = ++m;
                                i ? (e(i, !0).then(function (e) {
                                    if (c === m) {
                                        var t = r.$new();
                                        u.template = e,
                                            e = d(t, function (e) {
                                                g(),
                                                    n.enter(e, null, o).then(a)
                                            }),
                                            f = e,
                                            (p = t).$emit("$includeContentLoaded", i),
                                            r.$eval(s)
                                    }
                                }, function () {
                                    c === m && (g(),
                                        r.$emit("$includeContentError", i))
                                }),
                                    r.$emit("$includeContentRequested", i)) : (g(),
                                        u.template = null)
                            })
                        }
                    }
                }
            }
            ]
            , Rr = ["$compile", function (e) {
                return {
                    restrict: "ECA",
                    priority: -400,
                    require: "ngInclude",
                    link: function (n, i, r, o) {
                        /SVG/.test(i[0].toString()) ? (i.empty(),
                            e(se(o.template, t).childNodes)(n, function (e) {
                                i.append(e)
                            }, {
                                futureParentElement: i
                            })) : (i.html(o.template),
                                e(i.contents())(n))
                    }
                }
            }
            ]
            , Lr = pn({
                priority: 450,
                compile: function () {
                    return {
                        pre: function (e, t, n) {
                            e.$eval(n.ngInit)
                        }
                    }
                }
            })
            , Ur = function () {
                return {
                    restrict: "A",
                    priority: 100,
                    require: "ngModel",
                    link: function (e, t, i, r) {
                        var a = t.attr(i.$attr.ngList) || ", "
                            , s = "false" !== i.ngTrim
                            , l = s ? Vn(a) : a;
                        r.$parsers.push(function (e) {
                            if (!v(e)) {
                                var t = [];
                                return e && o(e.split(l), function (e) {
                                    e && t.push(s ? Vn(e) : e)
                                }),
                                    t
                            }
                        }),
                            r.$formatters.push(function (e) {
                                return Fn(e) ? e.join(a) : n
                            }),
                            r.$isEmpty = function (e) {
                                return !e || !e.length
                            }
                    }
                }
            }
            , Nr = "ng-valid"
            , jr = "ng-invalid"
            , Fr = "ng-pristine"
            , Br = "ng-dirty"
            , Vr = "ng-pending"
            , zr = new i("ngModel")
            , Hr = ["$scope", "$exceptionHandler", "$attrs", "$element", "$parse", "$animate", "$timeout", "$rootScope", "$q", "$interpolate", function (e, t, i, r, a, s, l, c, u, d) {
                this.$modelValue = this.$viewValue = Number.NaN,
                    this.$$rawModelValue = n,
                    this.$validators = {},
                    this.$asyncValidators = {},
                    this.$parsers = [],
                    this.$formatters = [],
                    this.$viewChangeListeners = [],
                    this.$untouched = !0,
                    this.$touched = !1,
                    this.$pristine = !0,
                    this.$dirty = !1,
                    this.$valid = !0,
                    this.$invalid = !1,
                    this.$error = {},
                    this.$$success = {},
                    this.$pending = n,
                    this.$name = d(i.name || "", !1)(e);
                var p, h = a(i.ngModel), m = h.assign, g = h, b = m, w = null, $ = this;
                this.$$setOptions = function (e) {
                    if (($.$options = e) && e.getterSetter) {
                        var t = a(i.ngModel + "()")
                            , n = a(i.ngModel + "($$$p)");
                        g = function (e) {
                            var n = h(e);
                            return x(n) && (n = t(e)),
                                n
                        }
                            ,
                            b = function (e, t) {
                                x(h(e)) ? n(e, {
                                    $$$p: $.$modelValue
                                }) : m(e, $.$modelValue)
                            }
                    } else if (!h.assign)
                        throw zr("nonassign", i.ngModel, V(r))
                }
                    ,
                    this.$render = f,
                    this.$isEmpty = function (e) {
                        return v(e) || "" === e || null === e || e != e
                    }
                    ;
                var C = r.inheritedData("$formController") || or
                    , T = 0;
                $n({
                    ctrl: this,
                    $element: r,
                    set: function (e, t) {
                        e[t] = !0
                    },
                    unset: function (e, t) {
                        delete e[t]
                    },
                    parentForm: C,
                    $animate: s
                }),
                    this.$setPristine = function () {
                        $.$dirty = !1,
                            $.$pristine = !0,
                            s.removeClass(r, Br),
                            s.addClass(r, Fr)
                    }
                    ,
                    this.$setDirty = function () {
                        $.$dirty = !0,
                            $.$pristine = !1,
                            s.removeClass(r, Fr),
                            s.addClass(r, Br),
                            C.$setDirty()
                    }
                    ,
                    this.$setUntouched = function () {
                        $.$touched = !1,
                            $.$untouched = !0,
                            s.setClass(r, "ng-untouched", "ng-touched")
                    }
                    ,
                    this.$setTouched = function () {
                        $.$touched = !0,
                            $.$untouched = !1,
                            s.setClass(r, "ng-touched", "ng-untouched")
                    }
                    ,
                    this.$rollbackViewValue = function () {
                        l.cancel(w),
                            $.$viewValue = $.$$lastCommittedViewValue,
                            $.$render()
                    }
                    ,
                    this.$validate = function () {
                        if (!S($.$modelValue) || !isNaN($.$modelValue)) {
                            var e = $.$$rawModelValue
                                , t = $.$valid
                                , i = $.$modelValue
                                , r = $.$options && $.$options.allowInvalid;
                            $.$$runValidators(e, $.$$lastCommittedViewValue, function (o) {
                                r || t === o || ($.$modelValue = o ? e : n,
                                    $.$modelValue !== i && $.$$writeModelToScope())
                            })
                        }
                    }
                    ,
                    this.$$runValidators = function (e, t, i) {
                        function r(e, t) {
                            s === T && $.$setValidity(e, t)
                        }
                        function a(e) {
                            s === T && i(e)
                        }
                        var s = ++T;
                        !function () {
                            var e = $.$$parserName || "parse";
                            return p !== n ? (p || (o($.$validators, function (e, t) {
                                r(t, null)
                            }),
                                o($.$asyncValidators, function (e, t) {
                                    r(t, null)
                                })),
                                r(e, p),
                                p) : (r(e, null),
                                    !0)
                        }() ? a(!1) : function () {
                            var n = !0;
                            return o($.$validators, function (i, o) {
                                var a = i(e, t);
                                n = n && a,
                                    r(o, a)
                            }),
                                !!n || (o($.$asyncValidators, function (e, t) {
                                    r(t, null)
                                }),
                                    !1)
                        }() ? function () {
                            var i = []
                                , s = !0;
                            o($.$asyncValidators, function (o, a) {
                                var l = o(e, t);
                                if (!l || !x(l.then))
                                    throw zr("$asyncValidators", l);
                                r(a, n),
                                    i.push(l.then(function () {
                                        r(a, !0)
                                    }, function (e) {
                                        s = !1,
                                            r(a, !1)
                                    }))
                            }),
                                i.length ? u.all(i).then(function () {
                                    a(s)
                                }, f) : a(!0)
                        }() : a(!1)
                    }
                    ,
                    this.$commitViewValue = function () {
                        var e = $.$viewValue;
                        l.cancel(w),
                            ($.$$lastCommittedViewValue !== e || "" === e && $.$$hasNativeValidators) && ($.$$lastCommittedViewValue = e,
                                $.$pristine && this.$setDirty(),
                                this.$$parseAndValidate())
                    }
                    ,
                    this.$$parseAndValidate = function () {
                        var t = $.$$lastCommittedViewValue;
                        if (p = !v(t) || n)
                            for (var i = 0; i < $.$parsers.length; i++)
                                if (v(t = $.$parsers[i](t))) {
                                    p = !1;
                                    break
                                }
                        S($.$modelValue) && isNaN($.$modelValue) && ($.$modelValue = g(e));
                        var r = $.$modelValue
                            , o = $.$options && $.$options.allowInvalid;
                        $.$$rawModelValue = t,
                            o && ($.$modelValue = t,
                                $.$modelValue !== r && $.$$writeModelToScope()),
                            $.$$runValidators(t, $.$$lastCommittedViewValue, function (e) {
                                o || ($.$modelValue = e ? t : n,
                                    $.$modelValue !== r && $.$$writeModelToScope())
                            })
                    }
                    ,
                    this.$$writeModelToScope = function () {
                        b(e, $.$modelValue),
                            o($.$viewChangeListeners, function (e) {
                                try {
                                    e()
                                } catch (e) {
                                    t(e)
                                }
                            })
                    }
                    ,
                    this.$setViewValue = function (e, t) {
                        $.$viewValue = e,
                            $.$options && !$.$options.updateOnDefault || $.$$debounceViewValueCommit(t)
                    }
                    ,
                    this.$$debounceViewValueCommit = function (t) {
                        var n = 0
                            , i = $.$options;
                        i && y(i.debounce) && (S(i = i.debounce) ? n = i : S(i[t]) ? n = i[t] : S(i.default) && (n = i.default)),
                            l.cancel(w),
                            n ? w = l(function () {
                                $.$commitViewValue()
                            }, n) : c.$$phase ? $.$commitViewValue() : e.$apply(function () {
                                $.$commitViewValue()
                            })
                    }
                    ,
                    e.$watch(function () {
                        var t = g(e);
                        if (t !== $.$modelValue && ($.$modelValue == $.$modelValue || t == t)) {
                            $.$modelValue = $.$$rawModelValue = t,
                                p = n;
                            for (var i = $.$formatters, r = i.length, o = t; r--;)
                                o = i[r](o);
                            $.$viewValue !== o && ($.$viewValue = $.$$lastCommittedViewValue = o,
                                $.$render(),
                                $.$$runValidators(t, o, f))
                        }
                        return t
                    })
            }
            ]
            , Wr = ["$rootScope", function (e) {
                return {
                    restrict: "A",
                    require: ["ngModel", "^?form", "^?ngModelOptions"],
                    controller: Hr,
                    priority: 1,
                    compile: function (t) {
                        return t.addClass(Fr).addClass("ng-untouched").addClass(Nr),
                        {
                            pre: function (e, t, n, i) {
                                var r = i[0]
                                    , o = i[1] || or;
                                r.$$setOptions(i[2] && i[2].$options),
                                    o.$addControl(r),
                                    n.$observe("name", function (e) {
                                        r.$name !== e && o.$$renameControl(r, e)
                                    }),
                                    e.$on("$destroy", function () {
                                        o.$removeControl(r)
                                    })
                            },
                            post: function (t, n, i, r) {
                                var o = r[0];
                                o.$options && o.$options.updateOn && n.on(o.$options.updateOn, function (e) {
                                    o.$$debounceViewValueCommit(e && e.type)
                                }),
                                    n.on("blur", function (n) {
                                        o.$touched || (e.$$phase ? t.$evalAsync(o.$setTouched) : t.$apply(o.$setTouched))
                                    })
                            }
                        }
                    }
                }
            }
            ]
            , qr = /(\s+|^)default(\s+|$)/
            , Gr = function () {
                return {
                    restrict: "A",
                    controller: ["$scope", "$attrs", function (e, t) {
                        var i = this;
                        this.$options = D(e.$eval(t.ngModelOptions)),
                            this.$options.updateOn !== n ? (this.$options.updateOnDefault = !1,
                                this.$options.updateOn = Vn(this.$options.updateOn.replace(qr, function () {
                                    return i.$options.updateOnDefault = !0,
                                        " "
                                }))) : this.$options.updateOnDefault = !0
                    }
                    ]
                }
            }
            , Yr = pn({
                terminal: !0,
                priority: 1e3
            })
            , Xr = i("ngOptions")
            , Jr = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/
            , Kr = ["$compile", "$parse", function (e, n) {
                function i(e, t, i) {
                    function o(e, t, n, i, r) {
                        this.selectValue = e,
                            this.viewValue = t,
                            this.label = n,
                            this.group = i,
                            this.disabled = r
                    }
                    var a = e.match(Jr);
                    if (!a)
                        throw Xr("iexp", e, V(t));
                    var s = a[5] || a[7]
                        , l = a[6];
                    e = / as /.test(a[0]) && a[1];
                    var c = a[9];
                    t = n(a[2] ? a[1] : s);
                    var u = e && n(e) || t
                        , d = c && n(c)
                        , p = c ? function (e, t) {
                            return d(i, t)
                        }
                            : function (e) {
                                return Te(e)
                            }
                        , h = function (e, t) {
                            return p(e, b(e, t))
                        }
                        , f = n(a[2] || a[1])
                        , m = n(a[3] || "")
                        , g = n(a[4] || "")
                        , v = n(a[8])
                        , y = {}
                        , b = l ? function (e, t) {
                            return y[l] = t,
                                y[s] = e,
                                y
                        }
                            : function (e) {
                                return y[s] = e,
                                    y
                            }
                        ;
                    return {
                        trackBy: c,
                        getTrackByValue: h,
                        getWatchables: n(v, function (e) {
                            var t = [];
                            return e = e || [],
                                Object.keys(e).forEach(function (n) {
                                    var r = b(e[n], n);
                                    n = p(e[n], r),
                                        t.push(n),
                                        (a[2] || a[1]) && (n = f(i, r),
                                            t.push(n)),
                                        a[4] && (r = g(i, r),
                                            t.push(r))
                                }),
                                t
                        }),
                        getOptions: function () {
                            var e, t = [], n = {}, a = v(i) || [];
                            if (!l && r(a))
                                e = a;
                            else
                                for (var s in e = [],
                                    a)
                                    a.hasOwnProperty(s) && "$" !== s.charAt(0) && e.push(s);
                            s = e.length;
                            for (var d = 0; d < s; d++) {
                                var y = a === e ? d : e[d]
                                    , w = b(a[y], y)
                                    , $ = u(i, w);
                                $ = new o(y = p($, w), $, f(i, w), m(i, w), w = g(i, w));
                                t.push($),
                                    n[y] = $
                            }
                            return {
                                items: t,
                                selectValueMap: n,
                                getOptionFromViewValue: function (e) {
                                    return n[h(e)]
                                },
                                getViewValueFromOption: function (e) {
                                    return c ? Un.copy(e.viewValue) : e.viewValue
                                }
                            }
                        }
                    }
                }
                var a = t.createElement("option")
                    , s = t.createElement("optgroup");
                return {
                    restrict: "A",
                    terminal: !0,
                    require: ["select", "?ngModel"],
                    link: function (t, n, r, l) {
                        function c(e, t) {
                            e.element = t,
                                t.disabled = e.disabled,
                                e.value !== t.value && (t.value = e.selectValue),
                                e.label !== t.label && (t.label = e.label,
                                    t.textContent = e.label)
                        }
                        function u(e, t, n, i) {
                            return t && En(t.nodeName) === n ? n = t : (n = i.cloneNode(!1),
                                t ? e.insertBefore(n, t) : e.appendChild(n)),
                                n
                        }
                        function d(e) {
                            for (var t; e;)
                                t = e.nextSibling,
                                    Se(e),
                                    e = t
                        }
                        function p() {
                            var e = $ && f.readValue();
                            $ = S.getOptions();
                            var t = {}
                                , i = n[0].firstChild;
                            if (b && n.prepend(m),
                                i = function (e) {
                                    var t = m && m[0]
                                        , n = w && w[0];
                                    if (t || n)
                                        for (; e && (e === t || e === n);)
                                            e = e.nextSibling;
                                    return e
                                }(i),
                                $.items.forEach(function (e) {
                                    var r, o;
                                    e.group ? ((r = t[e.group]) || (r = u(n[0], i, "optgroup", s),
                                        i = r.nextSibling,
                                        r.label = e.group,
                                        r = t[e.group] = {
                                            groupElement: r,
                                            currentOptionElement: r.firstChild
                                        }),
                                        c(e, o = u(r.groupElement, r.currentOptionElement, "option", a)),
                                        r.currentOptionElement = o.nextSibling) : (c(e, o = u(n[0], i, "option", a)),
                                            i = o.nextSibling)
                                }),
                                Object.keys(t).forEach(function (e) {
                                    d(t[e].currentOptionElement)
                                }),
                                d(i),
                                h.$render(),
                                !h.$isEmpty(e)) {
                                var r = f.readValue();
                                (S.trackBy && !_(e, r) || e !== r) && (h.$setViewValue(r),
                                    h.$render())
                            }
                        }
                        var h = l[1];
                        if (h) {
                            var f = l[0];
                            l = r.multiple;
                            for (var m, g = 0, v = n.children(), y = v.length; g < y; g++)
                                if ("" === v[g].value) {
                                    m = v.eq(g);
                                    break
                                }
                            var b = !!m
                                , w = xn(a.cloneNode(!1));
                            w.val("?");
                            var $, S = i(r.ngOptions, n, t);
                            l ? (h.$isEmpty = function (e) {
                                return !e || 0 === e.length
                            }
                                ,
                                f.writeValue = function (e) {
                                    $.items.forEach(function (e) {
                                        e.element.selected = !1
                                    }),
                                        e && e.forEach(function (e) {
                                            (e = $.getOptionFromViewValue(e)) && !e.disabled && (e.element.selected = !0)
                                        })
                                }
                                ,
                                f.readValue = function () {
                                    var e = [];
                                    return o(n.val() || [], function (t) {
                                        (t = $.selectValueMap[t]).disabled || e.push($.getViewValueFromOption(t))
                                    }),
                                        e
                                }
                                ,
                                S.trackBy && t.$watchCollection(function () {
                                    if (Fn(h.$viewValue))
                                        return h.$viewValue.map(function (e) {
                                            return S.getTrackByValue(e)
                                        })
                                }, function () {
                                    h.$render()
                                })) : (f.writeValue = function (e) {
                                    var t = $.getOptionFromViewValue(e);
                                    t && !t.disabled ? n[0].value !== t.selectValue && (w.remove(),
                                        b || m.remove(),
                                        n[0].value = t.selectValue,
                                        t.element.selected = !0,
                                        t.element.setAttribute("selected", "selected")) : null === e || b ? (w.remove(),
                                            b || n.prepend(m),
                                            n.val(""),
                                            m.prop("selected", !0),
                                            m.attr("selected", !0)) : (b || m.remove(),
                                                n.prepend(w),
                                                n.val("?"),
                                                w.prop("selected", !0),
                                                w.attr("selected", !0))
                                }
                                    ,
                                    f.readValue = function () {
                                        var e = $.selectValueMap[n.val()];
                                        return e && !e.disabled ? (b || m.remove(),
                                            w.remove(),
                                            $.getViewValueFromOption(e)) : null
                                    }
                                    ,
                                    S.trackBy && t.$watch(function () {
                                        return S.getTrackByValue(h.$viewValue)
                                    }, function () {
                                        h.$render()
                                    })),
                                b ? (m.remove(),
                                    e(m)(t),
                                    m.removeClass("ng-scope")) : m = xn(a.cloneNode(!1)),
                                p(),
                                t.$watchCollection(S.getWatchables, p)
                        }
                    }
                }
            }
            ]
            , Qr = ["$locale", "$interpolate", "$log", function (e, t, n) {
                var i = /{}/g
                    , r = /^when(Minus)?(.+)$/;
                return {
                    link: function (a, s, l) {
                        function c(e) {
                            s.text(e || "")
                        }
                        var u, d = l.count, p = l.$attr.when && s.attr(l.$attr.when), h = l.offset || 0, m = a.$eval(p) || {}, g = {}, y = t.startSymbol(), b = t.endSymbol(), w = y + d + "-" + h + b, $ = Un.noop;
                        o(l, function (e, t) {
                            var n = r.exec(t);
                            n && (n = (n[1] ? "-" : "") + En(n[2]),
                                m[n] = s.attr(l.$attr[t]))
                        }),
                            o(m, function (e, n) {
                                g[n] = t(e.replace(i, w))
                            }),
                            a.$watch(d, function (t) {
                                var i = parseFloat(t)
                                    , r = isNaN(i);
                                r || i in m || (i = e.pluralCat(i - h)),
                                    i === u || r && S(u) && isNaN(u) || ($(),
                                        v(r = g[i]) ? (null != t && n.debug("ngPluralize: no rule defined for '" + i + "' in " + p),
                                            $ = f,
                                            c()) : $ = a.$watch(r, c),
                                        u = i)
                            })
                    }
                }
            }
            ]
            , Zr = ["$parse", "$animate", function (e, a) {
                var s = i("ngRepeat")
                    , l = function (e, t, n, i, r, o, a) {
                        e[n] = i,
                            r && (e[r] = o),
                            e.$index = t,
                            e.$first = 0 === t,
                            e.$last = t === a - 1,
                            e.$middle = !(e.$first || e.$last),
                            e.$odd = !(e.$even = 0 == (1 & t))
                    };
                return {
                    restrict: "A",
                    multiElement: !0,
                    transclude: "element",
                    priority: 1e3,
                    terminal: !0,
                    $$tlb: !0,
                    compile: function (i, c) {
                        var u = c.ngRepeat
                            , d = t.createComment(" end ngRepeat: " + u + " ");
                        if (!(p = u.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/)))
                            throw s("iexp", u);
                        var p, h = p[1], f = p[2], m = p[3], g = p[4];
                        if (!(p = h.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/)))
                            throw s("iidexp", h);
                        var v = p[3] || p[1]
                            , y = p[2];
                        if (m && (!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(m) || /^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(m)))
                            throw s("badident", m);
                        var b, w, $, S, C = {
                            $id: Te
                        };
                        return g ? b = e(g) : ($ = function (e, t) {
                            return Te(t)
                        }
                            ,
                            S = function (e) {
                                return e
                            }
                        ),
                            function (e, t, i, c, p) {
                                b && (w = function (t, n, i) {
                                    return y && (C[y] = t),
                                        C[v] = n,
                                        C.$index = i,
                                        b(e, C)
                                }
                                );
                                var h = re();
                                e.$watchCollection(f, function (i) {
                                    var c, f, g, b, C, x, T, k, P, E, I = t[0], M = re();
                                    if (m && (e[m] = i),
                                        r(i))
                                        k = i,
                                            f = w || $;
                                    else
                                        for (E in f = w || S,
                                            k = [],
                                            i)
                                            i.hasOwnProperty(E) && "$" !== E.charAt(0) && k.push(E);
                                    for (b = k.length,
                                        E = Array(b),
                                        c = 0; c < b; c++)
                                        if (C = i === k ? c : k[c],
                                            x = i[C],
                                            T = f(C, x, c),
                                            h[T])
                                            P = h[T],
                                                delete h[T],
                                                M[T] = P,
                                                E[c] = P;
                                        else {
                                            if (M[T])
                                                throw o(E, function (e) {
                                                    e && e.scope && (h[e.id] = e)
                                                }),
                                                s("dupes", u, T, x);
                                            E[c] = {
                                                id: T,
                                                scope: n,
                                                clone: n
                                            },
                                                M[T] = !0
                                        }
                                    for (g in h) {
                                        if (T = ie((P = h[g]).clone),
                                            a.leave(T),
                                            T[0].parentNode)
                                            for (c = 0,
                                                f = T.length; c < f; c++)
                                                T[c].$$NG_REMOVED = !0;
                                        P.scope.$destroy()
                                    }
                                    for (c = 0; c < b; c++)
                                        if (C = i === k ? c : k[c],
                                            x = i[C],
                                            (P = E[c]).scope) {
                                            g = I;
                                            do {
                                                g = g.nextSibling
                                            } while (g && g.$$NG_REMOVED); P.clone[0] != g && a.move(ie(P.clone), null, xn(I)),
                                                I = P.clone[P.clone.length - 1],
                                                l(P.scope, c, v, x, y, C, b)
                                        } else
                                            p(function (e, t) {
                                                P.scope = t;
                                                var n = d.cloneNode(!1);
                                                e[e.length++] = n,
                                                    a.enter(e, null, xn(I)),
                                                    I = n,
                                                    P.clone = e,
                                                    M[P.id] = P,
                                                    l(P.scope, c, v, x, y, C, b)
                                            });
                                    h = M
                                })
                            }
                    }
                }
            }
            ]
            , eo = ["$animate", function (e) {
                return {
                    restrict: "A",
                    multiElement: !0,
                    link: function (t, n, i) {
                        t.$watch(i.ngShow, function (t) {
                            e[t ? "removeClass" : "addClass"](n, "ng-hide", {
                                tempClasses: "ng-hide-animate"
                            })
                        })
                    }
                }
            }
            ]
            , to = ["$animate", function (e) {
                return {
                    restrict: "A",
                    multiElement: !0,
                    link: function (t, n, i) {
                        t.$watch(i.ngHide, function (t) {
                            e[t ? "addClass" : "removeClass"](n, "ng-hide", {
                                tempClasses: "ng-hide-animate"
                            })
                        })
                    }
                }
            }
            ]
            , no = pn(function (e, t, n) {
                e.$watch(n.ngStyle, function (e, n) {
                    n && e !== n && o(n, function (e, n) {
                        t.css(n, "")
                    }),
                        e && t.css(e)
                }, !0)
            })
            , io = ["$animate", function (e) {
                return {
                    require: "ngSwitch",
                    controller: ["$scope", function () {
                        this.cases = {}
                    }
                    ],
                    link: function (n, i, r, a) {
                        var s = []
                            , l = []
                            , c = []
                            , u = []
                            , d = function (e, t) {
                                return function () {
                                    e.splice(t, 1)
                                }
                            };
                        n.$watch(r.ngSwitch || r.on, function (n) {
                            var i, r;
                            for (i = 0,
                                r = c.length; i < r; ++i)
                                e.cancel(c[i]);
                            for (i = c.length = 0,
                                r = u.length; i < r; ++i) {
                                var p = ie(l[i].clone);
                                u[i].$destroy(),
                                    (c[i] = e.leave(p)).then(d(c, i))
                            }
                            l.length = 0,
                                u.length = 0,
                                (s = a.cases["!" + n] || a.cases["?"]) && o(s, function (n) {
                                    n.transclude(function (i, r) {
                                        u.push(r);
                                        var o = n.element;
                                        i[i.length++] = t.createComment(" end ngSwitchWhen: "),
                                            l.push({
                                                clone: i
                                            }),
                                            e.enter(i, o.parent(), o)
                                    })
                                })
                        })
                    }
                }
            }
            ]
            , ro = pn({
                transclude: "element",
                priority: 1200,
                require: "^ngSwitch",
                multiElement: !0,
                link: function (e, t, n, i, r) {
                    i.cases["!" + n.ngSwitchWhen] = i.cases["!" + n.ngSwitchWhen] || [],
                        i.cases["!" + n.ngSwitchWhen].push({
                            transclude: r,
                            element: t
                        })
                }
            })
            , oo = pn({
                transclude: "element",
                priority: 1200,
                require: "^ngSwitch",
                multiElement: !0,
                link: function (e, t, n, i, r) {
                    i.cases["?"] = i.cases["?"] || [],
                        i.cases["?"].push({
                            transclude: r,
                            element: t
                        })
                }
            })
            , ao = pn({
                restrict: "EAC",
                link: function (e, t, n, r, o) {
                    if (!o)
                        throw i("ngTransclude")("orphan", V(t));
                    o(function (e) {
                        t.empty(),
                            t.append(e)
                    })
                }
            })
            , so = ["$templateCache", function (e) {
                return {
                    restrict: "E",
                    terminal: !0,
                    compile: function (t, n) {
                        "text/ng-template" == n.type && e.put(n.id, t[0].text)
                    }
                }
            }
            ]
            , lo = {
                $setViewValue: f,
                $render: f
            }
            , co = ["$element", "$scope", "$attrs", function (e, i, r) {
                var o = this
                    , a = new ke;
                o.ngModelCtrl = lo,
                    o.unknownOption = xn(t.createElement("option")),
                    o.renderUnknownOption = function (t) {
                        t = "? " + Te(t) + " ?",
                            o.unknownOption.val(t),
                            e.prepend(o.unknownOption),
                            e.val(t)
                    }
                    ,
                    i.$on("$destroy", function () {
                        o.renderUnknownOption = f
                    }),
                    o.removeUnknownOption = function () {
                        o.unknownOption.parent() && o.unknownOption.remove()
                    }
                    ,
                    o.readValue = function () {
                        return o.removeUnknownOption(),
                            e.val()
                    }
                    ,
                    o.writeValue = function (t) {
                        o.hasOption(t) ? (o.removeUnknownOption(),
                            e.val(t),
                            "" === t && o.emptyOption.prop("selected", !0)) : v(t) && o.emptyOption ? (o.removeUnknownOption(),
                                e.val("")) : o.renderUnknownOption(t)
                    }
                    ,
                    o.addOption = function (e, t) {
                        te(e, '"option value"'),
                            "" === e && (o.emptyOption = t);
                        var n = a.get(e) || 0;
                        a.put(e, n + 1)
                    }
                    ,
                    o.removeOption = function (e) {
                        var t = a.get(e);
                        t && (1 === t ? (a.remove(e),
                            "" === e && (o.emptyOption = n)) : a.put(e, t - 1))
                    }
                    ,
                    o.hasOption = function (e) {
                        return !!a.get(e)
                    }
            }
            ]
            , uo = function () {
                return {
                    restrict: "E",
                    require: ["select", "?ngModel"],
                    controller: co,
                    link: function (e, t, n, i) {
                        var r = i[1];
                        if (r) {
                            var a = i[0];
                            if (a.ngModelCtrl = r,
                                r.$render = function () {
                                    a.writeValue(r.$viewValue)
                                }
                                ,
                                t.on("change", function () {
                                    e.$apply(function () {
                                        r.$setViewValue(a.readValue())
                                    })
                                }),
                                n.multiple) {
                                a.readValue = function () {
                                    var e = [];
                                    return o(t.find("option"), function (t) {
                                        t.selected && e.push(t.value)
                                    }),
                                        e
                                }
                                    ,
                                    a.writeValue = function (e) {
                                        var n = new ke(e);
                                        o(t.find("option"), function (e) {
                                            e.selected = y(n.get(e.value))
                                        })
                                    }
                                    ;
                                var s, l = NaN;
                                e.$watch(function () {
                                    l !== r.$viewValue || _(s, r.$viewValue) || (s = A(r.$viewValue),
                                        r.$render()),
                                        l = r.$viewValue
                                }),
                                    r.$isEmpty = function (e) {
                                        return !e || 0 === e.length
                                    }
                            }
                        }
                    }
                }
            }
            , po = ["$interpolate", function (e) {
                function t(e) {
                    e[0].hasAttribute("selected") && (e[0].selected = !0)
                }
                return {
                    restrict: "E",
                    priority: 100,
                    compile: function (n, i) {
                        if (v(i.value)) {
                            var r = e(n.text(), !0);
                            r || i.$set("value", n.text())
                        }
                        return function (e, n, i) {
                            var o = n.parent()
                                , a = o.data("$selectController") || o.parent().data("$selectController");
                            a && a.ngModelCtrl && (r ? e.$watch(r, function (e, r) {
                                i.$set("value", e),
                                    r !== e && a.removeOption(r),
                                    a.addOption(e, n),
                                    a.ngModelCtrl.$render(),
                                    t(n)
                            }) : (a.addOption(i.value, n),
                                a.ngModelCtrl.$render(),
                                t(n)),
                                n.on("$destroy", function () {
                                    a.removeOption(i.value),
                                        a.ngModelCtrl.$render()
                                }))
                        }
                    }
                }
            }
            ]
            , ho = g({
                restrict: "E",
                terminal: !1
            })
            , fo = function () {
                return {
                    restrict: "A",
                    require: "?ngModel",
                    link: function (e, t, n, i) {
                        i && (n.required = !0,
                            i.$validators.required = function (e, t) {
                                return !n.required || !i.$isEmpty(t)
                            }
                            ,
                            n.$observe("required", function () {
                                i.$validate()
                            }))
                    }
                }
            }
            , mo = function () {
                return {
                    restrict: "A",
                    require: "?ngModel",
                    link: function (e, t, r, o) {
                        if (o) {
                            var a, s = r.ngPattern || r.pattern;
                            r.$observe("pattern", function (e) {
                                if ($(e) && 0 < e.length && (e = new RegExp("^" + e + "$")),
                                    e && !e.test)
                                    throw i("ngPattern")("noregexp", s, e, V(t));
                                a = e || n,
                                    o.$validate()
                            }),
                                o.$validators.pattern = function (e) {
                                    return o.$isEmpty(e) || v(a) || a.test(e)
                                }
                        }
                    }
                }
            }
            , go = function () {
                return {
                    restrict: "A",
                    require: "?ngModel",
                    link: function (e, t, n, i) {
                        if (i) {
                            var r = -1;
                            n.$observe("maxlength", function (e) {
                                e = p(e),
                                    r = isNaN(e) ? -1 : e,
                                    i.$validate()
                            }),
                                i.$validators.maxlength = function (e, t) {
                                    return 0 > r || i.$isEmpty(t) || t.length <= r
                                }
                        }
                    }
                }
            }
            , vo = function () {
                return {
                    restrict: "A",
                    require: "?ngModel",
                    link: function (e, t, n, i) {
                        if (i) {
                            var r = 0;
                            n.$observe("minlength", function (e) {
                                r = p(e) || 0,
                                    i.$validate()
                            }),
                                i.$validators.minlength = function (e, t) {
                                    return i.$isEmpty(t) || t.length >= r
                                }
                        }
                    }
                }
            };
        e.angular.bootstrap ? console.log("WARNING: Tried to load angular more than once.") : (function () {
            var t;
            if (!Yn) {
                var i = Wn();
                Tn = e.jQuery,
                    y(i) && (Tn = null === i ? n : e[i]),
                    Tn && Tn.fn.on ? (xn = Tn,
                        u(Tn.fn, {
                            scope: ci.scope,
                            isolateScope: ci.isolateScope,
                            controller: ci.controller,
                            injector: ci.injector,
                            inheritedData: ci.inheritedData
                        }),
                        t = Tn.cleanData,
                        Tn.cleanData = function (e) {
                            var n;
                            if (jn)
                                jn = !1;
                            else
                                for (var i, r = 0; null != (i = e[r]); r++)
                                    (n = Tn._data(i, "events")) && n.$destroy && Tn(i).triggerHandler("$destroy");
                            t(e)
                        }
                    ) : xn = le,
                    Un.element = xn,
                    Yn = !0
            }
        }(),
            function (t) {
                u(t, {
                    bootstrap: X,
                    copy: D,
                    extend: u,
                    merge: d,
                    equals: _,
                    element: xn,
                    forEach: o,
                    injector: Pe,
                    noop: f,
                    bind: L,
                    toJson: N,
                    fromJson: j,
                    identity: m,
                    isUndefined: v,
                    isDefined: y,
                    isString: $,
                    isFunction: x,
                    isObject: b,
                    isNumber: S,
                    isElement: I,
                    isArray: Fn,
                    version: Kn,
                    isDate: C,
                    lowercase: En,
                    uppercase: Mn,
                    callbacks: {
                        counter: 0
                    },
                    getTestability: K,
                    $$minErr: i,
                    $$csp: Hn,
                    reloadWithDebugInfo: J
                }),
                    kn = function (e) {
                        function t(e, t, n) {
                            return e[t] || (e[t] = n())
                        }
                        var n = i("$injector")
                            , r = i("ng");
                        return (e = t(e, "angular", Object)).$$minErr = e.$$minErr || i,
                            t(e, "module", function () {
                                var e = {};
                                return function (i, o, a) {
                                    if ("hasOwnProperty" === i)
                                        throw r("badname", "module");
                                    return o && e.hasOwnProperty(i) && (e[i] = null),
                                        t(e, i, function () {
                                            function e(e, n, i, r) {
                                                return r || (r = t),
                                                    function () {
                                                        return r[i || "push"]([e, n, arguments]),
                                                            c
                                                    }
                                            }
                                            if (!o)
                                                throw n("nomod", i);
                                            var t = []
                                                , r = []
                                                , s = []
                                                , l = e("$injector", "invoke", "push", r)
                                                , c = {
                                                    _invokeQueue: t,
                                                    _configBlocks: r,
                                                    _runBlocks: s,
                                                    requires: o,
                                                    name: i,
                                                    provider: e("$provide", "provider"),
                                                    factory: e("$provide", "factory"),
                                                    service: e("$provide", "service"),
                                                    value: e("$provide", "value"),
                                                    constant: e("$provide", "constant", "unshift"),
                                                    decorator: e("$provide", "decorator"),
                                                    animation: e("$animateProvider", "register"),
                                                    filter: e("$filterProvider", "register"),
                                                    controller: e("$controllerProvider", "register"),
                                                    directive: e("$compileProvider", "directive"),
                                                    config: l,
                                                    run: function (e) {
                                                        return s.push(e),
                                                            this
                                                    }
                                                };
                                            return a && l(a),
                                                c
                                        })
                                }
                            })
                    }(e);
                try {
                    kn("ngLocale")
                } catch (e) {
                    kn("ngLocale", []).provider("$locale", Ze)
                }
                kn("ng", ["ngLocale"], ["$provide", function (e) {
                    e.provider({
                        $$sanitizeUri: Rt
                    }),
                        e.provider("$compile", _e).directive({
                            a: ir,
                            input: br,
                            textarea: br,
                            form: sr,
                            script: so,
                            select: uo,
                            style: ho,
                            option: po,
                            ngBind: Sr,
                            ngBindHtml: xr,
                            ngBindTemplate: Cr,
                            ngClass: kr,
                            ngClassEven: Er,
                            ngClassOdd: Pr,
                            ngCloak: Ir,
                            ngController: Mr,
                            ngForm: lr,
                            ngHide: to,
                            ngIf: Ar,
                            ngInclude: _r,
                            ngInit: Lr,
                            ngNonBindable: Yr,
                            ngPluralize: Qr,
                            ngRepeat: Zr,
                            ngShow: eo,
                            ngStyle: no,
                            ngSwitch: io,
                            ngSwitchWhen: ro,
                            ngSwitchDefault: oo,
                            ngOptions: Kr,
                            ngTransclude: ao,
                            ngModel: Wr,
                            ngList: Ur,
                            ngChange: Tr,
                            pattern: mo,
                            ngPattern: mo,
                            required: fo,
                            ngRequired: fo,
                            minlength: vo,
                            ngMinlength: vo,
                            maxlength: go,
                            ngMaxlength: go,
                            ngValue: $r,
                            ngModelOptions: Gr
                        }).directive({
                            ngInclude: Rr
                        }).directive(rr).directive(Or),
                        e.provider({
                            $anchorScroll: Ee,
                            $animate: Si,
                            $$animateQueue: $i,
                            $$AnimateRunner: wi,
                            $browser: Oe,
                            $cacheFactory: De,
                            $controller: Ne,
                            $document: je,
                            $exceptionHandler: Fe,
                            $filter: Yt,
                            $interpolate: Ke,
                            $interval: Qe,
                            $http: Ye,
                            $httpParamSerializer: Ve,
                            $httpParamSerializerJQLike: ze,
                            $httpBackend: Je,
                            $location: pt,
                            $log: ht,
                            $parse: It,
                            $rootScope: _t,
                            $q: Mt,
                            $$q: Ot,
                            $sce: Nt,
                            $sceDelegate: Ut,
                            $sniffer: jt,
                            $templateCache: Ae,
                            $templateRequest: Ft,
                            $$testability: Bt,
                            $timeout: Vt,
                            $window: Wt,
                            $$rAF: At,
                            $$asyncCallback: Me,
                            $$jqLite: xe,
                            $$HashMap: hi,
                            $$cookieReader: Gt
                        })
                }
                ])
            }(Un),
            xn(t).ready(function () {
                Y(t, X)
            }))
    }(window, document),
    !window.angular.$$csp() && window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),
    angular.module("ui.bootstrap", ["ui.bootstrap.tpls", "ui.bootstrap.collapse", "ui.bootstrap.accordion", "ui.bootstrap.alert", "ui.bootstrap.buttons", "ui.bootstrap.carousel", "ui.bootstrap.dateparser", "ui.bootstrap.isClass", "ui.bootstrap.datepicker", "ui.bootstrap.position", "ui.bootstrap.datepickerPopup", "ui.bootstrap.debounce", "ui.bootstrap.dropdown", "ui.bootstrap.stackedMap", "ui.bootstrap.modal", "ui.bootstrap.paging", "ui.bootstrap.pager", "ui.bootstrap.pagination", "ui.bootstrap.tooltip", "ui.bootstrap.popover", "ui.bootstrap.progressbar", "ui.bootstrap.rating", "ui.bootstrap.tabs", "ui.bootstrap.timepicker", "ui.bootstrap.typeahead"]),
    angular.module("ui.bootstrap.tpls", ["uib/template/accordion/accordion-group.html", "uib/template/accordion/accordion.html", "uib/template/alert/alert.html", "uib/template/carousel/carousel.html", "uib/template/carousel/slide.html", "uib/template/datepicker/datepicker.html", "uib/template/datepicker/day.html", "uib/template/datepicker/month.html", "uib/template/datepicker/year.html", "uib/template/datepickerPopup/popup.html", "uib/template/modal/backdrop.html", "uib/template/modal/window.html", "uib/template/pager/pager.html", "uib/template/pagination/pagination.html", "uib/template/tooltip/tooltip-html-popup.html", "uib/template/tooltip/tooltip-popup.html", "uib/template/tooltip/tooltip-template-popup.html", "uib/template/popover/popover-html.html", "uib/template/popover/popover-template.html", "uib/template/popover/popover.html", "uib/template/progressbar/bar.html", "uib/template/progressbar/progress.html", "uib/template/progressbar/progressbar.html", "uib/template/rating/rating.html", "uib/template/tabs/tab.html", "uib/template/tabs/tabset.html", "uib/template/timepicker/timepicker.html", "uib/template/typeahead/typeahead-match.html", "uib/template/typeahead/typeahead-popup.html"]),
    angular.module("ui.bootstrap.collapse", []).directive("uibCollapse", ["$animate", "$q", "$parse", "$injector", function (e, t, n, i) {
        var r = i.has("$animateCss") ? i.get("$animateCss") : null;
        return {
            link: function (i, o, a) {
                var s = n(a.expanding)
                    , l = n(a.expanded)
                    , c = n(a.collapsing)
                    , u = n(a.collapsed);
                function d() {
                    o.removeClass("collapsing").addClass("collapse").css({
                        height: "auto"
                    }),
                        l(i)
                }
                function p() {
                    o.css({
                        height: "0"
                    }),
                        o.removeClass("collapsing").addClass("collapse"),
                        u(i)
                }
                i.$eval(a.uibCollapse) || o.addClass("in").addClass("collapse").attr("aria-expanded", !0).attr("aria-hidden", !1).css({
                    height: "auto"
                }),
                    i.$watch(a.uibCollapse, function (n) {
                        n ? function () {
                            if (!o.hasClass("collapse") && !o.hasClass("in"))
                                return p();
                            t.resolve(c(i)).then(function () {
                                o.css({
                                    height: o[0].scrollHeight + "px"
                                }).removeClass("collapse").addClass("collapsing").attr("aria-expanded", !1).attr("aria-hidden", !0),
                                    r ? r(o, {
                                        removeClass: "in",
                                        to: {
                                            height: "0"
                                        }
                                    }).start().finally(p) : e.removeClass(o, "in", {
                                        to: {
                                            height: "0"
                                        }
                                    }).then(p)
                            })
                        }() : o.hasClass("collapse") && o.hasClass("in") || t.resolve(s(i)).then(function () {
                            o.removeClass("collapse").addClass("collapsing").attr("aria-expanded", !0).attr("aria-hidden", !1),
                                r ? r(o, {
                                    addClass: "in",
                                    easing: "ease",
                                    to: {
                                        height: o[0].scrollHeight + "px"
                                    }
                                }).start().finally(d) : e.addClass(o, "in", {
                                    to: {
                                        height: o[0].scrollHeight + "px"
                                    }
                                }).then(d)
                        })
                    })
            }
        }
    }
    ]),
    angular.module("ui.bootstrap.accordion", ["ui.bootstrap.collapse"]).constant("uibAccordionConfig", {
        closeOthers: !0
    }).controller("UibAccordionController", ["$scope", "$attrs", "uibAccordionConfig", function (e, t, n) {
        this.groups = [],
            this.closeOthers = function (i) {
                (angular.isDefined(t.closeOthers) ? e.$eval(t.closeOthers) : n.closeOthers) && angular.forEach(this.groups, function (e) {
                    e !== i && (e.isOpen = !1)
                })
            }
            ,
            this.addGroup = function (e) {
                var t = this;
                this.groups.push(e),
                    e.$on("$destroy", function (n) {
                        t.removeGroup(e)
                    })
            }
            ,
            this.removeGroup = function (e) {
                var t = this.groups.indexOf(e);
                -1 !== t && this.groups.splice(t, 1)
            }
    }
    ]).directive("uibAccordion", function () {
        return {
            controller: "UibAccordionController",
            controllerAs: "accordion",
            transclude: !0,
            templateUrl: function (e, t) {
                return t.templateUrl || "uib/template/accordion/accordion.html"
            }
        }
    }).directive("uibAccordionGroup", function () {
        return {
            require: "^uibAccordion",
            transclude: !0,
            replace: !0,
            templateUrl: function (e, t) {
                return t.templateUrl || "uib/template/accordion/accordion-group.html"
            },
            scope: {
                heading: "@",
                panelClass: "@?",
                isOpen: "=?",
                isDisabled: "=?"
            },
            controller: function () {
                this.setHeading = function (e) {
                    this.heading = e
                }
            },
            link: function (e, t, n, i) {
                i.addGroup(e),
                    e.openClass = n.openClass || "panel-open",
                    e.panelClass = n.panelClass || "panel-default",
                    e.$watch("isOpen", function (n) {
                        t.toggleClass(e.openClass, !!n),
                            n && i.closeOthers(e)
                    }),
                    e.toggleOpen = function (t) {
                        e.isDisabled || t && 32 !== t.which || (e.isOpen = !e.isOpen)
                    }
                    ;
                var r = "accordiongroup-" + e.$id + "-" + Math.floor(1e4 * Math.random());
                e.headingId = r + "-tab",
                    e.panelId = r + "-panel"
            }
        }
    }).directive("uibAccordionHeading", function () {
        return {
            transclude: !0,
            template: "",
            replace: !0,
            require: "^uibAccordionGroup",
            link: function (e, t, n, i, r) {
                i.setHeading(r(e, angular.noop))
            }
        }
    }).directive("uibAccordionTransclude", function () {
        return {
            require: "^uibAccordionGroup",
            link: function (e, t, n, i) {
                e.$watch(function () {
                    return i[n.uibAccordionTransclude]
                }, function (e) {
                    if (e) {
                        var n = angular.element(t[0].querySelector("uib-accordion-header,data-uib-accordion-header,x-uib-accordion-header,uib\\:accordion-header,[uib-accordion-header],[data-uib-accordion-header],[x-uib-accordion-header]"));
                        n.html(""),
                            n.append(e)
                    }
                })
            }
        }
    }),
    angular.module("ui.bootstrap.alert", []).controller("UibAlertController", ["$scope", "$attrs", "$interpolate", "$timeout", function (e, t, n, i) {
        e.closeable = !!t.close;
        var r = angular.isDefined(t.dismissOnTimeout) ? n(t.dismissOnTimeout)(e.$parent) : null;
        r && i(function () {
            e.close()
        }, parseInt(r, 10))
    }
    ]).directive("uibAlert", function () {
        return {
            controller: "UibAlertController",
            controllerAs: "alert",
            templateUrl: function (e, t) {
                return t.templateUrl || "uib/template/alert/alert.html"
            },
            transclude: !0,
            replace: !0,
            scope: {
                type: "@",
                close: "&"
            }
        }
    }),
    angular.module("ui.bootstrap.buttons", []).constant("uibButtonConfig", {
        activeClass: "active",
        toggleEvent: "click"
    }).controller("UibButtonsController", ["uibButtonConfig", function (e) {
        this.activeClass = e.activeClass || "active",
            this.toggleEvent = e.toggleEvent || "click"
    }
    ]).directive("uibBtnRadio", ["$parse", function (e) {
        return {
            require: ["uibBtnRadio", "ngModel"],
            controller: "UibButtonsController",
            controllerAs: "buttons",
            link: function (t, n, i, r) {
                var o = r[0]
                    , a = r[1]
                    , s = e(i.uibUncheckable);
                n.find("input").css({
                    display: "none"
                }),
                    a.$render = function () {
                        n.toggleClass(o.activeClass, angular.equals(a.$modelValue, t.$eval(i.uibBtnRadio)))
                    }
                    ,
                    n.on(o.toggleEvent, function () {
                        if (!i.disabled) {
                            var e = n.hasClass(o.activeClass);
                            e && !angular.isDefined(i.uncheckable) || t.$apply(function () {
                                a.$setViewValue(e ? null : t.$eval(i.uibBtnRadio)),
                                    a.$render()
                            })
                        }
                    }),
                    i.uibUncheckable && t.$watch(s, function (e) {
                        i.$set("uncheckable", e ? "" : void 0)
                    })
            }
        }
    }
    ]).directive("uibBtnCheckbox", function () {
        return {
            require: ["uibBtnCheckbox", "ngModel"],
            controller: "UibButtonsController",
            controllerAs: "button",
            link: function (e, t, n, i) {
                var r = i[0]
                    , o = i[1];
                function a() {
                    return s(n.btnCheckboxTrue, !0)
                }
                function s(t, n) {
                    return angular.isDefined(t) ? e.$eval(t) : n
                }
                t.find("input").css({
                    display: "none"
                }),
                    o.$render = function () {
                        t.toggleClass(r.activeClass, angular.equals(o.$modelValue, a()))
                    }
                    ,
                    t.on(r.toggleEvent, function () {
                        n.disabled || e.$apply(function () {
                            o.$setViewValue(t.hasClass(r.activeClass) ? s(n.btnCheckboxFalse, !1) : a()),
                                o.$render()
                        })
                    })
            }
        }
    }),
    angular.module("ui.bootstrap.carousel", []).controller("UibCarouselController", ["$scope", "$element", "$interval", "$timeout", "$animate", function (e, t, n, i, r) {
        var o, a, s = this, l = s.slides = e.slides = [], c = "uib-slideDirection", u = e.active, d = [], p = !1;
        function h() {
            for (; d.length;)
                d.shift()
        }
        function f(e) {
            for (var t = 0; t < l.length; t++)
                l[t].slide.active = t === e
        }
        function m(e) {
            for (var t = 0; t < l.length; t++)
                if (l[t].slide === e)
                    return t
        }
        function g() {
            o && (n.cancel(o),
                o = null)
        }
        function v() {
            g();
            var t = +e.interval;
            !isNaN(t) && t > 0 && (o = n(y, t))
        }
        function y() {
            var t = +e.interval;
            a && !isNaN(t) && t > 0 && l.length ? e.next() : e.pause()
        }
        s.addSlide = function (t, n) {
            l.push({
                slide: t,
                element: n
            }),
                l.sort(function (e, t) {
                    return +e.slide.index - +t.slide.index
                }),
                (t.index === e.active || 1 === l.length && !angular.isNumber(e.active)) && (e.$currentTransition && (e.$currentTransition = null),
                    u = t.index,
                    e.active = t.index,
                    f(u),
                    s.select(l[m(t)]),
                    1 === l.length && e.play())
        }
            ,
            s.getCurrentIndex = function () {
                for (var e = 0; e < l.length; e++)
                    if (l[e].slide.index === u)
                        return e
            }
            ,
            s.next = e.next = function () {
                var t = (s.getCurrentIndex() + 1) % l.length;
                if (0 !== t || !e.noWrap())
                    return s.select(l[t], "next");
                e.pause()
            }
            ,
            s.prev = e.prev = function () {
                var t = s.getCurrentIndex() - 1 < 0 ? l.length - 1 : s.getCurrentIndex() - 1;
                if (!e.noWrap() || t !== l.length - 1)
                    return s.select(l[t], "prev");
                e.pause()
            }
            ,
            s.removeSlide = function (t) {
                var n = m(t)
                    , i = d.indexOf(l[n]);
                -1 !== i && d.splice(i, 1),
                    l.splice(n, 1),
                    l.length > 0 && u === n ? n >= l.length ? (u = l.length - 1,
                        e.active = u,
                        f(u),
                        s.select(l[l.length - 1])) : (u = n,
                            e.active = u,
                            f(u),
                            s.select(l[n])) : u > n && (u--,
                                e.active = u),
                    0 === l.length && (u = null,
                        e.active = null,
                        h())
            }
            ,
            s.select = e.select = function (n, i) {
                var o = m(n.slide);
                void 0 === i && (i = o > s.getCurrentIndex() ? "next" : "prev"),
                    n.slide.index === u || e.$currentTransition ? n && n.slide.index !== u && e.$currentTransition && d.push(l[o]) : function n(i, o, a) {
                        if (p)
                            return;
                        angular.extend(i, {
                            direction: a
                        });
                        angular.extend(l[u].slide || {}, {
                            direction: a
                        });
                        if (r.enabled(t) && !e.$currentTransition && l[o].element && s.slides.length > 1) {
                            l[o].element.data(c, i.direction);
                            var m = s.getCurrentIndex();
                            angular.isNumber(m) && l[m].element && l[m].element.data(c, i.direction),
                                e.$currentTransition = !0,
                                r.on("addClass", l[o].element, function (t, i) {
                                    if ("close" === i && (e.$currentTransition = null,
                                        r.off("addClass", t),
                                        d.length)) {
                                        var o = d.pop().slide
                                            , a = o.index
                                            , l = a > s.getCurrentIndex() ? "next" : "prev";
                                        h(),
                                            n(o, a, l)
                                    }
                                })
                        }
                        e.active = i.index;
                        u = i.index;
                        f(o);
                        v()
                    }(n.slide, o, i)
            }
            ,
            e.indexOfSlide = function (e) {
                return +e.slide.index
            }
            ,
            e.isActive = function (t) {
                return e.active === t.slide.index
            }
            ,
            e.isPrevDisabled = function () {
                return 0 === e.active && e.noWrap()
            }
            ,
            e.isNextDisabled = function () {
                return e.active === l.length - 1 && e.noWrap()
            }
            ,
            e.pause = function () {
                e.noPause || (a = !1,
                    g())
            }
            ,
            e.play = function () {
                a || (a = !0,
                    v())
            }
            ,
            e.$on("$destroy", function () {
                p = !0,
                    g()
            }),
            e.$watch("noTransition", function (e) {
                r.enabled(t, !e)
            }),
            e.$watch("interval", v),
            e.$watchCollection("slides", function (t) {
                t.length || (e.$currentTransition = null,
                    h())
            }),
            e.$watch("active", function (e) {
                if (angular.isNumber(e) && u !== e) {
                    for (var t = 0; t < l.length; t++)
                        if (l[t].slide.index === e) {
                            e = t;
                            break
                        }
                    l[e] && (f(e),
                        s.select(l[e]),
                        u = e)
                }
            })
    }
    ]).directive("uibCarousel", function () {
        return {
            transclude: !0,
            replace: !0,
            controller: "UibCarouselController",
            controllerAs: "carousel",
            templateUrl: function (e, t) {
                return t.templateUrl || "uib/template/carousel/carousel.html"
            },
            scope: {
                active: "=",
                interval: "=",
                noTransition: "=",
                noPause: "=",
                noWrap: "&"
            }
        }
    }).directive("uibSlide", function () {
        return {
            require: "^uibCarousel",
            transclude: !0,
            replace: !0,
            templateUrl: function (e, t) {
                return t.templateUrl || "uib/template/carousel/slide.html"
            },
            scope: {
                actual: "=?",
                index: "=?"
            },
            link: function (e, t, n, i) {
                i.addSlide(e, t),
                    e.$on("$destroy", function () {
                        i.removeSlide(e)
                    })
            }
        }
    }).animation(".item", ["$animateCss", function (e) {
        function t(e, t, n) {
            e.removeClass(t),
                n && n()
        }
        return {
            beforeAddClass: function (n, i, r) {
                if ("active" === i) {
                    var o = n.data("uib-slideDirection")
                        , a = "next" === o ? "left" : "right"
                        , s = t.bind(this, n, a + " " + o, r);
                    return n.addClass(o),
                        e(n, {
                            addClass: a
                        }).start().done(s),
                        function () {
                            !0
                        }
                }
                r()
            },
            beforeRemoveClass: function (n, i, r) {
                if ("active" === i) {
                    var o = "next" === n.data("uib-slideDirection") ? "left" : "right"
                        , a = t.bind(this, n, o, r);
                    return e(n, {
                        addClass: o
                    }).start().done(a),
                        function () {
                            !0
                        }
                }
                r()
            }
        }
    }
    ]),
    angular.module("ui.bootstrap.dateparser", []).service("uibDateParser", ["$log", "$locale", "dateFilter", "orderByFilter", function (e, t, n, i) {
        var r, o, a = /[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;
        function s(e, t) {
            var n = []
                , r = e.split("")
                , a = e.indexOf("'");
            if (a > -1) {
                var s = !1;
                e = e.split("");
                for (var l = a; l < e.length; l++)
                    s ? ("'" === e[l] && (l + 1 < e.length && "'" === e[l + 1] ? (e[l + 1] = "$",
                        r[l + 1] = "") : (r[l] = "",
                            s = !1)),
                        e[l] = "$") : "'" === e[l] && (e[l] = "$",
                            r[l] = "",
                            s = !0);
                e = e.join("")
            }
            return angular.forEach(o, function (i) {
                var o = e.indexOf(i.key);
                if (o > -1) {
                    e = e.split(""),
                        r[o] = "(" + i.regex + ")",
                        e[o] = "$";
                    for (var a = o + 1, s = o + i.key.length; a < s; a++)
                        r[a] = "",
                            e[a] = "$";
                    e = e.join(""),
                        n.push({
                            index: o,
                            key: i.key,
                            apply: i[t],
                            matcher: i.regex
                        })
                }
            }),
            {
                regex: new RegExp("^" + r.join("") + "$"),
                map: i(n, "index")
            }
        }
        function l(e) {
            return parseInt(e, 10)
        }
        function c(e, t) {
            e = e.replace(/:/g, "");
            var n = Date.parse("Jan 01, 1970 00:00:00 " + e) / 6e4;
            return isNaN(n) ? t : n
        }
        function u(e, t) {
            return (e = new Date(e.getTime())).setMinutes(e.getMinutes() + t),
                e
        }
        function d(e, t, n) {
            n = n ? -1 : 1;
            var i = e.getTimezoneOffset();
            return u(e, n * (c(t, i) - i))
        }
        this.init = function () {
            r = t.id,
                this.parsers = {},
                this.formatters = {},
                o = [{
                    key: "yyyy",
                    regex: "\\d{4}",
                    apply: function (e) {
                        this.year = +e
                    },
                    formatter: function (e) {
                        var t = new Date;
                        return t.setFullYear(Math.abs(e.getFullYear())),
                            n(t, "yyyy")
                    }
                }, {
                    key: "yy",
                    regex: "\\d{2}",
                    apply: function (e) {
                        e = +e,
                            this.year = e < 69 ? e + 2e3 : e + 1900
                    },
                    formatter: function (e) {
                        var t = new Date;
                        return t.setFullYear(Math.abs(e.getFullYear())),
                            n(t, "yy")
                    }
                }, {
                    key: "y",
                    regex: "\\d{1,4}",
                    apply: function (e) {
                        this.year = +e
                    },
                    formatter: function (e) {
                        var t = new Date;
                        return t.setFullYear(Math.abs(e.getFullYear())),
                            n(t, "y")
                    }
                }, {
                    key: "M!",
                    regex: "0?[1-9]|1[0-2]",
                    apply: function (e) {
                        this.month = e - 1
                    },
                    formatter: function (e) {
                        var t = e.getMonth();
                        return /^[0-9]$/.test(t) ? n(e, "MM") : n(e, "M")
                    }
                }, {
                    key: "MMMM",
                    regex: t.DATETIME_FORMATS.MONTH.join("|"),
                    apply: function (e) {
                        this.month = t.DATETIME_FORMATS.MONTH.indexOf(e)
                    },
                    formatter: function (e) {
                        return n(e, "MMMM")
                    }
                }, {
                    key: "MMM",
                    regex: t.DATETIME_FORMATS.SHORTMONTH.join("|"),
                    apply: function (e) {
                        this.month = t.DATETIME_FORMATS.SHORTMONTH.indexOf(e)
                    },
                    formatter: function (e) {
                        return n(e, "MMM")
                    }
                }, {
                    key: "MM",
                    regex: "0[1-9]|1[0-2]",
                    apply: function (e) {
                        this.month = e - 1
                    },
                    formatter: function (e) {
                        return n(e, "MM")
                    }
                }, {
                    key: "M",
                    regex: "[1-9]|1[0-2]",
                    apply: function (e) {
                        this.month = e - 1
                    },
                    formatter: function (e) {
                        return n(e, "M")
                    }
                }, {
                    key: "d!",
                    regex: "[0-2]?[0-9]{1}|3[0-1]{1}",
                    apply: function (e) {
                        this.date = +e
                    },
                    formatter: function (e) {
                        var t = e.getDate();
                        return /^[1-9]$/.test(t) ? n(e, "dd") : n(e, "d")
                    }
                }, {
                    key: "dd",
                    regex: "[0-2][0-9]{1}|3[0-1]{1}",
                    apply: function (e) {
                        this.date = +e
                    },
                    formatter: function (e) {
                        return n(e, "dd")
                    }
                }, {
                    key: "d",
                    regex: "[1-2]?[0-9]{1}|3[0-1]{1}",
                    apply: function (e) {
                        this.date = +e
                    },
                    formatter: function (e) {
                        return n(e, "d")
                    }
                }, {
                    key: "EEEE",
                    regex: t.DATETIME_FORMATS.DAY.join("|"),
                    formatter: function (e) {
                        return n(e, "EEEE")
                    }
                }, {
                    key: "EEE",
                    regex: t.DATETIME_FORMATS.SHORTDAY.join("|"),
                    formatter: function (e) {
                        return n(e, "EEE")
                    }
                }, {
                    key: "HH",
                    regex: "(?:0|1)[0-9]|2[0-3]",
                    apply: function (e) {
                        this.hours = +e
                    },
                    formatter: function (e) {
                        return n(e, "HH")
                    }
                }, {
                    key: "hh",
                    regex: "0[0-9]|1[0-2]",
                    apply: function (e) {
                        this.hours = +e
                    },
                    formatter: function (e) {
                        return n(e, "hh")
                    }
                }, {
                    key: "H",
                    regex: "1?[0-9]|2[0-3]",
                    apply: function (e) {
                        this.hours = +e
                    },
                    formatter: function (e) {
                        return n(e, "H")
                    }
                }, {
                    key: "h",
                    regex: "[0-9]|1[0-2]",
                    apply: function (e) {
                        this.hours = +e
                    },
                    formatter: function (e) {
                        return n(e, "h")
                    }
                }, {
                    key: "mm",
                    regex: "[0-5][0-9]",
                    apply: function (e) {
                        this.minutes = +e
                    },
                    formatter: function (e) {
                        return n(e, "mm")
                    }
                }, {
                    key: "m",
                    regex: "[0-9]|[1-5][0-9]",
                    apply: function (e) {
                        this.minutes = +e
                    },
                    formatter: function (e) {
                        return n(e, "m")
                    }
                }, {
                    key: "sss",
                    regex: "[0-9][0-9][0-9]",
                    apply: function (e) {
                        this.milliseconds = +e
                    },
                    formatter: function (e) {
                        return n(e, "sss")
                    }
                }, {
                    key: "ss",
                    regex: "[0-5][0-9]",
                    apply: function (e) {
                        this.seconds = +e
                    },
                    formatter: function (e) {
                        return n(e, "ss")
                    }
                }, {
                    key: "s",
                    regex: "[0-9]|[1-5][0-9]",
                    apply: function (e) {
                        this.seconds = +e
                    },
                    formatter: function (e) {
                        return n(e, "s")
                    }
                }, {
                    key: "a",
                    regex: t.DATETIME_FORMATS.AMPMS.join("|"),
                    apply: function (e) {
                        12 === this.hours && (this.hours = 0),
                            "PM" === e && (this.hours += 12)
                    },
                    formatter: function (e) {
                        return n(e, "a")
                    }
                }, {
                    key: "Z",
                    regex: "[+-]\\d{4}",
                    apply: function (e) {
                        var t = e.match(/([+-])(\d{2})(\d{2})/)
                            , n = t[1]
                            , i = t[2]
                            , r = t[3];
                        this.hours += l(n + i),
                            this.minutes += l(n + r)
                    },
                    formatter: function (e) {
                        return n(e, "Z")
                    }
                }, {
                    key: "ww",
                    regex: "[0-4][0-9]|5[0-3]",
                    formatter: function (e) {
                        return n(e, "ww")
                    }
                }, {
                    key: "w",
                    regex: "[0-9]|[1-4][0-9]|5[0-3]",
                    formatter: function (e) {
                        return n(e, "w")
                    }
                }, {
                    key: "GGGG",
                    regex: t.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g, "\\s"),
                    formatter: function (e) {
                        return n(e, "GGGG")
                    }
                }, {
                    key: "GGG",
                    regex: t.DATETIME_FORMATS.ERAS.join("|"),
                    formatter: function (e) {
                        return n(e, "GGG")
                    }
                }, {
                    key: "GG",
                    regex: t.DATETIME_FORMATS.ERAS.join("|"),
                    formatter: function (e) {
                        return n(e, "GG")
                    }
                }, {
                    key: "G",
                    regex: t.DATETIME_FORMATS.ERAS.join("|"),
                    formatter: function (e) {
                        return n(e, "G")
                    }
                }]
        }
            ,
            this.init(),
            this.filter = function (e, n) {
                if (!angular.isDate(e) || isNaN(e) || !n)
                    return "";
                n = t.DATETIME_FORMATS[n] || n,
                    t.id !== r && this.init(),
                    this.formatters[n] || (this.formatters[n] = s(n, "formatter"));
                var i = this.formatters[n].map
                    , o = n;
                return i.reduce(function (t, n, r) {
                    var a = o.match(new RegExp("(.*)" + n.key));
                    a && angular.isString(a[1]) && (t += a[1],
                        o = o.replace(a[1] + n.key, ""));
                    var s = r === i.length - 1 ? o : "";
                    return n.apply ? t + n.apply.call(null, e) + s : t + s
                }, "")
            }
            ,
            this.parse = function (n, i, o) {
                if (!angular.isString(n) || !i)
                    return n;
                i = (i = t.DATETIME_FORMATS[i] || i).replace(a, "\\$&"),
                    t.id !== r && this.init(),
                    this.parsers[i] || (this.parsers[i] = s(i, "apply"));
                var l = this.parsers[i]
                    , c = l.regex
                    , u = l.map
                    , d = n.match(c)
                    , p = !1;
                if (d && d.length) {
                    var h, f;
                    angular.isDate(o) && !isNaN(o.getTime()) ? h = {
                        year: o.getFullYear(),
                        month: o.getMonth(),
                        date: o.getDate(),
                        hours: o.getHours(),
                        minutes: o.getMinutes(),
                        seconds: o.getSeconds(),
                        milliseconds: o.getMilliseconds()
                    } : (o && e.warn("dateparser:", "baseDate is not a valid date"),
                        h = {
                            year: 1900,
                            month: 0,
                            date: 1,
                            hours: 0,
                            minutes: 0,
                            seconds: 0,
                            milliseconds: 0
                        });
                    for (var m = 1, g = d.length; m < g; m++) {
                        var v = u[m - 1];
                        "Z" === v.matcher && (p = !0),
                            v.apply && v.apply.call(h, d[m])
                    }
                    var y = p ? Date.prototype.setUTCFullYear : Date.prototype.setFullYear
                        , b = p ? Date.prototype.setUTCHours : Date.prototype.setHours;
                    return function (e, t, n) {
                        if (n < 1)
                            return !1;
                        if (1 === t && n > 28)
                            return 29 === n && (e % 4 == 0 && e % 100 != 0 || e % 400 == 0);
                        if (3 === t || 5 === t || 8 === t || 10 === t)
                            return n < 31;
                        return !0
                    }(h.year, h.month, h.date) && (!angular.isDate(o) || isNaN(o.getTime()) || p ? (f = new Date(0),
                        y.call(f, h.year, h.month, h.date),
                        b.call(f, h.hours || 0, h.minutes || 0, h.seconds || 0, h.milliseconds || 0)) : (f = new Date(o),
                            y.call(f, h.year, h.month, h.date),
                            b.call(f, h.hours, h.minutes, h.seconds, h.milliseconds))),
                        f
                }
            }
            ,
            this.toTimezone = function (e, t) {
                return e && t ? d(e, t) : e
            }
            ,
            this.fromTimezone = function (e, t) {
                return e && t ? d(e, t, !0) : e
            }
            ,
            this.timezoneToOffset = c,
            this.addDateMinutes = u,
            this.convertTimezoneToLocal = d
    }
    ]),
    angular.module("ui.bootstrap.isClass", []).directive("uibIsClass", ["$animate", function (e) {
        var t = /^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/
            , n = /^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;
        return {
            restrict: "A",
            compile: function (i, r) {
                var o = []
                    , a = []
                    , s = {}
                    , l = r.uibIsClass.match(t)
                    , c = l[2]
                    , u = l[1].split(",");
                return function (t, i, r) {
                    o.push(t),
                        a.push({
                            scope: t,
                            element: i
                        }),
                        u.forEach(function (i, r) {
                            !function (t, i) {
                                var r = t.match(n)
                                    , o = i.$eval(r[1])
                                    , l = r[2]
                                    , u = s[t];
                                if (!u) {
                                    var d = function (t) {
                                        var n = null;
                                        a.some(function (e) {
                                            var i = e.scope.$eval(c);
                                            if (i === t)
                                                return n = e,
                                                    !0
                                        }),
                                            u.lastActivated !== n && (u.lastActivated && e.removeClass(u.lastActivated.element, o),
                                                n && e.addClass(n.element, o),
                                                u.lastActivated = n)
                                    };
                                    s[t] = u = {
                                        lastActivated: null,
                                        scope: i,
                                        watchFn: d,
                                        compareWithExp: l,
                                        watcher: i.$watch(l, d)
                                    }
                                }
                                u.watchFn(i.$eval(l))
                            }(i, t)
                        }),
                        t.$on("$destroy", d)
                }
                    ;
                function d(e) {
                    var t = e.targetScope
                        , n = o.indexOf(t);
                    if (o.splice(n, 1),
                        a.splice(n, 1),
                        o.length) {
                        var i = o[0];
                        angular.forEach(s, function (e) {
                            e.scope === t && (e.watcher = i.$watch(e.compareWithExp, e.watchFn),
                                e.scope = i)
                        })
                    } else
                        s = {}
                }
            }
        }
    }
    ]),
    angular.module("ui.bootstrap.datepicker", ["ui.bootstrap.dateparser", "ui.bootstrap.isClass"]).value("$datepickerSuppressError", !1).value("$datepickerLiteralWarning", !0).constant("uibDatepickerConfig", {
        datepickerMode: "day",
        formatDay: "dd",
        formatMonth: "MMMM",
        formatYear: "yyyy",
        formatDayHeader: "EEE",
        formatDayTitle: "MMMM yyyy",
        formatMonthTitle: "yyyy",
        maxDate: null,
        maxMode: "year",
        minDate: null,
        minMode: "day",
        ngModelOptions: {},
        shortcutPropagation: !1,
        showWeeks: !0,
        yearColumns: 5,
        yearRows: 4
    }).controller("UibDatepickerController", ["$scope", "$attrs", "$parse", "$interpolate", "$locale", "$log", "dateFilter", "uibDatepickerConfig", "$datepickerLiteralWarning", "$datepickerSuppressError", "uibDateParser", function (e, t, n, i, r, o, a, s, l, c, u) {
        var d = this
            , p = {
                $setViewValue: angular.noop
            }
            , h = {}
            , f = [];
        t.datepickerOptions;
        e.datepickerOptions || (e.datepickerOptions = {}),
            this.modes = ["day", "month", "year"],
            ["customClass", "dateDisabled", "datepickerMode", "formatDay", "formatDayHeader", "formatDayTitle", "formatMonth", "formatMonthTitle", "formatYear", "maxDate", "maxMode", "minDate", "minMode", "showWeeks", "shortcutPropagation", "startingDay", "yearColumns", "yearRows"].forEach(function (t) {
                switch (t) {
                    case "customClass":
                    case "dateDisabled":
                        e[t] = e.datepickerOptions[t] || angular.noop;
                        break;
                    case "datepickerMode":
                        e.datepickerMode = angular.isDefined(e.datepickerOptions.datepickerMode) ? e.datepickerOptions.datepickerMode : s.datepickerMode;
                        break;
                    case "formatDay":
                    case "formatDayHeader":
                    case "formatDayTitle":
                    case "formatMonth":
                    case "formatMonthTitle":
                    case "formatYear":
                        d[t] = angular.isDefined(e.datepickerOptions[t]) ? i(e.datepickerOptions[t])(e.$parent) : s[t];
                        break;
                    case "showWeeks":
                    case "shortcutPropagation":
                    case "yearColumns":
                    case "yearRows":
                        d[t] = angular.isDefined(e.datepickerOptions[t]) ? e.datepickerOptions[t] : s[t];
                        break;
                    case "startingDay":
                        angular.isDefined(e.datepickerOptions.startingDay) ? d.startingDay = e.datepickerOptions.startingDay : angular.isNumber(s.startingDay) ? d.startingDay = s.startingDay : d.startingDay = (r.DATETIME_FORMATS.FIRSTDAYOFWEEK + 8) % 7;
                        break;
                    case "maxDate":
                    case "minDate":
                        e.$watch("datepickerOptions." + t, function (e) {
                            e ? angular.isDate(e) ? d[t] = u.fromTimezone(new Date(e), h.timezone) : (l && o.warn("Literal date support has been deprecated, please switch to date object usage"),
                                d[t] = new Date(a(e, "medium"))) : d[t] = s[t] ? u.fromTimezone(new Date(s[t]), h.timezone) : null,
                                d.refreshView()
                        });
                        break;
                    case "maxMode":
                    case "minMode":
                        e.datepickerOptions[t] ? e.$watch(function () {
                            return e.datepickerOptions[t]
                        }, function (n) {
                            d[t] = e[t] = angular.isDefined(n) ? n : datepickerOptions[t],
                                ("minMode" === t && d.modes.indexOf(e.datepickerOptions.datepickerMode) < d.modes.indexOf(d[t]) || "maxMode" === t && d.modes.indexOf(e.datepickerOptions.datepickerMode) > d.modes.indexOf(d[t])) && (e.datepickerMode = d[t],
                                    e.datepickerOptions.datepickerMode = d[t])
                        }) : d[t] = e[t] = s[t] || null
                }
            }),
            e.uniqueId = "datepicker-" + e.$id + "-" + Math.floor(1e4 * Math.random()),
            e.disabled = angular.isDefined(t.disabled) || !1,
            angular.isDefined(t.ngDisabled) && f.push(e.$parent.$watch(t.ngDisabled, function (t) {
                e.disabled = t,
                    d.refreshView()
            })),
            e.isActive = function (t) {
                return 0 === d.compare(t.date, d.activeDate) && (e.activeDateId = t.uid,
                    !0)
            }
            ,
            this.init = function (t) {
                p = t,
                    h = t.$options || s.ngModelOptions,
                    e.datepickerOptions.initDate ? (d.activeDate = u.fromTimezone(e.datepickerOptions.initDate, h.timezone) || new Date,
                        e.$watch("datepickerOptions.initDate", function (e) {
                            e && (p.$isEmpty(p.$modelValue) || p.$invalid) && (d.activeDate = u.fromTimezone(e, h.timezone),
                                d.refreshView())
                        })) : d.activeDate = new Date;
                var n = p.$modelValue ? new Date(p.$modelValue) : new Date;
                this.activeDate = isNaN(n) ? u.fromTimezone(new Date, h.timezone) : u.fromTimezone(n, h.timezone),
                    p.$render = function () {
                        d.render()
                    }
            }
            ,
            this.render = function () {
                if (p.$viewValue) {
                    var e = new Date(p.$viewValue);
                    !isNaN(e) ? this.activeDate = u.fromTimezone(e, h.timezone) : c || o.error('Datepicker directive: "ng-model" value must be a Date object')
                }
                this.refreshView()
            }
            ,
            this.refreshView = function () {
                if (this.element) {
                    e.selectedDt = null,
                        this._refreshView(),
                        e.activeDt && (e.activeDateId = e.activeDt.uid);
                    var t = p.$viewValue ? new Date(p.$viewValue) : null;
                    t = u.fromTimezone(t, h.timezone),
                        p.$setValidity("dateDisabled", !t || this.element && !this.isDisabled(t))
                }
            }
            ,
            this.createDateObject = function (t, n) {
                var i = p.$viewValue ? new Date(p.$viewValue) : null;
                i = u.fromTimezone(i, h.timezone);
                var r = new Date;
                r = u.fromTimezone(r, h.timezone);
                var o = this.compare(t, r)
                    , a = {
                        date: t,
                        label: u.filter(t, n),
                        selected: i && 0 === this.compare(t, i),
                        disabled: this.isDisabled(t),
                        past: o < 0,
                        current: 0 === o,
                        future: o > 0,
                        customClass: this.customClass(t) || null
                    };
                return i && 0 === this.compare(t, i) && (e.selectedDt = a),
                    d.activeDate && 0 === this.compare(a.date, d.activeDate) && (e.activeDt = a),
                    a
            }
            ,
            this.isDisabled = function (t) {
                return e.disabled || this.minDate && this.compare(t, this.minDate) < 0 || this.maxDate && this.compare(t, this.maxDate) > 0 || e.dateDisabled && e.dateDisabled({
                    date: t,
                    mode: e.datepickerMode
                })
            }
            ,
            this.customClass = function (t) {
                return e.customClass({
                    date: t,
                    mode: e.datepickerMode
                })
            }
            ,
            this.split = function (e, t) {
                for (var n = []; e.length > 0;)
                    n.push(e.splice(0, t));
                return n
            }
            ,
            e.select = function (t) {
                if (e.datepickerMode === d.minMode) {
                    var n = p.$viewValue ? u.fromTimezone(new Date(p.$viewValue), h.timezone) : new Date(0, 0, 0, 0, 0, 0, 0);
                    n.setFullYear(t.getFullYear(), t.getMonth(), t.getDate()),
                        n = u.toTimezone(n, h.timezone),
                        p.$setViewValue(n),
                        p.$render()
                } else
                    d.activeDate = t,
                        m(d.modes[d.modes.indexOf(e.datepickerMode) - 1]),
                        e.$emit("uib:datepicker.mode");
                e.$broadcast("uib:datepicker.focus")
            }
            ,
            e.move = function (e) {
                var t = d.activeDate.getFullYear() + e * (d.step.years || 0)
                    , n = d.activeDate.getMonth() + e * (d.step.months || 0);
                d.activeDate.setFullYear(t, n, 1),
                    d.refreshView()
            }
            ,
            e.toggleMode = function (t) {
                t = t || 1,
                    e.datepickerMode === d.maxMode && 1 === t || e.datepickerMode === d.minMode && -1 === t || (m(d.modes[d.modes.indexOf(e.datepickerMode) + t]),
                        e.$emit("uib:datepicker.mode"))
            }
            ,
            e.keys = {
                13: "enter",
                32: "space",
                33: "pageup",
                34: "pagedown",
                35: "end",
                36: "home",
                37: "left",
                38: "up",
                39: "right",
                40: "down"
            };
        function m(t) {
            e.datepickerMode = t,
                e.datepickerOptions.datepickerMode = t
        }
        e.$on("uib:datepicker.focus", function () {
            d.element[0].focus()
        }),
            e.keydown = function (t) {
                var n = e.keys[t.which];
                if (n && !t.shiftKey && !t.altKey && !e.disabled)
                    if (t.preventDefault(),
                        d.shortcutPropagation || t.stopPropagation(),
                        "enter" === n || "space" === n) {
                        if (d.isDisabled(d.activeDate))
                            return;
                        e.select(d.activeDate)
                    } else
                        !t.ctrlKey || "up" !== n && "down" !== n ? (d.handleKeyDown(n, t),
                            d.refreshView()) : e.toggleMode("up" === n ? 1 : -1)
            }
            ,
            e.$on("$destroy", function () {
                for (; f.length;)
                    f.shift()()
            })
    }
    ]).controller("UibDaypickerController", ["$scope", "$element", "dateFilter", function (e, t, n) {
        var i = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        function r(e, t) {
            return 1 !== t || e % 4 != 0 || e % 100 == 0 && e % 400 != 0 ? i[t] : 29
        }
        function o(e) {
            var t = new Date(e);
            t.setDate(t.getDate() + 4 - (t.getDay() || 7));
            var n = t.getTime();
            return t.setMonth(0),
                t.setDate(1),
                Math.floor(Math.round((n - t) / 864e5) / 7) + 1
        }
        this.step = {
            months: 1
        },
            this.element = t,
            this.init = function (t) {
                angular.extend(t, this),
                    e.showWeeks = t.showWeeks,
                    t.refreshView()
            }
            ,
            this.getDates = function (e, t) {
                for (var n, i = new Array(t), r = new Date(e), o = 0; o < t;)
                    n = new Date(r),
                        i[o++] = n,
                        r.setDate(r.getDate() + 1);
                return i
            }
            ,
            this._refreshView = function () {
                var t = this.activeDate.getFullYear()
                    , i = this.activeDate.getMonth()
                    , r = new Date(this.activeDate);
                r.setFullYear(t, i, 1);
                var a = this.startingDay - r.getDay()
                    , s = a > 0 ? 7 - a : -a
                    , l = new Date(r);
                s > 0 && l.setDate(1 - s);
                for (var c = this.getDates(l, 42), u = 0; u < 42; u++)
                    c[u] = angular.extend(this.createDateObject(c[u], this.formatDay), {
                        secondary: c[u].getMonth() !== i,
                        uid: e.uniqueId + "-" + u
                    });
                e.labels = new Array(7);
                for (var d = 0; d < 7; d++)
                    e.labels[d] = {
                        abbr: n(c[d].date, this.formatDayHeader),
                        full: n(c[d].date, "EEEE")
                    };
                if (e.title = n(this.activeDate, this.formatDayTitle),
                    e.rows = this.split(c, 7),
                    e.showWeeks) {
                    e.weekNumbers = [];
                    for (var p = (11 - this.startingDay) % 7, h = e.rows.length, f = 0; f < h; f++)
                        e.weekNumbers.push(o(e.rows[f][p].date))
                }
            }
            ,
            this.compare = function (e, t) {
                var n = new Date(e.getFullYear(), e.getMonth(), e.getDate())
                    , i = new Date(t.getFullYear(), t.getMonth(), t.getDate());
                return n.setFullYear(e.getFullYear()),
                    i.setFullYear(t.getFullYear()),
                    n - i
            }
            ,
            this.handleKeyDown = function (e, t) {
                var n = this.activeDate.getDate();
                if ("left" === e)
                    n -= 1;
                else if ("up" === e)
                    n -= 7;
                else if ("right" === e)
                    n += 1;
                else if ("down" === e)
                    n += 7;
                else if ("pageup" === e || "pagedown" === e) {
                    var i = this.activeDate.getMonth() + ("pageup" === e ? -1 : 1);
                    this.activeDate.setMonth(i, 1),
                        n = Math.min(r(this.activeDate.getFullYear(), this.activeDate.getMonth()), n)
                } else
                    "home" === e ? n = 1 : "end" === e && (n = r(this.activeDate.getFullYear(), this.activeDate.getMonth()));
                this.activeDate.setDate(n)
            }
    }
    ]).controller("UibMonthpickerController", ["$scope", "$element", "dateFilter", function (e, t, n) {
        this.step = {
            years: 1
        },
            this.element = t,
            this.init = function (e) {
                angular.extend(e, this),
                    e.refreshView()
            }
            ,
            this._refreshView = function () {
                for (var t, i = new Array(12), r = this.activeDate.getFullYear(), o = 0; o < 12; o++)
                    (t = new Date(this.activeDate)).setFullYear(r, o, 1),
                        i[o] = angular.extend(this.createDateObject(t, this.formatMonth), {
                            uid: e.uniqueId + "-" + o
                        });
                e.title = n(this.activeDate, this.formatMonthTitle),
                    e.rows = this.split(i, 3)
            }
            ,
            this.compare = function (e, t) {
                var n = new Date(e.getFullYear(), e.getMonth())
                    , i = new Date(t.getFullYear(), t.getMonth());
                return n.setFullYear(e.getFullYear()),
                    i.setFullYear(t.getFullYear()),
                    n - i
            }
            ,
            this.handleKeyDown = function (e, t) {
                var n = this.activeDate.getMonth();
                if ("left" === e)
                    n -= 1;
                else if ("up" === e)
                    n -= 3;
                else if ("right" === e)
                    n += 1;
                else if ("down" === e)
                    n += 3;
                else if ("pageup" === e || "pagedown" === e) {
                    var i = this.activeDate.getFullYear() + ("pageup" === e ? -1 : 1);
                    this.activeDate.setFullYear(i)
                } else
                    "home" === e ? n = 0 : "end" === e && (n = 11);
                this.activeDate.setMonth(n)
            }
    }
    ]).controller("UibYearpickerController", ["$scope", "$element", "dateFilter", function (e, t, n) {
        var i, r;
        function o(e) {
            return parseInt((e - 1) / r, 10) * r + 1
        }
        this.element = t,
            this.yearpickerInit = function () {
                i = this.yearColumns,
                    r = this.yearRows * i,
                    this.step = {
                        years: r
                    }
            }
            ,
            this._refreshView = function () {
                for (var t, n = new Array(r), a = 0, s = o(this.activeDate.getFullYear()); a < r; a++)
                    (t = new Date(this.activeDate)).setFullYear(s + a, 0, 1),
                        n[a] = angular.extend(this.createDateObject(t, this.formatYear), {
                            uid: e.uniqueId + "-" + a
                        });
                e.title = [n[0].label, n[r - 1].label].join(" - "),
                    e.rows = this.split(n, i),
                    e.columns = i
            }
            ,
            this.compare = function (e, t) {
                return e.getFullYear() - t.getFullYear()
            }
            ,
            this.handleKeyDown = function (e, t) {
                var n = this.activeDate.getFullYear();
                "left" === e ? n -= 1 : "up" === e ? n -= i : "right" === e ? n += 1 : "down" === e ? n += i : "pageup" === e || "pagedown" === e ? n += ("pageup" === e ? -1 : 1) * r : "home" === e ? n = o(this.activeDate.getFullYear()) : "end" === e && (n = o(this.activeDate.getFullYear()) + r - 1),
                    this.activeDate.setFullYear(n)
            }
    }
    ]).directive("uibDatepicker", function () {
        return {
            replace: !0,
            templateUrl: function (e, t) {
                return t.templateUrl || "uib/template/datepicker/datepicker.html"
            },
            scope: {
                datepickerOptions: "=?"
            },
            require: ["uibDatepicker", "^ngModel"],
            controller: "UibDatepickerController",
            controllerAs: "datepicker",
            link: function (e, t, n, i) {
                var r = i[0]
                    , o = i[1];
                r.init(o)
            }
        }
    }).directive("uibDaypicker", function () {
        return {
            replace: !0,
            templateUrl: function (e, t) {
                return t.templateUrl || "uib/template/datepicker/day.html"
            },
            require: ["^uibDatepicker", "uibDaypicker"],
            controller: "UibDaypickerController",
            link: function (e, t, n, i) {
                var r = i[0];
                i[1].init(r)
            }
        }
    }).directive("uibMonthpicker", function () {
        return {
            replace: !0,
            templateUrl: function (e, t) {
                return t.templateUrl || "uib/template/datepicker/month.html"
            },
            require: ["^uibDatepicker", "uibMonthpicker"],
            controller: "UibMonthpickerController",
            link: function (e, t, n, i) {
                var r = i[0];
                i[1].init(r)
            }
        }
    }).directive("uibYearpicker", function () {
        return {
            replace: !0,
            templateUrl: function (e, t) {
                return t.templateUrl || "uib/template/datepicker/year.html"
            },
            require: ["^uibDatepicker", "uibYearpicker"],
            controller: "UibYearpickerController",
            link: function (e, t, n, i) {
                var r = i[0];
                angular.extend(r, i[1]),
                    r.yearpickerInit(),
                    r.refreshView()
            }
        }
    }),
    angular.module("ui.bootstrap.position", []).factory("$uibPosition", ["$document", "$window", function (e, t) {
        var n, i, r = {
            normal: /(auto|scroll)/,
            hidden: /(auto|scroll|hidden)/
        }, o = {
            auto: /\s?auto?\s?/i,
            primary: /^(top|bottom|left|right)$/,
            secondary: /^(top|bottom|left|right|center)$/,
            vertical: /^(top|bottom)$/
        }, a = /(HTML|BODY)/;
        return {
            getRawNode: function (e) {
                return e.nodeName ? e : e[0] || e
            },
            parseStyle: function (e) {
                return e = parseFloat(e),
                    isFinite(e) ? e : 0
            },
            offsetParent: function (n) {
                var i, r = (n = this.getRawNode(n)).offsetParent || e[0].documentElement;
                for (; r && r !== e[0].documentElement && (i = r,
                    "static" === (t.getComputedStyle(i).position || "static"));)
                    r = r.offsetParent;
                return r || e[0].documentElement
            },
            scrollbarWidth: function (r) {
                if (r) {
                    if (angular.isUndefined(i)) {
                        var o = e.find("body");
                        o.addClass("uib-position-body-scrollbar-measure"),
                            i = t.innerWidth - o[0].clientWidth,
                            i = isFinite(i) ? i : 0,
                            o.removeClass("uib-position-body-scrollbar-measure")
                    }
                    return i
                }
                if (angular.isUndefined(n)) {
                    var a = angular.element('<div class="uib-position-scrollbar-measure"></div>');
                    e.find("body").append(a),
                        n = a[0].offsetWidth - a[0].clientWidth,
                        n = isFinite(n) ? n : 0,
                        a.remove()
                }
                return n
            },
            scrollbarPadding: function (e) {
                e = this.getRawNode(e);
                var n = t.getComputedStyle(e)
                    , i = this.parseStyle(n.paddingRight)
                    , r = this.parseStyle(n.paddingBottom)
                    , o = this.scrollParent(e, !1, !0)
                    , s = this.scrollbarWidth(o, a.test(o.tagName));
                return {
                    scrollbarWidth: s,
                    widthOverflow: o.scrollWidth > o.clientWidth,
                    right: i + s,
                    originalRight: i,
                    heightOverflow: o.scrollHeight > o.clientHeight,
                    bottom: r + s,
                    originalBottom: r
                }
            },
            isScrollable: function (e, n) {
                e = this.getRawNode(e);
                var i = n ? r.hidden : r.normal
                    , o = t.getComputedStyle(e);
                return i.test(o.overflow + o.overflowY + o.overflowX)
            },
            scrollParent: function (n, i, o) {
                n = this.getRawNode(n);
                var a = i ? r.hidden : r.normal
                    , s = e[0].documentElement
                    , l = t.getComputedStyle(n);
                if (o && a.test(l.overflow + l.overflowY + l.overflowX))
                    return n;
                var c = "absolute" === l.position
                    , u = n.parentElement || s;
                if (u === s || "fixed" === l.position)
                    return s;
                for (; u.parentElement && u !== s;) {
                    var d = t.getComputedStyle(u);
                    if (c && "static" !== d.position && (c = !1),
                        !c && a.test(d.overflow + d.overflowY + d.overflowX))
                        break;
                    u = u.parentElement
                }
                return u
            },
            position: function (n, i) {
                n = this.getRawNode(n);
                var r = this.offset(n);
                if (i) {
                    var o = t.getComputedStyle(n);
                    r.top -= this.parseStyle(o.marginTop),
                        r.left -= this.parseStyle(o.marginLeft)
                }
                var a = this.offsetParent(n)
                    , s = {
                        top: 0,
                        left: 0
                    };
                return a !== e[0].documentElement && ((s = this.offset(a)).top += a.clientTop - a.scrollTop,
                    s.left += a.clientLeft - a.scrollLeft),
                {
                    width: Math.round(angular.isNumber(r.width) ? r.width : n.offsetWidth),
                    height: Math.round(angular.isNumber(r.height) ? r.height : n.offsetHeight),
                    top: Math.round(r.top - s.top),
                    left: Math.round(r.left - s.left)
                }
            },
            offset: function (n) {
                var i = (n = this.getRawNode(n)).getBoundingClientRect();
                return {
                    width: Math.round(angular.isNumber(i.width) ? i.width : n.offsetWidth),
                    height: Math.round(angular.isNumber(i.height) ? i.height : n.offsetHeight),
                    top: Math.round(i.top + (t.pageYOffset || e[0].documentElement.scrollTop)),
                    left: Math.round(i.left + (t.pageXOffset || e[0].documentElement.scrollLeft))
                }
            },
            viewportOffset: function (n, i, r) {
                r = !1 !== r;
                var o = (n = this.getRawNode(n)).getBoundingClientRect()
                    , a = {
                        top: 0,
                        left: 0,
                        bottom: 0,
                        right: 0
                    }
                    , s = i ? e[0].documentElement : this.scrollParent(n)
                    , l = s.getBoundingClientRect();
                if (a.top = l.top + s.clientTop,
                    a.left = l.left + s.clientLeft,
                    s === e[0].documentElement && (a.top += t.pageYOffset,
                        a.left += t.pageXOffset),
                    a.bottom = a.top + s.clientHeight,
                    a.right = a.left + s.clientWidth,
                    r) {
                    var c = t.getComputedStyle(s);
                    a.top += this.parseStyle(c.paddingTop),
                        a.bottom -= this.parseStyle(c.paddingBottom),
                        a.left += this.parseStyle(c.paddingLeft),
                        a.right -= this.parseStyle(c.paddingRight)
                }
                return {
                    top: Math.round(o.top - a.top),
                    bottom: Math.round(a.bottom - o.bottom),
                    left: Math.round(o.left - a.left),
                    right: Math.round(a.right - o.right)
                }
            },
            parsePlacement: function (e) {
                var t = o.auto.test(e);
                return t && (e = e.replace(o.auto, "")),
                    (e = e.split("-"))[0] = e[0] || "top",
                    o.primary.test(e[0]) || (e[0] = "top"),
                    e[1] = e[1] || "center",
                    o.secondary.test(e[1]) || (e[1] = "center"),
                    e[2] = !!t,
                    e
            },
            positionElements: function (e, n, i, r) {
                e = this.getRawNode(e),
                    n = this.getRawNode(n);
                var a = angular.isDefined(n.offsetWidth) ? n.offsetWidth : n.prop("offsetWidth")
                    , s = angular.isDefined(n.offsetHeight) ? n.offsetHeight : n.prop("offsetHeight");
                i = this.parsePlacement(i);
                var l = r ? this.offset(e) : this.position(e)
                    , c = {
                        top: 0,
                        left: 0,
                        placement: ""
                    };
                if (i[2]) {
                    var u = this.viewportOffset(e, r)
                        , d = t.getComputedStyle(n)
                        , p = {
                            width: a + Math.round(Math.abs(this.parseStyle(d.marginLeft) + this.parseStyle(d.marginRight))),
                            height: s + Math.round(Math.abs(this.parseStyle(d.marginTop) + this.parseStyle(d.marginBottom)))
                        };
                    if (i[0] = "top" === i[0] && p.height > u.top && p.height <= u.bottom ? "bottom" : "bottom" === i[0] && p.height > u.bottom && p.height <= u.top ? "top" : "left" === i[0] && p.width > u.left && p.width <= u.right ? "right" : "right" === i[0] && p.width > u.right && p.width <= u.left ? "left" : i[0],
                        i[1] = "top" === i[1] && p.height - l.height > u.bottom && p.height - l.height <= u.top ? "bottom" : "bottom" === i[1] && p.height - l.height > u.top && p.height - l.height <= u.bottom ? "top" : "left" === i[1] && p.width - l.width > u.right && p.width - l.width <= u.left ? "right" : "right" === i[1] && p.width - l.width > u.left && p.width - l.width <= u.right ? "left" : i[1],
                        "center" === i[1])
                        if (o.vertical.test(i[0])) {
                            var h = l.width / 2 - a / 2;
                            u.left + h < 0 && p.width - l.width <= u.right ? i[1] = "left" : u.right + h < 0 && p.width - l.width <= u.left && (i[1] = "right")
                        } else {
                            var f = l.height / 2 - p.height / 2;
                            u.top + f < 0 && p.height - l.height <= u.bottom ? i[1] = "top" : u.bottom + f < 0 && p.height - l.height <= u.top && (i[1] = "bottom")
                        }
                }
                switch (i[0]) {
                    case "top":
                        c.top = l.top - s;
                        break;
                    case "bottom":
                        c.top = l.top + l.height;
                        break;
                    case "left":
                        c.left = l.left - a;
                        break;
                    case "right":
                        c.left = l.left + l.width
                }
                switch (i[1]) {
                    case "top":
                        c.top = l.top;
                        break;
                    case "bottom":
                        c.top = l.top + l.height - s;
                        break;
                    case "left":
                        c.left = l.left;
                        break;
                    case "right":
                        c.left = l.left + l.width - a;
                        break;
                    case "center":
                        o.vertical.test(i[0]) ? c.left = l.left + l.width / 2 - a / 2 : c.top = l.top + l.height / 2 - s / 2
                }
                return c.top = Math.round(c.top),
                    c.left = Math.round(c.left),
                    c.placement = "center" === i[1] ? i[0] : i[0] + "-" + i[1],
                    c
            },
            positionArrow: function (e, n) {
                var i = (e = this.getRawNode(e)).querySelector(".tooltip-inner, .popover-inner");
                if (i) {
                    var r = angular.element(i).hasClass("tooltip-inner")
                        , a = r ? e.querySelector(".tooltip-arrow") : e.querySelector(".arrow");
                    if (a) {
                        var s = {
                            top: "",
                            bottom: "",
                            left: "",
                            right: ""
                        };
                        if ("center" !== (n = this.parsePlacement(n))[1]) {
                            var l = "border-" + n[0] + "-width"
                                , c = t.getComputedStyle(a)[l]
                                , u = "border-";
                            o.vertical.test(n[0]) ? u += n[0] + "-" + n[1] : u += n[1] + "-" + n[0],
                                u += "-radius";
                            var d = t.getComputedStyle(r ? i : e)[u];
                            switch (n[0]) {
                                case "top":
                                    s.bottom = r ? "0" : "-" + c;
                                    break;
                                case "bottom":
                                    s.top = r ? "0" : "-" + c;
                                    break;
                                case "left":
                                    s.right = r ? "0" : "-" + c;
                                    break;
                                case "right":
                                    s.left = r ? "0" : "-" + c
                            }
                            s[n[1]] = d,
                                angular.element(a).css(s)
                        } else
                            angular.element(a).css(s)
                    }
                }
            }
        }
    }
    ]),
    angular.module("ui.bootstrap.datepickerPopup", ["ui.bootstrap.datepicker", "ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning", !0).constant("uibDatepickerPopupConfig", {
        altInputFormats: [],
        appendToBody: !1,
        clearText: "Clear",
        closeOnDateSelection: !0,
        closeText: "Done",
        currentText: "Today",
        datepickerPopup: "yyyy-MM-dd",
        datepickerPopupTemplateUrl: "uib/template/datepickerPopup/popup.html",
        datepickerTemplateUrl: "uib/template/datepicker/datepicker.html",
        html5Types: {
            date: "yyyy-MM-dd",
            "datetime-local": "yyyy-MM-ddTHH:mm:ss.sss",
            month: "yyyy-MM"
        },
        onOpenFocus: !0,
        showButtonBar: !0,
        placement: "auto bottom-left"
    }).controller("UibDatepickerPopupController", ["$scope", "$element", "$attrs", "$compile", "$log", "$parse", "$window", "$document", "$rootScope", "$uibPosition", "dateFilter", "uibDateParser", "uibDatepickerPopupConfig", "$timeout", "uibDatepickerConfig", "$datepickerPopupLiteralWarning", function (e, t, n, i, r, o, a, s, l, c, u, d, p, h, f, m) {
        var g, v, y, b, w, $, S, C, x, T, k, P, E, I, M = !1, O = [];
        function D(t) {
            var n = d.parse(t, g, e.date);
            if (isNaN(n))
                for (var i = 0; i < E.length; i++)
                    if (n = d.parse(t, E[i], e.date),
                        !isNaN(n))
                        return n;
            return n
        }
        function A(e) {
            if (angular.isNumber(e) && (e = new Date(e)),
                !e)
                return null;
            if (angular.isDate(e) && !isNaN(e))
                return e;
            if (angular.isString(e)) {
                var t = D(e);
                if (!isNaN(t))
                    return d.toTimezone(t, I)
            }
            return T.$options && T.$options.allowInvalid ? e : void 0
        }
        function _(e, t) {
            var i = e || t;
            return !n.ngRequired && !i || (angular.isNumber(i) && (i = new Date(i)),
                !i || (!(!angular.isDate(i) || isNaN(i)) || !!angular.isString(i) && !isNaN(D(t))))
        }
        function R(n) {
            if (e.isOpen || !e.disabled) {
                var i = P[0]
                    , r = t[0].contains(n.target)
                    , o = void 0 !== i.contains && i.contains(n.target);
                !e.isOpen || r || o || e.$apply(function () {
                    e.isOpen = !1
                })
            }
        }
        function L(n) {
            27 === n.which && e.isOpen ? (n.preventDefault(),
                n.stopPropagation(),
                e.$apply(function () {
                    e.isOpen = !1
                }),
                t[0].focus()) : 40 !== n.which || e.isOpen || (n.preventDefault(),
                    n.stopPropagation(),
                    e.$apply(function () {
                        e.isOpen = !0
                    }))
        }
        function U() {
            if (e.isOpen) {
                var i = angular.element(P[0].querySelector(".uib-datepicker-popup"))
                    , r = n.popupPlacement ? n.popupPlacement : p.placement
                    , o = c.positionElements(t, i, r, y);
                i.css({
                    top: o.top + "px",
                    left: o.left + "px"
                }),
                    i.hasClass("uib-position-measure") && i.removeClass("uib-position-measure")
            }
        }
        this.init = function (r) {
            if (T = r,
                k = r.$options,
                v = angular.isDefined(n.closeOnDateSelection) ? e.$parent.$eval(n.closeOnDateSelection) : p.closeOnDateSelection,
                y = angular.isDefined(n.datepickerAppendToBody) ? e.$parent.$eval(n.datepickerAppendToBody) : p.appendToBody,
                b = angular.isDefined(n.onOpenFocus) ? e.$parent.$eval(n.onOpenFocus) : p.onOpenFocus,
                w = angular.isDefined(n.datepickerPopupTemplateUrl) ? n.datepickerPopupTemplateUrl : p.datepickerPopupTemplateUrl,
                $ = angular.isDefined(n.datepickerTemplateUrl) ? n.datepickerTemplateUrl : p.datepickerTemplateUrl,
                E = angular.isDefined(n.altInputFormats) ? e.$parent.$eval(n.altInputFormats) : p.altInputFormats,
                e.showButtonBar = angular.isDefined(n.showButtonBar) ? e.$parent.$eval(n.showButtonBar) : p.showButtonBar,
                p.html5Types[n.type] ? (g = p.html5Types[n.type],
                    M = !0) : (g = n.uibDatepickerPopup || p.datepickerPopup,
                        n.$observe("uibDatepickerPopup", function (e, t) {
                            var n = e || p.datepickerPopup;
                            if (n !== g && (g = n,
                                T.$modelValue = null,
                                !g))
                                throw new Error("uibDatepickerPopup must have a date format specified.")
                        })),
                !g)
                throw new Error("uibDatepickerPopup must have a date format specified.");
            if (M && n.uibDatepickerPopup)
                throw new Error("HTML5 date input types do not support custom formats.");
            S = angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),
                k ? (I = k.timezone,
                    e.ngModelOptions = angular.copy(k),
                    e.ngModelOptions.timezone = null,
                    !0 === e.ngModelOptions.updateOnDefault && (e.ngModelOptions.updateOn = e.ngModelOptions.updateOn ? e.ngModelOptions.updateOn + " default" : "default"),
                    S.attr("ng-model-options", "ngModelOptions")) : I = null,
                S.attr({
                    "ng-model": "date",
                    "ng-change": "dateSelection(date)",
                    "template-url": w
                }),
                (C = angular.element(S.children()[0])).attr("template-url", $),
                e.datepickerOptions || (e.datepickerOptions = {}),
                M && "month" === n.type && (e.datepickerOptions.datepickerMode = "month",
                    e.datepickerOptions.minMode = "month"),
                C.attr("datepicker-options", "datepickerOptions"),
                M ? T.$formatters.push(function (t) {
                    return e.date = d.fromTimezone(t, I),
                        t
                }) : (T.$$parserName = "date",
                    T.$validators.date = _,
                    T.$parsers.unshift(A),
                    T.$formatters.push(function (t) {
                        return T.$isEmpty(t) ? (e.date = t,
                            t) : (angular.isNumber(t) && (t = new Date(t)),
                                e.date = d.fromTimezone(t, I),
                                d.filter(e.date, g))
                    })),
                T.$viewChangeListeners.push(function () {
                    e.date = D(T.$viewValue)
                }),
                t.on("keydown", L),
                P = i(S)(e),
                S.remove(),
                y ? s.find("body").append(P) : t.after(P),
                e.$on("$destroy", function () {
                    for (!0 === e.isOpen && (l.$$phase || e.$apply(function () {
                        e.isOpen = !1
                    })),
                        P.remove(),
                        t.off("keydown", L),
                        s.off("click", R),
                        x && x.off("scroll", U),
                        angular.element(a).off("resize", U); O.length;)
                        O.shift()()
                })
        }
            ,
            e.getText = function (t) {
                return e[t + "Text"] || p[t + "Text"]
            }
            ,
            e.isDisabled = function (t) {
                "today" === t && (t = d.fromTimezone(new Date, I));
                var n = {};
                return angular.forEach(["minDate", "maxDate"], function (t) {
                    e.datepickerOptions[t] ? angular.isDate(e.datepickerOptions[t]) ? n[t] = d.fromTimezone(new Date(e.datepickerOptions[t]), I) : (m && r.warn("Literal date support has been deprecated, please switch to date object usage"),
                        n[t] = new Date(u(e.datepickerOptions[t], "medium"))) : n[t] = null
                }),
                    e.datepickerOptions && n.minDate && e.compare(t, n.minDate) < 0 || n.maxDate && e.compare(t, n.maxDate) > 0
            }
            ,
            e.compare = function (e, t) {
                return new Date(e.getFullYear(), e.getMonth(), e.getDate()) - new Date(t.getFullYear(), t.getMonth(), t.getDate())
            }
            ,
            e.dateSelection = function (n) {
                angular.isDefined(n) && (e.date = n);
                var i = e.date ? d.filter(e.date, g) : null;
                t.val(i),
                    T.$setViewValue(i),
                    v && (e.isOpen = !1,
                        t[0].focus())
            }
            ,
            e.keydown = function (n) {
                27 === n.which && (n.stopPropagation(),
                    e.isOpen = !1,
                    t[0].focus())
            }
            ,
            e.select = function (t, n) {
                if (n.stopPropagation(),
                    "today" === t) {
                    var i = new Date;
                    angular.isDate(e.date) ? (t = new Date(e.date)).setFullYear(i.getFullYear(), i.getMonth(), i.getDate()) : t = new Date(i.setHours(0, 0, 0, 0))
                }
                e.dateSelection(t)
            }
            ,
            e.close = function (n) {
                n.stopPropagation(),
                    e.isOpen = !1,
                    t[0].focus()
            }
            ,
            e.disabled = angular.isDefined(n.disabled) || !1,
            n.ngDisabled && O.push(e.$parent.$watch(o(n.ngDisabled), function (t) {
                e.disabled = t
            })),
            e.$watch("isOpen", function (i) {
                i ? e.disabled ? e.isOpen = !1 : h(function () {
                    U(),
                        b && e.$broadcast("uib:datepicker.focus"),
                        s.on("click", R);
                    var i = n.popupPlacement ? n.popupPlacement : p.placement;
                    y || c.parsePlacement(i)[2] ? (x = x || angular.element(c.scrollParent(t))) && x.on("scroll", U) : x = null,
                        angular.element(a).on("resize", U)
                }, 0, !1) : (s.off("click", R),
                    x && x.off("scroll", U),
                    angular.element(a).off("resize", U))
            }),
            e.$on("uib:datepicker.mode", function () {
                h(U, 0, !1)
            })
    }
    ]).directive("uibDatepickerPopup", function () {
        return {
            require: ["ngModel", "uibDatepickerPopup"],
            controller: "UibDatepickerPopupController",
            scope: {
                datepickerOptions: "=?",
                isOpen: "=?",
                currentText: "@",
                clearText: "@",
                closeText: "@"
            },
            link: function (e, t, n, i) {
                var r = i[0];
                i[1].init(r)
            }
        }
    }).directive("uibDatepickerPopupWrap", function () {
        return {
            replace: !0,
            transclude: !0,
            templateUrl: function (e, t) {
                return t.templateUrl || "uib/template/datepickerPopup/popup.html"
            }
        }
    }),
    angular.module("ui.bootstrap.debounce", []).factory("$$debounce", ["$timeout", function (e) {
        return function (t, n) {
            var i;
            return function () {
                var r = this
                    , o = Array.prototype.slice.call(arguments);
                i && e.cancel(i),
                    i = e(function () {
                        t.apply(r, o)
                    }, n)
            }
        }
    }
    ]),
    angular.module("ui.bootstrap.dropdown", ["ui.bootstrap.position"]).constant("uibDropdownConfig", {
        appendToOpenClass: "uib-dropdown-open",
        openClass: "open"
    }).service("uibDropdownService", ["$document", "$rootScope", function (e, t) {
        var n = null;
        this.open = function (t, o) {
            n || (e.on("click", i),
                o.on("keydown", r)),
                n && n !== t && (n.isOpen = !1),
                n = t
        }
            ,
            this.close = function (t, o) {
                n === t && (n = null,
                    e.off("click", i),
                    o.off("keydown", r))
            }
            ;
        var i = function (e) {
            if (n && !(e && "disabled" === n.getAutoClose() || e && 3 === e.which)) {
                var i = n.getToggleElement();
                if (!(e && i && i[0].contains(e.target))) {
                    var r = n.getDropdownElement();
                    e && "outsideClick" === n.getAutoClose() && r && r[0].contains(e.target) || (n.isOpen = !1,
                        t.$$phase || n.$apply())
                }
            }
        }
            , r = function (e) {
                27 === e.which ? (e.stopPropagation(),
                    n.focusToggleElement(),
                    i()) : n.isKeynavEnabled() && -1 !== [38, 40].indexOf(e.which) && n.isOpen && (e.preventDefault(),
                        e.stopPropagation(),
                        n.focusDropdownEntry(e.which))
            }
    }
    ]).controller("UibDropdownController", ["$scope", "$element", "$attrs", "$parse", "uibDropdownConfig", "uibDropdownService", "$animate", "$uibPosition", "$document", "$compile", "$templateRequest", function (e, t, n, i, r, o, a, s, l, c, u) {
        var d, p, h = this, f = e.$new(), m = r.appendToOpenClass, g = r.openClass, v = angular.noop, y = n.onToggle ? i(n.onToggle) : angular.noop, b = !1, w = null, $ = !1, S = l.find("body");
        t.addClass("dropdown"),
            this.init = function () {
                if (n.isOpen && (p = i(n.isOpen),
                    v = p.assign,
                    e.$watch(p, function (e) {
                        f.isOpen = !!e
                    })),
                    angular.isDefined(n.dropdownAppendTo)) {
                    var r = i(n.dropdownAppendTo)(f);
                    r && (w = angular.element(r))
                }
                b = angular.isDefined(n.dropdownAppendToBody),
                    $ = angular.isDefined(n.keyboardNav),
                    b && !w && (w = S),
                    w && h.dropdownMenu && (w.append(h.dropdownMenu),
                        t.on("$destroy", function () {
                            h.dropdownMenu.remove()
                        }))
            }
            ,
            this.toggle = function (e) {
                return f.isOpen = arguments.length ? !!e : !f.isOpen,
                    angular.isFunction(v) && v(f, f.isOpen),
                    f.isOpen
            }
            ,
            this.isOpen = function () {
                return f.isOpen
            }
            ,
            f.getToggleElement = function () {
                return h.toggleElement
            }
            ,
            f.getAutoClose = function () {
                return n.autoClose || "always"
            }
            ,
            f.getElement = function () {
                return t
            }
            ,
            f.isKeynavEnabled = function () {
                return $
            }
            ,
            f.focusDropdownEntry = function (e) {
                var n = h.dropdownMenu ? angular.element(h.dropdownMenu).find("a") : t.find("ul").eq(0).find("a");
                switch (e) {
                    case 40:
                        angular.isNumber(h.selectedOption) ? h.selectedOption = h.selectedOption === n.length - 1 ? h.selectedOption : h.selectedOption + 1 : h.selectedOption = 0;
                        break;
                    case 38:
                        angular.isNumber(h.selectedOption) ? h.selectedOption = 0 === h.selectedOption ? 0 : h.selectedOption - 1 : h.selectedOption = n.length - 1
                }
                n[h.selectedOption].focus()
            }
            ,
            f.getDropdownElement = function () {
                return h.dropdownMenu
            }
            ,
            f.focusToggleElement = function () {
                h.toggleElement && h.toggleElement[0].focus()
            }
            ,
            f.$watch("isOpen", function (n, i) {
                if (w && h.dropdownMenu) {
                    var r, l, p, $ = s.positionElements(t, h.dropdownMenu, "bottom-left", !0);
                    if (r = {
                        top: $.top + "px",
                        display: n ? "block" : "none"
                    },
                        (l = h.dropdownMenu.hasClass("dropdown-menu-right")) ? (r.left = "auto",
                            p = s.scrollbarWidth(!0),
                            r.right = window.innerWidth - p - ($.left + t.prop("offsetWidth")) + "px") : (r.left = $.left + "px",
                                r.right = "auto"),
                        !b) {
                        var S = s.offset(w);
                        r.top = $.top - S.top + "px",
                            l ? r.right = window.innerWidth - ($.left - S.left + t.prop("offsetWidth")) + "px" : r.left = $.left - S.left + "px"
                    }
                    h.dropdownMenu.css(r)
                }
                var C = w || t;
                if (C.hasClass(w ? m : g) === !n && a[n ? "addClass" : "removeClass"](C, w ? m : g).then(function () {
                    angular.isDefined(n) && n !== i && y(e, {
                        open: !!n
                    })
                }),
                    n)
                    h.dropdownMenuTemplateUrl && u(h.dropdownMenuTemplateUrl).then(function (e) {
                        d = f.$new(),
                            c(e.trim())(d, function (e) {
                                var t = e;
                                h.dropdownMenu.replaceWith(t),
                                    h.dropdownMenu = t
                            })
                    }),
                        f.focusToggleElement(),
                        o.open(f, t);
                else {
                    if (h.dropdownMenuTemplateUrl) {
                        d && d.$destroy();
                        var x = angular.element('<ul class="dropdown-menu"></ul>');
                        h.dropdownMenu.replaceWith(x),
                            h.dropdownMenu = x
                    }
                    o.close(f, t),
                        h.selectedOption = null
                }
                angular.isFunction(v) && v(e, n)
            })
    }
    ]).directive("uibDropdown", function () {
        return {
            controller: "UibDropdownController",
            link: function (e, t, n, i) {
                i.init()
            }
        }
    }).directive("uibDropdownMenu", function () {
        return {
            restrict: "A",
            require: "?^uibDropdown",
            link: function (e, t, n, i) {
                if (i && !angular.isDefined(n.dropdownNested)) {
                    t.addClass("dropdown-menu");
                    var r = n.templateUrl;
                    r && (i.dropdownMenuTemplateUrl = r),
                        i.dropdownMenu || (i.dropdownMenu = t)
                }
            }
        }
    }).directive("uibDropdownToggle", function () {
        return {
            require: "?^uibDropdown",
            link: function (e, t, n, i) {
                if (i) {
                    t.addClass("dropdown-toggle"),
                        i.toggleElement = t;
                    var r = function (r) {
                        r.preventDefault(),
                            t.hasClass("disabled") || n.disabled || e.$apply(function () {
                                i.toggle()
                            })
                    };
                    t.bind("click", r),
                        t.attr({
                            "aria-haspopup": !0,
                            "aria-expanded": !1
                        }),
                        e.$watch(i.isOpen, function (e) {
                            t.attr("aria-expanded", !!e)
                        }),
                        e.$on("$destroy", function () {
                            t.unbind("click", r)
                        })
                }
            }
        }
    }),
    angular.module("ui.bootstrap.stackedMap", []).factory("$$stackedMap", function () {
        return {
            createNew: function () {
                var e = [];
                return {
                    add: function (t, n) {
                        e.push({
                            key: t,
                            value: n
                        })
                    },
                    get: function (t) {
                        for (var n = 0; n < e.length; n++)
                            if (t === e[n].key)
                                return e[n]
                    },
                    keys: function () {
                        for (var t = [], n = 0; n < e.length; n++)
                            t.push(e[n].key);
                        return t
                    },
                    top: function () {
                        return e[e.length - 1]
                    },
                    remove: function (t) {
                        for (var n = -1, i = 0; i < e.length; i++)
                            if (t === e[i].key) {
                                n = i;
                                break
                            }
                        return e.splice(n, 1)[0]
                    },
                    removeTop: function () {
                        return e.splice(e.length - 1, 1)[0]
                    },
                    length: function () {
                        return e.length
                    }
                }
            }
        }
    }),
    angular.module("ui.bootstrap.modal", ["ui.bootstrap.stackedMap", "ui.bootstrap.position"]).factory("$$multiMap", function () {
        return {
            createNew: function () {
                var e = {};
                return {
                    entries: function () {
                        return Object.keys(e).map(function (t) {
                            return {
                                key: t,
                                value: e[t]
                            }
                        })
                    },
                    get: function (t) {
                        return e[t]
                    },
                    hasKey: function (t) {
                        return !!e[t]
                    },
                    keys: function () {
                        return Object.keys(e)
                    },
                    put: function (t, n) {
                        e[t] || (e[t] = []),
                            e[t].push(n)
                    },
                    remove: function (t, n) {
                        var i = e[t];
                        if (i) {
                            var r = i.indexOf(n);
                            -1 !== r && i.splice(r, 1),
                                i.length || delete e[t]
                        }
                    }
                }
            }
        }
    }).provider("$uibResolve", function () {
        var e = this;
        this.resolver = null,
            this.setResolver = function (e) {
                this.resolver = e
            }
            ,
            this.$get = ["$injector", "$q", function (t, n) {
                var i = e.resolver ? t.get(e.resolver) : null;
                return {
                    resolve: function (e, r, o, a) {
                        if (i)
                            return i.resolve(e, r, o, a);
                        var s = [];
                        return angular.forEach(e, function (e) {
                            angular.isFunction(e) || angular.isArray(e) ? s.push(n.resolve(t.invoke(e))) : angular.isString(e) ? s.push(n.resolve(t.get(e))) : s.push(n.resolve(e))
                        }),
                            n.all(s).then(function (t) {
                                var n = {}
                                    , i = 0;
                                return angular.forEach(e, function (e, r) {
                                    n[r] = t[i++]
                                }),
                                    n
                            })
                    }
                }
            }
            ]
    }).directive("uibModalBackdrop", ["$animate", "$injector", "$uibModalStack", function (e, t, n) {
        return {
            replace: !0,
            templateUrl: "uib/template/modal/backdrop.html",
            compile: function (e, t) {
                return e.addClass(t.backdropClass),
                    i
            }
        };
        function i(t, i, r) {
            r.modalInClass && (e.addClass(i, r.modalInClass),
                t.$on(n.NOW_CLOSING_EVENT, function (n, o) {
                    var a = o();
                    t.modalOptions.animation ? e.removeClass(i, r.modalInClass).then(a) : a()
                }))
        }
    }
    ]).directive("uibModalWindow", ["$uibModalStack", "$q", "$animateCss", "$document", function (e, t, n, i) {
        return {
            scope: {
                index: "@"
            },
            replace: !0,
            transclude: !0,
            templateUrl: function (e, t) {
                return t.templateUrl || "uib/template/modal/window.html"
            },
            link: function (r, o, a) {
                o.addClass(a.windowClass || ""),
                    o.addClass(a.windowTopClass || ""),
                    r.size = a.size,
                    r.close = function (t) {
                        var n = e.getTop();
                        n && n.value.backdrop && "static" !== n.value.backdrop && t.target === t.currentTarget && (t.preventDefault(),
                            t.stopPropagation(),
                            e.dismiss(n.key, "backdrop click"))
                    }
                    ,
                    o.on("click", r.close),
                    r.$isRendered = !0;
                var s = t.defer();
                a.$observe("modalRender", function (e) {
                    "true" === e && s.resolve()
                }),
                    s.promise.then(function () {
                        var s = null;
                        a.modalInClass && (s = n(o, {
                            addClass: a.modalInClass
                        }).start(),
                            r.$on(e.NOW_CLOSING_EVENT, function (e, t) {
                                var i = t();
                                n(o, {
                                    removeClass: a.modalInClass
                                }).start().then(i)
                            })),
                            t.when(s).then(function () {
                                var t = e.getTop();
                                if (t && e.modalRendered(t.key),
                                    !i[0].activeElement || !o[0].contains(i[0].activeElement)) {
                                    var n = o[0].querySelector("[autofocus]");
                                    n ? n.focus() : o[0].focus()
                                }
                            })
                    })
            }
        }
    }
    ]).directive("uibModalAnimationClass", function () {
        return {
            compile: function (e, t) {
                t.modalAnimation && e.addClass(t.uibModalAnimationClass)
            }
        }
    }).directive("uibModalTransclude", function () {
        return {
            link: function (e, t, n, i, r) {
                r(e.$parent, function (e) {
                    t.empty(),
                        t.append(e)
                })
            }
        }
    }).factory("$uibModalStack", ["$animate", "$animateCss", "$document", "$compile", "$rootScope", "$q", "$$multiMap", "$$stackedMap", "$uibPosition", function (e, t, n, i, r, o, a, s, l) {
        var c, u, d, p = "modal-open", h = s.createNew(), f = a.createNew(), m = {
            NOW_CLOSING_EVENT: "modal.stack.now-closing"
        }, g = 0, v = null;
        function y() {
            for (var e = -1, t = h.keys(), n = 0; n < t.length; n++)
                h.get(t[n]).value.backdrop && (e = n);
            return e > -1 && e < g && (e = g),
                e
        }
        function b(e, t) {
            var n = h.get(e).value
                , i = n.appendTo;
            h.remove(e),
                (v = h.top()) && (g = parseInt(v.value.modalDomEl.attr("index"), 10)),
                $(n.modalDomEl, n.modalScope, function () {
                    var t = n.openedClass || p;
                    f.remove(t, e);
                    var r = f.hasKey(t);
                    i.toggleClass(t, r),
                        !r && d && d.heightOverflow && d.scrollbarWidth && (d.originalRight ? i.css({
                            paddingRight: d.originalRight + "px"
                        }) : i.css({
                            paddingRight: ""
                        }),
                            d = null),
                        w(!0)
                }, n.closedDeferred),
                function () {
                    if (c && -1 === y()) {
                        $(c, u, function () {
                            null
                        }),
                            c = void 0,
                            u = void 0
                    }
                }(),
                t && t.focus ? t.focus() : i.focus && i.focus()
        }
        function w(e) {
            var t;
            h.length() > 0 && (t = h.top().value).modalDomEl.toggleClass(t.windowTopClass || "", e)
        }
        function $(t, n, i, r) {
            var a, s = null;
            return n.$broadcast(m.NOW_CLOSING_EVENT, function () {
                return a || (a = o.defer(),
                    s = a.promise),
                    function () {
                        a.resolve()
                    }
            }),
                o.when(s).then(function o() {
                    if (o.done)
                        return;
                    o.done = !0;
                    e.leave(t).then(function () {
                        t.remove(),
                            r && r.resolve()
                    });
                    n.$destroy();
                    i && i()
                })
        }
        function S(e) {
            if (e.isDefaultPrevented())
                return e;
            var t = h.top();
            if (t)
                switch (e.which) {
                    case 27:
                        t.value.keyboard && (e.preventDefault(),
                            r.$apply(function () {
                                m.dismiss(t.key, "escape key press")
                            }));
                        break;
                    case 9:
                        var n = m.loadFocusElementList(t)
                            , i = !1;
                        e.shiftKey ? (m.isFocusInFirstItem(e, n) || m.isModalFocused(e, t)) && (i = m.focusLastFocusableElement(n)) : m.isFocusInLastItem(e, n) && (i = m.focusFirstFocusableElement(n)),
                            i && (e.preventDefault(),
                                e.stopPropagation())
                }
        }
        function C(e, t, n) {
            return !e.value.modalScope.$broadcast("modal.closing", t, n).defaultPrevented
        }
        return r.$watch(y, function (e) {
            u && (u.index = e)
        }),
            n.on("keydown", S),
            r.$on("$destroy", function () {
                n.off("keydown", S)
            }),
            m.open = function (t, o) {
                var a = n[0].activeElement
                    , s = o.openedClass || p;
                w(!1),
                    v = h.top(),
                    h.add(t, {
                        deferred: o.deferred,
                        renderDeferred: o.renderDeferred,
                        closedDeferred: o.closedDeferred,
                        modalScope: o.scope,
                        backdrop: o.backdrop,
                        keyboard: o.keyboard,
                        openedClass: o.openedClass,
                        windowTopClass: o.windowTopClass,
                        animation: o.animation,
                        appendTo: o.appendTo
                    }),
                    f.put(s, t);
                var m = o.appendTo
                    , b = y();
                if (!m.length)
                    throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");
                b >= 0 && !c && ((u = r.$new(!0)).modalOptions = o,
                    u.index = b,
                    (c = angular.element('<div uib-modal-backdrop="modal-backdrop"></div>')).attr("backdrop-class", o.backdropClass),
                    o.animation && c.attr("modal-animation", "true"),
                    i(c)(u),
                    e.enter(c, m),
                    (d = l.scrollbarPadding(m)).heightOverflow && d.scrollbarWidth && m.css({
                        paddingRight: d.right + "px"
                    })),
                    g = v ? parseInt(v.value.modalDomEl.attr("index"), 10) + 1 : 0;
                var $ = angular.element('<div uib-modal-window="modal-window"></div>');
                $.attr({
                    "template-url": o.windowTemplateUrl,
                    "window-class": o.windowClass,
                    "window-top-class": o.windowTopClass,
                    size: o.size,
                    index: g,
                    animate: "animate"
                }).html(o.content),
                    o.animation && $.attr("modal-animation", "true"),
                    m.addClass(s),
                    e.enter(i($)(o.scope), m),
                    h.top().value.modalDomEl = $,
                    h.top().value.modalOpener = a
            }
            ,
            m.close = function (e, t) {
                var n = h.get(e);
                return n && C(n, t, !0) ? (n.value.modalScope.$$uibDestructionScheduled = !0,
                    n.value.deferred.resolve(t),
                    b(e, n.value.modalOpener),
                    !0) : !n
            }
            ,
            m.dismiss = function (e, t) {
                var n = h.get(e);
                return n && C(n, t, !1) ? (n.value.modalScope.$$uibDestructionScheduled = !0,
                    n.value.deferred.reject(t),
                    b(e, n.value.modalOpener),
                    !0) : !n
            }
            ,
            m.dismissAll = function (e) {
                for (var t = this.getTop(); t && this.dismiss(t.key, e);)
                    t = this.getTop()
            }
            ,
            m.getTop = function () {
                return h.top()
            }
            ,
            m.modalRendered = function (e) {
                var t = h.get(e);
                t && t.value.renderDeferred.resolve()
            }
            ,
            m.focusFirstFocusableElement = function (e) {
                return e.length > 0 && (e[0].focus(),
                    !0)
            }
            ,
            m.focusLastFocusableElement = function (e) {
                return e.length > 0 && (e[e.length - 1].focus(),
                    !0)
            }
            ,
            m.isModalFocused = function (e, t) {
                if (e && t) {
                    var n = t.value.modalDomEl;
                    if (n && n.length)
                        return (e.target || e.srcElement) === n[0]
                }
                return !1
            }
            ,
            m.isFocusInFirstItem = function (e, t) {
                return t.length > 0 && (e.target || e.srcElement) === t[0]
            }
            ,
            m.isFocusInLastItem = function (e, t) {
                return t.length > 0 && (e.target || e.srcElement) === t[t.length - 1]
            }
            ,
            m.loadFocusElementList = function (e) {
                if (e) {
                    var t = e.value.modalDomEl;
                    if (t && t.length) {
                        var n = t[0].querySelectorAll("a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]");
                        return n ? Array.prototype.filter.call(n, function (e) {
                            return function (e) {
                                return !!(e.offsetWidth || e.offsetHeight || e.getClientRects().length)
                            }(e)
                        }) : n
                    }
                }
            }
            ,
            m
    }
    ]).provider("$uibModal", function () {
        var e = {
            options: {
                animation: !0,
                backdrop: !0,
                keyboard: !0
            },
            $get: ["$rootScope", "$q", "$document", "$templateRequest", "$controller", "$uibResolve", "$uibModalStack", function (t, n, i, r, o, a, s) {
                var l = {};
                var c = null;
                return l.getPromiseChain = function () {
                    return c
                }
                    ,
                    l.open = function (l) {
                        var u = n.defer()
                            , d = n.defer()
                            , p = n.defer()
                            , h = n.defer()
                            , f = {
                                result: u.promise,
                                opened: d.promise,
                                closed: p.promise,
                                rendered: h.promise,
                                close: function (e) {
                                    return s.close(f, e)
                                },
                                dismiss: function (e) {
                                    return s.dismiss(f, e)
                                }
                            };
                        if ((l = angular.extend({}, e.options, l)).resolve = l.resolve || {},
                            l.appendTo = l.appendTo || i.find("body").eq(0),
                            !l.template && !l.templateUrl)
                            throw new Error("One of template or templateUrl options is required.");
                        var m, g, v = n.all([(m = l,
                            m.template ? n.when(m.template) : r(angular.isFunction(m.templateUrl) ? m.templateUrl() : m.templateUrl)), a.resolve(l.resolve, {}, null, null)]);
                        function y() {
                            return v
                        }
                        return g = c = n.all([c]).then(y, y).then(function (e) {
                            var n = l.scope || t
                                , i = n.$new();
                            i.$close = f.close,
                                i.$dismiss = f.dismiss,
                                i.$on("$destroy", function () {
                                    i.$$uibDestructionScheduled || i.$dismiss("$uibUnscheduledDestruction")
                                });
                            var r, a, c = {};
                            l.controller && (c.$scope = i,
                                c.$scope.$resolve = {},
                                c.$uibModalInstance = f,
                                angular.forEach(e[1], function (e, t) {
                                    c[t] = e,
                                        c.$scope.$resolve[t] = e
                                }),
                                a = o(l.controller, c, !0, l.controllerAs),
                                l.controllerAs && l.bindToController && ((r = a.instance).$close = i.$close,
                                    r.$dismiss = i.$dismiss,
                                    angular.extend(r, {
                                        $resolve: c.$scope.$resolve
                                    }, n)),
                                r = a(),
                                angular.isFunction(r.$onInit) && r.$onInit()),
                                s.open(f, {
                                    scope: i,
                                    deferred: u,
                                    renderDeferred: h,
                                    closedDeferred: p,
                                    content: e[0],
                                    animation: l.animation,
                                    backdrop: l.backdrop,
                                    keyboard: l.keyboard,
                                    backdropClass: l.backdropClass,
                                    windowTopClass: l.windowTopClass,
                                    windowClass: l.windowClass,
                                    windowTemplateUrl: l.windowTemplateUrl,
                                    size: l.size,
                                    openedClass: l.openedClass,
                                    appendTo: l.appendTo
                                }),
                                d.resolve(!0)
                        }, function (e) {
                            d.reject(e),
                                u.reject(e)
                        }).finally(function () {
                            c === g && (c = null)
                        }),
                            f
                    }
                    ,
                    l
            }
            ]
        };
        return e
    }),
    angular.module("ui.bootstrap.paging", []).factory("uibPaging", ["$parse", function (e) {
        return {
            create: function (t, n, i) {
                t.setNumPages = i.numPages ? e(i.numPages).assign : angular.noop,
                    t.ngModelCtrl = {
                        $setViewValue: angular.noop
                    },
                    t._watchers = [],
                    t.init = function (e, r) {
                        t.ngModelCtrl = e,
                            t.config = r,
                            e.$render = function () {
                                t.render()
                            }
                            ,
                            i.itemsPerPage ? t._watchers.push(n.$parent.$watch(i.itemsPerPage, function (e) {
                                t.itemsPerPage = parseInt(e, 10),
                                    n.totalPages = t.calculateTotalPages(),
                                    t.updatePage()
                            })) : t.itemsPerPage = r.itemsPerPage,
                            n.$watch("totalItems", function (e, i) {
                                (angular.isDefined(e) || e !== i) && (n.totalPages = t.calculateTotalPages(),
                                    t.updatePage())
                            })
                    }
                    ,
                    t.calculateTotalPages = function () {
                        var e = t.itemsPerPage < 1 ? 1 : Math.ceil(n.totalItems / t.itemsPerPage);
                        return Math.max(e || 0, 1)
                    }
                    ,
                    t.render = function () {
                        n.page = parseInt(t.ngModelCtrl.$viewValue, 10) || 1
                    }
                    ,
                    n.selectPage = function (e, i) {
                        i && i.preventDefault(),
                            (!n.ngDisabled || !i) && n.page !== e && e > 0 && e <= n.totalPages && (i && i.target && i.target.blur(),
                                t.ngModelCtrl.$setViewValue(e),
                                t.ngModelCtrl.$render())
                    }
                    ,
                    n.getText = function (e) {
                        return n[e + "Text"] || t.config[e + "Text"]
                    }
                    ,
                    n.noPrevious = function () {
                        return 1 === n.page
                    }
                    ,
                    n.noNext = function () {
                        return n.page === n.totalPages
                    }
                    ,
                    t.updatePage = function () {
                        t.setNumPages(n.$parent, n.totalPages),
                            n.page > n.totalPages ? n.selectPage(n.totalPages) : t.ngModelCtrl.$render()
                    }
                    ,
                    n.$on("$destroy", function () {
                        for (; t._watchers.length;)
                            t._watchers.shift()()
                    })
            }
        }
    }
    ]),
    angular.module("ui.bootstrap.pager", ["ui.bootstrap.paging"]).controller("UibPagerController", ["$scope", "$attrs", "uibPaging", "uibPagerConfig", function (e, t, n, i) {
        e.align = angular.isDefined(t.align) ? e.$parent.$eval(t.align) : i.align,
            n.create(this, e, t)
    }
    ]).constant("uibPagerConfig", {
        itemsPerPage: 10,
        previousText: "« Previous",
        nextText: "Next »",
        align: !0
    }).directive("uibPager", ["uibPagerConfig", function (e) {
        return {
            scope: {
                totalItems: "=",
                previousText: "@",
                nextText: "@",
                ngDisabled: "="
            },
            require: ["uibPager", "?ngModel"],
            controller: "UibPagerController",
            controllerAs: "pager",
            templateUrl: function (e, t) {
                return t.templateUrl || "uib/template/pager/pager.html"
            },
            replace: !0,
            link: function (t, n, i, r) {
                var o = r[0]
                    , a = r[1];
                a && o.init(a, e)
            }
        }
    }
    ]),
    angular.module("ui.bootstrap.pagination", ["ui.bootstrap.paging"]).controller("UibPaginationController", ["$scope", "$attrs", "$parse", "uibPaging", "uibPaginationConfig", function (e, t, n, i, r) {
        var o = this
            , a = angular.isDefined(t.maxSize) ? e.$parent.$eval(t.maxSize) : r.maxSize
            , s = angular.isDefined(t.rotate) ? e.$parent.$eval(t.rotate) : r.rotate
            , l = angular.isDefined(t.forceEllipses) ? e.$parent.$eval(t.forceEllipses) : r.forceEllipses
            , c = angular.isDefined(t.boundaryLinkNumbers) ? e.$parent.$eval(t.boundaryLinkNumbers) : r.boundaryLinkNumbers
            , u = angular.isDefined(t.pageLabel) ? function (n) {
                return e.$parent.$eval(t.pageLabel, {
                    $page: n
                })
            }
                : angular.identity;
        function d(e, t, n) {
            return {
                number: e,
                text: t,
                active: n
            }
        }
        e.boundaryLinks = angular.isDefined(t.boundaryLinks) ? e.$parent.$eval(t.boundaryLinks) : r.boundaryLinks,
            e.directionLinks = angular.isDefined(t.directionLinks) ? e.$parent.$eval(t.directionLinks) : r.directionLinks,
            i.create(this, e, t),
            t.maxSize && o._watchers.push(e.$parent.$watch(n(t.maxSize), function (e) {
                a = parseInt(e, 10),
                    o.render()
            }));
        var p = this.render;
        this.render = function () {
            p(),
                e.page > 0 && e.page <= e.totalPages && (e.pages = function (e, t) {
                    var n = []
                        , i = 1
                        , r = t
                        , o = angular.isDefined(a) && a < t;
                    o && (s ? (r = (i = Math.max(e - Math.floor(a / 2), 1)) + a - 1) > t && (i = (r = t) - a + 1) : (i = (Math.ceil(e / a) - 1) * a + 1,
                        r = Math.min(i + a - 1, t)));
                    for (var p = i; p <= r; p++) {
                        var h = d(p, u(p), p === e);
                        n.push(h)
                    }
                    if (o && a > 0 && (!s || l || c)) {
                        if (i > 1) {
                            if (!c || i > 3) {
                                var f = d(i - 1, "...", !1);
                                n.unshift(f)
                            }
                            if (c) {
                                if (3 === i) {
                                    var m = d(2, "2", !1);
                                    n.unshift(m)
                                }
                                var g = d(1, "1", !1);
                                n.unshift(g)
                            }
                        }
                        if (r < t) {
                            if (!c || r < t - 2) {
                                var v = d(r + 1, "...", !1);
                                n.push(v)
                            }
                            if (c) {
                                if (r === t - 2) {
                                    var y = d(t - 1, t - 1, !1);
                                    n.push(y)
                                }
                                var b = d(t, t, !1);
                                n.push(b)
                            }
                        }
                    }
                    return n
                }(e.page, e.totalPages))
        }
    }
    ]).constant("uibPaginationConfig", {
        itemsPerPage: 10,
        boundaryLinks: !1,
        boundaryLinkNumbers: !1,
        directionLinks: !0,
        firstText: "First",
        previousText: "Previous",
        nextText: "Next",
        lastText: "Last",
        rotate: !0,
        forceEllipses: !1
    }).directive("uibPagination", ["$parse", "uibPaginationConfig", function (e, t) {
        return {
            scope: {
                totalItems: "=",
                firstText: "@",
                previousText: "@",
                nextText: "@",
                lastText: "@",
                ngDisabled: "="
            },
            require: ["uibPagination", "?ngModel"],
            controller: "UibPaginationController",
            controllerAs: "pagination",
            templateUrl: function (e, t) {
                return t.templateUrl || "uib/template/pagination/pagination.html"
            },
            replace: !0,
            link: function (e, n, i, r) {
                var o = r[0]
                    , a = r[1];
                a && o.init(a, t)
            }
        }
    }
    ]),
    angular.module("ui.bootstrap.tooltip", ["ui.bootstrap.position", "ui.bootstrap.stackedMap"]).provider("$uibTooltip", function () {
        var e = {
            placement: "top",
            placementClassPrefix: "",
            animation: !0,
            popupDelay: 0,
            popupCloseDelay: 0,
            useContentExp: !1
        }
            , t = {
                mouseenter: "mouseleave",
                click: "click",
                outsideClick: "outsideClick",
                focus: "blur",
                none: ""
            }
            , n = {};
        this.options = function (e) {
            angular.extend(n, e)
        }
            ,
            this.setTriggers = function (e) {
                angular.extend(t, e)
            }
            ,
            this.$get = ["$window", "$compile", "$timeout", "$document", "$uibPosition", "$interpolate", "$rootScope", "$parse", "$$stackedMap", function (i, r, o, a, s, l, c, u, d) {
                var p = d.createNew();
                function h(e) {
                    if (27 === e.which) {
                        var t = p.top();
                        t && (t.value.close(),
                            p.removeTop(),
                            t = null)
                    }
                }
                return a.on("keypress", h),
                    c.$on("$destroy", function () {
                        a.off("keypress", h)
                    }),
                    function (i, c, d, h) {
                        function f(e) {
                            var n = (e || h.trigger || d).split(" ");
                            return {
                                show: n,
                                hide: n.map(function (e) {
                                    return t[e] || e
                                })
                            }
                        }
                        h = angular.extend({}, e, n, h);
                        var m = i.replace(/[A-Z]/g, function (e, t) {
                            return (t ? "-" : "") + e.toLowerCase()
                        })
                            , g = l.startSymbol()
                            , v = l.endSymbol()
                            , y = "<div " + m + '-popup uib-title="' + g + "title" + v + '" ' + (h.useContentExp ? 'content-exp="contentExp()" ' : 'content="' + g + "content" + v + '" ') + 'placement="' + g + "placement" + v + '" popup-class="' + g + "popupClass" + v + '" animation="animation" is-open="isOpen" origin-scope="origScope" class="uib-position-measure"></div>';
                        return {
                            compile: function (e, t) {
                                var n = r(y);
                                return function (e, t, r, l) {
                                    var d, m, g, v, y, b, w, $ = !!angular.isDefined(h.appendToBody) && h.appendToBody, S = f(void 0), C = angular.isDefined(r[c + "Enable"]), x = e.$new(!0), T = !1, k = !!angular.isDefined(r[c + "IsOpen"]) && u(r[c + "IsOpen"]), P = !!h.useContentExp && u(r[i]), E = [], I = function () {
                                        d && d.html() && (b || (b = o(function () {
                                            var e = s.positionElements(t, d, x.placement, $);
                                            d.css({
                                                top: e.top + "px",
                                                left: e.left + "px"
                                            }),
                                                d.hasClass(e.placement.split("-")[0]) || (d.removeClass(w.split("-")[0]),
                                                    d.addClass(e.placement.split("-")[0])),
                                                d.hasClass(h.placementClassPrefix + e.placement) || (d.removeClass(h.placementClassPrefix + w),
                                                    d.addClass(h.placementClassPrefix + e.placement)),
                                                d.hasClass("uib-position-measure") ? (s.positionArrow(d, e.placement),
                                                    d.removeClass("uib-position-measure")) : w !== e.placement && s.positionArrow(d, e.placement),
                                                w = e.placement,
                                                b = null
                                        }, 0, !1)))
                                    };
                                    function M() {
                                        x.isOpen ? D() : O()
                                    }
                                    function O() {
                                        C && !e.$eval(r[c + "Enable"]) || (L(),
                                            function () {
                                                x.title = r[c + "Title"],
                                                    x.content = P ? P(e) : r[i];
                                                x.popupClass = r[c + "Class"],
                                                    x.placement = angular.isDefined(r[c + "Placement"]) ? r[c + "Placement"] : h.placement;
                                                var t = s.parsePlacement(x.placement);
                                                w = t[1] ? t[0] + "-" + t[1] : t[0];
                                                var n = parseInt(r[c + "PopupDelay"], 10)
                                                    , o = parseInt(r[c + "PopupCloseDelay"], 10);
                                                x.popupDelay = isNaN(n) ? h.popupDelay : n,
                                                    x.popupCloseDelay = isNaN(o) ? h.popupCloseDelay : o
                                            }(),
                                            x.popupDelay ? v || (v = o(A, x.popupDelay, !1)) : A())
                                    }
                                    function D() {
                                        _(),
                                            x.popupCloseDelay ? y || (y = o(R, x.popupCloseDelay, !1)) : R()
                                    }
                                    function A() {
                                        if (_(),
                                            L(),
                                            !x.content)
                                            return angular.noop;
                                        !function () {
                                            if (d)
                                                return;
                                            m = x.$new(),
                                                d = n(m, function (e) {
                                                    $ ? a.find("body").append(e) : t.after(e)
                                                }),
                                                function () {
                                                    E.length = 0,
                                                        P ? (E.push(e.$watch(P, function (e) {
                                                            x.content = e,
                                                                !e && x.isOpen && R()
                                                        })),
                                                            E.push(m.$watch(function () {
                                                                T || (T = !0,
                                                                    m.$$postDigest(function () {
                                                                        T = !1,
                                                                            x && x.isOpen && I()
                                                                    }))
                                                            }))) : E.push(r.$observe(i, function (e) {
                                                                x.content = e,
                                                                    !e && x.isOpen ? R() : I()
                                                            }));
                                                    E.push(r.$observe(c + "Title", function (e) {
                                                        x.title = e,
                                                            x.isOpen && I()
                                                    })),
                                                        E.push(r.$observe(c + "Placement", function (e) {
                                                            x.placement = e || h.placement,
                                                                x.isOpen && I()
                                                        }))
                                                }()
                                        }(),
                                            x.$evalAsync(function () {
                                                x.isOpen = !0,
                                                    N(!0),
                                                    I()
                                            })
                                    }
                                    function _() {
                                        v && (o.cancel(v),
                                            v = null),
                                            b && (o.cancel(b),
                                                b = null)
                                    }
                                    function R() {
                                        x && x.$evalAsync(function () {
                                            x && (x.isOpen = !1,
                                                N(!1),
                                                x.animation ? g || (g = o(U, 150, !1)) : U())
                                        })
                                    }
                                    function L() {
                                        y && (o.cancel(y),
                                            y = null),
                                            g && (o.cancel(g),
                                                g = null)
                                    }
                                    function U() {
                                        _(),
                                            L(),
                                            E.length && (angular.forEach(E, function (e) {
                                                e()
                                            }),
                                                E.length = 0),
                                            d && (d.remove(),
                                                d = null),
                                            m && (m.$destroy(),
                                                m = null)
                                    }
                                    function N(t) {
                                        k && angular.isFunction(k.assign) && k.assign(e, t)
                                    }
                                    function j(e) {
                                        x && x.isOpen && d && (t[0].contains(e.target) || d[0].contains(e.target) || D())
                                    }
                                    x.origScope = e,
                                        x.isOpen = !1,
                                        p.add(x, {
                                            close: R
                                        }),
                                        x.contentExp = function () {
                                            return x.content
                                        }
                                        ,
                                        r.$observe("disabled", function (e) {
                                            e && _(),
                                                e && x.isOpen && R()
                                        }),
                                        k && e.$watch(k, function (e) {
                                            x && !e === x.isOpen && M()
                                        });
                                    var F, B = function () {
                                        S.show.forEach(function (e) {
                                            "outsideClick" === e ? t.off("click", M) : (t.off(e, O),
                                                t.off(e, M))
                                        }),
                                            S.hide.forEach(function (e) {
                                                "outsideClick" === e ? a.off("click", j) : t.off(e, D)
                                            })
                                    };
                                    F = r[c + "Trigger"],
                                        B(),
                                        "none" !== (S = f(F)).show && S.show.forEach(function (e, n) {
                                            "outsideClick" === e ? (t.on("click", M),
                                                a.on("click", j)) : e === S.hide[n] ? t.on(e, M) : e && (t.on(e, O),
                                                    t.on(S.hide[n], D)),
                                                t.on("keypress", function (e) {
                                                    27 === e.which && D()
                                                })
                                        });
                                    var V, z = e.$eval(r[c + "Animation"]);
                                    x.animation = angular.isDefined(z) ? !!z : h.animation;
                                    var H = c + "AppendToBody";
                                    V = H in r && void 0 === r[H] || e.$eval(r[H]),
                                        $ = angular.isDefined(V) ? V : $,
                                        e.$on("$destroy", function () {
                                            B(),
                                                U(),
                                                p.remove(x),
                                                x = null
                                        })
                                }
                            }
                        }
                    }
            }
            ]
    }).directive("uibTooltipTemplateTransclude", ["$animate", "$sce", "$compile", "$templateRequest", function (e, t, n, i) {
        return {
            link: function (r, o, a) {
                var s, l, c, u = r.$eval(a.tooltipTemplateTranscludeScope), d = 0, p = function () {
                    l && (l.remove(),
                        l = null),
                        s && (s.$destroy(),
                            s = null),
                        c && (e.leave(c).then(function () {
                            l = null
                        }),
                            l = c,
                            c = null)
                };
                r.$watch(t.parseAsResourceUrl(a.uibTooltipTemplateTransclude), function (t) {
                    var a = ++d;
                    t ? (i(t, !0).then(function (i) {
                        if (a === d) {
                            var r = u.$new()
                                , l = n(i)(r, function (t) {
                                    p(),
                                        e.enter(t, o)
                                });
                            c = l,
                                (s = r).$emit("$includeContentLoaded", t)
                        }
                    }, function () {
                        a === d && (p(),
                            r.$emit("$includeContentError", t))
                    }),
                        r.$emit("$includeContentRequested", t)) : p()
                }),
                    r.$on("$destroy", p)
            }
        }
    }
    ]).directive("uibTooltipClasses", ["$uibPosition", function (e) {
        return {
            restrict: "A",
            link: function (t, n, i) {
                if (t.placement) {
                    var r = e.parsePlacement(t.placement);
                    n.addClass(r[0])
                }
                t.popupClass && n.addClass(t.popupClass),
                    t.animation() && n.addClass(i.tooltipAnimationClass)
            }
        }
    }
    ]).directive("uibTooltipPopup", function () {
        return {
            replace: !0,
            scope: {
                content: "@",
                placement: "@",
                popupClass: "@",
                animation: "&",
                isOpen: "&"
            },
            templateUrl: "uib/template/tooltip/tooltip-popup.html"
        }
    }).directive("uibTooltip", ["$uibTooltip", function (e) {
        return e("uibTooltip", "tooltip", "mouseenter")
    }
    ]).directive("uibTooltipTemplatePopup", function () {
        return {
            replace: !0,
            scope: {
                contentExp: "&",
                placement: "@",
                popupClass: "@",
                animation: "&",
                isOpen: "&",
                originScope: "&"
            },
            templateUrl: "uib/template/tooltip/tooltip-template-popup.html"
        }
    }).directive("uibTooltipTemplate", ["$uibTooltip", function (e) {
        return e("uibTooltipTemplate", "tooltip", "mouseenter", {
            useContentExp: !0
        })
    }
    ]).directive("uibTooltipHtmlPopup", function () {
        return {
            replace: !0,
            scope: {
                contentExp: "&",
                placement: "@",
                popupClass: "@",
                animation: "&",
                isOpen: "&"
            },
            templateUrl: "uib/template/tooltip/tooltip-html-popup.html"
        }
    }).directive("uibTooltipHtml", ["$uibTooltip", function (e) {
        return e("uibTooltipHtml", "tooltip", "mouseenter", {
            useContentExp: !0
        })
    }
    ]),
    angular.module("ui.bootstrap.popover", ["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup", function () {
        return {
            replace: !0,
            scope: {
                uibTitle: "@",
                contentExp: "&",
                placement: "@",
                popupClass: "@",
                animation: "&",
                isOpen: "&",
                originScope: "&"
            },
            templateUrl: "uib/template/popover/popover-template.html"
        }
    }).directive("uibPopoverTemplate", ["$uibTooltip", function (e) {
        return e("uibPopoverTemplate", "popover", "click", {
            useContentExp: !0
        })
    }
    ]).directive("uibPopoverHtmlPopup", function () {
        return {
            replace: !0,
            scope: {
                contentExp: "&",
                uibTitle: "@",
                placement: "@",
                popupClass: "@",
                animation: "&",
                isOpen: "&"
            },
            templateUrl: "uib/template/popover/popover-html.html"
        }
    }).directive("uibPopoverHtml", ["$uibTooltip", function (e) {
        return e("uibPopoverHtml", "popover", "click", {
            useContentExp: !0
        })
    }
    ]).directive("uibPopoverPopup", function () {
        return {
            replace: !0,
            scope: {
                uibTitle: "@",
                content: "@",
                placement: "@",
                popupClass: "@",
                animation: "&",
                isOpen: "&"
            },
            templateUrl: "uib/template/popover/popover.html"
        }
    }).directive("uibPopover", ["$uibTooltip", function (e) {
        return e("uibPopover", "popover", "click")
    }
    ]),
    angular.module("ui.bootstrap.progressbar", []).constant("uibProgressConfig", {
        animate: !0,
        max: 100
    }).controller("UibProgressController", ["$scope", "$attrs", "uibProgressConfig", function (e, t, n) {
        var i = this
            , r = angular.isDefined(t.animate) ? e.$parent.$eval(t.animate) : n.animate;
        function o() {
            return angular.isDefined(e.maxParam) ? e.maxParam : n.max
        }
        this.bars = [],
            e.max = o(),
            this.addBar = function (e, t, n) {
                r || t.css({
                    transition: "none"
                }),
                    this.bars.push(e),
                    e.max = o(),
                    e.title = n && angular.isDefined(n.title) ? n.title : "progressbar",
                    e.$watch("value", function (t) {
                        e.recalculatePercentage()
                    }),
                    e.recalculatePercentage = function () {
                        var t = i.bars.reduce(function (e, t) {
                            return t.percent = +(100 * t.value / t.max).toFixed(2),
                                e + t.percent
                        }, 0);
                        t > 100 && (e.percent -= t - 100)
                    }
                    ,
                    e.$on("$destroy", function () {
                        t = null,
                            i.removeBar(e)
                    })
            }
            ,
            this.removeBar = function (e) {
                this.bars.splice(this.bars.indexOf(e), 1),
                    this.bars.forEach(function (e) {
                        e.recalculatePercentage()
                    })
            }
            ,
            e.$watch("maxParam", function (e) {
                i.bars.forEach(function (e) {
                    e.max = o(),
                        e.recalculatePercentage()
                })
            })
    }
    ]).directive("uibProgress", function () {
        return {
            replace: !0,
            transclude: !0,
            controller: "UibProgressController",
            require: "uibProgress",
            scope: {
                maxParam: "=?max"
            },
            templateUrl: "uib/template/progressbar/progress.html"
        }
    }).directive("uibBar", function () {
        return {
            replace: !0,
            transclude: !0,
            require: "^uibProgress",
            scope: {
                value: "=",
                type: "@"
            },
            templateUrl: "uib/template/progressbar/bar.html",
            link: function (e, t, n, i) {
                i.addBar(e, t, n)
            }
        }
    }).directive("uibProgressbar", function () {
        return {
            replace: !0,
            transclude: !0,
            controller: "UibProgressController",
            scope: {
                value: "=",
                maxParam: "=?max",
                type: "@"
            },
            templateUrl: "uib/template/progressbar/progressbar.html",
            link: function (e, t, n, i) {
                i.addBar(e, angular.element(t.children()[0]), {
                    title: n.title
                })
            }
        }
    }),
    angular.module("ui.bootstrap.rating", []).constant("uibRatingConfig", {
        max: 5,
        stateOn: null,
        stateOff: null,
        enableReset: !0,
        titles: ["one", "two", "three", "four", "five"]
    }).controller("UibRatingController", ["$scope", "$attrs", "uibRatingConfig", function (e, t, n) {
        var i = {
            $setViewValue: angular.noop
        }
            , r = this;
        this.init = function (r) {
            (i = r).$render = this.render,
                i.$formatters.push(function (e) {
                    return angular.isNumber(e) && e << 0 !== e && (e = Math.round(e)),
                        e
                }),
                this.stateOn = angular.isDefined(t.stateOn) ? e.$parent.$eval(t.stateOn) : n.stateOn,
                this.stateOff = angular.isDefined(t.stateOff) ? e.$parent.$eval(t.stateOff) : n.stateOff,
                this.enableReset = angular.isDefined(t.enableReset) ? e.$parent.$eval(t.enableReset) : n.enableReset;
            var o = angular.isDefined(t.titles) ? e.$parent.$eval(t.titles) : n.titles;
            this.titles = angular.isArray(o) && o.length > 0 ? o : n.titles;
            var a = angular.isDefined(t.ratingStates) ? e.$parent.$eval(t.ratingStates) : new Array(angular.isDefined(t.max) ? e.$parent.$eval(t.max) : n.max);
            e.range = this.buildTemplateObjects(a)
        }
            ,
            this.buildTemplateObjects = function (e) {
                for (var t = 0, n = e.length; t < n; t++)
                    e[t] = angular.extend({
                        index: t
                    }, {
                        stateOn: this.stateOn,
                        stateOff: this.stateOff,
                        title: this.getTitle(t)
                    }, e[t]);
                return e
            }
            ,
            this.getTitle = function (e) {
                return e >= this.titles.length ? e + 1 : this.titles[e]
            }
            ,
            e.rate = function (t) {
                if (!e.readonly && t >= 0 && t <= e.range.length) {
                    var n = r.enableReset && i.$viewValue === t ? 0 : t;
                    i.$setViewValue(n),
                        i.$render()
                }
            }
            ,
            e.enter = function (t) {
                e.readonly || (e.value = t),
                    e.onHover({
                        value: t
                    })
            }
            ,
            e.reset = function () {
                e.value = i.$viewValue,
                    e.onLeave()
            }
            ,
            e.onKeydown = function (t) {
                /(37|38|39|40)/.test(t.which) && (t.preventDefault(),
                    t.stopPropagation(),
                    e.rate(e.value + (38 === t.which || 39 === t.which ? 1 : -1)))
            }
            ,
            this.render = function () {
                e.value = i.$viewValue,
                    e.title = r.getTitle(e.value - 1)
            }
    }
    ]).directive("uibRating", function () {
        return {
            require: ["uibRating", "ngModel"],
            scope: {
                readonly: "=?readOnly",
                onHover: "&",
                onLeave: "&"
            },
            controller: "UibRatingController",
            templateUrl: "uib/template/rating/rating.html",
            replace: !0,
            link: function (e, t, n, i) {
                var r = i[0]
                    , o = i[1];
                r.init(o)
            }
        }
    }),
    angular.module("ui.bootstrap.tabs", []).controller("UibTabsetController", ["$scope", function (e) {
        var t, n, i = this;
        function r(e) {
            for (var t = 0; t < i.tabs.length; t++)
                if (i.tabs[t].index === e)
                    return t
        }
        i.tabs = [],
            i.select = function (e, o) {
                if (!n) {
                    var a = r(t)
                        , s = i.tabs[a];
                    if (s) {
                        if (s.tab.onDeselect({
                            $event: o,
                            $selectedIndex: e
                        }),
                            o && o.isDefaultPrevented())
                            return;
                        s.tab.active = !1
                    }
                    var l = i.tabs[e];
                    l ? (l.tab.onSelect({
                        $event: o
                    }),
                        l.tab.active = !0,
                        i.active = l.index,
                        t = l.index) : !l && angular.isDefined(t) && (i.active = null,
                            t = null)
                }
            }
            ,
            i.addTab = function (e) {
                if (i.tabs.push({
                    tab: e,
                    index: e.index
                }),
                    i.tabs.sort(function (e, t) {
                        return e.index > t.index ? 1 : e.index < t.index ? -1 : 0
                    }),
                    e.index === i.active || !angular.isDefined(i.active) && 1 === i.tabs.length) {
                    var t = r(e.index);
                    i.select(t)
                }
            }
            ,
            i.removeTab = function (e) {
                for (var t, n = 0; n < i.tabs.length; n++)
                    if (i.tabs[n].tab === e) {
                        t = n;
                        break
                    }
                if (i.tabs[t].index === i.active) {
                    var r = t === i.tabs.length - 1 ? t - 1 : t + 1 % i.tabs.length;
                    i.select(r)
                }
                i.tabs.splice(t, 1)
            }
            ,
            e.$watch("tabset.active", function (e) {
                angular.isDefined(e) && e !== t && i.select(r(e))
            }),
            e.$on("$destroy", function () {
                n = !0
            })
    }
    ]).directive("uibTabset", function () {
        return {
            transclude: !0,
            replace: !0,
            scope: {},
            bindToController: {
                active: "=?",
                type: "@"
            },
            controller: "UibTabsetController",
            controllerAs: "tabset",
            templateUrl: function (e, t) {
                return t.templateUrl || "uib/template/tabs/tabset.html"
            },
            link: function (e, t, n) {
                e.vertical = !!angular.isDefined(n.vertical) && e.$parent.$eval(n.vertical),
                    e.justified = !!angular.isDefined(n.justified) && e.$parent.$eval(n.justified)
            }
        }
    }).directive("uibTab", ["$parse", function (e) {
        return {
            require: "^uibTabset",
            replace: !0,
            templateUrl: function (e, t) {
                return t.templateUrl || "uib/template/tabs/tab.html"
            },
            transclude: !0,
            scope: {
                heading: "@",
                index: "=?",
                classes: "@?",
                onSelect: "&select",
                onDeselect: "&deselect"
            },
            controller: function () { },
            controllerAs: "tab",
            link: function (t, n, i, r, o) {
                t.disabled = !1,
                    i.disable && t.$parent.$watch(e(i.disable), function (e) {
                        t.disabled = !!e
                    }),
                    angular.isUndefined(i.index) && (r.tabs && r.tabs.length ? t.index = Math.max.apply(null, r.tabs.map(function (e) {
                        return e.index
                    })) + 1 : t.index = 0),
                    angular.isUndefined(i.classes) && (t.classes = ""),
                    t.select = function (e) {
                        if (!t.disabled) {
                            for (var n, i = 0; i < r.tabs.length; i++)
                                if (r.tabs[i].tab === t) {
                                    n = i;
                                    break
                                }
                            r.select(n, e)
                        }
                    }
                    ,
                    r.addTab(t),
                    t.$on("$destroy", function () {
                        r.removeTab(t)
                    }),
                    t.$transcludeFn = o
            }
        }
    }
    ]).directive("uibTabHeadingTransclude", function () {
        return {
            restrict: "A",
            require: "^uibTab",
            link: function (e, t) {
                e.$watch("headingElement", function (e) {
                    e && (t.html(""),
                        t.append(e))
                })
            }
        }
    }).directive("uibTabContentTransclude", function () {
        return {
            restrict: "A",
            require: "^uibTabset",
            link: function (e, t, n) {
                var i = e.$eval(n.uibTabContentTransclude).tab;
                i.$transcludeFn(i.$parent, function (e) {
                    angular.forEach(e, function (e) {
                        !function (e) {
                            return e.tagName && (e.hasAttribute("uib-tab-heading") || e.hasAttribute("data-uib-tab-heading") || e.hasAttribute("x-uib-tab-heading") || "uib-tab-heading" === e.tagName.toLowerCase() || "data-uib-tab-heading" === e.tagName.toLowerCase() || "x-uib-tab-heading" === e.tagName.toLowerCase() || "uib:tab-heading" === e.tagName.toLowerCase())
                        }(e) ? t.append(e) : i.headingElement = e
                    })
                })
            }
        }
    }),
    angular.module("ui.bootstrap.timepicker", []).constant("uibTimepickerConfig", {
        hourStep: 1,
        minuteStep: 1,
        secondStep: 1,
        showMeridian: !0,
        showSeconds: !1,
        meridians: null,
        readonlyInput: !1,
        mousewheel: !0,
        arrowkeys: !0,
        showSpinners: !0,
        templateUrl: "uib/template/timepicker/timepicker.html"
    }).controller("UibTimepickerController", ["$scope", "$element", "$attrs", "$parse", "$log", "$locale", "uibTimepickerConfig", function (e, t, n, i, r, o, a) {
        var s = new Date
            , l = []
            , c = {
                $setViewValue: angular.noop
            }
            , u = angular.isDefined(n.meridians) ? e.$parent.$eval(n.meridians) : a.meridians || o.DATETIME_FORMATS.AMPMS
            , d = !angular.isDefined(n.padHours) || e.$parent.$eval(n.padHours);
        e.tabindex = angular.isDefined(n.tabindex) ? n.tabindex : 0,
            t.removeAttr("tabindex"),
            this.init = function (t, i) {
                (c = t).$render = this.render,
                    c.$formatters.unshift(function (e) {
                        return e ? new Date(e) : null
                    });
                var r = i.eq(0)
                    , o = i.eq(1)
                    , s = i.eq(2);
                (angular.isDefined(n.mousewheel) ? e.$parent.$eval(n.mousewheel) : a.mousewheel) && this.setupMousewheelEvents(r, o, s),
                    (angular.isDefined(n.arrowkeys) ? e.$parent.$eval(n.arrowkeys) : a.arrowkeys) && this.setupArrowkeyEvents(r, o, s),
                    e.readonlyInput = angular.isDefined(n.readonlyInput) ? e.$parent.$eval(n.readonlyInput) : a.readonlyInput,
                    this.setupInputEvents(r, o, s)
            }
            ;
        var p = a.hourStep;
        n.hourStep && l.push(e.$parent.$watch(i(n.hourStep), function (e) {
            p = +e
        }));
        var h, f, m = a.minuteStep;
        n.minuteStep && l.push(e.$parent.$watch(i(n.minuteStep), function (e) {
            m = +e
        })),
            l.push(e.$parent.$watch(i(n.min), function (e) {
                var t = new Date(e);
                h = isNaN(t) ? void 0 : t
            })),
            l.push(e.$parent.$watch(i(n.max), function (e) {
                var t = new Date(e);
                f = isNaN(t) ? void 0 : t
            }));
        var g = !1;
        n.ngDisabled && l.push(e.$parent.$watch(i(n.ngDisabled), function (e) {
            g = e
        })),
            e.noIncrementHours = function () {
                var e = T(s, 60 * p);
                return g || e > f || e < s && e < h
            }
            ,
            e.noDecrementHours = function () {
                var e = T(s, 60 * -p);
                return g || e < h || e > s && e > f
            }
            ,
            e.noIncrementMinutes = function () {
                var e = T(s, m);
                return g || e > f || e < s && e < h
            }
            ,
            e.noDecrementMinutes = function () {
                var e = T(s, -m);
                return g || e < h || e > s && e > f
            }
            ,
            e.noIncrementSeconds = function () {
                var e = k(s, v);
                return g || e > f || e < s && e < h
            }
            ,
            e.noDecrementSeconds = function () {
                var e = k(s, -v);
                return g || e < h || e > s && e > f
            }
            ,
            e.noToggleMeridian = function () {
                return s.getHours() < 12 ? g || T(s, 720) > f : g || T(s, -720) < h
            }
            ;
        var v = a.secondStep;
        function y() {
            var t = +e.hours;
            if ((e.showMeridian ? t > 0 && t < 13 : t >= 0 && t < 24) && "" !== e.hours)
                return e.showMeridian && (12 === t && (t = 0),
                    e.meridian === u[1] && (t += 12)),
                    t
        }
        function b() {
            var t = +e.minutes;
            if (t >= 0 && t < 60 && "" !== e.minutes)
                return t
        }
        function w(e, t) {
            return null === e ? "" : angular.isDefined(e) && e.toString().length < 2 && !t ? "0" + e : e.toString()
        }
        function $(e) {
            S(),
                c.$setViewValue(new Date(s)),
                C(e)
        }
        function S() {
            c.$setValidity("time", !0),
                e.invalidHours = !1,
                e.invalidMinutes = !1,
                e.invalidSeconds = !1
        }
        function C(t) {
            if (c.$modelValue) {
                var n = s.getHours()
                    , i = s.getMinutes()
                    , r = s.getSeconds();
                e.showMeridian && (n = 0 === n || 12 === n ? 12 : n % 12),
                    e.hours = "h" === t ? n : w(n, !d),
                    "m" !== t && (e.minutes = w(i)),
                    e.meridian = s.getHours() < 12 ? u[0] : u[1],
                    "s" !== t && (e.seconds = w(r)),
                    e.meridian = s.getHours() < 12 ? u[0] : u[1]
            } else
                e.hours = null,
                    e.minutes = null,
                    e.seconds = null,
                    e.meridian = u[0]
        }
        function x(e) {
            s = k(s, e),
                $()
        }
        function T(e, t) {
            return k(e, 60 * t)
        }
        function k(e, t) {
            var n = new Date(e.getTime() + 1e3 * t)
                , i = new Date(e);
            return i.setHours(n.getHours(), n.getMinutes(), n.getSeconds()),
                i
        }
        function P() {
            return (null === e.hours || "" === e.hours) && (null === e.minutes || "" === e.minutes) && (!e.showSeconds || e.showSeconds && (null === e.seconds || "" === e.seconds))
        }
        n.secondStep && l.push(e.$parent.$watch(i(n.secondStep), function (e) {
            v = +e
        })),
            e.showSeconds = a.showSeconds,
            n.showSeconds && l.push(e.$parent.$watch(i(n.showSeconds), function (t) {
                e.showSeconds = !!t
            })),
            e.showMeridian = a.showMeridian,
            n.showMeridian && l.push(e.$parent.$watch(i(n.showMeridian), function (t) {
                if (e.showMeridian = !!t,
                    c.$error.time) {
                    var n = y()
                        , i = b();
                    angular.isDefined(n) && angular.isDefined(i) && (s.setHours(n),
                        $())
                } else
                    C()
            })),
            this.setupMousewheelEvents = function (t, n, i) {
                var r = function (e) {
                    e.originalEvent && (e = e.originalEvent);
                    var t = e.wheelDelta ? e.wheelDelta : -e.deltaY;
                    return e.detail || t > 0
                };
                t.bind("mousewheel wheel", function (t) {
                    g || e.$apply(r(t) ? e.incrementHours() : e.decrementHours()),
                        t.preventDefault()
                }),
                    n.bind("mousewheel wheel", function (t) {
                        g || e.$apply(r(t) ? e.incrementMinutes() : e.decrementMinutes()),
                            t.preventDefault()
                    }),
                    i.bind("mousewheel wheel", function (t) {
                        g || e.$apply(r(t) ? e.incrementSeconds() : e.decrementSeconds()),
                            t.preventDefault()
                    })
            }
            ,
            this.setupArrowkeyEvents = function (t, n, i) {
                t.bind("keydown", function (t) {
                    g || (38 === t.which ? (t.preventDefault(),
                        e.incrementHours(),
                        e.$apply()) : 40 === t.which && (t.preventDefault(),
                            e.decrementHours(),
                            e.$apply()))
                }),
                    n.bind("keydown", function (t) {
                        g || (38 === t.which ? (t.preventDefault(),
                            e.incrementMinutes(),
                            e.$apply()) : 40 === t.which && (t.preventDefault(),
                                e.decrementMinutes(),
                                e.$apply()))
                    }),
                    i.bind("keydown", function (t) {
                        g || (38 === t.which ? (t.preventDefault(),
                            e.incrementSeconds(),
                            e.$apply()) : 40 === t.which && (t.preventDefault(),
                                e.decrementSeconds(),
                                e.$apply()))
                    })
            }
            ,
            this.setupInputEvents = function (t, n, i) {
                if (e.readonlyInput)
                    return e.updateHours = angular.noop,
                        e.updateMinutes = angular.noop,
                        void (e.updateSeconds = angular.noop);
                var r = function (t, n, i) {
                    c.$setViewValue(null),
                        c.$setValidity("time", !1),
                        angular.isDefined(t) && (e.invalidHours = t),
                        angular.isDefined(n) && (e.invalidMinutes = n),
                        angular.isDefined(i) && (e.invalidSeconds = i)
                };
                e.updateHours = function () {
                    var e = y()
                        , t = b();
                    c.$setDirty(),
                        angular.isDefined(e) && angular.isDefined(t) ? (s.setHours(e),
                            s.setMinutes(t),
                            s < h || s > f ? r(!0) : $("h")) : r(!0)
                }
                    ,
                    t.bind("blur", function (t) {
                        c.$setTouched(),
                            P() ? S() : null === e.hours || "" === e.hours ? r(!0) : !e.invalidHours && e.hours < 10 && e.$apply(function () {
                                e.hours = w(e.hours, !d)
                            })
                    }),
                    e.updateMinutes = function () {
                        var e = b()
                            , t = y();
                        c.$setDirty(),
                            angular.isDefined(e) && angular.isDefined(t) ? (s.setHours(t),
                                s.setMinutes(e),
                                s < h || s > f ? r(void 0, !0) : $("m")) : r(void 0, !0)
                    }
                    ,
                    n.bind("blur", function (t) {
                        c.$setTouched(),
                            P() ? S() : null === e.minutes ? r(void 0, !0) : !e.invalidMinutes && e.minutes < 10 && e.$apply(function () {
                                e.minutes = w(e.minutes)
                            })
                    }),
                    e.updateSeconds = function () {
                        var t = function () {
                            var t = +e.seconds;
                            return t >= 0 && t < 60 ? t : void 0
                        }();
                        c.$setDirty(),
                            angular.isDefined(t) ? (s.setSeconds(t),
                                $("s")) : r(void 0, void 0, !0)
                    }
                    ,
                    i.bind("blur", function (t) {
                        P() ? S() : !e.invalidSeconds && e.seconds < 10 && e.$apply(function () {
                            e.seconds = w(e.seconds)
                        })
                    })
            }
            ,
            this.render = function () {
                var t = c.$viewValue;
                isNaN(t) ? (c.$setValidity("time", !1),
                    r.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')) : (t && (s = t),
                        s < h || s > f ? (c.$setValidity("time", !1),
                            e.invalidHours = !0,
                            e.invalidMinutes = !0) : S(),
                        C())
            }
            ,
            e.showSpinners = angular.isDefined(n.showSpinners) ? e.$parent.$eval(n.showSpinners) : a.showSpinners,
            e.incrementHours = function () {
                e.noIncrementHours() || x(60 * p * 60)
            }
            ,
            e.decrementHours = function () {
                e.noDecrementHours() || x(60 * -p * 60)
            }
            ,
            e.incrementMinutes = function () {
                e.noIncrementMinutes() || x(60 * m)
            }
            ,
            e.decrementMinutes = function () {
                e.noDecrementMinutes() || x(60 * -m)
            }
            ,
            e.incrementSeconds = function () {
                e.noIncrementSeconds() || x(v)
            }
            ,
            e.decrementSeconds = function () {
                e.noDecrementSeconds() || x(-v)
            }
            ,
            e.toggleMeridian = function () {
                var t = b()
                    , n = y();
                e.noToggleMeridian() || (angular.isDefined(t) && angular.isDefined(n) ? x(720 * (s.getHours() < 12 ? 60 : -60)) : e.meridian = e.meridian === u[0] ? u[1] : u[0])
            }
            ,
            e.blur = function () {
                c.$setTouched()
            }
            ,
            e.$on("$destroy", function () {
                for (; l.length;)
                    l.shift()()
            })
    }
    ]).directive("uibTimepicker", ["uibTimepickerConfig", function (e) {
        return {
            require: ["uibTimepicker", "?^ngModel"],
            controller: "UibTimepickerController",
            controllerAs: "timepicker",
            replace: !0,
            scope: {},
            templateUrl: function (t, n) {
                return n.templateUrl || e.templateUrl
            },
            link: function (e, t, n, i) {
                var r = i[0]
                    , o = i[1];
                o && r.init(o, t.find("input"))
            }
        }
    }
    ]),
    angular.module("ui.bootstrap.typeahead", ["ui.bootstrap.debounce", "ui.bootstrap.position"]).factory("uibTypeaheadParser", ["$parse", function (e) {
        var t = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;
        return {
            parse: function (n) {
                var i = n.match(t);
                if (!i)
                    throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "' + n + '".');
                return {
                    itemName: i[3],
                    source: e(i[4]),
                    viewMapper: e(i[2] || i[1]),
                    modelMapper: e(i[1])
                }
            }
        }
    }
    ]).controller("UibTypeaheadController", ["$scope", "$element", "$attrs", "$compile", "$parse", "$q", "$timeout", "$document", "$window", "$rootScope", "$$debounce", "$uibPosition", "uibTypeaheadParser", function (e, t, n, i, r, o, a, s, l, c, u, d, p) {
        var h, f, m = [9, 13, 27, 38, 40], g = e.$eval(n.typeaheadMinLength);
        g || 0 === g || (g = 1),
            e.$watch(n.typeaheadMinLength, function (e) {
                g = e || 0 === e ? e : 1
            });
        var v = e.$eval(n.typeaheadWaitMs) || 0
            , y = !1 !== e.$eval(n.typeaheadEditable);
        e.$watch(n.typeaheadEditable, function (e) {
            y = !1 !== e
        });
        var b, w, $ = r(n.typeaheadLoading).assign || angular.noop, S = n.typeaheadShouldSelect ? r(n.typeaheadShouldSelect) : function (e, t) {
            var n = t.$event;
            return 13 === n.which || 9 === n.which
        }
            , C = r(n.typeaheadOnSelect), x = !!angular.isDefined(n.typeaheadSelectOnBlur) && e.$eval(n.typeaheadSelectOnBlur), T = r(n.typeaheadNoResults).assign || angular.noop, k = n.typeaheadInputFormatter ? r(n.typeaheadInputFormatter) : void 0, P = !!n.typeaheadAppendToBody && e.$eval(n.typeaheadAppendToBody), E = n.typeaheadAppendTo ? e.$eval(n.typeaheadAppendTo) : null, I = !1 !== e.$eval(n.typeaheadFocusFirst), M = !!n.typeaheadSelectOnExact && e.$eval(n.typeaheadSelectOnExact), O = r(n.typeaheadIsOpen).assign || angular.noop, D = e.$eval(n.typeaheadShowHint) || !1, A = r(n.ngModel), _ = r(n.ngModel + "($$$p)"), R = p.parse(n.uibTypeahead), L = e.$new(), U = e.$on("$destroy", function () {
                L.$destroy()
            });
        L.$on("$destroy", U);
        var N, j, F = "typeahead-" + L.$id + "-" + Math.floor(1e4 * Math.random());
        t.attr({
            "aria-autocomplete": "list",
            "aria-expanded": !1,
            "aria-owns": F
        }),
            D && ((N = angular.element("<div></div>")).css("position", "relative"),
                t.after(N),
                (j = t.clone()).attr("placeholder", ""),
                j.attr("tabindex", "-1"),
                j.val(""),
                j.css({
                    position: "absolute",
                    top: "0px",
                    left: "0px",
                    "border-color": "transparent",
                    "box-shadow": "none",
                    opacity: 1,
                    background: "none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",
                    color: "#999"
                }),
                t.css({
                    position: "relative",
                    "vertical-align": "top",
                    "background-color": "transparent"
                }),
                N.append(j),
                j.after(t));
        var B = angular.element("<div uib-typeahead-popup></div>");
        B.attr({
            id: F,
            matches: "matches",
            active: "activeIdx",
            select: "select(activeIdx, evt)",
            "move-in-progress": "moveInProgress",
            query: "query",
            position: "position",
            "assign-is-open": "assignIsOpen(isOpen)",
            debounce: "debounceUpdate"
        }),
            angular.isDefined(n.typeaheadTemplateUrl) && B.attr("template-url", n.typeaheadTemplateUrl),
            angular.isDefined(n.typeaheadPopupTemplateUrl) && B.attr("popup-template-url", n.typeaheadPopupTemplateUrl);
        var V = function () {
            L.matches = [],
                L.activeIdx = -1,
                t.attr("aria-expanded", !1),
                D && j.val("")
        }
            , z = function (e) {
                return F + "-option-" + e
            };
        L.$watch("activeIdx", function (e) {
            e < 0 ? t.removeAttr("aria-activedescendant") : t.attr("aria-activedescendant", z(e))
        });
        var H = function (n, i) {
            var r = {
                $viewValue: n
            };
            $(e, !0),
                T(e, !1),
                o.when(R.source(e, r)).then(function (o) {
                    var a = n === h.$viewValue;
                    if (a && b)
                        if (o && o.length > 0) {
                            L.activeIdx = I ? 0 : -1,
                                T(e, !1),
                                L.matches.length = 0;
                            for (var s = 0; s < o.length; s++)
                                r[R.itemName] = o[s],
                                    L.matches.push({
                                        id: z(s),
                                        label: R.viewMapper(L, r),
                                        model: o[s]
                                    });
                            if (L.query = n,
                                Y(),
                                t.attr("aria-expanded", !0),
                                M && 1 === L.matches.length && function (e, t) {
                                    return !!(L.matches.length > t && e) && e.toUpperCase() === L.matches[t].label.toUpperCase()
                                }(n, 0) && (angular.isNumber(L.debounceUpdate) || angular.isObject(L.debounceUpdate) ? u(function () {
                                    L.select(0, i)
                                }, angular.isNumber(L.debounceUpdate) ? L.debounceUpdate : L.debounceUpdate.default) : L.select(0, i)),
                                D) {
                                var l = L.matches[0].label;
                                angular.isString(n) && n.length > 0 && l.slice(0, n.length).toUpperCase() === n.toUpperCase() ? j.val(n + l.slice(n.length)) : j.val("")
                            }
                        } else
                            V(),
                                T(e, !0);
                    a && $(e, !1)
                }, function () {
                    V(),
                        $(e, !1),
                        T(e, !0)
                })
        };
        P && (angular.element(l).on("resize", G),
            s.find("body").on("scroll", G));
        var W, q = u(function () {
            L.matches.length && Y(),
                L.moveInProgress = !1
        }, 200);
        function G() {
            L.moveInProgress || (L.moveInProgress = !0,
                L.$digest()),
                q()
        }
        function Y() {
            L.position = P ? d.offset(t) : d.position(t),
                L.position.top += t.prop("offsetHeight")
        }
        L.moveInProgress = !1,
            L.query = void 0;
        var X = function () {
            W && a.cancel(W)
        };
        V(),
            L.assignIsOpen = function (t) {
                O(e, t)
            }
            ,
            L.select = function (i, r) {
                var o, s, l = {};
                w = !0,
                    l[R.itemName] = s = L.matches[i].model,
                    o = R.modelMapper(e, l),
                    function (t, n) {
                        angular.isFunction(A(e)) && f && f.$options && f.$options.getterSetter ? _(t, {
                            $$$p: n
                        }) : A.assign(t, n)
                    }(e, o),
                    h.$setValidity("editable", !0),
                    h.$setValidity("parse", !0),
                    C(e, {
                        $item: s,
                        $model: o,
                        $label: R.viewMapper(e, l),
                        $event: r
                    }),
                    V(),
                    !1 !== L.$eval(n.typeaheadFocusOnSelect) && a(function () {
                        t[0].focus()
                    }, 0, !1)
            }
            ,
            t.on("keydown", function (t) {
                if (0 !== L.matches.length && -1 !== m.indexOf(t.which)) {
                    var n, i = S(e, {
                        $event: t
                    });
                    if (-1 === L.activeIdx && i || 9 === t.which && t.shiftKey)
                        return V(),
                            void L.$digest();
                    switch (t.preventDefault(),
                    t.which) {
                        case 27:
                            t.stopPropagation(),
                                V(),
                                e.$digest();
                            break;
                        case 38:
                            L.activeIdx = (L.activeIdx > 0 ? L.activeIdx : L.matches.length) - 1,
                                L.$digest(),
                                (n = B.find("li")[L.activeIdx]).parentNode.scrollTop = n.offsetTop;
                            break;
                        case 40:
                            L.activeIdx = (L.activeIdx + 1) % L.matches.length,
                                L.$digest(),
                                (n = B.find("li")[L.activeIdx]).parentNode.scrollTop = n.offsetTop;
                            break;
                        default:
                            i && L.$apply(function () {
                                angular.isNumber(L.debounceUpdate) || angular.isObject(L.debounceUpdate) ? u(function () {
                                    L.select(L.activeIdx, t)
                                }, angular.isNumber(L.debounceUpdate) ? L.debounceUpdate : L.debounceUpdate.default) : L.select(L.activeIdx, t)
                            })
                    }
                }
            }),
            t.bind("focus", function (e) {
                b = !0,
                    0 !== g || h.$viewValue || a(function () {
                        H(h.$viewValue, e)
                    }, 0)
            }),
            t.bind("blur", function (e) {
                x && L.matches.length && -1 !== L.activeIdx && !w && (w = !0,
                    L.$apply(function () {
                        angular.isObject(L.debounceUpdate) && angular.isNumber(L.debounceUpdate.blur) ? u(function () {
                            L.select(L.activeIdx, e)
                        }, L.debounceUpdate.blur) : L.select(L.activeIdx, e)
                    })),
                    !y && h.$error.editable && (h.$setViewValue(),
                        h.$setValidity("editable", !0),
                        h.$setValidity("parse", !0),
                        t.val("")),
                    b = !1,
                    w = !1
            });
        var J = function (n) {
            t[0] !== n.target && 3 !== n.which && 0 !== L.matches.length && (V(),
                c.$$phase || e.$digest())
        };
        s.on("click", J),
            e.$on("$destroy", function () {
                s.off("click", J),
                    (P || E) && K.remove(),
                    P && (angular.element(l).off("resize", G),
                        s.find("body").off("scroll", G)),
                    B.remove(),
                    D && N.remove()
            });
        var K = i(B)(L);
        P ? s.find("body").append(K) : E ? angular.element(E).eq(0).append(K) : t.after(K),
            this.init = function (t, n) {
                h = t,
                    f = n,
                    L.debounceUpdate = h.$options && r(h.$options.debounce)(e),
                    h.$parsers.unshift(function (t) {
                        return b = !0,
                            0 === g || t && t.length >= g ? v > 0 ? (X(),
                                function (e) {
                                    W = a(function () {
                                        H(e)
                                    }, v)
                                }(t)) : H(t) : ($(e, !1),
                                    X(),
                                    V()),
                            y ? t : t ? void h.$setValidity("editable", !1) : (h.$setValidity("editable", !0),
                                null)
                    }),
                    h.$formatters.push(function (t) {
                        var n, i = {};
                        return y || h.$setValidity("editable", !0),
                            k ? (i.$model = t,
                                k(e, i)) : (i[R.itemName] = t,
                                    n = R.viewMapper(e, i),
                                    i[R.itemName] = void 0,
                                    n !== R.viewMapper(e, i) ? n : t)
                    })
            }
    }
    ]).directive("uibTypeahead", function () {
        return {
            controller: "UibTypeaheadController",
            require: ["ngModel", "^?ngModelOptions", "uibTypeahead"],
            link: function (e, t, n, i) {
                i[2].init(i[0], i[1])
            }
        }
    }).directive("uibTypeaheadPopup", ["$$debounce", function (e) {
        return {
            scope: {
                matches: "=",
                query: "=",
                active: "=",
                position: "&",
                moveInProgress: "=",
                select: "&",
                assignIsOpen: "&",
                debounce: "&"
            },
            replace: !0,
            templateUrl: function (e, t) {
                return t.popupTemplateUrl || "uib/template/typeahead/typeahead-popup.html"
            },
            link: function (t, n, i) {
                t.templateUrl = i.templateUrl,
                    t.isOpen = function () {
                        var e = t.matches.length > 0;
                        return t.assignIsOpen({
                            isOpen: e
                        }),
                            e
                    }
                    ,
                    t.isActive = function (e) {
                        return t.active === e
                    }
                    ,
                    t.selectActive = function (e) {
                        t.active = e
                    }
                    ,
                    t.selectMatch = function (n, i) {
                        var r = t.debounce();
                        angular.isNumber(r) || angular.isObject(r) ? e(function () {
                            t.select({
                                activeIdx: n,
                                evt: i
                            })
                        }, angular.isNumber(r) ? r : r.default) : t.select({
                            activeIdx: n,
                            evt: i
                        })
                    }
            }
        }
    }
    ]).directive("uibTypeaheadMatch", ["$templateRequest", "$compile", "$parse", function (e, t, n) {
        return {
            scope: {
                index: "=",
                match: "=",
                query: "="
            },
            link: function (i, r, o) {
                var a = n(o.templateUrl)(i.$parent) || "uib/template/typeahead/typeahead-match.html";
                e(a).then(function (e) {
                    var n = angular.element(e.trim());
                    r.replaceWith(n),
                        t(n)(i)
                })
            }
        }
    }
    ]).filter("uibTypeaheadHighlight", ["$sce", "$injector", "$log", function (e, t, n) {
        var i;
        return i = t.has("$sanitize"),
            function (t, r) {
                return !i && function (e) {
                    return /<.*>/g.test(e)
                }(t) && n.warn("Unsafe use of typeahead please use ngSanitize"),
                    t = r ? ("" + t).replace(new RegExp(r.replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1"), "gi"), "<strong>$&</strong>") : t,
                    i || (t = e.trustAsHtml(t)),
                    t
            }
    }
    ]),
    angular.module("uib/template/accordion/accordion-group.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/accordion/accordion-group.html", '<div class="panel" ng-class="panelClass || \'panel-default\'">\n  <div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n    <h4 class="panel-title">\n      <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading"><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n    <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')
    }
    ]),
    angular.module("uib/template/accordion/accordion.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/accordion/accordion.html", '<div role="tablist" class="panel-group" ng-transclude></div>')
    }
    ]),
    angular.module("uib/template/alert/alert.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/alert/alert.html", '<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')
    }
    ]),
    angular.module("uib/template/carousel/carousel.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/carousel/carousel.html", '<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n  <div class="carousel-inner" ng-transclude></div>\n  <a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n    <span class="sr-only">previous</span>\n  </a>\n  <a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n    <span class="sr-only">next</span>\n  </a>\n  <ol class="carousel-indicators" ng-show="slides.length > 1">\n    <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n      <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n    </li>\n  </ol>\n</div>\n')
    }
    ]),
    angular.module("uib/template/carousel/slide.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/carousel/slide.html", '<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')
    }
    ]),
    angular.module("uib/template/datepicker/datepicker.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/datepicker/datepicker.html", '<div class="uib-datepicker" ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <uib-daypicker ng-switch-when="day" tabindex="0"></uib-daypicker>\n  <uib-monthpicker ng-switch-when="month" tabindex="0"></uib-monthpicker>\n  <uib-yearpicker ng-switch-when="year" tabindex="0"></uib-yearpicker>\n</div>\n')
    }
    ]),
    angular.module("uib/template/datepicker/day.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/datepicker/day.html", '<table class="uib-daypicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')
    }
    ]),
    angular.module("uib/template/datepicker/month.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/datepicker/month.html", '<table class="uib-monthpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')
    }
    ]),
    angular.module("uib/template/datepicker/year.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/datepicker/year.html", '<table class="uib-yearpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')
    }
    ]),
    angular.module("uib/template/datepickerPopup/popup.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/datepickerPopup/popup.html", '<div>\n  <ul class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n    <li ng-transclude></li>\n    <li ng-if="showButtonBar" class="uib-button-bar">\n      <span class="btn-group pull-left">\n        <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n        <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n      </span>\n      <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n    </li>\n  </ul>\n</div>\n')
    }
    ]),
    angular.module("uib/template/modal/backdrop.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/modal/backdrop.html", '<div class="modal-backdrop"\n     uib-modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')
    }
    ]),
    angular.module("uib/template/modal/window.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/modal/window.html", '<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    uib-modal-animation-class="fade"\n    modal-in-class="in"\n    ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}">\n    <div class="modal-dialog {{size ? \'modal-\' + size : \'\'}}"><div class="modal-content" uib-modal-transclude></div></div>\n</div>\n')
    }
    ]),
    angular.module("uib/template/pager/pager.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/pager/pager.html", '<ul class="pager">\n  <li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n</ul>\n')
    }
    ]),
    angular.module("uib/template/pagination/pagination.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/pagination/pagination.html", '<ul class="pagination">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n</ul>\n')
    }
    ]),
    angular.module("uib/template/tooltip/tooltip-html-popup.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/tooltip/tooltip-html-popup.html", '<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')
    }
    ]),
    angular.module("uib/template/tooltip/tooltip-popup.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/tooltip/tooltip-popup.html", '<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')
    }
    ]),
    angular.module("uib/template/tooltip/tooltip-template-popup.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/tooltip/tooltip-template-popup.html", '<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    uib-tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')
    }
    ]),
    angular.module("uib/template/popover/popover-html.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/popover/popover-html.html", '<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n      <div class="popover-content" ng-bind-html="contentExp()"></div>\n  </div>\n</div>\n')
    }
    ]),
    angular.module("uib/template/popover/popover-template.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/popover/popover-template.html", '<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n      <div class="popover-content"\n        uib-tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')
    }
    ]),
    angular.module("uib/template/popover/popover.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/popover/popover.html", '<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')
    }
    ]),
    angular.module("uib/template/progressbar/bar.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/progressbar/bar.html", '<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')
    }
    ]),
    angular.module("uib/template/progressbar/progress.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/progressbar/progress.html", '<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')
    }
    ]),
    angular.module("uib/template/progressbar/progressbar.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/progressbar/progressbar.html", '<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')
    }
    ]),
    angular.module("uib/template/rating/rating.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/rating/rating.html", '<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n</span>\n')
    }
    ]),
    angular.module("uib/template/tabs/tab.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/tabs/tab.html", '<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')
    }
    ]),
    angular.module("uib/template/tabs/tabset.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/tabs/tabset.html", '<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')
    }
    ]),
    angular.module("uib/template/timepicker/timepicker.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/timepicker/timepicker.html", '<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')
    }
    ]),
    angular.module("uib/template/typeahead/typeahead-match.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/typeahead/typeahead-match.html", '<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')
    }
    ]),
    angular.module("uib/template/typeahead/typeahead-popup.html", []).run(["$templateCache", function (e) {
        e.put("uib/template/typeahead/typeahead-popup.html", '<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')
    }
    ]),
    angular.module("ui.bootstrap.carousel").run(function () {
        !angular.$$csp().noInlineStyle && !angular.$$uibCarouselCss && angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),
            angular.$$uibCarouselCss = !0
    }),
    angular.module("ui.bootstrap.datepicker").run(function () {
        !angular.$$csp().noInlineStyle && !angular.$$uibDatepickerCss && angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>'),
            angular.$$uibDatepickerCss = !0
    }),
    angular.module("ui.bootstrap.position").run(function () {
        !angular.$$csp().noInlineStyle && !angular.$$uibPositionCss && angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),
            angular.$$uibPositionCss = !0
    }),
    angular.module("ui.bootstrap.datepickerPopup").run(function () {
        !angular.$$csp().noInlineStyle && !angular.$$uibDatepickerpopupCss && angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>'),
            angular.$$uibDatepickerpopupCss = !0
    }),
    angular.module("ui.bootstrap.tooltip").run(function () {
        !angular.$$csp().noInlineStyle && !angular.$$uibTooltipCss && angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),
            angular.$$uibTooltipCss = !0
    }),
    angular.module("ui.bootstrap.timepicker").run(function () {
        !angular.$$csp().noInlineStyle && !angular.$$uibTimepickerCss && angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>'),
            angular.$$uibTimepickerCss = !0
    }),
    angular.module("ui.bootstrap.typeahead").run(function () {
        !angular.$$csp().noInlineStyle && !angular.$$uibTypeaheadCss && angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),
            angular.$$uibTypeaheadCss = !0
    }),
    function (e, t) {
        "object" == typeof exports && "undefined" != typeof module ? t(exports, require("angular")) : "function" == typeof define && define.amd ? define(["exports", "angular"], t) : t((e = e || self)["@uirouter/angularjs"] = {}, e.angular)
    }(this, function (e, t) {
        "use strict";
        var n = angular
            , i = t && t.module ? t : n;
        function r(e) {
            var t = [].slice.apply(arguments, [1])
                , n = e.length;
            return function t(i) {
                return i.length >= n ? e.apply(null, i) : function () {
                    return t(i.concat([].slice.apply(arguments)))
                }
            }(t)
        }
        function o() {
            var e = arguments
                , t = e.length - 1;
            return function () {
                for (var n = t, i = e[t].apply(this, arguments); n--;)
                    i = e[n].call(this, i);
                return i
            }
        }
        function a() {
            for (var e = [], t = 0; t < arguments.length; t++)
                e[t] = arguments[t];
            return o.apply(null, [].slice.call(arguments).reverse())
        }
        var s = function (e) {
            return function (t) {
                return t && t[e]
            }
        }
            , l = r(function (e, t, n) {
                return n && n[e] === t
            })
            , c = function (e) {
                return a.apply(null, e.split(".").map(s))
            }
            , u = function (e) {
                return function () {
                    for (var t = [], n = 0; n < arguments.length; n++)
                        t[n] = arguments[n];
                    return !e.apply(null, t)
                }
            };
        function d(e, t) {
            return function () {
                for (var n = [], i = 0; i < arguments.length; i++)
                    n[i] = arguments[i];
                return e.apply(null, n) && t.apply(null, n)
            }
        }
        function p(e, t) {
            return function () {
                for (var n = [], i = 0; i < arguments.length; i++)
                    n[i] = arguments[i];
                return e.apply(null, n) || t.apply(null, n)
            }
        }
        var h = function (e) {
            return function (t) {
                return t.reduce(function (t, n) {
                    return t && !!e(n)
                }, !0)
            }
        }
            , f = function (e) {
                return function (t) {
                    return t.reduce(function (t, n) {
                        return t || !!e(n)
                    }, !1)
                }
            }
            , m = function (e) {
                return function (t) {
                    return null != t && t.constructor === e || t instanceof e
                }
            }
            , g = function (e) {
                return function (t) {
                    return e === t
                }
            }
            , v = function (e) {
                return function () {
                    return e
                }
            };
        function y(e, t) {
            return function (n) {
                return n[e].apply(n, t)
            }
        }
        function b(e) {
            return function (t) {
                for (var n = 0; n < e.length; n++)
                    if (e[n][0](t))
                        return e[n][1](t)
            }
        }
        var w = Object.prototype.toString
            , $ = function (e) {
                return function (t) {
                    return typeof t === e
                }
            }
            , S = $("undefined")
            , C = u(S)
            , x = function (e) {
                return null === e
            }
            , T = p(x, S)
            , k = $("function")
            , P = $("number")
            , E = $("string")
            , I = function (e) {
                return null !== e && "object" == typeof e
            }
            , M = Array.isArray
            , O = function (e) {
                return "[object Date]" === w.call(e)
            }
            , D = function (e) {
                return "[object RegExp]" === w.call(e)
            };
        function A(e) {
            if (M(e) && e.length) {
                var t = e.slice(0, -1)
                    , n = e.slice(-1);
                return !(t.filter(u(E)).length || n.filter(u(k)).length)
            }
            return k(e)
        }
        var _ = d(I, a(s("then"), k))
            , R = function (e, t) {
                return t.reduce(function (t, n) {
                    return t[n] = (i = e + "." + n + "()",
                        function () {
                            throw new Error("No implementation for " + i + ". The framework specific code did not implement this method.")
                        }
                    ),
                        t;
                    var i
                }, {})
            }
            , L = {
                $q: void 0,
                $injector: void 0
            }
            , U = "object" == typeof self && self.self === self && self || "object" == typeof global && global.global === global && global || void 0
            , N = U.angular || {}
            , j = N.fromJson || JSON.parse.bind(JSON)
            , F = N.toJson || JSON.stringify.bind(JSON)
            , B = N.forEach || function (e, t, n) {
                if (M(e))
                    return e.forEach(t, n);
                Object.keys(e).forEach(function (n) {
                    return t(e[n], n)
                })
            }
            , V = Object.assign || Ee
            , z = N.equals || function e(t, n) {
                if (t === n)
                    return !0;
                if (null === t || null === n)
                    return !1;
                if (t != t && n != n)
                    return !0;
                var i = typeof t;
                if (i !== typeof n || "object" !== i)
                    return !1;
                var r, o, a = [t, n];
                if (h(M)(a))
                    return o = n,
                        (r = t).length === o.length && xe(r, o).reduce(function (t, n) {
                            return t && e(n[0], n[1])
                        }, !0);
                if (h(O)(a))
                    return t.getTime() === n.getTime();
                if (h(D)(a))
                    return t.toString() === n.toString();
                if (h(k)(a))
                    return !0;
                if ([k, M, O, D].map(f).reduce(function (e, t) {
                    return e || !!t(a)
                }, !1))
                    return !1;
                var s = {};
                for (var l in t) {
                    if (!e(t[l], n[l]))
                        return !1;
                    s[l] = !0
                }
                for (var l in n)
                    if (!s[l])
                        return !1;
                return !0
            }
            ;
        function H(e) {
            return e
        }
        function W() { }
        function q(e, t, n, i, r) {
            void 0 === r && (r = !1);
            var o = function (t) {
                return e()[t].bind(n())
            };
            return (i = i || Object.keys(e())).reduce(function (e, n) {
                var i;
                return e[n] = r ? (i = n,
                    function () {
                        return t[i] = o(i),
                            t[i].apply(null, arguments)
                    }
                ) : o(n),
                    e
            }, t)
        }
        var G = function (e, t) {
            return V(Object.create(e), t)
        }
            , Y = r(X);
        function X(e, t) {
            return -1 !== e.indexOf(t)
        }
        var J = r(K);
        function K(e, t) {
            var n = e.indexOf(t);
            return 0 <= n && e.splice(n, 1),
                e
        }
        var Q = r(Z);
        function Z(e, t) {
            return e.push(t),
                t
        }
        var ee = function (e) {
            return e.slice().forEach(function (t) {
                "function" == typeof t && t(),
                    J(e, t)
            })
        };
        function te(e) {
            for (var t = [], n = 1; n < arguments.length; n++)
                t[n - 1] = arguments[n];
            var i = V.apply(void 0, [{}].concat(t.reverse()));
            return V(i, re(e || {}, Object.keys(i)))
        }
        var ne = function (e, t) {
            return V(e, t)
        };
        function ie(e, t) {
            var n = [];
            for (var i in e.path) {
                if (e.path[i] !== t.path[i])
                    break;
                n.push(e.path[i])
            }
            return n
        }
        function re(e, t) {
            var n = {};
            for (var i in e)
                -1 !== t.indexOf(i) && (n[i] = e[i]);
            return n
        }
        function oe(e, t) {
            return Object.keys(e).filter(u(Y(t))).reduce(function (t, n) {
                return t[n] = e[n],
                    t
            }, {})
        }
        function ae(e, t) {
            return ue(e, s(t))
        }
        function se(e, t) {
            var n = M(e)
                , i = n ? [] : {}
                , r = n ? function (e) {
                    return i.push(e)
                }
                    : function (e, t) {
                        return i[t] = e
                    }
                ;
            return B(e, function (e, n) {
                t(e, n) && r(e, n)
            }),
                i
        }
        function le(e, t) {
            var n;
            return B(e, function (e, i) {
                n || t(e, i) && (n = e)
            }),
                n
        }
        var ce = ue;
        function ue(e, t, n) {
            return n = n || (M(e) ? [] : {}),
                B(e, function (e, i) {
                    return n[i] = t(e, i)
                }),
                n
        }
        var de = function (e) {
            return Object.keys(e).map(function (t) {
                return e[t]
            })
        }
            , pe = function (e, t) {
                return e && t
            }
            , he = function (e, t) {
                return e || t
            }
            , fe = function (e, t) {
                return e.concat(t)
            }
            , me = function (e, t) {
                return M(t) ? e.concat(t.reduce(me, [])) : ge(e, t)
            };
        function ge(e, t) {
            return e.push(t),
                e
        }
        var ve = function (e, t) {
            return Y(e, t) ? e : ge(e, t)
        }
            , ye = function (e) {
                return e.reduce(fe, [])
            }
            , be = function (e) {
                return e.reduce(me, [])
            }
            , we = Se
            , $e = Se;
        function Se(e, t) {
            return void 0 === t && (t = "assert failure"),
                function (n) {
                    var i = e(n);
                    if (!i)
                        throw new Error(k(t) ? t(n) : t);
                    return i
                }
        }
        var Ce = function (e) {
            return Object.keys(e).map(function (t) {
                return [t, e[t]]
            })
        };
        function xe() {
            for (var e = [], t = 0; t < arguments.length; t++)
                e[t] = arguments[t];
            if (0 === e.length)
                return [];
            for (var n = e.reduce(function (e, t) {
                return Math.min(t.length, e)
            }, 9007199254740991), i = [], r = function (t) {
                switch (e.length) {
                    case 1:
                        i.push([e[0][t]]);
                        break;
                    case 2:
                        i.push([e[0][t], e[1][t]]);
                        break;
                    case 3:
                        i.push([e[0][t], e[1][t], e[2][t]]);
                        break;
                    case 4:
                        i.push([e[0][t], e[1][t], e[2][t], e[3][t]]);
                        break;
                    default:
                        i.push(e.map(function (e) {
                            return e[t]
                        }))
                }
            }, o = 0; o < n; o++)
                r(o);
            return i
        }
        function Te(e, t) {
            var n, i;
            if (M(t) && (n = t[0],
                i = t[1]),
                !E(n))
                throw new Error("invalid parameters to applyPairs");
            return e[n] = i,
                e
        }
        function ke(e) {
            return e.length && e[e.length - 1] || void 0
        }
        function Pe(e, t) {
            return t && Object.keys(t).forEach(function (e) {
                return delete t[e]
            }),
                t || (t = {}),
                V(t, e)
        }
        function Ee(e) {
            for (var t = 1; t < arguments.length; t++) {
                var n = arguments[t];
                if (n)
                    for (var i = Object.keys(n), r = 0; r < i.length; r++)
                        e[i[r]] = n[i[r]]
            }
            return e
        }
        var Ie, Me = function (e) {
            return e.catch(function (e) {
                return 0
            }) && e
        }, Oe = function (e) {
            return Me(L.$q.reject(e))
        }, De = function () {
            function e(e) {
                this.text = e,
                    this.glob = e.split(".");
                var t = this.text.split(".").map(function (e) {
                    return "**" === e ? "(?:|(?:\\.[^.]*)*)" : "*" === e ? "\\.[^.]*" : "\\." + e
                }).join("");
                this.regexp = new RegExp("^" + t + "$")
            }
            return e.is = function (e) {
                return !!/[!,*]+/.exec(e)
            }
                ,
                e.fromString = function (t) {
                    return e.is(t) ? new e(t) : null
                }
                ,
                e.prototype.matches = function (e) {
                    return this.regexp.test("." + e)
                }
                ,
                e
        }(), Ae = function () {
            function e(e, t) {
                void 0 === e && (e = []),
                    void 0 === t && (t = null),
                    this._items = e,
                    this._limit = t,
                    this._evictListeners = [],
                    this.onEvict = Q(this._evictListeners)
            }
            return e.prototype.enqueue = function (e) {
                var t = this._items;
                return t.push(e),
                    this._limit && t.length > this._limit && this.evict(),
                    e
            }
                ,
                e.prototype.evict = function () {
                    var e = this._items.shift();
                    return this._evictListeners.forEach(function (t) {
                        return t(e)
                    }),
                        e
                }
                ,
                e.prototype.dequeue = function () {
                    if (this.size())
                        return this._items.splice(0, 1)[0]
                }
                ,
                e.prototype.clear = function () {
                    var e = this._items;
                    return this._items = [],
                        e
                }
                ,
                e.prototype.size = function () {
                    return this._items.length
                }
                ,
                e.prototype.remove = function (e) {
                    var t = this._items.indexOf(e);
                    return -1 < t && this._items.splice(t, 1)[0]
                }
                ,
                e.prototype.peekTail = function () {
                    return this._items[this._items.length - 1]
                }
                ,
                e.prototype.peekHead = function () {
                    if (this.size())
                        return this._items[0]
                }
                ,
                e
        }();
        (Ie = e.RejectType || (e.RejectType = {}))[Ie.SUPERSEDED = 2] = "SUPERSEDED",
            Ie[Ie.ABORTED = 3] = "ABORTED",
            Ie[Ie.INVALID = 4] = "INVALID",
            Ie[Ie.IGNORED = 5] = "IGNORED",
            Ie[Ie.ERROR = 6] = "ERROR";
        var _e = 0
            , Re = function () {
                function t(e, t, n) {
                    this.$id = _e++,
                        this.type = e,
                        this.message = t,
                        this.detail = n
                }
                return t.isRejectionPromise = function (e) {
                    return e && "function" == typeof e.then && m(t)(e._transitionRejection)
                }
                    ,
                    t.superseded = function (n, i) {
                        var r = new t(e.RejectType.SUPERSEDED, "The transition has been superseded by a different transition", n);
                        return i && i.redirected && (r.redirected = !0),
                            r
                    }
                    ,
                    t.redirected = function (e) {
                        return t.superseded(e, {
                            redirected: !0
                        })
                    }
                    ,
                    t.invalid = function (n) {
                        return new t(e.RejectType.INVALID, "This transition is invalid", n)
                    }
                    ,
                    t.ignored = function (n) {
                        return new t(e.RejectType.IGNORED, "The transition was ignored", n)
                    }
                    ,
                    t.aborted = function (n) {
                        return new t(e.RejectType.ABORTED, "The transition has been aborted", n)
                    }
                    ,
                    t.errored = function (n) {
                        return new t(e.RejectType.ERROR, "The transition errored", n)
                    }
                    ,
                    t.normalize = function (e) {
                        return m(t)(e) ? e : t.errored(e)
                    }
                    ,
                    t.prototype.toString = function () {
                        var e, t = (e = this.detail) && e.toString !== Object.prototype.toString ? e.toString() : ze(e);
                        return "Transition Rejection($id: " + this.$id + " type: " + this.type + ", message: " + this.message + ", detail: " + t + ")"
                    }
                    ,
                    t.prototype.toPromise = function () {
                        return V(Oe(this), {
                            _transitionRejection: this
                        })
                    }
                    ,
                    t
            }();
        function Le(e, t) {
            return t.length <= e ? t : t.substr(0, e - 3) + "..."
        }
        function Ue(e, t) {
            for (; t.length < e;)
                t += " ";
            return t
        }
        function Ne(e) {
            return e.replace(/^([A-Z])/, function (e) {
                return e.toLowerCase()
            }).replace(/([A-Z])/g, function (e) {
                return "-" + e.toLowerCase()
            })
        }
        function je(e) {
            var t = Fe(e)
                , n = t.match(/^(function [^ ]+\([^)]*\))/)
                , i = n ? n[1] : t
                , r = e.name || "";
            return r && i.match(/function \(/) ? "function " + r + i.substr(9) : i
        }
        function Fe(e) {
            var t = M(e) ? e.slice(-1)[0] : e;
            return t && t.toString() || "undefined"
        }
        var Be = Re.isRejectionPromise
            , Ve = b([[S, v("undefined")], [x, v("null")], [_, v("[Promise]")], [Be, function (e) {
                return e._transitionRejection.toString()
            }
            ], [function (e) {
                return I(e) && !M(e) && e.constructor !== Object && k(e.toString)
            }
                , function (e) {
                    return e.toString()
                }
            ], [A, je], [v(!0), H]]);
        function ze(e) {
            var t = [];
            function n(e) {
                if (I(e)) {
                    if (-1 !== t.indexOf(e))
                        return "[circular ref]";
                    t.push(e)
                }
                return Ve(e)
            }
            return S(e) ? n(e) : JSON.stringify(e, function (e, t) {
                return n(t)
            }).replace(/\\"/g, '"')
        }
        var He = function (e) {
            return function (t) {
                if (!t)
                    return ["", ""];
                var n = t.indexOf(e);
                return -1 === n ? [t, ""] : [t.substr(0, n), t.substr(n + 1)]
            }
        }
            , We = new RegExp("^(?:[a-z]+:)?//[^/]+/")
            , qe = function (e) {
                return e.replace(/\/[^/]*$/, "")
            }
            , Ge = He("#")
            , Ye = He("?")
            , Xe = He("=")
            , Je = function (e) {
                return e ? e.replace(/^#/, "") : ""
            };
        function Ke(e) {
            var t = new RegExp("(" + e + ")", "g");
            return function (e) {
                return e.split(t).filter(H)
            }
        }
        function Qe(e, t) {
            return E(ke(e)) && E(t) ? e.slice(0, -1).concat(ke(e) + t) : ge(e, t)
        }
        function Ze(e) {
            if (!e)
                return "ui-view (defunct)";
            var t = e.creationContext ? e.creationContext.name || "(root)" : "(none)";
            return "[ui-view#" + e.id + " " + e.$type + ":" + e.fqn + " (" + e.name + "@" + t + ")]"
        }
        function et(t) {
            return P(t) ? e.Category[t] : e.Category[e.Category[t]]
        }
        var tt, nt = Function.prototype.bind.call(console.log, console), it = k(console.table) ? console.table.bind(console) : nt.bind(console);
        (tt = e.Category || (e.Category = {}))[tt.RESOLVE = 0] = "RESOLVE",
            tt[tt.TRANSITION = 1] = "TRANSITION",
            tt[tt.HOOK = 2] = "HOOK",
            tt[tt.UIVIEW = 3] = "UIVIEW",
            tt[tt.VIEWCONFIG = 4] = "VIEWCONFIG";
        var rt = c("$id")
            , ot = c("router.$id")
            , at = function (e) {
                return "Transition #" + rt(e) + "-" + ot(e)
            }
            , st = function () {
                function t() {
                    this._enabled = {},
                        this.approximateDigests = 0
                }
                return t.prototype._set = function (t, n) {
                    var i = this;
                    n.length || (n = Object.keys(e.Category).map(function (e) {
                        return parseInt(e, 10)
                    }).filter(function (e) {
                        return !isNaN(e)
                    }).map(function (t) {
                        return e.Category[t]
                    })),
                        n.map(et).forEach(function (e) {
                            return i._enabled[e] = t
                        })
                }
                    ,
                    t.prototype.enable = function () {
                        for (var e = [], t = 0; t < arguments.length; t++)
                            e[t] = arguments[t];
                        this._set(!0, e)
                    }
                    ,
                    t.prototype.disable = function () {
                        for (var e = [], t = 0; t < arguments.length; t++)
                            e[t] = arguments[t];
                        this._set(!1, e)
                    }
                    ,
                    t.prototype.enabled = function (e) {
                        return !!this._enabled[et(e)]
                    }
                    ,
                    t.prototype.traceTransitionStart = function (t) {
                        this.enabled(e.Category.TRANSITION) && console.log(at(t) + ": Started  -> " + ze(t))
                    }
                    ,
                    t.prototype.traceTransitionIgnored = function (t) {
                        this.enabled(e.Category.TRANSITION) && console.log(at(t) + ": Ignored  <> " + ze(t))
                    }
                    ,
                    t.prototype.traceHookInvocation = function (t, n, i) {
                        if (this.enabled(e.Category.HOOK)) {
                            var r = c("traceData.hookType")(i) || "internal"
                                , o = c("traceData.context.state.name")(i) || c("traceData.context")(i) || "unknown"
                                , a = je(t.registeredHook.callback);
                            console.log(at(n) + ":   Hook -> " + r + " context: " + o + ", " + Le(200, a))
                        }
                    }
                    ,
                    t.prototype.traceHookResult = function (t, n, i) {
                        this.enabled(e.Category.HOOK) && console.log(at(n) + ":   <- Hook returned: " + Le(200, ze(t)))
                    }
                    ,
                    t.prototype.traceResolvePath = function (t, n, i) {
                        this.enabled(e.Category.RESOLVE) && console.log(at(i) + ":         Resolving " + t + " (" + n + ")")
                    }
                    ,
                    t.prototype.traceResolvableResolved = function (t, n) {
                        this.enabled(e.Category.RESOLVE) && console.log(at(n) + ":               <- Resolved  " + t + " to: " + Le(200, ze(t.data)))
                    }
                    ,
                    t.prototype.traceError = function (t, n) {
                        this.enabled(e.Category.TRANSITION) && console.log(at(n) + ": <- Rejected " + ze(n) + ", reason: " + t)
                    }
                    ,
                    t.prototype.traceSuccess = function (t, n) {
                        this.enabled(e.Category.TRANSITION) && console.log(at(n) + ": <- Success  " + ze(n) + ", final state: " + t.name)
                    }
                    ,
                    t.prototype.traceUIViewEvent = function (t, n, i) {
                        void 0 === i && (i = ""),
                            this.enabled(e.Category.UIVIEW) && console.log("ui-view: " + Ue(30, t) + " " + Ze(n) + i)
                    }
                    ,
                    t.prototype.traceUIViewConfigUpdated = function (t, n) {
                        this.enabled(e.Category.UIVIEW) && this.traceUIViewEvent("Updating", t, " with ViewConfig from context='" + n + "'")
                    }
                    ,
                    t.prototype.traceUIViewFill = function (t, n) {
                        this.enabled(e.Category.UIVIEW) && this.traceUIViewEvent("Fill", t, " with: " + Le(200, n))
                    }
                    ,
                    t.prototype.traceViewSync = function (t) {
                        if (this.enabled(e.Category.VIEWCONFIG)) {
                            var n = "uiview component fqn"
                                , i = t.map(function (e) {
                                    var t, i = e.uiView, r = e.viewConfig, o = i && i.fqn, a = r && r.viewDecl.$context.name + ": (" + r.viewDecl.$name + ")";
                                    return (t = {})[n] = o,
                                        t["view config state (view name)"] = a,
                                        t
                                }).sort(function (e, t) {
                                    return (e[n] || "").localeCompare(t[n] || "")
                                });
                            it(i)
                        }
                    }
                    ,
                    t.prototype.traceViewServiceEvent = function (t, n) {
                        var i, r, o;
                        this.enabled(e.Category.VIEWCONFIG) && console.log("VIEWCONFIG: " + t + " " + (o = (r = (i = n).viewDecl).$context.name || "(root)",
                            "[View#" + i.$id + " from '" + o + "' state]: target ui-view: '" + r.$uiViewName + "@" + r.$uiViewContextAnchor + "'"))
                    }
                    ,
                    t.prototype.traceViewServiceUIViewEvent = function (t, n) {
                        this.enabled(e.Category.VIEWCONFIG) && console.log("VIEWCONFIG: " + t + " " + Ze(n))
                    }
                    ,
                    t
            }()
            , lt = new st
            , ct = function () {
                function e(e) {
                    this.pattern = /.*/,
                        this.inherit = !0,
                        V(this, e)
                }
                return e.prototype.is = function (e, t) {
                    return !0
                }
                    ,
                    e.prototype.encode = function (e, t) {
                        return e
                    }
                    ,
                    e.prototype.decode = function (e, t) {
                        return e
                    }
                    ,
                    e.prototype.equals = function (e, t) {
                        return e == t
                    }
                    ,
                    e.prototype.$subPattern = function () {
                        var e = this.pattern.toString();
                        return e.substr(1, e.length - 2)
                    }
                    ,
                    e.prototype.toString = function () {
                        return "{ParamType:" + this.name + "}"
                    }
                    ,
                    e.prototype.$normalize = function (e) {
                        return this.is(e) ? e : this.decode(e)
                    }
                    ,
                    e.prototype.$asArray = function (e, t) {
                        if (!e)
                            return this;
                        if ("auto" === e && !t)
                            throw new Error("'auto' array mode is for query parameters only");
                        return new function (e, t) {
                            var n = this;
                            function i(e) {
                                return M(e) ? e : C(e) ? [e] : []
                            }
                            function r(e, n) {
                                return function (r) {
                                    if (M(r) && 0 === r.length)
                                        return r;
                                    var o = ue(i(r), e);
                                    return !0 === n ? 0 === se(o, function (e) {
                                        return !e
                                    }).length : function (e) {
                                        switch (e.length) {
                                            case 0:
                                                return;
                                            case 1:
                                                return "auto" === t ? e[0] : e;
                                            default:
                                                return e
                                        }
                                    }(o)
                                }
                            }
                            function o(e) {
                                return function (t, n) {
                                    var r = i(t)
                                        , o = i(n);
                                    if (r.length !== o.length)
                                        return !1;
                                    for (var a = 0; a < r.length; a++)
                                        if (!e(r[a], o[a]))
                                            return !1;
                                    return !0
                                }
                            }
                            ["encode", "decode", "equals", "$normalize"].forEach(function (t) {
                                var i = e[t].bind(e)
                                    , a = "equals" === t ? o : r;
                                n[t] = a(i)
                            }),
                                V(this, {
                                    dynamic: e.dynamic,
                                    name: e.name,
                                    pattern: e.pattern,
                                    inherit: e.inherit,
                                    raw: e.raw,
                                    is: r(e.is.bind(e), !0),
                                    $arrayMode: t
                                })
                        }
                            (this, e)
                    }
                    ,
                    e
            }();
        var ut, dt = Object.prototype.hasOwnProperty, pt = function (e) {
            return 0 === ["value", "type", "squash", "array", "dynamic"].filter(dt.bind(e || {})).length
        };
        (ut = e.DefType || (e.DefType = {}))[ut.PATH = 0] = "PATH",
            ut[ut.SEARCH = 1] = "SEARCH",
            ut[ut.CONFIG = 2] = "CONFIG";
        var ht, ft = function () {
            function t(t, n, i, r, o) {
                var a = function (t, n, i) {
                    var r = !1 === i.reloadOnSearch && n === e.DefType.SEARCH || void 0
                        , o = le([i.dynamic, r], C)
                        , a = C(o) ? {
                            dynamic: o
                        } : {}
                        , s = function (e) {
                            function t() {
                                return e.value
                            }
                            e = pt(e) ? {
                                value: e
                            } : e,
                                t.__cacheable = !0;
                            var n = A(e.value) ? e.value : t;
                            return V(e, {
                                $$fn: n
                            })
                        }(i && i.params && i.params[t]);
                    return V(a, s)
                }(t, i, o);
                n = function (t, n, i, r, o) {
                    if (t.type && n && "string" !== n.name)
                        throw new Error("Param '" + r + "' has two type configurations.");
                    if (t.type && n && "string" === n.name && o.type(t.type))
                        return o.type(t.type);
                    if (n)
                        return n;
                    if (t.type)
                        return t.type instanceof ct ? t.type : o.type(t.type);
                    var a = i === e.DefType.CONFIG ? "any" : i === e.DefType.PATH ? "path" : i === e.DefType.SEARCH ? "query" : "string";
                    return o.type(a)
                }(a, n, i, t, r.paramTypes);
                var l, c, u = (l = {
                    array: i === e.DefType.SEARCH && "auto"
                },
                    c = t.match(/\[\]$/) ? {
                        array: !0
                    } : {},
                    V(l, c, a).array);
                n = u ? n.$asArray(u, i === e.DefType.SEARCH) : n;
                var d = void 0 !== a.value || i === e.DefType.SEARCH
                    , p = C(a.dynamic) ? !!a.dynamic : !!n.dynamic
                    , h = C(a.raw) ? !!a.raw : !!n.raw
                    , f = function (e, t, n) {
                        var i = e.squash;
                        if (!t || !1 === i)
                            return !1;
                        if (!C(i) || null == i)
                            return n;
                        if (!0 === i || E(i))
                            return i;
                        throw new Error("Invalid squash policy: '" + i + "'. Valid policies: false, true, or arbitrary string")
                    }(a, d, r.defaultSquashPolicy())
                    , m = function (e, t, n, i) {
                        var r = [{
                            from: "",
                            to: d || u ? void 0 : ""
                        }, {
                            from: null,
                            to: d || u ? void 0 : ""
                        }]
                            , o = M(e.replace) ? e.replace : [];
                        E(i) && o.push({
                            from: i,
                            to: void 0
                        });
                        var a = ue(o, s("from"));
                        return se(r, function (e) {
                            return -1 === a.indexOf(e.from)
                        }).concat(o)
                    }(a, 0, 0, f)
                    , g = C(a.inherit) ? !!a.inherit : !!n.inherit;
                V(this, {
                    id: t,
                    type: n,
                    location: i,
                    isOptional: d,
                    dynamic: p,
                    raw: h,
                    squash: f,
                    replace: m,
                    inherit: g,
                    array: u,
                    config: a
                })
            }
            return t.values = function (e, t) {
                void 0 === t && (t = {});
                for (var n = {}, i = 0, r = e; i < r.length; i++) {
                    var o = r[i];
                    n[o.id] = o.value(t[o.id])
                }
                return n
            }
                ,
                t.changed = function (e, t, n) {
                    return void 0 === t && (t = {}),
                        void 0 === n && (n = {}),
                        e.filter(function (e) {
                            return !e.type.equals(t[e.id], n[e.id])
                        })
                }
                ,
                t.equals = function (e, n, i) {
                    return void 0 === n && (n = {}),
                        void 0 === i && (i = {}),
                        0 === t.changed(e, n, i).length
                }
                ,
                t.validates = function (e, t) {
                    return void 0 === t && (t = {}),
                        e.map(function (e) {
                            return e.validates(t[e.id])
                        }).reduce(pe, !0)
                }
                ,
                t.prototype.isDefaultValue = function (e) {
                    return this.isOptional && this.type.equals(this.value(), e)
                }
                ,
                t.prototype.value = function (e) {
                    var t = this;
                    return e = function (e) {
                        for (var n = 0, i = t.replace; n < i.length; n++) {
                            var r = i[n];
                            if (r.from === e)
                                return r.to
                        }
                        return e
                    }(e),
                        S(e) ? function () {
                            if (t._defaultValueCache)
                                return t._defaultValueCache.defaultValue;
                            if (!L.$injector)
                                throw new Error("Injectable functions cannot be called at configuration time");
                            var e = L.$injector.invoke(t.config.$$fn);
                            if (null != e && !t.type.is(e))
                                throw new Error("Default value (" + e + ") for parameter '" + t.id + "' is not an instance of ParamType (" + t.type.name + ")");
                            return t.config.$$fn.__cacheable && (t._defaultValueCache = {
                                defaultValue: e
                            }),
                                e
                        }() : this.type.$normalize(e)
                }
                ,
                t.prototype.isSearch = function () {
                    return this.location === e.DefType.SEARCH
                }
                ,
                t.prototype.validates = function (e) {
                    if ((S(e) || null === e) && this.isOptional)
                        return !0;
                    var t = this.type.$normalize(e);
                    if (!this.type.is(t))
                        return !1;
                    var n = this.type.encode(t);
                    return !(E(n) && !this.type.pattern.exec(n))
                }
                ,
                t.prototype.toString = function () {
                    return "{Param:" + this.id + " " + this.type + " squash: '" + this.squash + "' optional: " + this.isOptional + "}"
                }
                ,
                t
        }(), mt = function () {
            function e() {
                this.enqueue = !0,
                    this.typeQueue = [],
                    this.defaultTypes = re(e.prototype, ["hash", "string", "query", "path", "int", "bool", "date", "json", "any"]),
                    this.types = G(ue(this.defaultTypes, function (e, t) {
                        return new ct(V({
                            name: t
                        }, e))
                    }), {})
            }
            return e.prototype.dispose = function () {
                this.types = {}
            }
                ,
                e.prototype.type = function (e, t, n) {
                    if (!C(t))
                        return this.types[e];
                    if (this.types.hasOwnProperty(e))
                        throw new Error("A type named '" + e + "' has already been defined.");
                    return this.types[e] = new ct(V({
                        name: e
                    }, t)),
                        n && (this.typeQueue.push({
                            name: e,
                            def: n
                        }),
                            this.enqueue || this._flushTypeQueue()),
                        this
                }
                ,
                e.prototype._flushTypeQueue = function () {
                    for (; this.typeQueue.length;) {
                        var e = this.typeQueue.shift();
                        if (e.pattern)
                            throw new Error("You cannot override a type's .pattern at runtime.");
                        V(this.types[e.name], L.$injector.invoke(e.def))
                    }
                }
                ,
                e
        }();
        ht = function (e) {
            var t = function (e) {
                return null != e ? e.toString() : e
            }
                , n = {
                    encode: t,
                    decode: t,
                    is: m(String),
                    pattern: /.*/,
                    equals: function (e, t) {
                        return e == t
                    }
                };
            return V({}, n, e)
        }
            ,
            V(mt.prototype, {
                string: ht({}),
                path: ht({
                    pattern: /[^/]*/
                }),
                query: ht({}),
                hash: ht({
                    inherit: !1
                }),
                int: ht({
                    decode: function (e) {
                        return parseInt(e, 10)
                    },
                    is: function (e) {
                        return !T(e) && this.decode(e.toString()) === e
                    },
                    pattern: /-?\d+/
                }),
                bool: ht({
                    encode: function (e) {
                        return e ? 1 : 0
                    },
                    decode: function (e) {
                        return 0 !== parseInt(e, 10)
                    },
                    is: m(Boolean),
                    pattern: /0|1/
                }),
                date: ht({
                    encode: function (e) {
                        return this.is(e) ? [e.getFullYear(), ("0" + (e.getMonth() + 1)).slice(-2), ("0" + e.getDate()).slice(-2)].join("-") : void 0
                    },
                    decode: function (e) {
                        if (this.is(e))
                            return e;
                        var t = this.capture.exec(e);
                        return t ? new Date(t[1], t[2] - 1, t[3]) : void 0
                    },
                    is: function (e) {
                        return e instanceof Date && !isNaN(e.valueOf())
                    },
                    equals: function (e, t) {
                        return ["getFullYear", "getMonth", "getDate"].reduce(function (n, i) {
                            return n && e[i]() === t[i]()
                        }, !0)
                    },
                    pattern: /[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,
                    capture: /([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/
                }),
                json: ht({
                    encode: F,
                    decode: j,
                    is: m(Object),
                    equals: z,
                    pattern: /[^/]*/
                }),
                any: ht({
                    encode: H,
                    decode: H,
                    is: function () {
                        return !0
                    },
                    equals: z
                })
            });
        var gt = function () {
            function e(e) {
                void 0 === e && (e = {}),
                    V(this, e)
            }
            return e.prototype.$inherit = function (e, t, n) {
                var i, r = ie(t, n), o = {}, a = [];
                for (var s in r)
                    if (r[s] && r[s].params && (i = Object.keys(r[s].params)).length)
                        for (var l in i)
                            0 <= a.indexOf(i[l]) || (a.push(i[l]),
                                o[i[l]] = this[i[l]]);
                return V({}, o, e)
            }
                ,
                e
        }()
            , vt = function () {
                function e(t) {
                    if (t instanceof e) {
                        var n = t;
                        this.state = n.state,
                            this.paramSchema = n.paramSchema.slice(),
                            this.paramValues = V({}, n.paramValues),
                            this.resolvables = n.resolvables.slice(),
                            this.views = n.views && n.views.slice()
                    } else {
                        var i = t;
                        this.state = i,
                            this.paramSchema = i.parameters({
                                inherit: !1
                            }),
                            this.paramValues = {},
                            this.resolvables = i.resolvables.map(function (e) {
                                return e.clone()
                            })
                    }
                }
                return e.prototype.clone = function () {
                    return new e(this)
                }
                    ,
                    e.prototype.applyRawParams = function (e) {
                        return this.paramValues = this.paramSchema.reduce(function (t, n) {
                            return Te(t, [(i = n).id, i.value(e[i.id])]);
                            var i
                        }, {}),
                            this
                    }
                    ,
                    e.prototype.parameter = function (e) {
                        return le(this.paramSchema, l("id", e))
                    }
                    ,
                    e.prototype.equals = function (e, t) {
                        var n = this.diff(e, t);
                        return n && 0 === n.length
                    }
                    ,
                    e.prototype.diff = function (e, t) {
                        if (this.state !== e.state)
                            return !1;
                        var n = t ? t(this) : this.paramSchema;
                        return ft.changed(n, this.paramValues, e.paramValues)
                    }
                    ,
                    e.clone = function (e) {
                        return e.clone()
                    }
                    ,
                    e
            }()
            , yt = function () {
                function e(e, t, n, i) {
                    this._stateRegistry = e,
                        this._identifier = t,
                        this._identifier = t,
                        this._params = V({}, n || {}),
                        this._options = V({}, i || {}),
                        this._definition = e.matcher.find(t, this._options.relative)
                }
                return e.prototype.name = function () {
                    return this._definition && this._definition.name || this._identifier
                }
                    ,
                    e.prototype.identifier = function () {
                        return this._identifier
                    }
                    ,
                    e.prototype.params = function () {
                        return this._params
                    }
                    ,
                    e.prototype.$state = function () {
                        return this._definition
                    }
                    ,
                    e.prototype.state = function () {
                        return this._definition && this._definition.self
                    }
                    ,
                    e.prototype.options = function () {
                        return this._options
                    }
                    ,
                    e.prototype.exists = function () {
                        return !(!this._definition || !this._definition.self)
                    }
                    ,
                    e.prototype.valid = function () {
                        return !this.error()
                    }
                    ,
                    e.prototype.error = function () {
                        var e = this.options().relative;
                        if (this._definition || !e)
                            return this._definition ? this._definition.self ? void 0 : "State '" + this.name() + "' has an invalid definition" : "No such state '" + this.name() + "'";
                        var t = e.name ? e.name : e;
                        return "Could not resolve '" + this.name() + "' from state '" + t + "'"
                    }
                    ,
                    e.prototype.toString = function () {
                        return "'" + this.name() + "'" + ze(this.params())
                    }
                    ,
                    e.prototype.withState = function (t) {
                        return new e(this._stateRegistry, t, this._params, this._options)
                    }
                    ,
                    e.prototype.withParams = function (t, n) {
                        void 0 === n && (n = !1);
                        var i = n ? t : V({}, this._params, t);
                        return new e(this._stateRegistry, this._identifier, i, this._options)
                    }
                    ,
                    e.prototype.withOptions = function (t, n) {
                        void 0 === n && (n = !1);
                        var i = n ? t : V({}, this._options, t);
                        return new e(this._stateRegistry, this._identifier, this._params, i)
                    }
                    ,
                    e.isDef = function (e) {
                        return e && e.state && (E(e.state) || E(e.state.name))
                    }
                    ,
                    e
            }()
            , bt = function () {
                function e() { }
                return e.makeTargetState = function (e, t) {
                    var n = ke(t).state;
                    return new yt(e, n, t.map(s("paramValues")).reduce(ne, {}), {})
                }
                    ,
                    e.buildPath = function (e) {
                        var t = e.params();
                        return e.$state().path.map(function (e) {
                            return new vt(e).applyRawParams(t)
                        })
                    }
                    ,
                    e.buildToPath = function (t, n) {
                        var i = e.buildPath(n);
                        return n.options().inherit ? e.inheritParams(t, i, Object.keys(n.params())) : i
                    }
                    ,
                    e.applyViewConfigs = function (t, n, i) {
                        n.filter(function (e) {
                            return Y(i, e.state)
                        }).forEach(function (i) {
                            var r = de(i.state.views || {})
                                , o = e.subPath(n, function (e) {
                                    return e === i
                                })
                                , a = r.map(function (e) {
                                    return t.createViewConfig(o, e)
                                });
                            i.views = a.reduce(fe, [])
                        })
                    }
                    ,
                    e.inheritParams = function (e, t, n) {
                        void 0 === n && (n = []);
                        var i = e.map(function (e) {
                            return e.paramSchema
                        }).reduce(fe, []).filter(function (e) {
                            return !e.inherit
                        }).map(s("id"));
                        return t.map(function (t) {
                            var r = V({}, t && t.paramValues)
                                , o = re(r, n);
                            r = oe(r, n);
                            var a, s, c, u = oe((a = e,
                                s = t.state,
                                c = le(a, l("state", s)),
                                V({}, c && c.paramValues) || {}), i), d = V(r, u, o);
                            return new vt(t.state).applyRawParams(d)
                        })
                    }
                    ,
                    e.treeChanges = function (t, n, i) {
                        for (var r, o, a, s, l, c, u = Math.min(t.length, n.length), d = 0; d < u && t[d].state !== i && (r = t[d],
                            o = n[d],
                            r.equals(o, e.nonDynamicParams));)
                            d++;
                        s = (a = t).slice(0, d),
                            l = a.slice(d);
                        var p = s.map(function (e, t) {
                            var i = e.clone();
                            return i.paramValues = n[t].paramValues,
                                i
                        });
                        return c = n.slice(d),
                        {
                            from: a,
                            to: p.concat(c),
                            retained: s,
                            retainedWithToParams: p,
                            exiting: l,
                            entering: c
                        }
                    }
                    ,
                    e.matching = function (e, t, n) {
                        var i = !1;
                        return xe(e, t).reduce(function (e, t) {
                            var r = t[0]
                                , o = t[1];
                            return (i = i || !r.equals(o, n)) ? e : e.concat(r)
                        }, [])
                    }
                    ,
                    e.equals = function (t, n, i) {
                        return t.length === n.length && e.matching(t, n, i).length === t.length
                    }
                    ,
                    e.subPath = function (e, t) {
                        var n = le(e, t)
                            , i = e.indexOf(n);
                        return -1 === i ? void 0 : e.slice(0, i + 1)
                    }
                    ,
                    e.nonDynamicParams = function (e) {
                        return e.state.parameters({
                            inherit: !1
                        }).filter(function (e) {
                            return !e.dynamic
                        })
                    }
                    ,
                    e.paramValues = function (e) {
                        return e.reduce(function (e, t) {
                            return V(e, t.paramValues)
                        }, {})
                    }
                    ,
                    e
            }()
            , wt = {
                when: {
                    LAZY: "LAZY",
                    EAGER: "EAGER"
                },
                async: {
                    WAIT: "WAIT",
                    NOWAIT: "NOWAIT",
                    RXWAIT: "RXWAIT"
                }
            }
            , $t = {
                when: "LAZY",
                async: "WAIT"
            }
            , St = function () {
                function e(t, n, i, r, o) {
                    if (this.resolved = !1,
                        this.promise = void 0,
                        t instanceof e)
                        V(this, t);
                    else if (k(n)) {
                        if (T(t))
                            throw new Error("new Resolvable(): token argument is required");
                        if (!k(n))
                            throw new Error("new Resolvable(): resolveFn argument must be a function");
                        this.token = t,
                            this.policy = r,
                            this.resolveFn = n,
                            this.deps = i || [],
                            this.data = o,
                            this.resolved = void 0 !== o,
                            this.promise = this.resolved ? L.$q.when(this.data) : void 0
                    } else if (I(t) && t.token && (t.hasOwnProperty("resolveFn") || t.hasOwnProperty("data"))) {
                        var a = t;
                        return new e(a.token, a.resolveFn, a.deps, a.policy, a.data)
                    }
                }
                return e.prototype.getPolicy = function (e) {
                    var t = this.policy || {}
                        , n = e && e.resolvePolicy || {};
                    return {
                        when: t.when || n.when || $t.when,
                        async: t.async || n.async || $t.async
                    }
                }
                    ,
                    e.prototype.resolve = function (e, t) {
                        var n = this
                            , i = L.$q
                            , r = e.findNode(this)
                            , o = r && r.state
                            , a = "RXWAIT" === this.getPolicy(o).async ? function (e) {
                                var t = e.cache(1);
                                return t.take(1).toPromise().then(function () {
                                    return t
                                })
                            }
                                : H;
                        return this.promise = i.when().then(function () {
                            return i.all(e.getDependencies(n).map(function (n) {
                                return n.get(e, t)
                            }))
                        }).then(function (e) {
                            return n.resolveFn.apply(null, e)
                        }).then(a).then(function (e) {
                            return n.data = e,
                                n.resolved = !0,
                                n.resolveFn = null,
                                lt.traceResolvableResolved(n, t),
                                n.data
                        })
                    }
                    ,
                    e.prototype.get = function (e, t) {
                        return this.promise || this.resolve(e, t)
                    }
                    ,
                    e.prototype.toString = function () {
                        return "Resolvable(token: " + ze(this.token) + ", requires: [" + this.deps.map(ze) + "])"
                    }
                    ,
                    e.prototype.clone = function () {
                        return new e(this)
                    }
                    ,
                    e.fromData = function (t, n) {
                        return new e(t, function () {
                            return n
                        }
                            , null, null, n)
                    }
                    ,
                    e
            }()
            , Ct = wt.when
            , xt = [Ct.EAGER, Ct.LAZY]
            , Tt = [Ct.EAGER]
            , kt = "Native Injector"
            , Pt = function () {
                function e(e) {
                    this._path = e
                }
                return e.prototype.getTokens = function () {
                    return this._path.reduce(function (e, t) {
                        return e.concat(t.resolvables.map(function (e) {
                            return e.token
                        }))
                    }, []).reduce(ve, [])
                }
                    ,
                    e.prototype.getResolvable = function (e) {
                        return ke(this._path.map(function (e) {
                            return e.resolvables
                        }).reduce(fe, []).filter(function (t) {
                            return t.token === e
                        }))
                    }
                    ,
                    e.prototype.getPolicy = function (e) {
                        var t = this.findNode(e);
                        return e.getPolicy(t.state)
                    }
                    ,
                    e.prototype.subContext = function (t) {
                        return new e(bt.subPath(this._path, function (e) {
                            return e.state === t
                        }))
                    }
                    ,
                    e.prototype.addResolvables = function (e, t) {
                        var n = le(this._path, l("state", t))
                            , i = e.map(function (e) {
                                return e.token
                            });
                        n.resolvables = n.resolvables.filter(function (e) {
                            return -1 === i.indexOf(e.token)
                        }).concat(e)
                    }
                    ,
                    e.prototype.resolvePath = function (e, t) {
                        var n = this;
                        void 0 === e && (e = "LAZY");
                        var i = (Y(xt, e) ? e : "LAZY") === wt.when.EAGER ? Tt : xt;
                        lt.traceResolvePath(this._path, e, t);
                        var r = function (e, t) {
                            return function (i) {
                                return Y(e, n.getPolicy(i)[t])
                            }
                        }
                            , o = this._path.reduce(function (e, o) {
                                var a = o.resolvables.filter(r(i, "when"))
                                    , s = a.filter(r(["NOWAIT"], "async"))
                                    , l = a.filter(u(r(["NOWAIT"], "async")))
                                    , c = n.subContext(o.state)
                                    , d = function (e) {
                                        return e.get(c, t).then(function (t) {
                                            return {
                                                token: e.token,
                                                value: t
                                            }
                                        })
                                    };
                                return s.forEach(d),
                                    e.concat(l.map(d))
                            }, []);
                        return L.$q.all(o)
                    }
                    ,
                    e.prototype.injector = function () {
                        return this._injector || (this._injector = new Et(this))
                    }
                    ,
                    e.prototype.findNode = function (e) {
                        return le(this._path, function (t) {
                            return Y(t.resolvables, e)
                        })
                    }
                    ,
                    e.prototype.getDependencies = function (e) {
                        var t = this
                            , n = this.findNode(e)
                            , i = (bt.subPath(this._path, function (e) {
                                return e === n
                            }) || this._path).reduce(function (e, t) {
                                return e.concat(t.resolvables)
                            }, []).filter(function (t) {
                                return t !== e
                            });
                        return e.deps.map(function (e) {
                            var n = i.filter(function (t) {
                                return t.token === e
                            });
                            if (n.length)
                                return ke(n);
                            var r = t.injector().getNative(e);
                            if (S(r))
                                throw new Error("Could not find Dependency Injection token: " + ze(e));
                            return new St(e, function () {
                                return r
                            }
                                , [], r)
                        })
                    }
                    ,
                    e
            }()
            , Et = function () {
                function e(e) {
                    this.context = e,
                        this.native = this.get(kt) || L.$injector
                }
                return e.prototype.get = function (e) {
                    var t = this.context.getResolvable(e);
                    if (t) {
                        if ("NOWAIT" === this.context.getPolicy(t).async)
                            return t.get(this.context);
                        if (!t.resolved)
                            throw new Error("Resolvable async .get() not complete:" + ze(t.token));
                        return t.data
                    }
                    return this.getNative(e)
                }
                    ,
                    e.prototype.getAsync = function (e) {
                        var t = this.context.getResolvable(e);
                        return t ? t.get(this.context) : L.$q.when(this.native.get(e))
                    }
                    ,
                    e.prototype.getNative = function (e) {
                        return this.native && this.native.get(e)
                    }
                    ,
                    e
            }();
        function It(e) {
            return e.name
        }
        function Mt(e) {
            return e.self.$$state = function () {
                return e
            }
                ,
                e.self
        }
        function Ot(e) {
            return e.parent && e.parent.data && (e.data = e.self.data = G(e.parent.data, e.data)),
                e.data
        }
        var Dt = function (e, t) {
            return function (n) {
                var i = n.self;
                if (i && i.url && i.name && i.name.match(/\.\*\*$/)) {
                    var r = {};
                    Pe(i, r),
                        r.url += "{remainder:any}",
                        i = r
                }
                var o = n.parent
                    , a = function (e) {
                        if (!E(e))
                            return !1;
                        var t = "^" === e.charAt(0);
                        return {
                            val: t ? e.substring(1) : e,
                            root: t
                        }
                    }(i.url)
                    , s = a ? e.compile(a.val, {
                        state: i
                    }) : i.url;
                if (!s)
                    return null;
                if (!e.isMatcher(s))
                    throw new Error("Invalid url '" + s + "' in state '" + n + "'");
                return a && a.root ? s : (o && o.navigable || t()).url.append(s)
            }
        };
        function At(e) {
            return e.parent ? e.parent.path.concat(e) : [e]
        }
        function _t(e) {
            var t = e.parent ? V({}, e.parent.includes) : {};
            return t[e.name] = !0,
                t
        }
        function Rt(e) {
            var t, n, i = function (e) {
                return e.provide || e.token
            }, r = b([[s("resolveFn"), function (e) {
                return new St(i(e), e.resolveFn, e.deps, e.policy)
            }
            ], [s("useFactory"), function (e) {
                return new St(i(e), e.useFactory, e.deps || e.dependencies, e.policy)
            }
            ], [s("useClass"), function (e) {
                return new St(i(e), function () {
                    return new e.useClass
                }
                    , [], e.policy)
            }
            ], [s("useValue"), function (e) {
                return new St(i(e), function () {
                    return e.useValue
                }
                    , [], e.policy, e.useValue)
            }
            ], [s("useExisting"), function (e) {
                return new St(i(e), H, [e.useExisting], e.policy)
            }
            ]]), o = b([[a(s("val"), E), function (e) {
                return new St(e.token, H, [e.val], e.policy)
            }
            ], [a(s("val"), M), function (e) {
                return new St(e.token, ke(e.val), e.val.slice(0, -1), e.policy)
            }
            ], [a(s("val"), k), function (e) {
                return new St(e.token, e.val, (t = e.val,
                    n = L.$injector,
                    t.$inject || n && n.annotate(t, n.strictDi) || "deferred"), e.policy);
                var t, n
            }
            ]]), l = b([[m(St), function (e) {
                return e
            }
            ], [function (e) {
                return !(!e.token || !e.resolveFn)
            }
                , r], [function (e) {
                    return !(!e.provide && !e.token || !(e.useValue || e.useFactory || e.useExisting || e.useClass))
                }
                , r], [function (e) {
                    return !!(e && e.val && (E(e.val) || M(e.val) || k(e.val)))
                }
                , o], [v(!0), function (e) {
                    throw new Error("Invalid resolve value: " + ze(e))
                }
            ]]), c = e.resolve;
            return (M(c) ? c : (t = c,
                n = e.resolvePolicy || {},
                Object.keys(t || {}).map(function (e) {
                    return {
                        token: e,
                        val: t[e],
                        deps: void 0,
                        policy: n[e]
                    }
                }))).map(l)
        }
        var Lt, Ut, Nt = function () {
            function e(e, t) {
                this.matcher = e;
                var n, i, r = this, o = function () {
                    return e.find("")
                }, a = function (e) {
                    return "" === e.name
                };
                this.builders = {
                    name: [It],
                    self: [Mt],
                    parent: [function (t) {
                        return a(t) ? null : e.find(r.parentName(t)) || o()
                    }
                    ],
                    data: [Ot],
                    url: [Dt(t, o)],
                    navigable: [(i = a,
                        function (e) {
                            return !i(e) && e.url ? e : e.parent ? e.parent.navigable : null
                        }
                    )],
                    params: [(n = t.paramFactory,
                        function (e) {
                            var t = e.url && e.url.parameters({
                                inherit: !1
                            }) || []
                                , i = de(ce(oe(e.params || {}, t.map(s("id"))), function (t, i) {
                                    return n.fromConfig(i, null, e.self)
                                }));
                            return t.concat(i).map(function (e) {
                                return [e.id, e]
                            }).reduce(Te, {})
                        }
                    )],
                    views: [],
                    path: [At],
                    includes: [_t],
                    resolvables: [Rt]
                }
            }
            return e.prototype.builder = function (e, t) {
                var n = this.builders
                    , i = n[e] || [];
                return E(e) && !C(t) ? 1 < i.length ? i : i[0] : E(e) && k(t) ? (n[e] = i,
                    n[e].push(t),
                    function () {
                        return n[e].splice(n[e].indexOf(t, 1)) && null
                    }
                ) : void 0
            }
                ,
                e.prototype.build = function (e) {
                    var t = this.matcher
                        , n = this.builders
                        , i = this.parentName(e);
                    if (i && !t.find(i, void 0, !1))
                        return null;
                    for (var r in n)
                        if (n.hasOwnProperty(r)) {
                            var o = n[r].reduce(function (e, t) {
                                return function (n) {
                                    return t(n, e)
                                }
                            }, W);
                            e[r] = o(e)
                        }
                    return e
                }
                ,
                e.prototype.parentName = function (e) {
                    var t = e.name || ""
                        , n = t.split(".");
                    if ("**" === n.pop() && n.pop(),
                        n.length) {
                        if (e.parent)
                            throw new Error("States that specify the 'parent:' property should not have a '.' in their name (" + t + ")");
                        return n.join(".")
                    }
                    return e.parent ? E(e.parent) ? e.parent : e.parent.name : ""
                }
                ,
                e.prototype.name = function (e) {
                    var t = e.name;
                    if (-1 !== t.indexOf(".") || !e.parent)
                        return t;
                    var n = E(e.parent) ? e.parent : e.parent.name;
                    return n ? n + "." + t : t
                }
                ,
                e
        }(), jt = function () {
            function e(t) {
                return e.create(t || {})
            }
            return e.create = function (t) {
                t = e.isStateClass(t) ? new t : t;
                var n = G(G(t, e.prototype));
                return t.$$state = function () {
                    return n
                }
                    ,
                    n.self = t,
                    n.__stateObjectCache = {
                        nameGlob: De.fromString(n.name)
                    },
                    n
            }
                ,
                e.prototype.is = function (e) {
                    return this === e || this.self === e || this.fqn() === e
                }
                ,
                e.prototype.fqn = function () {
                    if (!(this.parent && this.parent instanceof this.constructor))
                        return this.name;
                    var e = this.parent.fqn();
                    return e ? e + "." + this.name : this.name
                }
                ,
                e.prototype.root = function () {
                    return this.parent && this.parent.root() || this
                }
                ,
                e.prototype.parameters = function (e) {
                    return ((e = te(e, {
                        inherit: !0,
                        matchingKeys: null
                    })).inherit && this.parent && this.parent.parameters() || []).concat(de(this.params)).filter(function (t) {
                        return !e.matchingKeys || e.matchingKeys.hasOwnProperty(t.id)
                    })
                }
                ,
                e.prototype.parameter = function (e, t) {
                    return void 0 === t && (t = {}),
                        this.url && this.url.parameter(e, t) || le(de(this.params), l("id", e)) || t.inherit && this.parent && this.parent.parameter(e)
                }
                ,
                e.prototype.toString = function () {
                    return this.fqn()
                }
                ,
                e.isStateClass = function (e) {
                    return k(e) && !0 === e.__uiRouterState
                }
                ,
                e.isState = function (e) {
                    return I(e.__stateObjectCache)
                }
                ,
                e
        }(), Ft = function () {
            function e(e) {
                this._states = e
            }
            return e.prototype.isRelative = function (e) {
                return 0 === (e = e || "").indexOf(".") || 0 === e.indexOf("^")
            }
                ,
                e.prototype.find = function (e, t, n) {
                    if (void 0 === n && (n = !0),
                        e || "" === e) {
                        var i = E(e)
                            , r = i ? e : e.name;
                        this.isRelative(r) && (r = this.resolvePath(r, t));
                        var o = this._states[r];
                        if (o && (i || !(i || o !== e && o.self !== e)))
                            return o;
                        if (i && n) {
                            var a = de(this._states).filter(function (e) {
                                return e.__stateObjectCache.nameGlob && e.__stateObjectCache.nameGlob.matches(r)
                            });
                            return 1 < a.length && console.log("stateMatcher.find: Found multiple matches for " + r + " using glob: ", a.map(function (e) {
                                return e.name
                            })),
                                a[0]
                        }
                    }
                }
                ,
                e.prototype.resolvePath = function (e, t) {
                    if (!t)
                        throw new Error("No reference point given for path '" + e + "'");
                    for (var n = this.find(t), i = e.split("."), r = i.length, o = 0, a = n; o < r; o++)
                        if ("" !== i[o] || 0 !== o) {
                            if ("^" !== i[o])
                                break;
                            if (!a.parent)
                                throw new Error("Path '" + e + "' not valid for state '" + n.name + "'");
                            a = a.parent
                        } else
                            a = n;
                    var s = i.slice(o).join(".");
                    return a.name + (a.name && s ? "." : "") + s
                }
                ,
                e
        }(), Bt = function () {
            function e(e, t, n, i) {
                this.router = e,
                    this.states = t,
                    this.builder = n,
                    this.listeners = i,
                    this.queue = []
            }
            return e.prototype.dispose = function () {
                this.queue = []
            }
                ,
                e.prototype.register = function (e) {
                    var t = this.queue
                        , n = jt.create(e)
                        , i = n.name;
                    if (!E(i))
                        throw new Error("State must have a valid name");
                    if (this.states.hasOwnProperty(i) || Y(t.map(s("name")), i))
                        throw new Error("State '" + i + "' is already defined");
                    return t.push(n),
                        this.flush(),
                        n
                }
                ,
                e.prototype.flush = function () {
                    for (var e = this, t = this.queue, n = this.states, i = this.builder, r = [], o = [], a = {}, s = function (t) {
                        return e.states.hasOwnProperty(t) && e.states[t]
                    }, l = function () {
                        r.length && e.listeners.forEach(function (e) {
                            return e("registered", r.map(function (e) {
                                return e.self
                            }))
                        })
                    }; 0 < t.length;) {
                        var c = t.shift()
                            , u = c.name
                            , d = i.build(c)
                            , p = o.indexOf(c);
                        if (d) {
                            var h = s(u);
                            if (h && h.name === u)
                                throw new Error("State '" + u + "' is already defined");
                            var f = s(u + ".**");
                            f && this.router.stateRegistry.deregister(f),
                                n[u] = c,
                                this.attachRoute(c),
                                0 <= p && o.splice(p, 1),
                                r.push(c)
                        } else {
                            var m = a[u];
                            if (a[u] = t.length,
                                0 <= p && m === t.length)
                                return t.push(c),
                                    l(),
                                    n;
                            p < 0 && o.push(c),
                                t.push(c)
                        }
                    }
                    return l(),
                        n
                }
                ,
                e.prototype.attachRoute = function (e) {
                    if (!e.abstract && e.url) {
                        var t = this.router.urlService.rules;
                        t.rule(t.urlRuleFactory.create(e))
                    }
                }
                ,
                e
        }(), Vt = function () {
            function e(e) {
                this.router = e,
                    this.states = {},
                    this.listeners = [],
                    this.matcher = new Ft(this.states),
                    this.builder = new Nt(this.matcher, e.urlMatcherFactory),
                    this.stateQueue = new Bt(e, this.states, this.builder, this.listeners),
                    this._registerRoot()
            }
            return e.prototype._registerRoot = function () {
                (this._root = this.stateQueue.register({
                    name: "",
                    url: "^",
                    views: null,
                    params: {
                        "#": {
                            value: null,
                            type: "hash",
                            dynamic: !0
                        }
                    },
                    abstract: !0
                })).navigable = null
            }
                ,
                e.prototype.dispose = function () {
                    var e = this;
                    this.stateQueue.dispose(),
                        this.listeners = [],
                        this.get().forEach(function (t) {
                            return e.get(t) && e.deregister(t)
                        })
                }
                ,
                e.prototype.onStatesChanged = function (e) {
                    return this.listeners.push(e),
                        function () {
                            J(this.listeners)(e)
                        }
                            .bind(this)
                }
                ,
                e.prototype.root = function () {
                    return this._root
                }
                ,
                e.prototype.register = function (e) {
                    return this.stateQueue.register(e)
                }
                ,
                e.prototype._deregisterTree = function (e) {
                    var t = this
                        , n = this.get().map(function (e) {
                            return e.$$state()
                        })
                        , i = function (e) {
                            var t = n.filter(function (t) {
                                return -1 !== e.indexOf(t.parent)
                            });
                            return 0 === t.length ? t : t.concat(i(t))
                        }
                        , r = i([e])
                        , o = [e].concat(r).reverse();
                    return o.forEach(function (e) {
                        var n = t.router.urlService.rules;
                        n.rules().filter(l("state", e)).forEach(function (e) {
                            return n.removeRule(e)
                        }),
                            delete t.states[e.name]
                    }),
                        o
                }
                ,
                e.prototype.deregister = function (e) {
                    var t = this.get(e);
                    if (!t)
                        throw new Error("Can't deregister state; not found: " + e);
                    var n = this._deregisterTree(t.$$state());
                    return this.listeners.forEach(function (e) {
                        return e("deregistered", n.map(function (e) {
                            return e.self
                        }))
                    }),
                        n
                }
                ,
                e.prototype.get = function (e, t) {
                    var n = this;
                    if (0 === arguments.length)
                        return Object.keys(this.states).map(function (e) {
                            return n.states[e].self
                        });
                    var i = this.matcher.find(e, t);
                    return i && i.self || null
                }
                ,
                e.prototype.decorator = function (e, t) {
                    return this.builder.builder(e, t)
                }
                ,
                e
        }();
        (Lt = e.TransitionHookPhase || (e.TransitionHookPhase = {}))[Lt.CREATE = 0] = "CREATE",
            Lt[Lt.BEFORE = 1] = "BEFORE",
            Lt[Lt.RUN = 2] = "RUN",
            Lt[Lt.SUCCESS = 3] = "SUCCESS",
            Lt[Lt.ERROR = 4] = "ERROR",
            (Ut = e.TransitionHookScope || (e.TransitionHookScope = {}))[Ut.TRANSITION = 0] = "TRANSITION",
            Ut[Ut.STATE = 1] = "STATE";
        var zt = {
            current: W,
            transition: null,
            traceData: {},
            bind: null
        }
            , Ht = function () {
                function t(t, n, i, r) {
                    var o = this;
                    this.transition = t,
                        this.stateContext = n,
                        this.registeredHook = i,
                        this.options = r,
                        this.isSuperseded = function () {
                            return o.type.hookPhase === e.TransitionHookPhase.RUN && !o.options.transition.isActive()
                        }
                        ,
                        this.options = te(r, zt),
                        this.type = i.eventType
                }
                return t.chain = function (e, t) {
                    return e.reduce(function (e, t) {
                        return e.then(function () {
                            return t.invokeHook()
                        })
                    }, t || L.$q.when())
                }
                    ,
                    t.invokeHooks = function (e, n) {
                        for (var i = 0; i < e.length; i++) {
                            var r = e[i].invokeHook();
                            if (_(r)) {
                                var o = e.slice(i + 1);
                                return t.chain(o, r).then(n)
                            }
                        }
                        return n()
                    }
                    ,
                    t.runAllHooks = function (e) {
                        e.forEach(function (e) {
                            return e.invokeHook()
                        })
                    }
                    ,
                    t.prototype.logError = function (e) {
                        this.transition.router.stateService.defaultErrorHandler()(e)
                    }
                    ,
                    t.prototype.invokeHook = function () {
                        var e = this
                            , t = this.registeredHook;
                        if (!t._deregistered) {
                            var n = this.getNotCurrentRejection();
                            if (n)
                                return n;
                            var i = this.options;
                            lt.traceHookInvocation(this, this.transition, i);
                            var r = function (n) {
                                return t.eventType.getErrorHandler(e)(n)
                            }
                                , o = function (n) {
                                    return t.eventType.getResultHandler(e)(n)
                                };
                            try {
                                var a = t.callback.call(i.bind, e.transition, e.stateContext);
                                return !this.type.synchronous && _(a) ? a.catch(function (e) {
                                    return Re.normalize(e).toPromise()
                                }).then(o, r) : o(a)
                            } catch (n) {
                                return r(Re.normalize(n))
                            } finally {
                                t.invokeLimit && ++t.invokeCount >= t.invokeLimit && t.deregister()
                            }
                        }
                    }
                    ,
                    t.prototype.handleHookResult = function (e) {
                        var t = this;
                        return this.getNotCurrentRejection() || (_(e) ? e.then(function (e) {
                            return t.handleHookResult(e)
                        }) : (lt.traceHookResult(e, this.transition, this.options),
                            !1 === e ? Re.aborted("Hook aborted transition").toPromise() : m(yt)(e) ? Re.redirected(e).toPromise() : void 0))
                    }
                    ,
                    t.prototype.getNotCurrentRejection = function () {
                        var e = this.transition.router;
                        return e._disposed ? Re.aborted("UIRouter instance #" + e.$id + " has been stopped (disposed)").toPromise() : this.transition._aborted ? Re.aborted().toPromise() : this.isSuperseded() ? Re.superseded(this.options.current()).toPromise() : void 0
                    }
                    ,
                    t.prototype.toString = function () {
                        var e = this.options
                            , t = this.registeredHook;
                        return (c("traceData.hookType")(e) || "internal") + " context: " + (c("traceData.context.state.name")(e) || c("traceData.context")(e) || "unknown") + ", " + Le(200, Fe(t.callback))
                    }
                    ,
                    t.HANDLE_RESULT = function (e) {
                        return function (t) {
                            return e.handleHookResult(t)
                        }
                    }
                    ,
                    t.LOG_REJECTED_RESULT = function (e) {
                        return function (t) {
                            _(t) && t.catch(function (t) {
                                return e.logError(Re.normalize(t))
                            })
                        }
                    }
                    ,
                    t.LOG_ERROR = function (e) {
                        return function (t) {
                            return e.logError(t)
                        }
                    }
                    ,
                    t.REJECT_ERROR = function (e) {
                        return function (e) {
                            return Oe(e)
                        }
                    }
                    ,
                    t.THROW_ERROR = function (e) {
                        return function (e) {
                            throw e
                        }
                    }
                    ,
                    t
            }();
        function Wt(e, t, n) {
            var i = E(t) ? [t] : t;
            return !!(k(i) ? i : function (e) {
                for (var t = i, n = 0; n < t.length; n++) {
                    var r = new De(t[n]);
                    if (r && r.matches(e.name) || !r && t[n] === e.name)
                        return !0
                }
                return !1
            }
            )(e, n)
        }
        var qt = function () {
            function t(e, t, n, i, r, o) {
                void 0 === o && (o = {}),
                    this.tranSvc = e,
                    this.eventType = t,
                    this.callback = n,
                    this.matchCriteria = i,
                    this.removeHookFromRegistry = r,
                    this.invokeCount = 0,
                    this._deregistered = !1,
                    this.priority = o.priority || 0,
                    this.bind = o.bind || null,
                    this.invokeLimit = o.invokeLimit
            }
            return t.prototype._matchingNodes = function (e, t, n) {
                if (!0 === t)
                    return e;
                var i = e.filter(function (e) {
                    return Wt(e.state, t, n)
                });
                return i.length ? i : null
            }
                ,
                t.prototype._getDefaultMatchCriteria = function () {
                    return ce(this.tranSvc._pluginapi._getPathTypes(), function () {
                        return !0
                    })
                }
                ,
                t.prototype._getMatchingNodes = function (t, n) {
                    var i = this
                        , r = V(this._getDefaultMatchCriteria(), this.matchCriteria);
                    return de(this.tranSvc._pluginapi._getPathTypes()).reduce(function (o, a) {
                        var s = a.scope === e.TransitionHookScope.STATE
                            , l = t[a.name] || []
                            , c = s ? l : [ke(l)];
                        return o[a.name] = i._matchingNodes(c, r[a.name], n),
                            o
                    }, {})
                }
                ,
                t.prototype.matches = function (e, t) {
                    var n = this._getMatchingNodes(e, t);
                    return de(n).every(H) ? n : null
                }
                ,
                t.prototype.deregister = function () {
                    this.removeHookFromRegistry(this),
                        this._deregistered = !0
                }
                ,
                t
        }();
        function Gt(e, t, n) {
            var i = (e._registeredHooks = e._registeredHooks || {})[n.name] = []
                , r = J(i);
            return e[n.name] = function (e, o, a) {
                void 0 === a && (a = {});
                var s = new qt(t, n, o, e, r, a);
                return i.push(s),
                    s.deregister.bind(s)
            }
        }
        var Yt = function () {
            function t(e) {
                this.transition = e
            }
            return t.prototype.buildHooksForPhase = function (e) {
                var t = this;
                return this.transition.router.transitionService._pluginapi._getEvents(e).map(function (e) {
                    return t.buildHooks(e)
                }).reduce(fe, []).filter(H)
            }
                ,
                t.prototype.buildHooks = function (t) {
                    var n = this.transition
                        , i = n.treeChanges()
                        , r = this.getMatchingHooks(t, i, n);
                    if (!r)
                        return [];
                    var o, a = {
                        transition: n,
                        current: n.options().current
                    };
                    return r.map(function (r) {
                        return r.matches(i, n)[t.criteriaMatchPath.name].map(function (i) {
                            var o = V({
                                bind: r.bind,
                                traceData: {
                                    hookType: t.name,
                                    context: i
                                }
                            }, a)
                                , s = t.criteriaMatchPath.scope === e.TransitionHookScope.STATE ? i.state.self : null
                                , l = new Ht(n, s, r, o);
                            return {
                                hook: r,
                                node: i,
                                transitionHook: l
                            }
                        })
                    }).reduce(fe, []).sort((o = t.reverseSort,
                        void 0 === o && (o = !1),
                        function (e, t) {
                            var n = o ? -1 : 1
                                , i = (e.node.state.path.length - t.node.state.path.length) * n;
                            return 0 !== i ? i : t.hook.priority - e.hook.priority
                        }
                    )).map(function (e) {
                        return e.transitionHook
                    })
                }
                ,
                t.prototype.getMatchingHooks = function (t, n, i) {
                    var r = t.hookPhase === e.TransitionHookPhase.CREATE
                        , o = this.transition.router.transitionService;
                    return (r ? [o] : [this.transition, o]).map(function (e) {
                        return e.getHooks(t.name)
                    }).filter(we(M, "broken event named: " + t.name)).reduce(fe, []).filter(function (e) {
                        return e.matches(n, i)
                    })
                }
                ,
                t
        }()
            , Xt = s("self")
            , Jt = function () {
                function t(t, n, i) {
                    var r = this;
                    if (this._deferred = L.$q.defer(),
                        this.promise = this._deferred.promise,
                        this._registeredHooks = {},
                        this._hookBuilder = new Yt(this),
                        this.isActive = function () {
                            return r.router.globals.transition === r
                        }
                        ,
                        this.router = i,
                        !(this._targetState = n).valid())
                        throw new Error(n.error());
                    this._options = V({
                        current: v(this)
                    }, n.options()),
                        this.$id = i.transitionService._transitionCount++;
                    var o = bt.buildToPath(t, n);
                    this._treeChanges = bt.treeChanges(t, o, this._options.reloadState),
                        this.createTransitionHookRegFns();
                    var a = this._hookBuilder.buildHooksForPhase(e.TransitionHookPhase.CREATE);
                    Ht.invokeHooks(a, function () {
                        return null
                    }),
                        this.applyViewConfigs(i)
                }
                return t.prototype.onBefore = function (e, t, n) { }
                    ,
                    t.prototype.onStart = function (e, t, n) { }
                    ,
                    t.prototype.onExit = function (e, t, n) { }
                    ,
                    t.prototype.onRetain = function (e, t, n) { }
                    ,
                    t.prototype.onEnter = function (e, t, n) { }
                    ,
                    t.prototype.onFinish = function (e, t, n) { }
                    ,
                    t.prototype.onSuccess = function (e, t, n) { }
                    ,
                    t.prototype.onError = function (e, t, n) { }
                    ,
                    t.prototype.createTransitionHookRegFns = function () {
                        var t = this;
                        this.router.transitionService._pluginapi._getEvents().filter(function (t) {
                            return t.hookPhase !== e.TransitionHookPhase.CREATE
                        }).forEach(function (e) {
                            return Gt(t, t.router.transitionService, e)
                        })
                    }
                    ,
                    t.prototype.getHooks = function (e) {
                        return this._registeredHooks[e]
                    }
                    ,
                    t.prototype.applyViewConfigs = function (e) {
                        var t = this._treeChanges.entering.map(function (e) {
                            return e.state
                        });
                        bt.applyViewConfigs(e.transitionService.$view, this._treeChanges.to, t)
                    }
                    ,
                    t.prototype.$from = function () {
                        return ke(this._treeChanges.from).state
                    }
                    ,
                    t.prototype.$to = function () {
                        return ke(this._treeChanges.to).state
                    }
                    ,
                    t.prototype.from = function () {
                        return this.$from().self
                    }
                    ,
                    t.prototype.to = function () {
                        return this.$to().self
                    }
                    ,
                    t.prototype.targetState = function () {
                        return this._targetState
                    }
                    ,
                    t.prototype.is = function (e) {
                        return e instanceof t ? this.is({
                            to: e.$to().name,
                            from: e.$from().name
                        }) : !(e.to && !Wt(this.$to(), e.to, this) || e.from && !Wt(this.$from(), e.from, this))
                    }
                    ,
                    t.prototype.params = function (e) {
                        return void 0 === e && (e = "to"),
                            Object.freeze(this._treeChanges[e].map(s("paramValues")).reduce(ne, {}))
                    }
                    ,
                    t.prototype.paramsChanged = function () {
                        var e = this.params("from")
                            , t = this.params("to")
                            , n = [].concat(this._treeChanges.to).concat(this._treeChanges.from).map(function (e) {
                                return e.paramSchema
                            }).reduce(me, []).reduce(ve, []);
                        return ft.changed(n, e, t).reduce(function (e, n) {
                            return e[n.id] = t[n.id],
                                e
                        }, {})
                    }
                    ,
                    t.prototype.injector = function (e, t) {
                        void 0 === t && (t = "to");
                        var n = this._treeChanges[t];
                        return e && (n = bt.subPath(n, function (t) {
                            return t.state === e || t.state.name === e
                        })),
                            new Pt(n).injector()
                    }
                    ,
                    t.prototype.getResolveTokens = function (e) {
                        return void 0 === e && (e = "to"),
                            new Pt(this._treeChanges[e]).getTokens()
                    }
                    ,
                    t.prototype.addResolvable = function (e, t) {
                        void 0 === t && (t = ""),
                            e = m(St)(e) ? e : new St(e);
                        var n = "string" == typeof t ? t : t.name
                            , i = this._treeChanges.to
                            , r = le(i, function (e) {
                                return e.state.name === n
                            });
                        new Pt(i).addResolvables([e], r.state)
                    }
                    ,
                    t.prototype.redirectedFrom = function () {
                        return this._options.redirectedFrom || null
                    }
                    ,
                    t.prototype.originalTransition = function () {
                        var e = this.redirectedFrom();
                        return e && e.originalTransition() || this
                    }
                    ,
                    t.prototype.options = function () {
                        return this._options
                    }
                    ,
                    t.prototype.entering = function () {
                        return ue(this._treeChanges.entering, s("state")).map(Xt)
                    }
                    ,
                    t.prototype.exiting = function () {
                        return ue(this._treeChanges.exiting, s("state")).map(Xt).reverse()
                    }
                    ,
                    t.prototype.retained = function () {
                        return ue(this._treeChanges.retained, s("state")).map(Xt)
                    }
                    ,
                    t.prototype.views = function (e, t) {
                        void 0 === e && (e = "entering");
                        var n = this._treeChanges[e];
                        return (n = t ? n.filter(l("state", t)) : n).map(s("views")).filter(H).reduce(fe, [])
                    }
                    ,
                    t.prototype.treeChanges = function (e) {
                        return e ? this._treeChanges[e] : this._treeChanges
                    }
                    ,
                    t.prototype.redirect = function (e) {
                        for (var t = 1, n = this; null != (n = n.redirectedFrom());)
                            if (20 < ++t)
                                throw new Error("Too many consecutive Transition redirects (20+)");
                        var i = {
                            redirectedFrom: this,
                            source: "redirect"
                        };
                        "url" === this.options().source && !1 !== e.options().location && (i.location = "replace");
                        var r = V({}, this.options(), e.options(), i);
                        e = e.withOptions(r, !0);
                        var o, a = this.router.transitionService.create(this._treeChanges.from, e), s = this._treeChanges.entering, l = a._treeChanges.entering;
                        return bt.matching(l, s, bt.nonDynamicParams).filter(u((o = e.options().reloadState,
                            function (e) {
                                return o && e.state.includes[o.name]
                            }
                        ))).forEach(function (e, t) {
                            e.resolvables = s[t].resolvables
                        }),
                            a
                    }
                    ,
                    t.prototype._changedParams = function () {
                        var e = this._treeChanges;
                        if (!(this._options.reload || e.exiting.length || e.entering.length || e.to.length !== e.from.length || xe(e.to, e.from).map(function (e) {
                            return e[0].state !== e[1].state
                        }).reduce(he, !1))) {
                            var t = e.to.map(function (e) {
                                return e.paramSchema
                            })
                                , n = [e.to, e.from].map(function (e) {
                                    return e.map(function (e) {
                                        return e.paramValues
                                    })
                                });
                            return xe(t, n[0], n[1]).map(function (e) {
                                var t = e[0]
                                    , n = e[1]
                                    , i = e[2];
                                return ft.changed(t, n, i)
                            }).reduce(fe, [])
                        }
                    }
                    ,
                    t.prototype.dynamic = function () {
                        var e = this._changedParams();
                        return !!e && e.map(function (e) {
                            return e.dynamic
                        }).reduce(he, !1)
                    }
                    ,
                    t.prototype.ignored = function () {
                        return !!this._ignoredReason()
                    }
                    ,
                    t.prototype._ignoredReason = function () {
                        var e = this.router.globals.transition
                            , t = this._options.reloadState
                            , n = function (e, n) {
                                if (e.length !== n.length)
                                    return !1;
                                var i = bt.matching(e, n);
                                return e.length === i.filter(function (e) {
                                    return !t || !e.state.includes[t.name]
                                }).length
                            }
                            , i = this.treeChanges()
                            , r = e && e.treeChanges();
                        return r && n(r.to, i.to) && n(r.exiting, i.exiting) ? "SameAsPending" : 0 === i.exiting.length && 0 === i.entering.length && n(i.from, i.to) ? "SameAsCurrent" : void 0
                    }
                    ,
                    t.prototype.run = function () {
                        var t = this
                            , n = Ht.runAllHooks
                            , i = function (e) {
                                return t._hookBuilder.buildHooksForPhase(e)
                            }
                            , r = i(e.TransitionHookPhase.BEFORE);
                        return Ht.invokeHooks(r, function () {
                            var e = t.router.globals;
                            return e.lastStartedTransitionId = t.$id,
                                e.transition = t,
                                e.transitionHistory.enqueue(t),
                                lt.traceTransitionStart(t),
                                L.$q.when(void 0)
                        }).then(function () {
                            var t = i(e.TransitionHookPhase.RUN);
                            return Ht.invokeHooks(t, function () {
                                return L.$q.when(void 0)
                            })
                        }).then(function () {
                            lt.traceSuccess(t.$to(), t),
                                t.success = !0,
                                t._deferred.resolve(t.to()),
                                n(i(e.TransitionHookPhase.SUCCESS))
                        }, function (r) {
                            lt.traceError(r, t),
                                t.success = !1,
                                t._deferred.reject(r),
                                t._error = r,
                                n(i(e.TransitionHookPhase.ERROR))
                        }),
                            this.promise
                    }
                    ,
                    t.prototype.valid = function () {
                        return !this.error() || void 0 !== this.success
                    }
                    ,
                    t.prototype.abort = function () {
                        S(this.success) && (this._aborted = !0)
                    }
                    ,
                    t.prototype.error = function () {
                        var e = this.$to();
                        if (e.self.abstract)
                            return Re.invalid("Cannot transition to abstract state '" + e.name + "'");
                        var t = e.parameters()
                            , n = this.params()
                            , i = t.filter(function (e) {
                                return !e.validates(n[e.id])
                            });
                        if (i.length) {
                            var r = i.map(function (e) {
                                return "[" + e.id + ":" + ze(n[e.id]) + "]"
                            }).join(", ")
                                , o = "The following parameter values are not valid for state '" + e.name + "': " + r;
                            return Re.invalid(o)
                        }
                        return !1 === this.success ? this._error : void 0
                    }
                    ,
                    t.prototype.toString = function () {
                        var e = this.from()
                            , t = this.to()
                            , n = function (e) {
                                return null !== e["#"] && void 0 !== e["#"] ? e : oe(e, ["#"])
                            };
                        return "Transition#" + this.$id + "( '" + (I(e) ? e.name : e) + "'" + ze(n(this._treeChanges.from.map(s("paramValues")).reduce(ne, {}))) + " -> " + (this.valid() ? "" : "(X) ") + "'" + (I(t) ? t.name : t) + "'" + ze(n(this.params())) + " )"
                    }
                    ,
                    t.diToken = t
            }();
        function Kt(e, t) {
            var n = ["", ""]
                , i = e.replace(/[\\\[\]\^$*+?.()|{}]/g, "\\$&");
            if (!t)
                return i;
            switch (t.squash) {
                case !1:
                    n = ["(", ")" + (t.isOptional ? "?" : "")];
                    break;
                case !0:
                    i = i.replace(/\/$/, ""),
                        n = ["(?:/(", ")|/)?"];
                    break;
                default:
                    n = ["(" + t.squash + "|", ")?"]
            }
            return i + n[0] + t.type.pattern.source + n[1]
        }
        var Qt, Zt = Ke("/"), en = {
            state: {
                params: {}
            },
            strict: !0,
            caseInsensitive: !0
        }, tn = function () {
            function t(e, n, i, r) {
                var o = this;
                this._cache = {
                    path: [this]
                },
                    this._children = [],
                    this._params = [],
                    this._segments = [],
                    this._compiled = [],
                    this.config = r = te(r, en),
                    this.pattern = e;
                for (var a, s, c, u = /([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g, d = /([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g, p = [], h = 0, f = function (n) {
                    if (!t.nameValidator.test(n))
                        throw new Error("Invalid parameter name '" + n + "' in pattern '" + e + "'");
                    if (le(o._params, l("id", n)))
                        throw new Error("Duplicate parameter name '" + n + "' in pattern '" + e + "'")
                }, m = function (t, i) {
                    var r, a = t[2] || t[3], s = i ? t[4] : t[4] || ("*" === t[1] ? "[\\s\\S]*" : null);
                    return {
                        id: a,
                        regexp: s,
                        segment: e.substring(h, t.index),
                        type: s ? n.type(s) || (r = s,
                            G(n.type(i ? "query" : "path"), {
                                pattern: new RegExp(r, o.config.caseInsensitive ? "i" : void 0)
                            })) : null
                    }
                }; (a = u.exec(e)) && !(0 <= (s = m(a, !1)).segment.indexOf("?"));)
                    f(s.id),
                        this._params.push(i.fromPath(s.id, s.type, r.state)),
                        this._segments.push(s.segment),
                        p.push([s.segment, ke(this._params)]),
                        h = u.lastIndex;
                var g = (c = e.substring(h)).indexOf("?");
                if (0 <= g) {
                    var v = c.substring(g);
                    if (c = c.substring(0, g),
                        0 < v.length)
                        for (h = 0; a = d.exec(v);)
                            f((s = m(a, !0)).id),
                                this._params.push(i.fromSearch(s.id, s.type, r.state)),
                                h = u.lastIndex
                }
                this._segments.push(c),
                    this._compiled = p.map(function (e) {
                        return Kt.apply(null, e)
                    }).concat(Kt(c))
            }
            return t.encodeDashes = function (e) {
                return encodeURIComponent(e).replace(/-/g, function (e) {
                    return "%5C%" + e.charCodeAt(0).toString(16).toUpperCase()
                })
            }
                ,
                t.pathSegmentsAndParams = function (t) {
                    return xe(t._segments, t._params.filter(function (t) {
                        return t.location === e.DefType.PATH
                    }).concat(void 0)).reduce(fe, []).filter(function (e) {
                        return "" !== e && C(e)
                    })
                }
                ,
                t.queryParams = function (t) {
                    return t._params.filter(function (t) {
                        return t.location === e.DefType.SEARCH
                    })
                }
                ,
                t.compare = function (e, n) {
                    var i = function (e) {
                        return e._cache.weights = e._cache.weights || (n = e,
                            n._cache.segments = n._cache.segments || n._cache.path.map(t.pathSegmentsAndParams).reduce(fe, []).reduce(Qe, []).map(function (e) {
                                return E(e) ? Zt(e) : e
                            }).reduce(fe, [])).map(function (e) {
                                return "/" === e ? 1 : E(e) ? 2 : e instanceof ft ? 3 : void 0
                            });
                        var n
                    }
                        , r = i(e)
                        , o = i(n);
                    !function (e, t, n) {
                        for (var i = Math.max(e.length, t.length); e.length < i;)
                            e.push(0);
                        for (; t.length < i;)
                            t.push(0)
                    }(r, o);
                    var a, s, l = xe(r, o);
                    for (s = 0; s < l.length; s++)
                        if (0 != (a = l[s][0] - l[s][1]))
                            return a;
                    return 0
                }
                ,
                t.prototype.append = function (e) {
                    return this._children.push(e),
                        e._cache = {
                            path: this._cache.path.concat(e),
                            parent: this,
                            pattern: null
                        },
                        e
                }
                ,
                t.prototype.isRoot = function () {
                    return this._cache.path[0] === this
                }
                ,
                t.prototype.toString = function () {
                    return this.pattern
                }
                ,
                t.prototype.exec = function (e, t, n, i) {
                    var r = this;
                    void 0 === t && (t = {}),
                        void 0 === i && (i = {});
                    var o, a, l, c = (o = this._cache,
                        a = "pattern",
                        l = function () {
                            return new RegExp(["^", ye(r._cache.path.map(s("_compiled"))).join(""), !1 === r.config.strict ? "/?" : "", "$"].join(""), r.config.caseInsensitive ? "i" : void 0)
                        }
                        ,
                        o[a] = o[a] || l()).exec(e);
                    if (!c)
                        return null;
                    var u, d = this.parameters(), p = d.filter(function (e) {
                        return !e.isSearch()
                    }), h = d.filter(function (e) {
                        return e.isSearch()
                    }), f = this._cache.path.map(function (e) {
                        return e._segments.length - 1
                    }).reduce(function (e, t) {
                        return e + t
                    }), m = {};
                    if (f !== c.length - 1)
                        throw new Error("Unbalanced capture group in route '" + this.pattern + "'");
                    for (var g = 0; g < f; g++) {
                        for (var v = p[g], y = c[g + 1], b = 0; b < v.replace.length; b++)
                            v.replace[b].from === y && (y = v.replace[b].to);
                        y && !0 === v.array && (y = ue(ue((u = function (e) {
                            return e.split("").reverse().join("")
                        }
                        )(y).split(/-(?!\\)/), u), function (e) {
                            return e.replace(/\\-/g, "-")
                        }).reverse()),
                            C(y) && (y = v.type.decode(y)),
                            m[v.id] = v.value(y)
                    }
                    return h.forEach(function (e) {
                        for (var n = t[e.id], i = 0; i < e.replace.length; i++)
                            e.replace[i].from === n && (n = e.replace[i].to);
                        C(n) && (n = e.type.decode(n)),
                            m[e.id] = e.value(n)
                    }),
                        n && (m["#"] = n),
                        m
                }
                ,
                t.prototype.parameters = function (e) {
                    return void 0 === e && (e = {}),
                        !1 === e.inherit ? this._params : ye(this._cache.path.map(function (e) {
                            return e._params
                        }))
                }
                ,
                t.prototype.parameter = function (e, t) {
                    var n = this;
                    void 0 === t && (t = {});
                    var i = this._cache.parent;
                    return function () {
                        for (var t = 0, i = n._params; t < i.length; t++) {
                            var r = i[t];
                            if (r.id === e)
                                return r
                        }
                    }() || !1 !== t.inherit && i && i.parameter(e, t) || null
                }
                ,
                t.prototype.validates = function (e) {
                    return e = e || {},
                        this.parameters().filter(function (t) {
                            return e.hasOwnProperty(t.id)
                        }).map(function (t) {
                            return i = e[(n = t).id],
                                !n || n.validates(i);
                            var n, i
                        }).reduce(pe, !0)
                }
                ,
                t.prototype.format = function (e) {
                    void 0 === e && (e = {});
                    var n = this._cache.path
                        , i = n.map(t.pathSegmentsAndParams).reduce(fe, []).map(function (e) {
                            return E(e) ? e : o(e)
                        })
                        , r = n.map(t.queryParams).reduce(fe, []).map(o);
                    if (i.concat(r).filter(function (e) {
                        return !1 === e.isValid
                    }).length)
                        return null;
                    function o(t) {
                        var n = t.value(e[t.id])
                            , i = t.validates(n)
                            , r = t.isDefaultValue(n);
                        return {
                            param: t,
                            value: n,
                            isValid: i,
                            isDefaultValue: r,
                            squash: !!r && t.squash,
                            encoded: t.type.encode(n)
                        }
                    }
                    var a = i.reduce(function (e, n) {
                        if (E(n))
                            return e + n;
                        var i = n.squash
                            , r = n.encoded
                            , o = n.param;
                        return !0 === i ? e.match(/\/$/) ? e.slice(0, -1) : e : E(i) ? e + i : !1 !== i ? e : null == r ? e : M(r) ? e + ue(r, t.encodeDashes).join("-") : o.raw ? e + r : e + encodeURIComponent(r)
                    }, "")
                        , s = r.map(function (e) {
                            var t = e.param
                                , n = e.squash
                                , i = e.encoded
                                , r = e.isDefaultValue;
                            if (!(null == i || r && !1 !== n) && (M(i) || (i = [i]),
                                0 !== i.length))
                                return t.raw || (i = ue(i, encodeURIComponent)),
                                    i.map(function (e) {
                                        return t.id + "=" + e
                                    })
                        }).filter(H).reduce(fe, []).join("&");
                    return a + (s ? "?" + s : "") + (e["#"] ? "#" + e["#"] : "")
                }
                ,
                t.nameValidator = /^\w+([-.]+\w+)*(?:\[\])?$/,
                t
        }(), nn = function () {
            return (nn = Object.assign || function (e) {
                for (var t, n = 1, i = arguments.length; n < i; n++)
                    for (var r in t = arguments[n])
                        Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                return e
            }
            ).apply(this, arguments)
        }, rn = function () {
            function t(e) {
                this.router = e
            }
            return t.prototype.fromConfig = function (t, n, i) {
                return new ft(t, n, e.DefType.CONFIG, this.router.urlService.config, i)
            }
                ,
                t.prototype.fromPath = function (t, n, i) {
                    return new ft(t, n, e.DefType.PATH, this.router.urlService.config, i)
                }
                ,
                t.prototype.fromSearch = function (t, n, i) {
                    return new ft(t, n, e.DefType.SEARCH, this.router.urlService.config, i)
                }
                ,
                t
        }(), on = function () {
            function e(e) {
                var t = this;
                this.router = e,
                    this.paramFactory = new rn(this.router),
                    this.caseInsensitive = function (e) {
                        return t.router.urlService.config.caseInsensitive(e)
                    }
                    ,
                    this.defaultSquashPolicy = function (e) {
                        return t.router.urlService.config.defaultSquashPolicy(e)
                    }
                    ,
                    this.strictMode = function (e) {
                        return t.router.urlService.config.strictMode(e)
                    }
                    ,
                    this.type = function (e, n, i) {
                        return t.router.urlService.config.type(e, n, i) || t
                    }
                    ,
                    V(this, {
                        UrlMatcher: tn,
                        Param: ft
                    })
            }
            return e.prototype.compile = function (e, t) {
                var n = this.router.urlService.config
                    , i = t && !t.state && t.params;
                t = i ? nn({
                    state: {
                        params: i
                    }
                }, t) : t;
                var r = {
                    strict: n._isStrictMode,
                    caseInsensitive: n._isCaseInsensitive
                };
                return new tn(e, n.paramTypes, this.paramFactory, V(r, t))
            }
                ,
                e.prototype.isMatcher = function (e) {
                    if (!I(e))
                        return !1;
                    var t = !0;
                    return B(tn.prototype, function (n, i) {
                        k(n) && (t = t && C(e[i]) && k(e[i]))
                    }),
                        t
                }
                ,
                e.prototype.$get = function () {
                    var e = this.router.urlService.config;
                    return e.paramTypes.enqueue = !1,
                        e.paramTypes._flushTypeQueue(),
                        this
                }
                ,
                e
        }(), an = function () {
            function e(e) {
                this.router = e
            }
            return e.prototype.compile = function (e) {
                return this.router.urlMatcherFactory.compile(e)
            }
                ,
                e.prototype.create = function (e, t) {
                    var n = this
                        , i = jt.isState
                        , r = b([[E, function (e) {
                            return r(n.compile(e))
                        }
                        ], [m(tn), function (e) {
                            return n.fromUrlMatcher(e, t)
                        }
                        ], [i, function (e) {
                            return n.fromState(e, n.router)
                        }
                        ], [m(RegExp), function (e) {
                            return n.fromRegExp(e, t)
                        }
                        ], [k, function (e) {
                            return new sn(e, t)
                        }
                        ]])
                        , o = r(e);
                    if (!o)
                        throw new Error("invalid 'what' in when()");
                    return o
                }
                ,
                e.prototype.fromUrlMatcher = function (e, t) {
                    var n = t;
                    E(t) && (t = this.router.urlMatcherFactory.compile(t)),
                        m(tn)(t) && (n = function (e) {
                            return t.format(e)
                        }
                        );
                    var i = {
                        urlMatcher: e,
                        matchPriority: function (t) {
                            var n = e.parameters().filter(function (e) {
                                return e.isOptional
                            });
                            return n.length ? n.filter(function (e) {
                                return t[e.id]
                            }).length / n.length : 1e-6
                        },
                        type: "URLMATCHER"
                    };
                    return V(new sn(function (t) {
                        var n = e.exec(t.path, t.search, t.hash);
                        return e.validates(n) && n
                    }
                        , n), i)
                }
                ,
                e.prototype.fromState = function (e, t) {
                    var n = {
                        state: e,
                        type: "STATE"
                    };
                    return V(this.fromUrlMatcher(e.url, function (n) {
                        var i = t.stateService
                            , r = t.globals;
                        i.href(e, n) !== i.href(r.current, r.params) && i.transitionTo(e, n, {
                            inherit: !0,
                            source: "url"
                        })
                    }), n)
                }
                ,
                e.prototype.fromRegExp = function (e, t) {
                    if (e.global || e.sticky)
                        throw new Error("Rule RegExp must not be global or sticky");
                    var n = E(t) ? function (e) {
                        return t.replace(/\$(\$|\d{1,2})/, function (t, n) {
                            return e["$" === n ? 0 : Number(n)]
                        })
                    }
                        : t
                        , i = {
                            regexp: e,
                            type: "REGEXP"
                        };
                    return V(new sn(function (t) {
                        return e.exec(t.path)
                    }
                        , n), i)
                }
                ,
                e.isUrlRule = function (e) {
                    return e && ["type", "match", "handler"].every(function (t) {
                        return C(e[t])
                    })
                }
                ,
                e
        }(), sn = function (e, t) {
            var n = this;
            this.match = e,
                this.type = "RAW",
                this.matchPriority = function (e) {
                    return 0 - n.$id
                }
                ,
                this.handler = t || H
        }, ln = function () {
            function e(e) {
                var t = this;
                this.router = e,
                    this.sync = function (e) {
                        return t.router.urlService.sync(e)
                    }
                    ,
                    this.listen = function (e) {
                        return t.router.urlService.listen(e)
                    }
                    ,
                    this.deferIntercept = function (e) {
                        return t.router.urlService.deferIntercept(e)
                    }
                    ,
                    this.match = function (e) {
                        return t.router.urlService.match(e)
                    }
                    ,
                    this.initial = function (e) {
                        return t.router.urlService.rules.initial(e)
                    }
                    ,
                    this.otherwise = function (e) {
                        return t.router.urlService.rules.otherwise(e)
                    }
                    ,
                    this.removeRule = function (e) {
                        return t.router.urlService.rules.removeRule(e)
                    }
                    ,
                    this.rule = function (e) {
                        return t.router.urlService.rules.rule(e)
                    }
                    ,
                    this.rules = function () {
                        return t.router.urlService.rules.rules()
                    }
                    ,
                    this.sort = function (e) {
                        return t.router.urlService.rules.sort(e)
                    }
                    ,
                    this.when = function (e, n, i) {
                        return t.router.urlService.rules.when(e, n, i)
                    }
                    ,
                    this.urlRuleFactory = new an(e)
            }
            return e.prototype.update = function (e) {
                var t = this.router.locationService;
                e ? this.location = t.url() : t.url() !== this.location && t.url(this.location, !0)
            }
                ,
                e.prototype.push = function (e, t, n) {
                    var i = n && !!n.replace;
                    this.router.urlService.url(e.format(t || {}), i)
                }
                ,
                e.prototype.href = function (e, t, n) {
                    var i = e.format(t);
                    if (null == i)
                        return null;
                    n = n || {
                        absolute: !1
                    };
                    var r, o, a, s, l = this.router.urlService.config, c = l.html5Mode();
                    if (c || null === i || (i = "#" + l.hashPrefix() + i),
                        r = i,
                        o = c,
                        a = n.absolute,
                        i = "/" === (s = l.baseHref()) ? r : o ? qe(s) + r : a ? s.slice(1) + r : r,
                        !n.absolute || !i)
                        return i;
                    var u = !c && i ? "/" : ""
                        , d = l.port()
                        , p = 80 === d || 443 === d ? "" : ":" + d;
                    return [l.protocol(), "://", l.host(), p, u, i].join("")
                }
                ,
                Object.defineProperty(e.prototype, "interceptDeferred", {
                    get: function () {
                        return this.router.urlService.interceptDeferred
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                e
        }(), cn = function () {
            function e(e) {
                var t = this;
                this.router = e,
                    this._uiViews = [],
                    this._viewConfigs = [],
                    this._viewConfigFactories = {},
                    this._listeners = [],
                    this._pluginapi = {
                        _rootViewContext: this._rootViewContext.bind(this),
                        _viewConfigFactory: this._viewConfigFactory.bind(this),
                        _registeredUIView: function (e) {
                            return le(t._uiViews, function (n) {
                                return t.router.$id + "." + n.id === e
                            })
                        },
                        _registeredUIViews: function () {
                            return t._uiViews
                        },
                        _activeViewConfigs: function () {
                            return t._viewConfigs
                        },
                        _onSync: function (e) {
                            return t._listeners.push(e),
                                function () {
                                    return J(t._listeners, e)
                                }
                        }
                    }
            }
            return e.normalizeUIViewTarget = function (e, t) {
                void 0 === t && (t = "");
                var n = t.split("@")
                    , i = n[0] || "$default"
                    , r = E(n[1]) ? n[1] : "^"
                    , o = /^(\^(?:\.\^)*)\.(.*$)/.exec(i);
                return o && (r = o[1],
                    i = o[2]),
                    "!" === i.charAt(0) && (i = i.substr(1),
                        r = ""),
                    /^(\^(?:\.\^)*)$/.exec(r) ? r = r.split(".").reduce(function (e, t) {
                        return e.parent
                    }, e).name : "." === r && (r = e.name),
                {
                    uiViewName: i,
                    uiViewContextAnchor: r
                }
            }
                ,
                e.prototype._rootViewContext = function (e) {
                    return this._rootContext = e || this._rootContext
                }
                ,
                e.prototype._viewConfigFactory = function (e, t) {
                    this._viewConfigFactories[e] = t
                }
                ,
                e.prototype.createViewConfig = function (e, t) {
                    var n = this._viewConfigFactories[t.$type];
                    if (!n)
                        throw new Error("ViewService: No view config factory registered for type " + t.$type);
                    var i = n(e, t);
                    return M(i) ? i : [i]
                }
                ,
                e.prototype.deactivateViewConfig = function (e) {
                    lt.traceViewServiceEvent("<- Removing", e),
                        J(this._viewConfigs, e)
                }
                ,
                e.prototype.activateViewConfig = function (e) {
                    lt.traceViewServiceEvent("-> Registering", e),
                        this._viewConfigs.push(e)
                }
                ,
                e.prototype.sync = function () {
                    var t = this
                        , n = this._uiViews.map(function (e) {
                            return [e.fqn, e]
                        }).reduce(Te, {});
                    function i(e) {
                        for (var t = e.viewDecl.$context, n = 0; ++n && t.parent;)
                            t = t.parent;
                        return n
                    }
                    var o = r(function (e, t, n, i) {
                        return t * (e(n) - e(i))
                    })
                        , a = this._uiViews.sort(o(function (e) {
                            var t = function (e) {
                                return e && e.parent ? t(e.parent) + 1 : 1
                            };
                            return 1e4 * e.fqn.split(".").length + t(e.creationContext)
                        }, 1)).map(function (r) {
                            var a = t._viewConfigs.filter(e.matches(n, r));
                            return 1 < a.length && a.sort(o(i, -1)),
                            {
                                uiView: r,
                                viewConfig: a[0]
                            }
                        })
                        , s = a.map(function (e) {
                            return e.viewConfig
                        })
                        , l = this._viewConfigs.filter(function (e) {
                            return !Y(s, e)
                        }).map(function (e) {
                            return {
                                uiView: void 0,
                                viewConfig: e
                            }
                        });
                    a.forEach(function (e) {
                        -1 !== t._uiViews.indexOf(e.uiView) && e.uiView.configUpdated(e.viewConfig)
                    });
                    var c = a.concat(l);
                    this._listeners.forEach(function (e) {
                        return e(c)
                    }),
                        lt.traceViewSync(c)
                }
                ,
                e.prototype.registerUIView = function (e) {
                    lt.traceViewServiceUIViewEvent("-> Registering", e);
                    var t = this._uiViews;
                    return t.filter(function (t) {
                        return t.fqn === e.fqn && t.$type === e.$type
                    }).length && lt.traceViewServiceUIViewEvent("!!!! duplicate uiView named:", e),
                        t.push(e),
                        this.sync(),
                        function () {
                            -1 !== t.indexOf(e) ? (lt.traceViewServiceUIViewEvent("<- Deregistering", e),
                                J(t)(e)) : lt.traceViewServiceUIViewEvent("Tried removing non-registered uiView", e)
                        }
                }
                ,
                e.prototype.available = function () {
                    return this._uiViews.map(s("fqn"))
                }
                ,
                e.prototype.active = function () {
                    return this._uiViews.filter(s("$config")).map(s("name"))
                }
                ,
                e.matches = function (e, t) {
                    return function (n) {
                        if (t.$type !== n.viewDecl.$type)
                            return !1;
                        var i = n.viewDecl
                            , r = i.$uiViewName.split(".")
                            , o = t.fqn.split(".");
                        if (!z(r, o.slice(0 - r.length)))
                            return !1;
                        var a = 1 - r.length || void 0
                            , s = o.slice(0, a).join(".")
                            , l = e[s].creationContext;
                        return i.$uiViewContextAnchor === (l && l.name)
                    }
                }
                ,
                e
        }(), un = function () {
            function e() {
                this.params = new gt,
                    this.lastStartedTransitionId = -1,
                    this.transitionHistory = new Ae([], 1),
                    this.successfulTransitions = new Ae([], 1)
            }
            return e.prototype.dispose = function () {
                this.transitionHistory.clear(),
                    this.successfulTransitions.clear(),
                    this.transition = null
            }
                ,
                e
        }();
        function dn(e) {
            if (!(k(e) || E(e) || m(yt)(e) || yt.isDef(e)))
                throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");
            return k(e) ? e : v(e)
        }
        Qt = function (e, t) {
            var n, i, r, o, a, s, l, c, u = (n = e,
                (t.priority || 0) - (n.priority || 0));
            return 0 !== u ? u : (i = t,
                0 != (u = ((r = {
                    STATE: 4,
                    URLMATCHER: 4,
                    REGEXP: 3,
                    RAW: 2,
                    OTHER: 1
                })[e.type] || 0) - (r[i.type] || 0)) ? u : (a = t,
                    0 !== (u = (o = e).urlMatcher && a.urlMatcher ? tn.compare(o.urlMatcher, a.urlMatcher) : 0) ? u : (l = t,
                        (c = {
                            STATE: !0,
                            URLMATCHER: !0
                        })[(s = e).type] && c[l.type] ? 0 : (s.$id || 0) - (l.$id || 0))))
        }
            ;
        var pn = function () {
            function e(e) {
                this.router = e,
                    this._sortFn = Qt,
                    this._rules = [],
                    this._id = 0,
                    this.urlRuleFactory = new an(e)
            }
            return e.prototype.dispose = function (e) {
                this._rules = [],
                    delete this._otherwiseFn
            }
                ,
                e.prototype.initial = function (e) {
                    var t = dn(e);
                    this.rule(this.urlRuleFactory.create(function (e, t) {
                        return 0 === t.globals.transitionHistory.size() && !!/^\/?$/.exec(e.path)
                    }, t))
                }
                ,
                e.prototype.otherwise = function (e) {
                    var t = dn(e);
                    this._otherwiseFn = this.urlRuleFactory.create(v(!0), t),
                        this._sorted = !1
                }
                ,
                e.prototype.removeRule = function (e) {
                    J(this._rules, e)
                }
                ,
                e.prototype.rule = function (e) {
                    var t = this;
                    if (!an.isUrlRule(e))
                        throw new Error("invalid rule");
                    return e.$id = this._id++,
                        e.priority = e.priority || 0,
                        this._rules.push(e),
                        this._sorted = !1,
                        function () {
                            return t.removeRule(e)
                        }
                }
                ,
                e.prototype.rules = function () {
                    return this.ensureSorted(),
                        this._rules.concat(this._otherwiseFn ? [this._otherwiseFn] : [])
                }
                ,
                e.prototype.sort = function (e) {
                    for (var t = this.stableSort(this._rules, this._sortFn = e || this._sortFn), n = 0, i = 0; i < t.length; i++)
                        t[i]._group = n,
                            i < t.length - 1 && 0 !== this._sortFn(t[i], t[i + 1]) && n++;
                    this._rules = t,
                        this._sorted = !0
                }
                ,
                e.prototype.ensureSorted = function () {
                    this._sorted || this.sort()
                }
                ,
                e.prototype.stableSort = function (e, t) {
                    var n = e.map(function (e, t) {
                        return {
                            elem: e,
                            idx: t
                        }
                    });
                    return n.sort(function (e, n) {
                        var i = t(e.elem, n.elem);
                        return 0 === i ? e.idx - n.idx : i
                    }),
                        n.map(function (e) {
                            return e.elem
                        })
                }
                ,
                e.prototype.when = function (e, t, n) {
                    var i = this.urlRuleFactory.create(e, t);
                    return C(n && n.priority) && (i.priority = n.priority),
                        this.rule(i),
                        i
                }
                ,
                e
        }()
            , hn = function () {
                function e(e) {
                    var t = this;
                    this.router = e,
                        this.paramTypes = new mt,
                        this._isCaseInsensitive = !1,
                        this._isStrictMode = !0,
                        this._defaultSquashPolicy = !1,
                        this.dispose = function () {
                            return t.paramTypes.dispose()
                        }
                        ,
                        this.baseHref = function () {
                            return t.router.locationConfig.baseHref()
                        }
                        ,
                        this.hashPrefix = function (e) {
                            return t.router.locationConfig.hashPrefix(e)
                        }
                        ,
                        this.host = function () {
                            return t.router.locationConfig.host()
                        }
                        ,
                        this.html5Mode = function () {
                            return t.router.locationConfig.html5Mode()
                        }
                        ,
                        this.port = function () {
                            return t.router.locationConfig.port()
                        }
                        ,
                        this.protocol = function () {
                            return t.router.locationConfig.protocol()
                        }
                }
                return e.prototype.caseInsensitive = function (e) {
                    return this._isCaseInsensitive = C(e) ? e : this._isCaseInsensitive
                }
                    ,
                    e.prototype.defaultSquashPolicy = function (e) {
                        if (C(e) && !0 !== e && !1 !== e && !E(e))
                            throw new Error("Invalid squash policy: " + e + ". Valid policies: false, true, arbitrary-string");
                        return this._defaultSquashPolicy = C(e) ? e : this._defaultSquashPolicy
                    }
                    ,
                    e.prototype.strictMode = function (e) {
                        return this._isStrictMode = C(e) ? e : this._isStrictMode
                    }
                    ,
                    e.prototype.type = function (e, t, n) {
                        var i = this.paramTypes.type(e, t, n);
                        return C(t) ? this : i
                    }
                    ,
                    e
            }()
            , fn = function () {
                function e(e) {
                    var t = this;
                    this.router = e,
                        this.interceptDeferred = !1,
                        this.rules = new pn(this.router),
                        this.config = new hn(this.router),
                        this.url = function (e, n, i) {
                            return t.router.locationService.url(e, n, i)
                        }
                        ,
                        this.path = function () {
                            return t.router.locationService.path()
                        }
                        ,
                        this.search = function () {
                            return t.router.locationService.search()
                        }
                        ,
                        this.hash = function () {
                            return t.router.locationService.hash()
                        }
                        ,
                        this.onChange = function (e) {
                            return t.router.locationService.onChange(e)
                        }
                }
                return e.prototype.dispose = function () {
                    this.listen(!1),
                        this.rules.dispose()
                }
                    ,
                    e.prototype.parts = function () {
                        return {
                            path: this.path(),
                            search: this.search(),
                            hash: this.hash()
                        }
                    }
                    ,
                    e.prototype.sync = function (e) {
                        if (!e || !e.defaultPrevented) {
                            var t = this.router
                                , n = t.urlService
                                , i = t.stateService
                                , r = {
                                    path: n.path(),
                                    search: n.search(),
                                    hash: n.hash()
                                }
                                , o = this.match(r);
                            b([[E, function (e) {
                                return n.url(e, !0)
                            }
                            ], [yt.isDef, function (e) {
                                return i.go(e.state, e.params, e.options)
                            }
                            ], [m(yt), function (e) {
                                return i.go(e.state(), e.params(), e.options())
                            }
                            ]])(o && o.rule.handler(o.match, r, this.router))
                        }
                    }
                    ,
                    e.prototype.listen = function (e) {
                        var t = this;
                        if (!1 !== e)
                            return this._stopListeningFn = this._stopListeningFn || this.router.urlService.onChange(function (e) {
                                return t.sync(e)
                            });
                        this._stopListeningFn && this._stopListeningFn(),
                            delete this._stopListeningFn
                    }
                    ,
                    e.prototype.deferIntercept = function (e) {
                        void 0 === e && (e = !0),
                            this.interceptDeferred = e
                    }
                    ,
                    e.prototype.match = function (e) {
                        e = V({
                            path: "",
                            search: {},
                            hash: ""
                        }, e);
                        for (var t, n, i, r = this.rules.rules(), o = 0; o < r.length && (!t || t.rule._group === r[o]._group); o++) {
                            var a = (i = (n = r[o]).match(e, this.router)) && {
                                match: i,
                                rule: n,
                                weight: n.matchPriority(i)
                            };
                            t = !t || a && a.weight > t.weight ? a : t
                        }
                        return t
                    }
                    ,
                    e
            }()
            , mn = 0
            , gn = R("LocationServices", ["url", "path", "search", "hash", "onChange"])
            , vn = R("LocationConfig", ["port", "protocol", "host", "baseHref", "html5Mode", "hashPrefix"])
            , yn = function () {
                function e(e, t) {
                    void 0 === e && (e = gn),
                        void 0 === t && (t = vn),
                        this.locationService = e,
                        this.locationConfig = t,
                        this.$id = mn++,
                        this._disposed = !1,
                        this._disposables = [],
                        this.trace = lt,
                        this.viewService = new cn(this),
                        this.globals = new un,
                        this.transitionService = new Fn(this),
                        this.urlMatcherFactory = new on(this),
                        this.urlRouter = new ln(this),
                        this.urlService = new fn(this),
                        this.stateRegistry = new Vt(this),
                        this.stateService = new Bn(this),
                        this._plugins = {},
                        this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),
                        this.globals.$current = this.stateRegistry.root(),
                        this.globals.current = this.globals.$current.self,
                        this.disposable(this.globals),
                        this.disposable(this.stateService),
                        this.disposable(this.stateRegistry),
                        this.disposable(this.transitionService),
                        this.disposable(this.urlService),
                        this.disposable(e),
                        this.disposable(t)
                }
                return e.prototype.disposable = function (e) {
                    this._disposables.push(e)
                }
                    ,
                    e.prototype.dispose = function (e) {
                        var t = this;
                        e && k(e.dispose) ? e.dispose(this) : (this._disposed = !0,
                            this._disposables.slice().forEach(function (e) {
                                try {
                                    "function" == typeof e.dispose && e.dispose(t),
                                        J(t._disposables, e)
                                } catch (e) { }
                            }))
                    }
                    ,
                    e.prototype.plugin = function (e, t) {
                        void 0 === t && (t = {});
                        var n = new e(this, t);
                        if (!n.name)
                            throw new Error("Required property `name` missing on plugin: " + n);
                        return this._disposables.push(n),
                            this._plugins[n.name] = n
                    }
                    ,
                    e.prototype.getPlugin = function (e) {
                        return e ? this._plugins[e] : de(this._plugins)
                    }
                    ,
                    e
            }();
        function bn(e) {
            e.addResolvable(St.fromData(yn, e.router), ""),
                e.addResolvable(St.fromData(Jt, e), ""),
                e.addResolvable(St.fromData("$transition$", e), ""),
                e.addResolvable(St.fromData("$stateParams", e.params()), ""),
                e.entering().forEach(function (t) {
                    e.addResolvable(St.fromData("$state$", t), t)
                })
        }
        var wn = Y(["$transition$", Jt])
            , $n = function (e) {
                var t = function (e) {
                    return wn(e.token) ? St.fromData(e.token, null) : e
                };
                de(e.treeChanges()).reduce(fe, []).reduce(ve, []).forEach(function (e) {
                    e.resolvables = e.resolvables.map(t)
                })
            }
            , Sn = function (e) {
                var t = e.to().redirectTo;
                if (t) {
                    var n = e.router.stateService;
                    return k(t) ? L.$q.when(t(e)).then(i) : i(t)
                }
                function i(t) {
                    if (t)
                        return t instanceof yt ? t : E(t) ? n.target(t, e.params(), e.options()) : t.state || t.params ? n.target(t.state || e.to(), t.params || e.params(), e.options()) : void 0
                }
            };
        function Cn(e) {
            return function (t, n) {
                return (0,
                    n.$$state()[e])(t, n)
            }
        }
        var xn = Cn("onExit")
            , Tn = Cn("onRetain")
            , kn = Cn("onEnter")
            , Pn = function (e) {
                return new Pt(e.treeChanges().to).resolvePath("EAGER", e).then(W)
            }
            , En = function (e, t) {
                return new Pt(e.treeChanges().to).subContext(t.$$state()).resolvePath("LAZY", e).then(W)
            }
            , In = function (e) {
                return new Pt(e.treeChanges().to).resolvePath("LAZY", e).then(W)
            }
            , Mn = function (e) {
                var t = L.$q
                    , n = e.views("entering");
                if (n.length)
                    return t.all(n.map(function (e) {
                        return t.when(e.load())
                    })).then(W)
            }
            , On = function (e) {
                var t = e.views("entering")
                    , n = e.views("exiting");
                if (t.length || n.length) {
                    var i = e.router.viewService;
                    n.forEach(function (e) {
                        return i.deactivateViewConfig(e)
                    }),
                        t.forEach(function (e) {
                            return i.activateViewConfig(e)
                        }),
                        i.sync()
                }
            }
            , Dn = function (e) {
                var t = e.router.globals
                    , n = function () {
                        t.transition === e && (t.transition = null)
                    };
                e.onSuccess({}, function () {
                    t.successfulTransitions.enqueue(e),
                        t.$current = e.$to(),
                        t.current = t.$current.self,
                        Pe(e.params(), t.params)
                }, {
                    priority: 1e4
                }),
                    e.promise.then(n, n)
            }
            , An = function (e) {
                var t = e.options()
                    , n = e.router.stateService
                    , i = e.router.urlRouter;
                if ("url" !== t.source && t.location && n.$current.navigable) {
                    var r = {
                        replace: "replace" === t.location
                    };
                    i.push(n.$current.navigable.url, n.params, r)
                }
                i.update(!0)
            }
            , _n = function (e) {
                var t = e.router
                    , n = e.entering().filter(function (e) {
                        return !!e.$$state().lazyLoad
                    }).map(function (t) {
                        return Rn(e, t)
                    });
                return L.$q.all(n).then(function () {
                    if ("url" !== e.originalTransition().options().source) {
                        var n = e.targetState();
                        return t.stateService.target(n.identifier(), n.params(), n.options())
                    }
                    var i = t.urlService
                        , r = i.match(i.parts())
                        , o = r && r.rule;
                    if (o && "STATE" === o.type) {
                        var a = o.state
                            , s = r.match;
                        return t.stateService.target(a, s, e.options())
                    }
                    t.urlService.sync()
                })
            };
        function Rn(e, t) {
            var n = t.$$state().lazyLoad
                , i = n._promise;
            return i || (i = n._promise = L.$q.when(n(e, t)).then(function (t) {
                return t && Array.isArray(t.states) && t.states.forEach(function (t) {
                    return e.router.stateRegistry.register(t)
                }),
                    t
            }).then(function (e) {
                return delete t.lazyLoad,
                    delete t.$$state().lazyLoad,
                    delete n._promise,
                    e
            }, function (e) {
                return delete n._promise,
                    L.$q.reject(e)
            })),
                i
        }
        var Ln = function (e, t, n, i, r, o, a, s) {
            void 0 === r && (r = !1),
                void 0 === o && (o = Ht.HANDLE_RESULT),
                void 0 === a && (a = Ht.REJECT_ERROR),
                void 0 === s && (s = !1),
                this.name = e,
                this.hookPhase = t,
                this.hookOrder = n,
                this.criteriaMatchPath = i,
                this.reverseSort = r,
                this.getResultHandler = o,
                this.getErrorHandler = a,
                this.synchronous = s
        };
        function Un(e) {
            var t = e._ignoredReason();
            if (t) {
                lt.traceTransitionIgnored(e);
                var n = e.router.globals.transition;
                return "SameAsCurrent" === t && n && n.abort(),
                    Re.ignored().toPromise()
            }
        }
        function Nn(e) {
            if (!e.valid())
                throw new Error(e.error().toString())
        }
        var jn = {
            location: !0,
            relative: null,
            inherit: !1,
            notify: !0,
            reload: !1,
            custom: {},
            current: function () {
                return null
            },
            source: "unknown"
        }
            , Fn = function () {
                function t(e) {
                    this._transitionCount = 0,
                        this._eventTypes = [],
                        this._registeredHooks = {},
                        this._criteriaPaths = {},
                        this._router = e,
                        this.$view = e.viewService,
                        this._deregisterHookFns = {},
                        this._pluginapi = q(v(this), {}, v(this), ["_definePathType", "_defineEvent", "_getPathTypes", "_getEvents", "getHooks"]),
                        this._defineCorePaths(),
                        this._defineCoreEvents(),
                        this._registerCoreTransitionHooks(),
                        e.globals.successfulTransitions.onEvict($n)
                }
                return t.prototype.onCreate = function (e, t, n) { }
                    ,
                    t.prototype.onBefore = function (e, t, n) { }
                    ,
                    t.prototype.onStart = function (e, t, n) { }
                    ,
                    t.prototype.onExit = function (e, t, n) { }
                    ,
                    t.prototype.onRetain = function (e, t, n) { }
                    ,
                    t.prototype.onEnter = function (e, t, n) { }
                    ,
                    t.prototype.onFinish = function (e, t, n) { }
                    ,
                    t.prototype.onSuccess = function (e, t, n) { }
                    ,
                    t.prototype.onError = function (e, t, n) { }
                    ,
                    t.prototype.dispose = function (e) {
                        de(this._registeredHooks).forEach(function (e) {
                            return e.forEach(function (t) {
                                t._deregistered = !0,
                                    J(e, t)
                            })
                        })
                    }
                    ,
                    t.prototype.create = function (e, t) {
                        return new Jt(e, t, this._router)
                    }
                    ,
                    t.prototype._defineCoreEvents = function () {
                        var t = e.TransitionHookPhase
                            , n = Ht
                            , i = this._criteriaPaths;
                        this._defineEvent("onCreate", t.CREATE, 0, i.to, !1, n.LOG_REJECTED_RESULT, n.THROW_ERROR, !0),
                            this._defineEvent("onBefore", t.BEFORE, 0, i.to),
                            this._defineEvent("onStart", t.RUN, 0, i.to),
                            this._defineEvent("onExit", t.RUN, 100, i.exiting, !0),
                            this._defineEvent("onRetain", t.RUN, 200, i.retained),
                            this._defineEvent("onEnter", t.RUN, 300, i.entering),
                            this._defineEvent("onFinish", t.RUN, 400, i.to),
                            this._defineEvent("onSuccess", t.SUCCESS, 0, i.to, !1, n.LOG_REJECTED_RESULT, n.LOG_ERROR, !0),
                            this._defineEvent("onError", t.ERROR, 0, i.to, !1, n.LOG_REJECTED_RESULT, n.LOG_ERROR, !0)
                    }
                    ,
                    t.prototype._defineCorePaths = function () {
                        var t = e.TransitionHookScope.STATE
                            , n = e.TransitionHookScope.TRANSITION;
                        this._definePathType("to", n),
                            this._definePathType("from", n),
                            this._definePathType("exiting", t),
                            this._definePathType("retained", t),
                            this._definePathType("entering", t)
                    }
                    ,
                    t.prototype._defineEvent = function (e, t, n, i, r, o, a, s) {
                        void 0 === r && (r = !1),
                            void 0 === o && (o = Ht.HANDLE_RESULT),
                            void 0 === a && (a = Ht.REJECT_ERROR),
                            void 0 === s && (s = !1);
                        var l = new Ln(e, t, n, i, r, o, a, s);
                        this._eventTypes.push(l),
                            Gt(this, this, l)
                    }
                    ,
                    t.prototype._getEvents = function (e) {
                        return (C(e) ? this._eventTypes.filter(function (t) {
                            return t.hookPhase === e
                        }) : this._eventTypes.slice()).sort(function (e, t) {
                            var n = e.hookPhase - t.hookPhase;
                            return 0 === n ? e.hookOrder - t.hookOrder : n
                        })
                    }
                    ,
                    t.prototype._definePathType = function (e, t) {
                        this._criteriaPaths[e] = {
                            name: e,
                            scope: t
                        }
                    }
                    ,
                    t.prototype._getPathTypes = function () {
                        return this._criteriaPaths
                    }
                    ,
                    t.prototype.getHooks = function (e) {
                        return this._registeredHooks[e]
                    }
                    ,
                    t.prototype._registerCoreTransitionHooks = function () {
                        var e = this._deregisterHookFns;
                        e.addCoreResolves = this.onCreate({}, bn),
                            e.ignored = this.onBefore({}, Un, {
                                priority: -9999
                            }),
                            e.invalid = this.onBefore({}, Nn, {
                                priority: -1e4
                            }),
                            e.redirectTo = this.onStart({
                                to: function (e) {
                                    return !!e.redirectTo
                                }
                            }, Sn),
                            e.onExit = this.onExit({
                                exiting: function (e) {
                                    return !!e.onExit
                                }
                            }, xn),
                            e.onRetain = this.onRetain({
                                retained: function (e) {
                                    return !!e.onRetain
                                }
                            }, Tn),
                            e.onEnter = this.onEnter({
                                entering: function (e) {
                                    return !!e.onEnter
                                }
                            }, kn),
                            e.eagerResolve = this.onStart({}, Pn, {
                                priority: 1e3
                            }),
                            e.lazyResolve = this.onEnter({
                                entering: v(!0)
                            }, En, {
                                priority: 1e3
                            }),
                            e.resolveAll = this.onFinish({}, In, {
                                priority: 1e3
                            }),
                            e.loadViews = this.onFinish({}, Mn),
                            e.activateViews = this.onSuccess({}, On),
                            e.updateGlobals = this.onCreate({}, Dn),
                            e.updateUrl = this.onSuccess({}, An, {
                                priority: 9999
                            }),
                            e.lazyLoad = this.onBefore({
                                entering: function (e) {
                                    return !!e.lazyLoad
                                }
                            }, _n)
                    }
                    ,
                    t
            }()
            , Bn = function () {
                function t(e) {
                    this.router = e,
                        this.invalidCallbacks = [],
                        this._defaultErrorHandler = function (e) {
                            e instanceof Error && e.stack ? (console.error(e),
                                console.error(e.stack)) : e instanceof Re ? (console.error(e.toString()),
                                    e.detail && e.detail.stack && console.error(e.detail.stack)) : console.error(e)
                        }
                        ;
                    var n = Object.keys(t.prototype).filter(u(Y(["current", "$current", "params", "transition"])));
                    q(v(t.prototype), this, v(this), n)
                }
                return Object.defineProperty(t.prototype, "transition", {
                    get: function () {
                        return this.router.globals.transition
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                    Object.defineProperty(t.prototype, "params", {
                        get: function () {
                            return this.router.globals.params
                        },
                        enumerable: !0,
                        configurable: !0
                    }),
                    Object.defineProperty(t.prototype, "current", {
                        get: function () {
                            return this.router.globals.current
                        },
                        enumerable: !0,
                        configurable: !0
                    }),
                    Object.defineProperty(t.prototype, "$current", {
                        get: function () {
                            return this.router.globals.$current
                        },
                        enumerable: !0,
                        configurable: !0
                    }),
                    t.prototype.dispose = function () {
                        this.defaultErrorHandler(W),
                            this.invalidCallbacks = []
                    }
                    ,
                    t.prototype._handleInvalidTargetState = function (e, t) {
                        var n = this
                            , i = bt.makeTargetState(this.router.stateRegistry, e)
                            , r = this.router.globals
                            , o = function () {
                                return r.transitionHistory.peekTail()
                            }
                            , a = o()
                            , s = new Ae(this.invalidCallbacks.slice())
                            , l = new Pt(e).injector()
                            , c = function (e) {
                                if (e instanceof yt) {
                                    var t = e;
                                    return (t = n.target(t.identifier(), t.params(), t.options())).valid() ? o() !== a ? Re.superseded().toPromise() : n.transitionTo(t.identifier(), t.params(), t.options()) : Re.invalid(t.error()).toPromise()
                                }
                            };
                        return function e() {
                            var n = s.dequeue();
                            return void 0 === n ? Re.invalid(t.error()).toPromise() : L.$q.when(n(t, i, l)).then(c).then(function (t) {
                                return t || e()
                            })
                        }()
                    }
                    ,
                    t.prototype.onInvalid = function (e) {
                        return this.invalidCallbacks.push(e),
                            function () {
                                J(this.invalidCallbacks)(e)
                            }
                                .bind(this)
                    }
                    ,
                    t.prototype.reload = function (e) {
                        return this.transitionTo(this.current, this.params, {
                            reload: !C(e) || e,
                            inherit: !1,
                            notify: !1
                        })
                    }
                    ,
                    t.prototype.go = function (e, t, n) {
                        var i = te(n, {
                            relative: this.$current,
                            inherit: !0
                        }, jn);
                        return this.transitionTo(e, t, i)
                    }
                    ,
                    t.prototype.target = function (e, t, n) {
                        if (void 0 === n && (n = {}),
                            I(n.reload) && !n.reload.name)
                            throw new Error("Invalid reload state object");
                        var i = this.router.stateRegistry;
                        if (n.reloadState = !0 === n.reload ? i.root() : i.matcher.find(n.reload, n.relative),
                            n.reload && !n.reloadState)
                            throw new Error("No such reload state '" + (E(n.reload) ? n.reload : n.reload.name) + "'");
                        return new yt(this.router.stateRegistry, e, t, n)
                    }
                    ,
                    t.prototype.getCurrentPath = function () {
                        var e = this.router.globals.successfulTransitions.peekTail();
                        return e ? e.treeChanges().to : [new vt(this.router.stateRegistry.root())]
                    }
                    ,
                    t.prototype.transitionTo = function (t, n, i) {
                        var r = this;
                        void 0 === n && (n = {}),
                            void 0 === i && (i = {});
                        var o = this.router
                            , a = o.globals;
                        i = te(i, jn),
                            i = V(i, {
                                current: function () {
                                    return a.transition
                                }
                            });
                        var s = this.target(t, n, i)
                            , l = this.getCurrentPath();
                        if (!s.exists())
                            return this._handleInvalidTargetState(l, s);
                        if (!s.valid())
                            return Oe(s.error());
                        var c = function (t) {
                            return function (n) {
                                if (n instanceof Re) {
                                    var i = o.globals.lastStartedTransitionId <= t.$id;
                                    if (n.type === e.RejectType.IGNORED)
                                        return i && o.urlRouter.update(),
                                            L.$q.when(a.current);
                                    var s = n.detail;
                                    if (n.type === e.RejectType.SUPERSEDED && n.redirected && s instanceof yt) {
                                        var l = t.redirect(s);
                                        return l.run().catch(c(l))
                                    }
                                    if (n.type === e.RejectType.ABORTED)
                                        return i && o.urlRouter.update(),
                                            L.$q.reject(n)
                                }
                                return r.defaultErrorHandler()(n),
                                    L.$q.reject(n)
                            }
                        }
                            , u = this.router.transitionService.create(l, s)
                            , d = u.run().catch(c(u));
                        return Me(d),
                            V(d, {
                                transition: u
                            })
                    }
                    ,
                    t.prototype.is = function (e, t, n) {
                        n = te(n, {
                            relative: this.$current
                        });
                        var i = this.router.stateRegistry.matcher.find(e, n.relative);
                        if (C(i)) {
                            if (this.$current !== i)
                                return !1;
                            if (!t)
                                return !0;
                            var r = i.parameters({
                                inherit: !0,
                                matchingKeys: t
                            });
                            return ft.equals(r, ft.values(r, t), this.params)
                        }
                    }
                    ,
                    t.prototype.includes = function (e, t, n) {
                        n = te(n, {
                            relative: this.$current
                        });
                        var i = E(e) && De.fromString(e);
                        if (i) {
                            if (!i.matches(this.$current.name))
                                return !1;
                            e = this.$current.name
                        }
                        var r = this.router.stateRegistry.matcher.find(e, n.relative)
                            , o = this.$current.includes;
                        if (C(r)) {
                            if (!C(o[r.name]))
                                return !1;
                            if (!t)
                                return !0;
                            var a = r.parameters({
                                inherit: !0,
                                matchingKeys: t
                            });
                            return ft.equals(a, ft.values(a, t), this.params)
                        }
                    }
                    ,
                    t.prototype.href = function (e, t, n) {
                        n = te(n, {
                            lossy: !0,
                            inherit: !0,
                            absolute: !1,
                            relative: this.$current
                        }),
                            t = t || {};
                        var i = this.router.stateRegistry.matcher.find(e, n.relative);
                        if (!C(i))
                            return null;
                        n.inherit && (t = this.params.$inherit(t, this.$current, i));
                        var r = i && n.lossy ? i.navigable : i;
                        return r && void 0 !== r.url && null !== r.url ? this.router.urlRouter.href(r.url, t, {
                            absolute: n.absolute
                        }) : null
                    }
                    ,
                    t.prototype.defaultErrorHandler = function (e) {
                        return this._defaultErrorHandler = e || this._defaultErrorHandler
                    }
                    ,
                    t.prototype.get = function (e, t) {
                        var n = this.router.stateRegistry;
                        return 0 === arguments.length ? n.get() : n.get(e, t || this.$current)
                    }
                    ,
                    t.prototype.lazyLoad = function (e, t) {
                        var n = this.get(e);
                        if (!n || !n.lazyLoad)
                            throw new Error("Can not lazy load " + e);
                        var i = this.getCurrentPath()
                            , r = bt.makeTargetState(this.router.stateRegistry, i);
                        return Rn(t = t || this.router.transitionService.create(i, r), n)
                    }
                    ,
                    t
            }()
            , Vn = {
                when: function (e) {
                    return new Promise(function (t, n) {
                        return t(e)
                    }
                    )
                },
                reject: function (e) {
                    return new Promise(function (t, n) {
                        n(e)
                    }
                    )
                },
                defer: function () {
                    var e = {};
                    return e.promise = new Promise(function (t, n) {
                        e.resolve = t,
                            e.reject = n
                    }
                    ),
                        e
                },
                all: function (e) {
                    if (M(e))
                        return Promise.all(e);
                    if (I(e)) {
                        var t = Object.keys(e).map(function (t) {
                            return e[t].then(function (e) {
                                return {
                                    key: t,
                                    val: e
                                }
                            })
                        });
                        return Vn.all(t).then(function (e) {
                            return e.reduce(function (e, t) {
                                return e[t.key] = t.val,
                                    e
                            }, {})
                        })
                    }
                }
            }
            , zn = {}
            , Hn = /((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm
            , Wn = /([^\s,]+)/g
            , qn = {
                get: function (e) {
                    return zn[e]
                },
                has: function (e) {
                    return null != qn.get(e)
                },
                invoke: function (e, t, n) {
                    var i = V({}, zn, n || {})
                        , r = qn.annotate(e)
                        , o = we(function (e) {
                            return i.hasOwnProperty(e)
                        }, function (e) {
                            return "DI can't find injectable: '" + e + "'"
                        })
                        , a = r.filter(o).map(function (e) {
                            return i[e]
                        });
                    return k(e) ? e.apply(t, a) : e.slice(-1)[0].apply(t, a)
                },
                annotate: function (e) {
                    if (!A(e))
                        throw new Error("Not an injectable function: " + e);
                    if (e && e.$inject)
                        return e.$inject;
                    if (M(e))
                        return e.slice(0, -1);
                    var t = e.toString().replace(Hn, "");
                    return t.slice(t.indexOf("(") + 1, t.indexOf(")")).match(Wn) || []
                }
            }
            , Gn = function (e, t) {
                var n = t[0]
                    , i = t[1];
                return e.hasOwnProperty(n) ? M(e[n]) ? e[n].push(i) : e[n] = [e[n], i] : e[n] = i,
                    e
            }
            , Yn = function (e) {
                return e.split("&").filter(H).map(Xe).reduce(Gn, {})
            };
        function Xn(e) {
            var t = function (e) {
                return e || ""
            }
                , n = Ge(e).map(t)
                , i = n[0]
                , r = n[1]
                , o = Ye(i).map(t);
            return {
                path: o[0],
                search: o[1],
                hash: r,
                url: e
            }
        }
        var Jn = function (e) {
            var t = e.path()
                , n = e.search()
                , i = e.hash()
                , r = Object.keys(n).map(function (e) {
                    var t = n[e];
                    return (M(t) ? t : [t]).map(function (t) {
                        return e + "=" + t
                    })
                }).reduce(fe, []).join("&");
            return t + (r ? "?" + r : "") + (i ? "#" + i : "")
        };
        function Kn(e, t, n, i) {
            return function (r) {
                var o = r.locationService = new n(r)
                    , a = r.locationConfig = new i(r, t);
                return {
                    name: e,
                    service: o,
                    configuration: a,
                    dispose: function (e) {
                        e.dispose(o),
                            e.dispose(a)
                    }
                }
            }
        }
        var Qn, Zn, ei, ti = function () {
            function e(e, t) {
                var n = this;
                this.fireAfterUpdate = t,
                    this._listeners = [],
                    this._listener = function (e) {
                        return n._listeners.forEach(function (t) {
                            return t(e)
                        })
                    }
                    ,
                    this.hash = function () {
                        return Xn(n._get()).hash
                    }
                    ,
                    this.path = function () {
                        return Xn(n._get()).path
                    }
                    ,
                    this.search = function () {
                        return Yn(Xn(n._get()).search)
                    }
                    ,
                    this._location = U.location,
                    this._history = U.history
            }
            return e.prototype.url = function (e, t) {
                return void 0 === t && (t = !0),
                    C(e) && e !== this._get() && (this._set(null, null, e, t),
                        this.fireAfterUpdate && this._listeners.forEach(function (t) {
                            return t({
                                url: e
                            })
                        })),
                    Jn(this)
            }
                ,
                e.prototype.onChange = function (e) {
                    var t = this;
                    return this._listeners.push(e),
                        function () {
                            return J(t._listeners, e)
                        }
                }
                ,
                e.prototype.dispose = function (e) {
                    ee(this._listeners)
                }
                ,
                e
        }(), ni = (Qn = function (e, t) {
            return (Qn = Object.setPrototypeOf || {
                __proto__: []
            } instanceof Array && function (e, t) {
                e.__proto__ = t
            }
                || function (e, t) {
                    for (var n in t)
                        t.hasOwnProperty(n) && (e[n] = t[n])
                }
            )(e, t)
        }
            ,
            function (e, t) {
                function n() {
                    this.constructor = e
                }
                Qn(e, t),
                    e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                        new n)
            }
        ), ii = function (e) {
            function t(t) {
                var n = e.call(this, t, !1) || this;
                return U.addEventListener("hashchange", n._listener, !1),
                    n
            }
            return ni(t, e),
                t.prototype._get = function () {
                    return Je(this._location.hash)
                }
                ,
                t.prototype._set = function (e, t, n, i) {
                    this._location.hash = n
                }
                ,
                t.prototype.dispose = function (t) {
                    e.prototype.dispose.call(this, t),
                        U.removeEventListener("hashchange", this._listener)
                }
                ,
                t
        }(ti), ri = (Zn = function (e, t) {
            return (Zn = Object.setPrototypeOf || {
                __proto__: []
            } instanceof Array && function (e, t) {
                e.__proto__ = t
            }
                || function (e, t) {
                    for (var n in t)
                        t.hasOwnProperty(n) && (e[n] = t[n])
                }
            )(e, t)
        }
            ,
            function (e, t) {
                function n() {
                    this.constructor = e
                }
                Zn(e, t),
                    e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                        new n)
            }
        ), oi = function (e) {
            function t(t) {
                return e.call(this, t, !0) || this
            }
            return ri(t, e),
                t.prototype._get = function () {
                    return this._url
                }
                ,
                t.prototype._set = function (e, t, n, i) {
                    this._url = n
                }
                ,
                t
        }(ti), ai = (ei = function (e, t) {
            return (ei = Object.setPrototypeOf || {
                __proto__: []
            } instanceof Array && function (e, t) {
                e.__proto__ = t
            }
                || function (e, t) {
                    for (var n in t)
                        t.hasOwnProperty(n) && (e[n] = t[n])
                }
            )(e, t)
        }
            ,
            function (e, t) {
                function n() {
                    this.constructor = e
                }
                ei(e, t),
                    e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                        new n)
            }
        ), si = function (e) {
            function t(t) {
                var n = e.call(this, t, !0) || this;
                return n._config = t.urlService.config,
                    U.addEventListener("popstate", n._listener, !1),
                    n
            }
            return ai(t, e),
                t.prototype._getBasePrefix = function () {
                    return qe(this._config.baseHref())
                }
                ,
                t.prototype._get = function () {
                    var e = this._location
                        , t = e.pathname
                        , n = e.hash
                        , i = e.search;
                    i = Ye(i)[1],
                        n = Ge(n)[1];
                    var r = this._getBasePrefix()
                        , o = t === this._config.baseHref()
                        , a = t.substr(0, r.length) === r;
                    return (t = o ? "/" : a ? t.substring(r.length) : t) + (i ? "?" + i : "") + (n ? "#" + n : "")
                }
                ,
                t.prototype._set = function (e, t, n, i) {
                    var r = this._getBasePrefix()
                        , o = n && "/" !== n[0] ? "/" : ""
                        , a = "" === n || "/" === n ? this._config.baseHref() : r + o + n;
                    i ? this._history.replaceState(e, t, a) : this._history.pushState(e, t, a)
                }
                ,
                t.prototype.dispose = function (t) {
                    e.prototype.dispose.call(this, t),
                        U.removeEventListener("popstate", this._listener)
                }
                ,
                t
        }(ti), li = function () {
            var e = this;
            this.dispose = W,
                this._baseHref = "",
                this._port = 80,
                this._protocol = "http",
                this._host = "localhost",
                this._hashPrefix = "",
                this.port = function () {
                    return e._port
                }
                ,
                this.protocol = function () {
                    return e._protocol
                }
                ,
                this.host = function () {
                    return e._host
                }
                ,
                this.baseHref = function () {
                    return e._baseHref
                }
                ,
                this.html5Mode = function () {
                    return !1
                }
                ,
                this.hashPrefix = function (t) {
                    return C(t) ? e._hashPrefix = t : e._hashPrefix
                }
        }, ci = function () {
            function e(e, t) {
                void 0 === t && (t = !1),
                    this._isHtml5 = t,
                    this._baseHref = void 0,
                    this._hashPrefix = ""
            }
            return e.prototype.port = function () {
                return location.port ? Number(location.port) : "https" === this.protocol() ? 443 : 80
            }
                ,
                e.prototype.protocol = function () {
                    return location.protocol.replace(/:/g, "")
                }
                ,
                e.prototype.host = function () {
                    return location.hostname
                }
                ,
                e.prototype.html5Mode = function () {
                    return this._isHtml5
                }
                ,
                e.prototype.hashPrefix = function (e) {
                    return C(e) ? this._hashPrefix = e : this._hashPrefix
                }
                ,
                e.prototype.baseHref = function (e) {
                    return C(e) && (this._baseHref = e),
                        S(this._baseHref) && (this._baseHref = this.getBaseHref()),
                        this._baseHref
                }
                ,
                e.prototype.getBaseHref = function () {
                    var e = document.getElementsByTagName("base")[0];
                    return e && e.href ? e.href.replace(/^([^/:]*:)?\/\/[^/]*/, "") : this._isHtml5 ? "/" : location.pathname || "/"
                }
                ,
                e.prototype.dispose = function () { }
                ,
                e
        }();
        function ui(e) {
            return L.$injector = qn,
            {
                name: "vanilla.services",
                $q: L.$q = Vn,
                $injector: qn,
                dispose: function () {
                    return null
                }
            }
        }
        var di = Kn("vanilla.hashBangLocation", !1, ii, ci)
            , pi = Kn("vanilla.pushStateLocation", !0, si, ci)
            , hi = Kn("vanilla.memoryLocation", !1, oi, li)
            , fi = function () {
                function e() { }
                return e.prototype.dispose = function (e) { }
                    ,
                    e
            }()
            , mi = Object.freeze({
                root: U,
                fromJson: j,
                toJson: F,
                forEach: B,
                extend: V,
                equals: z,
                identity: H,
                noop: W,
                createProxyFunctions: q,
                inherit: G,
                inArray: Y,
                _inArray: X,
                removeFrom: J,
                _removeFrom: K,
                pushTo: Q,
                _pushTo: Z,
                deregAll: ee,
                defaults: te,
                mergeR: ne,
                ancestors: ie,
                pick: re,
                omit: oe,
                pluck: ae,
                filter: se,
                find: le,
                mapObj: ce,
                map: ue,
                values: de,
                allTrueR: pe,
                anyTrueR: he,
                unnestR: fe,
                flattenR: me,
                pushR: ge,
                uniqR: ve,
                unnest: ye,
                flatten: be,
                assertPredicate: we,
                assertMap: $e,
                assertFn: Se,
                pairs: Ce,
                arrayTuples: xe,
                applyPairs: Te,
                tail: ke,
                copy: Pe,
                _extend: Ee,
                silenceUncaughtInPromise: Me,
                silentRejection: Oe,
                makeStub: R,
                services: L,
                Glob: De,
                curry: r,
                compose: o,
                pipe: a,
                prop: s,
                propEq: l,
                parse: c,
                not: u,
                and: d,
                or: p,
                all: h,
                any: f,
                is: m,
                eq: g,
                val: v,
                invoke: y,
                pattern: b,
                isUndefined: S,
                isDefined: C,
                isNull: x,
                isNullOrUndefined: T,
                isFunction: k,
                isNumber: P,
                isString: E,
                isObject: I,
                isArray: M,
                isDate: O,
                isRegExp: D,
                isInjectable: A,
                isPromise: _,
                Queue: Ae,
                maxLength: Le,
                padString: Ue,
                kebobString: Ne,
                functionToString: je,
                fnToString: Fe,
                stringify: ze,
                beforeAfterSubstr: He,
                hostRegex: We,
                stripLastPathElement: qe,
                splitHash: Ge,
                splitQuery: Ye,
                splitEqual: Xe,
                trimHashVal: Je,
                splitOnDelim: Ke,
                joinNeighborsR: Qe,
                get Category() {
                    return e.Category
                },
                Trace: st,
                trace: lt,
                get DefType() {
                    return e.DefType
                },
                Param: ft,
                ParamTypes: mt,
                StateParams: gt,
                ParamType: ct,
                PathNode: vt,
                PathUtils: bt,
                resolvePolicies: wt,
                defaultResolvePolicy: $t,
                Resolvable: St,
                NATIVE_INJECTOR_TOKEN: kt,
                ResolveContext: Pt,
                resolvablesBuilder: Rt,
                StateBuilder: Nt,
                StateObject: jt,
                StateMatcher: Ft,
                StateQueueManager: Bt,
                StateRegistry: Vt,
                StateService: Bn,
                TargetState: yt,
                get TransitionHookPhase() {
                    return e.TransitionHookPhase
                },
                get TransitionHookScope() {
                    return e.TransitionHookScope
                },
                HookBuilder: Yt,
                matchState: Wt,
                RegisteredHook: qt,
                makeEvent: Gt,
                get RejectType() {
                    return e.RejectType
                },
                Rejection: Re,
                Transition: Jt,
                TransitionHook: Ht,
                TransitionEventType: Ln,
                defaultTransOpts: jn,
                TransitionService: Fn,
                UrlRules: pn,
                UrlConfig: hn,
                UrlMatcher: tn,
                ParamFactory: rn,
                UrlMatcherFactory: on,
                UrlRouter: ln,
                UrlRuleFactory: an,
                BaseUrlRule: sn,
                UrlService: fn,
                ViewService: cn,
                UIRouterGlobals: un,
                UIRouter: yn,
                $q: Vn,
                $injector: qn,
                BaseLocationServices: ti,
                HashLocationService: ii,
                MemoryLocationService: oi,
                PushStateLocationService: si,
                MemoryLocationConfig: li,
                BrowserLocationConfig: ci,
                keyValsToObjectR: Gn,
                getParams: Yn,
                parseUrl: Xn,
                buildUrl: Jn,
                locationPluginFactory: Kn,
                servicesPlugin: ui,
                hashLocationPlugin: di,
                pushStateLocationPlugin: pi,
                memoryLocationPlugin: hi,
                UIRouterPluginBase: fi
            });
        function gi() {
            var e = null;
            return function (t, n) {
                return e = e || L.$injector.get("$templateFactory"),
                    [new wi(t, n, e)]
            }
        }
        var vi = function (e, t) {
            return e.reduce(function (e, n) {
                return e || C(t[n])
            }, !1)
        };
        function yi(e) {
            if (!e.parent)
                return {};
            var t = ["component", "bindings", "componentProvider"]
                , n = ["templateProvider", "templateUrl", "template", "notify", "async"].concat(["controller", "controllerProvider", "controllerAs", "resolveAs"])
                , i = t.concat(n);
            if (C(e.views) && vi(i, e))
                throw new Error("State '" + e.name + "' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  " + i.filter(function (t) {
                    return C(e[t])
                }).join(", "));
            var r = {}
                , o = e.views || {
                    $default: re(e, i)
                };
            return B(o, function (i, o) {
                if (o = o || "$default",
                    E(i) && (i = {
                        component: i
                    }),
                    i = V({}, i),
                    vi(t, i) && vi(n, i))
                    throw new Error("Cannot combine: " + t.join("|") + " with: " + n.join("|") + " in stateview: '" + o + "@" + e.name + "'");
                i.resolveAs = i.resolveAs || "$resolve",
                    i.$type = "ng1",
                    i.$context = e,
                    i.$name = o;
                var a = cn.normalizeUIViewTarget(i.$context, i.$name);
                i.$uiViewName = a.uiViewName,
                    i.$uiViewContextAnchor = a.uiViewContextAnchor,
                    r[o] = i
            }),
                r
        }
        var bi = 0
            , wi = function () {
                function e(e, t, n) {
                    var i = this;
                    this.path = e,
                        this.viewDecl = t,
                        this.factory = n,
                        this.$id = bi++,
                        this.loaded = !1,
                        this.getTemplate = function (e, t) {
                            return i.component ? i.factory.makeComponentTemplate(e, t, i.component, i.viewDecl.bindings) : i.template
                        }
                }
                return e.prototype.load = function () {
                    var e = this
                        , t = L.$q
                        , n = new Pt(this.path)
                        , i = this.path.reduce(function (e, t) {
                            return V(e, t.paramValues)
                        }, {})
                        , r = {
                            template: t.when(this.factory.fromConfig(this.viewDecl, i, n)),
                            controller: t.when(this.getController(n))
                        };
                    return t.all(r).then(function (t) {
                        return lt.traceViewServiceEvent("Loaded", e),
                            e.controller = t.controller,
                            V(e, t.template),
                            e
                    })
                }
                    ,
                    e.prototype.getController = function (e) {
                        var t = this.viewDecl.controllerProvider;
                        if (!A(t))
                            return this.viewDecl.controller;
                        var n = L.$injector.annotate(t)
                            , i = M(t) ? ke(t) : t;
                        return new St("", i, n).get(e)
                    }
                    ,
                    e
            }()
            , $i = function () {
                function e() {
                    var e = this;
                    this._useHttp = i.version.minor < 3,
                        this.$get = ["$http", "$templateCache", "$injector", function (t, n, i) {
                            return e.$templateRequest = i.has && i.has("$templateRequest") && i.get("$templateRequest"),
                                e.$http = t,
                                e.$templateCache = n,
                                e
                        }
                        ]
                }
                return e.prototype.useHttpService = function (e) {
                    this._useHttp = e
                }
                    ,
                    e.prototype.fromConfig = function (e, t, n) {
                        var i = function (e) {
                            return L.$q.when(e).then(function (e) {
                                return {
                                    template: e
                                }
                            })
                        }
                            , r = function (e) {
                                return L.$q.when(e).then(function (e) {
                                    return {
                                        component: e
                                    }
                                })
                            };
                        return C(e.template) ? i(this.fromString(e.template, t)) : C(e.templateUrl) ? i(this.fromUrl(e.templateUrl, t)) : C(e.templateProvider) ? i(this.fromProvider(e.templateProvider, t, n)) : C(e.component) ? r(e.component) : C(e.componentProvider) ? r(this.fromComponentProvider(e.componentProvider, t, n)) : i("<ui-view></ui-view>")
                    }
                    ,
                    e.prototype.fromString = function (e, t) {
                        return k(e) ? e(t) : e
                    }
                    ,
                    e.prototype.fromUrl = function (e, t) {
                        return k(e) && (e = e(t)),
                            null == e ? null : this._useHttp ? this.$http.get(e, {
                                cache: this.$templateCache,
                                headers: {
                                    Accept: "text/html"
                                }
                            }).then(function (e) {
                                return e.data
                            }) : this.$templateRequest(e)
                    }
                    ,
                    e.prototype.fromProvider = function (e, t, n) {
                        var i = L.$injector.annotate(e)
                            , r = M(e) ? ke(e) : e;
                        return new St("", r, i).get(n)
                    }
                    ,
                    e.prototype.fromComponentProvider = function (e, t, n) {
                        var i = L.$injector.annotate(e)
                            , r = M(e) ? ke(e) : e;
                        return new St("", r, i).get(n)
                    }
                    ,
                    e.prototype.makeComponentTemplate = function (e, t, n, r) {
                        r = r || {};
                        var o = 3 <= i.version.minor ? "::" : ""
                            , a = function (e) {
                                var t = Ne(e);
                                return /^(x|data)-/.exec(t) ? "x-" + t : t
                            }
                            , s = function (e) {
                                var t = L.$injector.get(e + "Directive");
                                if (!t || !t.length)
                                    throw new Error("Unable to find component named '" + e + "'");
                                return t.map(Si).reduce(fe, [])
                            }(n).map(function (n) {
                                var i = n.name
                                    , s = n.type
                                    , l = a(i);
                                if (e.attr(l) && !r[i])
                                    return l + "='" + e.attr(l) + "'";
                                var c = r[i] || i;
                                if ("@" === s)
                                    return l + "='{{" + o + "$resolve." + c + "}}'";
                                if ("&" !== s)
                                    return l + "='" + o + "$resolve." + c + "'";
                                var u = t.getResolvable(c)
                                    , d = u && u.data
                                    , p = d && L.$injector.annotate(d) || [];
                                return l + "='$resolve." + c + (M(d) ? "[" + (d.length - 1) + "]" : "") + "(" + p.join(",") + ")'"
                            }).join(" ")
                            , l = a(n);
                        return "<" + l + " " + s + "></" + l + ">"
                    }
                    ,
                    e
            }()
            , Si = function (e) {
                return I(e.bindToController) ? Ci(e.bindToController) : Ci(e.scope)
            }
            , Ci = function (e) {
                return Object.keys(e || {}).map(function (t) {
                    return [t, /^([=<@&])[?]?(.*)/.exec(e[t])]
                }).filter(function (e) {
                    return C(e) && M(e[1])
                }).map(function (e) {
                    return {
                        name: e[1][2] || e[0],
                        type: e[1][1]
                    }
                })
            }
            , xi = function () {
                function e(t, n) {
                    this.stateRegistry = t,
                        this.stateService = n,
                        q(v(e.prototype), this, v(this))
                }
                return e.prototype.decorator = function (e, t) {
                    return this.stateRegistry.decorator(e, t) || this
                }
                    ,
                    e.prototype.state = function (e, t) {
                        return I(e) ? t = e : t.name = e,
                            this.stateRegistry.register(t),
                            this
                    }
                    ,
                    e.prototype.onInvalid = function (e) {
                        return this.stateService.onInvalid(e)
                    }
                    ,
                    e
            }()
            , Ti = function (e) {
                return function (t, n) {
                    var i = t[e]
                        , r = "onExit" === e ? "from" : "to";
                    return i ? function (e, t) {
                        var n = new Pt(e.treeChanges(r)).subContext(t.$$state())
                            , o = V(Vi(n), {
                                $state$: t,
                                $transition$: e
                            });
                        return L.$injector.invoke(i, this, o)
                    }
                        : void 0
                }
            }
            , ki = function () {
                function e(e) {
                    this._urlListeners = [],
                        this.$locationProvider = e;
                    var t = v(e);
                    q(t, this, t, ["hashPrefix"])
                }
                return e.monkeyPatchPathParameterType = function (e) {
                    var t = e.urlMatcherFactory.type("path");
                    t.encode = function (e) {
                        return null != e ? e.toString().replace(/(~|\/)/g, function (e) {
                            return {
                                "~": "~~",
                                "/": "~2F"
                            }[e]
                        }) : e
                    }
                        ,
                        t.decode = function (e) {
                            return null != e ? e.toString().replace(/(~~|~2F)/g, function (e) {
                                return {
                                    "~~": "~",
                                    "~2F": "/"
                                }[e]
                            }) : e
                        }
                }
                    ,
                    e.prototype.dispose = function () { }
                    ,
                    e.prototype.onChange = function (e) {
                        var t = this;
                        return this._urlListeners.push(e),
                            function () {
                                return J(t._urlListeners)(e)
                            }
                    }
                    ,
                    e.prototype.html5Mode = function () {
                        var e = this.$locationProvider.html5Mode();
                        return (e = I(e) ? e.enabled : e) && this.$sniffer.history
                    }
                    ,
                    e.prototype.baseHref = function () {
                        return this._baseHref || (this._baseHref = this.$browser.baseHref() || this.$window.location.pathname)
                    }
                    ,
                    e.prototype.url = function (e, t, n) {
                        return void 0 === t && (t = !1),
                            C(e) && this.$location.url(e),
                            t && this.$location.replace(),
                            n && this.$location.state(n),
                            this.$location.url()
                    }
                    ,
                    e.prototype._runtimeServices = function (e, t, n, i, r) {
                        var o = this;
                        this.$location = t,
                            this.$sniffer = n,
                            this.$browser = i,
                            this.$window = r,
                            e.$on("$locationChangeSuccess", function (e) {
                                return o._urlListeners.forEach(function (t) {
                                    return t(e)
                                })
                            });
                        var a = v(t);
                        q(a, this, a, ["replace", "path", "search", "hash"]),
                            q(a, this, a, ["port", "protocol", "host"])
                    }
                    ,
                    e
            }()
            , Pi = function () {
                function e(e) {
                    this.router = e
                }
                return e.injectableHandler = function (e, t) {
                    return function (n) {
                        return L.$injector.invoke(t, null, {
                            $match: n,
                            $stateParams: e.globals.params
                        })
                    }
                }
                    ,
                    e.prototype.$get = function () {
                        var e = this.router.urlService;
                        return this.router.urlRouter.update(!0),
                            e.interceptDeferred || e.listen(),
                            this.router.urlRouter
                    }
                    ,
                    e.prototype.rule = function (e) {
                        var t = this;
                        if (!k(e))
                            throw new Error("'rule' must be a function");
                        var n = new sn(function () {
                            return e(L.$injector, t.router.locationService)
                        }
                            , H);
                        return this.router.urlService.rules.rule(n),
                            this
                    }
                    ,
                    e.prototype.otherwise = function (e) {
                        var t = this
                            , n = this.router.urlService.rules;
                        if (E(e))
                            n.otherwise(e);
                        else {
                            if (!k(e))
                                throw new Error("'rule' must be a string or function");
                            n.otherwise(function () {
                                return e(L.$injector, t.router.locationService)
                            })
                        }
                        return this
                    }
                    ,
                    e.prototype.when = function (t, n) {
                        return (M(n) || k(n)) && (n = e.injectableHandler(this.router, n)),
                            this.router.urlService.rules.when(t, n),
                            this
                    }
                    ,
                    e.prototype.deferIntercept = function (e) {
                        this.router.urlService.deferIntercept(e)
                    }
                    ,
                    e
            }();
        i.module("ui.router.angular1", []);
        var Ei = i.module("ui.router.init", ["ng"])
            , Ii = i.module("ui.router.util", ["ui.router.init"])
            , Mi = i.module("ui.router.router", ["ui.router.util"])
            , Oi = i.module("ui.router.state", ["ui.router.router", "ui.router.util", "ui.router.angular1"])
            , Di = i.module("ui.router", ["ui.router.init", "ui.router.state", "ui.router.angular1"])
            , Ai = (i.module("ui.router.compat", ["ui.router"]),
                null);
        function _i(e) {
            (Ai = this.router = new yn).stateProvider = new xi(Ai.stateRegistry, Ai.stateService),
                Ai.stateRegistry.decorator("views", yi),
                Ai.stateRegistry.decorator("onExit", Ti("onExit")),
                Ai.stateRegistry.decorator("onRetain", Ti("onRetain")),
                Ai.stateRegistry.decorator("onEnter", Ti("onEnter")),
                Ai.viewService._pluginapi._viewConfigFactory("ng1", gi());
            var t = Ai.locationService = Ai.locationConfig = new ki(e);
            return ki.monkeyPatchPathParameterType(Ai),
                ((Ai.router = Ai).$get = function (e, n, i, r, o, a, s) {
                    return t._runtimeServices(o, e, r, n, i),
                        delete Ai.router,
                        delete Ai.$get,
                        Ai
                }
                ).$inject = ["$location", "$browser", "$window", "$sniffer", "$rootScope", "$http", "$templateCache"],
                Ai
        }
        _i.$inject = ["$locationProvider"];
        var Ri = function (e) {
            return ["$uiRouterProvider", function (t) {
                var n = t.router[e];
                return n.$get = function () {
                    return n
                }
                    ,
                    n
            }
            ]
        };
        function Li(e, t, n) {
            if (L.$injector = e,
                L.$q = t,
                !e.hasOwnProperty("strictDi"))
                try {
                    e.invoke(function (e) { })
                } catch (t) {
                    e.strictDi = !!/strict mode/.exec(t && t.toString())
                }
            n.stateRegistry.get().map(function (e) {
                return e.$$state().resolvables
            }).reduce(fe, []).filter(function (e) {
                return "deferred" === e.deps
            }).forEach(function (t) {
                return t.deps = e.annotate(t.resolveFn, e.strictDi)
            })
        }
        function Ui(e) {
            e.$watch(function () {
                lt.approximateDigests++
            })
        }
        Li.$inject = ["$injector", "$q", "$uiRouter"],
            Ui.$inject = ["$rootScope"],
            Ei.provider("$uiRouter", _i),
            Mi.provider("$urlRouter", ["$uiRouterProvider", function (e) {
                return e.urlRouterProvider = new Pi(e)
            }
            ]),
            Ii.provider("$urlService", Ri("urlService")),
            Ii.provider("$urlMatcherFactory", ["$uiRouterProvider", function () {
                return Ai.urlMatcherFactory
            }
            ]),
            Ii.provider("$templateFactory", function () {
                return new $i
            }),
            Oi.provider("$stateRegistry", Ri("stateRegistry")),
            Oi.provider("$uiRouterGlobals", Ri("globals")),
            Oi.provider("$transitions", Ri("transitionService")),
            Oi.provider("$state", ["$uiRouterProvider", function () {
                return V(Ai.stateProvider, {
                    $get: function () {
                        return Ai.stateService
                    }
                })
            }
            ]),
            Oi.factory("$stateParams", ["$uiRouter", function (e) {
                return e.globals.params
            }
            ]),
            Di.factory("$view", function () {
                return Ai.viewService
            }),
            Di.service("$trace", function () {
                return lt
            }),
            Di.run(Ui),
            Ii.run(["$urlMatcherFactory", function (e) { }
            ]),
            Oi.run(["$state", function (e) { }
            ]),
            Mi.run(["$urlRouter", function (e) { }
            ]),
            Ei.run(Li);
        var Ni, ji, Fi, Bi, Vi = function (e) {
            return e.getTokens().filter(E).map(function (t) {
                var n = e.getResolvable(t);
                return [t, "NOWAIT" === e.getPolicy(n).async ? n.promise : n.data]
            }).reduce(Te, {})
        };
        function zi(e) {
            var t, n = e.match(/^\s*({[^}]*})\s*$/);
            if (n && (e = "(" + n[1] + ")"),
                !(t = e.replace(/\n/g, " ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/)) || 4 !== t.length)
                throw new Error("Invalid state ref '" + e + "'");
            return {
                state: t[1] || null,
                paramExpr: t[3] || null
            }
        }
        function Hi(e) {
            var t = e.parent().inheritedData("$uiView")
                , n = c("$cfg.path")(t);
            return n ? ke(n).state.name : void 0
        }
        function Wi(e, t, n) {
            var i, r = n.uiState || e.current.name, o = V((i = e,
            {
                relative: Hi(t) || i.$current,
                inherit: !0,
                source: "sref"
            }), n.uiStateOpts || {}), a = e.href(r, n.uiStateParams, o);
            return {
                uiState: r,
                uiStateParams: n.uiStateParams,
                uiStateOpts: o,
                href: a
            }
        }
        function qi(e) {
            var t = "[object SVGAnimatedString]" === Object.prototype.toString.call(e.prop("href"))
                , n = "FORM" === e[0].nodeName;
            return {
                attr: n ? "action" : t ? "xlink:href" : "href",
                isAnchor: "A" === e.prop("tagName").toUpperCase(),
                clickable: !n
            }
        }
        function Gi(e, t, n, i, r) {
            return function (o) {
                var a = o.which || o.button
                    , s = r();
                if (!(1 < a || o.ctrlKey || o.metaKey || o.shiftKey || e.attr("target"))) {
                    var l = n(function () {
                        e.attr("disabled") || t.go(s.uiState, s.uiStateParams, s.uiStateOpts)
                    });
                    o.preventDefault();
                    var c = i.isAnchor && !s.href ? 1 : 0;
                    o.preventDefault = function () {
                        c-- <= 0 && n.cancel(l)
                    }
                }
            }
        }
        function Yi(e, t, n, i) {
            var r;
            i && (r = i.events),
                M(r) || (r = ["click"]);
            for (var o = e.on ? "on" : "bind", a = 0, s = r; a < s.length; a++) {
                var l = s[a];
                e[o](l, n)
            }
            t.$on("$destroy", function () {
                for (var t = e.off ? "off" : "unbind", i = 0, o = r; i < o.length; i++) {
                    var a = o[i];
                    e[t](a, n)
                }
            })
        }
        function Xi(e) {
            var t = function (t, n, i) {
                return e.is(t, n, i)
            };
            return t.$stateful = !0,
                t
        }
        function Ji(e) {
            var t = function (t, n, i) {
                return e.includes(t, n, i)
            };
            return t.$stateful = !0,
                t
        }
        function Ki(e, t, n, r, o, a) {
            var s = c("viewDecl.controllerAs")
                , l = c("viewDecl.resolveAs");
            return {
                restrict: "ECA",
                priority: -400,
                compile: function (r) {
                    var a = r.html();
                    return r.empty(),
                        function (r, c) {
                            var u = c.data("$uiView");
                            if (!u)
                                return c.html(a),
                                    void e(c.contents())(r);
                            var d = u.$cfg || {
                                viewDecl: {},
                                getTemplate: W
                            }
                                , p = d.path && new Pt(d.path);
                            c.html(d.getTemplate(c, p) || a),
                                lt.traceUIViewFill(u.$uiView, c.html());
                            var h = e(c.contents())
                                , f = d.controller
                                , m = s(d)
                                , g = l(d)
                                , v = p && Vi(p);
                            if (r[g] = v,
                                f) {
                                var y = t(f, V({}, v, {
                                    $scope: r,
                                    $element: c
                                }));
                                m && (r[m] = y,
                                    r[m][g] = v),
                                    c.data("$ngControllerController", y),
                                    c.children().data("$ngControllerController", y),
                                    er(o, n, y, r, d)
                            }
                            if (E(d.component))
                                var b = Ne(d.component)
                                    , w = new RegExp("^(x-|data-)?" + b + "$", "i")
                                    , $ = r.$watch(function () {
                                        var e = [].slice.call(c[0].children).filter(function (e) {
                                            return e && e.tagName && w.exec(e.tagName)
                                        });
                                        return e && i.element(e).data("$" + d.component + "Controller")
                                    }, function (e) {
                                        e && (er(o, n, e, r, d),
                                            $())
                                    });
                            h(r)
                        }
                }
            }
        }
        Ni = ["$uiRouter", "$timeout", function (e, t) {
            var n = e.stateService;
            return {
                restrict: "A",
                require: ["?^uiSrefActive", "?^uiSrefActiveEq"],
                link: function (i, r, o, a) {
                    var s, l = qi(r), c = a[1] || a[0], u = null, d = {}, p = function () {
                        return Wi(n, r, d)
                    }, h = zi(o.uiSref);
                    function f() {
                        var e = p();
                        u && u(),
                            c && (u = c.$$addStateInfo(e.uiState, e.uiStateParams)),
                            null != e.href && o.$set(l.attr, e.href)
                    }
                    d.uiState = h.state,
                        d.uiStateOpts = o.uiSrefOpts ? i.$eval(o.uiSrefOpts) : {},
                        h.paramExpr && (i.$watch(h.paramExpr, function (e) {
                            d.uiStateParams = V({}, e),
                                f()
                        }, !0),
                            d.uiStateParams = V({}, i.$eval(h.paramExpr))),
                        f(),
                        i.$on("$destroy", e.stateRegistry.onStatesChanged(f)),
                        i.$on("$destroy", e.transitionService.onSuccess({}, f)),
                        l.clickable && (s = Gi(r, n, t, l, p),
                            Yi(r, i, s, d.uiStateOpts))
                }
            }
        }
        ],
            ji = ["$uiRouter", "$timeout", function (e, t) {
                var n = e.stateService;
                return {
                    restrict: "A",
                    require: ["?^uiSrefActive", "?^uiSrefActiveEq"],
                    link: function (i, r, o, a) {
                        var s, l = qi(r), c = a[1] || a[0], u = null, d = {}, p = function () {
                            return Wi(n, r, d)
                        }, h = ["uiState", "uiStateParams", "uiStateOpts"], f = h.reduce(function (e, t) {
                            return e[t] = W,
                                e
                        }, {});
                        function m() {
                            var e = p();
                            u && u(),
                                c && (u = c.$$addStateInfo(e.uiState, e.uiStateParams)),
                                null != e.href && o.$set(l.attr, e.href)
                        }
                        h.forEach(function (e) {
                            d[e] = o[e] ? i.$eval(o[e]) : null,
                                o.$observe(e, function (t) {
                                    f[e](),
                                        f[e] = i.$watch(t, function (t) {
                                            d[e] = t,
                                                m()
                                        }, !0)
                                })
                        }),
                            m(),
                            i.$on("$destroy", e.stateRegistry.onStatesChanged(m)),
                            i.$on("$destroy", e.transitionService.onSuccess({}, m)),
                            l.clickable && (s = Gi(r, n, t, l, p),
                                Yi(r, i, s, d.uiStateOpts))
                    }
                }
            }
            ],
            Fi = ["$state", "$stateParams", "$interpolate", "$uiRouter", function (e, t, n, i) {
                return {
                    restrict: "A",
                    controller: ["$scope", "$element", "$attrs", function (t, r, o) {
                        var a, s, l, c, u, d = [];
                        a = n(o.uiSrefActiveEq || "", !1)(t);
                        try {
                            s = t.$eval(o.uiSrefActive)
                        } catch (o) { }
                        function p(e) {
                            e.promise.then(m, W)
                        }
                        function h(e) {
                            I(e) && (d = [],
                                B(e, function (e, n) {
                                    var i = function (e, n) {
                                        var i = zi(e);
                                        f(i.state, t.$eval(i.paramExpr), n)
                                    };
                                    E(e) ? i(e, n) : M(e) && B(e, function (e) {
                                        i(e, n)
                                    })
                                }))
                        }
                        function f(t, n, i) {
                            var o = {
                                state: e.get(t, Hi(r)) || {
                                    name: t
                                },
                                params: n,
                                activeClass: i
                            };
                            return d.push(o),
                                function () {
                                    J(d)(o)
                                }
                        }
                        function m() {
                            var n = function (e) {
                                return e.split(/\s/).filter(H)
                            }
                                , i = function (e) {
                                    return e.map(function (e) {
                                        return e.activeClass
                                    }).map(n).reduce(fe, [])
                                }
                                , o = i(d).concat(n(a)).reduce(ve, [])
                                , s = i(d.filter(function (t) {
                                    return e.includes(t.state.name, t.params)
                                }))
                                , l = d.filter(function (t) {
                                    return e.is(t.state.name, t.params)
                                }).length ? n(a) : []
                                , c = s.concat(l).reduce(ve, [])
                                , u = o.filter(function (e) {
                                    return !Y(c, e)
                                });
                            t.$evalAsync(function () {
                                c.forEach(function (e) {
                                    return r.addClass(e)
                                }),
                                    u.forEach(function (e) {
                                        return r.removeClass(e)
                                    })
                            })
                        }
                        h(s = s || n(o.uiSrefActive || "", !1)(t)),
                            this.$$addStateInfo = function (e, t) {
                                if (!(I(s) && 0 < d.length)) {
                                    var n = f(e, t, s);
                                    return m(),
                                        n
                                }
                            }
                            ,
                            t.$on("$destroy", (l = i.stateRegistry.onStatesChanged(function () {
                                h(s)
                            }),
                                c = i.transitionService.onStart({}, p),
                                u = t.$on("$stateChangeSuccess", m),
                                function () {
                                    l(),
                                        c(),
                                        u()
                                }
                            )),
                            i.globals.transition && p(i.globals.transition),
                            m()
                    }
                    ]
                }
            }
            ],
            i.module("ui.router.state").directive("uiSref", Ni).directive("uiSrefActive", Fi).directive("uiSrefActiveEq", Fi).directive("uiState", ji),
            Xi.$inject = ["$state"],
            Ji.$inject = ["$state"],
            i.module("ui.router.state").filter("isState", Xi).filter("includedByState", Ji),
            Bi = ["$view", "$animate", "$uiViewScroll", "$interpolate", "$q", function (e, t, n, r, o) {
                var a = {
                    $cfg: {
                        viewDecl: {
                            $context: e._pluginapi._rootViewContext()
                        }
                    },
                    $uiView: {}
                }
                    , s = {
                        count: 0,
                        restrict: "ECA",
                        terminal: !0,
                        priority: 400,
                        transclude: "element",
                        compile: function (l, u, d) {
                            return function (l, u, p) {
                                var h, f, m, g, v, y = p.onload || "", b = p.autoscroll, w = {
                                    enter: function (e, n, r) {
                                        2 < i.version.minor ? t.enter(e, null, n).then(r) : t.enter(e, null, n, r)
                                    },
                                    leave: function (e, n) {
                                        2 < i.version.minor ? t.leave(e).then(n) : t.leave(e, n)
                                    }
                                }, $ = u.inheritedData("$uiView") || a, S = r(p.uiView || p.name || "")(l) || "$default", x = {
                                    $type: "ng1",
                                    id: s.count++,
                                    name: S,
                                    fqn: $.$uiView.fqn ? $.$uiView.fqn + "." + S : S,
                                    config: null,
                                    configUpdated: function (e) {
                                        (!e || e instanceof wi) && (g !== e && (lt.traceUIViewConfigUpdated(x, e && e.viewDecl && e.viewDecl.$context),
                                            T(g = e)))
                                    },
                                    get creationContext() {
                                        var e = c("$cfg.viewDecl.$context")($)
                                            , t = c("$uiView.creationContext")($);
                                        return e || t
                                    }
                                };
                                function T(e) {
                                    var t = l.$new()
                                        , i = o.defer()
                                        , r = o.defer()
                                        , a = {
                                            $cfg: e,
                                            $uiView: x
                                        }
                                        , s = {
                                            $animEnter: i.promise,
                                            $animLeave: r.promise,
                                            $$animLeave: r
                                        };
                                    t.$emit("$viewContentLoading", S),
                                        f = d(t, function (e) {
                                            e.data("$uiViewAnim", s),
                                                e.data("$uiView", a),
                                                w.enter(e, u, function () {
                                                    i.resolve(),
                                                        m && m.$emit("$viewContentAnimationEnded"),
                                                        (C(b) && !b || l.$eval(b)) && n(e)
                                                }),
                                                function () {
                                                    if (h && (lt.traceUIViewEvent("Removing (previous) el", h.data("$uiView")),
                                                        h.remove(),
                                                        h = null),
                                                        m && (lt.traceUIViewEvent("Destroying scope", x),
                                                            m.$destroy(),
                                                            m = null),
                                                        f) {
                                                        var e = f.data("$uiViewAnim");
                                                        lt.traceUIViewEvent("Animate out", e),
                                                            w.leave(f, function () {
                                                                e.$$animLeave.resolve(),
                                                                    h = null
                                                            }),
                                                            h = f,
                                                            f = null
                                                    }
                                                }()
                                        }),
                                        (m = t).$emit("$viewContentLoaded", e || g),
                                        m.$eval(y)
                                }
                                lt.traceUIViewEvent("Linking", x),
                                    u.data("$uiView", {
                                        $uiView: x
                                    }),
                                    T(),
                                    v = e.registerUIView(x),
                                    l.$on("$destroy", function () {
                                        lt.traceUIViewEvent("Destroying/Unregistering", x),
                                            v()
                                    })
                            }
                        }
                    };
                return s
            }
            ],
            Ki.$inject = ["$compile", "$controller", "$transitions", "$view", "$q", "$timeout"];
        var Qi = "function" == typeof i.module("ui.router").component
            , Zi = 0;
        function er(e, t, n, i, r) {
            !k(n.$onInit) || r.viewDecl.component && Qi || n.$onInit();
            var o = ke(r.path).state.self
                , a = {
                    bind: n
                };
            if (k(n.uiOnParamsChanged)) {
                var s = new Pt(r.path).getResolvable("$transition$").data;
                i.$on("$destroy", t.onSuccess({}, function (e) {
                    if (e !== s && -1 === e.exiting().indexOf(o)) {
                        var t = e.params("to")
                            , i = e.params("from")
                            , r = function (e) {
                                return e.paramSchema
                            }
                            , a = e.treeChanges("to").map(r).reduce(fe, [])
                            , l = e.treeChanges("from").map(r).reduce(fe, [])
                            , c = a.filter(function (e) {
                                var n = l.indexOf(e);
                                return -1 === n || !l[n].type.equals(t[e.id], i[e.id])
                            });
                        if (c.length) {
                            var u = c.map(function (e) {
                                return e.id
                            })
                                , d = se(t, function (e, t) {
                                    return -1 !== u.indexOf(t)
                                });
                            n.uiOnParamsChanged(d, e)
                        }
                    }
                }, a))
            }
            if (k(n.uiCanExit)) {
                var l = Zi++
                    , c = "_uiCanExitIds"
                    , u = function (e) {
                        return !!e && (e[c] && !0 === e[c][l] || u(e.redirectedFrom()))
                    }
                    , d = {
                        exiting: o.name
                    };
                i.$on("$destroy", t.onBefore(d, function (t) {
                    var i, r = t[c] = t[c] || {};
                    return u(t) || (i = e.when(n.uiCanExit(t))).then(function (e) {
                        return r[l] = !1 !== e
                    }),
                        i
                }, a))
            }
        }
        i.module("ui.router.state").directive("uiView", Bi),
            i.module("ui.router.state").directive("uiView", Ki),
            i.module("ui.router.state").provider("$uiViewScroll", function () {
                var e = !1;
                this.useAnchorScroll = function () {
                    e = !0
                }
                    ,
                    this.$get = ["$anchorScroll", "$timeout", function (t, n) {
                        return e ? t : function (e) {
                            return n(function () {
                                e[0].scrollIntoView()
                            }, 0, !1)
                        }
                    }
                    ]
            }),
            e.default = "ui.router",
            e.core = mi,
            e.watchDigests = Ui,
            e.getLocals = Vi,
            e.getNg1ViewConfigFactory = gi,
            e.ng1ViewsBuilder = yi,
            e.Ng1ViewConfig = wi,
            e.StateProvider = xi,
            e.UrlRouterProvider = Pi,
            e.root = U,
            e.fromJson = j,
            e.toJson = F,
            e.forEach = B,
            e.extend = V,
            e.equals = z,
            e.identity = H,
            e.noop = W,
            e.createProxyFunctions = q,
            e.inherit = G,
            e.inArray = Y,
            e._inArray = X,
            e.removeFrom = J,
            e._removeFrom = K,
            e.pushTo = Q,
            e._pushTo = Z,
            e.deregAll = ee,
            e.defaults = te,
            e.mergeR = ne,
            e.ancestors = ie,
            e.pick = re,
            e.omit = oe,
            e.pluck = ae,
            e.filter = se,
            e.find = le,
            e.mapObj = ce,
            e.map = ue,
            e.values = de,
            e.allTrueR = pe,
            e.anyTrueR = he,
            e.unnestR = fe,
            e.flattenR = me,
            e.pushR = ge,
            e.uniqR = ve,
            e.unnest = ye,
            e.flatten = be,
            e.assertPredicate = we,
            e.assertMap = $e,
            e.assertFn = Se,
            e.pairs = Ce,
            e.arrayTuples = xe,
            e.applyPairs = Te,
            e.tail = ke,
            e.copy = Pe,
            e._extend = Ee,
            e.silenceUncaughtInPromise = Me,
            e.silentRejection = Oe,
            e.makeStub = R,
            e.services = L,
            e.Glob = De,
            e.curry = r,
            e.compose = o,
            e.pipe = a,
            e.prop = s,
            e.propEq = l,
            e.parse = c,
            e.not = u,
            e.and = d,
            e.or = p,
            e.all = h,
            e.any = f,
            e.is = m,
            e.eq = g,
            e.val = v,
            e.invoke = y,
            e.pattern = b,
            e.isUndefined = S,
            e.isDefined = C,
            e.isNull = x,
            e.isNullOrUndefined = T,
            e.isFunction = k,
            e.isNumber = P,
            e.isString = E,
            e.isObject = I,
            e.isArray = M,
            e.isDate = O,
            e.isRegExp = D,
            e.isInjectable = A,
            e.isPromise = _,
            e.Queue = Ae,
            e.maxLength = Le,
            e.padString = Ue,
            e.kebobString = Ne,
            e.functionToString = je,
            e.fnToString = Fe,
            e.stringify = ze,
            e.beforeAfterSubstr = He,
            e.hostRegex = We,
            e.stripLastPathElement = qe,
            e.splitHash = Ge,
            e.splitQuery = Ye,
            e.splitEqual = Xe,
            e.trimHashVal = Je,
            e.splitOnDelim = Ke,
            e.joinNeighborsR = Qe,
            e.Trace = st,
            e.trace = lt,
            e.Param = ft,
            e.ParamTypes = mt,
            e.StateParams = gt,
            e.ParamType = ct,
            e.PathNode = vt,
            e.PathUtils = bt,
            e.resolvePolicies = wt,
            e.defaultResolvePolicy = $t,
            e.Resolvable = St,
            e.NATIVE_INJECTOR_TOKEN = kt,
            e.ResolveContext = Pt,
            e.resolvablesBuilder = Rt,
            e.StateBuilder = Nt,
            e.StateObject = jt,
            e.StateMatcher = Ft,
            e.StateQueueManager = Bt,
            e.StateRegistry = Vt,
            e.StateService = Bn,
            e.TargetState = yt,
            e.HookBuilder = Yt,
            e.matchState = Wt,
            e.RegisteredHook = qt,
            e.makeEvent = Gt,
            e.Rejection = Re,
            e.Transition = Jt,
            e.TransitionHook = Ht,
            e.TransitionEventType = Ln,
            e.defaultTransOpts = jn,
            e.TransitionService = Fn,
            e.UrlRules = pn,
            e.UrlConfig = hn,
            e.UrlMatcher = tn,
            e.ParamFactory = rn,
            e.UrlMatcherFactory = on,
            e.UrlRouter = ln,
            e.UrlRuleFactory = an,
            e.BaseUrlRule = sn,
            e.UrlService = fn,
            e.ViewService = cn,
            e.UIRouterGlobals = un,
            e.UIRouter = yn,
            e.$q = Vn,
            e.$injector = qn,
            e.BaseLocationServices = ti,
            e.HashLocationService = ii,
            e.MemoryLocationService = oi,
            e.PushStateLocationService = si,
            e.MemoryLocationConfig = li,
            e.BrowserLocationConfig = ci,
            e.keyValsToObjectR = Gn,
            e.getParams = Yn,
            e.parseUrl = Xn,
            e.buildUrl = Jn,
            e.locationPluginFactory = Kn,
            e.servicesPlugin = ui,
            e.hashLocationPlugin = di,
            e.pushStateLocationPlugin = pi,
            e.memoryLocationPlugin = hi,
            e.UIRouterPluginBase = fi,
            Object.defineProperty(e, "__esModule", {
                value: !0
            })
    }),
    function (e, t) {
        "function" == typeof define && define.amd ? define([], function () {
            return t()
        }) : "object" == typeof module && module.exports ? module.exports = t() : t()
    }(0, function () {
        function e(e) {
            "use strict";
            var t = e.storageKey()
                , n = e.storage()
                , i = function () {
                    var i = e.preferredLanguage();
                    angular.isString(i) ? e.use(i) : n.put(t, e.use())
                };
            i.displayName = "fallbackFromIncorrectStorageValue",
                n ? n.get(t) ? e.use(n.get(t)).catch(i) : i() : angular.isString(e.preferredLanguage()) && e.use(e.preferredLanguage())
        }
        function t(e, t, n, i) {
            "use strict";
            var r, o, a, s, l, c, u, d, p, h, f, m, g, v, y, b, w = {}, $ = [], S = e, C = [], x = "translate-cloak", T = !1, k = !1, P = ".", E = !1, I = !1, M = 0, O = !0, D = "default", A = {
                default: function (e) {
                    return (e || "").split("-").join("_")
                },
                java: function (e) {
                    var t = (e || "").split("-").join("_")
                        , n = t.split("_");
                    return 1 < n.length ? n[0].toLowerCase() + "_" + n[1].toUpperCase() : t
                },
                bcp47: function (e) {
                    var t = (e || "").split("_").join("-")
                        , n = t.split("-");
                    switch (n.length) {
                        case 1:
                            n[0] = n[0].toLowerCase();
                            break;
                        case 2:
                            n[0] = n[0].toLowerCase(),
                                4 === n[1].length ? n[1] = n[1].charAt(0).toUpperCase() + n[1].slice(1).toLowerCase() : n[1] = n[1].toUpperCase();
                            break;
                        case 3:
                            n[0] = n[0].toLowerCase(),
                                n[1] = n[1].charAt(0).toUpperCase() + n[1].slice(1).toLowerCase(),
                                n[2] = n[2].toUpperCase();
                            break;
                        default:
                            return t
                    }
                    return n.join("-")
                },
                "iso639-1": function (e) {
                    return (e || "").split("_").join("-").split("-")[0].toLowerCase()
                }
            }, _ = function () {
                if (angular.isFunction(i.getLocale))
                    return i.getLocale();
                var e, n, r = t.$get().navigator, o = ["language", "browserLanguage", "systemLanguage", "userLanguage"];
                if (angular.isArray(r.languages))
                    for (e = 0; e < r.languages.length; e++)
                        if ((n = r.languages[e]) && n.length)
                            return n;
                for (e = 0; e < o.length; e++)
                    if ((n = r[o[e]]) && n.length)
                        return n;
                return null
            };
            _.displayName = "angular-translate/service: getFirstBrowserLanguage";
            var R = function () {
                var e = _() || "";
                return A[D] && (e = A[D](e)),
                    e
            };
            R.displayName = "angular-translate/service: getLocale";
            var L = function (e, t) {
                for (var n = 0, i = e.length; n < i; n++)
                    if (e[n] === t)
                        return n;
                return -1
            }
                , U = function () {
                    return this.toString().replace(/^\s+|\s+$/g, "")
                }
                , N = function (e) {
                    return angular.isString(e) ? e.toLowerCase() : e
                }
                , j = function (e) {
                    if (e) {
                        for (var t, n = [], i = N(e), r = 0, a = $.length; r < a; r++)
                            n.push(N($[r]));
                        if (-1 < (r = L(n, i)))
                            return $[r];
                        if (o)
                            for (var s in o)
                                if (o.hasOwnProperty(s)) {
                                    var l = !1
                                        , c = Object.prototype.hasOwnProperty.call(o, s) && N(s) === N(e);
                                    if ("*" === s.slice(-1) && (l = N(s.slice(0, -1)) === N(e.slice(0, s.length - 1))),
                                        (c || l) && (t = o[s],
                                            -1 < L(n, N(t))))
                                        return t
                                }
                        var u = e.split("_");
                        return 1 < u.length && -1 < L(n, N(u[0])) ? u[0] : void 0
                    }
                }
                , F = function (e, t) {
                    if (!e && !t)
                        return w;
                    if (e && !t) {
                        if (angular.isString(e))
                            return w[e]
                    } else
                        angular.isObject(w[e]) || (w[e] = {}),
                            angular.extend(w[e], B(t));
                    return this
                };
            this.translations = F,
                this.cloakClassName = function (e) {
                    return e ? (x = e,
                        this) : x
                }
                ,
                this.nestedObjectDelimeter = function (e) {
                    return e ? (P = e,
                        this) : P
                }
                ;
            var B = function (e, t, n, i) {
                var r, o, a;
                for (r in t || (t = []),
                    n || (n = {}),
                    e)
                    Object.prototype.hasOwnProperty.call(e, r) && (a = e[r],
                        angular.isObject(a) ? B(a, t.concat(r), n, r) : (o = t.length ? "" + t.join(P) + P + r : r,
                            t.length && r === i && (n["" + t.join(P)] = "@:" + o),
                            n[o] = a));
                return n
            };
            B.displayName = "flatObject",
                this.addInterpolation = function (e) {
                    return C.push(e),
                        this
                }
                ,
                this.useMessageFormatInterpolation = function () {
                    return this.useInterpolation("$translateMessageFormatInterpolation")
                }
                ,
                this.useInterpolation = function (e) {
                    return h = e,
                        this
                }
                ,
                this.useSanitizeValueStrategy = function (e) {
                    return n.useStrategy(e),
                        this
                }
                ,
                this.preferredLanguage = function (e) {
                    return e ? (V(e),
                        this) : r
                }
                ;
            var V = function (e) {
                return e && (r = e),
                    r
            };
            this.translationNotFoundIndicator = function (e) {
                return this.translationNotFoundIndicatorLeft(e),
                    this.translationNotFoundIndicatorRight(e),
                    this
            }
                ,
                this.translationNotFoundIndicatorLeft = function (e) {
                    return e ? (g = e,
                        this) : g
                }
                ,
                this.translationNotFoundIndicatorRight = function (e) {
                    return e ? (v = e,
                        this) : v
                }
                ,
                this.fallbackLanguage = function (e) {
                    return z(e),
                        this
                }
                ;
            var z = function (e) {
                return e ? (angular.isString(e) ? (s = !0,
                    a = [e]) : angular.isArray(e) && (s = !1,
                        a = e),
                    angular.isString(r) && L(a, r) < 0 && a.push(r),
                    this) : s ? a[0] : a
            };
            this.use = function (e) {
                if (e) {
                    if (!w[e] && !f)
                        throw new Error("$translateProvider couldn't find translationTable for langKey: '" + e + "'");
                    return l = e,
                        this
                }
                return l
            }
                ,
                this.resolveClientLocale = function () {
                    return R()
                }
                ;
            var H = function (e) {
                return e ? (S = e,
                    this) : d ? d + S : S
            };
            this.storageKey = H,
                this.useUrlLoader = function (e, t) {
                    return this.useLoader("$translateUrlLoader", angular.extend({
                        url: e
                    }, t))
                }
                ,
                this.useStaticFilesLoader = function (e) {
                    return this.useLoader("$translateStaticFilesLoader", e)
                }
                ,
                this.useLoader = function (e, t) {
                    return f = e,
                        m = t || {},
                        this
                }
                ,
                this.useLocalStorage = function () {
                    return this.useStorage("$translateLocalStorage")
                }
                ,
                this.useCookieStorage = function () {
                    return this.useStorage("$translateCookieStorage")
                }
                ,
                this.useStorage = function (e) {
                    return u = e,
                        this
                }
                ,
                this.storagePrefix = function (e) {
                    return e ? (d = e,
                        this) : e
                }
                ,
                this.useMissingTranslationHandlerLog = function () {
                    return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")
                }
                ,
                this.useMissingTranslationHandler = function (e) {
                    return p = e,
                        this
                }
                ,
                this.usePostCompiling = function (e) {
                    return T = !!e,
                        this
                }
                ,
                this.forceAsyncReload = function (e) {
                    return k = !!e,
                        this
                }
                ,
                this.uniformLanguageTag = function (e) {
                    return e ? angular.isString(e) && (e = {
                        standard: e
                    }) : e = {},
                        D = e.standard,
                        this
                }
                ,
                this.determinePreferredLanguage = function (e) {
                    var t = e && angular.isFunction(e) ? e() : R();
                    return r = $.length && j(t) || t,
                        this
                }
                ,
                this.registerAvailableLanguageKeys = function (e, t) {
                    return e ? ($ = e,
                        t && (o = t),
                        this) : $
                }
                ,
                this.useLoaderCache = function (e) {
                    return !1 === e ? y = void 0 : !0 === e ? y = !0 : void 0 === e ? y = "$translationCache" : e && (y = e),
                        this
                }
                ,
                this.directivePriority = function (e) {
                    return void 0 === e ? M : (M = e,
                        this)
                }
                ,
                this.statefulFilter = function (e) {
                    return void 0 === e ? O : (O = e,
                        this)
                }
                ,
                this.postProcess = function (e) {
                    return b = e || void 0,
                        this
                }
                ,
                this.keepContent = function (e) {
                    return I = !!e,
                        this
                }
                ,
                this.$get = ["$log", "$injector", "$rootScope", "$q", function (e, t, n, i) {
                    var o, d, D, A = t.get(h || "$translateDefaultInterpolation"), _ = !1, N = {}, W = {}, q = function (e, t, n, s, c, p) {
                        !l && r && (l = r);
                        var h = c && c !== l ? j(c) || c : l;
                        if (c && oe(c),
                            angular.isArray(e))
                            return function (e) {
                                for (var r = {}, o = [], a = function (e) {
                                    var o = i.defer()
                                        , a = function (t) {
                                            r[e] = t,
                                                o.resolve([e, t])
                                        };
                                    return q(e, t, n, s, c, p).then(a, a),
                                        o.promise
                                }, l = 0, u = e.length; l < u; l++)
                                    o.push(a(e[l]));
                                return i.all(o).then(function () {
                                    return r
                                })
                            }(e);
                        var f = i.defer();
                        e && (e = U.apply(e));
                        var m = function () {
                            var e = W[h] || W[r];
                            if (d = 0,
                                u && !e) {
                                var t = o.get(S);
                                if (e = W[t],
                                    a && a.length) {
                                    var n = L(a, t);
                                    d = 0 === n ? 1 : 0,
                                        L(a, r) < 0 && a.push(r)
                                }
                            }
                            return e
                        }();
                        if (m) {
                            var g = function () {
                                c || (h = l),
                                    ne(e, t, n, s, h, p).then(f.resolve, f.reject)
                            };
                            g.displayName = "promiseResolved",
                                m.finally(g).catch(angular.noop)
                        } else
                            ne(e, t, n, s, h, p).then(f.resolve, f.reject);
                        return f.promise
                    }, G = function (e) {
                        return g && (e = [g, e].join(" ")),
                            v && (e = [e, v].join(" ")),
                            e
                    }, Y = function (e) {
                        l = e,
                            u && o.put(q.storageKey(), l),
                            n.$emit("$translateChangeSuccess", {
                                language: e
                            }),
                            A.setLocale(l);
                        var t = function (e, t) {
                            N[t].setLocale(l)
                        };
                        t.displayName = "eachInterpolatorLocaleSetter",
                            angular.forEach(N, t),
                            n.$emit("$translateChangeEnd", {
                                language: e
                            })
                    }, X = function (e) {
                        if (!e)
                            throw "No language key specified for loading.";
                        var r = i.defer();
                        n.$emit("$translateLoadingStart", {
                            language: e
                        }),
                            _ = !0;
                        var o = y;
                        "string" == typeof o && (o = t.get(o));
                        var a = angular.extend({}, m, {
                            key: e,
                            $http: angular.extend({}, {
                                cache: o
                            }, m.$http)
                        })
                            , s = function (t) {
                                var i = {};
                                n.$emit("$translateLoadingSuccess", {
                                    language: e
                                }),
                                    angular.isArray(t) ? angular.forEach(t, function (e) {
                                        angular.extend(i, B(e))
                                    }) : angular.extend(i, B(t)),
                                    _ = !1,
                                    r.resolve({
                                        key: e,
                                        table: i
                                    }),
                                    n.$emit("$translateLoadingEnd", {
                                        language: e
                                    })
                            };
                        s.displayName = "onLoaderSuccess";
                        var l = function (e) {
                            n.$emit("$translateLoadingError", {
                                language: e
                            }),
                                r.reject(e),
                                n.$emit("$translateLoadingEnd", {
                                    language: e
                                })
                        };
                        return l.displayName = "onLoaderError",
                            t.get(f)(a).then(s, l),
                            r.promise
                    };
                    if (u && (!(o = t.get(u)).get || !o.put))
                        throw new Error("Couldn't use storage '" + u + "', missing get() or put() method!");
                    if (C.length) {
                        var J = function (e) {
                            var n = t.get(e);
                            n.setLocale(r || l),
                                N[n.getInterpolationIdentifier()] = n
                        };
                        J.displayName = "interpolationFactoryAdder",
                            angular.forEach(C, J)
                    }
                    var K = function (e, t, n, r, o) {
                        var a = i.defer()
                            , s = function (i) {
                                if (Object.prototype.hasOwnProperty.call(i, t) && null !== i[t]) {
                                    r.setLocale(e);
                                    var s = i[t];
                                    if ("@:" === s.substr(0, 2))
                                        K(e, s.substr(2), n, r, o).then(a.resolve, a.reject);
                                    else {
                                        var c = r.interpolate(i[t], n, "service", o, t);
                                        c = re(t, i[t], c, n, e),
                                            a.resolve(c)
                                    }
                                    r.setLocale(l)
                                } else
                                    a.reject()
                            };
                        return s.displayName = "fallbackTranslationResolver",
                            function (e) {
                                var t = i.defer();
                                if (Object.prototype.hasOwnProperty.call(w, e))
                                    t.resolve(w[e]);
                                else if (W[e]) {
                                    var n = function (e) {
                                        F(e.key, e.table),
                                            t.resolve(e.table)
                                    };
                                    n.displayName = "translationTableResolver",
                                        W[e].then(n, t.reject)
                                } else
                                    t.reject();
                                return t.promise
                            }(e).then(s, a.reject),
                            a.promise
                    }
                        , Q = function (e, t, n, i, r) {
                            var o, a = w[e];
                            if (a && Object.prototype.hasOwnProperty.call(a, t) && null !== a[t]) {
                                if (i.setLocale(e),
                                    o = i.interpolate(a[t], n, "filter", r, t),
                                    o = re(t, a[t], o, n, e, r),
                                    !angular.isString(o) && angular.isFunction(o.$$unwrapTrustedValue)) {
                                    var s = o.$$unwrapTrustedValue();
                                    if ("@:" === s.substr(0, 2))
                                        return Q(e, s.substr(2), n, i, r)
                                } else if ("@:" === o.substr(0, 2))
                                    return Q(e, o.substr(2), n, i, r);
                                i.setLocale(l)
                            }
                            return o
                        }
                        , Z = function (e, n, i, r) {
                            return p ? t.get(p)(e, l, n, i, r) : e
                        }
                        , ee = function (e, t, n, r, o, s) {
                            var l = i.defer();
                            if (e < a.length) {
                                var c = a[e];
                                K(c, t, n, r, s).then(function (e) {
                                    l.resolve(e)
                                }, function () {
                                    return ee(e + 1, t, n, r, o, s).then(l.resolve, l.reject)
                                })
                            } else if (o)
                                l.resolve(o);
                            else {
                                var u = Z(t, n, o);
                                p && u ? l.resolve(u) : l.reject(G(t))
                            }
                            return l.promise
                        }
                        , te = function (e, t, n, i, r) {
                            var o;
                            if (e < a.length) {
                                var s = a[e];
                                (o = Q(s, t, n, i, r)) || "" === o || (o = te(e + 1, t, n, i))
                            }
                            return o
                        }
                        , ne = function (e, t, n, r, o, s) {
                            var l, c, u, h, f, m = i.defer(), g = o ? w[o] : w, v = n ? N[n] : A;
                            if (g && Object.prototype.hasOwnProperty.call(g, e) && null !== g[e]) {
                                var y = g[e];
                                if ("@:" === y.substr(0, 2))
                                    q(y.substr(2), t, n, r, o, s).then(m.resolve, m.reject);
                                else {
                                    var b = v.interpolate(y, t, "service", s, e);
                                    b = re(e, y, b, t, o),
                                        m.resolve(b)
                                }
                            } else {
                                var $;
                                p && !_ && ($ = Z(e, t, r)),
                                    o && a && a.length ? (l = e,
                                        c = t,
                                        u = v,
                                        h = r,
                                        f = s,
                                        ee(0 < D ? D : d, l, c, u, h, f)).then(function (e) {
                                            m.resolve(e)
                                        }, function (e) {
                                            m.reject(G(e))
                                        }) : p && !_ && $ ? r ? m.resolve(r) : m.resolve($) : r ? m.resolve(r) : m.reject(G(e))
                            }
                            return m.promise
                        }
                        , ie = function (e, t, n, i, r) {
                            var o, s = i ? w[i] : w, l = A;
                            if (N && Object.prototype.hasOwnProperty.call(N, n) && (l = N[n]),
                                s && Object.prototype.hasOwnProperty.call(s, e) && null !== s[e]) {
                                var c = s[e];
                                "@:" === c.substr(0, 2) ? o = ie(c.substr(2), t, n, i, r) : (o = l.interpolate(c, t, "filter", r, e),
                                    o = re(e, c, o, t, i, r))
                            } else {
                                var u;
                                p && !_ && (u = Z(e, t, r)),
                                    o = i && a && a.length ? te((d = 0) < D ? D : d, e, t, l, r) : p && !_ && u ? u : G(e)
                            }
                            return o
                        }
                        , re = function (e, n, i, r, o, a) {
                            var s = b;
                            return s && ("string" == typeof s && (s = t.get(s)),
                                s) ? s(e, n, i, r, o, a) : i
                        }
                        , oe = function (e) {
                            w[e] || !f || W[e] || (W[e] = X(e).then(function (e) {
                                return F(e.key, e.table),
                                    e
                            }))
                        };
                    q.preferredLanguage = function (e) {
                        return e && V(e),
                            r
                    }
                        ,
                        q.cloakClassName = function () {
                            return x
                        }
                        ,
                        q.nestedObjectDelimeter = function () {
                            return P
                        }
                        ,
                        q.fallbackLanguage = function (e) {
                            if (null != e) {
                                if (z(e),
                                    f && a && a.length)
                                    for (var t = 0, n = a.length; t < n; t++)
                                        W[a[t]] || (W[a[t]] = X(a[t]));
                                q.use(q.use())
                            }
                            return s ? a[0] : a
                        }
                        ,
                        q.useFallbackLanguage = function (e) {
                            if (null != e)
                                if (e) {
                                    var t = L(a, e);
                                    -1 < t && (D = t)
                                } else
                                    D = 0
                        }
                        ,
                        q.proposedLanguage = function () {
                            return c
                        }
                        ,
                        q.storage = function () {
                            return o
                        }
                        ,
                        q.negotiateLocale = j,
                        q.use = function (e) {
                            if (!e)
                                return l;
                            var t = i.defer();
                            t.promise.then(null, angular.noop),
                                n.$emit("$translateChangeStart", {
                                    language: e
                                });
                            var r = j(e);
                            return 0 < $.length && !r ? i.reject(e) : (r && (e = r),
                                c = e,
                                !k && w[e] || !f || W[e] ? W[e] ? W[e].then(function (e) {
                                    return c === e.key && Y(e.key),
                                        t.resolve(e.key),
                                        e
                                }, function (e) {
                                    return !l && a && 0 < a.length && a[0] !== e ? q.use(a[0]).then(t.resolve, t.reject) : t.reject(e)
                                }) : (t.resolve(e),
                                    Y(e)) : (W[e] = X(e).then(function (n) {
                                        return F(n.key, n.table),
                                            t.resolve(n.key),
                                            c === e && Y(n.key),
                                            n
                                    }, function (e) {
                                        return n.$emit("$translateChangeError", {
                                            language: e
                                        }),
                                            t.reject(e),
                                            n.$emit("$translateChangeEnd", {
                                                language: e
                                            }),
                                            i.reject(e)
                                    }),
                                        W[e].finally(function () {
                                            var t;
                                            c === (t = e) && (c = void 0),
                                                W[t] = void 0
                                        }).catch(angular.noop)),
                                t.promise)
                        }
                        ,
                        q.resolveClientLocale = function () {
                            return R()
                        }
                        ,
                        q.storageKey = function () {
                            return H()
                        }
                        ,
                        q.isPostCompilingEnabled = function () {
                            return T
                        }
                        ,
                        q.isForceAsyncReloadEnabled = function () {
                            return k
                        }
                        ,
                        q.isKeepContent = function () {
                            return I
                        }
                        ,
                        q.refresh = function (e) {
                            if (!f)
                                throw new Error("Couldn't refresh translation table, no loader registered!");
                            n.$emit("$translateRefreshStart", {
                                language: e
                            });
                            var t = i.defer()
                                , r = {};
                            function o(e) {
                                var t = X(e);
                                return (W[e] = t).then(function (t) {
                                    w[e] = {},
                                        F(e, t.table),
                                        r[e] = !0
                                }, angular.noop),
                                    t
                            }
                            if (t.promise.then(function () {
                                for (var e in w)
                                    w.hasOwnProperty(e) && (e in r || delete w[e]);
                                l && Y(l)
                            }, angular.noop).finally(function () {
                                n.$emit("$translateRefreshEnd", {
                                    language: e
                                })
                            }),
                                e)
                                w[e] ? o(e).then(t.resolve, t.reject) : t.reject();
                            else {
                                var s = a && a.slice() || [];
                                l && -1 === s.indexOf(l) && s.push(l),
                                    i.all(s.map(o)).then(t.resolve, t.reject)
                            }
                            return t.promise
                        }
                        ,
                        q.instant = function (e, t, n, i, o) {
                            var s = i && i !== l ? j(i) || i : l;
                            if (null === e || angular.isUndefined(e))
                                return e;
                            if (i && oe(i),
                                angular.isArray(e)) {
                                for (var c = {}, u = 0, d = e.length; u < d; u++)
                                    c[e[u]] = q.instant(e[u], t, n, i, o);
                                return c
                            }
                            if (angular.isString(e) && e.length < 1)
                                return e;
                            e && (e = U.apply(e));
                            var h, f, m = [];
                            r && m.push(r),
                                s && m.push(s),
                                a && a.length && (m = m.concat(a));
                            for (var y = 0, b = m.length; y < b; y++) {
                                var $ = m[y];
                                if (w[$] && void 0 !== w[$][e] && (h = ie(e, t, n, s, o)),
                                    void 0 !== h)
                                    break
                            }
                            return h || "" === h || (g || v ? h = G(e) : (h = A.interpolate(e, t, "filter", o),
                                p && !_ && (f = Z(e, t, o)),
                                p && !_ && f && (h = f))),
                                h
                        }
                        ,
                        q.versionInfo = function () {
                            return "2.18.1"
                        }
                        ,
                        q.loaderCache = function () {
                            return y
                        }
                        ,
                        q.directivePriority = function () {
                            return M
                        }
                        ,
                        q.statefulFilter = function () {
                            return O
                        }
                        ,
                        q.isReady = function () {
                            return E
                        }
                        ;
                    var ae = i.defer();
                    ae.promise.then(function () {
                        E = !0
                    }),
                        q.onReady = function (e) {
                            var t = i.defer();
                            return angular.isFunction(e) && t.promise.then(e),
                                E ? t.resolve() : ae.promise.then(t.resolve),
                                t.promise
                        }
                        ,
                        q.getAvailableLanguageKeys = function () {
                            return 0 < $.length ? $ : null
                        }
                        ,
                        q.getTranslationTable = function (e) {
                            return (e = e || q.use()) && w[e] ? angular.copy(w[e]) : null
                        }
                        ;
                    var se = n.$on("$translateReady", function () {
                        ae.resolve(),
                            se(),
                            se = null
                    })
                        , le = n.$on("$translateChangeEnd", function () {
                            ae.resolve(),
                                le(),
                                le = null
                        });
                    if (f) {
                        if (angular.equals(w, {}) && q.use() && q.use(q.use()),
                            a && a.length)
                            for (var ce = function (e) {
                                return F(e.key, e.table),
                                    n.$emit("$translateChangeEnd", {
                                        language: e.key
                                    }),
                                    e
                            }, ue = 0, de = a.length; ue < de; ue++) {
                                var pe = a[ue];
                                !k && w[pe] || (W[pe] = X(pe).then(ce))
                            }
                    } else
                        n.$emit("$translateReady", {
                            language: q.use()
                        });
                    return q
                }
                ]
        }
        function n(e, t) {
            "use strict";
            var n = {
                setLocale: function (e) { },
                getInterpolationIdentifier: function () {
                    return "default"
                },
                useSanitizeValueStrategy: function (e) {
                    return t.useStrategy(e),
                        this
                },
                interpolate: function (n, i, r, o, a) {
                    var s;
                    return i = i || {},
                        i = t.sanitize(i, "params", o, r),
                        angular.isNumber(n) ? s = "" + n : angular.isString(n) ? (s = e(n)(i),
                            s = t.sanitize(s, "text", o, r)) : s = "",
                        s
                }
            };
            return n
        }
        function i(e, t, n, i, r) {
            "use strict";
            var o = function (e) {
                return angular.isString(e) ? e.toLowerCase() : e
            };
            return {
                restrict: "AE",
                scope: !0,
                priority: e.directivePriority(),
                compile: function (a, s) {
                    var l = s.translateValues ? s.translateValues : void 0
                        , c = s.translateInterpolation ? s.translateInterpolation : void 0
                        , u = s.translateSanitizeStrategy ? s.translateSanitizeStrategy : void 0
                        , d = a[0].outerHTML.match(/translate-value-+/i)
                        , p = "^(.*)(" + t.startSymbol() + ".*" + t.endSymbol() + ")(.*)"
                        , h = "^(.*)" + t.startSymbol() + "(.*)" + t.endSymbol() + "(.*)";
                    return function (a, f, m) {
                        a.interpolateParams = {},
                            a.preText = "",
                            a.postText = "",
                            a.translateNamespace = function e(t) {
                                return t.translateNamespace ? t.translateNamespace : t.$parent ? e(t.$parent) : void 0
                            }(a);
                        var g = {}
                            , v = function (e) {
                                if (angular.isFunction(v._unwatchOld) && (v._unwatchOld(),
                                    v._unwatchOld = void 0),
                                    angular.equals(e, "") || !angular.isDefined(e)) {
                                    var n = function () {
                                        return this.toString().replace(/^\s+|\s+$/g, "")
                                    }
                                        .apply(f.text())
                                        , i = n.match(p);
                                    if (angular.isArray(i)) {
                                        a.preText = i[1],
                                            a.postText = i[3],
                                            g.translate = t(i[2])(a.$parent);
                                        var r = n.match(h);
                                        angular.isArray(r) && r[2] && r[2].length && (v._unwatchOld = a.$watch(r[2], function (e) {
                                            g.translate = e,
                                                C()
                                        }))
                                    } else
                                        g.translate = n || void 0
                                } else
                                    g.translate = e;
                                C()
                            }
                            , y = function (e) {
                                m.$observe(e, function (t) {
                                    g[e] = t,
                                        C()
                                })
                            };
                        !function (e, t, n) {
                            if (t.translateValues && angular.extend(e, i(t.translateValues)(a.$parent)),
                                d)
                                for (var r in n)
                                    Object.prototype.hasOwnProperty.call(t, r) && "translateValue" === r.substr(0, 14) && "translateValues" !== r && (e[o(r.substr(14, 1)) + r.substr(15)] = n[r])
                        }(a.interpolateParams, m, s);
                        var b = !0;
                        for (var w in m.$observe("translate", function (e) {
                            void 0 === e ? v("") : "" === e && b || (g.translate = e,
                                C()),
                                b = !1
                        }),
                            m)
                            m.hasOwnProperty(w) && "translateAttr" === w.substr(0, 13) && 13 < w.length && y(w);
                        if (m.$observe("translateDefault", function (e) {
                            a.defaultText = e,
                                C()
                        }),
                            u && m.$observe("translateSanitizeStrategy", function (e) {
                                a.sanitizeStrategy = i(e)(a.$parent),
                                    C()
                            }),
                            l && m.$observe("translateValues", function (e) {
                                e && a.$parent.$watch(function () {
                                    angular.extend(a.interpolateParams, i(e)(a.$parent))
                                })
                            }),
                            d) {
                            var $ = function (e) {
                                m.$observe(e, function (t) {
                                    var n = o(e.substr(14, 1)) + e.substr(15);
                                    a.interpolateParams[n] = t
                                })
                            };
                            for (var S in m)
                                Object.prototype.hasOwnProperty.call(m, S) && "translateValue" === S.substr(0, 14) && "translateValues" !== S && $(S)
                        }
                        var C = function () {
                            for (var e in g)
                                g.hasOwnProperty(e) && void 0 !== g[e] && x(e, g[e], a, a.interpolateParams, a.defaultText, a.translateNamespace)
                        }
                            , x = function (t, n, i, r, o, a) {
                                n ? (a && "." === n.charAt(0) && (n = a + n),
                                    e(n, r, c, o, i.translateLanguage, i.sanitizeStrategy).then(function (e) {
                                        T(e, i, !0, t)
                                    }, function (e) {
                                        T(e, i, !1, t)
                                    })) : T(n, i, !1, t)
                            }
                            , T = function (t, i, r, o) {
                                if (r || void 0 !== i.defaultText && (t = i.defaultText),
                                    "translate" === o) {
                                    (r || !r && !e.isKeepContent() && void 0 === m.translateKeepContent) && f.empty().append(i.preText + t + i.postText);
                                    var a = e.isPostCompilingEnabled()
                                        , l = void 0 !== s.translateCompile
                                        , c = l && "false" !== s.translateCompile;
                                    (a && !l || c) && n(f.contents())(i)
                                } else {
                                    var u = m.$attr[o];
                                    "data-" === u.substr(0, 5) && (u = u.substr(5)),
                                        u = u.substr(15),
                                        f.attr(u, t)
                                }
                            };
                        (l || d || m.translateDefault) && a.$watch("interpolateParams", C, !0),
                            a.$on("translateLanguageChanged", C);
                        var k = r.$on("$translateChangeSuccess", C);
                        f.text().length ? m.translate ? v(m.translate) : v("") : m.translate && v(m.translate),
                            C(),
                            a.$on("$destroy", k)
                    }
                }
            }
        }
        function r(e, t) {
            "use strict";
            return {
                restrict: "A",
                priority: e.directivePriority(),
                link: function (n, i, r) {
                    var a, s, l, c = {}, u = function () {
                        angular.forEach(a, function (t, o) {
                            t && (c[o] = !0,
                                n.translateNamespace && "." === t.charAt(0) && (t = n.translateNamespace + t),
                                e(t, s, r.translateInterpolation, void 0, n.translateLanguage, l).then(function (e) {
                                    i.attr(o, e)
                                }, function (e) {
                                    i.attr(o, e)
                                }))
                        }),
                            angular.forEach(c, function (e, t) {
                                a[t] || (i.removeAttr(t),
                                    delete c[t])
                            })
                    };
                    o(n, r.translateAttr, function (e) {
                        a = e
                    }, u),
                        o(n, r.translateValues, function (e) {
                            s = e
                        }, u),
                        o(n, r.translateSanitizeStrategy, function (e) {
                            l = e
                        }, u),
                        r.translateValues && n.$watch(r.translateValues, u, !0),
                        n.$on("translateLanguageChanged", u);
                    var d = t.$on("$translateChangeSuccess", u);
                    u(),
                        n.$on("$destroy", d)
                }
            }
        }
        function o(e, t, n, i) {
            "use strict";
            t && ("::" === t.substr(0, 2) ? t = t.substr(2) : e.$watch(t, function (e) {
                n(e),
                    i()
            }, !0),
                n(e.$eval(t)))
        }
        function a(e, t) {
            "use strict";
            return {
                compile: function (n) {
                    var i = function (t) {
                        t.addClass(e.cloakClassName())
                    };
                    return i(n),
                        function (n, r, o) {
                            var a = function (t) {
                                t.removeClass(e.cloakClassName())
                            }
                                .bind(this, r)
                                , s = i.bind(this, r);
                            o.translateCloak && o.translateCloak.length ? (o.$observe("translateCloak", function (t) {
                                e(t).then(a, s)
                            }),
                                t.$on("$translateChangeSuccess", function () {
                                    e(o.translateCloak).then(a, s)
                                })) : e.onReady(a)
                        }
                }
            }
        }
        function s() {
            "use strict";
            return {
                restrict: "A",
                scope: !0,
                compile: function () {
                    return {
                        pre: function (e, t, n) {
                            e.translateNamespace = function e(t) {
                                return t.translateNamespace ? t.translateNamespace : t.$parent ? e(t.$parent) : void 0
                            }(e),
                                e.translateNamespace && "." === n.translateNamespace.charAt(0) ? e.translateNamespace += n.translateNamespace : e.translateNamespace = n.translateNamespace
                        }
                    }
                }
            }
        }
        function l() {
            "use strict";
            return {
                restrict: "A",
                scope: !0,
                compile: function () {
                    return function (e, t, n) {
                        n.$observe("translateLanguage", function (t) {
                            e.translateLanguage = t
                        }),
                            e.$watch("translateLanguage", function () {
                                e.$broadcast("translateLanguageChanged")
                            })
                    }
                }
            }
        }
        function c(e, t) {
            "use strict";
            var n = function (n, i, r, o) {
                if (!angular.isObject(i)) {
                    var a = this || {
                        __SCOPE_IS_NOT_AVAILABLE: "More info at https://github.com/angular/angular.js/commit/8863b9d04c722b278fa93c5d66ad1e578ad6eb1f"
                    };
                    i = e(i)(a)
                }
                return t.instant(n, i, r, o)
            };
            return t.statefulFilter() && (n.$stateful = !0),
                n
        }
        function u(e) {
            "use strict";
            return e("translations")
        }
        return e.$inject = ["$translate"],
            t.$inject = ["$STORAGE_KEY", "$windowProvider", "$translateSanitizationProvider", "pascalprechtTranslateOverrider"],
            n.$inject = ["$interpolate", "$translateSanitization"],
            i.$inject = ["$translate", "$interpolate", "$compile", "$parse", "$rootScope"],
            r.$inject = ["$translate", "$rootScope"],
            a.$inject = ["$translate", "$rootScope"],
            c.$inject = ["$parse", "$translate"],
            u.$inject = ["$cacheFactory"],
            angular.module("pascalprecht.translate", ["ng"]).run(e),
            e.displayName = "runTranslate",
            angular.module("pascalprecht.translate").provider("$translateSanitization", function () {
                "use strict";
                var e, t, n, i = null, r = !1, o = !1;
                (n = {
                    sanitize: function (e, t) {
                        return "text" === t && (e = s(e)),
                            e
                    },
                    escape: function (e, t) {
                        return "text" === t && (e = a(e)),
                            e
                    },
                    sanitizeParameters: function (e, t) {
                        return "params" === t && (e = c(e, s)),
                            e
                    },
                    escapeParameters: function (e, t) {
                        return "params" === t && (e = c(e, a)),
                            e
                    },
                    sce: function (e, t, n) {
                        return "text" === t ? e = l(e) : "params" === t && "filter" !== n && (e = c(e, a)),
                            e
                    },
                    sceParameters: function (e, t) {
                        return "params" === t && (e = c(e, l)),
                            e
                    }
                }).escaped = n.escapeParameters,
                    this.addStrategy = function (e, t) {
                        return n[e] = t,
                            this
                    }
                    ,
                    this.removeStrategy = function (e) {
                        return delete n[e],
                            this
                    }
                    ,
                    this.useStrategy = function (e) {
                        return r = !0,
                            i = e,
                            this
                    }
                    ,
                    this.$get = ["$injector", "$log", function (a, s) {
                        var l, c = {};
                        return a.has("$sanitize") && (e = a.get("$sanitize")),
                            a.has("$sce") && (t = a.get("$sce")),
                        {
                            useStrategy: (l = this,
                                function (e) {
                                    l.useStrategy(e)
                                }
                            ),
                            sanitize: function (e, t, l, u) {
                                if (i || r || o || (s.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),
                                    o = !0),
                                    l || null === l || (l = i),
                                    !l)
                                    return e;
                                u || (u = "service");
                                var d, p, h, f, m = angular.isArray(l) ? l : [l];
                                return d = e,
                                    p = t,
                                    h = u,
                                    f = m,
                                    angular.forEach(f, function (e) {
                                        if (angular.isFunction(e))
                                            d = e(d, p, h);
                                        else if (angular.isFunction(n[e]))
                                            d = n[e](d, p, h);
                                        else {
                                            if (!angular.isString(n[e]))
                                                throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '" + e + "'");
                                            if (!c[n[e]])
                                                try {
                                                    c[n[e]] = a.get(n[e])
                                                } catch (t) {
                                                    throw c[n[e]] = function () { }
                                                    ,
                                                    new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '" + e + "'")
                                                }
                                            d = c[n[e]](d, p, h)
                                        }
                                    }),
                                    d
                            }
                        }
                    }
                    ];
                var a = function (e) {
                    var t = angular.element("<div></div>");
                    return t.text(e),
                        t.html()
                }
                    , s = function (t) {
                        if (!e)
                            throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");
                        return e(t)
                    }
                    , l = function (e) {
                        if (!t)
                            throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sce service.");
                        return t.trustAsHtml(e)
                    }
                    , c = function (e, t, n) {
                        if (angular.isDate(e))
                            return e;
                        if (angular.isObject(e)) {
                            var i = angular.isArray(e) ? [] : {};
                            if (n) {
                                if (-1 < n.indexOf(e))
                                    throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")
                            } else
                                n = [];
                            return n.push(e),
                                angular.forEach(e, function (e, r) {
                                    angular.isFunction(e) || (i[r] = c(e, t, n))
                                }),
                                n.splice(-1, 1),
                                i
                        }
                        return angular.isNumber(e) ? e : !0 === e || !1 === e ? e : angular.isUndefined(e) || null === e ? e : t(e)
                    }
            }),
            angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider", {}).provider("$translate", t),
            t.displayName = "displayName",
            angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation", n),
            n.displayName = "$translateDefaultInterpolation",
            angular.module("pascalprecht.translate").constant("$STORAGE_KEY", "NG_TRANSLATE_LANG_KEY"),
            angular.module("pascalprecht.translate").directive("translate", i),
            i.displayName = "translateDirective",
            angular.module("pascalprecht.translate").directive("translateAttr", r),
            r.displayName = "translateAttrDirective",
            angular.module("pascalprecht.translate").directive("translateCloak", a),
            a.displayName = "translateCloakDirective",
            angular.module("pascalprecht.translate").directive("translateNamespace", s),
            s.displayName = "translateNamespaceDirective",
            angular.module("pascalprecht.translate").directive("translateLanguage", l),
            l.displayName = "translateLanguageDirective",
            angular.module("pascalprecht.translate").filter("translate", c),
            c.displayName = "translateFilterFactory",
            angular.module("pascalprecht.translate").factory("$translationCache", u),
            u.displayName = "$translationCache",
            "pascalprecht.translate"
    }),
    function (e, t, n) {
        "use strict";
        t.module("ngCookies", ["ng"]).factory("$cookies", ["$rootScope", "$browser", function (e, n) {
            var i, r = {}, o = {}, a = !1, s = t.copy, l = t.isUndefined;
            return n.addPollFn(function () {
                var t = n.cookies();
                i != t && (i = t,
                    s(t, o),
                    s(t, r),
                    a && e.$apply())
            })(),
                a = !0,
                e.$watch(function () {
                    var e, i, a;
                    for (e in o)
                        l(r[e]) && n.cookies(e, void 0);
                    for (e in r)
                        i = r[e],
                            t.isString(i) ? i !== o[e] && (n.cookies(e, i),
                                a = !0) : t.isDefined(o[e]) ? r[e] = o[e] : delete r[e];
                    if (a)
                        for (e in i = n.cookies(),
                            r)
                            r[e] !== i[e] && (l(i[e]) ? delete r[e] : r[e] = i[e])
                }),
                r
        }
        ]).factory("$cookieStore", ["$cookies", function (e) {
            return {
                get: function (n) {
                    return (n = e[n]) ? t.fromJson(n) : n
                },
                put: function (n, i) {
                    e[n] = t.toJson(i)
                },
                remove: function (t) {
                    delete e[t]
                }
            }
        }
        ])
    }(window, window.angular),
    function (e, t) {
        "function" == typeof define && define.amd ? define([], function () {
            return t()
        }) : "object" == typeof module && module.exports ? module.exports = t() : t()
    }(0, function () {
        function e(e) {
            "use strict";
            var t;
            if (1 === angular.version.major && 4 <= angular.version.minor) {
                var n = e.get("$cookies");
                t = {
                    get: function (e) {
                        return n.get(e)
                    },
                    put: function (e, t) {
                        n.put(e, t)
                    }
                }
            } else {
                var i = e.get("$cookieStore");
                t = {
                    get: function (e) {
                        return i.get(e)
                    },
                    put: function (e, t) {
                        i.put(e, t)
                    }
                }
            }
            return {
                get: function (e) {
                    return t.get(e)
                },
                set: function (e, n) {
                    t.put(e, n)
                },
                put: function (e, n) {
                    t.put(e, n)
                }
            }
        }
        return e.$inject = ["$injector"],
            angular.module("pascalprecht.translate").factory("$translateCookieStorage", e),
            e.displayName = "$translateCookieStorage",
            "pascalprecht.translate"
    }),
    function (e, t) {
        "function" == typeof define && define.amd ? define([], function () {
            return t()
        }) : "object" == typeof module && module.exports ? module.exports = t() : t()
    }(0, function () {
        function e(e, t) {
            "use strict";
            return function (n) {
                if (!n || !(angular.isArray(n.files) || angular.isString(n.prefix) && angular.isString(n.suffix)))
                    throw new Error("Couldn't load static files, no files and prefix or suffix specified!");
                n.files || (n.files = [{
                    prefix: n.prefix,
                    suffix: n.suffix
                }]);
                for (var i = function (i) {
                    if (!i || !angular.isString(i.prefix) || !angular.isString(i.suffix))
                        throw new Error("Couldn't load static file, no prefix or suffix specified!");
                    var r = [i.prefix, n.key, i.suffix].join("");
                    return angular.isObject(n.fileMap) && n.fileMap[r] && (r = n.fileMap[r]),
                        t(angular.extend({
                            url: r,
                            method: "GET"
                        }, n.$http)).then(function (e) {
                            return e.data
                        }, function () {
                            return e.reject(n.key)
                        })
                }, r = [], o = n.files.length, a = 0; a < o; a++)
                    r.push(i({
                        prefix: n.files[a].prefix,
                        key: n.key,
                        suffix: n.files[a].suffix
                    }));
                return e.all(r).then(function (e) {
                    for (var t = e.length, n = {}, i = 0; i < t; i++)
                        for (var r in e[i])
                            n[r] = e[i][r];
                    return n
                })
            }
        }
        return e.$inject = ["$q", "$http"],
            angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader", e),
            e.displayName = "$translateStaticFilesLoader",
            "pascalprecht.translate"
    });
var send = function (e, t, n, i, r) {
    var o = new XMLHttpRequest;
    o.onreadystatechange = function () {
        4 === o.readyState && i(o.responseText, o.status)
    }
        ;
    let a = generateUrl(r, t);
    o.open(e, a, !0),
        o.setRequestHeader("Content-Type", "application/json"),
        void 0 !== n ? o.send(JSON.stringify(n)) : o.send()
}
    , generateUrl = function (e, t) {
        let n;
        if (void 0 !== e)
            n = e + t;
        else {
            n = new URL(document.URL).origin + t
        }
        return n
    }
    , onResponse = function (e) {
        if (e)
            try {
                console.info("Result:", JSON.parse(e))
            } catch (t) {
                console.info("Result:", e)
            }
        else
            console.info("Null")
    }
    , mixStream = function (e, t, n, i) {
        send("PATCH", "/rooms/" + e + "/streams/" + t, [{
            op: "add",
            path: "/info/inViews",
            value: n
        }], onResponse, i)
    }
    , startStreamingIn = function (e, t, n) {
        send("POST", "/rooms/" + e + "/streaming-ins", {
            url: t,
            media: {
                audio: "auto",
                video: !0
            },
            transport: {
                protocol: "udp",
                bufferSize: 2048
            }
        }, onResponse, n)
    }
    , createToken = function (e, t, n, i = "", r, o) {
        send("POST", "/tokens/", {
            room: e,
            userId: t,
            role: n,
            properties: i
        }, r, o)
    }
    , getSipCalls = function (e, t, n, i) {
        send("GET", "/rooms/" + e + "/sipcalls/", void 0, function (e) {
            var n = JSON.parse(e);
            t(n)
        }, i)
    }
    , startStreamingOut = function (e, t, n, i) {
        send("POST", "/rooms/" + e + "/streaming-outs/", t, n, i)
    };
window.makeSipCall = function (e, t, n, i, r, o) {
    send("POST", "rooms/" + e + "/sipcalls/", {
        peerURI: t,
        mediaIn: n,
        mediaOut: i
    }, function (e) {
        console.log(e)
    }, o)
}
    ;
var wy_room = angular.module("wy_room", ["ui.router", "pascalprecht.translate", "ngCookies", "ui.bootstrap"]);
function getToastClass(e) {
    var t;
    switch (e) {
        case 1:
            t = "success";
            break;
        case 2:
            t = "error";
            break;
        case 3:
            t = "warn";
            break;
        case 4:
            t = "info";
            break;
        default:
            t = "undefined"
    }
    return t
}
function Participant(e, t, n = {}, i = [], r = []) {
    this.userid = e,
        this.participantId = t,
        this.streams = i,
        this.subscriptions = r,
        this.properties = n,
        this.constraints = {
            audio: !1
        }
}
wy_room.config(["$translateProvider", function (e) {
    e.useStaticFilesLoader({
        prefix: "i18n/",
        suffix: ".json?t=" + new Date
    });
    let t = window.localStorage.getItem("system-language");
    if (null == t || 0 == t.length) {
        let e = window.navigator.language.toLowerCase();
        t = e.indexOf("zh-cn") > -1 ? "zh" : e.indexOf("zh-tw") > -1 ? "tr" : e.indexOf("ja") > -1 ? "jp" : e.indexOf("en") > -1 ? "en" : e.indexOf("ko") > -1 ? "kr" : "zh",
            window.localStorage.setItem("system-language", t)
    }
    e.preferredLanguage(t)
}
]).config(["$urlRouterProvider", "$stateProvider", function (e, t) {
    e.otherwise("login"),
        t.state("login", {
            url: "/login",
            templateUrl: "angular/controller/login/login.html?t=" + new Date,
            controller: "loginController",
            cache: !1
        }).state("room", {
            url: "/room",
            templateUrl: "angular/controller/room/room.html?t=" + new Date,
            controller: "roomController",
            cache: !1
        }).state("phone", {
            url: "/phone",
            templateUrl: "angular/controller/phone/phone.html?t=" + new Date,
            controller: "phoneController",
            cache: !1
        }).state("mobile", {
            url: "/mobile",
            templateUrl: "angular/controller/mobile/mobile.html?t=" + new Date,
            controller: "mobileController",
            cache: !1
        })
}
]),
    wy_room.controller("roomController", ["$rootScope", "$scope", "$translate", "$state", "conferenceService", "userStateService", "participantService", "messageService", "joinInfoService", "recordService", "$sce", function (e, t, n, i, r, o, a, s, l, c, u) {
        document.onselectstart = function (e) {
            let t = $(e.target);
            return 0 != t.closest(".message-list").length || 0 != t.closest(".invitationArea").length || 0 != t.closest(".OP-area").length
        }
            ,
            document.ondragstart = function (e) {
                return !1
            }
            ,
            history.pushState(null, null, document.URL),
            window.addEventListener("popstate", function () {
                history.pushState(null, null, document.URL)
            });
        let d = document.getElementById("dynamicPPT")
            , p = 0
            , h = 0
            , f = !0;
        conference = r.getConference(),
            window.copyUrl = function () {
                t.room.copyUrl()
            }
            ;
        let m = !0;
        window.changeLanguage = function () {
            return m ? n.use("en") : n.use("zh"),
                m = !m
        }
            ;
        let g = !1
            , v = null;
        const y = 1190
            , b = [{
                width: 320,
                height: 180,
                text: n.instant("room.fluent"),
                value: 0,
                bitrate: 100
            }, {
                width: 640,
                height: 360,
                text: n.instant("room.standard"),
                value: 1,
                bitrate: 376
            }, {
                width: 1280,
                height: 720,
                text: n.instant("room.hd"),
                value: 2,
                bitrate: 1536
            }, {
                width: 1920,
                height: 1080,
                text: n.instant("room.ultra"),
                value: 3,
                bitrate: 3072
            }, {
                width: 2048,
                height: 1080,
                text: n.instant("room.2K"),
                value: 4,
                bitrate: 8e3
            }, {
                width: 4096,
                height: 2160,
                text: n.instant("room.4K"),
                value: 5,
                bitrate: 16e3
            }, {
                width: 1024,
                height: 768,
                text: n.instant("room.1024"),
                value: 6,
                bitrate: 1536
            }]
            , w = [8, 10, 15, 20, 25, 30, 60]
            , S = [n.instant("setting.device-select"), "Pelco-D", "Pelco-P", "Sony D31", "Sony D70", "Sony D100", "Canon VC-C50i", "ELMO"]
            , C = [n.instant("setting.port-select"), "COM1", "COM2", "COM3", "COM4", "COM5", "COM6", "COM7", "COM8"]
            , x = [n.instant("setting.borderWidth"), 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]
            , T = [{
                name: "zh",
                desc: "简体"
            }, {
                name: "tr",
                desc: "繁體"
            }, {
                name: "en",
                desc: "English"
            }, {
                name: "jp",
                desc: "日本語"
            }];
        let k = window.localStorage.getItem("system-language");
        let P, E, I, M, O, D = $(".anyone-speaking")[0], A = $(".anyone-speaking .isSpeaking-ico")[0], _ = $("body>div")[0];
        function R(e, t) {
            D.style.right = e + "px",
                D.style.top = t + "px"
        }
        function L(e) {
            P = D.offsetLeft;
            E = D.offsetTop;
            I = e.clientX;
            M = e.clientY;
            let t = I - P;
            let n = M - E;
            let i = _.offsetWidth - D.offsetWidth;
            let r = _.offsetHeight - D.offsetHeight;
            document.addEventListener("mousemove", o);
            function o(e) {
                A.style.cursor = "move";
                let o = e.clientX - t;
                let a = e.clientY - n;
                O = i - o;
                if (o <= 0) {
                    o = 0;
                    O = i
                }
                if (o >= i) {
                    o = i;
                    O = 0
                }
                if (a <= 0) {
                    a = 0
                }
                if (a >= r) {
                    a = r
                }
                R(O, a)
            }
            document.addEventListener("mouseup", a);
            function a() {
                A.style.cursor = "pointer",
                    document.removeEventListener("mousemove", o),
                    document.removeEventListener("mousedown", L)
            }
            e.preventDefault()
        }
        A.addEventListener("mousedown", function (e) {
            P = D.offsetLeft;
            E = D.offsetTop;
            I = e.clientX;
            M = e.clientY;
            let t = I - P;
            let n = M - E;
            let i = _.offsetWidth - D.offsetWidth;
            let r = _.offsetHeight - D.offsetHeight;
            document.addEventListener("mousemove", o);
            function o(e) {
                A.style.cursor = "move";
                let o = e.clientX - t
                    , a = e.clientY - n;
                O = i - o,
                    o <= 0 && (o = 0,
                        O = i),
                    o >= i && (o = i,
                        O = 0),
                    a <= 0 && (a = 0),
                    a >= r && (a = r),
                    function (e, t) {
                        D.style.right = e + "px",
                            D.style.top = t + "px"
                    }(O, a)
            }
            document.addEventListener("mouseup", function () {
                A.style.cursor = "pointer",
                    document.removeEventListener("mousemove", o),
                    document.removeEventListener("mousedown", L)
            });
            e.preventDefault()
        });
        const U = {
            pc: {
                presenter: "img/com_user_pc.png",
                chairman: "img/ChairMan16_pc.png",
                speaker: "img/MainSpeaker_pc.png",
                applySpeaker: "img/ApplyMainSpeaker_pc.png"
            },
            cam: {
                on: "img/userlist_cam-1.png",
                off: "img/userlist_cam-8.png"
            },
            mic: {
                on: "img/userlist_mic-1.png",
                off: "img/userlist_mic-8.png",
                speaking: "img/user-audio-speaking.gif"
            }
        }
            , N = {
                presenter: "presenter",
                chairman: "chairman",
                speaker: "speaker",
                stealth: "stealth",
                applySpeaker: "applySpeaker"
            };
        let j = l.getJoinInfo()
            , F = j.userid
            , B = j.roomid
            , V = j.serial
            , z = j.username
            , H = j.companyid
            , W = j.docServer
            , q = j.mediaServer
            , G = j.np1WebUrl
            , Y = j.sig
            , X = j.newstarttime
            , J = j.invisible
            , K = j.joinRole
            , Q = j.useCustomRoomPic
            , Z = j.roomPicPath
            , ee = j.exitRoomUrl;
        if (0 == Object.keys(j).length)
            return void i.go("login");
        let te = j.settings
            , ne = te.videoInputDefault
            , ie = te.audioInputDefault
            , re = te.audioOutputDefault
            , oe = void 0 == te.videoQualities ? [] : te.videoQualities
            , ae = oe
            , se = te.volume
            , le = te.needVideoInputs
            , ce = te.excitation
            , ue = te.voiceAnalyse
            , de = []
            , pe = []
            , he = te.isRegist;
        t.room = {
            useCustomRoomPic: Q,
            roomPicPath: Z,
            settingSubAreas: ["fileAreaShow", "isApplyChairmanShow", "isSettingShow", "isLayoutChangeShow", "raiseHandShow", "invitationShow", "exitRoomShow", "liveSettingShow"],
            selectPushWindowShow: !1,
            openLocalVideoClick: !1,
            openRemoteClick: !1,
            openLocalVideoDownClick: !1,
            openWhiteBoardClick: !1,
            openLayoutClick: !1,
            openLocalAudioClick: !1,
            openSpeakerClick: !1,
            openRecordClick: !1,
            deleteFileClick: !1,
            isSharingAndStopFrame: !1,
            speakerUsers: [],
            speakerName: [],
            speakerFrameShow: !1,
            deleteDocument: !1,
            leaveTheMeeting: !1,
            liveSettingShow: !1,
            fileID: "",
            $event: "",
            popUpsTitle: "",
            popUpsContent: "",
            checkChairManPassword: !1,
            expandLeft: !0,
            isMultiScreen: !1,
            hasMultiScreen: !1,
            borderAreaBottomShow: !0,
            videoListRightShow: !0,
            screenNumber: 1,
            opener: null,
            language: k,
            docServer: W,
            mediaServer: q,
            np1WebUrl: G,
            participants: [],
            leftPanelShow: !0,
            name: j.meetingname,
            excitation: ce,
            voiceAnalyse: ue,
            eduMode: te.eduMode,
            eduModeReal: te.eduMode,
            serial: V,
            createUserid: j.createUserid,
            userpwd: "",
            chairmanpwd: j.chairmanpwd,
            sig: Y,
            newstarttime: X,
            companyid: H,
            recordTime: "00:00:00",
            recordShow: !0,
            OPShow: !0,
            OPBtnShow: !1,
            showSnail: !0,
            noReadCount: 0,
            showSendUser: !1,
            chooseSendUser: "all",
            currentSendUser: null,
            searchValue: "",
            fileSearchValue: "",
            needPwd: 0,
            isShow: !0,
            remoteVideoClicked: {},
            chairmanControl: {
                allowSpeak: !0,
                allowApplySpeaker: !0
            },
            inviteIsShow: !1,
            inviteTemplate: "",
            isSettingShow: !1,
            settingCurrentPanel: "audio",
            isApplyChairmanShow: !1,
            chairManSettingShow: !1,
            isLayoutChangeShow: !1,
            recordCallbackValue: -1,
            hasShareScreen: !1,
            currentLayout: "mainSub",
            currentLeftPanel: "userPanel",
            currentMainPage: "whiteboard",
            currentVideoCount: 0,
            roles: N,
            loading: !1,
            subscriptions: {},
            noPermision: {
                upload: !1,
                functionMore: !1,
                pwdError: !1
            },
            functionMoreShow: !1,
            msgListShow: !0,
            membersListShow: !0,
            fileAreaShow: !1,
            raiseHandShow: !1,
            isRaiseHand: !1,
            raiseHandUserList: [],
            invitationShow: !1,
            meetingNewURL: "",
            invitationImgUrl: "",
            isCopyShow: !1,
            shareCommitShow: !1,
            whiteboardShow: !1,
            fastVideoShow: !1,
            fastAudioShow: !1,
            exitRoomShow: !1,
            currentDocPanel: "view",
            isSharing: !1,
            userVideoCounting: 0,
            chairmanVersion: j.chairmanVersion,
            chairmanControlStatus: {
                isOpen: 0,
                autoAudio: j.autoAudio,
                autoSpeaker: j.autoSpeaker,
                autoRaiseHand: j.autoRaiseHand,
                autoRecord: j.autoRecord,
                globalSynchronize: j.globalSynchronize,
                manualSynchronize: j.manualSynchronize,
                chairmanUserId: ""
            },
            chairmanControlStatusCopy: {},
            selectedParticipant: {
                userid: "",
                videoDeviceId: "",
                isManual: !1,
                state: 0,
                isAudioOn: 0,
                role: "",
                isOnDesk: !1
            },
            isFullScreen: !1,
            dynamicPPTCanDraw: !1,
            isLiving: !1,
            liveUrl: "",
            secondLive: {
                isOpen: !1,
                opener: null
            },
            liveSetting: {
                quality: 0,
                pushType: 0,
                secondLiveSettings: [],
                settingIndex: 0,
                pushWindow: 0
            },
            changeLiveSetting: function (e) {
                if (t.room.secondLive.isOpen) {
                    if (e == t.room.liveSetting.settingIndex)
                        return;
                    t.room.liveSetting.settingIndex = e,
                        t.room.secondLive.opener.window.changeLiveSetting(e)
                } else
                    t.room.liveSetting.settingIndex = e,
                        t.room.secondLive.opener = window.open(webAPI + "/h5/live/index.html?screenIndex=1&settingIndex=" + e),
                        t.room.secondLive.isOpen = !0;
                let n = getArrIndexBy2Params(t.room.liveSetting.secondLiveSettings, t.room.liveSetting.settingIndex, "settingIndex")
                    , i = t.room.liveSetting.secondLiveSettings[n].thumbnail;
                $(".c-thumbnail span").css("background-image", `url("${i}")`)
            },
            closeLivePreview: function () {
                t.room.secondLive.opener.window.closeWindow()
            },
            removeLiveSetting: function () {
                if (0 != t.room.liveSetting.settingIndex) {
                    let e = getArrIndexBy2Params(t.room.liveSetting.secondLiveSettings, t.room.liveSetting.settingIndex, "settingIndex");
                    if (t.room.liveSetting.secondLiveSettings.splice(e, 1),
                        pc.setItem("settings", JSON.stringify(t.room.liveSetting.secondLiveSettings)),
                        t.room.liveSetting.secondLiveSettings.length > 0 ? t.room.liveSetting.settingIndex = t.room.liveSetting.secondLiveSettings[0].settingIndex : t.room.liveSetting.settingIndex = 0,
                        0 != t.room.liveSetting.settingIndex) {
                        let e = getArrIndexBy2Params(t.room.liveSetting.secondLiveSettings, t.room.liveSetting.settingIndex, "settingIndex")
                            , n = t.room.liveSetting.secondLiveSettings[e].thumbnail;
                        $(".c-thumbnail span").css("background-image", `url("${n}")`)
                    } else
                        $(".c-thumbnail span").css("background-image", "none");
                    pc.setItem("settingIndex", JSON.stringify(t.room.liveSetting.settingIndex)),
                        t.room.secondLive.isOpen && t.room.secondLive.opener.window.updateLiveSettings(t.room.liveSetting.secondLiveSettings, t.room.liveSetting.settingIndex)
                }
            },
            addLiveSetting: function () {
                t.room.secondLive.isOpen ? t.room.secondLive.opener.window.addLiveSetting() : (t.room.secondLive.isOpen = !0,
                    t.room.secondLive.opener = window.open(webAPI + "/h5/live/index.html?screenIndex=1&settingIndex=0"))
            },
            startOrStopLive: function () {
                if ($(".more-icon").removeClass("active"),
                    $(".more-icon .more-area").hide(),
                    t.room.checkIsWebView()) {
                    if (t.room.isLiving)
                        return pc.stopPublish(),
                            t.room.isLiving = !1,
                            $(".main-panel").children(".user-video").each(function () {
                                let e = $(this);
                                t.room.refreshSubscribe(e)
                            }),
                            void (t.room.secondLive.isOpen && t.room.secondLive.opener.window.changeIsLive(!1))
                } else if (null != o.getLiveStream())
                    return o.getLiveStream().mediaStream.getVideoTracks()[0].stop(),
                        o.getLiveStream().mediaStream && o.getLiveStream().mediaStream.getAudioTracks()[0] && o.getLiveStream().mediaStream.getAudioTracks()[0].stop(),
                        o.setLiveStream(null),
                        o.getLivePublication() && o.getLivePublication().stop(),
                        o.setLivePublication(null),
                        void (t.room.isLiving = !1);
                $.ajax({
                    url: getLiveInfoAPI + "/" + V,
                    type: "get",
                    dataType: "json",
                    success: function (e) {
                        if (0 == e.result)
                            if (t.room.liveUrl = e.pushurl,
                                t.room.checkIsWebView())
                                t.room.getCommand().then(function (e) {
                                    t.room.hasMultiScreen ? 0 == t.room.liveSetting.settingIndex ? (pc.startPublish(e),
                                        t.$apply(function () {
                                            t.room.isLiving = !0
                                        })) : t.literally.popUpsShow("selectPushWindow", "", "") : (pc.startPublish(e),
                                            t.$apply(function () {
                                                t.room.isLiving = !0
                                            }))
                                });
                            else {
                                let e = {
                                    audio: !0,
                                    video: {
                                        width: 1920,
                                        height: 1080,
                                        frameRate: 60
                                    }
                                };
                                navigator.mediaDevices.getDisplayMedia(e).then(i => {
                                    !function (i) {
                                        i.getVideoTracks()[0];
                                        if (e.audio = i.getAudioTracks().length > 0,
                                            !e.audio && !confirm(n.instant("room.noAudioContinue")))
                                            return void i.getVideoTracks()[0].stop();
                                        c.connectLiveStream(i);
                                        var r = new MediaStream([i.getVideoTracks()[0], c.getLiveOutPutStream().getTracks()[0]]);
                                        let a = new Wy.Base.LocalStream(r, new Wy.Base.StreamSourceInfo("screen-cast", "screen-cast"), {
                                            type: "live",
                                            mediaConstraints: e,
                                            userId: t.localUser.userid
                                        });
                                        o.setLiveStream(a),
                                            i.getVideoTracks()[0].onended = (e => {
                                                i = null,
                                                    o.getLivePublication() && o.getLivePublication().stop(),
                                                    o.setLivePublication(null),
                                                    o.setLiveStream(null),
                                                    t.room.digstRefresh(function () {
                                                        t.room.isLiving = !1
                                                    })
                                            }
                                            );
                                        conference.publish(a, {
                                            video: {
                                                width: 1920,
                                                height: 1080,
                                                frameRate: 60,
                                                encodingParameters: [{
                                                    codec: {
                                                        name: "h264"
                                                    },
                                                    minBitrate: 3072,
                                                    maxBitrate: 3072
                                                }]
                                            }
                                        }).then(e => {
                                            e.addEventListener("error", e => {
                                                console.log("Publication error: " + e.error.message)
                                            }
                                            ),
                                                o.setLivePublication(e)
                                        }
                                            , e => {
                                                i.getTracks()[0].stop(),
                                                    alert(n.instant("room.liveError"))
                                            }
                                        )
                                    }(i)
                                }
                                )
                            }
                        else
                            alert(n.instant("room.liveError"))
                    },
                    error: function () {
                        alert(n.instant("room.liveError"))
                    }
                })
            },
            getCommand: function () {
                return new Promise((e, n) => {
                    ve().then(() => {
                        let n = getArrIndex(de, t.localUser.audioInputDefault, "deviceId")
                            , i = getArrIndex(pe, t.localUser.audioOutputDefault, "deviceId")
                            , r = ""
                            , o = ""
                            , a = ""
                            , s = ""
                            , l = ""
                            , c = ""
                            , u = "";
                        if (s = 0 == t.room.liveSetting.pushType ? "--screen 0" : "--window 0",
                            1 == t.room.liveSetting.pushWindow && (s = "--screen 1"),
                            -1 != n) {
                            let e = de[n].label
                                , t = getLastKuoHao(e);
                            t.totalCompleteKuoHao > 1 && (e = e.substring(0, t.lastCompleteKuoHaoStartIndex)),
                                o = `--microphone "${e = e.trim()}"`
                        }
                        -1 != i && (a = '--speaker "默认"');
                        let d = t.room.liveUrl.lastIndexOf("/");
                        l = `--path "${t.room.liveUrl.substring(0, d)}"`,
                            c = `--key "${t.room.liveUrl.substring(d + 1)}"`,
                            0 == t.room.liveSetting.quality ? u = '--size "1920x1080"' : 1 == t.room.liveSetting.quality ? u = '--size "1280x720"' : 2 == t.room.liveSetting.quality && (u = '--size "640x360"'),
                            e(r = `wyobs/bin/32bit/wyobs.exe ${s} ${o} ${a} ${u} --type s ${l} ${c}`)
                    }
                    )
                }
                )
            },
            startLive: function (e) {
                let i = {
                    protocol: "rtmp",
                    url: t.room.liveUrl,
                    parameters: void 0,
                    media: {
                        audio: !!e.attributes.mediaConstraints.audio && {
                            from: e.id
                        },
                        video: {
                            from: e.id
                        }
                    }
                };
                startStreamingOut(B, i, function (e, i) {
                    200 == i ? (t.room.isLiving = !0,
                        t.$applyAsync()) : (t.room.newChatAppend(n.instant("errorMsg.1015")),
                            t.room.startOrStopLive())
                }, q)
            },
            getStatus: function () {
                let e = t.room.currentLayout
                    , n = {
                        controlName: "getStatus",
                        data: {
                            membersShow: t.room.membersListShow,
                            msgShow: t.room.msgListShow,
                            currentLayout: e,
                            volume: se
                        }
                    };
                r.send("feedback", "huikong", "", n, ""),
                    t.room.syncChairmanUserVideoToHuikong()
            },
            controlChairman: function (e) {
                let n = e.controlName;
                if ("getStatus" == n)
                    t.room.getStatus();
                else if ("volume" == n)
                    se = e.data.volume,
                        $(".audio-this-setbacks").css("width", se + "%"),
                        $(".volume").html(se),
                        $("audio").each(function () {
                            $(this).get(0).volume = se / 100
                        });
                else if ("openOrCloseVideo" == n) {
                    let n = e.data.videoDeviceId
                        , i = e.data.userId;
                    if (i == t.localUser.userid)
                        t.room.openOrStopLocalVideo(n, !0, !1, "", !1);
                    else {
                        let e = a.getParticipantByUserid(i);
                        t.room.openOrStopRemoteVideo(e, n, !1, !1, !1, !0)
                    }
                } else if ("openOrCloseAudio" == n) {
                    let n = e.data.userId;
                    if (n == t.localUser.userid)
                        t.room.openOrStopLocalAudio(t.localUser.audioInputDefault);
                    else {
                        let e = a.getParticipantByUserid(n);
                        t.room.openOrStopRemoteAudio(e)
                    }
                } else if ("setOrCancelSpeaker" == n) {
                    let n = e.data.userId
                        , i = a.getParticipantByUserid(n);
                    i.properties.role == t.room.roles.presenter ? t.room.applyPermission(i, "applySpeaker", "apply") : t.room.applyPermission(i, "applySpeaker", "cancel")
                } else if ("setHostVideo" == n) {
                    let n = e.data.videoDeviceId
                        , i = e.data.userId
                        , r = $(`.user-video[data-userid="${i}"][data-videoDeviceId="${n}"]`);
                    if (i == t.localUser.userid)
                        0 == r.length ? t.room.openOrStopLocalVideo(n, !0, !1, "", !0, !0, !0) : (r.attr("data-index", "-1"),
                            t.room.changeVideoPartDisplay());
                    else {
                        let e = a.getParticipantByUserid(i);
                        0 == r.length ? t.room.openOrStopRemoteVideo(e, n, !0, !0) : (r.attr("data-index", "-1"),
                            t.room.changeVideoPartDisplay())
                    }
                } else if ("setManuallySync" == n)
                    t.room.chairmanControlStatus.manualSynchronize = 0 == t.room.chairmanControlStatus.manualSynchronize ? 1 : 0,
                        1 == t.room.chairmanControlStatus.manualSynchronize && (t.room.chairmanControlStatus.globalSynchronize = 0),
                        t.room.updateChairmanControl();
                else if ("setGlobalSync" == n)
                    t.room.chairmanControlStatus.globalSynchronize = 0 == t.room.chairmanControlStatus.globalSynchronize ? 1 : 0,
                        1 == t.room.chairmanControlStatus.globalSynchronize && (t.room.chairmanControlStatus.manualSynchronize = 0),
                        t.room.updateChairmanControl();
                else if ("setLayout" == n) {
                    let n = e.data.layout;
                    t.room.changeLayout(n),
                        t.room.getStatus()
                } else if ("toggleMembersShow" == n)
                    t.room.membersListShow = !t.room.membersListShow,
                        t.room.getStatus();
                else if ("toggleMsgShow" == n)
                    t.room.msgListShow = !t.room.msgListShow,
                        t.room.getStatus();
                else if ("toggleAllowAllAudio" == n)
                    t.room.chairmanControlStatus.autoAudio = 0 == t.room.chairmanControlStatus.autoAudio ? 1 : 0,
                        t.room.updateChairmanControl();
                else if ("toggleAllowAllRaiseHand" == n)
                    t.room.chairmanControlStatus.autoRaiseHand = 0 == t.room.chairmanControlStatus.autoRaiseHand ? 1 : 0,
                        t.room.updateChairmanControl();
                else if ("toggleAllowAllRecord" == n)
                    t.room.chairmanControlStatus.autoRecord = 0 == t.room.chairmanControlStatus.autoRecord ? 1 : 0,
                        t.room.updateChairmanControl();
                else if ("toggleAllowAllApplySpeaker" == n)
                    t.room.chairmanControlStatus.autoSpeaker = 0 == t.room.chairmanControlStatus.autoSpeaker ? 1 : 0,
                        t.room.updateChairmanControl();
                else if ("setOrCancelDesktop" == n) {
                    let n = e.data.videoDeviceId
                        , i = e.data.userId
                        , r = $(`.user-video[data-userid="${i}"][data-videoDeviceId="${n}"]`);
                    if (t.room.selectedParticipant.userid = i,
                        t.room.selectedParticipant.videoDeviceId = n,
                        t.room.selectedParticipant.userid == t.localUser.userid)
                        t.room.selectedParticipant.state = t.localUser.properties.state,
                            t.room.selectedParticipant.isAudioOn = null != o.getLocalAudioStream(),
                            t.room.selectedParticipant.role = t.localUser.properties.role;
                    else {
                        let e = a.getParticipantByUserid(t.room.selectedParticipant.userid);
                        t.room.selectedParticipant.state = e.properties.state,
                            t.room.selectedParticipant.isAudioOn = e.constraints.audio,
                            t.room.selectedParticipant.role = e.properties.role
                    }
                    "true" == r.attr("data-isManual") ? t.room.selectedParticipant.isManual = !0 : t.room.selectedParticipant.isManual = !1,
                        "true" == r.attr("data-isOnDesk") ? t.room.selectedParticipant.isOnDesk = !0 : t.room.selectedParticipant.isOnDesk = !1,
                        t.room.setOrCancelDesktop(t.room.selectedParticipant, n)
                } else if ("changeChairman" == n) {
                    let n = e.data.userId
                        , i = a.getParticipantByUserid(n);
                    t.room.applyPermission(i, "applyChairman", "apply")
                }
                t.$applyAsync()
            },
            showWhiteboard: function (e = !1, i = !1) {
                1 != t.room.chairmanControlStatus.isOpen || 1 != t.room.chairmanControlStatus.manualSynchronize && 1 != t.room.chairmanControlStatus.globalSynchronize || t.localUser.properties.role == t.room.roles.chairman || e ? (t.room.whiteboardShow = !t.room.whiteboardShow,
                    t.room.whiteboardShow ? $(".left-panel").removeClass("forceHide") : ($(".left-panel").addClass("forceHide"),
                        $(".left-panel").attr("data-index", "-9999")),
                    e && !i || t.room.changeVideoPartDisplay(!1, !0)) : t.room.newChatAppend(n.instant("room.syncModeOnWhiteboardTooltip"), "openWhiteBoardClick")
            },
            openOrStopFullScreen: function () {
                t.room.isFullScreen = !t.room.isFullScreen,
                    t.room.checkIsWebView() ? pc.maximizeWindow() : t.room.isFullScreen ? fullScreen($("html")[0]) : exitFullScreen($("html")[0])
            },
            agreeSetDesktop: function (e) {
                let n = "1";
                e.properties.state >= 2 && (n = e.properties.cameras[0]);
                let i = $(`.user-video[data-userid="${e.userid}"][data-videoDeviceId="${n}"]`);
                "true" != i.attr("data-isOnDesk") && (1 != e.properties.state && 3 != e.properties.state || e.constraints.audio || t.room.openOrStopRemoteAudio(e),
                    e.properties.state >= 2 && (0 == i.length ? t.room.openOrStopRemoteVideo(e, n, !0, !0) : (i.attr("data-index", "-1"),
                        i.attr("data-isOnDesk", !0),
                        t.room.changeVideoPartDisplay()))),
                    t.room.cancelRaiseHand(e)
            },
            agreeAudioAndSpeaker: function (e) {
                1 != e.properties.state && 3 != e.properties.state || e.constraints.audio || t.room.openOrStopRemoteAudio(e),
                    e.properties.role == t.room.roles.presenter && t.room.applyPermission(e, "applySpeaker", "apply"),
                    t.room.cancelRaiseHand(e)
            },
            agreeAudio: function (e) {
                1 != e.properties.state && 3 != e.properties.state || e.constraints.audio || t.room.openOrStopRemoteAudio(e),
                    t.room.cancelRaiseHand(e)
            },
            setOrCancelDesktop: function (e, n) {
                let i = $(`.user-video[data-userid="${e.userid}"][data-videoDeviceId="${n}"]`)
                    , r = a.getParticipantByUserid(e.userid);
                t.room.selectedParticipant.isOnDesk ? e.userid == t.localUser.userid ? (1 != t.localUser.properties.state && 3 != t.localUser.properties.state || null != o.getLocalAudioStream() && t.room.openOrStopLocalAudio(t.localUser.audioInputDefault),
                    t.localUser.properties.state >= 2 && i.length > 0 && (1 == t.room.chairmanControlStatus.globalSynchronize ? t.room.openOrStopLocalVideo(n, !0, !1, "", !0, !0, !0) : (i.removeAttr("data-isManual"),
                        i.removeAttr("data-isOnDesk"),
                        t.room.syncChairmanUserVideo()))) : (1 != r.properties.state && 3 != r.properties.state || r.constraints.audio && t.room.openOrStopRemoteAudio(r),
                            r.properties.state >= 2 && i.length > 0 && (1 == t.room.chairmanControlStatus.globalSynchronize ? t.room.openOrStopRemoteVideo(r, n, !0, !0) : (i.removeAttr("data-isManual"),
                                i.removeAttr("data-isOnDesk"),
                                t.room.syncChairmanUserVideo()))) : e.userid == t.localUser.userid ? (1 != t.localUser.properties.state && 3 != t.localUser.properties.state || null == o.getLocalAudioStream() && t.room.openOrStopLocalAudio(t.localUser.audioInputDefault),
                                    t.localUser.properties.state >= 2 && (0 == i.length ? t.room.openOrStopLocalVideo(n, !0, !1, "", !0, !0, !0) : (i.attr("data-index", "-1"),
                                        i.attr("data-isOnDesk", !0),
                                        t.room.changeVideoPartDisplay()))) : (1 != r.properties.state && 3 != r.properties.state || r.constraints.audio || t.room.openOrStopRemoteAudio(r),
                                            r.properties.state >= 2 && (0 == i.length ? t.room.openOrStopRemoteVideo(r, n, !0, !0) : (i.attr("data-index", "-1"),
                                                i.attr("data-isOnDesk", !0),
                                                t.room.changeVideoPartDisplay()))),
                    $(".user-list-right-btn-area").hide(),
                    $(".video-context-menu").hide(),
                    $(".msg-context-menu").hide()
            },
            setOrCancelManualSyncVideo: function () {
                let e = $(`.user-video[data-userid="${t.room.selectedParticipant.userid}"][data-videoDeviceId="${t.room.selectedParticipant.videoDeviceId}"]`);
                if (0 == e.length) {
                    let e = a.getParticipantByUserid(t.room.selectedParticipant.userid);
                    t.room.selectedParticipant.userid == t.localUser.userid ? t.room.openOrStopLocalVideo(t.room.selectedParticipant.videoDeviceId, !0, !1, "", !0, !1, !0) : t.room.openOrStopRemoteVideo(e, t.room.selectedParticipant.videoDeviceId, !0, !1, !0)
                } else
                    "true" == e.attr("data-isManual") ? e.removeAttr("data-isManual") : e.attr("data-isManual", "true"),
                        t.room.syncChairmanUserVideo();
                $(".user-list-right-btn-area").hide(),
                    $(".video-context-menu").hide(),
                    $(".msg-context-menu").hide()
            },
            initChairmanControlStatus: function (e) {
                if (t.room.chairmanControlStatus = e,
                    1 == e.isOpen && (1 == t.room.chairmanControlStatus.globalSynchronize || 1 == t.room.chairmanControlStatus.manualSynchronize)) {
                    e.layout && (t.room.currentLayout = e.layout,
                        "mainSub" == t.room.currentLayout ? $(".left-panel").removeClass("bisectionLayout") : "bisection" == t.room.currentLayout && $(".left-panel").addClass("bisectionLayout"));
                    let n = !1;
                    for (let i = 0; i < e.userVideos.length; i++) {
                        let r = e.userVideos[i];
                        if ("video" == r.type) {
                            if (0 == $(".main-panel").children(`[data-userid="${r.userId}"][data-videodeviceid="${r.videoDeviceId}"]`).length)
                                if (r.userId == t.localUser.userid)
                                    ;
                                else {
                                    let e = a.getParticipantByUserid(r.userId);
                                    t.room.openOrStopRemoteVideo(e, r.videoDeviceId, !1, !1, !1, !0)
                                }
                            $(".main-panel").children(`[data-userid="${r.userId}"][data-videodeviceid="${r.videoDeviceId}"]`).attr("data-index", r.dataIndex),
                                r.dataIsManual ? $(".main-panel").children(`[data-userid="${r.userId}"][data-videodeviceid="${r.videoDeviceId}"]`).attr("data-isManual", r.dataIsManual) : $(".main-panel").children(`[data-userid="${r.userId}"][data-videodeviceid="${r.videoDeviceId}"]`).removeAttr("data-isManual"),
                                r.dataIsOnDesk ? $(".main-panel").children(`[data-userid="${r.userId}"][data-videodeviceid="${r.videoDeviceId}"]`).attr("data-isOnDesk", r.dataIsOnDesk) : $(".main-panel").children(`[data-userid="${r.userId}"][data-videodeviceid="${r.videoDeviceId}"]`).removeAttr("data-isOnDesk")
                        } else
                            "whiteboard" == r.type && (n = !0,
                                $(".main-panel").children(".left-panel").attr("data-index", r.dataIndex))
                    }
                    n ? $(".left-panel").removeClass("forceHide") : ($(".left-panel").removeClass("forceHide"),
                        $(".left-panel").addClass("forceHide"),
                        $(".left-panel").attr("data-index", "-9999")),
                        t.room.whiteboardShow = n,
                        $(".main-panel").children(".user-video").each(function () {
                            let n = $(this)
                                , i = n.attr("data-userid")
                                , r = n.attr("data-videodeviceid");
                            if (-1 == getArrIndexBy2Params(e.userVideos, i, "userId", r, "videoDeviceId"))
                                if (i == t.localUser.userid)
                                    ;
                                else {
                                    let e = a.getParticipantByUserid(i);
                                    t.room.openOrStopRemoteVideo(e, r, !1, !1, !1, !0)
                                }
                        }),
                        t.room.changeVideoPartDisplay(!1, !0),
                        $(".main-panel").children(".user-video").each(function () {
                            let e = $(this);
                            t.room.refreshSubscribe(e)
                        })
                }
                t.room.chairmanControlStatusCopy = angular.copy(t.room.chairmanControlStatus)
            },
            changeChairmanControlStatus: function (e) {
                if (t.room.chairmanControlStatus = e,
                    1 == e.isOpen) {
                    if (0 == e.autoRaiseHand && (t.room.isRaiseHand = !1),
                        1 == t.room.chairmanControlStatus.globalSynchronize || 1 == t.room.chairmanControlStatus.manualSynchronize) {
                        e.layout && (t.room.currentLayout = e.layout,
                            "mainSub" == t.room.currentLayout ? $(".left-panel").removeClass("bisectionLayout") : "bisection" == t.room.currentLayout && $(".left-panel").addClass("bisectionLayout")),
                            1 == t.room.isMultiScreen && t.room.openMultiScreen();
                        let n = !1;
                        for (let i = 0; i < e.userVideos.length; i++) {
                            let r = e.userVideos[i];
                            if ("video" == r.type) {
                                if (0 == $(".main-panel").children(`[data-userid="${r.userId}"][data-videodeviceid="${r.videoDeviceId}"]`).length)
                                    if (r.userId == t.localUser.userid)
                                        t.room.openOrStopLocalVideo(r.videoDeviceId, !0, !1, "", !1);
                                    else {
                                        let e = a.getParticipantByUserid(r.userId);
                                        t.room.openOrStopRemoteVideo(e, r.videoDeviceId, !1)
                                    }
                                $(".main-panel").children(`[data-userid="${r.userId}"][data-videodeviceid="${r.videoDeviceId}"]`).attr("data-index", r.dataIndex),
                                    r.dataIsManual ? $(".main-panel").children(`[data-userid="${r.userId}"][data-videodeviceid="${r.videoDeviceId}"]`).attr("data-isManual", r.dataIsManual) : $(".main-panel").children(`[data-userid="${r.userId}"][data-videodeviceid="${r.videoDeviceId}"]`).removeAttr("data-isManual"),
                                    r.dataIsOnDesk ? $(".main-panel").children(`[data-userid="${r.userId}"][data-videodeviceid="${r.videoDeviceId}"]`).attr("data-isOnDesk", r.dataIsOnDesk) : $(".main-panel").children(`[data-userid="${r.userId}"][data-videodeviceid="${r.videoDeviceId}"]`).removeAttr("data-isOnDesk")
                            } else
                                "whiteboard" == r.type && (n = !0,
                                    $(".main-panel").children(".left-panel").attr("data-index", r.dataIndex))
                        }
                        n ? $(".left-panel").removeClass("forceHide") : ($(".left-panel").removeClass("forceHide"),
                            $(".left-panel").addClass("forceHide"),
                            $(".left-panel").attr("data-index", "-9999")),
                            t.room.whiteboardShow = n,
                            $(".main-panel").children(".user-video").each(function () {
                                let n = $(this)
                                    , i = n.attr("data-userid")
                                    , r = n.attr("data-videodeviceid");
                                if (-1 == getArrIndexBy2Params(e.userVideos, i, "userId", r, "videoDeviceId"))
                                    if (i == t.localUser.userid)
                                        t.room.openOrStopLocalVideo(r, !0, !1, "", !1);
                                    else {
                                        let e = a.getParticipantByUserid(i);
                                        t.room.openOrStopRemoteVideo(e, r, !1)
                                    }
                            }),
                            t.$apply(),
                            t.room.changeVideoPartDisplay(!1, !0),
                            $(".main-panel").children(".user-video").each(function () {
                                let e = $(this);
                                t.room.refreshSubscribe(e)
                            })
                    }
                } else
                    t.room.isRaiseHand = !1;
                if (t.room.chairmanControlStatusCopy = angular.copy(t.room.chairmanControlStatus),
                    t.room.participants.forEach(e => {
                        e.isRaiseHand = !1
                    }
                    ),
                    t.room.chairmanControlStatusCopy.raiseHandUserList) {
                    let e = t.room.chairmanControlStatusCopy.raiseHandUserList;
                    e.forEach((n, i) => {
                        n.userid == t.localUser.userid && e.splice(i, 1)
                    }
                    ),
                        t.room.raiseHandUserList = e;
                    for (let e in t.room.raiseHandUserList)
                        for (let n in t.room.participants)
                            t.room.raiseHandUserList[e].userid == t.room.participants[n].userid && (t.room.participants[n].isRaiseHand = !0)
                }
            },
            refreshSubscribe: function (e) {
                if (!e.hasClass("local") && !e.hasClass("left-panel")) {
                    let n = a.getParticipantStreamByUserId(e.attr("data-userId"), e.attr("data-videoDeviceId"));
                    if (null != n) {
                        let i = a.getParticipantByUserid(e.attr("data-userId"));
                        null != i && t.room.applySubScribeOption(i, n, e)
                    }
                }
            },
            syncChairmanUserVideo: function (e = !0, n = !1) {
                if (e && 1 == t.room.chairmanControlStatus.isOpen && t.localUser.properties.role == t.room.roles.chairman && (1 == t.room.chairmanControlStatus.globalSynchronize || 1 == t.room.chairmanControlStatus.manualSynchronize)) {
                    let e = [];
                    1 == t.room.chairmanControlStatus.globalSynchronize ? e = $(".main-panel").children(":not(.forceHide)").sort(function (e, t) {
                        return $(e).attr("data-index") - $(t).attr("data-index")
                    }) : 1 == t.room.chairmanControlStatus.manualSynchronize && (e = 1 == t.room.eduModeReal ? $(".main-panel").children(".left-panel:not(.forceHide),.user-video").sort(function (e, t) {
                        return $(e).attr("data-index") - $(t).attr("data-index")
                    }) : $(".main-panel").children("[data-isManual],.left-panel:not(.forceHide),[data-isOnDesk]").sort(function (e, t) {
                        return $(e).attr("data-index") - $(t).attr("data-index")
                    }));
                    let i = [];
                    e.each(function () {
                        let e = $(this)
                            , r = {
                                userId: "",
                                videoDeviceId: "",
                                type: "video",
                                dataIndex: e.attr("data-index"),
                                dataIsManual: !1,
                                dataIsOnDesk: !1
                            };
                        if (e.hasClass("left-panel"))
                            r.type = "whiteboard";
                        else {
                            if (r.userId = e.attr("data-userid"),
                                r.videoDeviceId = e.attr("data-videodeviceid"),
                                "true" == e.attr("data-isOnDesk") && (r.dataIsOnDesk = !0),
                                1 == t.room.eduModeReal && 1 == t.room.chairmanControlStatus.manualSynchronize)
                                if (0 == e.attr("data-index")) {
                                    if ("true" != e.attr("data-isManual") && e.attr("data-isManual", "true"),
                                        r.userId != t.localUser.userid) {
                                        let e = a.getParticipantByUserid(r.userId);
                                        !e.constraints.audio && n && t.room.openOrStopRemoteAudio(e)
                                    }
                                } else if (r.userId != t.localUser.userid) {
                                    e.removeAttr("data-isManual");
                                    let i = a.getParticipantByUserid(r.userId);
                                    i.constraints.audio && n && t.room.openOrStopRemoteAudio(i)
                                }
                            "true" != e.attr("data-isManual") || r.dataIsOnDesk || (r.dataIsManual = !0)
                        }
                        1 == t.room.eduModeReal && 1 == t.room.chairmanControlStatus.manualSynchronize ? "whiteboard" == r.type ? i.push(r) : "true" == e.attr("data-isManual") && i.push(r) : i.push(r)
                    }),
                        t.room.chairmanControlStatus.layout = t.room.currentLayout,
                        t.room.chairmanControlStatus.userVideos = i,
                        r.send("changeChairmanControlStatus", "server", "", t.room.chairmanControlStatus, "send")
                }
            },
            syncUserVideoToSecondLive: function () {
                t.room.secondLive.isOpen && t.room.secondLive.opener && t.room.secondLive.opener.window && t.room.secondLive.opener.window.changeElements()
            },
            syncChairmanUserVideoToHuikong: function () {
                if (!t.room.hasHuikong || t.localUser.properties.role != t.room.roles.chairman)
                    return;
                let e = [];
                $(".main-panel").children(":not(.forceHide)").sort(function (e, t) {
                    return $(e).attr("data-index") - $(t).attr("data-index")
                }).each(function () {
                    let t = $(this)
                        , n = {
                            userId: "",
                            videoDeviceId: "",
                            type: "video",
                            dataIndex: t.attr("data-index"),
                            dataIsManual: !1,
                            dataIsOnDesk: !1
                        };
                    t.hasClass("left-panel") ? n.type = "whiteboard" : (n.userId = t.attr("data-userid"),
                        n.videoDeviceId = t.attr("data-videodeviceid"),
                        "true" == t.attr("data-isOnDesk") && (n.dataIsOnDesk = !0),
                        "true" != t.attr("data-isManual") || n.dataIsOnDesk || (n.dataIsManual = !0)),
                        e.push(n)
                }),
                    r.send("userVideoSync", "huikong", "", e, "send")
            },
            disableAllAudio: function () {
                r.send("disableAllAudio", "others", "", {}, "send")
            },
            executeDisableAllAudio: function () {
                null != o.getLocalAudioStream() && null != o.getLocalAudioPublication() && (o.getLocalAudioPublication().stop(),
                    o.setLocalAudioStream(null),
                    o.setLocalAudioPublication(null),
                    $(".local .user-mic").attr("src", U.mic.off),
                    $(".fayan-part .fayan-icon").removeClass("active"))
            },
            changeYsqFast: function (e) {
                t.localUser.audioOutputDefault != e && (t.localUser.audioOutputDefault = e,
                    re = e,
                    e = e.substr(0, e.length - t.localUser.userid.length),
                    $("audio").each(function () {
                        $(this).get(0).setSinkId(e)
                    }))
            },
            openAudioFast: function (e) {
                if (t.localUser.audioInputDefault == e)
                    return;
                t.localUser.audioInputDefault = e;
                let n = o.getLocalAudioStream();
                re = e,
                    null != n && (o.getLocalAudioPublication().stop(),
                        o.setLocalAudioStream(null),
                        o.setLocalAudioPublication(null),
                        t.room.openOrStopLocalAudio(t.localUser.audioInputDefault))
            },
            checkLocalUserVideoState: function () {
                let e = !1;
                for (let n = 0; n < t.localUser.videoInputDeviceIds.length; n++) {
                    let i = t.localUser.videoInputDeviceIds[n];
                    if (0 != Object.keys(t.localUser.constraints).length && void 0 != t.localUser.constraints[i.deviceId] && t.localUser.constraints[i.deviceId].video) {
                        e = !0;
                        break
                    }
                }
                return e
            },
            openDefaultVideo: function () {
                (1 != t.room.chairmanControlStatus.isOpen || t.localUser.properties.role == t.room.roles.chairman || 1 != t.room.chairmanControlStatus.manualSynchronize && 1 != t.room.chairmanControlStatus.globalSynchronize) && t.room.openOrStopLocalVideo(t.localUser.videoInputDefault)
            },
            openPopupWindow: function (e) {
                if (1 == t.room.chairmanControlStatus.isOpen && t.localUser.properties.role != t.room.roles.chairman && (1 == t.room.chairmanControlStatus.manualSynchronize || 1 == t.room.chairmanControlStatus.globalSynchronize) && "isLayoutChangeShow" == e)
                    return;
                t.room.settingSubAreas.forEach((n, i) => {
                    n != e && (t.room[n] = !1)
                }
                ),
                    t.room[e] || "isSettingShow" != e ? (t.room[e] = !t.room[e],
                        t.room.checkChairManPassword = !1) : t.room.openSetting()
            },
            raiseHand: function (e) {
                if (t.localUser.properties.role == t.room.roles.chairman) {
                    t.room[e] = !t.room[e],
                        t.room.settingSubAreas.forEach((n, i) => {
                            n != e && (t.room[n] = !1)
                        }
                        ),
                        t.room.isCopyShow = !1
                } else {
                    if (t.room.isRaiseHand)
                        return;
                    t.room.isRaiseHand = !0,
                        r.send("raiseHand", t.room.chairmanControlStatus.chairmanUserId, "", {}, "send")
                }
            },
            cancelRaiseHand: function (e) {
                t.room.raiseHandUserList = t.room.raiseHandUserList.filter(t => t.userid != e.userid),
                    t.room.participants.forEach(t => {
                        t.userid == e.userid && (t.isRaiseHand = !1)
                    }
                    ),
                    r.send("cancelRaiseHand", e.userid, "", {}, "send"),
                    t.room.chairmanControlStatus.raiseHandUserList = t.room.raiseHandUserList,
                    r.send("changeChairmanControlStatus", "server", "", t.room.chairmanControlStatus, "send")
            },
            meetInvitationShow: function (e) {
                if ($(".more-icon .more-area").hide(),
                    $(".more-icon").removeClass("active"),
                    t.room[e])
                    return;
                t.room.isCopyShow = !1,
                    t.room[e] = !0,
                    t.room.settingSubAreas.forEach((n, i) => {
                        n != e && (t.room[n] = !1)
                    }
                    )
            },
            meetInvitationHide: function (e) {
                t.room[e] = !1
            },
            copyNewUrl: function (e = !0) {
                t.room.copyUrl(),
                    1 == e ? t.room.isCopyShow = !0 : t.room.OPBtnShow = !0
            },
            initMeetingMsg: function () {
                t.room.meetingNewURL = window.location.origin + "/" + t.room.serial + "/" + t.room.sig.toLowerCase(),
                    t.room.invitationImgUrl = "/ClientAPI/getQRImage?url=" + t.room.meetingNewURL;
                let e = window.location.origin + "/h5/huikong/index.html?serial=" + t.room.serial;
                $(".huikong-area img").attr("src", "/ClientAPI/getQRImage?url=" + e)
            },
            focus: function (e, n) {
                e.target.placeholder = "",
                    t.room.checkChairManPassword = !1
            },
            blur: function (e, t) {
                var i;
                "chairman" == t && (i = n.instant("room.chairamanpwd")),
                    "file" == t && (i = n.instant("room.searchfile")),
                    "saysome" == t && (i = n.instant("room.saysome")),
                    "search" == t && (i = n.instant("room.search")),
                    e.target.placeholder = i
            },
            inputKeyDown: function (e) {
                "13" != e.keyCode || e.shiftKey || (e.preventDefault(),
                    t.room.checkChairmanPwd())
            },
            sendMsg: function () {
                let e = $("textarea").val();
                if ($("textarea").val(""),
                    setCursorPosition($("textarea")[0], 0),
                    0 == e.length)
                    return;
                let n = {
                    message: e,
                    type: "txt"
                }
                    , i = "others";
                null != t.room.currentSendUser && (i = t.room.currentSendUser.userid),
                    r.send("chat", i, "", n, "send"),
                    t.room.chatAppend(e, "msg", "own", i, t.room.currentSendUser)
            },
            showOrhideVideoRight: function () {
                t.room.videoListRightShow = !t.room.videoListRightShow,
                    t.room.videoListRightShow ? ($(".left-panel").css("width", "calc(100% - 40rem / 10)"),
                        $(".right-panel").css("width", "4rem")) : ($(".left-panel").css("width", "100%"),
                            $(".right-panel").css("width", "0")),
                    t.room.mainWidthChange()
            },
            showOrhideAreaBottom: function () {
                t.room.borderAreaBottomShow = !t.room.borderAreaBottomShow
            },
            toggleLeftPanel: function () { },
            createImageCache: function (e, t, n, i) {
                return this.cache && this.cache.getUrl() == e || (this.cache = new ImageCache(e, i, n)),
                    this.cache
            },
            checkIsWebView: function () {
                return "undefined" != typeof pc
            },
            openMultiScreen: function () {
                if (t.room.isMultiScreen)
                    return t.room.isMultiScreen = !1,
                        void t.room.opener.window.closeWindow();
                t.room.changeLayout("mainSub"),
                    t.room.isMultiScreen = !0,
                    t.room.opener = window.open(webAPI + "/h5/video.html?screenIndex=1&screenNumber=" + t.room.screenNumber)
            },
            checkHasScreen: function () {
                if (t.room.checkIsWebView())
                    return !0;
                let e = window.navigator.userAgent.toLowerCase()
                    , n = !1;
                if (-1 != e.indexOf("chrome/")) {
                    parseInt(e.substring(e.indexOf("chrome/") + "chrome/".length, e.indexOf(".", e.indexOf("chrome/")))) >= 72 && (n = !0)
                } else if (-1 != e.indexOf("firefox/")) {
                    parseInt(e.substring(e.indexOf("firefox/") + "firefox/".length, e.indexOf(".", e.indexOf("firefox/")))) >= 66 && (n = !0)
                } else
                    -1 != e.indexOf("safari/") && (n = !0);
                return n
            },
            close: function () {
                conference.leave()
            },
            exit: function () {
                t.room.checkIsWebView() ? (conference.leave(),
                    pc.closeWindow()) : (conference.leave(),
                        0 != ee.length ? window.location.href = ee : window.location.href = "/Meeting/entermeeting")
            },
            checkFileSearch: function (e) {
                return 0 == t.room.fileSearchValue.length || e.filename.indexOf(t.room.fileSearchValue) > -1
            },
            checkSearch: function (e) {
                return 0 == t.room.searchValue.length || !!(e && e.properties && e.properties.username.indexOf(t.room.searchValue) > -1)
            },
            mainFullScreen: function () {
                t.room.checkIsWebView(),
                    "true" == $(".left-panel").attr("fullscreen") ? ($(".left-panel").removeAttr("fullscreen"),
                        exitFullScreen()) : ($(".left-panel").attr("fullscreen", "true"),
                            fullScreen($(".left-panel").get(0)));
                let e = setTimeout(function () {
                    t.room.mainWidthChange(),
                        clearTimeout(e)
                }, 200)
            },
            changeSendUser: function (e) {
                if (null == e)
                    return t.room.currentSendUser = null,
                        void $("#sendUser").html(n.instant("room.selectUser"));
                null != t.room.currentSendUser && t.room.currentSendUser.userid == e.userid || (t.room.showSendUser = !1,
                    t.room.currentSendUser = e,
                    $("#sendUser").html(e.properties.username))
            },
            chatAppend: function (e, i = "notice", r = "own", o = "others", a = null) {
                "chatPanel" != t.room.currentLeftPanel && t.room.digstRefresh(() => {
                    t.room.noReadCount++
                }
                );
                let s, l = $(".message-list ul");
                if (e = HtmlUtil.htmlDecodeByRegExp(e),
                    "notice" == i)
                    s = `<li class="notice">\n                            <div>${e}</div>\n                        </li>`;
                else {
                    let i = t.localUser.username.substr(0, 1)
                        , l = new Date
                        , c = l.getHours()
                        , u = l.getMinutes();
                    if (c < 10 && (c = "0" + c),
                        u < 10 && (u = "0" + u),
                        "own" == r)
                        if ("others" == o)
                            s = `<li class="main-msg own">\n                                    <div class="sendAll">\n                                        <div class="timeMsg">\n                                            <div class="time">\n                                                <p>${n.instant("room.me")}</p>\n                                            </div>\n                                            <div class="message-bar">\n                                                <div class="message">\n                                                    <p>${e}</p>\n                                                </div>\n                                                <div class="message-cat"></div>\n                                            </div>\n                                        </div>\n\n                                        <div class="username">\n                                            <img src="${U.pc[t.localUser.properties.role]}"/>\n                                        </div>\n                                    </div>\n                                </li>`;
                        else {
                            if (null == a)
                                return;
                            s = `                                \n                                <li class="main-msg own">\n                                    <div class="sendOne">\n                                        <div class="timeMsg">\n                                            <div class="time">\n                                            <p>${n.instant("room.meTo") + a.properties.username + " " + c + ":" + u}</p>\n                                            </div>\n                                            <div class="message-bar">\n                                                <div class="message">\n                                                    <p>${e}</p>\n                                                </div>\n                                                <div class="message-cat"></div>\n                                            </div>\n                                        </div>\n\n                                        <div class="username">\n                                            ${i}\n                                        </div>\n                                    </div>\n                                </li>`
                        }
                    else {
                        if (null == a)
                            return;
                        a.properties.username.substr(0, 1);
                        s = `                                \n                                <li class="main-msg other ">\n                                    <div>\n                                        <div class="username">\n                                           <img src="${U.pc[a.properties.role]}"/>\n                                        </div>\n                                        <div class="timeMsg">\n                                            <div class="time">\n                                                <p>${a.properties.username}</p>\n                                            </div>\n                                            <div class="message-bar">\n                                                <div class="message">\n                                                    <p>${e}</p>\n                                                </div>\n                                            </div>\n                                        </div>\n\n\n                                    </div>\n                                </li>`
                    }
                }
                l.append(s),
                    l.scrollTop(l[0].scrollHeight)
            },
            newChatAppend: function (e, n = "") {
                if (t.room[n])
                    return;
                "" != n && (t.room[n] = !0),
                    e = HtmlUtil.htmlDecodeByRegExp(e);
                let i = $(".chat-area")
                    , r = $(`<div class="notice">\n                        <img />\n                        <div>${e}</div>\n                    </div>`);
                i.append(r),
                    i.scrollTop(i[0].scrollHeight);
                let o = setTimeout(() => {
                    "" != n && (t.room[n] = !1),
                        r.hide(),
                        r.remove(),
                        clearTimeout(o)
                }
                    , 3e3)
            },
            showMore: function () {
                "none" == $(".more-icon .more-area").css("display") ? ($(".more-icon .more-area").show(),
                    $(".more-icon").addClass("active")) : ($(".more-icon .more-area").hide(),
                        $(".more-icon").removeClass("active"))
            },
            showLayout: function () {
                "none" == $(".layout-icon .more-area").css("display") ? $(".layout-icon .more-area").show() : $(".layout-icon .more-area").hide()
            },
            record: function (e = !0) {
                $(".more-icon .more-area").hide(),
                    $(".more-icon").removeClass("active"),
                    e && 1 == t.room.chairmanControlStatus.isOpen && t.localUser.properties.role != N.chairman && 0 == t.room.chairmanControlStatus.autoRecord ? t.room.newChatAppend(n.instant("room.chairmanCloseAutoRecord"), "openRecordClick") : 0 != parseInt(t.room.recordCallbackValue) ? t.room.startRecord() : t.room.stopRecord()
            },
            startRecord: function () {
                let e = !0;
                0 == t.localUser.audioOutputDefault.length && (e = !1),
                    navigator.userAgent.toUpperCase().indexOf("MAC OS") > -1 && (e = !1);
                let n = {
                    audio: e,
                    video: {
                        width: {
                            ideal: 1920
                        },
                        height: {
                            ideal: 1080
                        },
                        frameRate: 60
                    }
                };
                navigator.mediaDevices.getDisplayMedia(n).then(e => {
                    let t = e.getAudioTracks().length > 0;
                    c.startRecord(e, t),
                        recordCallback(0, !0);
                    let n = 0
                        , i = setInterval(function () {
                            (n += 1) == 60 * c.getRecordTime() && (c.createFile(),
                                n = 0)
                        }, 1e3);
                    c.setInter(i),
                        e.getVideoTracks()[0].onended = (e => {
                            c.clearInter(),
                                recordCallback(1, !0),
                                c.createFile()
                        }
                        )
                }
                )
            },
            stopRecord: function () {
                c.clearInter(),
                    recordCallback(1, !1),
                    c.stopMediaTracks()
            },
            changeLayout: function (e) {
                if (t.room.isMultiScreen)
                    return t.room.newChatAppend(n.instant("room.canNotInMultiScreen")),
                        void $(".layout-icon .more-area").hide();
                if (1 == t.room.chairmanControlStatus.isOpen && (1 == t.room.chairmanControlStatus.manualSynchronize || 1 == t.room.chairmanControlStatus.globalSynchronize) && t.localUser.properties.role != t.room.roles.chairman)
                    return t.room.newChatAppend(n.instant("room.syncModeOnTooltip"), "openLayoutClick"),
                        void $(".layout-icon .more-area").hide();
                if (t.room.currentLayout != e) {
                    if ($(".main-panel").children().removeAttr("data-ismain"),
                        $(".left-panel").attr("data-ismain", !0),
                        $(".main-panel").children().each(function (e) {
                            $(this).attr("data-index", e)
                        }),
                        "mainSub" == e)
                        $(".left-panel").removeClass("bisectionLayout"),
                            $("#screen-board").removeClass("small-screen"),
                            $(".left-panel .white-board-img").remove(),
                            $(".user-video.new-border").removeClass("new-border");
                    else if ("bisection" == e && ($(".left-panel").addClass("bisectionLayout"),
                        !$("#screen-board").hasClass("small-screen"))) {
                        $("#screen-board").addClass("small-screen");
                        let e = $('<div class="white-board-img">\n                        <div class="img-area"><img /></div>\n                    </div>');
                        $(".left-panel").append(e)
                    }
                    t.room.currentLayout = e,
                        $(".layout-icon .more-area").hide(),
                        t.room.changeVideoPartDisplay()
                }
            },
            screenPlay: function () {
                $("#screen-board video").get(0).play(),
                    $("#screen-board video")[0].onplay = function () {
                        $(".screen-video-play").hide()
                    }
            },
            stopShareDesktop: function () {
                null != o.getScreenStream() && (o.getScreenStream().mediaStream.getVideoTracks()[0].stop(),
                    o.getScreenStream().mediaStream.getAudioTracks()[0] && o.getScreenStream().mediaStream.getAudioTracks()[0].stop(),
                    o.setScreenStream(null),
                    o.getScreenPublication() && o.getScreenPublication().stop(),
                    o.setScreenPublication(null),
                    t.room.isSharing = !1,
                    t.room.checkIsWebView() && pc.screenShare("0"))
            },
            copyUrl: function () {
                const e = document.createElement("input");
                e.style.display = "hidden",
                    document.body.appendChild(e),
                    e.setAttribute("value", t.room.meetingNewURL),
                    e.select(),
                    document.execCommand("copy") && (document.execCommand("copy"),
                        $(".invite-panel-bottom button").html(n.instant("room.copyUrl"))),
                    document.body.removeChild(e)
            },
            showInvite: function () {
                let e = `\n                    <div class="invite-panel"> \n                        <div class="invite-panel-title">${t.room.name}</div>\n                        <div class="invite-panel-body">\n                            <div>\n                                ${n.instant("room.meetingUrl") + window.location.origin + "/" + t.room.serial + "/" + t.room.sig}\n                            </div>\n                            <div>\n                                ${n.instant("room.serial") + t.room.serial}\n                            </div>\n                        </div>\n                        <div class="invite-panel-bottom">\n                            <button type="button" class="btn btn-primary ng-binding" onclick="copyUrl()">${n.instant("room.copyInfo")}</button>\n                        </div>\n                    </div>\n                `;
                t.room.inviteTemplate = u.trustAsHtml(e),
                    t.room.inviteIsShow = !t.room.inviteIsShow
            },
            forceLeave: function (e) {
                r.send("forceLeave", e.userid, "", {}, "send")
            },
            applyPermission: function (e, t, n) {
                $(".user-list-right-btn-area").hide(),
                    $(".video-context-menu").hide(),
                    $(".msg-context-menu").hide();
                let i = {
                    type: t,
                    permission: n
                };
                r.send("applyPermission", e.userid, "", i, "send")
            },
            syncWhiteBoard: function () {
                if (null != t.literally.lastFile) {
                    let e = {
                        fileid: t.literally.lastFile.fileid,
                        index: t.literally.lastIndex,
                        step: t.literally.lastFile.animateStep,
                        controlType: "page"
                    };
                    r.send("openFile", "others", "", e, "send");
                    let n = {
                        fileType: t.literally.currentPageType,
                        total: t.literally.totalNum,
                        index: t.literally.currentNum,
                        fileid: t.literally.lastFile.fileid,
                        step: t.literally.lastFile.animateStep,
                        controlType: "page"
                    };
                    r.send("changeMeetingStatus", "server", "", n, "send")
                } else {
                    let e = {
                        index: t.literally.filePage.whiteboard.currentPage,
                        total: t.literally.filePage.whiteboard.totalPage
                    };
                    r.send("openWhiteBoard", "others", "", e, "send");
                    let n = {
                        fileType: t.literally.currentPageType,
                        total: t.literally.totalNum,
                        index: t.literally.currentNum,
                        fileid: ""
                    };
                    r.send("changeMeetingStatus", "server", "", n, "send")
                }
            },
            applySpeaker: function (e = !0, i = "apply") {
                1 == t.room.chairmanControlStatus.isOpen && t.localUser.properties.role != N.chairman && e && 0 == t.room.chairmanControlStatus.autoSpeaker ? t.room.newChatAppend(n.instant("room.chairmanCloseAutoSpeaker"), "openSpeakerClick") : t.localUser.properties.role != N.chairman && (e ? t.localUser.properties.role == N.presenter ? (i = "apply",
                    t.localUser.properties.role = N.speaker,
                    t.localRoleImg = U.pc[t.localUser.properties.role],
                    t.room.syncWhiteBoard()) : t.localUser.properties.role == N.speaker && (i = "cancel",
                        t.room.currentDocPanel = "view",
                        t.localUser.properties.role = N.presenter,
                        t.localRoleImg = U.pc[t.localUser.properties.role],
                        t.room.stopShareDesktop()) : "apply" == i ? ($("#apply-zhujiang").html(n.instant("room.cancelzhujiang")),
                            t.room.digstRefresh(() => {
                                t.localUser.properties.role = N.speaker,
                                    t.localRoleImg = U.pc[t.localUser.properties.role]
                            }
                            ),
                            t.room.newChatAppend(n.instant("room.chairmanGiveSpeakPermision")),
                            t.room.syncWhiteBoard()) : "cancel" == i && ($("#apply-zhujiang").html(n.instant("room.applyzhujiang")),
                                t.room.stopShareDesktop(),
                                t.room.digstRefresh(() => {
                                    t.room.currentDocPanel = "view",
                                        t.localUser.properties.role = N.presenter,
                                        t.localRoleImg = U.pc[t.localUser.properties.role],
                                        t.room.isSharing = !1
                                }
                                ),
                                t.room.newChatAppend(n.instant("room.chairmanTakeSpeakPermision"))),
                    o.setLocalUser(t.localUser),
                    r.send("applySpeaker", "others", "", {
                        permission: i,
                        isLocal: e
                    }, "send"))
            },
            updateChairmanControl: function (e = !1) {
                if (t.room.eduModeReal = angular.copy(t.room.eduMode),
                    e && 1 == he) {
                    let e = {
                        videoInputDefault: ne,
                        audioInputDefault: ie,
                        audioOutputDefault: re,
                        videoQualities: oe,
                        volume: se,
                        needVideoInputs: le,
                        excitation: t.room.excitation,
                        voiceAnalyse: t.room.voiceAnalyse,
                        eduMode: t.room.eduModeReal
                    };
                    $.ajax({
                        url: webAPI + updateUserSettingAPI,
                        type: "post",
                        dataType: "json",
                        data: {
                            userid: F,
                            settings: e
                        },
                        success: function (e) { },
                        error: function () {
                            alert("error")
                        }
                    })
                }
                let i = !0
                    , o = ["autoAudio", "autoSpeaker", "autoRaiseHand", "autoRecord", "globalSynchronize", "manualSynchronize"];
                for (let e in t.room.chairmanControlStatusCopy)
                    if (-1 != $.inArray(e, o) && t.room.chairmanControlStatusCopy[e] != t.room.chairmanControlStatus[e]) {
                        i = !1;
                        break
                    }
                i ? t.room.isApplyChairmanShow = !1 : new Promise((e, i) => {
                    $.ajax({
                        url: updateChairmanControlAPI,
                        type: "get",
                        dataType: "json",
                        data: {
                            chairmanVersion: t.room.chairmanVersion,
                            serial: t.room.serial,
                            autoAudio: t.room.chairmanControlStatus.autoAudio,
                            autoSpeaker: t.room.chairmanControlStatus.autoSpeaker,
                            autoRaiseHand: t.room.chairmanControlStatus.autoRaiseHand,
                            autoRecord: t.room.chairmanControlStatus.autoRecord,
                            globalSynchronize: t.room.chairmanControlStatus.globalSynchronize,
                            manualSynchronize: t.room.chairmanControlStatus.manualSynchronize,
                            userid: j.userid
                        },
                        success: function (t) {
                            e(t)
                        },
                        error: function () {
                            alert(n.instant("errorMsg.1005")),
                                i()
                        }
                    })
                }
                ).then(e => {
                    0 == e.result ? (t.room.chairmanVersion = e.chairmanVersion,
                        t.room.adjustChairmanControlStatus(),
                        r.send("changeChairmanControlStatus", "server", "", t.room.chairmanControlStatus, "send"),
                        t.room.chairmanControlStatusCopy = angular.copy(t.room.chairmanControlStatus),
                        t.room.isApplyChairmanShow = !1,
                        t.$apply()) : alert("失败")
                }
                )
            },
            adjustChairmanControlStatus: function () {
                if (1 == t.room.chairmanControlStatusCopy.globalSynchronize && 0 == t.room.chairmanControlStatus.globalSynchronize && (t.room.chairmanControlStatus.userVideos = []),
                    1 == t.room.chairmanControlStatusCopy.manualSynchronize && 0 == t.room.chairmanControlStatus.manualSynchronize && (t.room.chairmanControlStatus.userVideos = [],
                        $(".user-video").removeAttr("data-isManual")),
                    1 == t.room.chairmanControlStatusCopy.autoRaiseHand && 0 == t.room.chairmanControlStatus.autoRaiseHand && (t.room.chairmanControlStatus.raiseHandUserList = [],
                        t.room.raiseHandUserList = [],
                        t.room.participants.forEach(e => {
                            e.isRaiseHand = !1
                        }
                        )),
                    !(1 != t.room.chairmanControlStatus.globalSynchronize && 1 != t.room.chairmanControlStatus.manualSynchronize || void 0 != t.room.chairmanControlStatus.userVideos && 0 != t.room.chairmanControlStatus.userVideos.length)) {
                    1 == t.room.isMultiScreen && t.room.openMultiScreen(),
                        t.room.chairmanControlStatus.userVideos = [],
                        t.room.chairmanControlStatus.layout = t.room.currentLayout,
                        $(".main-panel").children(":not(.forceHide)").each(function () {
                            let e = $(this)
                                , n = e.attr("data-userid")
                                , i = e.attr("data-videodeviceid");
                            if (!e.hasClass("left-panel"))
                                if (e.hasClass("local"))
                                    t.room.openOrStopLocalVideo(i, !0, !1, "", !1);
                                else {
                                    let e = a.getParticipantByUserid(n);
                                    t.room.openOrStopRemoteVideo(e, i, !1)
                                }
                        })
                }
            },
            checkChairmanPwd: function (e = !0, i, a = !1) {
                if (e)
                    t.room.userpwd != t.room.chairmanpwd && (t.room.checkChairManPassword = !0),
                        (t.room.userpwd == t.room.chairmanpwd || a) && (t.room.checkChairManPassword = !1,
                            new Promise((e, i) => {
                                $.ajax({
                                    url: getMeetingChairmanVersionAPI,
                                    type: "get",
                                    dataType: "json",
                                    data: {
                                        chairmanPwd: a ? t.room.chairmanpwd : t.room.userpwd,
                                        serial: t.room.serial
                                    },
                                    success: function (t) {
                                        e(t)
                                    },
                                    error: function () {
                                        alert(n.instant("errorMsg.1005")),
                                            i()
                                    }
                                })
                            }
                            ).then(n => {
                                t.room.userpwd = "";
                                let i = {
                                    isOpen: 1,
                                    autoAudio: parseInt(n.chairmanData.autoAudio),
                                    autoSpeaker: parseInt(n.chairmanData.autoSpeaker),
                                    autoRaiseHand: parseInt(n.chairmanData.autoRaiseHand),
                                    autoRecord: parseInt(n.chairmanData.autoRecord),
                                    globalSynchronize: parseInt(n.chairmanData.globalSynchronize),
                                    manualSynchronize: parseInt(n.chairmanData.manualSynchronize)
                                };
                                if (Object.assign(t.room.chairmanControlStatus, i),
                                    t.room.chairmanControlStatusCopy = angular.copy(t.room.chairmanControlStatus),
                                    t.room.chairmanVersion = n.chairmanVersion,
                                    t.localUser.properties.role = N.chairman,
                                    t.localRoleImg = U.pc[t.localUser.properties.role],
                                    t.room.isRaiseHand = !1,
                                    !a) {
                                    o.setLocalUser(t.localUser);
                                    let n = {
                                        isLocal: e,
                                        permission: "apply"
                                    };
                                    r.send("applyChairman", "others", "", n, "send"),
                                        t.room.syncWhiteBoard()
                                }
                                t.room.adjustChairmanControlStatus(),
                                    t.$apply(),
                                    r.send("changeChairmanControlStatus", "server", "", t.room.chairmanControlStatus, "send")
                            }
                            ));
                else if ("apply" == i) {
                    t.room.newChatAppend(n.instant("room.becomeChairman")),
                        $("#apply-zhujiang").html(n.instant("room.applyzhujiang")),
                        t.room.digstRefresh(() => {
                            t.room.isRaiseHand = !1,
                                t.room.isApplyChairmanShow = !1,
                                t.localUser.properties.role = N.chairman,
                                t.localRoleImg = U.pc[t.localUser.properties.role]
                        }
                        ),
                        o.setLocalUser(t.localUser);
                    let i = {
                        isLocal: e,
                        permission: "apply"
                    };
                    t.room.chairmanControlStatus.chairmanUserId = t.localUser.userid,
                        r.send("changeChairmanControlStatus", "server", "", t.room.chairmanControlStatus, "send"),
                        r.send("applyChairman", "others", "", i, "send"),
                        t.room.syncWhiteBoard()
                }
                t.room.userpwd = "",
                    $("#applyChairman").blur()
            },
            clearChairManPassword: function () {
                t.room.userpwd = "",
                    $("#applyChairman").eq(0).attr("placeholder", n.instant("room.chairamanpwd"))
            },
            checkIsChairman: function () {
                t.localUser.properties.role == t.room.roles.chairman ? (t.room.digstRefresh(() => {
                    t.localUser.properties.role = N.presenter,
                        t.localRoleImg = U.pc[t.localUser.properties.role]
                }
                ),
                    o.setLocalUser(t.localUser)) : t.$apply()
            },
            updateRoomParticipants: function (e) {
                e.forEach(e => {
                    let n = JSON.parse(e.properties);
                    if (e.userId !== t.localUser.userid) {
                        a.addParticipant(e.userId, e.id),
                            n.videoForUsername = {};
                        let t = [];
                        n.camerasForName && n.camerasForName.forEach(function (e) {
                            t.push(e.videoDeviceId),
                                n.videoForUsername[e.videoDeviceId] = e.cameraName
                        }),
                            n.cameras = t,
                            a.updateParticipantByUserid(e.userId, "properties", n)
                    }
                }
                )
            },
            updateRoomParticipant: function (e, i) {
                if ("server" == i && (i = e.userId),
                    i == t.localUser.userid)
                    return;
                let r = JSON.parse(e.properties)
                    , o = !1;
                if ("pc" == r.deviceType)
                    $(`.user-video[data-userid="${i}"]`).each(function () {
                        -1 == $.inArray($(this).attr("data-videodeviceid"), r.cameras) && ($(this).remove(),
                            o = !0,
                            a.updateParticipantConstraints(i, "video", !1, $(this).attr("data-videodeviceid")))
                    }),
                        a.updateParticipantByUserid(i, "properties", r),
                        r.cameras.forEach(function (e) {
                            let t = 1 == r.cameras.length ? r.username : r.cameras[0] == e ? r.username : r.videoForUsername[e];
                            $(`.user-video[data-userId="${i}"][data-videoDeviceId="${e.replace("+", "\\+").replace("-", "\\-")}"]`).find("span").html(t)
                        });
                else {
                    r.role == N.chairman && (t.room.newChatAppend(n.instant("room.chairmanChangedTo") + r.username),
                        t.room.checkIsChairman());
                    let e = [];
                    for (let t = 0; t < r.camerasForName.length; t++)
                        e.push(r.camerasForName[t].videoDeviceId);
                    $(`.user-video[data-userid="${i}"]`).each(function () {
                        -1 == $.inArray($(this).attr("data-videodeviceid"), e) && (o = !0,
                            $(this).remove(),
                            a.updateParticipantConstraints(i, "video", !1, $(this).attr("data-videodeviceid")))
                    });
                    let s = [];
                    r.videoForUsername = {},
                        r.camerasForName.forEach(function (e) {
                            s.push(e.videoDeviceId);
                            let t = e.cameraName;
                            r.videoForUsername[e.videoDeviceId] = e.cameraName,
                                2 & r.state ? $(`.user-video[data-userId="${i}"][data-videoDeviceId="${e.videoDeviceId.replace("+", "\\+").replace("-", "\\-")}"]`).find("span").html(t) : (a.updateParticipantConstraints(i, "video", !1, e.videoDeviceId),
                                    $(`.user-video[data-userId="${i}"][data-videoDeviceId="${e.videoDeviceId.replace("+", "\\+").replace("-", "\\-")}"]`).length > 0 && ($(`.user-video[data-userId="${i}"][data-videoDeviceId="${e.videoDeviceId.replace("+", "\\+").replace("-", "\\-")}"]`).remove(),
                                        o = !0))
                        }),
                        r.cameras = s,
                        a.updateParticipantByUserid(i, "properties", r)
                }
                "join" == e.msgType && r.role != N.stealth && t.room.newChatAppend(r.username + n.instant("room.joinMeeting")),
                    o && t.room.changeVideoPartDisplay()
            },
            applyOpenWindowSubscribeOption: function (e, t, n) { },
            applySubScribeOption: function (e, n, i) {
                let r = a.getParticipantSubsciptionByParticipantIdAndStreamId(e.participantId, n.id);
                if (null != r) {
                    let e;
                    "mainSub" == t.room.currentLayout ? (0 == i.attr("data-index") && (e = n.subscibeOptions[1]),
                        0 != i.attr("data-index") && (e = n.subscibeOptions[0]),
                        "true" == i.attr("fullscreen") && (e = n.subscibeOptions[2])) : "bisection" == t.room.currentLayout && (e = $(".main-panel .user-video").length <= 4 ? n.subscibeOptions[1] : n.subscibeOptions[0],
                            "true" == i.attr("fullscreen") && (e = n.subscibeOptions[2])),
                        t.room.checkIsWebView() && 1 == t.room.liveSetting.pushWindow && t.room.isLiving && (e = n.subscibeOptions[2]),
                        console.log(e),
                        r.applyOptions(e),
                        e.video.resolution.width / e.video.resolution.height == 16 / 9 ? i.find("video").addClass("cover") : i.find("video").removeClass("cover")
                }
            },
            calcSubsctibeOption: function (e, n = null) {
                let i = e.capabilities.video.resolutions
                    , r = i[i.length - 1].height >= i[i.length - 1].width
                    , o = !1;
                void 0 !== e.isHeightOverWidth && e.isHeightOverWidth != r && (o = !0),
                    e.isHeightOverWidth = r;
                let a = []
                    , s = [];
                for (let e in i)
                    r ? i[e].height >= i[e].width && a.push(i[e]) : i[e].width >= i[e].height && a.push(i[e]);
                console.log("video：", e.capabilities.video);
                let l = {
                    video: {
                        resolution: a[0]
                    }
                }
                    , c = {
                        video: {
                            resolution: a[a.length - 1]
                        }
                    }
                    , u = c;
                a.length > 2 && (u = {
                    video: {
                        resolution: a[Math.floor(a.length / 2)]
                    }
                }),
                    s.push(l),
                    s.push(u),
                    s.push(c),
                    e.subscibeOptions = s,
                    o && null != n && (t.room.isMultiScreen ? t.room.applyOpenWindowSubscribeOption(n, e, t.room.opener.window.$(`.user-video[data-videoDeviceId="${e.name.replace("+", "\\+").replace("-", "\\-")}"]`)) : t.room.applySubScribeOption(n, e, $(`.user-video[data-videoDeviceId="${e.name.replace("+", "\\+").replace("-", "\\-")}"]`)))
            },
            addParticipantStream: function (e) {
                if (0 == e.origin.toLowerCase().indexOf("sip"))
                    return;
                "object" == typeof e.attributes && ("audio" == e.attributes.type ? e.name = "audio" : (e.name = e.attributes.name,
                    e.mediaConstraints = e.attributes.mediaConstraints)),
                    "video" == e.attributes.type && t.room.calcSubsctibeOption(e);
                let n = a.addParticipantStreamByParticipantId(e.origin, e);
                t.room.streamAdded(n, e),
                    e.addEventListener("updated", () => {
                        "video" == e.attributes.type && (console.log("updated", e.capabilities.video.resolutions),
                            t.room.calcSubsctibeOption(e, n))
                    }
                    ),
                    e.addEventListener("ended", () => {
                        console.log(e.id + " is ended."),
                            a.removeParticipantStreamByParticipantIdAndStreamId(e.origin, e.id),
                            $(`#audioArea [data-stream-id="${e.id}"]`).remove(),
                            "audio" == e.attributes.type ? (null != n && t.room.digstRefresh(() => {
                                a.updateParticipantConstraints(n.userid, "audio", !1),
                                    t.room.participants = a.getParticipants()
                            }
                            ),
                                $(`[data-participantid="${e.origin}"] .user-mic`).attr("src", U.mic.off)) : "screen" == e.attributes.type && null != n && e.id == $("#screen-board video").attr("data-stream-id") && (t.room.isSharingAndStopFrame = !1,
                                    $("#screen-board").hide(),
                                    t.room.digstRefresh(() => {
                                        t.room.hasShareScreen = !1,
                                            t.room.currentMainPage = "whiteboard"
                                    }
                                    ))
                    }
                    )
            },
            mainWidthChange: function () {
                t.literally.calcauteLiterally(!0),
                    "whiteboard" == t.room.currentMainPage && "file" == t.literally.currentPageType ? t.literally.refreshFile() : t.literally.initWb()
            },
            refreshMainSubLayout: function () {
                let e, n, i = $(".main-panel").children(":not(.forceHide)").length, r = $("[ui-view]").height();
                $(".whiteboard-tool").removeClass("low-resolution"),
                    $(".main-panel").children("[data-isMain]:not(.forceHide)").removeAttr("style"),
                    $(".main-panel").children(":not([data-isMain]):not(.forceHide)").removeAttr("style"),
                    $(".main-panel").children(":not(.forceHide)").removeAttr("data-isMain");
                let o = 0;
                if ($(".main-panel").children(":not(.forceHide)").sort(function (e, t) {
                    return $(e).attr("data-index") - $(t).attr("data-index")
                }).each(function () {
                    $(this).attr("data-index", o),
                        o++
                }),
                    $('.main-panel [data-index="0"]').attr("data-isMain", !0),
                    "0" == $(".left-panel").attr("data-index"))
                    $("#screen-board").removeClass("small-screen"),
                        $(".left-panel .white-board-img").remove();
                else {
                    $("#screen-board").addClass("small-screen");
                    let e = $('<div class="white-board-img">\n                        <div class="img-area"><img /></div>\n                    </div>');
                    $(".left-panel").append(e),
                        t.room.mainWidthChange()
                }
                if (i <= 5)
                    1 == i ? ($(".left-panel").attr("data-ismain", !0),
                        $(".left-panel").attr("data-index", 0),
                        $(".main-panel").children("[data-isMain]").css("width", "100%"),
                        $(".main-panel").children("[data-isMain]").css("height", "100%"),
                        $(".whiteboard-tool").removeAttr("style"),
                        $("#screen-board").removeClass("small-screen"),
                        $(".left-panel .white-board-img").remove()) : i <= 4 ? (n = 16 / 9 * (e = r / 3),
                            $("[data-isMain]").css("width", `calc(100% - ${n}px)`),
                            $("[data-isMain]").css("height", "100%"),
                            $(".whiteboard-tool").css("padding-left", 0),
                            $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                            $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                            2 == i ? ($(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("top", e),
                                $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("right", 0)) : 3 == i ? $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                                    let t = $(this).attr("data-index") - 1;
                                    $(this).css("top", e * (t + .5)),
                                        $(this).css("right", 0)
                                }) : 4 == i && $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                                    let t = $(this).attr("data-index") - 1;
                                    $(this).css("top", e * t),
                                        $(this).css("right", 0)
                                })) : (n = 16 / 9 * (e = r / (i - 1)),
                                    $("[data-isMain]").css("width", `calc(100% - ${n}px)`),
                                    $("[data-isMain]").css("height", "100%"),
                                    $(".whiteboard-tool").css("padding-left", 0),
                                    $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                                    $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                                    $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                                        let t = $(this).attr("data-index") - 1;
                                        $(this).css("top", e * t),
                                            $(this).css("right", 0)
                                    }));
                else if (6 == i)
                    n = 16 / 9 * (e = r / 3),
                        $("[data-isMain]").css("width", `calc(100% - ${n}px)`),
                        $("[data-isMain]").css("height", `calc(100% - ${e}px)`),
                        $(".whiteboard-tool").css("padding-left", 0),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                            let t = $(this).attr("data-index") - 1;
                            t <= 1 ? ($(this).css("top", e * t),
                                $(this).css("right", 0)) : ($(this).css("top", 2 * e),
                                    $(this).css("left", n * (t - 2)))
                        });
                else if (7 == i)
                    n = 16 / 9 * (e = r / 4),
                        $("[data-isMain]").css("width", `calc(100% - ${n}px)`),
                        $("[data-isMain]").css("height", `calc(100% - ${e}px)`),
                        $(".whiteboard-tool").css("padding-left", 0),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                            let t = $(this).attr("data-index") - 1;
                            t <= 2 ? ($(this).css("top", e * t),
                                $(this).css("right", 0)) : ($(this).css("top", 3 * e),
                                    $(this).css("left", n * (t - 3)))
                        });
                else if (8 == i)
                    n = 16 / 9 * (e = r / 4),
                        $("[data-isMain]").css("width", `calc(100% - ${n}px)`),
                        $("[data-isMain]").css("height", `calc(100% - ${e}px)`),
                        $(".whiteboard-tool").css("padding-left", 0),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                            let t = $(this).attr("data-index") - 1;
                            t <= 2 ? ($(this).css("top", e * t),
                                $(this).css("right", 0)) : ($(this).css("top", 3 * e),
                                    $(this).css("left", n * (t - 3)))
                        });
                else if (9 == i)
                    n = 16 / 9 * (e = r / 5),
                        $("[data-isMain]").css("width", `calc(100% - ${n}px)`),
                        $("[data-isMain]").css("height", `calc(100% - ${e}px)`),
                        $(".whiteboard-tool").css("padding-left", 0),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                            let t = $(this).attr("data-index") - 1;
                            t <= 3 ? ($(this).css("top", e * t),
                                $(this).css("right", 0)) : ($(this).css("top", 4 * e),
                                    $(this).css("left", n * (t - 4)))
                        });
                else if (10 == i)
                    n = 16 / 9 * (e = r / 5),
                        $("[data-isMain]").css("width", `calc(100% - ${n}px)`),
                        $("[data-isMain]").css("height", `calc(100% - ${e}px)`),
                        $(".whiteboard-tool").css("padding-left", 0),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                            let t = $(this).attr("data-index") - 1;
                            t <= 3 ? ($(this).css("top", e * t),
                                $(this).css("right", 0)) : ($(this).css("top", 4 * e),
                                    $(this).css("left", n * (t - 4)))
                        });
                else if (11 == i)
                    n = 16 / 9 * (e = r / 6),
                        $("[data-isMain]").css("width", `calc(100% - ${n}px)`),
                        $("[data-isMain]").css("height", `calc(100% - ${e}px)`),
                        $(".whiteboard-tool").css("padding-left", 0),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                            let t = $(this).attr("data-index") - 1;
                            t <= 4 ? ($(this).css("top", e * t),
                                $(this).css("right", 0)) : ($(this).css("top", 5 * e),
                                    $(this).css("left", n * (t - 5)))
                        });
                else if (12 == i)
                    n = 16 / 9 * (e = r / 6),
                        $("[data-isMain]").css("width", `calc(100% - ${n}px)`),
                        $("[data-isMain]").css("height", `calc(100% - ${e}px)`),
                        $(".whiteboard-tool").css("padding-left", 0),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                            let t = $(this).attr("data-index") - 1;
                            t <= 4 ? ($(this).css("top", e * t),
                                $(this).css("right", 0)) : ($(this).css("top", 5 * e),
                                    $(this).css("left", n * (t - 5)))
                        });
                else if (13 == i)
                    n = 16 / 9 * (e = r / 6),
                        $("[data-isMain]").css("width", `calc(100% - ${2 * n}px)`),
                        $("[data-isMain]").css("height", `calc(100% - ${2 * e}px)`),
                        $("[data-isMain]").css("left", `${n}px`),
                        $(".whiteboard-tool").css("padding-left", 0),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                            let t = $(this).attr("data-index") - 1;
                            t <= 4 ? ($(this).css("top", e * t),
                                $(this).css("right", 0)) : t > 4 && t <= 9 ? ($(this).css("top", e * (t - 5)),
                                    $(this).css("left", 0)) : ($(this).css("width", `${2 * n}px`),
                                        $(this).css("height", `${2 * e}px`),
                                        $(this).css("bottom", 0),
                                        $(this).css("left", (2 * t - 19) * n))
                        });
                else if (14 == i)
                    n = 16 / 9 * (e = r / 6),
                        $("[data-isMain]").css("width", `calc(100% - ${2 * n}px)`),
                        $("[data-isMain]").css("height", `calc(100% - ${2 * e}px)`),
                        $("[data-isMain]").css("left", `${n}px`),
                        $(".whiteboard-tool").css("padding-left", 0),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                            let t = $(this).attr("data-index") - 1;
                            t <= 4 ? ($(this).css("top", e * t),
                                $(this).css("right", 0)) : t > 4 && t <= 10 ? ($(this).css("top", e * (t - 5)),
                                    $(this).css("left", 0)) : ($(this).css("width", `${2 * n}px`),
                                        $(this).css("height", `${2 * e}px`),
                                        $(this).css("bottom", 0),
                                        $(this).css("left", (2 * t - 21) * n))
                        });
                else if (15 == i)
                    n = 16 / 9 * (e = r / 6),
                        $("[data-isMain]").css("width", `calc(100% - ${2 * n}px)`),
                        $("[data-isMain]").css("height", `calc(100% - ${2 * e}px)`),
                        $("[data-isMain]").css("left", `${n}px`),
                        $(".whiteboard-tool").css("padding-left", 0),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                            let t = $(this).attr("data-index") - 1;
                            t <= 5 ? ($(this).css("top", e * t),
                                $(this).css("right", 0)) : t > 5 && t <= 11 ? ($(this).css("top", e * (t - 6)),
                                    $(this).css("left", 0)) : ($(this).css("width", `${2 * n}px`),
                                        $(this).css("height", `${2 * e}px`),
                                        $(this).css("bottom", 0),
                                        $(this).css("left", (2 * t - 23) * n))
                        });
                else if (16 == i) {
                    let t = 4 * (n = 16 / 9 * (e = r / 6)) / 3
                        , i = 9 * t / 16
                        , o = `calc(100% - ${4 * e}px - ${n}px)`
                        , a = o;
                    $("[data-isMain]").css("width", `calc(100% - ${2 * n}px)`),
                        $("[data-isMain]").css("height", `${4 * e}px`),
                        $("[data-isMain]").css("left", `${n}px`),
                        $("[data-isMain]").css("top", o),
                        $(".whiteboard-tool").css("padding-left", 0),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                            let r = $(this).attr("data-index") - 1;
                            r <= 5 ? ($(this).css("top", e * r),
                                $(this).css("right", 0)) : r > 5 && r <= 11 ? ($(this).css("top", e * (r - 6)),
                                    $(this).css("left", 0)) : ($(this).css("width", t),
                                        $(this).css("height", i),
                                        $(this).css("bottom", a),
                                        12 == r ? $(this).css("left", n) : $(this).css("left", n + (r - 12) * t))
                        })
                } else
                    17 == i ? (n = 16 / 9 * (e = r / 6),
                        $("[data-isMain]").css("width", `calc(100% - ${2 * n}px)`),
                        $("[data-isMain]").css("height", `${4 * e}px`),
                        $("[data-isMain]").css("left", `${n}px`),
                        $("[data-isMain]").css("top", e),
                        $(".whiteboard-tool").css("padding-left", 0),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                            let t = $(this).attr("data-index") - 1;
                            t <= 5 ? ($(this).css("top", e * t),
                                $(this).css("right", 0)) : t > 5 && t <= 11 ? ($(this).css("top", e * (t - 6)),
                                    $(this).css("left", 0)) : ($(this).css("top", 0),
                                        $(this).css("left", (t - 11) * n))
                        })) : 18 == i ? (n = 16 / 9 * (e = r / 6),
                            $("[data-isMain]").css("width", `calc(100% - ${2 * n}px)`),
                            $("[data-isMain]").css("height", `${4 * e}px`),
                            $("[data-isMain]").css("left", `${n}px`),
                            $("[data-isMain]").css("top", e),
                            $(".whiteboard-tool").css("padding-left", 0),
                            $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                            $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                            $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                                let t = $(this).attr("data-index") - 1;
                                t <= 5 ? ($(this).css("top", e * t),
                                    $(this).css("right", 0)) : t > 5 && t <= 11 ? ($(this).css("top", e * (t - 6)),
                                        $(this).css("left", 0)) : t > 11 && t <= 15 ? ($(this).css("top", 0),
                                            $(this).css("left", (t - 11) * n)) : ($(this).css("bottom", 0),
                                                $(this).css("left", 5 * n / 2))
                            })) : 19 == i ? (n = 16 / 9 * (e = r / 6),
                                $("[data-isMain]").css("width", `calc(100% - ${2 * n}px)`),
                                $("[data-isMain]").css("height", `${4 * e}px`),
                                $("[data-isMain]").css("left", `${n}px`),
                                $(".whiteboard-tool").css("padding-left", 0),
                                $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                                $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                                $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                                    let t = $(this).attr("data-index") - 1;
                                    t <= 4 ? ($(this).css("top", e * t),
                                        $(this).css("right", 0)) : t > 4 && t <= 9 ? ($(this).css("top", e * (t - 5)),
                                            $(this).css("left", 0)) : t > 9 && t <= 13 ? ($(this).css("top", 4 * e),
                                                $(this).css("left", (t - 9) * n)) : ($(this).css("top", 5 * e),
                                                    $(this).css("left", (t - 13) * n))
                                })) : 20 == i ? (n = 16 / 9 * (e = r / 6),
                                    $("[data-isMain]").css("width", `calc(100% - ${2 * n}px)`),
                                    $("[data-isMain]").css("height", `${4 * e}px`),
                                    $("[data-isMain]").css("left", `${n}px`),
                                    $("[data-isMain]").css("top", e),
                                    $(".whiteboard-tool").css("padding-left", 0),
                                    $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                                    $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                                    $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                                        let t = $(this).attr("data-index") - 1;
                                        t <= 5 ? ($(this).css("top", e * t),
                                            $(this).css("right", 0)) : t > 5 && t <= 11 ? ($(this).css("top", e * (t - 6)),
                                                $(this).css("left", 0)) : t > 11 && t <= 14 ? ($(this).css("top", 0),
                                                    $(this).css("left", (t - 11) * n)) : ($(this).css("top", 5 * e),
                                                        $(this).css("left", (t - 14) * n))
                                    })) : 21 == i ? (n = 16 / 9 * (e = r / 6),
                                        $("[data-isMain]").css("width", `calc(100% - ${2 * n}px)`),
                                        $("[data-isMain]").css("height", `${4 * e}px`),
                                        $("[data-isMain]").css("left", `${n}px`),
                                        $("[data-isMain]").css("top", e),
                                        $(".whiteboard-tool").css("padding-left", 0),
                                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                                        $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                                            let t = $(this).attr("data-index") - 1;
                                            t <= 5 ? ($(this).css("top", e * t),
                                                $(this).css("right", 0)) : t > 5 && t <= 11 ? ($(this).css("top", e * (t - 6)),
                                                    $(this).css("left", 0)) : t > 11 && t <= 15 ? ($(this).css("top", 0),
                                                        $(this).css("left", (t - 11) * n)) : ($(this).css("top", 5 * e),
                                                            $(this).css("left", (t - 15) * n))
                                        })) : 22 == i ? (n = 16 / 9 * (e = r / 6),
                                            $("[data-isMain]").css("width", `calc(100% - ${3 * n}px)`),
                                            $("[data-isMain]").css("height", `${3 * e}px`),
                                            $("[data-isMain]").css("left", `${n}px`),
                                            $("[data-isMain]").css("top", e / 2 + e),
                                            $(".whiteboard-tool").css("padding-left", 0),
                                            $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                                            $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                                            $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                                                let t = $(this).attr("data-index") - 1;
                                                t <= 1 ? ($(this).css("top", 0),
                                                    $(this).css("right", (1 - t) * n)) : t > 1 && t <= 3 ? ($(this).css("top", e),
                                                        $(this).css("right", (3 - t) * n)) : 4 == t ? ($(this).css("width", 2 * n),
                                                            $(this).css("height", 2 * e),
                                                            $(this).css("top", 2 * e),
                                                            $(this).css("right", 0)) : t > 4 && t <= 6 ? ($(this).css("top", 4 * e),
                                                                $(this).css("right", (6 - t) * n)) : t > 6 && t <= 8 ? ($(this).css("top", 5 * e),
                                                                    $(this).css("right", (8 - t) * n)) : t > 8 && t <= 14 ? ($(this).css("top", (t - 9) * e),
                                                                        $(this).css("left", 0)) : t > 14 && t <= 17 ? ($(this).css("top", e / 2),
                                                                            $(this).css("left", (t - 14) * n)) : ($(this).css("bottom", e / 2),
                                                                                $(this).css("left", (t - 17) * n))
                                            })) : i >= 23 && (n = 16 / 9 * (e = r / 6),
                                                $("[data-isMain]").css("width", `calc(100% - ${3 * n}px)`),
                                                $("[data-isMain]").css("height", `${3 * e}px`),
                                                $("[data-isMain]").css("left", `${n}px`),
                                                $("[data-isMain]").css("top", 2 * e),
                                                $(".whiteboard-tool").css("padding-left", 0),
                                                $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("width", n),
                                                $(".main-panel").children(":not([data-isMain]):not(.forceHide)").css("height", e),
                                                $(".main-panel").children(":not([data-isMain]):not(.forceHide)").each(function () {
                                                    let t = $(this).attr("data-index") - 1;
                                                    t <= 1 ? ($(this).css("top", 0),
                                                        $(this).css("right", (1 - t) * n)) : t > 1 && t <= 3 ? ($(this).css("top", e),
                                                            $(this).css("right", (3 - t) * n)) : 4 == t ? ($(this).css("width", 2 * n),
                                                                $(this).css("height", 2 * e),
                                                                $(this).css("top", 2 * e),
                                                                $(this).css("right", 0)) : t > 4 && t <= 6 ? ($(this).css("top", 4 * e),
                                                                    $(this).css("right", (6 - t) * n)) : t > 6 && t <= 8 ? ($(this).css("top", 5 * e),
                                                                        $(this).css("right", (8 - t) * n)) : t > 8 && t <= 14 ? ($(this).css("top", (t - 9) * e),
                                                                            $(this).css("left", 0)) : t > 14 && t <= 17 ? ($(this).css("top", e),
                                                                                $(this).css("left", (t - 14) * n)) : t > 17 && t <= 20 ? ($(this).css("bottom", 0),
                                                                                    $(this).css("left", (t - 17) * n)) : ($(this).css("top", 0),
                                                                                        $(this).css("left", (t - 20) * n))
                                                }));
                $("[data-isMain]").width() <= 960 && $(".whiteboard-tool").addClass("low-resolution"),
                    $(".main-panel").children(".user-video").each(function () {
                        let e = $(this);
                        t.room.refreshSubscribe(e)
                    })
            },
            refreshBisectionLayout: function () {
                let e = $(".main-panel").children(":not(.forceHide)")
                    , n = ($(".user-video").length,
                        0);
                if ($(".main-panel").children(":not(.forceHide)").sort(function (e, t) {
                    return $(e).attr("data-index") - $(t).attr("data-index")
                }).each(function () {
                    $(this).attr("data-index", n),
                        n++
                }),
                    $('.main-panel [data-index="0"]').attr("data-isMain", !0),
                    e.length > 1) {
                    $(".left-panel").addClass("bisectionLayout"),
                        $("#screen-board").removeClass("small-screen"),
                        $(".left-panel .white-board-img").remove(),
                        $("#screen-board").addClass("small-screen");
                    let e = $('<div class="white-board-img">\n<div class="img-area"><img /></div>\n                    </div>');
                    $(".left-panel").append(e)
                } else
                    $(".left-panel").removeClass("bisectionLayout"),
                        $("#screen-board").removeClass("small-screen"),
                        $(".left-panel .white-board-img").remove();
                t.room.mainWidthChange();
                let i = e.length;
                e.removeAttr("style");
                let r = $("[ui-view]").width()
                    , o = $("[ui-view]").height()
                    , a = Math.round(Math.sqrt(e.length))
                    , s = Math.ceil(e.length / a)
                    , l = r / s
                    , c = 9 * l / 16;
                if (e.css("width", l),
                    e.css("height", c),
                    1 == i)
                    e.css("top", 0),
                        e.css("left", 0);
                else if (2 == i)
                    e.css("top", `calc((100% - ${c}px) / 2)`),
                        e.each(function () {
                            let e = parseInt($(this).attr("data-index")) + 1;
                            $(this).css("left", (e - 1) * l)
                        });
                else if (i > 2 && i <= 4) {
                    let t = Math.floor(i / 2)
                        , n = (r - t * l) / 2;
                    e.each(function () {
                        let e = parseInt($(this).attr("data-index")) + 1;
                        e <= t ? ($(this).css("top", 0),
                            $(this).css("left", n + (e - 1) * l)) : ($(this).css("top", c),
                                $(this).css("left", (e - t - 1) * l))
                    })
                } else {
                    let t = (r - Math.floor(i / a) * l) / 2
                        , n = (o - a * c) / 2;
                    e.each(function () {
                        let e = parseInt($(this).attr("data-index")) + 1;
                        e <= s * (a - 1) ? ($(this).css("left", (e - s * (Math.ceil(e / s) - 1) - 1) * l),
                            $(this).css("top", n + (Math.ceil(e / s) - 1) * c)) : ($(this).css("left", t + (e - s * (Math.ceil(e / s) - 1) - 1) * l),
                                $(this).css("top", n + (Math.ceil(e / s) - 1) * c))
                    })
                }
                $(".main-panel").children(".user-video").each(function () {
                    let e = $(this);
                    t.room.refreshSubscribe(e)
                })
            },
            changeVideoPartDisplay: function (e = !1, n = !1, i = !0, r = !1) {
                if (t.room.userVideoCounting = $(".main-panel").children(":not(.forceHide)").length - 1,
                    e || 1 != t.room.chairmanControlStatus.isOpen || 1 != t.room.chairmanControlStatus.manualSynchronize && 1 != t.room.chairmanControlStatus.globalSynchronize || t.localUser.properties.role == t.room.roles.chairman || n) {
                    if (e) {
                        let e = document.body.clientWidth
                            , n = document.body.clientHeight;
                        if (!t.room.checkIsWebView()) {
                            $("html").width() == window.screen.width && $("html").height() == window.screen.height ? t.room.isFullScreen = !0 : t.room.isFullScreen = !1;
                            var o = setTimeout(function () {
                                clearTimeout(o),
                                    $(".left-panel").width() == window.screen.width && $(".left-panel").height() == window.screen.height || $(".left-panel").removeAttr("fullscreen")
                            }, 500);
                            t.$applyAsync()
                        }
                        if (checkFull()) {
                            let e = 16 / 9 * n;
                            $("div[ui-view]").css("width", e),
                                $("div[ui-view]").css("height", n)
                        } else if (e <= n) {
                            let t = 9 * e / 16;
                            $("div[ui-view]").css("width", e),
                                $("div[ui-view]").css("height", t)
                        } else {
                            let t = 16 / 9 * n;
                            if (t > e) {
                                let t = 9 * e / 16;
                                $("div[ui-view]").css("width", e),
                                    $("div[ui-view]").css("height", t)
                            } else
                                $("div[ui-view]").css("width", t),
                                    $("div[ui-view]").css("height", n)
                        }
                    }
                    "mainSub" == t.room.currentLayout ? t.room.refreshMainSubLayout() : "bisection" == t.room.currentLayout && t.room.refreshBisectionLayout(),
                        t.room.mainWidthChange(),
                        t.room.syncChairmanUserVideo(i),
                        t.room.syncChairmanUserVideoToHuikong(),
                        t.room.syncUserVideoToSecondLive(),
                        r || (0 == $(".main-panel").children(":not(.forceHide)").length ? (t.room.OPBtnShow = !1,
                            t.room.OPShow = !0) : t.room.OPShow = !1),
                        t.$applyAsync()
                }
            },
            addBordImage: function () {
                "bisection" == t.room.currentLayout && t.literally.canvasToimg()
            },
            subscribe: function (e, i) {
                let r = void 0;
                "object" == typeof i.attributes && "video" == i.attributes.type && (null != (r = i.subscibeOptions[0]).video.resolution.width && null != r.video.resolution.height || (r = void 0)),
                    t.room.checkIsWebView() && 1 == t.room.liveSetting.pushWindow && t.room.isLiving && (r = void 0),
                    conference.subscribe(i, r).then(r => {
                        if ("object" == typeof i.attributes)
                            if ("audio" == i.attributes.type) {
                                let n = $(`\n                                <audio data-userId="${e.userid}" data-stream-id="${i.id}" autoplay></audio>\n                            `);
                                if (n.get(0).srcObject = i.mediaStream,
                                    $("#audioArea").append(n),
                                    0 != t.localUser.audioOutputDefault.length) {
                                    let e = t.localUser.audioOutputDefault.substr(0, t.localUser.audioOutputDefault.length - t.localUser.userid.length);
                                    n.get(0).volume = se / 100,
                                        n.get(0).setSinkId(e)
                                }
                                const r = window.AudioContext || window.webkitAudioContext
                                    , o = !(!navigator.getUserMedia || !r) && new r
                                    , s = o.createMediaStreamSource(i.mediaStream)
                                    , l = o.createAnalyser()
                                    , u = 1024
                                    , d = new Uint8Array(u);
                                l.fftSize = u,
                                    s.connect(l);
                                let p = $(`.user-list li[data-user-id="${e.userid}"]`).find(".user-mic").siblings(".user-mic-level")
                                    , h = []
                                    , f = []
                                    , m = 0;
                                let g = setInterval(function () {
                                    if (null != a.getParticipantStreamByUserIdAndStreamId(e.userid, i.id)) {
                                        m += 1,
                                            l.getByteTimeDomainData(d);
                                        for (var n, r, o, s = me = 0; me < u;)
                                            s += (n = d[me++] / 128 - 1) * n;
                                        if (r = Math.sqrt(s / u),
                                            o = Math.log(r) / Math.log(10) * 20,
                                            (o = 100 + 2.083 * (o = Math.max(-48, Math.min(o, 0)))) >= 15 ? (h.push(0),
                                                p.attr("data-isspeaking", "1"),
                                                p.find(".user-mic-level-c").css("height", o + "%")) : (f.push(0),
                                                    p.removeAttr("data-isspeaking"),
                                                    p.find(".user-mic-level-c").css("height", 0)),
                                            m % 100 == 0 && (h.length > 10 && (-1 == $.inArray(e.properties.username, t.room.speakerName) && t.room.speakerName.push(e.properties.username),
                                                t.$applyAsync()),
                                                f.length >= 90)) {
                                            var c = getArrIndex(t.room.speakerName, e.properties.username);
                                            if (t.room.speakerName.splice(c, 1),
                                                0 == t.room.speakerName.length)
                                                var v = setTimeout(function () {
                                                    t.$applyAsync(),
                                                        clearTimeout(v)
                                                }, 1e3)
                                        }
                                        let i = e.properties.cameras;
                                        if (0 == i.length)
                                            return;
                                        let a = $(`.user-video[data-userid="${e.userid}"][data-videoDeviceId="${i[0]}"]`);
                                        if (t.room.voiceAnalyse && m % 100 == 0 && ("bisection" == t.room.currentLayout ? a.addClass("new-border") : a.removeClass("new-border")),
                                            t.room.excitation && m % 100 == 0) {
                                            if (t.room.isSharingAndStopFrame)
                                                return;
                                            if (1 == t.room.chairmanControlStatus.isOpen && t.localUser.properties.role != t.room.roles.chairman && (1 == t.room.chairmanControlStatus.manualSynchronize || 1 == t.room.chairmanControlStatus.globalSynchronize))
                                                return;
                                            let e = a.length
                                                , n = a.attr("data-index");
                                            if (h.length > 10)
                                                if (1 == t.room.speakerName.length) {
                                                    if (1 == e && 0 != n) {
                                                        let e = $('.main-panel [data-index="0"]').attr("time")
                                                            , i = (new Date).getTime();
                                                        if (e && !(i - e > 2e3))
                                                            return;
                                                        $('.main-panel [data-index="0"]').attr("data-index", n),
                                                            a.attr("data-index", 0),
                                                            a.attr("time", i),
                                                            t.room.changeVideoPartDisplay()
                                                    } else if (1 == e && 0 == n) {
                                                        let e = (new Date).getTime();
                                                        a.attr("time", e),
                                                            "bisection" == t.room.currentLayout ? a.addClass("new-border") : a.removeClass("new-border")
                                                    }
                                                } else if (1 == e && 0 == n) {
                                                    let e = (new Date).getTime();
                                                    a.attr("time", e)
                                                }
                                        }
                                        m % 100 == 0 && (m = 0,
                                            h = [],
                                            f = [])
                                    } else {
                                        c = getArrIndex(t.room.speakerName, e.properties.username);
                                        t.room.speakerName.splice(c, 1),
                                            t.$applyAsync(),
                                            p.find(".user-mic-level-c").css("height", 0);
                                        let n = e.properties.cameras;
                                        if (0 != n.length) {
                                            $(`.user-video[data-userid="${e.userid}"][data-videoDeviceId=${n[0]}]`).removeClass("new-border")
                                        }
                                        clearInterval(g)
                                    }
                                }, 10);
                                c.connectStream(i.mediaStream),
                                    t.room.digstRefresh(() => {
                                        a.updateParticipantConstraints(e.userid, "audio", !0),
                                            t.room.participants = a.getParticipants()
                                    }
                                    ),
                                    $(`[data-user-id="${e.userid}"] .user-mic`).attr("src", U.mic.on)
                            } else if ("video" == i.attributes.type) {
                                if (r.streamId = i.id,
                                    a.addParticipantSubsciptionByParticipantId(e.userid, r),
                                    !t.room.isMultiScreen && 0 == $(`.user-video[data-videoDeviceId="${i.name.replace("+", "\\+").replace("-", "\\-")}"]`).length || t.room.isMultiScreen && 0 == t.room.opener.window.$(`.user-video[data-videoDeviceId="${i.name.replace("+", "\\+").replace("-", "\\-")}"]`).length) {
                                    let t = a.getParticipantSubsciptionByParticipantIdAndStreamId(e.participantId, i.id);
                                    return void (null != t && (t.stop(),
                                        a.removeParticipantSubsciptionByParticipantIdAndStreamId(e.participantId, i.id)))
                                }
                                if (t.room.isMultiScreen) {
                                    let n;
                                    t.room.opener.window.$(".video-container").find(`.user-video[data-userId="${e.userid}"][data-videoDeviceId="${i.name.replace("+", "\\+").replace("-", "\\-")}"]`).attr("data-stream-id", i.id),
                                        n = t.room.opener.window.$(".video-container").find(".user-video").length <= 4 ? i.subscibeOptions[1] : i.subscibeOptions[0],
                                        r.applyOptions(n),
                                        t.room.opener.window.$(".video-container").find(`.user-video[data-userid=${e.userid}][data-videoDeviceId="${i.name.replace("+", "\\\\+").replace("-", "\\\\-")}"] video`).get(0).srcObject = i.mediaStream
                                } else {
                                    let n = $(`.user-video[data-userId="${e.userid}"][data-videoDeviceId="${i.name.replace("+", "\\+").replace("-", "\\-")}"] video`)
                                        , o = $(`.user-video[data-userId="${e.userid}"][data-videoDeviceId="${i.name.replace("+", "\\+").replace("-", "\\-")}"]`);
                                    $(`.user-video[data-userId="${e.userid}"][data-videoDeviceId="${i.name.replace("+", "\\+").replace("-", "\\-")}"]`).attr("data-stream-id", i.id),
                                        $(`.user-video[data-stream-id="${i.id}"] video`).get(0).srcObject = i.mediaStream,
                                        $(`.user-video[data-stream-id="${i.id}"] video`).get(0).onloadedmetadata = function () {
                                            let e;
                                            console.error("videoWith:" + this.videoWidth),
                                                console.error("videoHeight:" + this.videoHeight),
                                                "mainSub" == t.room.currentLayout ? (0 == o.attr("data-index") && (e = i.subscibeOptions[1]),
                                                    0 != o.attr("data-index") && (e = i.subscibeOptions[0]),
                                                    "true" == o.attr("fullscreen") && (e = i.subscibeOptions[2])) : "bisection" == t.room.currentLayout && (e = $(".main-panel .user-video").length <= 4 ? i.subscibeOptions[1] : i.subscibeOptions[0],
                                                        "true" == n.attr("fullscreen") && (e = i.subscibeOptions[2])),
                                                e.video.resolution.width / e.video.resolution.height == 16 / 9 ? $(this).addClass("cover") : $(this).removeClass("cover"),
                                                t.room.checkIsWebView() && 1 == t.room.liveSetting.pushWindow && t.room.isLiving && (e = i.subscibeOptions[2]),
                                                r.applyOptions(e)
                                        }
                                }
                            } else
                                "screen" == i.attributes.type && (t.room.stopShareDesktop(),
                                    t.room.isSharingAndStopFrame = !0,
                                    $("#screen-board .name").html(e.properties.username + n.instant("room.sharedScreen")),
                                    $("#screen-board video").attr("data-stream-id", i.id),
                                    $("#screen-board video").get(0).srcObject = i.mediaStream,
                                    $(".screen-video-play").show(),
                                    $("#screen-board video")[0].onplay = function () {
                                        $(".screen-video-play").hide()
                                    }
                                    ,
                                    $("#screen-board").show(),
                                    t.room.digstRefresh(() => {
                                        t.room.isSharing = !1,
                                            t.room.hasShareScreen = !0,
                                            t.room.currentMainPage = "shareScreen",
                                            t.room.whiteboardShow || t.room.showWhiteboard(!0, !0)
                                    }
                                    ))
                    }
                        , e => {
                            console.log("subscribe failed", e)
                        }
                    )
            },
            streamAdded: function (e, n) {
                null !== e && null != n && t.room.subscribe(e, n)
            },
            functionMore: function () {
                if (t.localUser.properties.role != N.speaker && t.localUser.properties.role != N.chairman)
                    return t.room.noPermision.upload = !0,
                        void t.room.toolTipShow(() => {
                            t.room.noPermision.upload = !1
                        }
                        );
                t.room.functionMoreShow = !t.room.functionMoreShow
            },
            shareDesktop: function () {
                if (1 != t.room.chairmanControlStatus.isOpen || t.localUser.properties.role == t.room.roles.chairman || 1 != t.room.chairmanControlStatus.manualSynchronize && 1 != t.room.chairmanControlStatus.globalSynchronize) {
                    if (null != o.getScreenPublication())
                        o.getScreenStream().mediaStream.getVideoTracks()[0].stop(),
                            o.getScreenStream().mediaStream.getAudioTracks()[0] && o.getScreenStream().mediaStream.getAudioTracks()[0].stop(),
                            o.getScreenPublication() && o.getScreenPublication().stop(),
                            o.setScreenPublication(null),
                            t.room.isSharing = !1,
                            t.room.checkIsWebView() && pc.screenShare("0");
                    else {
                        let i = !0;
                        0 == t.localUser.audioOutputDefault.length && (i = !1),
                            navigator.userAgent.toUpperCase().indexOf("MAC OS") > -1 && (i = !1);
                        let r = {
                            audio: i,
                            video: {
                                width: {
                                    ideal: 1920
                                },
                                height: {
                                    ideal: 1080
                                },
                                frameRate: {
                                    ideal: 30
                                }
                            }
                        };
                        function e(e) {
                            r.audio = e.getAudioTracks().length > 0;
                            let i = new Wy.Base.LocalStream(e, new Wy.Base.StreamSourceInfo("screen-cast", "screen-cast"), {
                                type: "screen",
                                mediaConstraints: r,
                                userId: t.localUser.userid
                            });
                            o.setScreenStream(i),
                                e.getVideoTracks()[0].onended = (e => {
                                    o.getScreenPublication() && o.getScreenPublication().stop(),
                                        o.setScreenPublication(null),
                                        t.room.checkIsWebView() && pc.screenShare("0"),
                                        t.room.digstRefresh(function () {
                                            t.room.isSharing = !1
                                        })
                                }
                                );
                            let a = {
                                video: {
                                    width: r.video.width.ideal,
                                    height: r.video.height.ideal,
                                    frameRate: r.video.frameRate.ideal,
                                    encodingParameters: [{
                                        codec: {
                                            name: "h264"
                                        },
                                        minBitrate: 3072,
                                        maxBitrate: 3072
                                    }]
                                }
                            };
                            conference.publish(i, a).then(e => {
                                $("#screen-board").hide(),
                                    t.room.checkIsWebView() && pc.screenShare("1"),
                                    t.room.digstRefresh(function () {
                                        t.room.isSharing = !0
                                    }),
                                    e.addEventListener("error", e => {
                                        console.log("Publication error: " + e.error.message)
                                    }
                                    ),
                                    o.setScreenPublication(e)
                            }
                                , i => {
                                    e.getTracks()[0].stop(),
                                        t.room.digstRefresh(function () {
                                            t.room.isSharing = !1
                                        }),
                                        alert(n.instant("errorMsg.1001"))
                                }
                            )
                        }
                        t.room.checkIsWebView() ? navigator.getUserMedia({
                            video: {
                                mandatory: {
                                    chromeMediaSource: "desktop",
                                    chromeMediaSourceId: ""
                                }
                            }
                        }, function (t) {
                            e(t)
                        }, function () { }) : navigator.mediaDevices.getDisplayMedia(r).then(t => {
                            e(t)
                        }
                        )
                    }
                    t.room.functionMoreShow = !1
                } else
                    t.room.newChatAppend(n.instant("room.syncModeOnShareTooltip"), "syncModeOnShareTooltip")
            },
            publishUserVideo: function (e, n) {
                let i = e.videoDeviceId;
                t.localUser.videoPublishCounts.set(n + "-" + i, n);
                let r = n;
                t.room.openOrStopLocalVideo(i, !1, !0, r, !1)
            },
            unPublishUserVideo: function (e, n) {
                if (void 0 == e) {
                    let e = new Map
                        , i = [];
                    t.localUser.videoPublishCounts.forEach(function (r, o, a) {
                        let s = o.indexOf(n + "-");
                        if (-1 === s)
                            e.set(o, t.localUser.videoPublishCounts.get(o));
                        else {
                            let e = o.substring(s + (n + "-").length);
                            i.push(e)
                        }
                    }),
                        t.localUser.videoPublishCounts = e,
                        i.forEach(function (e) {
                            let n = 0;
                            if (t.localUser.videoPublishCounts.forEach(function (t, i, r) {
                                -1 !== i.indexOf("-" + e) && (n += 1)
                            }),
                                0 == n) {
                                t.localUser.videoNeedPublishMap.set(e, !1);
                                let n = o.getStreamByName(e);
                                if (null == n)
                                    return;
                                let i = o.getPublicationByName(n.name);
                                if (null == i)
                                    return;
                                i.stop(),
                                    o.updateStream(n.id, "isPublished", !1),
                                    o.removePublicationByName(n.name),
                                    0 == $(`.user-video[data-videoDeviceId=${e}]`).length && (n.mediaStream && n.mediaStream.getVideoTracks()[0].stop(),
                                        o.removeStream(n.id),
                                        n = null)
                            }
                        })
                } else {
                    let i = e.videoDeviceId
                        , r = n + "-" + i;
                    t.localUser.videoPublishCounts.delete(r);
                    let a = 0;
                    if (t.localUser.videoPublishCounts.forEach(function (e, t, n) {
                        -1 !== t.indexOf("-" + i) && (a += 1)
                    }),
                        0 == a) {
                        t.localUser.videoNeedPublishMap.set(i, !1);
                        let e = o.getStreamByName(i);
                        if (null == e)
                            return;
                        o.updateStream(e.id, "isPublished", !1);
                        let n = o.getPublicationByName(e.name);
                        if (null == n)
                            return;
                        n.stop(),
                            o.removePublicationByName(e.name),
                            0 == $(`.user-video[data-videoDeviceId=${i}]`).length && (e.mediaStream && e.mediaStream.getVideoTracks()[0].stop(),
                                o.removeStream(e.id),
                                e = null)
                    }
                }
            },
            publishSuccess: function (e, t) { },
            openOrStopLocalVideo: function (e, i = !0, a = !1, s = "", l = !0, c = !1, u = !1) {
                if (l && 1 == t.room.chairmanControlStatus.isOpen && t.localUser.properties.role != t.room.roles.chairman && (1 == t.room.chairmanControlStatus.manualSynchronize || 1 == t.room.chairmanControlStatus.globalSynchronize))
                    return void t.room.newChatAppend(n.instant("room.syncModeOnManualTooltip"), "openLocalVideoClick");
                if (1 != t.room.chairmanControlStatus.isOpen || 1 != t.room.chairmanControlStatus.manualSynchronize && 1 != t.room.chairmanControlStatus.globalSynchronize || (a = !0),
                    24 == $(".user-video").length && i)
                    return;
                let d = o.getStreamByName(e)
                    , p = "";
                if (1 == t.localUser.properties.cameras.length ? p = t.localUser.username : t.localUser.properties.cameras.length > 1 && (p = t.localUser.properties.videoForUsername[e],
                    e == t.localUser.videoInputDefault && (p = p.substring(0, p.length - 2))),
                    null != d) {
                    if (i)
                        if (t.room.isMultiScreen) {
                            if (0 === t.room.opener.window.$(`.user-video[data-videoDeviceId="${e.replace("+", "\\+").replace("-", "\\-")}"][data-userId="${t.localUser.userid}"]`).length)
                                t.room.opener.window.appendVideo(t.localUser.userid, p, e),
                                    void 0 === t.localUser.constraints[e] && (t.localUser.constraints[e] = {}),
                                    t.localUser.constraints[e] = {
                                        video: !0
                                    },
                                    t.room.opener.window.calcVideoWidth();
                            else {
                                t.room.opener.window.removeVideo(t.localUser.userid, e),
                                    t.localUser.constraints[e] = {
                                        video: !1
                                    },
                                    null == o.getPublicationByName(d.name) && o.removeStream(d.id),
                                    t.room.opener.window.calcVideoWidth()
                            }
                        } else {
                            let n = $(`.user-video[data-videoDeviceId="${e.replace("+", "\\+").replace("-", "\\-")}"][data-userId="${t.localUser.userid}"]`);
                            if (0 === n.length) {
                                t.localUser.videoCreateProgress.set(e, !0),
                                    t.room.userVideoCounting++;
                                let n = $(`\n                                <div class="user-video local" data-stream-id="${d.id}" id="${d.name}" data-show="true" data-videoDeviceId="${e}" data-userId="${t.localUser.userid}" data-index="${t.room.userVideoCounting}">\n                                    <div class="user-video-div">\n                                        <video muted  autoplay playsinline></video>\n                                        <span>${p}</span>\n                                    </div>\n                                    <img class="videoCloseBtn"/>\n                                </div>`);
                                c && (n.attr("data-isOnDesk", !0),
                                    n.attr("data-index", "-1")),
                                    u && n.attr("data-isManual", !0),
                                    $(".main-panel").append(n),
                                    $(`#${d.name} video`).get(0).srcObject = d.mediaStream,
                                    $(`#${d.name} video`).get(0).onloadedmetadata = function () {
                                        console.error("videoWith:" + this.videoWidth),
                                            console.error("videoWith:" + this.videoHeight),
                                            this.videoWidth / this.videoHeight == 16 / 9 ? $(this).addClass("cover") : $(this).removeClass("cover")
                                    }
                                    ,
                                    t.room.changeVideoPartDisplay(),
                                    t.localUser.constraints[e] = {
                                        video: !0
                                    }
                            } else {
                                t.localUser.videoCreateProgress.set(e, !1),
                                    n.remove(),
                                    t.room.userVideoCounting--,
                                    t.room.changeVideoPartDisplay(),
                                    t.localUser.constraints[e] = {
                                        video: !1
                                    },
                                    null == o.getPublicationByName(d.name) && (o.removeStream(d.id),
                                        d.mediaStream && d.mediaStream.getVideoTracks()[0].stop())
                            }
                        }
                    else if (a) {
                        if (null != o.getPublicationByName(d.name))
                            return;
                        if (!d.isPublished) {
                            d.attributes.toId = s;
                            let n = getArrIndexBy2Params(b, d.mediaConstraints.video.width.ideal, "width", d.mediaConstraints.video.height.ideal, "height")
                                , i = {
                                    video: {
                                        width: d.mediaConstraints.video.width.ideal,
                                        height: d.mediaConstraints.video.height.ideal,
                                        frameRate: d.mediaConstraints.video.frameRate.ideal,
                                        encodingParameters: [{
                                            codec: {
                                                name: "h264"
                                            },
                                            minBitrate: b[n].bitrate,
                                            maxBitrate: b[n].bitrate
                                        }]
                                    }
                                };
                            d.isPublished = !0,
                                conference.publish(d, i).then(t => {
                                    console.log("推流啦"),
                                        t.name = e,
                                        o.updateStream(d.id, "isPublished", !0),
                                        o.addPublication(t);
                                    let n = {
                                        videoDeviceId: e
                                    };
                                    r.send("publishSuccess", s, "", n, "send")
                                }
                                ).catch(() => {
                                    t.localUser.videoNeedPublishMap.set(e, !1),
                                        o.updateStream(d.id, "isPublished", !1)
                                }
                                )
                        }
                    }
                } else {
                    const l = !1;
                    let d = getArrIndex(t.room.videoQualities, e, "videoDeviceId")
                        , h = {
                            width: b[1].width,
                            height: b[1].height,
                            frame: 15,
                            bitrate: b[1].bitrate
                        };
                    if (-1 != d) {
                        let e = t.room.videoQualities[d]
                            , n = b[e.quality];
                        h = {
                            width: n.width,
                            height: n.height,
                            frame: parseInt(e.frame),
                            bitrate: n.bitrate
                        }
                    }
                    const f = new Wy.Base.VideoTrackConstraints(Wy.Base.VideoSourceInfo.CAMERA, e.substr(0, e.length - t.localUser.userid.length), {
                        width: h.width,
                        height: h.height
                    }, h.frame);
                    if (i)
                        if (t.room.isMultiScreen)
                            0 === t.room.opener.window.$(".video-list").find(`[data-videoDeviceId="${e.replace("+", "\\+").replace("-", "\\-")}"][data-userId="${t.localUser.userid}"]`).length ? (t.room.opener.window.appendVideo(t.localUser.userid, p, e),
                                void 0 === t.localUser.constraints[e] && (t.localUser.constraints[e] = {}),
                                t.localUser.constraints[e] = {
                                    video: !0
                                },
                                t.room.opener.window.calcVideoWidth()) : (t.room.opener.window.removeVideo(t.localUser.userid, e),
                                    t.localUser.constraints[e] = {
                                        video: !1
                                    },
                                    t.room.opener.window.calcVideoWidth());
                        else {
                            if (t.room.userVideoCounting++,
                                0 !== $(".main-panel").find(`[data-videoDeviceId="${e.replace("+", "\\+").replace("-", "\\-")}"][data-userId="${t.localUser.userid}"]`).length)
                                return t.localUser.videoCreateProgress.set(e, !1),
                                    $(".main-panel").find(`[data-videoDeviceId="${e.replace("+", "\\+").replace("-", "\\-")}"][data-userId="${t.localUser.userid}"]`).remove(),
                                    t.room.userVideoCounting--,
                                    t.localUser.constraints[e] = {
                                        video: !1
                                    },
                                    void t.room.changeVideoPartDisplay();
                            {
                                t.localUser.videoCreateProgress.set(e, !0);
                                let n = $(`\n                                <div class="user-video local"  data-show="true" data-videoDeviceId="${e}" data-userId="${t.localUser.userid}" data-index="${t.room.userVideoCounting}">\n                                    <div class="user-video-div">\n                                        <video muted  autoplay playsinline></video>\n                                        <span>${p}</span>\n                                    </div>\n                                    <img class="videoCloseBtn" src="img/btn_VideoClose_icon_02.png"/>\n                                </div>`);
                                c && (n.attr("data-isOnDesk", !0),
                                    n.attr("data-index", "-1")),
                                    u && n.attr("data-isManual", !0),
                                    $(".main-panel").append(n),
                                    void 0 === t.localUser.constraints[e] && (t.localUser.constraints[e] = {}),
                                    t.localUser.constraints[e] = {
                                        video: !0
                                    },
                                    t.room.changeVideoPartDisplay()
                            }
                        }
                    if (t.localUser.videoNeedPublishMap.get(e))
                        return;
                    a && !t.localUser.videoNeedPublishMap.get(e) && t.localUser.videoNeedPublishMap.set(e, !0),
                        Wy.Base.MediaStreamFactory.createMediaStream(new Wy.Base.StreamConstraints(l, f)).then(({ getMedia: i, _mediaConstraints: l }) => {
                            i.then(n => {
                                if (!t.localUser.videoCreateProgress.get(e) && !a && !t.localUser.videoNeedPublishMap.get(e))
                                    return void n.getVideoTracks()[0].stop();
                                if (null != o.getStreamByName(e))
                                    return;
                                let i = new Wy.Base.LocalStream(n, new Wy.Base.StreamSourceInfo(void 0, "camera"), {
                                    userId: t.localUser.userid,
                                    name: e,
                                    mediaConstraints: l,
                                    type: "video"
                                });
                                if (i.name = e,
                                    i.mediaConstraints = l,
                                    $(`.main-panel .user-video[data-videoDeviceId="${e.replace("+", "\\+").replace("-", "\\-")}"][data-userId="${t.localUser.userid}"] video`).length > 0 && !t.room.isMultiScreen && ($(`.main-panel .user-video[data-videoDeviceId="${e.replace("+", "\\+").replace("-", "\\-")}"][data-userId="${t.localUser.userid}"] video`).get(0).srcObject = i.mediaStream,
                                        $(`.main-panel .user-video[data-videoDeviceId="${e.replace("+", "\\+").replace("-", "\\-")}"][data-userId="${t.localUser.userid}"] video`).get(0).onloadedmetadata = function () {
                                            console.error("videoWith:" + this.videoWidth),
                                                console.error("videoWith:" + this.videoHeight),
                                                this.videoWidth / this.videoHeight == 16 / 9 ? $(this).addClass("cover") : $(this).removeClass("cover")
                                        }
                                    ),
                                    o.addStream(i),
                                    a || t.localUser.videoNeedPublishMap.get(e)) {
                                    o.updateStream(i.id, "isPublished", !0),
                                        i.attributes.toId = s;
                                    let n = {
                                        video: {
                                            width: h.width,
                                            height: h.height,
                                            frameRate: h.frame,
                                            encodingParameters: [{
                                                codec: {
                                                    name: "h264"
                                                },
                                                minBitrate: h.bitrate,
                                                maxBitrate: h.bitrate
                                            }]
                                        }
                                    };
                                    conference.publish(i, n).then(t => {
                                        console.log("推流啦"),
                                            t.name = e;
                                        let n = {
                                            videoDeviceId: e
                                        };
                                        r.send("publishSuccess", s, "", n, "send"),
                                            o.addPublication(t)
                                    }
                                    ).catch(n => {
                                        t.localUser.videoNeedPublishMap.set(e, !1),
                                            o.updateStream(i.id, "isPublished", !1)
                                    }
                                    )
                                }
                            }
                            ).catch(i => {
                                t.localUser.videoCreateProgress.set(e, !1),
                                    alert(n.instant("errorMsg.1002"))
                            }
                            )
                        }
                            , e => {
                                console.error("Failed to create MediaStream, " + e)
                            }
                        )
                }
            },
            openOrStopLocalAudio: function (e, i = !0) {
                if ($(".user-list-right-btn-area").hide(),
                    $(".video-context-menu").hide(),
                    $(".msg-context-menu").hide(),
                    1 == t.room.chairmanControlStatus.isOpen && t.localUser.properties.role != N.chairman && i && 0 == t.room.chairmanControlStatus.autoAudio)
                    return void t.room.newChatAppend(n.instant("room.chairmanCloseAutoAudio"), "openLocalAudioClick");
                let r = o.getLocalAudioStream();
                if (null != r)
                    null != o.getLocalAudioPublication() && (r.mediaStream && r.mediaStream.getTracks()[0].stop(),
                        o.getLocalAudioPublication().stop(),
                        o.setLocalAudioStream(null),
                        o.setLocalAudioPublication(null),
                        $("audio.local").remove(),
                        $(".local .user-mic").attr("src", U.mic.off),
                        $(".fayan-part .fayan-icon").removeClass("active"));
                else {
                    void 0 != e && (e = e.substr(0, e.length - t.localUser.userid.length));
                    const i = new Wy.Base.AudioTrackConstraints(Wy.Base.AudioSourceInfo.MIC, e)
                        , r = !1;
                    Wy.Base.MediaStreamFactory.createMediaStream(new Wy.Base.StreamConstraints(i, r)).then(({ getMedia: e, _mediaConstraints: i }) => {
                        e.then(e => {
                            c.connectStream(e),
                                c.connectLiveStream(e),
                                $("audio.local").remove();
                            let r = $('\n                                <audio  autoplay muted class="local"></audio>\n                            ');
                            r.get(0).srcObject = e,
                                $("#audioArea").append(r);
                            const a = window.AudioContext || window.webkitAudioContext
                                , s = !(!navigator.getUserMedia || !a) && new a
                                , l = s.createMediaStreamSource(e)
                                , u = s.createAnalyser()
                                , d = new Uint8Array(1024);
                            u.fftSize = 1024,
                                l.connect(u);
                            let p = $(".user-list-btnarea.local").find(".user-mic-level")
                                , h = []
                                , f = []
                                , m = 0;
                            let g = setInterval(function () {
                                if (null != o.getLocalAudioStream()) {
                                    m += 1,
                                        u.getByteTimeDomainData(d);
                                    for (var e, n, i, r = me = 0; me < 1024;)
                                        r += (e = d[me++] / 128 - 1) * e;
                                    if (n = Math.sqrt(r / 1024),
                                        i = Math.log(n) / Math.log(10) * 20,
                                        (i = 100 + 2.083 * (i = Math.max(-48, Math.min(i, 0)))) >= 15 ? (h.push(0),
                                            p.find(".user-mic-level-c").css("height", i + "%")) : (f.push(0),
                                                p.find(".user-mic-level-c").css("height", 0)),
                                        m % 100 == 0 && (h.length > 10 && (-1 == $.inArray(t.localUser.username, t.room.speakerName) && t.room.speakerName.push(t.localUser.username),
                                            t.$applyAsync()),
                                            f.length >= 90)) {
                                        var a = getArrIndex(t.room.speakerName, t.localUser.username);
                                        if (t.room.speakerName.splice(a, 1),
                                            0 == t.room.speakerName.length)
                                            var s = setTimeout(function () {
                                                t.$applyAsync(),
                                                    clearTimeout(s)
                                            }, 1e3)
                                    }
                                    if (0 == $(".user-video.local").length)
                                        return;
                                    let o = $(`.user-video.local[data-videoDeviceId="${t.localUser.videoInputDefault}"]`);
                                    if (t.room.voiceAnalyse && m % 100 == 0 && ("bisection" == t.room.currentLayout ? o.addClass("new-border") : o.removeClass("new-border")),
                                        t.room.excitation && m % 100 == 0) {
                                        if (t.room.isSharingAndStopFrame)
                                            return;
                                        if (1 == t.room.chairmanControlStatus.isOpen && t.localUser.properties.role != t.room.roles.chairman && (1 == t.room.chairmanControlStatus.manualSynchronize || 1 == t.room.chairmanControlStatus.globalSynchronize))
                                            return;
                                        let e = o.length
                                            , n = o.attr("data-index");
                                        if (h.length > 10)
                                            if (1 == t.room.speakerName.length) {
                                                if (1 == e && 0 != n) {
                                                    let e = $('.main-panel [data-index="0"]').attr("time")
                                                        , i = (new Date).getTime();
                                                    if (e && !(i - e > 2e3))
                                                        return;
                                                    $('.main-panel [data-index="0"]').attr("data-index", n),
                                                        o.attr("data-index", 0),
                                                        o.attr("time", i),
                                                        t.room.changeVideoPartDisplay()
                                                } else if (1 == e && 0 == n) {
                                                    let e = (new Date).getTime();
                                                    o.attr("time", e),
                                                        "bisection" == t.room.currentLayout ? o.addClass("new-border") : o.removeClass("new-border")
                                                }
                                            } else if (1 == e && 0 == n) {
                                                let e = (new Date).getTime();
                                                o.attr("time", e)
                                            }
                                    }
                                    m % 100 == 0 && (m = 0,
                                        h = [],
                                        f = [])
                                } else {
                                    p.find(".user-mic-level-c").css("height", 0);
                                    a = getArrIndex(t.room.speakerName, t.localUser.username);
                                    t.room.speakerName.splice(a, 1),
                                        t.$applyAsync(),
                                        $("audio.local").remove(),
                                        clearInterval(g)
                                }
                            }, 10)
                                , v = new Wy.Base.LocalStream(e, new Wy.Base.StreamSourceInfo("mic", void 0), {
                                    type: "audio",
                                    userId: t.localUser.userid
                                });
                            v.name = "audio",
                                v.mediaConstraints = i,
                                o.setLocalAudioStream(v),
                                null == o.getLocalAudioPublication() && conference.publish(v, v.mediaConstraints).then(e => {
                                    $(".local .user-mic").attr("src", U.mic.on),
                                        $(".fayan-part .fayan-icon").addClass("active"),
                                        $("#speak").html(n.instant("room.nospeak")),
                                        o.setLocalAudioPublication(e)
                                }
                                ).catch(() => {
                                    o.setLocalAudioStream(null)
                                }
                                )
                        }
                        ).catch(e => {
                            alert(n.instant("errorMsg.1003"))
                        }
                        )
                    }
                        , e => {
                            console.error("Failed to create MediaStream, " + e)
                        }
                    )
                }
            },
            openOrStopRemoteVideo: function (e, i, o = !0, s = !1, l = !1, c = !1) {
                if ($(".user-list-right-btn-area").hide(),
                    $(".video-context-menu").hide(),
                    $(".msg-context-menu").hide(),
                    o && 1 == t.room.chairmanControlStatus.isOpen && t.localUser.properties.role != t.room.roles.chairman && (1 == t.room.chairmanControlStatus.manualSynchronize || 1 == t.room.chairmanControlStatus.globalSynchronize))
                    return void t.room.newChatAppend(n.instant("room.syncModeOnManualTooltip"), "openRemoteClick");
                let u = a.getParticipantStream(e.participantId, i)
                    , d = angular.copy(e.constraints[i].video);
                if (d = !d,
                    24 != $(".user-video").length || !d)
                    if (null != u) {
                        let n = {
                            videoDeviceId: i
                        };
                        if (d) {
                            t.room.userVideoCounting++,
                                r.send("publishUserVideo", e.userid, "", n, "send");
                            let o = 1 == e.properties.cameras.length ? e.properties.username : e.properties.cameras[0] == i ? e.properties.username : e.properties.videoForUsername[i]
                                , c = $(`\n                            <div class="user-video" data-stream-id="${u.id}" data-show="true" data-userId="${e.userid}" data-videoDeviceId="${i}" data-index="${t.room.userVideoCounting}">\n                                <div class="user-video-div">\n                                    <video muted  autoplay playsinline></video>\n                                    <span>${o}</span>\n                                </div>\n                                <img class="videoCloseBtn"/>\n                            </div>`);
                            s && (c.attr("data-index", "-1"),
                                c.attr("data-isOnDesk", "true")),
                                l && c.attr("data-isManual", !0),
                                t.room.isMultiScreen ? (t.room.opener.window.appendVideo(e.userid, o, i),
                                    t.room.opener.window.calcVideoWidth()) : $(".main-panel").append(c),
                                a.updateParticipantConstraints(e.userid, "video", d, i),
                                null == a.getParticipantSubsciptionByParticipantIdAndStreamId(e.participantId, u.id) && t.room.subscribe(e, u)
                        } else {
                            t.room.userVideoCounting--;
                            let o = a.getParticipantSubsciptionByParticipantIdAndStreamId(e.participantId, u.id);
                            null != o && (o.stop(),
                                a.removeParticipantSubsciptionByParticipantIdAndStreamId(e.participantId, u.id)),
                                t.room.isMultiScreen ? (t.room.opener.window.removeVideo(e.userid, i),
                                    t.room.opener.window.calcVideoWidth()) : $(`.user-video[data-userId="${e.userid}"][data-videoDeviceId="${i}" ]`).remove(),
                                r.send("unPublishUserVideo", e.userid, "", n, "send")
                        }
                        a.updateParticipantConstraints(e.userid, "video", d, i),
                            t.room.changeVideoPartDisplay()
                    } else {
                        let n = {
                            videoDeviceId: i
                        };
                        if (d) {
                            let o = 1 == e.properties.cameras.length ? e.properties.username : e.properties.cameras[0] == i ? e.properties.username : e.properties.videoForUsername[i];
                            t.room.userVideoCounting++;
                            let a = $(`\n                            <div class="user-video" data-userId="${e.userid}" data-videoDeviceId="${i}" data-show="true" data-index="${t.room.userVideoCounting}">\n                                <div class="user-video-div">\n                                    <video muted  autoplay playsinline></video>\n                                    <span>${o}</span>\n                                </div>\n                                <img class="videoCloseBtn"/>\n                            </div>`);
                            s && (a.attr("data-index", "-1"),
                                a.attr("data-isOnDesk", "true")),
                                l && a.attr("data-isManual", !0),
                                t.room.isMultiScreen ? (t.room.opener.window.appendVideo(e.userid, o, i),
                                    t.room.opener.window.calcVideoWidth()) : $(".main-panel").append(a),
                                r.send("publishUserVideo", e.userid, "", n, "send")
                        } else
                            t.room.userVideoCounting--,
                                $(`.user-video[data-userId="${e.userid}"][data-videoDeviceId="${i}" ]`).remove(),
                                r.send("unPublishUserVideo", e.userid, "", n, "send");
                        a.updateParticipantConstraints(e.userid, "video", d, i),
                            t.room.changeVideoPartDisplay()
                    }
            },
            openOrStopRemoteAudio: function (e) {
                $(".msg-context-menu").hide(),
                    $(".video-context-menu").hide(),
                    $(".user-list-right-btn-area").hide();
                let t = "apply"
                    , n = {
                        permission: t = a.getParticipantByUserid(e.userid).constraints.audio ? "cancel" : "apply"
                    };
                r.send("audioPublishOrUnpublish", e.userid, "", n, "send")
            },
            initAudioProcess: function (e = $("#settingArea .audioinput input").attr("data-value")) {
                if (void 0 === e)
                    return;
                const n = window.AudioContext || window.webkitAudioContext
                    , i = !(!navigator.getUserMedia || !n) && new n;
                clearTimeout(v),
                    v = null;
                const r = new Wy.Base.AudioTrackConstraints(Wy.Base.AudioSourceInfo.MIC, e.substr(0, e.length - t.localUser.userid.length));
                Wy.Base.MediaStreamFactory.createMediaStream(new Wy.Base.StreamConstraints(r, !1)).then(({ getMedia: e, _mediaConstraints: t }) => {
                    e.then(e => {
                        const t = i.createMediaStreamSource(e)
                            , n = i.createAnalyser();
                        t.connect(n),
                            n.fftSize = 2048,
                            function e(t) {
                                v = setTimeout(() => {
                                    const n = new Uint8Array(t.frequencyBinCount);
                                    t.getByteFrequencyData(n);
                                    const i = n.slice(100, 1e3).reduce((e, t) => e + t);
                                    $(".audioProcessOn").css("width", parseInt(i / 1e3) + "%"),
                                        e(t)
                                }
                                    , 5)
                            }(n)
                    }
                    ).catch(e => { }
                    )
                }
                    , e => {
                        console.error("Failed to create MediaStream, " + e)
                    }
                )
            },
            openSetting: function () {
                ve(!0).then(() => {
                    t.room.initAudioProcess()
                }
                )
            },
            settingApply: function () {
                se = $(".audio-this-setbacks").attr("data-volume");
                let e = window.localStorage.getItem("system-language")
                    , i = $(".languageinput input").attr("data-value");
                e != i && (k = i,
                    n.use(i),
                    window.localStorage.setItem("system-language", i)),
                    t.room.videoQualities.forEach(function (e) {
                        let i = e.videoDeviceId
                            , r = o.getStreamByName(i);
                        if (null != r) {
                            let a = getArrIndex(oe, i, "videoDeviceId");
                            if (-1 != a && (ae[a].quality != parseInt(e.quality) || ae[a].frame != e.frame)) {
                                let a = o.getPublicationByName(r.name)
                                    , s = !1;
                                null != a && (a.stop(),
                                    o.removePublicationByName(r.name),
                                    s = !0);
                                const l = new Wy.Base.VideoTrackConstraints(Wy.Base.VideoSourceInfo.CAMERA, i.substr(0, i.length - t.localUser.userid.length), {
                                    width: b[e.quality].width,
                                    height: b[e.quality].height
                                }, parseInt(e.frame));
                                Wy.Base.MediaStreamFactory.createMediaStream(new Wy.Base.StreamConstraints(!1, l)).then(({ getMedia: a, _mediaConstraints: l }) => {
                                    a.then(n => {
                                        o.removeStream(r.id);
                                        let a = new Wy.Base.LocalStream(n, new Wy.Base.StreamSourceInfo(void 0, "camera"), {
                                            userId: t.localUser.userid,
                                            name: i,
                                            mediaConstraints: l,
                                            type: "video"
                                        });
                                        if (a.name = i,
                                            a.mediaConstraints = l,
                                            o.addStream(a),
                                            $(`.user-video[data-userid="${t.localUser.userid}"][data-videoDeviceId="${i.replace("+", "\\+").replace("-", "\\-")}"] video`).length > 0 && $(`.user-video[data-userid="${t.localUser.userid}"][data-videoDeviceId="${i.replace("+", "\\+").replace("-", "\\-")}"] video`).each(function () {
                                                $(this).get(0).srcObject = n,
                                                    t.room.secondLive.isOpen && (t.room.secondLive.opener.window.$(`.box[data-userid="${t.localUser.userid}"][data-videoDeviceId="${r.name.replace("+", "\\+").replace("-", "\\-")}"] video`).get(0).srcObject = n)
                                            }),
                                            s) {
                                            let t = {
                                                video: {
                                                    width: b[e.quality].width,
                                                    height: b[e.quality].height,
                                                    frameRate: e.frame,
                                                    encodingParameters: [{
                                                        codec: {
                                                            name: "h264"
                                                        },
                                                        minBitrate: b[e.quality].bitrate,
                                                        maxBitrate: b[e.quality].bitrate
                                                    }]
                                                }
                                            };
                                            conference.publish(a, t).then(e => {
                                                e.name = i,
                                                    a.isPublished = !0,
                                                    o.addPublication(e)
                                            }
                                            )
                                        }
                                    }
                                    ).catch(e => {
                                        alert(n.instant("errorMsg.1002"))
                                    }
                                    )
                                }
                                    , e => {
                                        console.error("Failed to create MediaStream, " + e)
                                    }
                                )
                            }
                        }
                    }),
                    ae = angular.copy(oe);
                let a = $("#videoTable tbody");
                if (ie = $("#settingArea .audioinput input").attr("data-value"),
                    re = $("#settingArea .audiooutput input").attr("data-value"),
                    ne = a.find("input[type=radio]:checked").attr("data-value"),
                    void 0 === ie && (ie = ""),
                    void 0 === re && (re = ""),
                    void 0 === ne && (ne = ""),
                    0 != re.length) {
                    let e = re.substr(0, re.length - t.localUser.userid.length);
                    $("audio").each(function () {
                        $(this).get(0).volume = se / 100,
                            $(this).get(0).setSinkId(e)
                    })
                }
                t.localUser.videoInputDefault = ne,
                    t.localUser.audioInputDefault = ie,
                    t.localUser.audioOutputDefault = re;
                let s = []
                    , l = [];
                a.find("input[type=checkbox]:checked").each(function () {
                    let e = $(this).attr("data-value");
                    s.push(e);
                    let n = {
                        videoDeviceId: e,
                        cameraName: t.localUser.properties.videoForUsername[e]
                    };
                    l.push(n)
                });
                let c = getArrIndex(s, ne);
                -1 !== c && (s.splice(c, 1),
                    ne.length > 0 && s.unshift(ne)),
                    t.localUser.properties.camerasForName = l;
                let u = getArrIndex(t.localUser.properties.camerasForName, ne, "videoDeviceId");
                if (-1 !== u) {
                    let e = t.localUser.properties.camerasForName.splice(u, 1);
                    t.localUser.properties.camerasForName.unshift(e[0])
                }
                if (t.localUser.properties.cameras.forEach(function (e) {
                    if (-1 == getArrIndex(s, e)) {
                        t.localUser.constraints[e] = {
                            video: !1
                        },
                            t.localUser.videoPublishCounts.forEach(function (n, i, r) {
                                -1 != i.indexOf("-" + e) && t.localUser.videoPublishCounts.delete(i)
                            }),
                            $(`.user-video[data-videoDeviceId="${e.replace("+", "\\+").replace("-", "\\-")}"][data-userId="${t.localUser.userid}"]`).remove();
                        let n = o.getStreamByName(e);
                        if (null == n)
                            return;
                        o.removeStream(n.id);
                        let i = o.getPublicationByName(n.name);
                        if (null == i)
                            return;
                        i.stop(),
                            o.removePublicationByName(n.name),
                            n = null
                    }
                    let n = e == ne ? t.localUser.username : t.localUser.properties.videoForUsername[e];
                    $(`.user-video[data-userId="${t.localUser.userid}"][data-videoDeviceId="${e.replace("+", "\\+").replace("-", "\\-")}"]`).find("span").html(n)
                }),
                    null != o.getLocalAudioStream() && (o.getLocalAudioPublication().stop(),
                        o.setLocalAudioStream(null),
                        o.setLocalAudioPublication(null),
                        t.room.openOrStopLocalAudio(t.localUser.audioInputDefault)),
                    le = s,
                    t.localUser.properties.cameras = s,
                    1 == he) {
                    let e = {
                        videoInputDefault: ne,
                        audioInputDefault: ie,
                        audioOutputDefault: re,
                        videoQualities: oe,
                        volume: se,
                        needVideoInputs: le,
                        excitation: t.room.excitation,
                        voiceAnalyse: t.room.voiceAnalyse
                    };
                    $.ajax({
                        url: webAPI + updateUserSettingAPI,
                        type: "post",
                        dataType: "json",
                        data: {
                            userid: F,
                            settings: e
                        },
                        success: function (e) { },
                        error: function () {
                            alert("error")
                        }
                    })
                }
                let d = {
                    userId: t.localUser.userid,
                    properties: {
                        cameras: s,
                        camerasForName: t.localUser.properties.camerasForName
                    }
                };
                r.send("changeUserProperties", "server", "", d, "send"),
                    t.room.isSettingShow = !1,
                    t.room.changeVideoPartDisplay(),
                    clearTimeout(v),
                    v = null
            },
            settingCancel: function () {
                t.room.isSettingShow = !t.room.isSettingShow,
                    clearTimeout(v),
                    v = null
            },
            toolTipShow: function (e) {
                let n = setTimeout(() => {
                    t.$apply(() => {
                        e()
                    }
                    ),
                        clearTimeout(n)
                }
                    , 2e3)
            },
            digstRefresh: function (e) {
                t.$apply(() => {
                    e()
                }
                )
            }
        },
            t.$watch("room.membersListShow + room.msgListShow", function (e, n) {
                t.room.getStatus()
            }, !0);
        let fe = N.presenter;
        if (t.localRoleImg = U.pc.presenter,
            t.room.createUserid == F && (fe = N.chairman,
                t.localRoleImg = U.pc.chairman),
            1 == J)
            fe = N.stealth;
        else {
            let e = ["presenter", "chairman", "speaker", "stealth", "applySpeaker"];
            K.length > 0 && -1 != $.inArray(K, e) && (fe = N[K]) == N.speaker && (t.localRoleImg = U.pc.speaker)
        }
        t.literally = {
            currentLcId: "whiteboard",
            canDraw: !0,
            currentNum: 1,
            totalNum: 1,
            currentPageType: "whiteboard",
            roomFiles: [],
            lastFile: null,
            lastIndex: 1,
            currentZoom: 0,
            audioTime: 0,
            videoTime: 0,
            maxZoom: 9,
            minZoom: -9,
            scale: .1,
            defaultWidth: 0,
            defaultHeight: 0,
            canRedo: !1,
            canUndo: !1,
            filePage: {
                whiteboard: {
                    currentPage: 1,
                    totalPage: 1
                }
            },
            zoomIn: function () {
                if (t.literally.currentZoom == t.literally.maxZoom)
                    return;
                let e = $(".literally").width()
                    , n = $(".literally").height();
                if (t.literally.currentZoom += 1,
                    0 == t.literally.currentZoom) {
                    let e = t.literally.defaultWidth
                        , n = t.literally.defaultHeight;
                    $(".white-board-panel").css("overflow", "hidden"),
                        $(".white-board-main,.white-board-panel").css("width", e).css("height", n),
                        $(".literally").css("width", e).css("height", n),
                        $(".white-board-main img").get(0).src && $(".white-board-main img").get(0).src.length > 0 && $(".white-board-main img").css("width", e).css("height", n),
                        t.literally.lastFile && 1 == t.literally.lastFile.isDynamicPPT && $(d).css("height", n).css("width", e)
                } else {
                    let i = 1 + t.literally.scale
                        , r = Math.round(e * i)
                        , o = Math.round(n * i);
                    $(".white-board-panel").css("overflow", "auto"),
                        t.literally.currentZoom > 0 && r <= $("#white-board").width() ? ($(".white-board-main,.white-board-panel").css("width", r),
                            $(".white-board-panel").css("overflow-x", "hidden")) : r > $("#white-board").width() && $(".white-board-panel").css("overflow-x", "auto"),
                        $(".literally").css("width", r).css("height", o),
                        $(".white-board-main img").get(0).src && $(".white-board-main img").get(0).src.length > 0 && $(".white-board-main img").css("margin", "unset").css("height", o).css("width", r),
                        t.literally.lastFile && 1 == t.literally.lastFile.isDynamicPPT && $(d).css("height", o).css("width", r)
                }
                t.literally.currentZoom <= 0 ? $(".white-board-main img,.literally").css("margin", "auto") : $(".white-board-main img,.literally").css("margin", "unset"),
                    t.literally.initWb()
            },
            zoomOut: function () {
                if (t.literally.currentZoom == t.literally.minZoom)
                    return;
                let e = $(".literally").width()
                    , n = $(".literally").height();
                if (t.literally.currentZoom -= 1,
                    0 == t.literally.currentZoom) {
                    let e = t.literally.defaultWidth
                        , n = t.literally.defaultHeight;
                    $(".white-board-panel").css("overflow", "hidden"),
                        $(".literally").css("width", e).css("height", n),
                        $(".white-board-main img").get(0).src && $(".white-board-main img").get(0).src.length > 0 && $(".white-board-main img").css("width", e).css("height", n),
                        t.literally.lastFile && 1 == t.literally.lastFile.isDynamicPPT && $(d).css("height", n).css("width", e)
                } else {
                    let i = 1 - t.literally.scale
                        , r = Math.round(e * i)
                        , o = Math.round(n * i);
                    $(".white-board-panel").css("overflow", "auto"),
                        t.literally.currentZoom > 0 && r <= $("#white-board").width() ? ($(".white-board-main,.white-board-panel").css("width", r),
                            $(".white-board-panel").css("overflow-x", "auto")) : r > $("#white-board").width() && $(".white-board-panel").css("overflow-x", "auto"),
                        $(".literally").css("width", r).css("height", o),
                        $(".white-board-main img").get(0).src && $(".white-board-main img").get(0).src.length > 0 && $(".white-board-main img").css("width", r).css("height", o),
                        t.literally.lastFile && 1 == t.literally.lastFile.isDynamicPPT && $(d).css("height", o).css("width", r)
                }
                t.literally.currentZoom <= 0 ? $(".white-board-main img,.literally").css("margin", "auto") : $(".white-board-main img,.literally").css("margin", "unset"),
                    t.literally.initWb()
            },
            calcauteLiterally: function (e) {
                let n = $("#white-board").width()
                    , i = $("#white-board").height()
                    , r = Math.min(n, i);
                t.literally.defaultWidth = t.literally.defaultHeight = r,
                    $(".literally, .white-board-main,.white-board-panel").css("width", r).css("height", r),
                    this.autoZoom(e)
            },
            autoZoom: function (e) {
                if (e && 0 != t.literally.currentZoom) {
                    let e = Math.abs(t.literally.currentZoom)
                        , n = 1 - t.literally.scale;
                    if (t.literally.currentZoom < 0)
                        for (let i = 0; i < e; i++) {
                            let e = $(".literally").width() * n
                                , i = $(".literally").height() * n;
                            $(".white-board-main").width() >= t.literally.defaultWidth ? ($(".white-board-main, .white-board-panel").css("width", e),
                                $(".white-board-panel").css("overflow-x", "auto")) : $(".white-board-panel").css("overflow-x", "auto"),
                                $(".literally").css("width", e).css("height", i),
                                null != t.literally.lastFile && 1 == t.literally.lastFile.isDynamicPPT && $(d).css("height", i).css("width", e),
                                $(".white-board-main img").get(0).src && $(".white-board-main img").get(0).src.length > 0 && $(".white-board-main img").css("margin", "auto").css("height", i).css("width", e)
                        }
                    else {
                        let n = 1 + t.literally.scale;
                        for (let i = 0; i < e; i++) {
                            let e = $(".literally").width() * n
                                , i = $(".literally").height() * n;
                            $(".white-board-main").width() <= $("#white-board").width() ? ($(".white-board-main,.white-board-panel").css("width", e),
                                $(".white-board-panel").css("overflow-x", "auto")) : $(".white-board-main").width() > $("#white-board").width() && $(".white-board-panel").css("overflow-x", "auto"),
                                $(".literally").css("width", e).css("height", i),
                                null != t.literally.lastFile && 1 == t.literally.lastFile.isDynamicPPT && $(d).css("height", i).css("width", e),
                                $(".white-board-main img").get(0).src && $(".white-board-main img").get(0).src.length > 0 && $(".white-board-main img").css("margin", "unset").css("height", i).css("width", e)
                        }
                    }
                    t.literally.currentZoom <= 0 ? $(".white-board-main img").css("margin", "auto") : $(".white-board-main img").css("margin", "unset")
                }
            },
            initWb: function () {
                t.literally.lcStatus = api.getLcStatus(),
                    r.send("getWbSnapshot", "server", "", {
                        lcId: t.literally.currentLcId
                    }, "send")
            },
            draw: function (e) {
                let n = "";
                e && e.snapshot && (n = e.snapshot),
                    api.initLc(document.getElementsByClassName("literally")[0], n, e.lcId, e),
                    api.setLcStatus(t.literally.lcStatus),
                    api.setSendMsgFunction(function (e) {
                        e.dynamicPPTCanDraw = t.room.dynamicPPTCanDraw,
                            t.room.syncUserVideoToSecondLive(),
                            r.send("wbOperation", "others", "", e, "send")
                    }),
                    api.setSnapshotFunction(function (e) {
                        r.send("setWbSnapshot", "server", "", e, "send")
                    }),
                    api.setUndoRedoFunction(function () {
                        r.send("getWbSnapshot", "server", "", {
                            lcId: t.literally.currentLcId
                        }, "send")
                    }),
                    api.setRedoUndoStackChange(function (e) {
                        t.literally.canRedo = e > 0,
                            t.$applyAsync()
                    }, function (e) {
                        t.literally.canUndo = e > 0
                    }),
                    t.literally.canvasToimg()
            },
            canvasToimg: function () {
                if (1 == $(".literally canvas:eq(1)").length) {
                    let e = $(".literally canvas:eq(1)").get(0).toDataURL("image/png");
                    $(".white-board-img").find("img").attr("src", e)
                }
                if ($(".white-board-img").removeAttr("style"),
                    t.literally.lastFile && 1 == t.literally.lastFile.isDynamicPPT)
                    return $(".white-board-img .img-area").css("background", "transparent"),
                        void $(".white-board-img").css("background", "transparent");
                if ("whiteboard" == t.room.currentMainPage && "file" == t.literally.currentPageType) {
                    let e = $(".white-board-main img").attr("src");
                    void 0 != e ? ($(".white-board-img").css("background-image", `url(${e})`),
                        $(".white-board-img .img-area").css("background", "transparent")) : ($(".white-board-img").removeAttr("style"),
                            $(".white-board-img .img-area").removeAttr("style"))
                }
            },
            openLast: function () {
                t.room.currentMainPage = "whiteboard",
                    $("#screen-board").hide();
                let e = setTimeout(function () {
                    t.room.refreshBisectionLayout(),
                        clearTimeout(e)
                }, 200)
            },
            openShareScreen: function () {
                t.room.currentMainPage = "shareScreen",
                    $("#screen-board").show()
            },
            openWhiteBoard: function (e, n = !1, i) {
                if (n && t.room.addBordImage(),
                    t.literally.lcStatus = api.getLcStatus(),
                    t.literally.currentZoom = 0,
                    t.literally.calcauteLiterally(),
                    $(".literally").css("background", "#fff"),
                    $(".white-board-main img").removeAttr("style").removeAttr("src"),
                    $("#whiteBtn").siblings().removeClass("selected"),
                    $("#whiteBtn").addClass("selected"),
                    t.literally.currentPageType = "whiteboard",
                    t.room.currentMainPage = "whiteboard",
                    n && (t.room.whiteboardShow = !0),
                    $("#screen-board").hide(),
                    void 0 !== e && (e = parseInt(e),
                        t.literally.filePage.whiteboard.currentPage = e),
                    void 0 !== i && (t.literally.filePage.whiteboard.totalPage = i),
                    t.literally.lastIndex = t.literally.filePage.whiteboard.currentPage,
                    t.literally.currentLcId = "whiteboard-" + t.literally.filePage.whiteboard.currentPage,
                    t.literally.initWb(),
                    n) {
                    if (t.literally.currentNum = t.literally.filePage.whiteboard.currentPage,
                        t.literally.totalNum = t.literally.filePage.whiteboard.totalPage,
                        t.literally.currentNum > t.literally.filePage.whiteboard.totalPage && (t.literally.totalNum = t.literally.currentNum,
                            t.literally.filePage.whiteboard.totalPage = t.literally.totalNum),
                        t.localUser.properties.role == t.room.roles.chairman || t.localUser.properties.role == t.room.roles.speaker) {
                        let e = {
                            index: t.literally.filePage.whiteboard.currentPage,
                            total: t.literally.filePage.whiteboard.totalPage
                        };
                        r.send("openWhiteBoard", "others", "", e, "send");
                        let n = {
                            fileType: t.literally.currentPageType,
                            total: t.literally.totalNum,
                            index: t.literally.currentNum,
                            fileid: ""
                        };
                        r.send("changeMeetingStatus", "server", "", n, "send")
                    }
                } else
                    t.$apply(() => {
                        t.literally.currentNum = t.literally.filePage.whiteboard.currentPage,
                            t.literally.totalNum = t.literally.filePage.whiteboard.totalPage,
                            t.literally.currentNum > t.literally.filePage.whiteboard.totalPage && (t.literally.totalNum = t.literally.currentNum,
                                t.literally.filePage.whiteboard.totalPage = t.literally.totalNum)
                    }
                    )
            },
            refreshFile: function () {
                t.literally.calcauteLiterally();
                let e, n = 0, i = 0;
                0 == t.literally.lastFile.isDynamicPPT ? (n = (e = $(".white-board-main").find("img")[0]).naturalWidth,
                    i = e.naturalHeight) : (n = p,
                        i = h);
                let r = n / i
                    , o = $("#white-board").width()
                    , a = $("#white-board").height()
                    , s = 0
                    , l = 0
                    , c = $(".literally");
                r < 1 ? s = r * (l = a) : l = (s = o) / r,
                    l >= a && (s = r * (l = a)),
                    s = Math.floor(s),
                    l = Math.floor(l),
                    t.literally.defaultWidth = s,
                    t.literally.defaultHeight = l,
                    c.css("height", l).css("width", s).css("background", "transparent"),
                    $(".white-board-main,.white-board-panel").css("height", l).css("width", s),
                    0 == t.literally.lastFile.isDynamicPPT ? $(".white-board-main img").css("height", l).css("width", s).attr("src", `${e.src}`) : $(d).css("height", l).css("width", s),
                    this.autoZoom(!0),
                    t.literally.initWb()
            },
            openNormalFile: function (e, n, i = !1, o, a = !0) {
                i && t.room.addBordImage(),
                    $("#screen-board").hide(),
                    void 0 === n && (n = 1,
                        t.literally.filePage[e.fileid] = n),
                    i ? t.room.loading = !0 : t.room.digstRefresh(() => {
                        t.room.loading = !0
                    }
                    ),
                    r.getImageCacheByUrl(e.prefix, n, e.pagenum, "." + e.suffix).then(o => {
                        t.room.digstRefresh(() => {
                            t.room.currentMainPage = "whiteboard",
                                t.room.loading = !1,
                                t.literally.currentPageType = "file",
                                t.literally.lastFile = e,
                                t.literally.lastIndex = n,
                                t.literally.filePage[e.fileid] = n
                        }
                        ),
                            t.literally.lcStatus = api.getLcStatus();
                        let a = this
                            , s = !0;
                        ("whiteboard" == t.literally.currentPageType || t.literally.lastFile && t.literally.lastFile.fileid != e.fileid) && (t.literally.currentZoom = 0,
                            s = !1),
                            $(`.area-list .title[data-fileid=${e.fileid}]`).siblings().removeClass("selected"),
                            $(`.area-list .title[data-fileid=${e.fileid}]`).addClass("selected");
                        let l = new Image;
                        l.src = window.URL.createObjectURL(o.data[n].blob),
                            l.onload = function () {
                                let o = l.width / l.height
                                    , c = $("#white-board").width()
                                    , u = $("#white-board").height()
                                    , d = 0
                                    , p = 0
                                    , h = $(".literally");
                                if (o < 1 ? d = o * (p = u) : p = (d = c) / o,
                                    p >= u && (d = o * (p = u)),
                                    d = Math.floor(d),
                                    p = Math.floor(p),
                                    t.literally.defaultWidth = d,
                                    t.literally.defaultHeight = p,
                                    h.css("height", p).css("width", d).css("background", "transparent"),
                                    $(".white-board-main,.white-board-panel").css("height", p).css("width", d),
                                    $(".white-board-main img").css("height", p).css("width", d).attr("src", `${l.src}`),
                                    a.autoZoom(s),
                                    t.literally.currentLcId = e.fileid + "-" + n,
                                    t.literally.initWb(),
                                    t.$apply(() => {
                                        t.literally.currentNum = n,
                                            t.literally.totalNum = e.pagenum
                                    }
                                    ),
                                    i && (t.localUser.properties.role == t.room.roles.chairman || t.localUser.properties.role == t.room.roles.speaker)) {
                                    let i = {
                                        fileid: e.fileid,
                                        index: n,
                                        step: 0,
                                        controlType: "page"
                                    };
                                    r.send("openFile", "others", "", i, "send");
                                    let o = {
                                        fileType: t.literally.currentPageType,
                                        total: t.literally.totalNum,
                                        index: t.literally.currentNum,
                                        fileid: e.fileid,
                                        step: 0,
                                        controlType: "page"
                                    };
                                    r.send("changeMeetingStatus", "server", "", o, "send")
                                }
                            }
                    }
                    ),
                    o && o.stopPropagation(),
                    a && !t.room.whiteboardShow && t.room.showWhiteboard()
            },
            openDynamicPPT: function (e, n, i = 0, o = !1, a, s = !0, l, c, u = "page", f, m) {
                $("#screen-board").hide(),
                    $("#white-board").find("img").removeAttr("src"),
                    $("#white-board").find("img").removeAttr("style"),
                    void 0 === n && (n = 1,
                        t.literally.filePage[e.fileid] = n),
                    s && !t.room.whiteboardShow && t.room.showWhiteboard(),
                    t.room.currentMainPage = "whiteboard",
                    t.room.loading = !1,
                    t.literally.currentPageType = "file",
                    t.literally.currentLcId = e.fileid + "-" + n,
                    t.literally.lcStatus = api.getLcStatus();
                let g = this
                    , v = !0;
                if (("whiteboard" == t.literally.currentPageType || t.literally.lastFile && t.literally.lastFile.fileid != e.fileid) && (t.literally.currentZoom = 0,
                    v = !1),
                    $(`.area-list .title[data-fileid=${e.fileid}]`).siblings().removeClass("selected"),
                    $(`.area-list .title[data-fileid=${e.fileid}]`).addClass("selected"),
                    null != t.literally.lastFile && (t.literally.lastFile.animateStep = i,
                        t.literally.lastFile.isLocal = o,
                        t.literally.filePage[e.fileid] = n),
                    null == t.literally.lastFile || t.literally.lastFile.fileid != e.fileid) {
                    t.literally.initWb(),
                        t.literally.lastFile = e,
                        t.literally.lastFile.isFirst = !0,
                        t.literally.lastFile.animateStep = i,
                        t.literally.lastFile.isLocal = o,
                        t.literally.filePage[e.fileid] = n,
                        t.literally.lastFile.sendMsg = {},
                        delete window.Webcast,
                        window.Webcast = function () { }
                        ,
                        window.Webcast.RecieveSendScale = function (e) {
                            if (!t.literally.lastFile.isFirst && e > 1) {
                                let t = (h * e - $(".white-board-main").height()) / 2;
                                $(d).css("transform", `translateX(0px) translateY(${t}px)`)
                            }
                        }
                        ,
                        window.Webcast.RecieveInitialOK = function () {
                            t.literally.lastFile.isFirst && (1 != t.literally.filePage[e.fileid] && (d.contentWindow.Presentation.JumpToAnim(t.literally.lastFile.animateStep, t.literally.filePage[e.fileid], !0),
                                t.literally.lastFile.sendMsg.slide = t.literally.lastFile.animateStep,
                                t.literally.lastFile.sendMsg.step = t.literally.filePage[e.fileid]),
                                t.literally.lastFile.isFirst = !1,
                                t.room.syncUserVideoToSecondLive())
                        }
                        ,
                        window.Webcast.RecieveProgress = function (n, i, o) {
                            if ((t.literally.lastFile.sendMsg.slide != i || t.literally.lastFile.sendMsg.step != n) && (!t.literally.lastFile.isFirst && ("local" == function e(t) {
                                return null != t.caller ? "openDynamicPPT" == t.caller.name ? "err" : e(t.caller) : void 0 !== t.arguments[0] ? "local" : void 0 !== t.arguments[0] || "pageLeft" != t.arguments.callee.name && "pageRight" != t.arguments.callee.name ? "err" : "local"
                            }(arguments.callee) && (t.literally.lastFile.isLocal = !0),
                                t.literally.currentLcId = e.fileid + "-" + i,
                                t.literally.lastFile.sendMsg.slide != i && t.literally.initWb(),
                                t.room.secondLive.isOpen && t.room.secondLive.opener.window.iframeJump(i, n),
                                t.literally.lastFile.isFirst || (t.literally.lastFile.sendMsg.slide = i,
                                    t.literally.lastFile.sendMsg.step = n,
                                    t.literally.lastFile.animateStep = n,
                                    t.literally.filePage[e.fileid] = i,
                                    t.room.currentMainPage = "whiteboard",
                                    t.literally.lastIndex = i,
                                    t.literally.currentNum = i,
                                    t.$applyAsync()),
                                t.literally.lastFile.isLocal && (t.localUser.properties.role == t.room.roles.chairman || t.localUser.properties.role == t.room.roles.speaker)))) {
                                let o = {
                                    fileid: t.literally.lastFile.fileid,
                                    index: i,
                                    step: n,
                                    controlType: "page"
                                };
                                r.send("openFile", "others", "", o, "send");
                                let a = {
                                    fileType: t.literally.currentPageType,
                                    total: t.literally.totalNum,
                                    index: i,
                                    fileid: e.fileid,
                                    step: n,
                                    controlType: "page"
                                };
                                r.send("changeMeetingStatus", "server", "", a, "send")
                            }
                        }
                        ,
                        window.Webcast.RecieveTotalCount = function (e) {
                            t.literally.calcauteLiterally(),
                                p = e.Width,
                                h = e.Height;
                            let n = e.Width / e.Height
                                , i = $("#white-board").width()
                                , r = $("#white-board").height()
                                , o = 0
                                , a = 0
                                , s = $(".literally");
                            n < 1 ? o = n * (a = r) : a = (o = i) / n,
                                a >= r && (o = n * (a = r)),
                                o = Math.floor(o),
                                a = Math.floor(a),
                                t.literally.defaultWidth = o,
                                t.literally.defaultHeight = a,
                                s.css("height", a).css("width", o).css("background", "transparent"),
                                $(d).css("height", a).css("width", o),
                                $(".white-board-main,.white-board-panel").css("height", a).css("width", o),
                                g.autoZoom(v)
                        }
                        ,
                        window.Webcast.RecieveMediaStatus = function (n, i) {
                            let o = "video"
                                , a = 0;
                            if (0 != $(d.contentWindow.document).find(`#${n} video`).length && (a = 1),
                                0 != $(d.contentWindow.document).find(`#${n} audio`).length && (a = 1,
                                    o = "audio"),
                                !("audio" == o && 1 == t.literally.audioTime || "video" == o && 1 == t.literally.videoTime || 0 == a)) {
                                let a = $(d.contentWindow.document).find(`#${n} ${o}`)[0].currentTime;
                                if (t.room.secondLive.isOpen && t.room.secondLive.opener.window.iframeMediaJump(i, a, n, o),
                                    t.localUser.properties.role == t.room.roles.chairman || t.localUser.properties.role == t.room.roles.speaker) {
                                    let s = {
                                        fileid: t.literally.lastFile.fileid,
                                        currentTime: a,
                                        playStatus: i,
                                        domId: n,
                                        mediaType: o,
                                        step: t.literally.lastFile.animateStep,
                                        index: t.literally.filePage[e.fileid],
                                        controlType: "media"
                                    };
                                    r.send("openFile", "others", "", s, "send")
                                }
                            }
                        }
                        ,
                        d.src = e.filepath
                } else if ("media" == u) {
                    if ($(d.contentWindow.document).find(`#${f} ${m}`)[0].currentTime = l,
                        "audio" == m)
                        var y = setTimeout(function () {
                            $(d.contentWindow.document).find(`#${f} ${m}`)[0][c](),
                                t.literally.audioTime = 1;
                            var e = setTimeout(function () {
                                t.literally.audioTime = 0,
                                    clearTimeout(e)
                            }, 1e3);
                            clearTimeout(y)
                        }, 10);
                    else {
                        $(d.contentWindow.document).find(`#${f} ${m}`)[0][c](),
                            t.literally.videoTime = 1;
                        var b = setTimeout(function () {
                            t.literally.videoTime = 0,
                                clearTimeout(b)
                        }, 1e3)
                    }
                } else
                    t.literally.refreshFile(),
                        t.literally.lastFile.sendMsg.slide == n && t.literally.lastFile.sendMsg.step == i || (d.contentWindow.Presentation.JumpToAnim && d.contentWindow.Presentation.JumpToAnim(i, n, !0),
                            t.literally.lastFile.sendMsg.slide = n,
                            t.literally.lastFile.sendMsg.step = i);
                if (o ? (t.room.currentMainPage = "whiteboard",
                    t.room.loading = !1,
                    t.literally.currentPageType = "file",
                    t.literally.lastFile = e,
                    t.literally.lastIndex = t.literally.filePage[e.fileid],
                    t.literally.filePage[e.fileid] = n,
                    t.literally.currentNum = n,
                    t.literally.totalNum = e.pagenum) : t.room.digstRefresh(() => {
                        t.room.currentMainPage = "whiteboard",
                            t.room.loading = !1,
                            t.literally.currentPageType = "file",
                            t.literally.lastFile = e,
                            t.literally.lastIndex = t.literally.filePage[e.fileid],
                            t.literally.currentNum = t.literally.filePage[e.fileid],
                            t.literally.totalNum = e.pagenum
                    }
                    ),
                    o && (t.room.secondLive.isOpen && t.room.secondLive.opener.window.iframeJump(n, 0),
                        t.localUser.properties.role == t.room.roles.chairman || t.localUser.properties.role == t.room.roles.speaker)) {
                    let i = {
                        fileid: t.literally.lastFile.fileid,
                        index: n,
                        step: 0,
                        controlType: "page"
                    };
                    r.send("openFile", "others", "", i, "send");
                    let o = {
                        fileType: t.literally.currentPageType,
                        total: t.literally.totalNum,
                        index: n,
                        fileid: e.fileid,
                        step: 0,
                        controlType: "page"
                    };
                    r.send("changeMeetingStatus", "server", "", o, "send")
                }
            },
            openFile: function (e, t, n = !1, i, r = !0, o = 0, a, s, l, c, u) {
                0 == e.isDynamicPPT ? (delete window.Webcast,
                    d.src = "",
                    $(d).removeAttr("style"),
                    this.openNormalFile(e, t, n, i, r)) : this.openDynamicPPT(e, t, o, n, i, r, a, s, l, c, u)
            },
            popUpsShow: function (e, i, r) {
                if ("file" == e) {
                    if (t.localUser.properties.role != t.room.roles.chairman && t.localUser.properties.role != t.room.roles.speaker)
                        return void t.room.newChatAppend(n.instant("room.cannotDelDocument"), "deleteFileClick");
                    t.room.leaveTheMeeting = !1,
                        t.room.shareCommitShow = !1,
                        t.room.deleteDocument = !0,
                        t.room.fileId = i,
                        t.room.$event = r,
                        t.room.popUpsTitle = n.instant("room.popTileDel"),
                        t.room.popUpsContent = n.instant("room.popContentDel")
                } else
                    "leave" == e ? (t.room.deleteDocument = !1,
                        t.room.shareCommitShow = !1,
                        t.room.leaveTheMeeting = !0,
                        t.room.fileId = "",
                        t.room.$event = "",
                        t.room.popUpsTitle = n.instant("room.popTileExit"),
                        t.room.popUpsContent = n.instant("room.popContentExit")) : "share" == e ? (t.room.leaveTheMeeting = !1,
                            t.room.deleteDocument = !1,
                            t.room.shareCommitShow = !0,
                            t.room.fileId = "",
                            t.room.$event = "",
                            t.room.popUpsTitle = n.instant("room.popTileShare"),
                            t.room.popUpsContent = n.instant("room.popContentShare")) : "selectPushWindow" == e && t.$apply(function () {
                                t.room.selectPushWindowShow = !0,
                                    t.room.fileId = "",
                                    t.room.$event = "",
                                    t.room.popUpsTitle = n.instant("room.selectWindowTitle"),
                                    t.room.popUpsContent = n.instant("room.selectWindowContent")
                            });
                $(".popup-window").css({
                    "z-index": "10000"
                }),
                    $(".popup-window .pop_ups").css({
                        "z-index": "10001"
                    })
            },
            popUpsShowCancel: function () {
                1 == t.room.deleteDocument ? t.room.deleteDocument = !1 : 1 == t.room.leaveTheMeeting ? t.room.leaveTheMeeting = !1 : 1 == t.room.shareCommitShow ? t.room.shareCommitShow = !1 : 1 == t.room.selectPushWindowShow && (t.room.liveSetting.pushWindow = 1,
                    t.room.secondLive.isOpen || (t.room.secondLive.isOpen = !0,
                        t.room.secondLive.opener = window.open(webAPI + "/h5/live/index.html?screenIndex=1&startLive=1&settingIndex=" + t.room.liveSetting.settingIndex)),
                    t.room.getCommand().then(function (e) {
                        pc.startPublish(e),
                            $(".main-panel").children(".user-video").each(function () {
                                let e = $(this);
                                t.room.refreshSubscribe(e)
                            }),
                            t.$apply(function () {
                                t.room.isLiving = !0
                            });
                        setTimeout(function () {
                            t.room.secondLive.opener.window.changeIsLive(!0)
                        }, 500)
                    }),
                    t.room.selectPushWindowShow = !1),
                    $(".popup-window").css({
                        "z-index": "9998"
                    }),
                    $(".popup-window .pop_ups").css({
                        "z-index": "9998"
                    })
            },
            popUpsShowConfirm: function () {
                1 == t.room.deleteDocument ? (t.room.deleteDocument = !1,
                    t.literally.deleteMeetingFile(t.room.fileId, t.room.$event),
                    t.room.fileId = "",
                    t.room.$event = "") : 1 == t.room.leaveTheMeeting ? (t.room.leaveTheMeeting = !1,
                        t.room.exit()) : 1 == t.room.shareCommitShow ? (t.room.shareCommitShow = !1,
                            t.room.shareDesktop()) : 1 == t.room.selectPushWindowShow && (t.room.liveSetting.pushWindow = 0,
                                t.room.selectPushWindowShow = !1,
                                t.room.getCommand().then(function (e) {
                                    pc.startPublish(e),
                                        t.$apply(function () {
                                            t.room.isLiving = !0
                                        })
                                }))
            },
            deleteMeetingFile: function (e, i) {
                new Promise((i, r) => {
                    $.ajax({
                        url: t.room.docServer + delMeetingFileAPI,
                        type: "get",
                        dataType: "json",
                        data: {
                            serial: t.room.serial,
                            fileid: e
                        },
                        success: function (e) {
                            i(e)
                        },
                        error: function () {
                            alert(n.instant("errorMsg.1004"))
                        }
                    })
                }
                ).then(n => {
                    if (0 == n.result) {
                        t.literally.getMeetingFile(e, !1, "delete"),
                            t.literally.lastFile && e == t.literally.lastFile.fileid && (t.literally.openWhiteBoard(),
                                t.literally.lastFile = null,
                                d.src = "");
                        let n = {
                            fileid: e,
                            type: "delete"
                        };
                        r.send("refreshFile", "others", "", n, "send")
                    }
                }
                ),
                    i && i.stopPropagation()
            },
            getMeetingFile: function (e, i = !1, r, o = 1, a = !0, s = 0) {
                new Promise((e, i) => {
                    $.ajax({
                        url: t.room.docServer + getMeetingFileAPI,
                        type: "get",
                        dataType: "json",
                        data: {
                            serial: t.room.serial
                        },
                        success: function (t) {
                            e(t)
                        },
                        error: function () {
                            alert(n.instant("errorMsg.1005"))
                        }
                    })
                }
                ).then(n => {
                    let l = [];
                    if (0 == n.result && (n.meetingfile = n.meetingfile,
                        n.meetingfile.forEach(function (e) {
                            let t = Object.assign({});
                            t.fileid = e.fileid,
                                t.uploaduserid = e.uploaduserid,
                                t.filetype = e.filetype,
                                t.isDynamicPPT = e.isdynamicppt;
                            let n = t.filetype
                                , i = "";
                            "jpg" == n || "jpeg" == n || "png" == n || "gif" == n || "bmp" == n ? i = "07" : "doc" == n || "docx" == n ? i = "02" : "pdf" == n ? i = "05" : "ppt" == n || "pptx" == n ? i = "04" : "txt" == n ? i = "06" : "xls" != n && "xlsx" != n || (i = "03"),
                                t.imgpre = i,
                                t.filename = e.filename;
                            let r = e.swfpath.split(".");
                            t.prefix = r[0],
                                t.suffix = r[1],
                                t.filepath = e.swfpath,
                                t.pagenum = e.pagenum,
                                t.uploadtime = e.uploadtime.substr(0, e.uploadtime.length - 3),
                                l.push(t)
                        })),
                        t.$apply(() => {
                            t.literally.roomFiles = l
                        }
                        ),
                        "add" == r) {
                        $(".area-list").scrollTop(0);
                        let n = getArrIndex(t.literally.roomFiles, e.toString(), "fileid");
                        if (n > -1) {
                            let e = t.literally.roomFiles[n];
                            t.literally.openFile(e, o, i, void 0, a, s)
                        }
                    } else if (t.literally.lastFile && t.literally.lastFile.fileid) {
                        let n = getArrIndex(t.literally.roomFiles, t.literally.lastFile.fileid.toString(), "fileid");
                        $(`.area-list .title[data-fileid=${e}]`).siblings().removeClass("selected"),
                            -1 == n ? (t.literally.openWhiteBoard(),
                                d.src = "",
                                t.literally.lastFile = null) : $(`.area-list .title[data-fileid=${t.literally.lastFile.fileid}]`).addClass("selected")
                    }
                }
                )
            },
            uploadDynamicPPTDocument: function () {
                $("#filedata").val("").unbind("click change").attr("accept", ".ppt,.pptx"),
                    $("#filedata").bind("change", function () {
                        var e = $("#filedata")[0].files[0].name
                            , i = e.lastIndexOf(".") + 1
                            , o = e.length
                            , a = e.substring(i, o);
                        t.localUser.properties.role != t.room.roles.presenter ? "ppt" == a.toLowerCase() || "pptx" == a.toLowerCase() ? ($("#filedata")[0].files[0].size / 1024 / 1024).toFixed(0) > 100 ? alert(n.instant("errorMsg.1006")) : (t.room.digstRefresh(function () {
                            t.room.currentDocPanel = "view"
                        }),
                            new Promise((e, i) => {
                                let r = new FormData
                                    , o = $("#filedata")[0].files[0]
                                    , a = o.name
                                    , s = a.substr(a.lastIndexOf(".") + 1).toLowerCase()
                                    , l = "";
                                "jpg" == s || "jpeg" == s || "png" == s || "gif" == s || "bmp" == s ? l = "07" : "doc" == s || "docx" == s ? l = "02" : "pdf" == s ? l = "05" : "ppt" == s || "pptx" == s ? l = "04" : "txt" == s ? l = "06" : "xls" != s && "xlsx" != s || (l = "03");
                                let c = $.createRadomUserid(10)
                                    , u = $(`<div class="title"  data-fileid="${c}">\n\n                    <div class="name">\n                        <img src="${"img/Doc_icon_" + l + ".png"}"/><span>${a} </span>\n                        <div class="file-progress"></div>\n                    </div>\n                    <div class="time">\n                        <span></span>\n                    </div>\n                    <div class="share">\n                      <span></span>\n                    </div>\n                    <div class="delete">\n                        <span></span>\n                    </div>\n                </div>`);
                                $(".file-area .area-list").prepend(u),
                                    r.append("filedata", o),
                                    r.append("serial", t.room.serial),
                                    r.append("userid", t.localUser.userid),
                                    r.append("sender", t.localUser.userid),
                                    r.append("isDynamicPPT", 1),
                                    r.append("conversion", 1),
                                    r.append("isconversiondone", 0),
                                    $.ajax({
                                        url: t.room.docServer + uploadDocumentAPI,
                                        type: "POST",
                                        data: r,
                                        dataType: "json",
                                        contentType: !1,
                                        processData: !1,
                                        xhr: function () {
                                            var e = $.ajaxSettings.xhr();
                                            if (e.upload)
                                                return e.upload.addEventListener("progress", function (e) {
                                                    var t = e.loaded
                                                        , n = e.total
                                                        , i = Math.floor(t / n) * $(`.file-area .area-list .title[data-fileid="${c}"]`).find(".name span").width();
                                                    $(`.file-area .area-list .title[data-fileid="${c}"]`).find(".file-progress").css("width", i)
                                                }, !1),
                                                    e
                                        },
                                        success: function (t) {
                                            $(`.file-area .area-list .title[data-fileid="${c}"]`).remove(),
                                                e(t.fileid)
                                        },
                                        error: function () {
                                            $(`.file-area .area-list .title[data-fileid="${c}"]`).remove(),
                                                alert(n.instant("errorMsg.1007"))
                                        }
                                    })
                            }
                            ).then(e => {
                                let n = {
                                    fileid: e,
                                    type: "add"
                                };
                                r.send("refreshFile", "others", "", n, "send"),
                                    t.$apply(() => {
                                        t.literally.getMeetingFile(e, !0, "add")
                                    }
                                    )
                            }
                            )) : t.room.newChatAppend(n.instant("room.dynamicPPT")) : t.room.newChatAppend(n.instant("room.pleaseApplyPerssion"))
                    }).click()
            },
            uploadDocument: function () {
                $("#filedata").val("").unbind("click change").attr("accept", ".webm , .ogg  ,.xls,.xlsx,.ppt,.pptx,.doc,.docx,.txt,.pdf,.bmp,.jpg,.jpeg,.png,.gif"),
                    $("#filedata").bind("change", function () {
                        t.localUser.properties.role != t.room.roles.presenter ? ($("#filedata")[0].files[0].size / 1024 / 1024).toFixed(0) > 100 ? alert(n.instant("errorMsg.1006")) : (t.room.digstRefresh(function () {
                            t.room.currentDocPanel = "view"
                        }),
                            new Promise((e, i) => {
                                let r = new FormData
                                    , o = $("#filedata")[0].files[0]
                                    , a = o.name
                                    , s = a.substr(a.lastIndexOf(".") + 1).toLowerCase()
                                    , l = "";
                                "jpg" == s || "jpeg" == s || "png" == s || "gif" == s || "bmp" == s ? l = "07" : "doc" == s || "docx" == s ? l = "02" : "pdf" == s ? l = "05" : "ppt" == s || "pptx" == s ? l = "04" : "txt" == s ? l = "06" : "xls" != s && "xlsx" != s || (l = "03");
                                let c = $.createRadomUserid(10)
                                    , u = $(`<div class="title"  data-fileid="${c}">\n\n                    <div class="name">\n                        <img src="${"img/Doc_icon_" + l + ".png"}"/><span>${a} </span>\n                        <div class="file-progress"></div>\n                    </div>\n                    <div class="time">\n                        <span></span>\n                    </div>\n                    <div class="share">\n                      <span></span>\n                    </div>\n                    <div class="delete">\n                        <span></span>\n                    </div>\n                </div>`);
                                $(".file-area .area-list").prepend(u),
                                    r.append("filedata", o),
                                    r.append("serial", t.room.serial),
                                    r.append("userid", t.localUser.userid),
                                    r.append("sender", t.localUser.userid),
                                    r.append("conversion", 1),
                                    r.append("isconversiondone", 0),
                                    $.ajax({
                                        url: t.room.docServer + uploadDocumentAPI,
                                        type: "POST",
                                        data: r,
                                        dataType: "json",
                                        contentType: !1,
                                        processData: !1,
                                        xhr: function () {
                                            var e = $.ajaxSettings.xhr();
                                            if (e.upload)
                                                return e.upload.addEventListener("progress", function (e) {
                                                    var t = e.loaded
                                                        , n = e.total
                                                        , i = Math.floor(t / n) * $(`.file-area .area-list .title[data-fileid="${c}"]`).find(".name span").width();
                                                    $(`.file-area .area-list .title[data-fileid="${c}"]`).find(".file-progress").css("width", i)
                                                }, !1),
                                                    e
                                        },
                                        success: function (t) {
                                            "0" == t.result ? ($(`.file-area .area-list .title[data-fileid="${c}"]`).remove(),
                                                e(t.fileid)) : ($(`.file-area .area-list .title[data-fileid="${c}"]`).remove(),
                                                    alert(n.instant("errorMsg.1007")))
                                        },
                                        error: function () {
                                            $(`.file-area .area-list .title[data-fileid="${c}"]`).remove(),
                                                alert(n.instant("errorMsg.1007"))
                                        }
                                    })
                            }
                            ).then(e => {
                                let n = {
                                    fileid: e,
                                    type: "add"
                                };
                                r.send("refreshFile", "others", "", n, "send"),
                                    t.$apply(() => {
                                        t.literally.getMeetingFile(e, !0, "add")
                                    }
                                    )
                            }
                            )) : t.room.newChatAppend(n.instant("room.pleaseApplyPerssion"))
                    }).click()
            },
            pageLeft: function () {
                if (t.literally.filePage.whiteboard.currentPage = parseInt(t.literally.filePage.whiteboard.currentPage),
                    t.literally.currentNum = parseInt(t.literally.currentNum),
                    "whiteboard" == t.literally.currentPageType) {
                    if (1 == t.literally.filePage.whiteboard.currentPage)
                        return;
                    t.literally.currentNum -= 1,
                        t.literally.openWhiteBoard(t.literally.currentNum, !0)
                } else {
                    if (1 == t.literally.filePage[t.literally.lastFile.fileid])
                        return;
                    t.literally.currentNum -= 1,
                        t.literally.openFile(t.literally.lastFile, t.literally.currentNum, !0)
                }
            },
            pageRight: function () {
                if (t.literally.filePage.whiteboard.currentPage = parseInt(t.literally.filePage.whiteboard.currentPage),
                    t.literally.currentNum = parseInt(t.literally.currentNum),
                    t.literally.totalNum = parseInt(t.literally.totalNum),
                    "whiteboard" == t.literally.currentPageType)
                    t.literally.currentNum == t.literally.totalNum && (t.literally.totalNum += 1),
                        t.literally.currentNum += 1,
                        t.literally.openWhiteBoard(t.literally.currentNum, !0);
                else {
                    if (t.literally.currentNum == t.literally.totalNum)
                        return;
                    t.literally.currentNum += 1,
                        t.literally.openFile(t.literally.lastFile, t.literally.currentNum, !0)
                }
            }
        },
            t.localUser = {
                userid: F,
                participantid: "",
                username: z,
                properties: {
                    role: fe,
                    username: z,
                    state: -1,
                    cameras: ["deviceId"],
                    deviceType: "pc",
                    videoForUsername: {},
                    camerasForName: []
                },
                videoInputDefault: "",
                audioInputDefault: "",
                audioOutputDefault: "",
                videoInputDeviceIds: [],
                audioInputDeviceIds: [],
                audioOutputDeviceIds: [],
                constraints: {},
                audioPublishCounts: 0,
                videoPublishCounts: new Map,
                videoNeedPublishMap: new Map,
                videoCreateProgress: new Map
            };
        let me = 0
            , ge = setInterval(() => {
                me += 1,
                    (t.room.checkIsWebView() || 10 == me) && (t.room.checkIsWebView() && ($("body").css("background", "#1b2d43"),
                        pc.getWindowStatus(),
                        pc.getItem("settings", function (e) {
                            e = null == e || 0 == e.length ? [] : JSON.parse(e),
                                t.$apply(function () {
                                    t.room.liveSetting.secondLiveSettings = e
                                }),
                                pc.getItem("settingIndex", function (e) {
                                    null != e && 0 != e.length || (e = 0),
                                        t.$apply(function () {
                                            if (t.room.liveSetting.settingIndex = e,
                                                0 != e && t.room.liveSetting.secondLiveSettings.length > 0) {
                                                let e = getArrIndexBy2Params(t.room.liveSetting.secondLiveSettings, t.room.liveSetting.settingIndex, "settingIndex")
                                                    , n = t.room.liveSetting.secondLiveSettings[e].thumbnail;
                                                $(".c-thumbnail span").css("background-image", `url("${n}")`)
                                            }
                                        }),
                                        t.$watch("room.liveSetting.quality + room.liveSetting.pushType", function (e, n) {
                                            if (t.room.checkIsWebView()) {
                                                let e = {
                                                    quality: t.room.liveSetting.quality,
                                                    pushType: t.room.liveSetting.pushType
                                                };
                                                pc.setItem("pushSetting", JSON.stringify(e))
                                            }
                                        }, !0),
                                        t.$watch("room.liveSetting.settingIndex", function (e, n) {
                                            t.room.checkIsWebView() && pc.setItem("settingIndex", t.room.liveSetting.settingIndex)
                                        }, !0)
                                })
                        }),
                        pc.getItem("pushSetting", function (e) {
                            e = null == e || 0 == e.length ? {
                                quality: 0,
                                pushType: 0
                            } : JSON.parse(e),
                                t.$apply(function () {
                                    t.room.liveSetting.quality = e.quality,
                                        t.room.liveSetting.pushType = e.pushType
                                })
                        })),
                        t.$digest(),
                        clearInterval(ge))
            }
                , 1e3);
        function ve(e = !1, i = !1) {
            return new Promise((r, a) => {
                let s = []
                    , l = []
                    , c = [];
                $(".audio-this-setbacks").css("width", se + "%"),
                    $(".audio-this-setbacks").attr("data-volume", se),
                    $(".audio-this-setbacks").parent().siblings("span").html(se),
                    $(".settingPopup .audioinput input,.settingPopup .audioinput ul").remove(),
                    $(".settingPopup .audiooutput input,.settingPopup .audiooutput ul").remove(),
                    $(".settingPopup .camera-select input,.settingPopup .camera-select ul").remove(),
                    t.localUser.properties.camerasForName = [],
                    t.localUser.properties.videoForUsername = {};
                let u = [];
                navigator.mediaDevices.enumerateDevices().then(function (a) {
                    let d = $(".settingPopup .audioinput img")
                        , p = $("<select></select>")
                        , h = $(".settingPopup .audiooutput img")
                        , f = $("<select></select>")
                        , m = $("#videoTable tbody");
                    m.html("");
                    let g = 0
                        , v = !1
                        , y = []
                        , b = []
                        , w = !1;
                    if (de = [],
                        pe = [],
                        a.forEach(function (e) {
                            let t = {
                                groupId: e.groupId,
                                deviceId: e.deviceId,
                                label: e.label,
                                kind: e.kind
                            };
                            "80991602a3089ef97bed218ad345aa8a23a786fad672de3b276afc1fa42745e0" == t.deviceId && i || b.push(t)
                        }),
                        b.forEach(function (e) {
                            if ("communications" != e.groupId && "communications" != e.deviceId && "通讯" != e.label && "默认" != e.deviceId && "default" != e.deviceId) {
                                if (e.deviceId = e.deviceId + t.localUser.userid,
                                    "videoinput" === e.kind) {
                                    let i = getArrIndex(oe, e.deviceId, "videoDeviceId");
                                    if (-1 == i) {
                                        let t = {
                                            videoDeviceId: e.deviceId,
                                            quality: 2,
                                            frame: 15
                                        };
                                        y.push(t)
                                    } else
                                        y.push(oe[i]);
                                    -1 != getArrIndex(le, e.deviceId) && u.push(e.deviceId),
                                        t.localUser.properties.videoForUsername[e.deviceId] = t.localUser.username + "_" + g,
                                        v = -1 !== getArrIndex(le, e.deviceId);
                                    let r = $(`<tr class="videoInput">\n                                            <td class="videoInputId">\n                                                <input id="${e.deviceId}" type="checkbox" name="videoSelected[]" value="${e.deviceId}" data-value="${e.deviceId}"/>\n                                                <label></label>\n                                            </td>\n                                            <td class="videoInput-name">${e.label}</td>\n                                            <td class="videoInput-username">${t.localUser.username + "_" + g}</td>\n                                             <td>\n                                                <div class="videoResolutionFrame">\n                                                    <div class="resolution">\n                                                        <select class="resolutionSelect"></select>                                     \n                                                    </div>\n                                                    <div class="frame">\n                                                        <select class="frameSelect"></select>                                     \n                                                    </div>\n                                                </div>\n                                                \n                                             </td>\n                                            <td class="videoInput-default"><input type="radio" name="videoSelectDefault" id="radio-${e.deviceId}" value="${e.deviceId}" data-value="${e.deviceId}"/><label for="radio-${e.deviceId}"><i></i><span>${n.instant("setting.default")}</label></span></td>\n                                            <td style="display: none"><span>${n.instant("setting.title")}</span></td>\n                                            \n                                        </tr>`);
                                    v && (w = !0,
                                        r.find("input[type=checkbox]").attr("checked", "checked")),
                                        m.append(r);
                                    $(`<option data-value="${e.deviceId}" value="${e.deviceId}">${e.label}</option>`);
                                    g += 1,
                                        s.push(e)
                                }
                                if ("audioinput" === e.kind) {
                                    let t = $(`<option data-value="${e.deviceId}" value="${e.deviceId}">${e.label}</option>`);
                                    p.append(t),
                                        l.push(e),
                                        de.push(e)
                                }
                                if ("audiooutput" === e.kind) {
                                    let t = $(`<option data-value="${e.deviceId}" value="${e.deviceId}">${e.label}</option>`);
                                    f.append(t),
                                        c.push(e),
                                        pe.push(e)
                                }
                            }
                        }),
                        le = u,
                        d.after(p),
                        h.after(f),
                        null != ne && 0 !== ne.length && -1 != getArrIndex(s, ne, "deviceId") || (ne = "",
                            s.length > 0 && (ne = s[0].deviceId)),
                        w || $(m.find("input[type=checkbox]")[0]).attr("checked", "checked"),
                        t.localUser.properties.camerasForName = [],
                        t.localUser.properties.cameras = [],
                        0 !== ne.length) {
                        if (0 == le.length)
                            le.push(ne),
                                t.localUser.properties.cameras.push(ne),
                                t.localUser.properties.camerasForName.push({
                                    videoDeviceId: ne,
                                    cameraName: t.localUser.properties.videoForUsername[ne]
                                });
                        else {
                            let e = [];
                            le.forEach(function (n) {
                                -1 != getArrIndex(s, n, "deviceId") ? (e.push(n),
                                    t.localUser.properties.cameras.push(n),
                                    t.localUser.properties.camerasForName.push({
                                        videoDeviceId: n,
                                        cameraName: t.localUser.properties.videoForUsername[n]
                                    })) : $(`.user-video[data-videoDeviceId="${n.replace("+", "\\+").replace("-", "\\-")}"]`).remove()
                            }),
                                le = e
                        }
                        m.find(`input[type=radio][data-value="${ne}"]`).attr("checked", "checked");
                        let e = getArrIndex(t.localUser.properties.camerasForName, ne, "videoDeviceId");
                        if (-1 !== e) {
                            let n = t.localUser.properties.camerasForName.splice(e, 1);
                            t.localUser.properties.camerasForName.unshift(n[0])
                        }
                        let n = getArrIndex(t.localUser.properties.cameras, ne);
                        -1 !== n && (t.localUser.properties.cameras.splice(n, 1),
                            ne.length > 0 && t.localUser.properties.cameras.unshift(ne))
                    } else
                        t.localUser.properties.cameras = [],
                            t.localUser.properties.camerasForName = [];
                    $(`.user-video[data-userid="${F}"]`).each(function () {
                        let e = $(this).attr("data-videodeviceid");
                        if (-1 == $.inArray(e, t.localUser.properties.cameras)) {
                            $(this).remove(),
                                t.localUser.constraints[e] = {
                                    video: !1
                                },
                                t.localUser.videoNeedPublishMap.set(e, !1);
                            let n = o.getStreamByName(e);
                            if (null != n) {
                                let e = o.getPublicationByName(n.name);
                                null != e && e.stop(),
                                    o.removePublicationByName(n.name),
                                    n.mediaStream && n.mediaStream.getVideoTracks()[0].stop(),
                                    o.removeStream(n.id),
                                    n = null
                            }
                        }
                    }),
                        null != ie && 0 !== ie.length && -1 != getArrIndex(l, ie, "deviceId") || (ie = "",
                            l.length > 0 && (ie = l[0].deviceId)),
                        0 !== ie.length && p.find(`[data-value="${ie}"]`).attr("selected", "selected"),
                        p.editableSelect({
                            filter: !1,
                            effects: "slide"
                        }),
                        null != re && 0 !== re.length && -1 != getArrIndex(c, re, "deviceId") || (re = "",
                            c.length > 0 && (re = c[0].deviceId)),
                        0 !== re.length && f.find(`[data-value="${re}"]`).attr("selected", "selected"),
                        f.editableSelect({
                            filter: !1,
                            effects: "slide"
                        });
                    let S = 0;
                    s.length > 0 && (S += 2),
                        l.length > 0 && (S += 1),
                        t.$apply(() => {
                            t.localUser.properties.state = S,
                                t.localUser.videoInputDefault = ne,
                                t.localUser.audioInputDefault = ie,
                                t.localUser.audioOutputDefault = re,
                                t.localUser.videoInputDeviceIds = s,
                                t.localUser.audioInputDeviceIds = l,
                                t.localUser.audioOutputDeviceIds = c,
                                e && (t.room.isSettingShow = !0)
                        }
                        ),
                        t.room.videoQualities = y,
                        oe = y,
                        ae = angular.copy(y),
                        ye(t.room.videoQualities, ne),
                        o.setLocalUser(t.localUser),
                        o.setLocalUserState(S),
                        r({})
                }).catch(function (e) {
                    o.setLocalUserState(0),
                        console.log(e.name + ": " + e.message),
                        a(e)
                })
            }
            )
        }
        function ye(e, t) {
            $(".quality-select, .frame-select").html(""),
                $(".quality-select, .frame-select").append("<select></select>"),
                b.forEach(function (e, t) {
                    let n = $(`<option data-value="${e.value}">${e.text}</option>`);
                    $(".resolution select").append(n)
                }),
                w.forEach(function (e, t) {
                    let n = $(`<option data-value="${e}">${e}</option>`);
                    $(".frame select").append(n)
                }),
                e.forEach(function (e, t) {
                    let n = $("#videoTable").find(`.videoInputId [data-value="${e.videoDeviceId.replace("+", "\\\\+").replace("-", "\\\\-")}"]`).parents(".videoInput");
                    n.find(`.resolutionSelect option[data-value="${e.quality}"]`).attr("selected", "selected"),
                        n.find(`.frameSelect  option[data-value="${e.frame}"]`).attr("selected", "selected")
                }),
                S.forEach(function (e, t) {
                    let n = $(`<option>${e}</option>`);
                    0 == t && n.attr("selected", "selected"),
                        $(".device-select select").append(n)
                }),
                C.forEach(function (e, t) {
                    let n = $(`<option>${e}</option>`);
                    0 == t && n.attr("selected", "selected"),
                        $(".port-select select").append(n)
                }),
                x.forEach(function (e, t) {
                    let n = $(`<option>${e}</option>`);
                    0 == t && n.attr("selected", "selected"),
                        $(".border-width-select select").append(n)
                }),
                $(".video-setting select").editableSelect({
                    filter: !1,
                    effects: "slide"
                }),
                $(".videoResolutionFrame select").editableSelect({
                    filter: !1,
                    effects: "slide"
                }),
                $(".languageinput input,.languageinput ul").remove(),
                $(".languageinput").append("<select></select>"),
                T.forEach(function (e, t) {
                    let n = $(`<option data-value="${e.name}">${e.desc}</option>`);
                    k == e.name && n.attr("selected", "selected"),
                        $(".languageinput select").append(n)
                }),
                $(".languageinput select").editableSelect({
                    filter: !1,
                    effects: "slide"
                }),
                $("#videoTable").undelegate(),
                $("#videoTable").delegate(".resolutionSelect", "hidden.editable-select", function () {
                    let t = $(this).parents("tr").find(".videoInputId input").attr("data-value")
                        , n = getArrIndex(e, t, "videoDeviceId")
                        , i = e[n]
                        , r = $(this).attr("data-value");
                    i.quality = r
                }),
                $("#videoTable").delegate(".frameSelect", "hidden.editable-select", function () {
                    let t = $(this).parents("tr").find(".videoInputId input").attr("data-value")
                        , n = getArrIndex(e, t, "videoDeviceId")
                        , i = e[n]
                        , r = $(this).attr("data-value");
                    i.frame = r
                })
        }
        !function () {
            function e() {
                let e = document.body.clientWidth;
                e <= y && (e = y);
                let t = e / 1920 * 120;
                document.documentElement.style.fontSize = t + "px"
            }
            t.literally.calcauteLiterally(),
                e(),
                $(window).resize(function () {
                    e(),
                        t.literally.lcStatus = api.getLcStatus(),
                        t.room.changeVideoPartDisplay(!0)
                }),
                void 0 !== document.hidden && document.addEventListener("visibilitychange", function () {
                    document.hidden || t.literally.initWb()
                }),
                $(".video-part").delegate(".l-wide label", "click", function (e) {
                    let t = !$(this).siblings("input").prop("checked");
                    $(this).siblings("input").prop("checked", t),
                        e.stopProgation()
                }),
                window.getLiveSettings = function () {
                    return t.room.liveSetting.secondLiveSettings
                }
                ,
                window.closeLiveSetting = function () {
                    t.room.secondLive.isOpen = !1
                }
                ,
                window.updateLiveSettings = function (e, n) {
                    t.$apply(function () {
                        t.room.liveSetting.secondLiveSettings = e,
                            t.room.liveSetting.settingIndex = n;
                        let i = getArrIndexBy2Params(t.room.liveSetting.secondLiveSettings, t.room.liveSetting.settingIndex, "settingIndex")
                            , r = t.room.liveSetting.secondLiveSettings[i].thumbnail;
                        $(".c-thumbnail span").css("background-image", `url("${r}")`)
                    })
                }
                ,
                window.getVideoStream = function (e, n) {
                    return e == t.localUser.userid ? o.getStreamByName(n) : a.getParticipantStreamByUserId(e, n)
                }
                ,
                window.getAllImages = function () {
                    let e = []
                        , n = "img"
                        , i = ""
                        , r = 1
                        , o = 0
                        , a = $(".white-board-main>img").attr("src");
                    if (void 0 != a && 0 != a.length || (a = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWP4////fwAJ+wP9CNHoHgAAAABJRU5ErkJggg=="),
                        e.push(a),
                        1 == $(".literally canvas:eq(1)").length) {
                        let t = $(".literally canvas:eq(1)").get(0).toDataURL("image/png");
                        e.push(t)
                    }
                    return t.literally.lastFile && 1 == t.literally.lastFile.isDynamicPPT && "file" == t.literally.currentPageType && (n = "html",
                        i = d.src,
                        o = t.literally.lastFile.animateStep,
                        r = t.literally.filePage[t.literally.lastFile.fileid]),
                    {
                        imgs: e,
                        type: n,
                        htmlSrc: i,
                        index: r,
                        step: o
                    }
                }
                ,
                window.getAllUserVideos = function () {
                    let e = [];
                    return $(".main-panel").children(":not(.forceHide)").sort(function (e, t) {
                        return $(e).attr("data-index") - $(t).attr("data-index")
                    }).each(function () {
                        let t = $(this)
                            , n = {
                                userId: "",
                                videoDeviceId: "",
                                type: "video",
                                dataIndex: t.attr("data-index")
                            };
                        t.hasClass("left-panel") ? n.type = "whiteboard" : (n.userId = t.attr("data-userid"),
                            n.videoDeviceId = t.attr("data-videodeviceid")),
                            e.push(n)
                    }),
                        e
                }
                ,
                $(".user-section").delegate(".user-list-li", "contextmenu", function () {
                    let e = $(this).find(".headImg").offset().top - $(".user-section").offset().top;
                    $(".user-list-right-btn-area").hide();
                    let n = $(this).find(".user-cam")
                        , i = n.attr("data-userid")
                        , r = n.attr("data-videodeviceid")
                        , s = $(`.user-video[data-userid="${i}"][data-videoDeviceId="${r}"]`);
                    if (1 == t.room.eduModeReal && 0 == s.attr("data-index") ? $(".user-list-right-btn-area .manual").hide() : $(".user-list-right-btn-area .manual").show(),
                        t.room.selectedParticipant.userid = i,
                        t.room.selectedParticipant.videoDeviceId = r,
                        t.room.selectedParticipant.userid == t.localUser.userid)
                        t.room.selectedParticipant.state = t.localUser.properties.state,
                            t.room.selectedParticipant.isAudioOn = null != o.getLocalAudioStream(),
                            t.room.selectedParticipant.role = t.localUser.properties.role;
                    else {
                        let e = a.getParticipantByUserid(t.room.selectedParticipant.userid);
                        t.room.selectedParticipant.state = e.properties.state,
                            t.room.selectedParticipant.isAudioOn = e.constraints.audio,
                            t.room.selectedParticipant.role = e.properties.role
                    }
                    "true" == s.attr("data-isManual") ? t.room.selectedParticipant.isManual = !0 : t.room.selectedParticipant.isManual = !1,
                        "true" == s.attr("data-isOnDesk") ? t.room.selectedParticipant.isOnDesk = !0 : t.room.selectedParticipant.isOnDesk = !1,
                        t.$apply(),
                        $(this).find(".user-list-right-btn-area").css("top", e),
                        $(this).find(".user-list-right-btn-area").show()
                }),
                $(".message-list").delegate("li", "contextmenu", function (e) {
                    let t = e.pageX - $("[ui-view]").offset().left
                        , n = e.pageY - $("[ui-view]").offset().top;
                    $(".msg-context-menu").css("top", n),
                        $(".msg-context-menu").css("left", t),
                        0 != window.getSelection().toString().length && ($(".msg-context-menu").show(),
                            $(".msg-context-menu .paste").hide())
                }),
                $(".message-list").delegate("textarea", "contextmenu", function (e) {
                    let t = e.pageX - $("[ui-view]").offset().left
                        , n = e.pageY - $("[ui-view]").offset().top;
                    $(".msg-context-menu").css("top", n),
                        $(".msg-context-menu").css("left", t),
                        0 == window.getSelection().toString().length ? $(".msg-context-menu .copy").hide() : $(".msg-context-menu .copy").show(),
                        $(".msg-context-menu .paste").show(),
                        $(".msg-context-menu").show()
                }),
                $(".msg-context-menu").delegate(".copy", "click", function (e) {
                    let t = window.getSelection().toString();
                    if (0 == t.length)
                        return;
                    const n = document.createElement("input");
                    n.style.display = "hidden",
                        document.body.appendChild(n),
                        n.setAttribute("value", t),
                        n.select(),
                        document.execCommand("copy") && document.execCommand("copy"),
                        document.body.removeChild(n),
                        $(".msg-context-menu").hide()
                }),
                $(".main-panel").delegate(".user-video", "contextmenu", function (e) {
                    if ($(".video-context-menu").length > 0) {
                        1 == t.room.eduModeReal && 0 == $(this).attr("data-index") ? $(".video-context-menu .manual").hide() : $(".video-context-menu .manual").show();
                        let n = e.pageX - $("[ui-view]").offset().left
                            , i = e.pageY - $("[ui-view]").offset().top;
                        if ($(".video-context-menu").css("top", i),
                            $(".video-context-menu").css("left", n),
                            t.room.selectedParticipant.userid = $(this).attr("data-userid"),
                            t.room.selectedParticipant.videoDeviceId = $(this).attr("data-videodeviceid"),
                            t.room.selectedParticipant.userid == t.localUser.userid)
                            t.room.selectedParticipant.state = t.localUser.properties.state,
                                t.room.selectedParticipant.isAudioOn = null != o.getLocalAudioStream(),
                                t.room.selectedParticipant.role = t.localUser.properties.role;
                        else {
                            let e = a.getParticipantByUserid(t.room.selectedParticipant.userid);
                            t.room.selectedParticipant.state = e.properties.state,
                                t.room.selectedParticipant.isAudioOn = e.constraints.audio,
                                t.room.selectedParticipant.role = e.properties.role
                        }
                        "true" == $(this).attr("data-isManual") ? t.room.selectedParticipant.isManual = !0 : t.room.selectedParticipant.isManual = !1,
                            "true" == $(this).attr("data-isOnDesk") ? t.room.selectedParticipant.isOnDesk = !0 : t.room.selectedParticipant.isOnDesk = !1,
                            t.$apply(),
                            $(".video-context-menu").show()
                    }
                });
            let i = null
                , s = null;
            function l(e) {
                if (!e.hasClass("local") && !e.hasClass("left-panel")) {
                    let n = a.getParticipantStreamByUserId(e.attr("data-userId"), e.attr("data-videoDeviceId"));
                    if (null != n) {
                        let i = a.getParticipantByUserid(e.attr("data-userId"));
                        null != i && t.room.applySubScribeOption(i, n, e)
                    }
                }
            }
            var c;
            $("body").delegate(".user-video", "fullscreenchange", function () {
                "true" != $(this).attr("fullscreen") ? $(this).attr("fullscreen", "true") : $(this).attr("fullscreen", "false"),
                    l($(this))
            }),
                $(".main-panel").delegate(".user-video", "dblclick", function () {
                    "true" != $(this).attr("fullscreen") ? fullScreen($(this).get(0)) : exitFullScreen(),
                        i = null,
                        s = null
                }),
                $("#screen-board").delegate("video", "dblclick", function () {
                    "true" != $(this).attr("fullscreen") ? ($(this).attr("fullscreen", "true"),
                        fullScreen($(this).get(0))) : ($(this).attr("fullscreen", "false"),
                            exitFullScreen()),
                        i = null,
                        s = null
                }),
                $("body").on("contextmenu", function (e) {
                    e.preventDefault()
                }),
                $("body").on("touchstart", function (e) {
                    if (1 != t.room.chairmanControlStatus.isOpen || t.localUser.properties.role == t.room.roles.chairman || 1 != t.room.chairmanControlStatus.manualSynchronize && 1 != t.room.chairmanControlStatus.globalSynchronize) {
                        $(".iframe-masker").addClass("show");
                        var n = e.target;
                        c = e.originalEvent.changedTouches[0],
                            $(n).parents(".left-panel").length > 0 && 0 == $(n).parents(".left-panel").attr("data-index") || ($(n).parents(".left-panel").eq(0).attr("data-index") > 0 ? (g = !0,
                                0 == $(e.target).closest(".videoCloseBtn").length && $(".videoCloseBtn").css("display", "none"),
                                i = $(n).parents(".left-panel"),
                                s = i.clone()) : $(n).parents(".user-video").length > 0 && (g = !0,
                                    0 == $(e.target).closest(".videoCloseBtn").length && $(".videoCloseBtn").css("display", "none"),
                                    i = $(n).parents(".user-video"),
                                    s = i.clone()))
                    }
                }),
                $("body").on("touchmove", function (e) {
                    c = e.originalEvent.changedTouches[0]
                }),
                $("body").on("touchend", function (e) {
                    if ($(".iframe-masker").removeClass("show"),
                        null != i && g) {
                        var n = document.elementFromPoint(c.clientX, c.clientY);
                        if ($(n).parents(".left-panel").length > 0) {
                            let e = $(n).parents(".left-panel");
                            if (e.attr("data-index") == i.attr("data-index"))
                                return;
                            if (0 == e.attr("data-index") && (e.removeAttr("data-ismain"),
                                i.attr("data-ismain", "true")),
                                i.attr("style", e.attr("style")),
                                i.attr("data-index", e.attr("data-index")),
                                e.attr("style", s.attr("style")),
                                e.attr("data-index", s.attr("data-index")),
                                l(i),
                                l(e),
                                0 == i.attr("data-index") && t.room.excitation) {
                                let e = (new Date).getTime();
                                i.attr("time", e)
                            }
                            if ("mainSub" == t.room.currentLayout)
                                if (0 == e.attr("data-index"))
                                    e.attr("data-ismain", !0),
                                        i.removeAttr("data-ismain"),
                                        t.room.mainWidthChange(),
                                        $("#screen-board").removeClass("small-screen"),
                                        $(".left-panel .white-board-img").remove();
                                else {
                                    $("#screen-board").addClass("small-screen");
                                    let e = $('<div class="white-board-img">\n                    <div class="img-area"><img /></div>\n                </div>');
                                    $(".left-panel").append(e),
                                        t.room.mainWidthChange()
                                }
                            $(".videoCloseBtn").removeAttr("style"),
                                g = !1
                        } else if ($(n).parents(".user-video").length > 0) {
                            let e = $(n).parents(".user-video");
                            if (i.attr("data-index") == e.attr("data-index"))
                                return g = !1,
                                    $(".videoCloseBtn").removeAttr("style"),
                                    s = null,
                                    void (g = !1);
                            if (0 == e.attr("data-index") && (e.removeAttr("data-ismain"),
                                i.attr("data-ismain", "true")),
                                i.attr("style", e.attr("style")),
                                i.attr("data-index", e.attr("data-index")),
                                e.attr("style", s.attr("style")),
                                e.attr("data-index", s.attr("data-index")),
                                l(i),
                                l(e),
                                0 == i.attr("data-index") && t.room.excitation) {
                                let e = (new Date).getTime();
                                i.attr("time", e)
                            }
                            "mainSub" == t.room.currentLayout && i.hasClass("left-panel") && 0 == i.attr("data-index") && ($("#screen-board").removeClass("small-screen"),
                                $(".left-panel .white-board-img").remove(),
                                t.room.mainWidthChange()),
                                $(".videoCloseBtn").removeAttr("style"),
                                g = !1
                        }
                        t.room.syncChairmanUserVideo(!0, !0)
                    }
                }),
                $(".main-panel").delegate(">div:not(.left-panel)", "mousedown", function (e) {
                    (1 != t.room.chairmanControlStatus.isOpen || t.localUser.properties.role == t.room.roles.chairman || 1 != t.room.chairmanControlStatus.manualSynchronize && 1 != t.room.chairmanControlStatus.globalSynchronize) && ($(".iframe-masker").addClass("show"),
                        g = !0,
                        0 == $(e.target).closest(".videoCloseBtn").length && $(".videoCloseBtn").css("display", "none"),
                        i = $(this),
                        s = $(this).clone())
                }),
                $(".main-panel").delegate(".left-panel", "mousedown", function (e) {
                    (1 != t.room.chairmanControlStatus.isOpen || t.localUser.properties.role == t.room.roles.chairman || 1 != t.room.chairmanControlStatus.manualSynchronize && 1 != t.room.chairmanControlStatus.globalSynchronize) && (0 == $(this).attr("data-index") && "mainSub" == t.room.currentLayout || ($(".iframe-masker").addClass("show"),
                        g = !0,
                        0 == $(e.target).closest(".videoCloseBtn").length && $(".videoCloseBtn").css("display", "none"),
                        i = $(this),
                        s = $(this).clone()))
                }),
                $(document).mouseup(function () {
                    $(".iframe-masker").removeClass("show")
                }),
                $(".main-panel").delegate(">div:not(.left-panel)", "mouseup", function (e) {
                    let n = $(this);
                    if (null != s && g) {
                        if (i.attr("data-index") == n.attr("data-index"))
                            return g = !1,
                                $(".videoCloseBtn").removeAttr("style"),
                                s = null,
                                void (g = !1);
                        if (0 == n.attr("data-index") && ($(this).removeAttr("data-ismain"),
                            i.attr("data-ismain", "true")),
                            i.attr("style", n.attr("style")),
                            i.attr("data-index", n.attr("data-index")),
                            n.attr("style", s.attr("style")),
                            n.attr("data-index", s.attr("data-index")),
                            l(i),
                            l(n),
                            0 == i.attr("data-index") && t.room.excitation) {
                            let e = (new Date).getTime();
                            i.attr("time", e)
                        }
                        "mainSub" == t.room.currentLayout && i.hasClass("left-panel") && 0 == i.attr("data-index") && ($("#screen-board").removeClass("small-screen"),
                            $(".left-panel .white-board-img").remove(),
                            t.room.mainWidthChange()),
                            $(".videoCloseBtn").removeAttr("style"),
                            t.room.syncChairmanUserVideo(!0, !0),
                            t.room.syncUserVideoToSecondLive(),
                            g = !1
                    }
                }),
                $(".main-panel").delegate(".left-panel", "mouseup", function (e) {
                    if (null != s && g && $(this).attr("data-index") != i.attr("data-index")) {
                        if (0 == $(this).attr("data-index") && ($(this).removeAttr("data-ismain"),
                            i.attr("data-ismain", "true")),
                            i.attr("style", $(this).attr("style")),
                            i.attr("data-index", $(this).attr("data-index")),
                            $(this).attr("style", s.attr("style")),
                            $(this).attr("data-index", s.attr("data-index")),
                            l(i),
                            l($(this)),
                            0 == i.attr("data-index") && t.room.excitation) {
                            let e = (new Date).getTime();
                            i.attr("time", e)
                        }
                        if ("mainSub" == t.room.currentLayout)
                            if (0 == $(this).attr("data-index"))
                                $(this).attr("data-ismain", !0),
                                    i.removeAttr("data-ismain"),
                                    t.room.mainWidthChange(),
                                    $("#screen-board").removeClass("small-screen"),
                                    $(".left-panel .white-board-img").remove();
                            else {
                                $("#screen-board").addClass("small-screen");
                                let e = $('<div class="white-board-img">\n                        <div class="img-area"><img /></div>\n                    </div>');
                                $(".left-panel").append(e),
                                    t.room.mainWidthChange(),
                                    t.literally.canvasToimg()
                            }
                        t.room.syncChairmanUserVideo(!0, !0),
                            t.room.syncUserVideoToSecondLive(),
                            $(".videoCloseBtn").removeAttr("style"),
                            g = !1
                    }
                }),
                $(".main-panel").delegate(".videoCloseBtn", "click", function () {
                    if (1 == t.room.chairmanControlStatus.isOpen && t.localUser.properties.role != t.room.roles.chairman && (1 == t.room.chairmanControlStatus.manualSynchronize || 1 == t.room.chairmanControlStatus.globalSynchronize))
                        return;
                    i = null,
                        s = null;
                    let e = $(this).parent().attr("data-videoDeviceId")
                        , n = $(this).parent().attr("data-userId");
                    0 == $(".user-list").find(`img[data-videoDeviceId="${e.replace("+", "\\+").replace("-", "\\-")}"][data-userId="${n}"]`).length ? $(this).parents(".user-video").remove() : $(".user-list").find(`img[data-videoDeviceId="${e.replace("+", "\\+").replace("-", "\\-")}"][data-userId="${n}"]`).trigger("click")
                }),
                $("#main").delegate(".videoCloseBtn", "click", function () {
                    if (1 == t.room.chairmanControlStatus.isOpen && t.localUser.properties.role != t.room.roles.chairman && (1 == t.room.chairmanControlStatus.manualSynchronize || 1 == t.room.chairmanControlStatus.globalSynchronize))
                        return;
                    i = null,
                        s = null;
                    let e = $(this).parent();
                    e.attr("fullscreen", "false");
                    let n = e.attr("data-videoDeviceId")
                        , l = e.attr("data-userId");
                    if (e.hasClass("local")) {
                        e.remove();
                        let i = o.getStreamByName(n);
                        t.$apply(function () {
                            t.localUser.constraints[n] = {
                                video: !1
                            }
                        }),
                            i.isPublished || o.removeStream(i.id)
                    } else {
                        e.remove();
                        let i = {
                            videoDeviceId: n
                        };
                        1 != t.room.chairmanControlStatus.isOpen || 1 != t.room.chairmanControlStatus.manualSynchronize && 1 != t.room.chairmanControlStatus.globalSynchronize ? r.send("unPublishUserVideo", l, "", i, "send") : t.localUser.properties.role == t.room.roles.chairman && r.send("unPublishUserVideo", l, "", i, "send"),
                            a.updateParticipantConstraints(l, "video", !1, n),
                            t.$apply(function () {
                                t.room.participants = a.getParticipants()
                            })
                    }
                    $("#main #white-board").show(),
                        $('.main-panel [data-isWhiteBoard="true"]').remove(),
                        t.room.changeVideoPartDisplay()
                }),
                $("#videoTable tbody").delegate(".videoInputId label", "click", function () {
                    let e = !$(this).siblings("input").prop("checked")
                        , t = $(this).siblings("input").attr("id");
                    if (e)
                        $(this).siblings("input").prop("checked", !0);
                    else {
                        $(this).siblings("input").prop("checked", !1);
                        let e = $("#videoTable tbody").find(`input[type="checkbox"]:not([id="${t}"]):checked`);
                        0 == e.length ? $(this).siblings("input").prop("checked", "checked") : $(e[0]).parent().siblings(".videoInput-default").find("label").trigger("click")
                    }
                }),
                $("#videoTable tbody").delegate("input[type=radio]", "click", function () {
                    !0 === $(this).prop("checked") && $(this).parent().siblings().find("input[type=checkbox]").prop("checked", "true")
                }),
                $(".audioinput").delegate("input", "hide.editable-select", function () {
                    let e = $(this).attr("data-value");
                    t.localUser.audioInputDefault != e && t.room.initAudioProcess(e)
                });
            let u = !1
                , p = !1
                , h = !1
                , m = !1
                , v = !1;
            function b(e) {
                var t = "transparent";
                e && (t = e.toHexString()),
                    api.setColor(t),
                    $("#color").val(t),
                    $("#docs-content").css("border-color", t)
            }
            $(".outputProcess").click(function (e) {
                if (u)
                    return;
                let t = e.pageX - $(this).offset().left
                    , n = parseInt(t / $(this).width() * 100);
                $(".audio-this-setbacks").css("width", n + "%"),
                    $(".audio-this-setbacks").attr("data-volume", n),
                    $(".audio-this-setbacks").parent().siblings("span").html(n)
            }),
                $("#tool-solid-size>.bar").click(function (e) {
                    if (p)
                        return;
                    let t = e.pageX - $(this).offset().left
                        , n = parseInt(t / $(this).width() * 100)
                        , i = 1;
                    i = 0 == n ? 1 : n <= 33.33 ? Math.ceil(10 / 33.33 * n) : Math.ceil(10 + 10 / 66.66 * (n - 33.33)),
                        api.setStrokeWidth(i, "Line"),
                        $("#tool-solid-size>.bar>.bar-color").css("width", n + "%"),
                        $("#tool-solid-size>.bar>.button").css("left", n + "%")
                }),
                $("#tool-font-size>.bar").click(function (e) {
                    if (h)
                        return;
                    let t = e.pageX - $(this).offset().left
                        , n = parseInt(t / $(this).width() * 100)
                        , i = 1;
                    i = 0 == n ? 12 : Math.ceil(12 + .18 * n),
                        api.setFontSize(i),
                        $("#tool-font-size>.bar>.bar-color").css("width", n + "%"),
                        $("#tool-font-size>.bar>.button").css("left", n + "%")
                }),
                $("#tool-font-opacity>.bar").click(function (e) {
                    if (m)
                        return;
                    let t = e.pageX - $(this).offset().left
                        , n = parseInt(t / $(this).width() * 100)
                        , i = 25;
                    i = 0 == n ? 25 : Math.ceil(25 + .75 * n),
                        api.setOpactity(i),
                        $("#tool-font-opacity>.bar>.bar-color").css("width", n + "%"),
                        $("#tool-font-opacity>.bar>.button").css("left", n + "%")
                }),
                $("#tool-eraser-size>.bar").click(function (e) {
                    if (v)
                        return;
                    let t = e.pageX - $(this).offset().left
                        , n = parseInt(t / $(this).width() * 100)
                        , i = 5;
                    i = 0 == n ? 5 : Math.ceil(5 + .15 * n),
                        api.setStrokeWidth(i, "Eraser"),
                        $("#tool-eraser-size>.bar>.bar-color").css("width", n + "%"),
                        $("#tool-eraser-size>.bar>.button").css("left", n + "%")
                }),
                $(".audio-backs-btn").mousedown(function () {
                    u = !0
                }),
                $("#tool-solid-size>.bar>.button").mousedown(function () {
                    p = !0
                }),
                $("#tool-font-size>.bar>.button").mousedown(function () {
                    h = !0
                }),
                $("#tool-font-opacity>.bar>.button").mousedown(function () {
                    m = !0
                }),
                $("#tool-eraser-size>.bar>.button").mousedown(function () {
                    v = !0
                }),
                $(document).mousemove(function (e) {
                    if (u || p || h || m || v) {
                        if (u) {
                            let t = e.pageX - $(".outputProcess").offset().left;
                            t < 0 ? t = 0 : t > $(".outputProcess").width() && (t = $(".outputProcess").width());
                            let n = parseInt(t / $(".outputProcess").width() * 100);
                            $(".audio-this-setbacks").css("width", n + "%"),
                                $(".audio-this-setbacks").attr("data-volume", n),
                                $(".audio-this-setbacks").parent().siblings("span").html(n)
                        }
                        if (p) {
                            let t = e.pageX - $("#tool-solid-size>.bar").offset().left;
                            t < 0 ? t = 0 : t > $("#tool-solid-size>.bar").width() && (t = $("#tool-solid-size>.bar").width());
                            let n = parseInt(t / $("#tool-solid-size>.bar").width() * 100)
                                , i = 1;
                            i = 0 == n ? 1 : n <= 33.33 ? Math.ceil(10 / 33.33 * n) : Math.ceil(10 + 10 / 66.66 * (n - 33.33)),
                                api.setStrokeWidth(i, "Line"),
                                $("#tool-solid-size>.bar>.bar-color").css("width", n + "%"),
                                $("#tool-solid-size>.bar>.button").css("left", n + "%")
                        }
                        if (h) {
                            let t = e.pageX - $("#tool-font-size>.bar").offset().left;
                            t < 0 ? t = 0 : t > $("#tool-font-size>.bar").width() && (t = $("#tool-font-size>.bar").width());
                            let n = parseInt(t / $("#tool-font-size>.bar").width() * 100)
                                , i = 1;
                            i = 0 == n ? 12 : Math.ceil(12 + .18 * n),
                                api.setFontSize(i),
                                $("#tool-font-size>.bar>.bar-color").css("width", n + "%"),
                                $("#tool-font-size>.bar>.button").css("left", n + "%")
                        }
                        if (m) {
                            let t = e.pageX - $("#tool-font-opacity>.bar").offset().left;
                            t < 0 ? t = 0 : t > $("#tool-font-opacity>.bar").width() && (t = $("#tool-font-opacity>.bar").width());
                            let n = parseInt(t / $("#tool-font-opacity>.bar").width() * 100)
                                , i = 25;
                            i = 0 == n ? 25 : Math.ceil(25 + .75 * n),
                                api.setOpactity(i),
                                $("#tool-font-opacity>.bar>.bar-color").css("width", n + "%"),
                                $("#tool-font-opacity>.bar>.button").css("left", n + "%")
                        }
                        if (v) {
                            let t = e.pageX - $("#tool-eraser-size>.bar").offset().left;
                            t < 0 ? t = 0 : t > $("#tool-eraser-size>.bar").width() && (t = $("#tool-eraser-size>.bar").width());
                            let n = parseInt(t / $("#tool-eraser-size>.bar").width() * 100)
                                , i = 5;
                            i = 0 == n ? 5 : Math.ceil(5 + .15 * n),
                                api.setStrokeWidth(i, "Eraser"),
                                $("#tool-eraser-size>.bar>.bar-color").css("width", n + "%"),
                                $("#tool-eraser-size>.bar>.button").css("left", n + "%")
                        }
                    }
                }),
                $(document).mouseup(function () {
                    u && (u = !1),
                        p && (p = !1),
                        h && (h = !1),
                        m && (m = !1),
                        v && (v = !1)
                }),
                $(document).bind("mousedown", function (e) {
                    f && (f = !1,
                        $("audio").each(function () {
                            $(this).get(0).play()
                        }));
                    var n = $(e.target);
                    t.room.fastVideoShow && 0 == n.closest(".multi-video").length && t.room.digstRefresh(() => {
                        t.room.fastVideoShow = !1
                    }
                    ),
                        t.room.fastAudioShow && 0 == n.closest(".audio-yangshengqi").length && t.room.digstRefresh(() => {
                            t.room.fastAudioShow = !1
                        }
                        ),
                        0 == n.closest(".user-list-right-btn-area").length && $(".user-list-right-btn-area ").hide(),
                        0 == n.closest(".video-context-menu").length && $(".video-context-menu").hide(),
                        0 == n.closest(".msg-context-menu").length && $(".msg-context-menu").hide(),
                        0 == n.closest(".more-icon").length && ($(".more-icon").removeClass("active"),
                            $(".more-icon .more-area").hide()),
                        0 == n.closest(".layout-icon").length && $(".layout-icon .more-area").hide(),
                        0 == n.closest(".tools").length && $(".drop-down-content").removeAttr("style")
                }),
                $(".drop-down>a").click(function () {
                    let e = $(this).parents(".drop-down");
                    e.siblings().find(".drop-down-content").removeAttr("style"),
                        e.find(".drop-down-content").height() > 0 ? e.find(".drop-down-content").removeAttr("style") : e.find(".drop-down-content").css("height", "auto")
                }),
                $("textarea").keydown(function (e) {
                    "13" != e.keyCode || e.shiftKey || (e.preventDefault(),
                        t.room.sendMsg())
                }),
                $("#color").spectrum({
                    allowEmpty: !0,
                    color: "#2f3643",
                    showInput: !0,
                    appendTo: "#color-area",
                    containerClassName: "full-spectrum",
                    showInitial: !0,
                    showPalette: !0,
                    showSelectionPalette: !0,
                    showAlpha: !0,
                    cancelText: n.instant("room.cancel"),
                    chooseText: n.instant("room.confirm"),
                    maxPaletteSize: 10,
                    preferredFormat: "hex",
                    localStorageKey: "spectrum.demo",
                    move: function (e) {
                        b(e)
                    },
                    show: function () { },
                    beforeShow: function () { },
                    hide: function (e) {
                        b(e)
                    },
                    palette: [["rgb(0, 0, 0)", "rgb(67, 67, 67)", "rgb(102, 102, 102)", "rgb(204, 204, 204)", "rgb(217, 217, 217)", "rgb(255, 255, 255)"], ["rgb(152, 0, 0)", "rgb(255, 0, 0)", "rgb(255, 153, 0)", "rgb(255, 255, 0)", "rgb(0, 255, 0)", "rgb(0, 255, 255)", "rgb(74, 134, 232)", "rgb(0, 0, 255)", "rgb(153, 0, 255)", "rgb(255, 0, 255)"], ["rgb(230, 184, 175)", "rgb(244, 204, 204)", "rgb(252, 229, 205)", "rgb(255, 242, 204)", "rgb(217, 234, 211)", "rgb(208, 224, 227)", "rgb(201, 218, 248)", "rgb(207, 226, 243)", "rgb(217, 210, 233)", "rgb(234, 209, 220)", "rgb(221, 126, 107)", "rgb(234, 153, 153)", "rgb(249, 203, 156)", "rgb(255, 229, 153)", "rgb(182, 215, 168)", "rgb(162, 196, 201)", "rgb(164, 194, 244)", "rgb(159, 197, 232)", "rgb(180, 167, 214)", "rgb(213, 166, 189)", "rgb(204, 65, 37)", "rgb(224, 102, 102)", "rgb(246, 178, 107)", "rgb(255, 217, 102)", "rgb(147, 196, 125)", "rgb(118, 165, 175)", "rgb(109, 158, 235)", "rgb(111, 168, 220)", "rgb(142, 124, 195)", "rgb(194, 123, 160)", "rgb(166, 28, 0)", "rgb(204, 0, 0)", "rgb(230, 145, 56)", "rgb(241, 194, 50)", "rgb(106, 168, 79)", "rgb(69, 129, 142)", "rgb(60, 120, 216)", "rgb(61, 133, 198)", "rgb(103, 78, 167)", "rgb(166, 77, 121)", "rgb(91, 15, 0)", "rgb(102, 0, 0)", "rgb(120, 63, 4)", "rgb(127, 96, 0)", "rgb(39, 78, 19)", "rgb(12, 52, 61)", "rgb(28, 69, 135)", "rgb(7, 55, 99)", "rgb(32, 18, 77)", "rgb(76, 17, 48)"]]
                })
        }(),
            t.$on("$viewContentLoaded", function () {
                t.room.changeVideoPartDisplay(!0, !1, !0, !0),
                    window.pcParam = {
                        moveEl: document.getElementById("move"),
                        closeEl: document.getElementById("close"),
                        maximizeEl: document.getElementById("max"),
                        minimizeEl: document.getElementById("min")
                    },
                    window.changeChairman = function () {
                        r.send("changeChairmanControlStatus", "server", "", {
                            isOpen: !0,
                            autoAudio: !1,
                            autoSpeaker: !1,
                            autoRaiseHand: !1,
                            autoRecord: !1,
                            globalSynchronize: !0,
                            manualSynchronize: !1
                        }, "send")
                    }
                    ,
                    window.screenCallback = function (e) {
                        e > 1 && (t.room.hasMultiScreen = !0,
                            t.room.screenNumber = e)
                    }
                    ,
                    window.openOrStopLocalAudio = t.room.openOrStopLocalAudio,
                    window.openerInited = function () {
                        t.room.isMultiScreen = !0,
                            $(".user-video").each(function () {
                                let e = $(this)
                                    , n = e.attr("data-userid")
                                    , i = e.attr("data-videodeviceid")
                                    , r = e.find("span").html();
                                t.room.opener.window.appendVideo(n, r, i)
                            }),
                            t.room.opener.window.calcVideoWidth(),
                            $(".user-video").remove(),
                            t.literally.initWb(),
                            t.room.changeVideoPartDisplay()
                    }
                    ,
                    window.openerClose = function (e) {
                        e.each(function () {
                            let e = $(this);
                            if (e.is(":hidden"))
                                return;
                            let n = e.attr("data-userid")
                                , i = e.attr("data-videodeviceid")
                                , r = e.find("span").html();
                            if (n == t.localUser.userid) {
                                let e = o.getStreamByName(i);
                                if (null != e) {
                                    let n = $(`\n                                <div class="user-video local" data-stream-id="${e.id}" id="${e.name}" data-show="true" data-videoDeviceId="${i}" data-userId="${t.localUser.userid}">\n                                    <div class="user-video-div">\n                                        <video muted  autoplay playsinline></video>\n                                        <span>${r}</span>\n                                    </div>\n                                    <img class="videoCloseBtn"/>\n                                </div>`);
                                    $(".main-panel").append(n),
                                        $(`#${e.name} video`).get(0).srcObject = e.mediaStream,
                                        t.room.changeVideoPartDisplay()
                                } else {
                                    let e = $(`\n                                <div class="user-video local"  data-show="true" data-videoDeviceId="${i}" data-userId="${t.localUser.userid}">\n                                    <div class="user-video-div">\n                                        <video muted  autoplay playsinline></video>\n                                        <span>${r}</span>\n                                    </div>\n                                    <img class="videoCloseBtn" src="img/btn_VideoClose_icon_02.png"/>\n                                </div>`);
                                    $(".main-panel").append(e),
                                        t.room.changeVideoPartDisplay()
                                }
                            } else {
                                let r = a.getParticipantByUserid(n)
                                    , o = a.getParticipantStream(r.participantId, i);
                                if (null != o) {
                                    let n = 1 == r.properties.cameras.length ? r.properties.username : r.properties.cameras[0] == i ? r.properties.username : r.properties.videoForUsername[i]
                                        , s = $(`\n                            <div class="user-video" data-stream-id="${o.id}" data-show="true" data-userId="${r.userid}" data-videoDeviceId="${i}">\n                                <div class="user-video-div">\n                                    <video muted  autoplay playsinline></video>\n                                    <span>${n}</span>\n                                </div>\n                                <img class="videoCloseBtn"/>\n                            </div>`);
                                    $(".main-panel").append(s),
                                        null == a.getParticipantSubsciptionByParticipantIdAndStreamId(r.participantId, o.id) ? t.room.subscribe(r, o) : $(`.main-panel .user-video[data-userId="${r.userid}"][data-videoDeviceId="${i.replace("+", "\\+").replace("-", "\\-")}"] video`).get(0).srcObject = e.find("video").get(0).srcObject,
                                        t.room.changeVideoPartDisplay()
                                } else {
                                    let e = 1 == r.properties.cameras.length ? r.properties.username : r.properties.cameras[0] == i ? r.properties.username : r.properties.videoForUsername[i]
                                        , n = $(`\n                            <div class="user-video" data-userId="${r.userid}" data-videoDeviceId="${i}" data-show="true">\n                                <div class="user-video-div">\n                                    <video muted  autoplay playsinline></video>\n                                    <span>${e}</span>\n                                </div>\n                                <img class="videoCloseBtn"/>\n                            </div>`);
                                    $(".main-panel").append(n),
                                        t.room.changeVideoPartDisplay()
                                }
                            }
                        }),
                            t.room.isMultiScreen = !1
                    }
                    ,
                    window.subsciptionApplyAll = function (e) {
                        let n = e;
                        void 0 != n && n.each(function (e, i) {
                            let r = $(this);
                            if (r.attr("data-userid") != t.localUser.userid) {
                                let e = r.attr("data-userid")
                                    , t = r.attr("data-videodeviceid")
                                    , i = a.getParticipantByUserid(e)
                                    , o = a.getParticipantStream(i.participantId, t);
                                if (null != o) {
                                    let e, t = a.getParticipantSubsciptionByParticipantIdAndStreamId(i.participantId, o.id);
                                    e = n.length <= 4 ? o.subscibeOptions[2] : o.subscibeOptions[0],
                                        t && (t.applyOptions(e),
                                            function (e, t) {
                                                e.srcObject = t,
                                                    e.onloadedmetadata = function () {
                                                        console.error("videoWith:" + this.videoWidth),
                                                            console.error("videoWith:" + this.videoHeight)
                                                    }
                                            }(r.find("video").get(0), o.mediaStream))
                                }
                            }
                        })
                    }
                    ,
                    window.alert = function (e) {
                        t.room.newChatAppend(e + "")
                    }
                    ,
                    window.publishCallback = function (e) {
                        0 == e || 1 == e || alert(e)
                    }
                    ,
                    window.maxWindowCallback = function (e) {
                        t.room.isFullScreen = 0 != e,
                            t.$apply()
                    }
                    ,
                    window.stopScreenShareCallback = function () {
                        null != o.getScreenPublication() && (o.getScreenStream().mediaStream.getVideoTracks()[0].stop(),
                            o.getScreenStream().mediaStream.getAudioTracks()[0] && o.getScreenStream().mediaStream.getAudioTracks()[0].stop(),
                            o.getScreenPublication() && o.getScreenPublication().stop(),
                            o.setScreenPublication(null),
                            t.room.isSharing = !1,
                            t.$apply())
                    }
                    ,
                    window.recordCallback = function (e, n) {
                        if (void 0 == n && (n = !0),
                            console.log(n),
                            0 == e) {
                            let e = 0;
                            t.room.recordCallbackValue = 0,
                                $(".record-area").css("display", "flex"),
                                t.room.interval = setInterval(function () {
                                    e += 1;
                                    let i = parseInt(e / 3600);
                                    i < 10 && (i = "0" + i);
                                    let r = parseInt(e % 3600 / 60);
                                    r < 10 && (r = "0" + r);
                                    let o = parseInt(e % 60);
                                    o < 10 && (o = "0" + o),
                                        n ? t.room.digstRefresh(() => {
                                            t.room.recordTime = i + ":" + r + ":" + o
                                        }
                                        ) : t.room.recordTime = i + ":" + r + ":" + o
                                }, 1e3)
                        } else
                            1 == e && ($(".record-area").hide(),
                                t.room.recordCallbackValue = 1,
                                clearInterval(t.room.interval),
                                n ? t.room.digstRefresh(() => {
                                    t.room.recordTime = "00:00:00"
                                }
                                ) : t.room.recordTime = "00:00:00")
                    }
                    ,
                    window.checkDevicePromise = ve,
                    ve().then(() => {
                        createToken(B, F, "presenter", t.localUser.properties, function (e) {
                            conference.join(e).then(e => {
                                t.room.initMeetingMsg(),
                                    navigator.mediaDevices.ondevicechange = function (e) {
                                        ve().then(() => {
                                            t.room.settingApply()
                                        }
                                        )
                                    }
                                    ,
                                    t.room.digstRefresh(() => {
                                        t.room.isConnected = !0
                                    }
                                    ),
                                    r.setIsJoined(!0),
                                    t.literally.getMeetingFile(),
                                    t.room.checkIsWebView() && pc.getScreens(),
                                    t.localUser.participantid = e.self.id,
                                    o.setLocalUser(t.localUser, !0);
                                let n = !1
                                    , i = !1;
                                if (2 != t.localUser.properties.state && 3 != t.localUser.properties.state || (n = !0),
                                    1 != t.localUser.properties.state && 3 != t.localUser.properties.state || (i = !0),
                                    n || i || (t.room.showSnail = !1,
                                        t.$applyAsync()),
                                    n || i) {
                                    if (n) {
                                        let e = getArrIndex(t.room.videoQualities, t.localUser.videoInputDefault, "videoDeviceId")
                                            , i = {
                                                width: b[1].width,
                                                height: b[1].height,
                                                frame: 15
                                            };
                                        if (-1 != e) {
                                            let n = t.room.videoQualities[e]
                                                , r = b[n.quality];
                                            i = {
                                                width: r.width,
                                                height: r.height,
                                                frame: parseInt(n.frame)
                                            }
                                        }
                                        n = {
                                            deviceId: {
                                                exact: t.localUser.videoInputDefault.substr(0, t.localUser.videoInputDefault.length - t.localUser.userid.length)
                                            }
                                        }
                                    }
                                    navigator.mediaDevices.getUserMedia({
                                        audio: i,
                                        video: n
                                    }).then(e => {
                                        e.getTracks()[0].stop(),
                                            t.room.showSnail = !1,
                                            t.localUser.properties.state >= 2 && t.room.openDefaultVideo(),
                                            t.$applyAsync()
                                    }
                                    ).catch(e => {
                                        t.room.showSnail = !1,
                                            t.localUser.properties.state >= 2 && t.room.openDefaultVideo(),
                                            t.$applyAsync()
                                    }
                                    )
                                }
                                if (t.localUser.properties.role == N.chairman) {
                                    let e = {};
                                    r.send("applyChairman", "others", "", e, "send"),
                                        t.room.checkChairmanPwd(!0, "", !0)
                                }
                                let a = e.participants;
                                if (t.room.updateRoomParticipants(a),
                                    t.room.checkIsWebView())
                                    var s = setTimeout(function () {
                                        e.remoteStreams.forEach(e => {
                                            "mixed" !== e.source.audio && t.room.addParticipantStream(e)
                                        }
                                        ),
                                            clearTimeout(s)
                                    }, 100);
                                else {
                                    e.remoteStreams.forEach(e => {
                                        "mixed" !== e.source.audio && t.room.addParticipantStream(e)
                                    }
                                    )
                                }
                                let l = JSON.parse(e.messageList);
                                for (let e = 0; e < l.length; e++) {
                                    let n = l[e];
                                    if ("chairmanControlStatus" == n.name)
                                        t.room.initChairmanControlStatus(n.body);
                                    else if ("meetingStatus" == n.name) {
                                        let e = n.body
                                            , i = e.fileType
                                            , r = e.index
                                            , o = e.total;
                                        if ("whiteboard" == i)
                                            t.literally.openWhiteBoard(r, !1, o);
                                        else {
                                            let n = e.fileid
                                                , i = e.step || 0;
                                            t.literally.getMeetingFile(n, !1, "add", r, !1, i)
                                        }
                                    }
                                }
                            }
                                , e => {
                                    e && "overlimit" == e.message ? alert(n.instant("errorMsg.1008")) : e && "overDeadLine" == e.message ? alert(n.instant("errorMsg.1009")) : alert(n.instant("errorMsg.1010"))
                                }
                            )
                        }, t.room.mediaServer),
                            conference.addEventListener("disconnected", () => {
                                r.setIsJoined(!1),
                                    alert(n.instant("errorMsg.1011"))
                            }
                            ),
                            conference.addEventListener("serverdisconnected", () => {
                                r.getIsJoined() && alert(n.instant("errorMsg.1012"))
                            }
                            ),
                            conference.addEventListener("streamadded", e => {
                                e.stream.attributes && "live" == e.stream.attributes.type ? t.room.startLive(e.stream) : t.room.addParticipantStream(e.stream)
                            }
                            ),
                            conference.addEventListener("messagereceived", e => {
                                console.error("messagereceived", e.message),
                                    r.setIsJoined(!0);
                                let i = s.str2json(e.message);
                                if ("kickParticipant" === i.name && (r.setIsJoined(!1),
                                    conference.leave(),
                                    t.room.stopShareDesktop(),
                                    alert(n.instant("errorMsg.1013")),
                                    t.room.checkIsWebView() ? pc.closeWindow() : window.location.href = "/"),
                                    "participantsProperties" === i.name)
                                    t.room.updateRoomParticipants(i.body);
                                else if ("changeUserProperties" === i.name)
                                    i.body.properties = JSON.stringify(i.body.properties),
                                        t.room.updateRoomParticipant(i.body, i.fromID);
                                else if ("publishUserVideo" === i.name)
                                    t.room.publishUserVideo(i.body, i.fromID);
                                else if ("unPublishUserVideo" === i.name)
                                    t.room.unPublishUserVideo(i.body, i.fromID);
                                else if ("publishSuccess" === i.name)
                                    t.room.publishSuccess(i.body, i.fromID);
                                else if ("getWbSnapshot" === i.name)
                                    t.literally.draw(i.body),
                                        t.literally.canvasToimg(),
                                        t.room.syncUserVideoToSecondLive();
                                else if ("wbOperation" == i.name && api.lc)
                                    t.room.dynamicPPTCanDraw = i.body.dynamicPPTCanDraw,
                                        t.$applyAsync(),
                                        api.handleMsg(i.body),
                                        t.literally.canvasToimg();
                                else if ("openFile" == i.name) {
                                    let e = i.body.fileid
                                        , n = i.body.index
                                        , r = i.body.controlType || "page"
                                        , o = i.body.step || 0
                                        , a = getArrIndex(t.literally.roomFiles, e, "fileid");
                                    if (a > -1)
                                        if ("page" == r)
                                            t.literally.openFile(t.literally.roomFiles[a], n, !1, void 0, !0, o);
                                        else {
                                            let e = i.body.currentTime
                                                , o = i.body.playStatus
                                                , s = i.body.domId
                                                , l = i.body.mediaType;
                                            t.literally.openFile(t.literally.roomFiles[a], n, !1, void 0, !0, 0, e, o, r, s, l)
                                        }
                                } else if ("openWhiteBoard" == i.name) {
                                    let e = i.body.index
                                        , n = i.body.total;
                                    t.literally.openWhiteBoard(e, !1, n)
                                } else if ("refreshFile" == i.name) {
                                    let e = i.body.fileid
                                        , n = i.body.type;
                                    t.literally.getMeetingFile(e, !1, n)
                                } else if ("chairmanControlStatus" == i.name) {
                                    let e = i.body;
                                    t.room.initChairmanControlStatus(e)
                                } else if ("changeChairmanControlStatus" == i.name) {
                                    let e = i.body;
                                    t.room.changeChairmanControlStatus(e)
                                } else if ("disableAllAudio" == i.name)
                                    t.room.executeDisableAllAudio();
                                else if ("meetingStatus" == i.name) {
                                    let e = i.body;
                                    if (0 == Object.keys(e).length)
                                        t.literally.initWb();
                                    else {
                                        let n = e.fileType
                                            , i = e.index
                                            , r = e.total;
                                        if ("whiteboard" == n)
                                            t.literally.openWhiteBoard(i, !1, r);
                                        else {
                                            let n = e.fileid;
                                            t.literally.getMeetingFile(n, !1, "add", i, !1)
                                        }
                                    }
                                } else if ("applySpeaker" == i.name) {
                                    let e = i.fromID
                                        , r = i.body.isLocal
                                        , o = a.getParticipantByUserid(e).properties.username;
                                    "apply" == i.body.permission ? r ? t.room.newChatAppend(o + n.instant("room.applySpeaker")) : t.localUser.properties.role != t.room.roles.chairman && t.room.newChatAppend(n.instant("room.chairmanGiveSpeaker_pre") + o + n.instant("room.chairmanGiveSpeaker_suf")) : "cancel" == i.body.permission && (r ? t.room.newChatAppend(o + n.instant("room.cancelSpeaker")) : t.localUser.properties.role != t.room.roles.chairman && t.room.newChatAppend(n.instant("room.chairmanTakeSpeaker_pre") + o + n.instant("room.chairmanTakeSpeaker_suf")))
                                } else if ("applyChairman" == i.name) {
                                    let e = i.fromID
                                        , r = i.body.isLocal
                                        , o = a.getParticipantByUserid(e).properties.username;
                                    "apply" == i.body.permission && (r ? t.room.newChatAppend(o + n.instant("room.applyChairman")) : t.localUser.properties.role != t.room.roles.chairman && t.room.newChatAppend(n.instant("room.chairmanChangedTo") + o)),
                                        t.room.checkIsChairman()
                                } else if ("applyPermission" == i.name) {
                                    let e = i.body.type
                                        , n = i.body.permission;
                                    "applyChairman" == e ? t.room.checkChairmanPwd(!1, n, !1) : "applySpeaker" == e && t.room.applySpeaker(!1, n)
                                } else if ("forceLeave" == i.name)
                                    conference.leave(),
                                        alert(n.instant("errorMsg.1014")),
                                        t.room.checkIsWebView() ? pc.closeWindow() : (window.opener = null,
                                            window.open("", "_self"),
                                            window.close());
                                else if ("audioPublishOrUnpublish" == i.name)
                                    t.room.openOrStopLocalAudio(void 0, !1);
                                else if ("chat" == i.name) {
                                    let e = i.fromID
                                        , n = a.getParticipantByUserid(e);
                                    t.room.chatAppend(i.body.message, "msg", "others", "", n)
                                } else if ("cancelRaiseHand" == i.name)
                                    t.room.isRaiseHand = !1,
                                        t.$apply();
                                else if ("raiseHand" == i.name) {
                                    let e = i.fromID
                                        , n = a.getParticipantByUserid(e);
                                    t.room.raiseHandUserList.push(n),
                                        t.room.participants.forEach(e => {
                                            e.participantId == n.participantId && (e.isRaiseHand = !0)
                                        }
                                        ),
                                        t.room.chairmanControlStatus.raiseHandUserList = t.room.raiseHandUserList,
                                        r.send("changeChairmanControlStatus", "server", "", t.room.chairmanControlStatus, "send"),
                                        t.$apply()
                                } else
                                    "controlChairman" == i.name && t.room.controlChairman(i.body);
                                delete i
                            }
                            ),
                            conference.addEventListener("participantjoined", e => {
                                console.error("participantjoined", JSON.stringify(e.participant.userId)),
                                    "huikong" != e.participant.userId ? (a.addParticipant(e.participant.userId, e.participant.id, JSON.parse(e.participant.properties)),
                                        e.participant.msgType = "join",
                                        t.room.updateRoomParticipant(e.participant, e.participant.userId)) : t.room.hasHuikong = !0
                            }
                            ),
                            conference.addEventListener("participantleft", e => {
                                if (console.error("participantleft", JSON.stringify(e.participant.userId)),
                                    "huikong" == e.participant.userId)
                                    return void (t.room.hasHuikong = !1);
                                let i = getArrIndex(t.room.raiseHandUserList, e.participant.userId, "userid");
                                -1 != i && t.room.raiseHandUserList.splice(i, 1);
                                let r = a.removeParticipantByUserid(e.participant.userId)
                                    , o = r.properties.cameras[0]
                                    , s = $(`.user-video[data-userId="${e.participant.userId}"]`).length;
                                t.room.userVideoCounting -= s,
                                    $(`.user-video[data-userId="${e.participant.userId}"]`).remove(),
                                    t.room.isMultiScreen && o && (t.room.opener.window.removeVideo(r.userid, o),
                                        t.room.opener.window.calcVideoWidth()),
                                    1 != t.room.chairmanControlStatus.isOpen || 1 != t.room.chairmanControlStatus.manualSynchronize && 1 != t.room.chairmanControlStatus.globalSynchronize ? t.room.changeVideoPartDisplay(!1, !0, !1) : t.localUser.properties.role == t.room.roles.chairman ? t.room.changeVideoPartDisplay(!1, !0, !0) : t.room.changeVideoPartDisplay(!1, !0, !1),
                                    t.room.unPublishUserVideo(void 0, e.participant.userId),
                                    null != r && r.properties.role != N.stealth && t.room.newChatAppend(r.properties.username + n.instant("room.leaveMeeting"))
                            }
                            ),
                            a.addEventListener("update-participants", () => {
                                t.$apply(() => {
                                    t.room.participants = a.getParticipants()
                                }
                                )
                            }
                            ),
                            window.onbeforeunload = function (e) {
                                conference.leave(),
                                    r.setIsJoined(!1)
                            }
                    }
                    )
            })
    }
    ]),
    wy_room.controller("loginController", ["$rootScope", "$scope", "$translate", "$state", "joinInfoService", "conferenceService", "recordService", function (e, t, n, i, r, o, a) {
        let s = getParameterByName("userid")
            , l = getParameterByName("serial")
            , c = getParameterByName("username")
            , u = getParameterByName("invisible")
            , d = getParameterByName("joinRole");
        0 == s.length ? null != (s = window.localStorage.getItem("userid")) && 0 != s.length || (s = $.createRadomUserid(8)) : window.localStorage.setItem("userid", s),
            0 == l.length ? l = window.localStorage.getItem("serial") : window.localStorage.setItem("serial", l),
            0 == c.length ? c = window.localStorage.getItem("username") : window.localStorage.setItem("username", c),
            0 == u.length ? null != (u = window.localStorage.getItem("invisible")) && 0 != u.length || (u = 0) : window.localStorage.setItem("invisible", u),
            0 == d.length ? null != (d = window.localStorage.getItem("joinRole")) && 0 != d.length || (d = "") : window.localStorage.setItem("joinRole", d);
        let p = window.localStorage.getItem("system-language");
        window.localStorage.removeItem("serial"),
            window.localStorage.removeItem("userid"),
            window.localStorage.removeItem("username"),
            window.localStorage.removeItem("system-language"),
            window.localStorage.setItem("serial", l),
            window.localStorage.setItem("userid", s),
            window.localStorage.setItem("username", c),
            window.localStorage.setItem("system-language", p);
        let h = window.localStorage.getItem("serials");
        if (null == h || 0 == h.length)
            (h = []).push(l),
                window.localStorage.setItem("serials", JSON.stringify(h));
        else {
            -1 == getArrIndex(h = JSON.parse(h), l) && (h.push(l),
                window.localStorage.setItem("serials", JSON.stringify(h)))
        }
        null != o.getConference() && o.clearConference(),
            o.initConference(),
            t.room = {
                joinInfo: {},
                userpwd: "",
                nickname: "",
                isShow: !1,
                needNickname: !1,
                enterEvent: function (e) {
                    13 == (window.event ? e.keyCode : e.which) && (0 == t.room.nickname.length ? $("#username").focus() : t.room.joinInfo.confuserpwd.length > 0 && 0 == t.room.userpwd.length ? $("#pwd").focus() : t.room.checkLogin())
                },
                checkLogin: function () {
                    if (t.room.needNickname) {
                        if (0 == t.room.nickname.length)
                            return alert("请输入昵称"),
                                !1;
                        r.updateJoinInfo("username", t.room.nickname)
                    }
                    t.room.userpwd == t.room.joinInfo.confuserpwd ? i.go("room") : alert("密码错误")
                },
                getMeetingInfo: function () {
                    t.room.getUserInfo().then(e => {
                        let n = {
                            isRegist: 0,
                            videoInputDefault: "",
                            audioInputDefault: "",
                            audioOutputDefault: "",
                            language: p,
                            videoQualities: [],
                            volume: 100,
                            needVideoInputs: [],
                            excitation: 0,
                            voiceAnalyse: 0,
                            eduMode: 0
                        };
                        if (-1 != e.result) {
                            let t = e.user.settings;
                            null != t && (t = JSON.parse(t),
                                n = {
                                    videoInputDefault: t.videoInputDefault,
                                    audioInputDefault: t.audioInputDefault,
                                    audioOutputDefault: t.audioOutputDefault,
                                    language: p,
                                    videoQualities: t.videoQualities,
                                    volume: t.volume,
                                    needVideoInputs: t.needVideoInputs,
                                    excitation: void 0 != t.excitation ? parseInt(t.excitation) : 0,
                                    voiceAnalyse: void 0 != t.voiceAnalyse ? parseInt(t.voiceAnalyse) : 0,
                                    eduMode: void 0 != t.eduMode ? parseInt(t.eduMode) : 0
                                }),
                                n.isRegist = 1
                        }
                        new Promise((e, t) => {
                            $.ajax({
                                url: webAPI + getMeetingAPI,
                                type: "get",
                                dataType: "json",
                                data: {
                                    serial: l,
                                    userid: s
                                },
                                success: function (t) {
                                    e(t)
                                },
                                error: function () {
                                    alert("checkMeeting error")
                                }
                            })
                        }
                        ).then(e => {
                            if (0 == e.result) {
                                let o = e.meeting
                                    , a = {
                                        meetingname: o.meetingname,
                                        chairmanpwd: o.chairmanpwd,
                                        confuserpwd: o.confuserpwd,
                                        serial: o.serial,
                                        roomid: o.roomid,
                                        createUserid: o.userid,
                                        companyid: o.companyid,
                                        sig: o.sig,
                                        userid: s,
                                        username: c,
                                        docServer: e.docServer,
                                        mediaServer: e.mediaServer,
                                        useCustomRoomPic: e.useCustomRoomPic,
                                        roomPicPath: o.customRoomPicPath,
                                        exitRoomUrl: e.exitRoomUrl,
                                        np1WebUrl: e.np1WebUrl,
                                        chairmanVersion: o.chairmanversion,
                                        autoAudio: o.autoAudio,
                                        autoSpeaker: o.autoSpeaker,
                                        autoRaiseHand: o.autoRaiseHand,
                                        autoRecord: o.autoRecord,
                                        globalSynchronize: o.globalSynchronize,
                                        manualSynchronize: o.manualSynchronize,
                                        settings: n,
                                        newstarttime: o.newstarttime,
                                        invisible: u,
                                        joinRole: d
                                    };
                                t.$apply(() => {
                                    t.room.isShow = !0,
                                        t.room.needNickname = !1,
                                        t.room.joinInfo = a
                                }
                                ),
                                    r.setJoinInfo(t.room.joinInfo);
                                const l = "chrome/";
                                let p = window.navigator.userAgent.toLowerCase();
                                79 == parseInt(p.substring(p.indexOf(l) + l.length, p.indexOf(".", p.indexOf(l)))) && alert("Sorry,由于Chrome79版本内核bug，需要您点击确定后才能接收音频。"),
                                    IsPC() ? i.go("room") : i.go("mobile")
                            } else
                                alert("会议信息获取失败")
                        }
                        )
                    }
                    )
                },
                checkMeeting: function () { },
                getUserInfo: function () {
                    return new Promise((e, t) => {
                        $.ajax({
                            url: webAPI + getUserInfoAPI,
                            type: "get",
                            dataType: "json",
                            data: {
                                userid: s
                            },
                            success: function (t) {
                                e(t)
                            },
                            error: function () {
                                alert("checkMeeting error")
                            }
                        })
                    }
                    )
                }
            },
            t.room.getMeetingInfo()
    }
    ]),
    wy_room.controller("mobileController", ["$rootScope", "$scope", "$translate", "$state", "conferenceService", "userStateService", "participantService", "messageService", "joinInfoService", "$compile", function (e, t, n, i, r, o, a, s, l, c) {
        history.pushState(null, null, document.URL),
            window.addEventListener("popstate", function () {
                history.pushState(null, null, document.URL)
            }),
            conference = r.getConference();
        let u = document.getElementById("dynamicPPT")
            , d = 0
            , p = 0;
        const h = {
            mobile: {
                presenter: "img/mobile/normal_user_phone.png",
                chairman: "img/mobile/host_user_phone.png",
                speaker: "img/mobile/main_speaker_phone.png",
                applySpeaker: "img/ApplyMainSpeaker_pc.png"
            },
            cam: {
                on: "img/mobile/remote_video_on.png",
                off: "img/mobile/remote_video_off.png"
            },
            camBottom: {
                on: "img/mobile/video_on.png",
                off: "img/mobile/video_off.png"
            },
            mic: {
                on: "img/mobile/remote_audio_on.png",
                off: "img/mobile/remote_audio_off.png"
            },
            micBottom: {
                on: "img/mobile/audio_on.png",
                off: "img/mobile/audio_off.png"
            }
        }
            , f = 1280
            , m = 720
            , g = 15
            , v = {
                presenter: "presenter",
                chairman: "chairman",
                speaker: "speaker",
                applySpeaker: "applySpeaker"
            };
        let y = window.localStorage.getItem("language")
            , b = l.getJoinInfo()
            , w = b.userid
            , S = b.roomid
            , C = b.serial
            , x = b.username
            , T = b.companyid
            , k = b.docServer
            , P = b.mediaServer
            , E = b.sig;
        if (0 == Object.keys(b).length)
            return void i.go("login");
        t.room = {
            language: y,
            docServer: k,
            mediaServer: P,
            name: b.meetingname,
            serial: C,
            createUserid: b.createUserid,
            userpwd: "",
            chairmanpwd: b.chairmanpwd,
            sig: E,
            companyid: T,
            message: "",
            tabCount: 2,
            currentTab: 1,
            titleShow: !0,
            swiper: null,
            userListShow: !1,
            moreFunctionShow: !1,
            docListShow: !1,
            msgListShow: !1,
            canSwipe: !0,
            showChairmanInput: !1,
            showLocalControl: !1,
            localControlUser: null,
            loading: !1,
            roles: v,
            currentVideoCount: 0,
            toast: null,
            roles: v,
            popUpsTitle: "",
            popUpsContent: "",
            deleteDocument: !1,
            chairmanControlStatus: {},
            chairmanControlStatusCopy: {},
            isRaiseHand: !1,
            raiseHand: function () {
                t.room.isRaiseHand || (t.room.isRaiseHand = !0,
                    r.send("raiseHand", t.room.chairmanControlStatus.chairmanUserId, "", {}, "send"))
            },
            inviteOthers: function () {
                t.room.meetingNewURL = window.location.origin + "/" + t.room.serial + "/" + E;
                const e = document.createElement("input");
                e.style.display = "hidden",
                    document.body.appendChild(e),
                    e.setAttribute("value", t.room.meetingNewURL),
                    e.select(),
                    document.execCommand("copy") && (document.execCommand("copy"),
                        t.room.toast = {
                            text: n.instant("room.copyUrl"),
                            type: 4,
                            timeout: 1e3,
                            max: 1
                        }),
                    document.body.removeChild(e)
            },
            initChairmanControlStatus: function (e) {
                if (t.room.chairmanControlStatus = e,
                    1 == e.isOpen && (1 == t.room.chairmanControlStatus.globalSynchronize || 1 == t.room.chairmanControlStatus.manualSynchronize))
                    for (let n = 0; n < e.userVideos.length; n++) {
                        let i = e.userVideos[n];
                        if ("video" == i.type) {
                            if (0 == $(".video-area").children(`[data-userid="${i.userId}"][data-videodeviceid="${i.videoDeviceId}"]`).length)
                                if (i.userId == t.localUser.userid)
                                    ;
                                else {
                                    let e = a.getParticipantByUserid(i.userId);
                                    t.localUser.openOrStopRemoteVideo(e, i.videoDeviceId, !1)
                                }
                            $(`.video-user[data-userid="${i.userId}"][data-videodeviceid="${i.videoDeviceId}"]`).attr("data-index", i.dataIndex)
                        }
                    }
                t.room.chairmanControlStatusCopy = angular.copy(t.room.chairmanControlStatus)
            },
            changeChairmanControlStatus: function (e) {
                if (t.room.chairmanControlStatus = e,
                    1 == e.isOpen && (0 == e.autoRaiseHand && (t.room.isRaiseHand = !1),
                        1 == t.room.chairmanControlStatus.globalSynchronize || 1 == t.room.chairmanControlStatus.manualSynchronize)) {
                    for (let n = 0; n < e.userVideos.length; n++) {
                        let i = e.userVideos[n];
                        if ("video" == i.type) {
                            if (0 == $(".video-area").children(`[data-userid="${i.userId}"][data-videodeviceid="${i.videoDeviceId}"]`).length)
                                if (i.userId == t.localUser.userid)
                                    t.localUser.openOrStopLocalVideo(!1, i.videoDeviceId, !0, !0, "", !1);
                                else {
                                    let e = a.getParticipantByUserid(i.userId);
                                    t.localUser.openOrStopRemoteVideo(e, i.videoDeviceId, !1)
                                }
                        }
                        $(`.video-user[data-userid="${i.userId}"][data-videodeviceid="${i.videoDeviceId}"]`).attr("data-index", i.dataIndex),
                            t.room.refreshSubscribe($(`.video-user[data-userid="${i.userId}"][data-videodeviceid="${i.videoDeviceId}"]`))
                    }
                    $(".video-area").children(".video-user").each(function () {
                        let n = $(this)
                            , i = n.attr("data-userid")
                            , r = n.attr("data-videodeviceid");
                        if (-1 == getArrIndexBy2Params(e.userVideos, i, "userId", r, "videoDeviceId"))
                            if (i == t.localUser.userid)
                                t.localUser.openOrStopLocalVideo(!1, r, !0, !1, "", !1);
                            else {
                                let e = a.getParticipantByUserid(i);
                                t.localUser.openOrStopRemoteVideo(e, r, !1)
                            }
                    })
                }
                t.room.chairmanControlStatusCopy = angular.copy(t.room.chairmanControlStatus)
            },
            popUpsShow: function (e, i, r) {
                if ("file" == e) {
                    if (t.localUser.properties.role != t.room.roles.chairman && t.localUser.properties.role != t.room.roles.speaker)
                        return void t.room.newChatAppend(n.instant("room.cannotDelDocument"), "deleteFileClick");
                    t.room.leaveTheMeeting = !1,
                        t.room.shareCommitShow = !1,
                        t.room.deleteDocument = !0,
                        t.room.fileId = i,
                        t.room.$event = r,
                        t.room.popUpsTitle = n.instant("room.popTileDel"),
                        t.room.popUpsContent = n.instant("room.popContentDel")
                }
            },
            popUpsShowConfirm: function () {
                1 == t.room.deleteDocument && (t.room.deleteDocument = !1,
                    t.literally.deleteMeetingFile(t.room.fileId, t.room.$event),
                    t.room.fileId = "",
                    t.room.$event = "")
            },
            popUpsShowCancel: function () {
                1 == t.room.deleteDocument && (t.room.deleteDocument = !1)
            },
            sendMsg: function () {
                if (0 == t.room.message.length)
                    return;
                let e = {
                    message: HtmlUtil.htmlEncode(t.room.message),
                    type: "txt"
                };
                r.send("chat", "others", "", e, "send"),
                    t.room.chatAppend(HtmlUtil.htmlEncode(t.room.message), "msg", "own", "others", null),
                    t.room.message = ""
            },
            showDocList: function () {
                if (t.room.docListShow = !t.room.docListShow,
                    t.room.docListShow)
                    t.room.swiper.allowTouchMove = !1;
                else {
                    if (t.literally.toolBtnShow)
                        return;
                    t.room.swiper.allowTouchMove = !0
                }
            },
            showMsg: function () {
                if (t.room.msgListShow = !t.room.msgListShow,
                    t.room.msgListShow)
                    t.room.swiper.allowTouchMove = !1;
                else {
                    if (t.literally.toolBtnShow)
                        return;
                    t.room.swiper.allowTouchMove = !0
                }
            },
            showUserList: function () {
                if (t.room.userListShow = !t.room.userListShow,
                    t.room.userListShow)
                    t.room.swiper.allowTouchMove = !1;
                else {
                    if (t.literally.toolBtnShow)
                        return;
                    t.room.swiper.allowTouchMove = !0
                }
            },
            showMoreFunctionArea: function () {
                if (t.room.moreFunctionShow = !t.room.moreFunctionShow,
                    t.room.moreFunctionShow)
                    t.room.swiper.allowTouchMove = !1;
                else {
                    if (t.literally.toolBtnShow)
                        return;
                    t.room.swiper.allowTouchMove = !0
                }
            },
            syncWhiteBoard: function () {
                if (null != t.literally.lastFile) {
                    let e = {
                        fileid: t.literally.lastFile.fileid,
                        index: t.literally.lastIndex
                    };
                    r.send("openFile", "others", "", e, "send");
                    let n = {
                        fileType: t.literally.currentPageType,
                        total: t.literally.totalNum,
                        index: t.literally.currentNum,
                        fileid: t.literally.lastFile.fileid
                    };
                    r.send("changeMeetingStatus", "server", "", n, "send")
                } else {
                    let e = {
                        index: t.literally.filePage.whiteboard.currentPage,
                        total: t.literally.filePage.whiteboard.totalPage
                    };
                    r.send("openWhiteBoard", "others", "", e, "send");
                    let n = {
                        fileType: t.literally.currentPageType,
                        total: t.literally.totalNum,
                        index: t.literally.currentNum,
                        fileid: ""
                    };
                    r.send("changeMeetingStatus", "server", "", n, "send")
                }
            },
            applyPermission: function (e, t, n) {
                let i = {
                    type: t,
                    permission: n
                };
                r.send("applyPermission", e.userid, "", i, "send")
            },
            applySpeaker: function (e = !0, i = "apply") {
                t.localUser.properties.role != v.chairman && (e ? (t.localUser.properties.role == v.presenter ? (i = "apply",
                    $(".function-apply-speaker").html(n.instant("room.cancelzhujiang")),
                    t.localUser.properties.role = v.speaker,
                    t.localRoleImg = h.mobile[t.localUser.properties.role],
                    t.room.syncWhiteBoard()) : t.localUser.properties.role == v.speaker && (i = "cancel",
                        $(".function-apply-speaker").html(n.instant("room.applyzhujiang")),
                        t.localUser.properties.role = v.presenter,
                        t.localRoleImg = h.mobile[t.localUser.properties.role]),
                    t.literally.toolBtnShow = !1) : "apply" == i ? ($(".function-apply-speaker").html(n.instant("room.cancelzhujiang")),
                        t.room.digstRefresh(() => {
                            t.literally.toolBtnShow = !1,
                                t.localUser.properties.role = v.speaker,
                                t.localRoleImg = h.mobile[t.localUser.properties.role]
                        }
                        ),
                        t.room.syncWhiteBoard()) : "cancel" == i && ($(".function-apply-speaker").html(n.instant("room.applyzhujiang")),
                            t.room.digstRefresh(() => {
                                t.literally.toolBtnShow = !1,
                                    t.localUser.properties.role = v.presenter,
                                    t.localRoleImg = h.mobile[t.localUser.properties.role]
                            }
                            )),
                    o.setLocalUser(t.localUser),
                    r.send("applySpeaker", "others", "", {
                        permission: i,
                        isLocal: e
                    }, "send"))
            },
            checkChairmanPwd: function (e = !0, i) {
                if (e)
                    if (t.room.userpwd == t.room.chairmanpwd) {
                        $("#apply-zhujiang").html(n.instant("room.applyzhujiang")),
                            t.room.showChairmanInput = !1,
                            t.localUser.properties.role = v.chairman,
                            t.localRoleImg = h.mobile[t.localUser.properties.role],
                            o.setLocalUser(t.localUser);
                        let i = {
                            isLocal: e,
                            permission: "apply"
                        };
                        r.send("applyChairman", "others", "", i, "send"),
                            t.room.syncWhiteBoard()
                    } else
                        t.room.toolTipShow(() => { }
                        );
                else if ("apply" == i) {
                    $("#apply-zhujiang").html(n.instant("room.applyzhujiang")),
                        t.room.digstRefresh(() => {
                            t.room.showChairmanInput = !1,
                                t.localUser.properties.role = v.chairman,
                                t.localRoleImg = h.mobile[t.localUser.properties.role]
                        }
                        ),
                        o.setLocalUser(t.localUser);
                    let i = {
                        isLocal: e,
                        permission: "apply"
                    };
                    r.send("applyChairman", "others", "", i, "send"),
                        t.room.syncWhiteBoard()
                }
            },
            applySubScribeOption: function (e, t, n) {
                let i = a.getParticipantSubsciptionByParticipantIdAndStreamId(e.participantId, t.id);
                if (null != i) {
                    let e;
                    e = 0 == n.index() ? t.subscibeOptions[2] : t.subscibeOptions[0],
                        console.log(e),
                        i.applyOptions(e)
                }
            },
            calcSubsctibeOption: function (e, n = null) {
                let i = e.capabilities.video.resolutions
                    , r = (i[i.length - 1],
                        i[i.length - 1].height >= i[i.length - 1].width)
                    , o = !1;
                void 0 !== e.isHeightOverWidth && e.isHeightOverWidth != r && (o = !0),
                    e.isHeightOverWidth = r;
                let a = []
                    , s = [];
                for (let e in i)
                    r ? i[e].height >= i[e].width && a.push(i[e]) : i[e].width >= i[e].height && a.push(i[e]);
                e.capabilities.video.frameRates[e.capabilities.video.frameRates.length - 1],
                    e.capabilities.video.bitrateMultipliers[e.capabilities.video.bitrateMultipliers.length - 1],
                    e.capabilities.video.keyFrameIntervals[e.capabilities.video.keyFrameIntervals.length - 1];
                let l = {
                    video: {
                        resolution: a[0]
                    }
                }
                    , c = {
                        video: {
                            resolution: a[a.length - 1]
                        }
                    }
                    , u = c;
                a.length > 2 && (u = {
                    video: {
                        resolution: a[Math.floor(a.length / 2)]
                    }
                }),
                    s.push(l),
                    s.push(u),
                    s.push(c),
                    e.subscibeOptions = s,
                    o && null != n && t.room.applySubScribeOption(n, e, $(`.video-user[data-videoDeviceId="${e.name.replace("+", "\\+").replace("-", "\\-")}"]`).find("video"))
            },
            refreshSubscribe: function (e) {
                if (!e.hasClass("local")) {
                    let n = a.getParticipantStreamByUserId(e.attr("data-userId"), e.attr("data-videoDeviceId"));
                    if (null != n) {
                        let i = a.getParticipantByUserid(e.attr("data-userId"));
                        null != i && t.room.applySubScribeOption(i, n, e)
                    }
                }
            },
            applySubScribeOption: function (e, t, n) {
                let i = a.getParticipantSubsciptionByParticipantIdAndStreamId(e.participantId, t.id);
                if (null != i) {
                    let e;
                    0 == n.attr("data-index") && (e = t.subscibeOptions[1]),
                        0 != n.attr("data-index") && (e = t.subscibeOptions[0]),
                        console.log(e),
                        i.applyOptions(e)
                }
            },
            subscribe: function (e, n) {
                conference.subscribe(n).then(i => {
                    if ("object" == typeof n.attributes)
                        if ("audio" == n.attributes.type) {
                            let i = $(`\n                                <audio data-userId="${e.userid}" data-stream-id="${n.id}" autoplay></audio>\n                            `);
                            i.get(0).srcObject = n.mediaStream,
                                $("#audioArea").append(i),
                                t.room.digstRefresh(() => {
                                    a.updateParticipantConstraints(e.userid, "audio", !0)
                                }
                                ),
                                $(`[data-user-id="${e.userid}"] .audio-btn`).attr("src", h.mic.on)
                        } else if ("video" == n.attributes.type) {
                            i.streamId = n.id,
                                a.addParticipantSubsciptionByParticipantId(e.userid, i);
                            let t, r = $(`.video-user[data-videoDeviceId="${n.name.replace("+", "\\+").replace("-", "\\-")}"]`);
                            if (0 == r.length) {
                                let t = a.getParticipantSubsciptionByParticipantIdAndStreamId(e.participantId, n.id);
                                return void (null != t && (t.stop(),
                                    a.removeParticipantSubsciptionByParticipantIdAndStreamId(e.participantId, n.id)))
                            }
                            t = 0 == r.index() ? n.subscibeOptions[2] : n.subscibeOptions[0],
                                i.applyOptions(t),
                                $(`.video-user[data-userId="${e.userid}"][data-videoDeviceId="${n.name.replace("+", "\\+").replace("-", "\\-")}"]`).attr("data-stream-id", n.id),
                                $(`.video-user[data-stream-id="${n.id}"] video`).get(0).srcObject = n.mediaStream,
                                $(`.video-user[data-stream-id="${n.id}"] video`).get(0).onloadedmetadata = function () {
                                    console.error("videoWith:" + this.videoWidth),
                                        console.error("videoWith:" + this.videoHeight)
                                }
                        } else if ("screen" == n.attributes.type)
                            if (0 == $(".tabs").find(".screen-tab").length) {
                                let e = $(`<div class="tab swiper-slide screen-tab">\n                                  <video muted  autoplay playsinline data-stream-id="${n.id}"></video>\n                            </div>`);
                                $(".tabs").append(e),
                                    e.find("video").get(0).srcObject = n.mediaStream,
                                    t.literally.toolBtnShow = !1,
                                    t.room.swiper.allowTouchMove = !0,
                                    t.room.swiper.update(),
                                    t.room.swiper.slideTo(2)
                            } else
                                $(".tabs").find(".screen-tab video").attr("data-stream-id", n.id),
                                    $(".tabs").find(".screen-tab video").get(0).srcObject = n.mediaStream,
                                    2 != t.room.swiper.activeIndex && (t.literally.toolBtnShow = !1,
                                        t.room.swiper.allowTouchMove = !0,
                                        t.room.swiper.slideTo(2))
                }
                    , e => {
                        console.log("subscribe failed", e)
                    }
                )
            },
            streamAdded: function (e, n) {
                null !== e && null != n && t.room.subscribe(e, n)
            },
            addParticipantStream: function (e) {
                if (0 == e.origin.toLowerCase().indexOf("sip"))
                    return;
                "object" == typeof e.attributes && ("audio" == e.attributes.type ? e.name = "audio" : (e.name = e.attributes.name,
                    e.mediaConstraints = e.attributes.mediaConstraints)),
                    "video" == e.attributes.type && t.room.calcSubsctibeOption(e);
                let n = a.addParticipantStreamByParticipantId(e.origin, e);
                t.room.streamAdded(n, e),
                    e.addEventListener("updated", () => {
                        "video" == e.attributes.type && (console.log("updated", e.capabilities.video.resolutions),
                            t.room.calcSubsctibeOption(e, n))
                    }
                    ),
                    e.addEventListener("ended", () => {
                        console.log(e.id + " is ended."),
                            a.removeParticipantStreamByParticipantIdAndStreamId(e.origin, e.id),
                            $(`#audioArea [data-stream-id="${e.id}"]`).remove(),
                            "audio" == e.attributes.type ? (null != n && t.room.digstRefresh(() => {
                                a.updateParticipantConstraints(n.userid, "audio", !1)
                            }
                            ),
                                $(`[data-participantid="${e.origin}"] .audio-btn`).attr("src", h.mic.off)) : "screen" == e.attributes.type && null != n && e.id == $(".screen-tab video").attr("data-stream-id") && ($(".screen-tab").remove(),
                                    t.room.swiper.update())
                    }
                    )
            },
            updateRoomParticipants: function (e) {
                e.forEach(e => {
                    let n = JSON.parse(e.properties);
                    if (e.userId !== t.localUser.userid) {
                        a.addParticipant(e.userId, e.id);
                        let t = [];
                        n.camerasForName.forEach(function (e) {
                            t.push(e.videoDeviceId)
                        }),
                            n.cameras = t,
                            a.updateParticipantByUserid(e.userId, "properties", n)
                    }
                }
                )
            },
            publishUserVideo: function (e, n) {
                let i = e.videoDeviceId;
                t.localUser.videoPublishCounts.set(n + "-" + i, n);
                let r = n;
                t.localUser.openOrStopLocalVideo(!1, i, !1, !0, r)
            },
            publishSuccess: function (e, t) { },
            unPublishUserVideo: function (e, n) {
                if (void 0 == e) {
                    let e = new Map
                        , i = [];
                    t.localUser.videoPublishCounts.forEach(function (r, o, a) {
                        let s = o.indexOf(n + "-");
                        if (-1 === s)
                            e.set(o, t.localUser.videoPublishCounts.get(o));
                        else {
                            let e = o.substring(s + (n + "-").length);
                            i.push(e)
                        }
                    }),
                        t.localUser.videoPublishCounts = e,
                        i.forEach(function (e) {
                            let n = 0;
                            if (t.localUser.videoPublishCounts.forEach(function (t, i, r) {
                                -1 !== i.indexOf("-" + e) && (n += 1)
                            }),
                                0 == n) {
                                let t = o.getStreamByName(e);
                                if (null == t)
                                    return;
                                let n = o.getPublicationByName(t.name);
                                if (null == n)
                                    return;
                                n.stop(),
                                    t.isPublished = !1,
                                    o.removePublicationByName(t.name)
                            }
                        })
                } else {
                    let i = e.videoDeviceId
                        , r = n + "-" + i;
                    t.localUser.videoPublishCounts.delete(r);
                    let a = 0;
                    if (t.localUser.videoPublishCounts.forEach(function (e, t, n) {
                        -1 !== t.indexOf("-" + i) && (a += 1)
                    }),
                        0 == a) {
                        let e = o.getStreamByName(i);
                        if (null == e)
                            return;
                        let t = o.getPublicationByName(e.name);
                        if (null == t)
                            return;
                        t.stop(),
                            e.isPublished = !1,
                            o.removePublicationByName(e.name)
                    }
                }
            },
            checkIsChairman: function () {
                t.localUser.properties.role == t.room.roles.chairman && (t.room.digstRefresh(() => {
                    t.localUser.properties.role = v.presenter,
                        t.localRoleImg = h.mobile[t.localUser.properties.role]
                }
                ),
                    o.setLocalUser(t.localUser))
            },
            chatAppend: function (e, t = "notice", i = "own", r = "others", o = null) {
                let a, s = $(".msg-area-ul");
                e = HtmlUtil.htmlDecodeByRegExp(e);
                let l = new Date
                    , c = l.getHours()
                    , u = l.getMinutes();
                if (c < 10 && (c = "0" + c),
                    u < 10 && (u = "0" + u),
                    "notice" == t)
                    a = ` <div class="msg-area-li">\n                            <div class="time notice">${c}:${u}</div>\n                            <div class="msg notice">${e}</div>\n                        </div>`;
                else if ("own" == i)
                    a = ` <div class="msg-area-li">\n                                    <div class="time">${c}:${u}</div>\n                                    <div class="msg">${n.instant("room.me") + ":" + e}</div>\n                                </div>`;
                else {
                    if (null == o)
                        return;
                    a = ` <div class="msg-area-li">\n                                    <div class="time">${c}:${u}</div>\n                                    <div class="msg">${o.properties.username + ":" + e}</div>\n                                </div>`;
                    o.properties.username.substr(0, 1)
                }
                s.prepend(a),
                    s.scrollTop(0)
            },
            updateRoomParticipant: function (e, i) {
                if ("server" == i && (i = e.userId),
                    i == t.localUser.userid)
                    return;
                let r = JSON.parse(e.properties);
                if ("pc" == r.deviceType)
                    $(`.video-user-v[data-userid="${i}"]`).each(function () {
                        -1 == $.inArray($(this).attr("data-videodeviceid"), r.cameras) && ($(this).remove(),
                            a.updateParticipantConstraints(i, "video", !1, $(this).attr("data-videodeviceid")))
                    }),
                        a.updateParticipantByUserid(i, "properties", r),
                        r.cameras.forEach(function (e) {
                            let t = 1 == r.cameras.length ? r.username : r.cameras[0] == e ? r.username : r.videoForUsername[e];
                            $(`.video-user[data-userId="${i}"][data-videoDeviceId="${e.replace("+", "\\+").replace("-", "\\-")}"]`).find("span").html(t)
                        });
                else {
                    r.role == v.chairman && (t.room.chatAppend(n.instant("room.chairmanChangedTo") + r.username, "notice", "", ""),
                        t.room.checkIsChairman()),
                        $(`.video-user[data-userid="${i}"]`).each(function () {
                            -1 == $.inArray($(this).attr("data-videodeviceid"), r.cameras) && ($(this).remove(),
                                a.updateParticipantConstraints(i, "video", !1, $(this).attr("data-videodeviceid")))
                        });
                    let e = [];
                    r.camerasForName.forEach(function (t) {
                        e.push(t.videoDeviceId);
                        let n = t.cameraName;
                        2 & r.state ? $(`.video-user[data-userId="${i}"][data-videoDeviceId="${t.videoDeviceId.replace("+", "\\+").replace("-", "\\-")}"]`).find("span").html(n) : (a.updateParticipantConstraints(i, "video", !1, t.videoDeviceId),
                            $(`.video-user[data-userId="${i}"][data-videoDeviceId="${t.videoDeviceId.replace("+", "\\+").replace("-", "\\-")}"]`).remove())
                    }),
                        r.cameras = e,
                        a.updateParticipantByUserid(i, "properties", r)
                }
                "join" == e.msgType && t.room.chatAppend(r.username + n.instant("room.joinMeeting"), "notice", "", "")
            },
            forceLeave: function (e) {
                r.send("forceLeave", e.userid, "", {}, "send")
            },
            digstRefresh: function (e) {
                t.$apply(() => {
                    e && e()
                }
                )
            },
            windowResize: function () {
                let e, t = document.getElementsByTagName("html")[0], n = document.documentElement.clientHeight, i = document.documentElement.clientWidth;
                console.log(i),
                    console.log(n),
                    i < n ? (t.style.fontSize = i / 7.5 + "px",
                        e = i / 750) : (t.style.fontSize = n / 7.5 + "px",
                            e = n / 750),
                    document.documentElement.style.fontSize = 100 * Math.min(e, 3) + "px",
                    $(".videoPanelTitle .user-list-panel .user-list-ul").css("max-height", .6 * n),
                    $(".videoPanelTitle .limitWidth").css("max-width", `calc(${i}px - 3.38rem)`)
            }
        };
        let I = v.presenter;
        t.localRoleImg = h.mobile.presenter,
            t.room.createUserid == w && (I = v.chairman,
                t.localRoleImg = h.mobile.chairman),
            t.localUser = {
                userid: w,
                participantid: "",
                username: x,
                currentCameraType: "front",
                defaultCamera: "",
                properties: {
                    role: I,
                    username: x,
                    state: -1,
                    deviceType: "Android",
                    camerasForName: [],
                    cameras: []
                },
                constraints: {},
                videoPublishCounts: new Map,
                frontCapture: "",
                backCapture: "",
                cameraHasPerssion: !0,
                showLocalControlFunc: function (e, n, i) {
                    t.room.localControlUser = e,
                        t.room.localControlUser.camera = i,
                        t.room.localControlUser.isLocal = n,
                        t.room.showLocalControl = !0
                },
                openOrStopLocalAudio: function () {
                    if (null != o.getLocalAudioStream())
                        null != o.getLocalAudioPublication() && (o.getLocalAudioPublication().stop(),
                            o.setLocalAudioStream(null),
                            o.setLocalAudioPublication(null),
                            $(".local .audio-btn").attr("src", h.mic.off),
                            $(".three-btn .audio-btn").attr("src", h.micBottom.off));
                    else {
                        const e = !0
                            , i = !1;
                        Wy.Base.MediaStreamFactory.createMediaStream(new Wy.Base.StreamConstraints(e, i)).then(({ getMedia: e, _mediaConstraints: i }) => {
                            e.then(e => {
                                let n = new Wy.Base.LocalStream(e, new Wy.Base.StreamSourceInfo("mic", void 0), {
                                    type: "audio",
                                    userId: t.localUser.userid
                                });
                                n.name = "audio",
                                    n.mediaConstraints = i,
                                    o.setLocalAudioStream(n),
                                    null == o.getLocalAudioPublication() && conference.publish(n, n.mediaConstraints).then(e => {
                                        $(".local .audio-btn").attr("src", h.mic.on),
                                            $(".three-btn .audio-btn").attr("src", h.micBottom.on),
                                            o.setLocalAudioPublication(e)
                                    }
                                    ).catch(() => {
                                        o.setLocalAudioStream(null)
                                    }
                                    )
                            }
                            ).catch(e => {
                                alert(n.instant("errorMsg.1003"))
                            }
                            )
                        }
                            , e => {
                                console.error("Failed to create MediaStream, " + e)
                            }
                        )
                    }
                },
                openOrStopRemoteAudio: function (e) {
                    let t = "apply"
                        , n = {
                            permission: t = a.getParticipantByUserid(e.userid).constraints.audio ? "cancel" : "apply"
                        };
                    r.send("audioPublishOrUnpublish", e.userid, "", n, "send")
                },
                openOrStopRemoteVideo: function (e, i, o = !0) {
                    if (o && 1 == t.room.chairmanControlStatus.isOpen && t.localUser.properties.role != t.room.roles.chairman && (1 == t.room.chairmanControlStatus.manualSynchronize || 1 == t.room.chairmanControlStatus.globalSynchronize))
                        return void (t.room.toast = {
                            text: n.instant("room.syncModeOnManualTooltip"),
                            type: 4,
                            timeout: 1e3,
                            max: 1
                        });
                    let s = angular.copy(e.constraints[i].video);
                    if ((s = !s) && 4 == t.room.currentVideoCount)
                        return;
                    console.log(t.room.currentVideoCount);
                    let l = a.getParticipantStream(e.participantId, i);
                    if ($(`.video-user[data-userId="${e.userid}"][data-videoDeviceId="${i.replace("+", "\\+").replace("-", "\\-")}"]`).remove(),
                        null != l) {
                        let n = {
                            videoDeviceId: i
                        };
                        if (s) {
                            r.send("publishUserVideo", e.userid, "", n, "send"),
                                $(`.video-user[data-stream-id="${l.id}"]`).remove();
                            let o = $(`\n                     <div class="video-user" data-stream-id="${l.id}" data-userId="${e.userid}" data-videoDeviceId="${i}" data-index="${t.room.currentVideoCount}">\n                                <div class="video-user-v" >\n                                    <span>${1 == e.properties.cameras.length ? e.properties.username : e.properties.cameras[0] == i ? e.properties.username : e.properties.videoForUsername[i]}</span>\n                                    <video muted  playsinline autoplay></video>\n                                </div>\n                            </div>`);
                            $(".video-area").append(o),
                                t.room.currentVideoCount++,
                                a.updateParticipantConstraints(e.userid, "video", s, i),
                                null == a.getParticipantSubsciptionByParticipantIdAndStreamId(e.participantId, l.id) && t.room.subscribe(e, l)
                        } else {
                            let i = a.getParticipantSubsciptionByParticipantIdAndStreamId(e.participantId, l.id);
                            null != i && (i.stop(),
                                a.removeParticipantSubsciptionByParticipantIdAndStreamId(e.participantId, l.id)),
                                r.send("unPublishUserVideo", e.userid, "", n, "send"),
                                $(`.video-user[data-stream-id="${l.id}"]`).remove(),
                                t.room.currentVideoCount--
                        }
                        a.updateParticipantConstraints(e.userid, "video", s, i)
                    } else {
                        let n = {
                            videoDeviceId: i
                        };
                        if (s) {
                            let o = $(`\n                     <div class="video-user" data-userId="${e.userid}" data-videoDeviceId="${i}" data-index="${t.room.currentVideoCount}">\n                                <div class="video-user-v" >\n                                    <span>${1 == e.properties.cameras.length ? e.properties.username : e.properties.cameras[0] == i ? e.properties.username : e.properties.videoForUsername[i]}</span>\n                                    <video muted  playsinline autoplay></video>\n                                </div>\n                            </div>`);
                            $(".video-area").append(o),
                                t.room.currentVideoCount++,
                                r.send("publishUserVideo", e.userid, "", n, "send")
                        } else
                            t.room.currentVideoCount--,
                                r.send("unPublishUserVideo", e.userid, "", n, "send");
                        a.updateParticipantConstraints(e.userid, "video", s, i)
                    }
                    t.localUser.recountVideoUsers()
                },
                recountVideoUsers: function () {
                    let e = 0;
                    $(".video-area").children(".video-user").sort(function (e, t) {
                        return $(e).attr("data-index") - $(t).attr("data-index")
                    }).each(function () {
                        $(this).attr("data-index", e),
                            e++
                    })
                },
                switchCameraPermission: function () {
                    let e = o.getStreamByName(t.localUser.defaultCamera);
                    if (null != e) {
                        e.mediaStream.getTracks()[0].stop();
                        let t = o.getPublicationByName(e.name);
                        null != t && (t.stop(),
                            o.removePublicationByName(e.name)),
                            o.removeStream(e.id)
                    }
                    if (t.localUser.cameraHasPerssion) {
                        t.localUser.constraints[t.localUser.defaultCamera] = {
                            video: !1
                        },
                            t.localUser.cameraHasPerssion = !1;
                        let e = {
                            userId: t.localUser.userid,
                            properties: {
                                cameras: [],
                                camerasForName: []
                            }
                        };
                        r.send("changeUserProperties", "server", "", e, "send"),
                            $(".three-btn .video-btn").attr("src", h.camBottom.off),
                            $(".video-area").find(`[data-videoDeviceId="${t.localUser.defaultCamera.replace("+", "\\+").replace("-", "\\-")}"][data-userId="${t.localUser.userid}"]`).remove(),
                            t.room.currentVideoCount--
                    } else {
                        t.localUser.cameraHasPerssion = !0;
                        let e = {
                            userId: t.localUser.userid,
                            properties: {
                                cameras: t.localUser.properties.cameras,
                                camerasForName: t.localUser.properties.camerasForName
                            }
                        };
                        r.send("changeUserProperties", "server", "", e, "send"),
                            $(".three-btn .video-btn").attr("src", h.camBottom.on),
                            t.localUser.openOrStopLocalVideo(!0, t.localUser.defaultCamera)
                    }
                },
                switchCamera: function () {
                    let e = $(".video-area").find(`[data-videoDeviceId="${t.localUser.defaultCamera.replace("+", "\\+").replace("-", "\\-")}"][data-userId="${t.localUser.userid}"]`);
                    if (0 == e.length)
                        return;
                    let i = o.getStreamByName(t.localUser.defaultCamera);
                    if (null != i) {
                        i.mediaStream.getTracks()[0].stop();
                        let r, a = o.getPublicationByName(i.name), s = !1;
                        null != a && (a.stop(),
                            o.removePublicationByName(i.name),
                            s = !0),
                            "front" == t.localUser.currentCameraType ? (r = t.localUser.backCapture,
                                t.localUser.currentCameraType = "back") : (r = t.localUser.frontCapture,
                                    t.localUser.currentCameraType = "front");
                        const l = new Wy.Base.VideoTrackConstraints(Wy.Base.VideoSourceInfo.CAMERA, r, {
                            width: f,
                            height: m
                        }, g);
                        /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) ? (i.mediaStream.getTracks().forEach(e => {
                            e.stop()
                        }
                        ),
                            navigator.mediaDevices.getUserMedia({
                                video: {
                                    width: {
                                        ideal: 1280
                                    },
                                    height: {
                                        ideal: 720
                                    },
                                    frameRate: {
                                        ideal: 15
                                    },
                                    facingMode: {
                                        exact: "front" == t.localUser.currentCameraType ? "user" : "environment"
                                    }
                                },
                                audio: !1
                            }).then(n => {
                                o.removeStream(i.id);
                                let r = {
                                    audio: !1,
                                    video: {
                                        width: {
                                            ideal: 1280
                                        },
                                        height: {
                                            ideal: 720
                                        },
                                        frameRate: {
                                            ideal: 15
                                        }
                                    }
                                }
                                    , a = new Wy.Base.LocalStream(n, new Wy.Base.StreamSourceInfo(void 0, "camera"), {
                                        name: t.localUser.defaultCamera,
                                        mediaConstraints: r,
                                        type: "video"
                                    });
                                if (a.name = t.localUser.defaultCamera,
                                    a.mediaConstraints = r,
                                    o.addStream(a),
                                    e.find("video").get(0).srcObject = n,
                                    s) {
                                    let e = {
                                        video: {
                                            width: f,
                                            height: m,
                                            frameRate: g,
                                            encodingParameters: [{
                                                codec: {
                                                    name: "h264"
                                                },
                                                minBitrate: 1536
                                            }]
                                        }
                                    };
                                    conference.publish(a, e).then(e => {
                                        e.name = t.localUser.defaultCamera,
                                            a.isPublished = !0,
                                            o.addPublication(e)
                                    }
                                    )
                                }
                            }
                            ).catch(e => { }
                            )) : Wy.Base.MediaStreamFactory.createMediaStream(new Wy.Base.StreamConstraints(!1, l)).then(({ getMedia: r, _mediaConstraints: a }) => {
                                r.then(n => {
                                    o.removeStream(i.id);
                                    let r = new Wy.Base.LocalStream(n, new Wy.Base.StreamSourceInfo(void 0, "camera"), {
                                        name: t.localUser.defaultCamera,
                                        mediaConstraints: a,
                                        type: "video"
                                    });
                                    if (r.name = t.localUser.defaultCamera,
                                        r.mediaConstraints = a,
                                        o.addStream(r),
                                        e.find("video").get(0).srcObject = n,
                                        s) {
                                        let e = {
                                            video: {
                                                width: f,
                                                height: m,
                                                frameRate: g,
                                                encodingParameters: [{
                                                    codec: {
                                                        name: "vp8"
                                                    },
                                                    minBitrate: 1536
                                                }]
                                            }
                                        };
                                        conference.publish(r, e).then(e => {
                                            e.name = t.localUser.defaultCamera,
                                                r.isPublished = !0,
                                                o.addPublication(e)
                                        }
                                        )
                                    }
                                }
                                ).catch(e => {
                                    alert(n.instant("errorMsg.1002"))
                                }
                                )
                            }
                                , e => {
                                    console.error("Failed to create MediaStream, " + e)
                                }
                            )
                    }
                },
                openOrStopLocalVideo: function (e = !0, i, a = !0, s = !1, l = "", c = !0) {
                    if (e && 1 == t.room.chairmanControlStatus.isOpen && t.localUser.properties.role != t.room.roles.chairman && (1 == t.room.chairmanControlStatus.manualSynchronize || 1 == t.room.chairmanControlStatus.globalSynchronize))
                        return void (c && (t.room.toast = {
                            text: n.instant("room.syncModeOnManualTooltip"),
                            type: 4,
                            timeout: 1e3,
                            max: 1
                        }));
                    if (0 == t.localUser.frontCapture.length && 0 == t.localUser.backCapture.length)
                        return;
                    let u = $(".video-area").find(`[data-videoDeviceId="${t.localUser.defaultCamera.replace("+", "\\+").replace("-", "\\-")}"][data-userId="${t.localUser.userid}"]`);
                    if (a && 0 == u.length && 4 == t.room.currentVideoCount)
                        return;
                    let d = o.getStreamByName(t.localUser.defaultCamera);
                    if (null != d) {
                        if (a)
                            if (0 === u.length) {
                                let e = $(`\n                            <div class="video-user local" data-videoDeviceId="${t.localUser.defaultCamera}" data-userId="${t.localUser.userid}" data-index="${t.room.currentVideoCount}">\n                                <div class="video-user-v" >\n                                    <span>${t.localUser.username}</span>\n                                    <video muted  playsinline autoplay></video>\n                                </div>\n                            </div>\n                            `);
                                $(".video-area").append(e),
                                    $(`.video-area .video-user[data-videoDeviceId="${t.localUser.defaultCamera.replace("+", "\\+").replace("-", "\\-")}"][data-userId="${t.localUser.userid}"] video`).get(0).srcObject = d.mediaStream,
                                    t.room.currentVideoCount++,
                                    void 0 === t.localUser.constraints[t.localUser.defaultCamera] && (t.localUser.constraints[t.localUser.defaultCamera] = {}),
                                    t.localUser.constraints[t.localUser.defaultCamera] = {
                                        video: !0
                                    }
                            } else {
                                u.remove(),
                                    t.room.currentVideoCount--,
                                    t.localUser.constraints[t.localUser.defaultCamera] = {
                                        video: !1
                                    },
                                    null == o.getPublicationByName(d.name) && o.removeStream(d.id)
                            }
                        else if (s) {
                            if (null != o.getPublicationByName(d.name))
                                return;
                            if (!d.isPublished) {
                                d.attributes.toId = l;
                                let e = {
                                    video: {
                                        width: d.mediaConstraints.video.width.ideal,
                                        height: d.mediaConstraints.video.height.ideal,
                                        frameRate: d.mediaConstraints.video.frameRate.ideal,
                                        encodingParameters: [{
                                            codec: {
                                                name: "vp8"
                                            },
                                            minBitrate: 1536
                                        }]
                                    }
                                };
                                d.isPublished = !0,
                                    conference.publish(d, e).then(e => {
                                        e.name = t.localUser.defaultCamera,
                                            o.updateStream(d.id, "isPublished", !0),
                                            o.addPublication(e);
                                        let n = {
                                            videoDeviceId: t.localUser.defaultCamera
                                        };
                                        r.send("publishSuccess", l, "", n, "send")
                                    }
                                    ).catch(() => {
                                        o.updateStream(d.id, "isPublished", !1)
                                    }
                                    )
                            }
                        }
                    } else {
                        const c = !1;
                        i = t.localUser.frontCapture,
                            "front" != t.localUser.currentCameraType && (i = t.localUser.backCapture);
                        const d = new Wy.Base.VideoTrackConstraints(Wy.Base.VideoSourceInfo.CAMERA, i, {
                            width: f,
                            height: m
                        }, g);
                        if (a) {
                            if (0 === u.length) {
                                let e = $(`\n                            <div class="video-user local" data-videoDeviceId="${t.localUser.defaultCamera}" data-userId="${t.localUser.userid}" data-index="${t.room.currentVideoCount}">\n                                <div class="video-user-v" >\n                                    <span>${t.localUser.username}</span>\n                                    <video muted  playsinline autoplay></video>\n                                </div>\n                            </div>\n                            `);
                                $(".video-area").append(e),
                                    t.room.currentVideoCount++,
                                    void 0 === t.localUser.constraints[t.localUser.defaultCamera] && (t.localUser.constraints[t.localUser.defaultCamera] = {}),
                                    t.localUser.constraints[t.localUser.defaultCamera] = {
                                        video: !0
                                    }
                            } else
                                u.remove(),
                                    t.room.currentVideoCount--,
                                    t.localUser.constraints[t.localUser.defaultCamera] = {
                                        video: !1
                                    };
                            e || t.room.digstRefresh()
                        }
                        /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) ? navigator.mediaDevices.getUserMedia({
                            video: {
                                width: {
                                    ideal: 1280
                                },
                                height: {
                                    ideal: 720
                                },
                                frameRate: {
                                    ideal: 15
                                },
                                facingMode: "front" == t.localUser.currentCameraType ? "user" : "environment"
                            },
                            audio: !1
                        }).then(e => {
                            let n = {
                                audio: !1,
                                video: {
                                    width: {
                                        ideal: 1280
                                    },
                                    height: {
                                        ideal: 720
                                    },
                                    frameRate: {
                                        ideal: 15
                                    }
                                }
                            }
                                , i = new Wy.Base.LocalStream(e, new Wy.Base.StreamSourceInfo(void 0, "camera"), {
                                    name: t.localUser.defaultCamera,
                                    mediaConstraints: n,
                                    userId: t.localUser.userid,
                                    type: "video"
                                });
                            if (i.name = t.localUser.defaultCamera,
                                i.mediaConstraints = n,
                                a && ($(`.video-area .video-user[data-videoDeviceId="${t.localUser.defaultCamera.replace("+", "\\+").replace("-", "\\-")}"][data-userId="${t.localUser.userid}"] video`).get(0).srcObject = i.mediaStream),
                                o.addStream(i),
                                s) {
                                i.isPublished = !0,
                                    i.attributes.toId = l;
                                let e = {
                                    video: {
                                        width: f,
                                        height: m,
                                        frameRate: g,
                                        encodingParameters: [{
                                            codec: {
                                                name: "h264"
                                            },
                                            minBitrate: 1536
                                        }]
                                    }
                                };
                                conference.publish(i, e).then(e => {
                                    e.name = t.localUser.defaultCamera;
                                    let n = {
                                        videoDeviceId: t.localUser.defaultCamera
                                    };
                                    r.send("publishSuccess", l, "", n, "send"),
                                        o.addPublication(e)
                                }
                                ).catch(e => {
                                    o.updateStream(i.id, "isPublished", !1)
                                }
                                )
                            }
                        }
                        ).catch(e => {
                            alert(n.instant("errorMsg.1002"))
                        }
                        ) : Wy.Base.MediaStreamFactory.createMediaStream(new Wy.Base.StreamConstraints(c, d)).then(({ getMedia: e, _mediaConstraints: i }) => {
                            e.then(e => {
                                let n = new Wy.Base.LocalStream(e, new Wy.Base.StreamSourceInfo(void 0, "camera"), {
                                    name: t.localUser.defaultCamera,
                                    mediaConstraints: i,
                                    userId: t.localUser.userid,
                                    type: "video"
                                });
                                if (n.name = t.localUser.defaultCamera,
                                    n.mediaConstraints = i,
                                    a && ($(`.video-area .video-user[data-videoDeviceId="${t.localUser.defaultCamera.replace("+", "\\+").replace("-", "\\-")}"][data-userId="${t.localUser.userid}"] video`).get(0).srcObject = n.mediaStream),
                                    o.addStream(n),
                                    s) {
                                    n.isPublished = !0,
                                        n.attributes.toId = l;
                                    let e = {
                                        video: {
                                            width: f,
                                            height: m,
                                            frameRate: g,
                                            encodingParameters: [{
                                                codec: {
                                                    name: "vp8"
                                                },
                                                minBitrate: 1536
                                            }]
                                        }
                                    };
                                    conference.publish(n, e).then(e => {
                                        e.name = t.localUser.defaultCamera;
                                        let n = {
                                            videoDeviceId: t.localUser.defaultCamera
                                        };
                                        r.send("publishSuccess", l, "", n, "send"),
                                            o.addPublication(e)
                                    }
                                    ).catch(e => {
                                        o.updateStream(n.id, "isPublished", !1)
                                    }
                                    )
                                }
                            }
                            ).catch(e => {
                                alert(n.instant("errorMsg.1002"))
                            }
                            )
                        }
                            , e => {
                                console.error("Failed to create MediaStream, " + e)
                            }
                        )
                    }
                    t.localUser.recountVideoUsers()
                },
                leave: function () {
                    conference.leave(),
                        window.location.href = "/"
                }
            },
            t.room.localControlUser = t.localUser,
            t.literally = {
                currentLcId: "whiteboard",
                canDraw: !0,
                currentNum: 1,
                totalNum: 1,
                currentPageType: "whiteboard",
                roomFiles: [],
                audioTime: 0,
                videoTime: 0,
                lastFile: null,
                lastIndex: 1,
                currentZoom: 0,
                maxZoom: 9,
                minZoom: -9,
                scale: .1,
                defaultWidth: 0,
                defaultHeight: 0,
                toolBtnShow: !1,
                filePage: {
                    whiteboard: {
                        currentPage: 1,
                        totalPage: 1
                    }
                },
                clearDraw: function () {
                    api.clear()
                },
                setPaintColor: function (e, t) {
                    api.setColor(e),
                        $(t.target).addClass("active").siblings().removeClass("active")
                },
                setPaintSize: function (e, t) {
                    e = parseInt(e),
                        api.setSize(e),
                        $(t.target).addClass("active").siblings().removeClass("active")
                },
                showToolBtn: function () {
                    t.literally.toolBtnShow = !t.literally.toolBtnShow,
                        t.literally.toolBtnShow ? t.room.swiper.allowTouchMove = !1 : t.room.swiper.allowTouchMove = !0
                },
                zoomIn: function () {
                    if (t.literally.currentZoom == t.literally.maxZoom)
                        return;
                    let e = $(".literally").width()
                        , n = $(".literally").height();
                    if (t.literally.currentZoom += 1,
                        0 == t.literally.currentZoom) {
                        let e = t.literally.defaultWidth
                            , n = t.literally.defaultHeight;
                        $(".white-board-panel").css("overflow", "hidden"),
                            $(".white-board-main,.white-board-panel").css("width", e).css("height", n),
                            $(".literally, .white-board-main img").css("width", e).css("height", n)
                    } else {
                        let i = 1 + t.literally.scale
                            , r = Math.round(e * i)
                            , o = Math.round(n * i);
                        $(".white-board-panel").css("overflow", "auto"),
                            t.literally.currentZoom > 0 && r <= $("#white-board").width() ? ($(".white-board-main,.white-board-panel").css("width", r),
                                $(".white-board-panel").css("overflow-x", "hidden")) : r > $("#white-board").width() && $(".white-board-panel").css("overflow-x", "auto"),
                            $(".literally").css("width", r).css("height", o),
                            0 != $(".white-board-main img").height() && $(".white-board-main img").css("margin", "unset").css("height", o).css("width", r)
                    }
                    t.literally.currentZoom <= 0 ? $(".white-board-main img,.literally").css("margin", "auto") : $(".white-board-main img,.literally").css("margin", "unset"),
                        t.literally.initWb()
                },
                zoomOut: function () {
                    if (t.literally.currentZoom == t.literally.minZoom)
                        return;
                    let e = $(".literally").width()
                        , n = $(".literally").height();
                    if (t.literally.currentZoom -= 1,
                        0 == t.literally.currentZoom) {
                        let e = t.literally.defaultWidth
                            , n = t.literally.defaultHeight;
                        $(".white-board-panel").css("overflow", "hidden"),
                            $(".literally, .white-board-main img").css("width", e).css("height", n)
                    } else {
                        let i = 1 - t.literally.scale
                            , r = Math.round(e * i)
                            , o = Math.round(n * i);
                        $(".white-board-panel").css("overflow", "auto"),
                            t.literally.currentZoom > 0 && r <= $("#white-board").width() ? ($(".white-board-main,.white-board-panel").css("width", r),
                                $(".white-board-panel").css("overflow-x", "hidden")) : r > $("#white-board").width() && $(".white-board-panel").css("overflow-x", "auto"),
                            $(".literally").css("width", r).css("height", o),
                            0 != $(".white-board-main img").height() && $(".white-board-main img").css("width", r).css("height", o)
                    }
                    t.literally.currentZoom <= 0 ? $(".white-board-main img,.literally").css("margin", "auto") : $(".white-board-main img,.literally").css("margin", "unset"),
                        t.literally.initWb()
                },
                calcauteLiterally: function (e) {
                    let n = $("#white-board").width()
                        , i = $("#white-board").height()
                        , r = Math.min(n, i);
                    t.literally.defaultWidth = t.literally.defaultHeight = r,
                        $(".literally, .white-board-main,.white-board-panel").css("width", r).css("height", r),
                        this.autoZoom(e)
                },
                autoZoom: function (e) {
                    if (e && 0 != t.literally.currentZoom) {
                        let e = Math.abs(t.literally.currentZoom)
                            , n = 1 - t.literally.scale;
                        if (t.literally.currentZoom < 0)
                            for (let i = 0; i < e; i++) {
                                let e = $(".literally").width() * n
                                    , i = $(".literally").height() * n;
                                $(".white-board-main").width() >= t.literally.defaultWidth ? ($(".white-board-main, .white-board-panel").css("width", e),
                                    $(".white-board-panel").css("overflow-x", "auto")) : $(".white-board-panel").css("overflow-x", "hidden"),
                                    $(".literally").css("width", e).css("height", i),
                                    0 != $(".white-board-main img").height() && $(".white-board-main img").css("margin", "auto").css("height", i).css("width", e)
                            }
                        else {
                            let n = 1 + t.literally.scale;
                            for (let t = 0; t < e; t++) {
                                let e = $(".literally").width() * n
                                    , t = $(".literally").height() * n;
                                $(".white-board-main").width() <= $("#white-board").width() ? ($(".white-board-main,.white-board-panel").css("width", e),
                                    $(".white-board-panel").css("overflow-x", "hidden")) : $(".white-board-main").width() > $("#white-board").width() && $(".white-board-panel").css("overflow-x", "auto"),
                                    $(".literally").css("width", e).css("height", t),
                                    0 != $(".white-board-main img").height() && $(".white-board-main img").css("margin", "unset").css("height", t).css("width", e)
                            }
                        }
                        t.literally.currentZoom <= 0 ? $(".white-board-main img").css("margin", "auto") : $(".white-board-main img").css("margin", "unset")
                    }
                },
                initWb: function () {
                    r.send("getWbSnapshot", "server", "", {
                        lcId: t.literally.currentLcId
                    }, "send")
                },
                draw: function (e) {
                    let n = "";
                    e && e.snapshot && (n = e.snapshot),
                        api.initLc(document.getElementsByClassName("literally")[0], n, e.lcId, e),
                        api.setLcStatus(t.literally.lcStatus),
                        api.setSendMsgFunction(function (e) {
                            r.send("wbOperation", "others", "", e, "send")
                        }),
                        api.setSnapshotFunction(function (e) {
                            r.send("setWbSnapshot", "server", "", e, "send")
                        }),
                        api.setUndoRedoFunction(function () {
                            r.send("getWbSnapshot", "server", "", {
                                lcId: t.literally.currentLcId
                            }, "send")
                        }),
                        api.setRedoUndoStackChange(function (e) {
                            t.literally.canRedo = e > 0,
                                t.$applyAsync()
                        }, function (e) {
                            t.literally.canUndo = e > 0
                        })
                },
                canvasToimg: function () {
                    let e = $(".white-board-main img").attr("src");
                    if (void 0 != e ? $(".user-video-whiteboard").css("background-image", `url(${e})`) : $(".user-video-whiteboard").removeAttr("style"),
                        1 == $(".literally canvas:eq(1)").length) {
                        let e = $(".literally canvas:eq(1)").get(0).toDataURL("image/png");
                        $(".user-video[data-iswhiteboard='true']").find("img").attr("src", e)
                    }
                },
                openWhiteBoard: function (e, i = !1, o) {
                    if (t.literally.lcStatus = api.getLcStatus(),
                        t.literally.currentZoom = 0,
                        t.literally.calcauteLiterally(),
                        $(".literally").css("background", "#fff"),
                        $(".white-board-main img").removeAttr("style").removeAttr("src"),
                        $("#whiteBtn").siblings().removeClass("selected"),
                        $("#whiteBtn").addClass("selected"),
                        t.literally.lastFile = null,
                        t.literally.currentPageType = "whiteboard",
                        t.room.currentMainPage = "whiteboard",
                        void 0 !== e && (e = parseInt(e),
                            t.literally.filePage.whiteboard.currentPage = e),
                        void 0 !== o && (t.literally.filePage.whiteboard.totalPage = o),
                        t.literally.lastIndex = t.literally.filePage.whiteboard.currentPage,
                        t.literally.currentLcId = "whiteboard-" + t.literally.filePage.whiteboard.currentPage,
                        t.literally.initWb(),
                        i) {
                        if (t.literally.currentNum = t.literally.filePage.whiteboard.currentPage,
                            t.literally.totalNum = t.literally.filePage.whiteboard.totalPage,
                            t.literally.currentNum > t.literally.filePage.whiteboard.totalPage && (t.literally.totalNum = t.literally.currentNum,
                                t.literally.filePage.whiteboard.totalPage = t.literally.totalNum),
                            t.localUser.properties.role == t.room.roles.chairman || t.localUser.properties.role == t.room.roles.speaker) {
                            let e = {
                                index: t.literally.filePage.whiteboard.currentPage,
                                total: t.literally.filePage.whiteboard.totalPage
                            };
                            r.send("openWhiteBoard", "others", "", e, "send");
                            let n = {
                                fileType: t.literally.currentPageType,
                                total: t.literally.totalNum,
                                index: t.literally.currentNum,
                                fileid: ""
                            };
                            r.send("changeMeetingStatus", "server", "", n, "send")
                        }
                    } else
                        t.$apply(() => {
                            t.literally.currentNum = t.literally.filePage.whiteboard.currentPage,
                                t.literally.totalNum = t.literally.filePage.whiteboard.totalPage,
                                t.literally.currentNum > t.literally.filePage.whiteboard.totalPage && (t.literally.totalNum = t.literally.currentNum,
                                    t.literally.filePage.whiteboard.totalPage = t.literally.totalNum)
                        }
                        );
                    $(".whiteboard-tab .file-name").html(n.instant("room.whiteboard.name"))
                },
                openFile: function (e, t, n = !1, i, r = 0, o, a, s, l, c) {
                    0 != e.isDynamicPPT && e.isDynamicPPT ? this.openDynamicPPT(e, t, r, n, i, o, a, s, l, c) : (delete window.Webcast,
                        u.src = "",
                        $(u).removeAttr("style"),
                        this.openNormalFile(e, t, n, i))
                },
                openDynamicPPT: function (e, n, i = 0, o = !1, a, s, l, c = "page", h, f) {
                    $("#screen-board").hide(),
                        $(".white-board-main").find("img").removeAttr("src"),
                        $(".white-board-main").find("img").removeAttr("style"),
                        void 0 === n && (n = 1,
                            t.literally.filePage[e.fileid] = n),
                        o ? (t.literally.toolBtnShow = !1,
                            t.room.docListShow = !1,
                            2 != t.room.currentTab && t.room.swiper.slideTo(2)) : t.room.digstRefresh(() => {
                                t.literally.toolBtnShow = !1
                            }
                            ),
                        t.literally.currentPageType = "file",
                        t.literally.lcStatus = api.getLcStatus(),
                        t.literally.currentLcId = e.fileid + "-" + n;
                    let m = this
                        , g = !0;
                    if (("whiteboard" == t.literally.currentPageType || t.literally.lastFile && t.literally.lastFile.fileid != e.fileid) && (t.literally.currentZoom = 0,
                        g = !1),
                        null != t.literally.lastFile && (t.literally.lastFile.animateStep = i,
                            t.literally.lastFile.isLocal = o,
                            t.literally.filePage[e.fileid] = n),
                        null == t.literally.lastFile || t.literally.lastFile.fileid != e.fileid)
                        t.literally.lastFile = e,
                            t.literally.lastFile.isFirst = !0,
                            t.literally.lastFile.animateStep = i,
                            t.literally.lastFile.isLocal = o,
                            t.literally.filePage[e.fileid] = n,
                            t.literally.lastFile.sendMsg = {},
                            window.Webcast = function () { }
                            ,
                            window.Webcast.RecieveSendScale = function (e) {
                                if (!t.literally.lastFile.isFirst && e > 1) {
                                    let t = (p * e - $(".white-board-main").height()) / 2;
                                    $(u).css("transform", `translateX(0px) translateY(${t}px)`)
                                }
                            }
                            ,
                            window.Webcast.RecieveInitialOK = function () {
                                t.literally.lastFile.isFirst && (1 != t.literally.filePage[e.fileid] && u.contentWindow.Presentation.JumpToAnim(t.literally.lastFile.animateStep, t.literally.filePage[e.fileid], !0),
                                    t.literally.lastFile.isFirst = !1)
                            }
                            ,
                            window.Webcast.RecieveProgress = function (n, i, o) {
                                if (t.literally.lastFile.sendMsg.slide != i || t.literally.lastFile.sendMsg.step != n) {
                                    if (t.literally.currentLcId = e.fileid + "-" + i,
                                        t.literally.lastFile.sendMsg.slide != i && t.literally.initWb(),
                                        t.literally.lastFile.isFirst || (t.literally.lastFile.sendMsg.slide = i,
                                            t.literally.lastFile.sendMsg.step = n,
                                            t.literally.lastFile.animateStep = n,
                                            t.literally.filePage[e.fileid] = i,
                                            t.room.currentMainPage = "whiteboard",
                                            t.literally.lastIndex = i,
                                            t.literally.currentNum = i,
                                            t.$applyAsync()),
                                        t.literally.lastFile.isLocal && (t.localUser.properties.role == t.room.roles.chairman || t.localUser.properties.role == t.room.roles.speaker)) {
                                        let o = {
                                            fileid: t.literally.lastFile.fileid,
                                            index: i,
                                            step: n,
                                            controlType: "page"
                                        };
                                        r.send("openFile", "others", "", o, "send");
                                        let a = {
                                            fileType: t.literally.currentPageType,
                                            total: t.literally.totalNum,
                                            index: i,
                                            fileid: e.fileid,
                                            step: n,
                                            controlType: "page"
                                        };
                                        r.send("changeMeetingStatus", "server", "", a, "send")
                                    }
                                    t.literally.lastFile.isLocal = !0
                                }
                            }
                            ,
                            window.Webcast.RecieveTotalCount = function (e) {
                                t.literally.calcauteLiterally(),
                                    d = e.Width,
                                    p = e.Height;
                                let n = e.Width / e.Height
                                    , i = $("#white-board").width()
                                    , r = $("#white-board").height()
                                    , o = 0
                                    , a = 0
                                    , s = $(".literally");
                                n < 1 ? o = n * (a = r) : a = (o = i) / n,
                                    a >= r && (o = n * (a = r)),
                                    o = Math.floor(o),
                                    a = Math.floor(a),
                                    t.literally.defaultWidth = o,
                                    t.literally.defaultHeight = a,
                                    s.css("height", a).css("width", o).css("background", "transparent"),
                                    $(u).css("height", a).css("width", o),
                                    $(".white-board-main,.white-board-panel").css("height", a).css("width", o),
                                    m.autoZoom(g)
                            }
                            ,
                            window.Webcast.RecieveMediaStatus = function (n, i) {
                                let o = "video"
                                    , a = 0;
                                if (0 != $(u.contentWindow.document).find(`#${n} video`).length && (a = 1),
                                    0 != $(u.contentWindow.document).find(`#${n} audio`).length && (a = 1,
                                        o = "audio"),
                                    ("audio" != o || 1 != t.literally.audioTime) && ("video" != o || 1 != t.literally.videoTime) && 0 != a && t.literally.lastFile.isLocal && (t.localUser.properties.role == t.room.roles.chairman || t.localUser.properties.role == t.room.roles.speaker)) {
                                    let a = {
                                        fileid: t.literally.lastFile.fileid,
                                        currentTime: $(u.contentWindow.document).find(`#${n} ${o}`)[0].currentTime,
                                        playStatus: i,
                                        domId: n,
                                        mediaType: o,
                                        step: t.literally.lastFile.animateStep,
                                        index: t.literally.filePage[e.fileid],
                                        controlType: "media"
                                    };
                                    r.send("openFile", "others", "", a, "send")
                                }
                            }
                            ,
                            u.src = e.filepath;
                    else if ("media" == c) {
                        if ($(u.contentWindow.document).find(`#${h} ${f}`)[0].currentTime = s,
                            "audio" == f)
                            var v = setTimeout(function () {
                                $(u.contentWindow.document).find(`#${h} ${f}`)[0][l](),
                                    t.literally.audioTime = 1;
                                var e = setTimeout(function () {
                                    t.literally.audioTime = 0,
                                        clearTimeout(e)
                                }, 1e3);
                                clearTimeout(v)
                            }, 10);
                        else {
                            $(u.contentWindow.document).find(`#${h} ${f}`)[0][l](),
                                t.literally.videoTime = 1;
                            var y = setTimeout(function () {
                                t.literally.videoTime = 0,
                                    clearTimeout(y)
                            }, 1e3)
                        }
                    } else
                        t.literally.lastFile.sendMsg.slide == n && t.literally.lastFile.sendMsg.step == i || (u.contentWindow.Presentation.JumpToAnim && u.contentWindow.Presentation.JumpToAnim(i, n, !0),
                            t.literally.initWb()),
                            t.literally.lastFile.sendMsg.slide = n,
                            t.literally.lastFile.sendMsg.step = i;
                    if (o ? (t.room.currentMainPage = "whiteboard",
                        t.room.loading = !1,
                        t.literally.currentPageType = "file",
                        t.literally.lastFile = e,
                        t.literally.lastIndex = t.literally.filePage[e.fileid],
                        t.literally.filePage[e.fileid] = n,
                        t.literally.currentNum = n,
                        t.literally.totalNum = e.pagenum) : t.room.digstRefresh(() => {
                            t.room.currentMainPage = "whiteboard",
                                t.room.loading = !1,
                                t.literally.currentPageType = "file",
                                t.literally.lastFile = e,
                                t.literally.lastIndex = t.literally.filePage[e.fileid],
                                t.literally.currentNum = t.literally.filePage[e.fileid],
                                t.literally.totalNum = e.pagenum
                        }
                        ),
                        o && (t.localUser.properties.role == t.room.roles.chairman || t.localUser.properties.role == t.room.roles.speaker)) {
                        let i = {
                            fileid: t.literally.lastFile.fileid,
                            index: n,
                            step: 0,
                            controlType: "page"
                        };
                        r.send("openFile", "others", "", i, "send");
                        let o = {
                            fileType: t.literally.currentPageType,
                            total: t.literally.totalNum,
                            index: n,
                            fileid: e.fileid,
                            step: 0,
                            controlType: "page"
                        };
                        r.send("changeMeetingStatus", "server", "", o, "send")
                    }
                    $(".whiteboard-tab .file-name").html(e.filename)
                },
                openNormalFile: function (e, n, i = !1, o, a = 0, s, l, c, u, d) {
                    void 0 === n && (n = 1,
                        t.literally.filePage[e.fileid] = n),
                        i ? (t.room.loading = !0,
                            t.literally.toolBtnShow = !1,
                            t.room.docListShow = !1,
                            2 != t.room.currentTab && t.room.swiper.slideTo(2)) : t.room.digstRefresh(() => {
                                t.room.loading = !0,
                                    t.literally.toolBtnShow = !1
                            }
                            ),
                        r.getImageCacheByUrl(e.prefix, n, e.pagenum, "." + e.suffix).then(o => {
                            t.room.digstRefresh(() => {
                                t.room.loading = !1
                            }
                            ),
                                t.literally.lcStatus = api.getLcStatus();
                            let a = this
                                , s = !0;
                            ("whiteboard" == t.literally.currentPageType || t.literally.lastFile && t.literally.lastFile.fileid != e.fileid) && (t.literally.currentZoom = 0,
                                s = !1),
                                t.literally.calcauteLiterally(),
                                t.literally.currentPageType = "file",
                                t.literally.lastFile = e,
                                t.literally.lastIndex = n,
                                t.literally.filePage[e.fileid] = n;
                            let l = new Image;
                            l.src = window.URL.createObjectURL(o.data[n].blob),
                                l.onload = function () {
                                    let o = l.width / l.height
                                        , c = $("#white-board").width()
                                        , u = $("#white-board").height()
                                        , d = 0
                                        , p = 0
                                        , h = $(".literally");
                                    if (o < 1 ? d = o * (p = Math.min(c, u)) : p = (d = c) / o,
                                        p >= u && (d = o * (p = u)),
                                        d = Math.floor(d),
                                        p = Math.floor(p),
                                        t.literally.defaultWidth = d,
                                        t.literally.defaultHeight = p,
                                        h.css("height", p).css("width", d).css("background", "transparent"),
                                        $(".white-board-main,.white-board-panel").css("height", p).css("width", d),
                                        $(".white-board-main img").css("height", p).css("width", d).attr("src", `${l.src}`),
                                        a.autoZoom(s),
                                        t.literally.currentLcId = e.fileid + "-" + n,
                                        t.literally.initWb(),
                                        t.$apply(() => {
                                            t.literally.currentNum = n,
                                                t.literally.totalNum = e.pagenum
                                        }
                                        ),
                                        i && (t.localUser.properties.role == t.room.roles.chairman || t.localUser.properties.role == t.room.roles.speaker)) {
                                        let i = {
                                            fileid: e.fileid,
                                            index: n
                                        };
                                        r.send("openFile", "others", "", i, "send");
                                        let o = {
                                            fileType: t.literally.currentPageType,
                                            total: t.literally.totalNum,
                                            index: t.literally.currentNum,
                                            fileid: e.fileid
                                        };
                                        r.send("changeMeetingStatus", "server", "", o, "send")
                                    }
                                }
                        }
                        ),
                        $(".whiteboard-tab .file-name").html(e.filename),
                        o && o.stopPropagation()
                },
                deleteMeetingFile: function (e, i) {
                    new Promise((i, r) => {
                        $.ajax({
                            url: t.room.docServer + delMeetingFileAPI,
                            type: "get",
                            dataType: "json",
                            data: {
                                serial: t.room.serial,
                                fileid: e
                            },
                            success: function (e) {
                                i(e)
                            },
                            error: function () {
                                alert(n.instant("errorMsg.1004"))
                            }
                        })
                    }
                    ).then(n => {
                        if (0 == n.result) {
                            t.literally.getMeetingFile(e, !1, "delete"),
                                t.literally.lastFile && e == t.literally.lastFile.fileid && t.literally.openWhiteBoard();
                            let n = {
                                fileid: e,
                                type: "delete"
                            };
                            r.send("refreshFile", "others", "", n, "send")
                        }
                    }
                    ),
                        i && i.stopPropagation()
                },
                getMeetingFile: function (e, i = !1, r, o = 1) {
                    new Promise((e, i) => {
                        $.ajax({
                            url: t.room.docServer + getMeetingFileAPI,
                            type: "get",
                            dataType: "json",
                            data: {
                                serial: t.room.serial
                            },
                            success: function (t) {
                                e(t)
                            },
                            error: function () {
                                alert(n.instant("errorMsg.1005"))
                            }
                        })
                    }
                    ).then(n => {
                        let a = [];
                        if (0 == n.result && n.meetingfile.forEach(function (e) {
                            let t = Object.assign({});
                            t.fileid = e.fileid,
                                t.uploaduserid = e.uploaduserid,
                                t.filetype = e.filetype,
                                t.isDynamicPPT = e.isdynamicppt;
                            let n = t.filetype
                                , i = "";
                            "jpg" == n || "jpeg" == n || "png" == n || "gif" == n || "bmp" == n ? i = "07" : "doc" == n || "docx" == n ? i = "02" : "pdf" == n ? i = "05" : "ppt" == n || "pptx" == n ? i = "04" : "txt" == n ? i = "06" : "xls" != n && "xlsx" != n || (i = "03"),
                                t.imgpre = i,
                                t.filename = e.filename;
                            let r = e.swfpath.split(".");
                            t.prefix = r[0],
                                t.suffix = r[1],
                                t.filepath = e.swfpath,
                                t.pagenum = e.pagenum,
                                a.push(t)
                        }),
                            t.$apply(() => {
                                t.literally.roomFiles = a
                            }
                            ),
                            "add" == r) {
                            let n = getArrIndex(t.literally.roomFiles, e.toString(), "fileid");
                            if (n > -1) {
                                let e = t.literally.roomFiles[n];
                                t.literally.openFile(e, o, i)
                            }
                        } else if (t.literally.lastFile && t.literally.lastFile.fileid) {
                            -1 == getArrIndex(t.literally.roomFiles, t.literally.lastFile.fileid.toString(), "fileid") && t.literally.openWhiteBoard()
                        }
                    }
                    )
                },
                uploadDocument: function (e) {
                    if (t.localUser.properties.role != v.speaker && t.localUser.properties.role != v.chairman)
                        return t.room.toast = {
                            text: n.instant("room.needSpeakOrChairman"),
                            type: 4,
                            timeout: 1e3,
                            max: 1
                        },
                            e.stopPropagation(),
                            void e.preventDefault();
                    $("#filedata").val("").unbind("click change").attr("accept", " .mp4  , .webm , .ogg  , .mp3 , .wav,.xls,.xlsx,.ppt,.pptx,.doc,.docx,.txt,.pdf,.bmp,.jpg,.jpeg,.png,.gif"),
                        $("#filedata").bind("change", function () {
                            ($("#filedata")[0].files[0].size / 1024 / 1024).toFixed(0) > 100 ? alert(n.instant("errorMsg.1006")) : new Promise((e, i) => {
                                let r = new FormData
                                    , o = $("#filedata")[0].files[0]
                                    , a = o.name
                                    , s = a.substr(a.lastIndexOf(".") + 1).toLowerCase()
                                    , l = "";
                                "jpg" == s || "jpeg" == s || "png" == s || "gif" == s || "bmp" == s ? l = "07" : "doc" == s || "docx" == s ? l = "02" : "pdf" == s ? l = "05" : "ppt" == s || "pptx" == s ? l = "04" : "txt" == s ? l = "06" : "xls" != s && "xlsx" != s || (l = "03");
                                let c = $.createRadomUserid(10)
                                    , u = $(`<li class="doc-list-li" data-fileid="${c}">\n                                        <div class="doc-list-li-d" title="${a}">\n                                            <div class="doc-list-div">\n                                                <div>\n                                                    <img src="img/Doc_icon_${l}.png">\n                                                </div>\n    \n                                                <span>${a}</span>\n                                                <div class="doc-list-btnarea">\n                                                   \n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class="file-progress"></div>\n                                </li>`);
                                $("#doc-list").append(u),
                                    r.append("filedata", o),
                                    r.append("serial", t.room.serial),
                                    r.append("userid", t.localUser.userid),
                                    r.append("sender", t.localUser.userid),
                                    r.append("conversion", 1),
                                    r.append("isconversiondone", 0),
                                    $.ajax({
                                        url: t.room.docServer + uploadDocumentAPI,
                                        type: "POST",
                                        data: r,
                                        dataType: "json",
                                        contentType: !1,
                                        processData: !1,
                                        xhr: function () {
                                            var e = $.ajaxSettings.xhr();
                                            if (e.upload)
                                                return e.upload.addEventListener("progress", function (e) {
                                                    var t = e.loaded
                                                        , n = e.total
                                                        , i = Math.floor(100 * t / n);
                                                    $(`.doc-list-li[data-fileid="${c}"]`).find(".file-progress").css("width", i + "%")
                                                }, !1),
                                                    e
                                        },
                                        success: function (t) {
                                            $(`.doc-list-li[data-fileid="${c}"]`).remove(),
                                                e(t.fileid)
                                        },
                                        error: function () {
                                            $(`.doc-list-li[data-fileid="${c}"]`).remove(),
                                                alert(n.instant("errorMsg.1007"))
                                        }
                                    })
                            }
                            ).then(e => {
                                let n = {
                                    fileid: e,
                                    type: "add"
                                };
                                r.send("refreshFile", "others", "", n, "send"),
                                    t.$apply(() => {
                                        t.literally.getMeetingFile(e, !0, "add")
                                    }
                                    )
                            }
                            )
                        }).click()
                },
                pageLeft: function () {
                    if (t.literally.filePage.whiteboard.currentPage = parseInt(t.literally.filePage.whiteboard.currentPage),
                        t.literally.currentNum = parseInt(t.literally.currentNum),
                        "whiteboard" == t.literally.currentPageType) {
                        if (1 == t.literally.filePage.whiteboard.currentPage)
                            return;
                        t.literally.currentNum -= 1,
                            t.literally.openWhiteBoard(t.literally.currentNum, !0)
                    } else {
                        if (1 == t.literally.filePage[t.literally.lastFile.fileid])
                            return;
                        t.literally.currentNum -= 1,
                            t.literally.openFile(t.literally.lastFile, t.literally.currentNum, !0)
                    }
                },
                pageRight: function () {
                    if (t.literally.filePage.whiteboard.currentPage = parseInt(t.literally.filePage.whiteboard.currentPage),
                        t.literally.currentNum = parseInt(t.literally.currentNum),
                        t.literally.totalNum = parseInt(t.literally.totalNum),
                        "whiteboard" == t.literally.currentPageType)
                        t.literally.currentNum == t.literally.totalNum && (t.literally.totalNum += 1),
                            t.literally.currentNum += 1,
                            t.literally.openWhiteBoard(t.literally.currentNum, !0);
                    else {
                        if (t.literally.currentNum == t.literally.totalNum)
                            return;
                        t.literally.currentNum += 1,
                            t.literally.openFile(t.literally.lastFile, t.literally.currentNum, !0)
                    }
                }
            },
            t.$on("$viewContentLoaded", function () {
                t.room.swiper = new Swiper(".swiper-container", {
                    longSwipesRatio: .2,
                    resistanceRatio: 0,
                    preventClicksPropagation: !0,
                    on: {
                        doubleTap: function (e) {
                            t.room.digstRefresh(() => {
                                t.room.titleShow = !t.room.titleShow
                            }
                            )
                        },
                        slidePrevTransitionStart: function () {
                            1 != t.room.currentTab && t.room.currentTab--
                        },
                        slideNextTransitionStart: function () {
                            t.room.tabCount != t.room.currentTab && t.room.currentTab++
                        },
                        slideNextTransitionEnd: function () {
                            0 == $("canvas:eq(0)").height() && t.literally.initWb()
                        }
                    }
                }),
                    $("#msg").focus(() => {
                        $(".three-btn").hide()
                    }
                    ),
                    $("#msg").blur(() => {
                        $(".three-btn").show()
                    }
                    ),
                    $(document).bind("mousedown", function (e) {
                        var n = $(e.target);
                        0 == n.closest(".function-uploaddocument").length && (0 == n.closest(".user-list-panel").length && 0 == n.closest(".user-list-btn").length && t.room.userListShow && t.room.digstRefresh(() => {
                            t.room.userListShow = !1,
                                t.literally.toolBtnShow || (t.room.swiper.allowTouchMove = !0)
                        }
                        ),
                            0 == n.closest(".more").length && t.room.moreFunctionShow && (console.log("more"),
                                t.room.digstRefresh(() => {
                                    t.room.moreFunctionShow = !1,
                                        t.literally.toolBtnShow || t.room.docListShow || t.room.msgListShow || t.room.userListShow || (t.room.swiper.allowTouchMove = !0)
                                }
                                )),
                            0 == n.closest(".msg-area").length && 0 == n.closest(".more-function-area").length && t.room.msgListShow && (console.log("msg"),
                                t.room.digstRefresh(() => {
                                    t.room.msgListShow = !1,
                                        t.literally.toolBtnShow || (t.room.swiper.allowTouchMove = !0)
                                }
                                )))
                    }),
                    $(".control-area").bind("touchend", function (e) {
                        var n = $(e.originalEvent.changedTouches[0].target);
                        1 == n.closest(".control-area").length && 0 == n.closest(".control-area-content-btn").length && t.room.showLocalControl && t.room.digstRefresh(() => {
                            t.room.showLocalControl = !1
                        }
                        )
                    }),
                    $(".chairman-pwd-area").bind("touchend", function (e) {
                        var n = $(e.originalEvent.changedTouches[0].target);
                        0 == n.closest(".chairman-pwd-input-area").length && t.room.digstRefresh(() => {
                            t.room.showChairmanInput = !1
                        }
                        )
                    }),
                    $(".video-area").delegate(".video-user", "touchstart", function (e) {
                        if (1 == t.room.chairmanControlStatus.isOpen && t.localUser.properties.role != t.room.roles.chairman && (1 == t.room.chairmanControlStatus.manualSynchronize || 1 == t.room.chairmanControlStatus.globalSynchronize))
                            return;
                        if (0 == $(this).attr("data-index"))
                            return;
                        let n = $(this).attr("data-index");
                        return $(".video-user[data-index=0]").attr("data-index", n),
                            $(this).attr("data-index", 0),
                            t.room.refreshSubscribe($(".video-user[data-index=0]")),
                            t.room.refreshSubscribe($(`.video-user[data-index=${n}]`)),
                            e.stopPropagation(),
                            !1
                    }),
                    conference.addEventListener("disconnected", () => {
                        r.setIsJoined(!1),
                            alert(n.instant("errorMsg.1011"))
                    }
                    ),
                    conference.addEventListener("serverdisconnected", () => {
                        r.getIsJoined() && alert(n.instant("errorMsg.1012"))
                    }
                    ),
                    conference.addEventListener("streamadded", e => {
                        t.room.addParticipantStream(e.stream)
                    }
                    ),
                    conference.addEventListener("messagereceived", e => {
                        console.error("messagereceived", e.message),
                            r.setIsJoined(!0);
                        let i = s.str2json(e.message);
                        if ("kickParticipant" === i.name && (r.setIsJoined(!1),
                            conference.leave(),
                            alert(n.instant("errorMsg.1013")),
                            window.close(),
                            window.location.href = "/"),
                            "participantsProperties" === i.name)
                            t.room.updateRoomParticipants(i.body);
                        else if ("changeUserProperties" === i.name)
                            i.body.properties = JSON.stringify(i.body.properties),
                                t.room.updateRoomParticipant(i.body, i.fromID);
                        else if ("publishUserVideo" === i.name)
                            t.room.publishUserVideo(i.body, i.fromID);
                        else if ("unPublishUserVideo" === i.name)
                            t.room.unPublishUserVideo(i.body, i.fromID);
                        else if ("publishSuccess" === i.name)
                            t.room.publishSuccess(i.body, i.fromID);
                        else if ("getWbSnapshot" === i.name)
                            t.literally.draw(i.body),
                                t.literally.canvasToimg();
                        else if ("wbOperation" == i.name && api.lc)
                            api.handleMsg(i.body),
                                t.literally.canvasToimg();
                        else if ("openFile" == i.name) {
                            let e = i.body.fileid
                                , n = i.body.index
                                , r = i.body.controlType || "page"
                                , o = i.body.step || 0
                                , a = getArrIndex(t.literally.roomFiles, e, "fileid");
                            if (a > -1)
                                if ("page" == r)
                                    t.literally.openFile(t.literally.roomFiles[a], n, !1, void 0, o);
                                else {
                                    let e = i.body.currentTime
                                        , o = i.body.playStatus
                                        , s = i.body.domId
                                        , l = i.body.mediaType;
                                    t.literally.openFile(t.literally.roomFiles[a], n, !1, void 0, 0, e, o, r, s, l)
                                }
                        } else if ("openWhiteBoard" == i.name) {
                            let e = i.body.index
                                , n = i.body.total;
                            t.literally.openWhiteBoard(e, !1, n)
                        } else if ("refreshFile" == i.name) {
                            let e = i.body.fileid
                                , n = i.body.type;
                            t.literally.getMeetingFile(e, !1, n)
                        } else if ("meetingStatus" == i.name) {
                            let e = i.body;
                            if (0 == Object.keys(e).length)
                                t.literally.initWb();
                            else {
                                let n = e.fileType
                                    , i = e.index
                                    , r = e.total;
                                if ("whiteboard" == n)
                                    t.literally.openWhiteBoard(i, !1, r);
                                else {
                                    let n = e.fileid;
                                    t.literally.getMeetingFile(n, !1, "add", i)
                                }
                            }
                        } else if ("applySpeaker" == i.name) {
                            let e = i.fromID
                                , r = i.body.isLocal
                                , o = a.getParticipantByUserid(e).properties.username;
                            "apply" == i.body.permission ? r ? t.room.chatAppend(o + n.instant("room.applySpeaker"), "notice", "", "") : t.localUser.properties.role != t.room.roles.chairman && t.room.chatAppend(n.instant("room.chairmanGiveSpeaker_pre") + o + n.instant("room.chairmanGiveSpeaker_suf"), "notice", "", "") : "cancel" == i.body.permission && (r ? t.room.chatAppend(o + n.instant("room.cancelSpeaker"), "notice", "", "") : t.localUser.properties.role != t.room.roles.chairman && t.room.chatAppend(n.instant("room.chairmanTakeSpeaker_pre") + o + n.instant("room.chairmanTakeSpeaker_suf"), "notice", "", ""))
                        } else if ("applyChairman" == i.name) {
                            let e = i.fromID
                                , r = i.body.isLocal
                                , o = a.getParticipantByUserid(e).properties.username;
                            "apply" == i.body.permission && (r ? t.room.chatAppend(o + n.instant("room.applyChairman"), "notice", "", "") : t.localUser.properties.role != t.room.roles.chairman && t.room.chatAppend(n.instant("room.chairmanChangedTo") + o, "notice", "", "")),
                                t.room.checkIsChairman()
                        } else if ("applyPermission" == i.name) {
                            let e = i.body.type
                                , n = i.body.permission;
                            "applyChairman" == e ? t.room.checkChairmanPwd(!1, n) : "applySpeaker" == e && t.room.applySpeaker(!1, n)
                        } else if ("forceLeave" == i.name)
                            conference.leave(),
                                alert(n.instant("errorMsg.1014")),
                                window.opener = null,
                                window.open("about:blank", "_self", "").close();
                        else if ("audioPublishOrUnpublish" == i.name)
                            t.localUser.openOrStopLocalAudio();
                        else if ("changeChairmanControl" == i.name)
                            t.room.changeChairmanControl(i);
                        else if ("chat" == i.name) {
                            let e = i.fromID
                                , n = a.getParticipantByUserid(e);
                            t.room.chatAppend(i.body.message, "msg", "others", "", n)
                        } else if ("changeChairmanControlStatus" == i.name) {
                            let e = i.body;
                            t.room.changeChairmanControlStatus(e)
                        } else
                            "cancelRaiseHand" == i.name && (t.room.isRaiseHand = !1,
                                t.$apply())
                    }
                    ),
                    conference.addEventListener("participantjoined", e => {
                        console.error("participantjoined", JSON.stringify(e.participant.userId)),
                            a.addParticipant(e.participant.userId, e.participant.id, JSON.parse(e.participant.properties)),
                            e.participant.msgType = "join",
                            t.room.updateRoomParticipant(e.participant, e.participant.userId)
                    }
                    ),
                    conference.addEventListener("participantleft", e => {
                        console.error("participantleft", JSON.stringify(e.participant.userId));
                        let i = a.removeParticipantByUserid(e.participant.userId);
                        $(`.video-user[data-userId="${e.participant.userId}"]`).remove(),
                            t.room.unPublishUserVideo(void 0, e.participant.userId),
                            null != i && t.room.chatAppend(i.properties.username + n.instant("room.leaveMeeting"), "notice", "", "")
                    }
                    ),
                    a.addEventListener("update-participants", () => {
                        t.$apply(() => {
                            t.room.participants = a.getParticipants()
                        }
                        )
                    }
                    ),
                    window.onbeforeunload = function (e) {
                        r.setIsJoined(!1),
                            conference.leave()
                    }
                    ,
                    t.room.windowResize(),
                    new Promise((e, n) => {
                        if (/Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent)) {
                            let n = 3
                                , i = {
                                    videoDeviceId: "",
                                    cameraName: x
                                };
                            i.videoDeviceId = w,
                                t.localUser.defaultCamera = w,
                                0 != t.localUser.defaultCamera.length && (t.localUser.properties.camerasForName.push(i),
                                    t.localUser.constraints[t.localUser.defaultCamera] = {
                                        video: !1,
                                        audio: !1
                                    },
                                    t.localUser.properties.cameras.push(t.localUser.defaultCamera)),
                                t.localUser.properties.state = n,
                                t.localUser.frontCapture = t.localUser.defaultCamera,
                                t.localUser.backCapture = t.localUser.defaultCamera + "1",
                                t.$applyAsync(),
                                o.setLocalUser(t.localUser),
                                o.setLocalUserState(n),
                                e({})
                        } else
                            navigator.mediaDevices.enumerateDevices().then(function (n) {
                                let i = []
                                    , r = []
                                    , a = []
                                    , s = [];
                                n.forEach(function (e) {
                                    let t = {
                                        groupId: e.groupId,
                                        deviceId: e.deviceId,
                                        label: e.label,
                                        kind: e.kind
                                    };
                                    "communications" != e.groupId && "communications" != e.deviceId && "通讯" != e.label && "默认" != e.deviceId && "default" != e.deviceId && ("videoinput" === e.kind && i.push(t),
                                        "audioinput" === e.kind && s.push(e.deviceId))
                                }),
                                    2 == i.length ? (r.push(i[0].deviceId),
                                        a.push(i[1].deviceId)) : i.forEach(function (e) {
                                            "communications" != e.groupId && "communications" != e.deviceId && "通讯" != e.label && "默认" != e.deviceId && "default" != e.deviceId && ("videoinput" === e.kind && (e.label.toLowerCase().indexOf("front") > -1 ? r.push(e.deviceId) : e.label.toLowerCase().indexOf("back") > -1 ? a.push(e.deviceId) : r.push(e.deviceId)),
                                                "audioinput" === e.kind && s.push(e.deviceId))
                                        }),
                                    D = angular.copy(r),
                                    A = angular.copy(a),
                                    function e(t, n, i = 0, r, o = 1, a = D.length + A.length) {
                                        void 0 != t && D.length > 0 && i <= D.length - 1 ? navigator.mediaDevices.getUserMedia({
                                            video: {
                                                deviceId: {
                                                    exact: D[i]
                                                }
                                            },
                                            audio: !1
                                        }).then(function (t) {
                                            if (t.getTracks().forEach(e => e.stop()),
                                                M.push(D[i]),
                                                i < D.length && i + 1 != D.length) {
                                                let t = i + 1
                                                    , n = Math.round(o / a * 100);
                                                console.log(n),
                                                    _.html(n + "%"),
                                                    e(D, void 0, t, r, ++o)
                                            } else {
                                                let t = Math.round(o / a * 100);
                                                console.log(t),
                                                    _.html(t + "%"),
                                                    o++,
                                                    0 == A.length ? r() : e(void 0, A, 0, r, o)
                                            }
                                        }).catch(function (t) {
                                            if (i < D.length && i + 1 != D.length) {
                                                let t = i + 1
                                                    , n = Math.round(o / a * 100);
                                                console.log(n),
                                                    _.html(n + "%"),
                                                    e(D, void 0, t, r, ++o)
                                            } else {
                                                let t = Math.round(o / a * 100);
                                                console.log(t),
                                                    _.html(t + "%"),
                                                    o++,
                                                    0 == A.length ? r() : e(void 0, A, 0, r, o)
                                            }
                                        }) : void 0 != n && A.length > 0 && i <= A.length - 1 && navigator.mediaDevices.getUserMedia({
                                            video: {
                                                deviceId: {
                                                    exact: A[i]
                                                }
                                            },
                                            audio: !1
                                        }).then(function (t) {
                                            if (t.getTracks().forEach(e => e.stop()),
                                                O.push(A[i]),
                                                i < A.length && i + 1 != A.length) {
                                                let t = i + 1
                                                    , n = Math.round(o / a * 100);
                                                console.log(n),
                                                    _.html(n + "%"),
                                                    e(void 0, A, t, r, ++o)
                                            } else
                                                r()
                                        }).catch(function (t) {
                                            if (console.log((new Date).getTime()),
                                                console.log(t),
                                                i < A.length && i + 1 != A.length) {
                                                let t = i + 1
                                                    , n = Math.round(o / a * 100);
                                                console.log(n),
                                                    _.html(n + "%"),
                                                    e(void 0, A, t, r, ++o)
                                            } else
                                                r()
                                        }),
                                            D && A && 0 == D.length && 0 == A.length && r()
                                    }(r, a, 0, () => {
                                        _.html("100%");
                                        let n = 0
                                            , i = {
                                                videoDeviceId: "",
                                                cameraName: x
                                            };
                                        M.length > 0 ? (n += 2,
                                            i.videoDeviceId = M[0],
                                            t.localUser.defaultCamera = M[0]) : O.length > 0 && (n += 2,
                                                i.videoDeviceId = O[O.length - 1],
                                                t.localUser.defaultCamera = O[O.length - 1]),
                                            0 != t.localUser.defaultCamera.length && (t.localUser.properties.camerasForName.push(i),
                                                t.localUser.constraints[t.localUser.defaultCamera] = {
                                                    video: !1,
                                                    audio: !1
                                                },
                                                t.localUser.properties.cameras.push(t.localUser.defaultCamera)),
                                            s.length > 0 && (n += 1),
                                            t.room.digstRefresh(() => {
                                                t.localUser.properties.state = n,
                                                    M.length > 0 ? t.localUser.frontCapture = M[0] : O.length > 0 && (t.localUser.frontCapture = O[O.length - 1]),
                                                    O.length > 0 ? t.localUser.backCapture = O[O.length - 1] : M.length > 0 && (t.localUser.backCapture = M[0])
                                            }
                                            ),
                                            o.setLocalUser(t.localUser),
                                            o.setLocalUserState(n),
                                            e({})
                                    }
                                    )
                            })
                    }
                    ).then(() => {
                        createToken(S, w, "presenter", t.localUser.properties, function (e) {
                            conference.join(e).then(e => {
                                if ($(".masker").hide(),
                                    r.setIsJoined(!0),
                                    t.literally.getMeetingFile(),
                                    t.localUser.participantid = e.self.id,
                                    $(".video-user.main").find("video").attr("data-participantId", e.self.id),
                                    $(".video-user.main").find("video").attr("data-videoDeviceId", t.localUser.defaultCamera),
                                    o.setLocalUser(t.localUser, !0),
                                    t.localUser.properties.role == v.chairman) {
                                    let e = {};
                                    r.send("applyChairman", "others", "", e, "send")
                                }
                                let n = e.participants;
                                t.room.updateRoomParticipants(n),
                                    e.remoteStreams.forEach(e => {
                                        "mixed" !== e.source.audio && t.room.addParticipantStream(e)
                                    }
                                    );
                                let i = JSON.parse(e.messageList);
                                for (let e = 0; e < i.length; e++) {
                                    let n = i[e];
                                    if ("chairmanControlStatus" == n.name)
                                        t.room.initChairmanControlStatus(n.body);
                                    else if ("meetingStatus" == n.name) {
                                        let e = n.body
                                            , i = e.fileType
                                            , r = e.index
                                            , o = e.total;
                                        if ("whiteboard" == i)
                                            t.literally.openWhiteBoard(r, !1, o);
                                        else {
                                            let n = e.fileid;
                                            t.literally.getMeetingFile(n, !1, "add", r)
                                        }
                                    }
                                }
                                t.localUser.openOrStopLocalVideo(!0, t.localUser.defaultCamera, void 0, void 0, void 0, !1)
                            }
                                , e => {
                                    $(".masker").hide(),
                                        e && "overlimit" == e.message ? alert(n.instant("errorMsg.1008")) : e && "overDeadLine" == e.message ? alert(n.instant("errorMsg.1009")) : alert(n.instant("errorMsg.1010"))
                                }
                            )
                        }, t.room.mediaServer)
                    }
                    )
            });
        let M = []
            , O = []
            , D = []
            , A = []
            , _ = $("#percent");
        $(window).resize(function () {
            t.room.windowResize(),
                t.room.swiper && t.room.swiper.update(),
                t.literally.lcStatus = api.getLcStatus(),
                t.literally.calcauteLiterally(!0),
                null != t.literally.lastFile ? t.literally.openFile(t.literally.lastFile, t.literally.lastIndex) : t.literally.initWb()
        })
    }
    ]),
    wy_room.service("conferenceService", ["messageService", function (e) {
        var t = !1;
        let n = null
            , i = []
            , r = null
            , o = null
            , a = [];
        this.initConference = function () {
            n = new Wy.Conference.ConferenceClient
        }
            ,
            this.clearConference = function () {
                null != n && (n.leave(),
                    n = null)
            }
            ,
            this.unpublish = function () {
                null !== i && (i.stop(),
                    i = null)
            }
            ,
            this.send = function (i, r, o, a, s) {
                if (!t)
                    return console.error("未加入到会议");
                let l = {
                    opt: s,
                    id: o,
                    toID: r,
                    name: i,
                    body: a
                }
                    , c = e.json2str(l);
                n.send(c),
                    console.log("发送信令:" + i + ":" + c)
            }
            ,
            this.setIsJoined = function (e) {
                t = e
            }
            ,
            this.getIsJoined = function () {
                return t
            }
            ,
            this.setLocalStream = function (e) {
                r = e
            }
            ,
            this.setLocalMediaStream = function (e) {
                o = e
            }
            ,
            this.getConference = function () {
                return n
            }
            ,
            this.getImageCacheByUrl = function (e, t, n, i, r = 3) {
                n = parseInt(n);
                let o = getArrIndex(a, e, "url");
                return new Promise(s => {
                    if (-1 == o) {
                        let o = new ImageCache(e, n, i)
                            , l = o.cacheImage(t, r);
                        Promise.all(l).then(() => {
                            a.push(o),
                                s(o)
                        }
                        )
                    } else {
                        let e = a[o]
                            , n = e.cacheImage(t, r);
                        Promise.all(n).then(() => {
                            s(e)
                        }
                        )
                    }
                }
                )
            }
    }
    ]),
    wy_room.directive("toast", function () {
        return {
            restrict: "E",
            require: "ngModel",
            scope: {
                ngModel: "="
            },
            link: function (e, t, n, i) {
                var r = 3e3
                    , o = 3
                    , a = n.position || "center";
                $(".toast-" + a).remove();
                var s = $('<div class="toast-box toast-' + a + '"></div>').appendTo("body");
                e.$watch("ngModel", function (e) {
                    if (e) {
                        var t;
                        t = angular.isString(e) ? {
                            text: e
                        } : angular.copy(e);
                        var n = isNaN(t.timeout) ? r : t.timeout;
                        if (void 0 != t.text && "" != t.text) {
                            if (s.find("div").length >= (t.max || o))
                                return;
                            var i = $('<div class="toast-item toast-' + getToastClass(t.type) + '">' + t.text + "</div><br/>").appendTo(s);
                            setTimeout(function () {
                                setTimeout(function () {
                                    i.remove()
                                }, 500)
                            }, n)
                        }
                    }
                })
            }
        }
    }),
    wy_room.filter("checkVideoOrAudio", () => (e, t) => {
        if (void 0 === e.constraints[t.videoDeviceId])
            return;
        let n = e.constraints.audio
            , i = e.constraints[t.videoDeviceId].video;
        return "audio" === t.type ? n ? "img/userlist_mic-1.png" : "img/userlist_mic-8.png" : "video" === t.type ? i ? "img/userlist_cam-1.png" : "img/userlist_cam-8.png" : void 0
    }
    ),
    wy_room.filter("checkVideoOrAudioAtMobile", () => (e, t) => {
        if ("audio" === t.type) {
            return e.constraints.audio ? "img/mobile/remote_audio_on.png" : "img/mobile/remote_audio_off.png"
        }
        if ("video" === t.type) {
            if (void 0 === e.constraints[t.videoDeviceId])
                return "img/mobile/remote_video_off.png";
            return e.constraints[t.videoDeviceId].video ? "img/mobile/remote_video_on.png" : "img/mobile/remote_video_off.png"
        }
    }
    ),
    wy_room.directive("ngTouchstart", function () {
        return {
            controller: ["$scope", "$element", function (e, t) {
                t.bind("touchstart", function (n) {
                    n.stopPropagation();
                    var i = t.attr("ng-touchstart");
                    e.$event = n,
                        e.$apply(i)
                })
            }
            ]
        }
    }),
    wy_room.service("userStateService", ["conferenceService", function (e) {
        let t = {}
            , n = []
            , i = []
            , r = null
            , o = null
            , a = null
            , s = null
            , l = null
            , c = null;
        this.setLocalAudioStream = function (e) {
            r = e
        }
            ,
            this.getLocalAudioStream = function () {
                return r
            }
            ,
            this.setLocalAudioPublication = function (e) {
                o = e
            }
            ,
            this.getLocalAudioPublication = function () {
                return o
            }
            ,
            this.setScreenStream = function (e) {
                a = e
            }
            ,
            this.getScreenStream = function () {
                return a
            }
            ,
            this.setScreenPublication = function (e) {
                s = e
            }
            ,
            this.getScreenPublication = function () {
                return s
            }
            ,
            this.setLiveStream = function (e) {
                l = e
            }
            ,
            this.getLiveStream = function () {
                return l
            }
            ,
            this.setLivePublication = function (e) {
                c = e
            }
            ,
            this.getLivePublication = function () {
                return c
            }
            ,
            this.setLocalUser = function (n, i = !1) {
                let r = {
                    userId: (t = n).userid,
                    properties: t.properties
                };
                i || e.send("changeUserProperties", "server", "", r, "send")
            }
            ,
            this.setUsername = function (n) {
                if (t.username === n)
                    return;
                t.username = n;
                let i = {
                    userId: t.userid,
                    properties: {
                        username: n
                    }
                };
                e.send("changeUserProperties", "server", "", i, "send")
            }
            ,
            this.updateLocalUserConstraints = function (e, n) {
                t.constraints[e + "Enabled"] = n
            }
            ,
            this.setLocalUserState = function (n) {
                if (t.state === n)
                    return;
                let i = $("#localUser");
                0 === n ? (i.find(".user-cam").css("visibility", "hidden"),
                    i.find(".user-mic").css("visibility", "hidden")) : 1 === n ? (i.find(".user-cam").css("visibility", "hidden"),
                        i.find(".user-mic").css("visibility", "visible")) : 2 === n ? (i.find(".user-cam").css("visibility", "visible"),
                            i.find(".user-mic").css("visibility", "hidden")) : 3 === n && (i.find(".user-cam").css("visibility", "visible"),
                                i.find(".user-mic").css("visibility", "visible")),
                    t.state = n;
                let r = {
                    userId: t.userid,
                    properties: {
                        state: n
                    }
                };
                e.send("changeUserProperties", "server", "", r, "send")
            }
            ,
            this.getLocalUserState = function () {
                return t.state
            }
            ,
            this.addStream = function (e) {
                -1 === getArrIndex(n, e.id, "id") && n.push(e)
            }
            ,
            this.removeStream = function (e) {
                let t = getArrIndex(n, e, "id");
                -1 !== t && (n[t].mediaStream && n[t].mediaStream.getVideoTracks()[0].stop(),
                    n.splice(t, 1))
            }
            ,
            this.getStream = function (e) {
                let t = getArrIndex(n, e, "id");
                return -1 === t ? {} : n[t]
            }
            ,
            this.getStreamByName = function (e) {
                let t = getArrIndex(n, e, "name");
                return -1 === t ? null : n[t]
            }
            ,
            this.updateStream = function (e, t, i) {
                let r = getArrIndex(n, e, "id");
                -1 !== r && (n[r][t] = i)
            }
            ,
            this.addPublication = function (e) {
                -1 === getArrIndex(i, e, "id") && i.push(e)
            }
            ,
            this.getPublicationByName = function (e) {
                let t = getArrIndex(i, e, "name");
                return -1 === t ? null : i[t]
            }
            ,
            this.removePublicationByName = function (e) {
                let t = getArrIndex(i, e, "name");
                -1 !== t && i.splice(t, 1)
            }
            ,
            this.changeAudioOrVideoTrack = function (e, i, r) {
                let o = "get" + i + "Tracks"
                    , a = getArrIndex(n, e, "name");
                -1 !== a && n[a].mediaStream[o]().forEach(e => {
                    void 0 === r && (r = t.constraints[i.toLowerCase() + "Enabled"]),
                        e.enabled = r
                }
                )
            }
            ,
            this.getMediaConstraints = function () {
                return t.constraints
            }
    }
    ]),
    wy_room.directive("toggle", ["$translate", function (e) {
        return {
            restrict: "E",
            replace: !0,
            scope: {
                ngModel: "=",
                opsite: "="
            },
            template: '<label class="ro-switch"><input type="checkbox" ng-model="ngModel" ng-true-value="1" ng-false-value="0"><div class="slider"><div class="slider-thumb"></div><span>OFF</span></div></label>',
            link: function (e, t, n) {
                e.$watch("ngModel", function (t) {
                    n.opsite && 1 == t && (e.opsite = 0)
                })
            }
        }
    }
    ]),
    wy_room.filter("arr2str", () => (e = []) => e.join("、")),
    wy_room.filter("checkVideoOrAudio", () => (e, t) => {
        if ("audio" === t.type) {
            return e.constraints.audio ? "img/userlist_mic-1.png" : "img/userlist_mic-8.png"
        }
        if ("video" === t.type) {
            if (void 0 === e.constraints[t.videoDeviceId])
                return;
            return e.constraints[t.videoDeviceId].video ? "img/userlist_cam-1.png" : "img/userlist_cam-8.png"
        }
    }
    ),
    wy_room.filter("getRoleImg", () => {
        const e = {
            presenter: "img/com_user_pc.png",
            chairman: "img/ChairMan16_pc.png",
            speaker: "img/MainSpeaker_pc.png"
        };
        return t => {
            let n = void 0 === t.properties.role ? "presenter" : t.properties.role;
            return e[n]
        }
    }
    ),
    wy_room.filter("getDeviceTypeImg", () => {
        const e = {
            pc: "img/pc.png",
            mobile: "img/mobile.png",
            tv: "img/tv.png"
        };
        return t => (void 0 === t ? t = "pc" : "pc" == t.toLowerCase() ? t = "pc" : "android" == t.toLowerCase() || "ios" == t.toLowerCase() ? t = "mobile" : "tv" == t.toLowerCase() && (t = "tv"),
            e[t])
    }
    ),
    wy_room.filter("getDeviceName", () => (e, t) => {
        return e[getArrIndex(e, t.deviceId, "deviceId")].label
    }
    ),
    wy_room.filter("getRoleImgAtMobile", () => {
        const e = {
            pc: {
                presenter: "img/mobile/normal_user.png",
                chairman: "img/mobile/host_user.png",
                speaker: "img/mobile/main_speaker.png"
            },
            mobile: {
                presenter: "img/mobile/normal_user_phone.png",
                chairman: "img/mobile/host_user_phone.png",
                speaker: "img/mobile/main_speaker_phone.png"
            }
        };
        return t => {
            let n = "pc" === t.properties.deviceType ? "pc" : "mobile"
                , i = void 0 === t.properties.role ? "presenter" : t.properties.role;
            return e[n][i]
        }
    }
    ),
    wy_room.service("participantService", function () {
        let e = []
            , t = new EventEmitter;
        this.addEventListener = function (e, n) {
            t.addListener(e, n)
        }
            ,
            this.addParticipant = function (t, n, i = {}) {
                if ("huikong" == t)
                    return;
                if (-1 !== getArrIndex(e, t, "userid"))
                    return;
                let r = new Participant(t, n, i);
                e.push(r)
            }
            ,
            this.removeParticipantByUserid = function (n) {
                let i = getArrIndex(e, n, "userid");
                if (-1 === i)
                    return null;
                let r = e.splice(i, 1);
                return t.emitEvent("update-participants", []),
                    r[0]
            }
            ,
            this.updateParticipantByUserid = function (n, i, r) {
                let o = getArrIndex(e, n, "userid");
                if (-1 === o)
                    return;
                let a = e[o];
                "properties" === i ? (Object.assign(a[i], r),
                    void 0 !== a[i].cameras && a[i].cameras.forEach(function (e) {
                        void 0 === a.constraints[e] && (a.constraints[e] = {
                            video: !1
                        })
                    })) : a[i] = r,
                    t.emitEvent("update-participants", [])
            }
            ,
            this.updateParticipantConstraints = function (t, n, i, r) {
                let o = getArrIndex(e, t, "userid");
                if (-1 === o)
                    return;
                let a = e[o];
                "audio" == n ? a.constraints[n] = i : a.constraints[r][n] = i
            }
            ,
            this.addParticipantStreamByParticipantId = function (t, n) {
                let i = getArrIndex(e, t, "participantId");
                if (-1 === i)
                    return null;
                let r = e[i];
                return r.streams.push(n),
                    r
            }
            ,
            this.getParticipantStream = function (t, n) {
                let i = getArrIndex(e, t, "participantId");
                if (-1 === i)
                    return null;
                let r = e[i]
                    , o = getArrIndex(r.streams, n, "name");
                return -1 === o ? null : r.streams[o]
            }
            ,
            this.getParticipantStreamByUserId = function (t, n) {
                let i = getArrIndex(e, t, "userid");
                if (-1 === i)
                    return null;
                let r = e[i]
                    , o = getArrIndex(r.streams, n, "name");
                return -1 === o ? null : r.streams[o]
            }
            ,
            this.getParticipantStreamByUserIdAndStreamId = function (t, n) {
                let i = getArrIndex(e, t, "userid");
                if (-1 === i)
                    return null;
                let r = e[i]
                    , o = getArrIndex(r.streams, n, "id");
                return -1 === o ? null : r.streams[o]
            }
            ,
            this.removeParticipantStreamByParticipantIdAndStreamId = function (n, i) {
                let r = getArrIndex(e, n, "participantId");
                if (-1 === r)
                    return;
                let o = e[r]
                    , a = getArrIndex(o.streams, i, "id");
                if (-1 === a)
                    return;
                this.removeParticipantSubsciptionByParticipantIdAndStreamId(n, i);
                let s = o.streams.splice(a, 1);
                return t.emitEvent("remote-stream-left", [n, i]),
                    s
            }
            ,
            this.addParticipantSubsciptionByParticipantId = function (t, n) {
                let i = getArrIndex(e, t, "userid");
                if (-1 === i)
                    return;
                let r = e[i];
                getArrIndex(r.subscriptions, n.id, "id") > -1 || r.subscriptions.push(n)
            }
            ,
            this.getParticipantSubsciptionByParticipantIdAndStreamId = function (t, n) {
                let i = getArrIndex(e, t, "participantId");
                if (-1 === i)
                    return null;
                let r = e[i]
                    , o = getArrIndex(r.subscriptions, n, "streamId");
                return -1 === o ? null : r.subscriptions[o]
            }
            ,
            this.removeParticipantSubsciptionByParticipantIdAndStreamId = function (t, n) {
                let i = getArrIndex(e, t, "participantId");
                if (-1 === i)
                    return;
                let r = e[i]
                    , o = getArrIndex(r.subscriptions, n, "streamId");
                -1 !== o && r.subscriptions.splice(o, 1)
            }
            ,
            this.getParticipantByUserid = function (t) {
                let n = getArrIndex(e, t, "userid");
                return -1 === n ? {} : e[n]
            }
            ,
            this.getParticipantByParticipantId = function (t) {
                let n = getArrIndex(e, t, "participantId");
                return -1 === n ? null : e[n]
            }
            ,
            this.getParticipants = function () {
                return (e = e.sort(function (e, t) {
                    return e.constraints.audio.toString().length - t.constraints.audio.toString().length
                })).filter(e => Object.keys(e.properties).length > 0)
            }
    }),
    wy_room.service("messageService", function () {
        this.str2json = function (e) {
            return JSON.parse(e)
        }
            ,
            this.json2str = function (e) {
                return JSON.stringify(e)
            }
    }),
    wy_room.service("joinInfoService", function () {
        let e = {};
        this.setJoinInfo = function (t) {
            Object.assign(e, t)
        }
            ,
            this.getJoinInfo = function () {
                return e
            }
            ,
            this.updateJoinInfo = function (t, n) {
                e[t] = n
            }
    }),
    wy_room.service("recordService", ["participantService", "userStateService", function (e, t) {
        let n = null
            , i = []
            , r = null
            , o = null
            , a = null
            , s = null
            , l = null
            , c = null
            , u = null
            , d = null
            , p = null
            , h = null;
        const f = window.AudioContext || window.webkitAudioContext;
        function m(e) {
            return e < 10 ? "0" + e : e
        }
        this.setInter = function (e) {
            c = e
        }
            ,
            this.clearInter = function () {
                clearInterval(c),
                    c = null
            }
            ,
            this.getRecordTime = function () {
                return 45
            }
            ,
            this.createContext = function () {
                null == a && (a = new f,
                    s = a.createMediaStreamDestination(),
                    l = a.createMediaStreamDestination()),
                    null != a && (null != u && null != d || (u = a.createOscillator(),
                        d = a.createGain(),
                        u.connect(d),
                        d.connect(s)))
            }
            ,
            this.createLiveContext = function () {
                null == a && (a = new f,
                    s = a.createMediaStreamDestination(),
                    l = a.createMediaStreamDestination()),
                    null != a && (null != p && null != h || (p = a.createOscillator(),
                        h = a.createGain(),
                        p.connect(h),
                        h.connect(l)))
            }
            ,
            this.connectStream = function (e) {
                this.createContext(),
                    a.createMediaStreamSource(e).connect(s)
            }
            ,
            this.connectLiveStream = function (e) {
                this.createLiveContext(),
                    a.createMediaStreamSource(e).connect(l)
            }
            ,
            this.getLiveOutPutStream = function () {
                return this.createLiveContext(),
                    l.stream
            }
            ,
            this.startRecord = function (e, t) {
                let a = this;
                i = [],
                    this.createContext(),
                    n = e,
                    t && null == c && this.connectStream(n);
                o = new MediaStream([n.getVideoTracks()[0], s.stream.getAudioTracks()[0]]),
                    (r = new MediaRecorder(o, {
                        mimeType: "video/webm"
                    })).ondataavailable = function (e) {
                        i.push(e.data)
                    }
                    ,
                    r.onstop = function () {
                        a.downloadFile(),
                            null != c && a.startRecord(n, t)
                    }
                    ,
                    r.start(10)
            }
            ,
            this.stopMediaTracks = function () {
                n.getVideoTracks()[0].stop(),
                    n.getAudioTracks()[0] && n.getAudioTracks()[0].stop(),
                    this.createFile()
            }
            ,
            this.downloadFile = function () {
                let e = this
                    , t = new Blob(i, {
                        type: r.mimeType
                    })
                    , n = URL.createObjectURL(t)
                    , o = document.createElement("a");
                var a, s, l, u, d, p, h;
                o.href = n,
                    o.download = (a = new Date,
                        s = a.getFullYear(),
                        l = a.getMonth() + 1,
                        u = a.getDate(),
                        d = a.getHours(),
                        p = a.getMinutes(),
                        h = a.getSeconds(),
                        s + "-" + m(l) + "-" + m(u) + " " + m(d) + "_" + m(p) + "_" + m(h) + ".webm"),
                    document.body.appendChild(o),
                    o.click(),
                    setTimeout(function () {
                        window.URL.revokeObjectURL(n),
                            document.body.removeChild(o),
                            null == c && e.clearAll()
                    }, 100)
            }
            ,
            this.clearAll = function () {
                n = null,
                    i = [],
                    o = null
            }
            ,
            this.createFile = function () {
                r.stop()
            }
    }
    ]);
